(()=>{function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},i=t.parcelRequire8ef2;null==i&&((i=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return r[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){n[e]=t},t.parcelRequire8ef2=i),i.register("eDPnM",(function(e,t){"use strict";var r=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0});var n=r(i("2H6V9")),s=r(i("a4yvB"));window.AVLTree=n.default,window.SymBfw=s.default})),i.register("2H6V9",(function(t,r){var n;n=t.exports,Object.defineProperty(n,"__esModule",{value:!0,configurable:!0}),e(t.exports,"default",(()=>l));var s=i("1AaXD");function a(e,t){return e>t?1:e<t?-1:0}function o(e){var t=e.right;return e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent,t.parent&&(t.parent.left===e?t.parent.left=t:t.parent.right=t),e.parent=t,t.left=e,e.balanceFactor+=1,t.balanceFactor<0&&(e.balanceFactor-=t.balanceFactor),t.balanceFactor+=1,e.balanceFactor>0&&(t.balanceFactor+=e.balanceFactor),t}function u(e){var t=e.left;return e.left=t.right,e.left&&(e.left.parent=e),t.parent=e.parent,t.parent&&(t.parent.left===e?t.parent.left=t:t.parent.right=t),e.parent=t,t.right=e,e.balanceFactor-=1,t.balanceFactor>0&&(e.balanceFactor-=t.balanceFactor),t.balanceFactor-=1,e.balanceFactor<0&&(t.balanceFactor+=e.balanceFactor),t}class l{constructor(e,t=!1){this._comparator=e||a,this._root=null,this._size=0,this._noDuplicates=!!t}destroy(){return this.clear()}clear(){return this._root=null,this._size=0,this}get size(){return this._size}contains(e){if(this._root)for(var t=this._root,r=this._comparator;t;){var n=r(e,t.key);if(0===n)return!0;t=n<0?t.left:t.right}return!1}next(e){var t=e;if(t)if(t.right)for(t=t.right;t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t}prev(e){var t=e;if(t)if(t.left)for(t=t.left;t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t}forEach(e){for(var t=this._root,r=[],n=!1,i=0;!n;)t?(r.push(t),t=t.left):r.length>0?(e(t=r.pop(),i++),t=t.right):n=!0;return this}range(e,t,r,n){const i=[],s=this._comparator;let a,o=this._root;for(;0!==i.length||o;)if(o)i.push(o),o=o.left;else{if(o=i.pop(),a=s(o.key,t),a>0)break;if(s(o.key,e)>=0&&r.call(n,o))return this;o=o.right}return this}keys(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.key),e=e.right):n=!0;return r}values(){for(var e=this._root,t=[],r=[],n=!1;!n;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),r.push(e.data),e=e.right):n=!0;return r}at(e){for(var t=this._root,r=[],n=!1,i=0;!n;)if(t)r.push(t),t=t.left;else if(r.length>0){if(t=r.pop(),i===e)return t;i++,t=t.right}else n=!0;return null}minNode(){var e=this._root;if(!e)return null;for(;e.left;)e=e.left;return e}maxNode(){var e=this._root;if(!e)return null;for(;e.right;)e=e.right;return e}min(){var e=this._root;if(!e)return null;for(;e.left;)e=e.left;return e.key}max(){var e=this._root;if(!e)return null;for(;e.right;)e=e.right;return e.key}isEmpty(){return!this._root}pop(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t}popMax(){var e=this._root,t=null;if(e){for(;e.right;)e=e.right;t={key:e.key,data:e.data},this.remove(e.key)}return t}find(e){for(var t,r=this._root,n=this._comparator;r;){if(0===(t=n(e,r.key)))return r;r=t<0?r.left:r.right}return null}insert(e,t){if(!this._root)return this._root={parent:null,left:null,right:null,balanceFactor:0,key:e,data:t},this._size++,this._root;var r=this._comparator,n=this._root,i=null,s=0;if(this._noDuplicates)for(;n;){if(i=n,0===(s=r(e,n.key)))return null;n=s<0?n.left:n.right}else for(;n;)i=n,n=(s=r(e,n.key))<=0?n.left:n.right;var a,l={left:null,right:null,balanceFactor:0,parent:i,key:e,data:t};for(s<=0?i.left=l:i.right=l;i&&((s=r(i.key,e))<0?i.balanceFactor-=1:i.balanceFactor+=1,0!==i.balanceFactor);){if(i.balanceFactor<-1){1===i.right.balanceFactor&&u(i.right),a=o(i),i===this._root&&(this._root=a);break}if(i.balanceFactor>1){-1===i.left.balanceFactor&&o(i.left),a=u(i),i===this._root&&(this._root=a);break}i=i.parent}return this._size++,l}remove(e){if(!this._root)return null;for(var t=this._root,r=this._comparator,n=0;t&&0!==(n=r(e,t.key));)t=n<0?t.left:t.right;if(!t)return null;var i,s,a=t.key;if(t.left){for(i=t.left;i.left||i.right;){for(;i.right;)i=i.right;t.key=i.key,t.data=i.data,i.left&&(t=i,i=i.left)}t.key=i.key,t.data=i.data,t=i}if(t.right){for(s=t.right;s.left||s.right;){for(;s.left;)s=s.left;t.key=s.key,t.data=s.data,s.right&&(t=s,s=s.right)}t.key=s.key,t.data=s.data,t=s}for(var l,c=t.parent,h=t;c&&(c.left===h?c.balanceFactor-=1:c.balanceFactor+=1,c.balanceFactor<-1?(1===c.right.balanceFactor&&u(c.right),l=o(c),c===this._root&&(this._root=l),c=l):c.balanceFactor>1&&(-1===c.left.balanceFactor&&o(c.left),l=u(c),c===this._root&&(this._root=l),c=l),-1!==c.balanceFactor&&1!==c.balanceFactor);)h=c,c=c.parent;return t.parent&&(t.parent.left===t?t.parent.left=null:t.parent.right=null),t===this._root&&(this._root=null),this._size--,a}load(e=[],t=[],r){if(0!==this._size)throw new Error("bulk-load: tree is not empty");const n=e.length;return r&&(0,s.sort)(e,t,0,n-1,this._comparator),this._root=(0,s.loadRecursive)(null,e,t,0,n),(0,s.markBalance)(this._root),this._size=n,this}isBalanced(){return(0,s.isBalanced)(this._root)}toString(e){return(0,s.print)(this._root,e)}}l.default=l})),i.register("1AaXD",(function(t,r){function n(e,t=(e=>e.key)){var r=[];return i(e,"",!0,(e=>r.push(e)),t),r.join("")}function i(e,t,r,n,s){if(e){n(`${t}${r?"└── ":"├── "}${s(e)}\n`);const a=t+(r?"    ":"│   ");e.left&&i(e.left,a,!1,n,s),e.right&&i(e.right,a,!0,n,s)}}function s(e){if(null===e)return!0;var t=a(e.left),r=a(e.right);return!!(Math.abs(t-r)<=1&&s(e.left)&&s(e.right))}function a(e){return e?1+Math.max(a(e.left),a(e.right)):0}function o(e,t,r,n,i){const s=i-n;if(s>0){const a=n+Math.floor(s/2),u={key:t[a],data:r[a],parent:e};return u.left=o(u,t,r,n,a),u.right=o(u,t,r,a+1,i),u}return null}function u(e){if(null===e)return 0;const t=u(e.left),r=u(e.right);return e.balanceFactor=t-r,Math.max(t,r)+1}function l(e,t,r,n,i){if(r>=n)return;const s=e[r+n>>1];let a=r-1,o=n+1;for(;;){do{a++}while(i(e[a],s)<0);do{o--}while(i(e[o],s)>0);if(a>=o)break;let r=e[a];e[a]=e[o],e[o]=r,r=t[a],t[a]=t[o],t[o]=r}l(e,t,r,o,i),l(e,t,o+1,n,i)}e(t.exports,"print",(()=>n)),e(t.exports,"isBalanced",(()=>s)),e(t.exports,"loadRecursive",(()=>o)),e(t.exports,"markBalance",(()=>u)),e(t.exports,"sort",(()=>l))})),i.register("a4yvB",(function(e,r){(function(){var r=r||{};r.scope={},r.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},r.arrayIterator=function(e){return{next:r.arrayIteratorImpl(e)}},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.SIMPLE_FROUND_POLYFILL=!1,r.ISOLATE_POLYFILLS=!1,r.FORCE_POLYFILL_PROMISE=!1,r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){return e==Array.prototype||e==Object.prototype||(e[t]=r.value),e},r.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t];for(var r=0;r<e.length;++r){var n=e[r];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")},r.global=r.getGlobal(this),r.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),r.TRUST_ES6_POLYFILLS=!r.ISOLATE_POLYFILLS||r.IS_SYMBOL_NATIVE,r.polyfills={},r.propertyToPolyfillSymbol={},r.POLYFILL_PREFIX="$jscp$";var n,s,a;r.polyfill=function(e,t,n,i){t&&(r.ISOLATE_POLYFILLS?r.polyfillIsolated(e,t,n,i):r.polyfillUnisolated(e,t,n,i))},r.polyfillUnisolated=function(e,t,n,i){for(n=r.global,e=e.split("."),i=0;i<e.length-1;i++){var s=e[i];if(!(s in n))return;n=n[s]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},r.polyfillIsolated=function(e,t,n,i){var s=e.split(".");e=1===s.length,i=s[0],i=!e&&i in r.polyfills?r.polyfills:r.global;for(var a=0;a<s.length-1;a++){var o=s[a];if(!(o in i))return;i=i[o]}s=s[s.length-1],null!=(t=t(n=r.IS_SYMBOL_NATIVE&&"es6"===n?i[s]:null))&&(e?r.defineProperty(r.polyfills,s,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===r.propertyToPolyfillSymbol[s]&&(n=1e9*Math.random()>>>0,r.propertyToPolyfillSymbol[s]=r.IS_SYMBOL_NATIVE?r.global.Symbol(s):r.POLYFILL_PREFIX+n+"$"+s),r.defineProperty(i,r.propertyToPolyfillSymbol[s],{configurable:!0,writable:!0,value:t})))},r.initSymbol=function(){},r.polyfill("Symbol",(function(e){if(e)return e;var t=function(e,t){this.$jscomp$symbol$id_=e,r.defineProperty(this,"description",{configurable:!0,writable:!0,value:t})};t.prototype.toString=function(){return this.$jscomp$symbol$id_};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0,s=function(e){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new t(n+(e||"")+"_"+i++,e)};return s}),"es6","es3"),r.polyfill("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=r.global[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&r.defineProperty(i.prototype,e,{configurable:!0,writable:!0,value:function(){return r.iteratorPrototype(r.arrayIteratorImpl(this))}})}return e}),"es6","es3"),r.iteratorPrototype=function(e){return(e={next:e})[Symbol.iterator]=function(){return this},e},r.createTemplateTagFirstArg=function(e){return e.raw=e},r.createTemplateTagFirstArgWithRaw=function(e,t){return e.raw=t,e},r.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.arrayFromIterator=function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r},r.arrayFromIterable=function(e){return e instanceof Array?e:r.arrayFromIterator(r.makeIterator(e))},r.objectCreate=r.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(e){var t=function(){};return t.prototype=e,new t},r.getConstructImplementation=function(){if(r.TRUST_ES6_POLYFILLS&&"undefined"!=typeof Reflect&&Reflect.construct){if(function(){function e(){}return new e,Reflect.construct(e,[],(function(){})),new e instanceof e}())return Reflect.construct;var e=Reflect.construct;return function(t,r,n){return t=e(t,r),n&&Reflect.setPrototypeOf(t,n.prototype),t}}return function(e,t,n){return void 0===n&&(n=e),n=r.objectCreate(n.prototype||Object.prototype),Function.prototype.apply.call(e,n,t)||n}},r.construct=r.getConstructImplementation(),r.underscoreProtoCanBeSet=function(){var e={};try{return e.__proto__={a:!0},e.a}catch(e){}return!1},r.setPrototypeOf=r.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:r.underscoreProtoCanBeSet()?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null,r.inherits=function(e,t){if(e.prototype=r.objectCreate(t.prototype),e.prototype.constructor=e,r.setPrototypeOf){var n=r.setPrototypeOf;n(e,t)}else for(n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.superClass_=t.prototype},r.polyfill("Reflect",(function(e){return e||{}}),"es6","es3"),r.polyfill("Reflect.construct",(function(e){return r.construct}),"es6","es3"),r.polyfill("Reflect.setPrototypeOf",(function(e){if(e)return e;if(r.setPrototypeOf){var t=r.setPrototypeOf;return function(e,r){try{return t(e,r),!0}catch(e){return!1}}}return null}),"es6","es5"),r.iteratorFromArray=function(e,t){e instanceof String&&(e+="");var r=0,n=!1,i={next:function(){if(!n&&r<e.length){var i=r++;return{value:t(i,e[i]),done:!1}}return n=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i},r.polyfill("Array.prototype.keys",(function(e){return e||function(){return r.iteratorFromArray(this,(function(e){return e}))}}),"es6","es3"),r.polyfill("Promise",(function(e){function t(){this.batch_=null}function n(e){return e instanceof s?e:new s((function(t,r){t(e)}))}if(e&&(!(r.FORCE_POLYFILL_PROMISE||r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===r.global.PromiseRejectionEvent)||!r.global.Promise||-1===r.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var i=r.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){i(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var r=e[t];e[t]=null;try{r()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var s=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};s.prototype.createResolveAndReject_=function(){function e(e){return function(n){r||(r=!0,e.call(t,n))}}var t=this,r=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},s.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof s)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},s.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},s.prototype.reject_=function(e){this.settle_(2,e)},s.prototype.fulfill_=function(e){this.settle_(1,e)},s.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},s.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;i((function(){if(e.notifyUnhandledRejection_()){var t=r.global.console;void 0!==t&&t.error(e.result_)}}),1)},s.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=r.global.CustomEvent,t=r.global.Event,n=r.global.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,n(e))},s.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)a.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var a=new t;return s.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},s.prototype.settleSameAsThenable_=function(e,t){var r=this.createResolveAndReject_();try{e.call(t,r.resolve,r.reject)}catch(e){r.reject(e)}},s.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{n(e(t))}catch(e){i(e)}}:t}var n,i,a=new s((function(e,t){n=e,i=t}));return this.callWhenSettled_(r(e,n),r(t,i)),a},s.prototype.catch=function(e){return this.then(void 0,e)},s.prototype.callWhenSettled_=function(e,t){function r(){switch(n.state_){case 1:e(n.result_);break;case 2:t(n.result_);break;default:throw Error("Unexpected state: "+n.state_)}}var n=this;null==this.onSettledCallbacks_?a.asyncExecute(r):this.onSettledCallbacks_.push(r),this.isRejectionHandled_=!0},s.resolve=n,s.reject=function(e){return new s((function(t,r){r(e)}))},s.race=function(e){return new s((function(t,i){for(var s=r.makeIterator(e),a=s.next();!a.done;a=s.next())n(a.value).callWhenSettled_(t,i)}))},s.all=function(e){var t=r.makeIterator(e),i=t.next();return i.done?n([]):new s((function(e,r){function s(t){return function(r){a[t]=r,0==--o&&e(a)}}var a=[],o=0;do{a.push(void 0),o++,n(i.value).callWhenSettled_(s(a.length-1),r),i=t.next()}while(!i.done)}))},s}),"es6","es3"),r.polyfill("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),"es6","es3"),r.polyfill("Array.prototype.includes",(function(e){return e||function(e,t){var r=this;r instanceof String&&(r=String(r));var n=r.length;for(0>(t=t||0)&&(t=Math.max(t+n,0));t<n;t++){var i=r[t];if(i===e||Object.is(i,e))return!0}return!1}}),"es7","es3"),r.checkStringArgs=function(e,t,r){if(null==e)throw new TypeError("The 'this' value for String.prototype."+r+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+r+" must not be a regular expression");return e+""},r.polyfill("String.prototype.includes",(function(e){return e||function(e,t){return-1!==r.checkStringArgs(this,e,"includes").indexOf(e,t||0)}}),"es6","es3"),r.polyfill("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),"es6","es3"),r.polyfill("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&(!isNaN(e)&&1/0!==e&&-1/0!==e)}}),"es6","es3"),r.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"startsWith");e+="";var i=n.length,s=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<s&&t<i;)if(n[t++]!=e[a++])return!1;return a>=s}}),"es6","es3"),self,e.exports=(n=i("crWTP"),s=i("gdKyT"),a=i("dnzgs"),function(){function e(r){var n=i[r];return void 0!==n||(n=i[r]={exports:{}},t[r](n,n.exports,e)),n.exports}var t={"./source/BfwCSInternals.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./source/globals/BfwGlobals.js");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===n[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}}))}));var i=r("./source/BfwLogger.js");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var s=r("./source/utils/BfwUtils.js");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}));var a=r("./source/utils/BfwBase64Util.js");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=r("./source/BfwConstants.js");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var u=r("./source/BfwClipboard.js");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))}));var l=r("./source/telemetry/BfwTelemetryWrapper.js");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var c=r("./source/telemetry/BfwTelemetryProxy.js");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}));var h=r("./source/telemetry/BfwTelemetryConstants.js");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var p=r("./source/localizer/BfwLocalizerProxy.js");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===p[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return p[e]}}))}));var f=r("./source/content/BfwPerformanceReporterProxy.js");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===f[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return f[e]}}))}));var d=r("./source/content/BfwUIUtils.js");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===d[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return d[e]}}))}));var g=r("./source/BfwExtensionAdapterCS.js");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===g[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return g[e]}}))}))},"./source/BfwClipboard.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.clipboard=void 0;var n=r("./source/BfwLogger.js"),i=r("./source/utils/BfwUtils.js").utils.isNil;(e=function(){}).prototype.createDummyTextAreaAndSetText=function(e){var t=document.createElement("textarea");return t.style.position="fixed",t.style.top=0,t.style.left=0,t.style.width="2em",t.style.height="2em",t.style.padding=0,t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=e,document.body.appendChild(t),t.select(),t},e.prototype.copyToClipboard=function(e){if(i(e)||""===e)throw Error("Value to copy to clipboard cannot be null");e=this.createDummyTextAreaAndSetText(e),document.execCommand("copy")||n.logger.error("Failed to copy to clipboard"),document.body.removeChild(e)},e=new e,t.clipboard=e},"./source/BfwConstants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.constants=void 0,(e=function(){this.httpStatusCodes={},this.localizer={},this.clipboard={},this.telemetry={},this.os={},this.CDN_FILE_DOWNLOADER={},this.JSON_DOWNLOADER={},this.performanceReporter={},this.utils={},this.init()}).prototype.init=function(){this.initConstants(),this.initHttpStatusCodesConstants(),this.initLocalizerConstants(),this.initClipboardConstants(),this.initTelemetryConstants(),this.initOsConstants(),this.initCdnFileDownloaderConstants(),this.initJsonDownloaderConstants(),this.initPerformanceReporterConstants(),this.initUtils(),this.initNotificationConstants()},e.prototype.initConstants=function(){this.DEFAULT_FETCH_TIMEOUT=6e4,this.CERT_COMMON_NAME="CN",this.NAVIGATION_COMPLETE="complete",this.HTTPS_PROTOCOL="https://",this.STORE_URLS={Chrome:"https://chrome.google.com/webstore/",Firefox:"https://addons.mozilla.org/",Safari:"https://safari-extensions.apple.com/",Edge:"https://microsoftedge.microsoft.com/addons"},this.BROWSER_TYPE={CHROME:"Chrome",FIREFOX:"Firefox",EDGE:"Edge",SAFARI:"Safari",EDGE_CHROMIUM:"Edge-Chromium",NSB:"Norton Secure Browser"},this.RANDOM_NUMBER_LIMITS={MIN:0,MAX:4294967295},this.PROTOCOLS="http https chrome-extension extension moz-extension ms-browser-extension chrome edge about".split(" "),this.RESTRICTED_PROTOCOLS=["chrome:","edge:","about:"],this.darkMode={BFW_DARK_MODE_SETTINGS_CONTAINER:"EFE6BD8D-BCA8-402D-B2A4-5C2DC313654D",SET_DARK_MODE_STATUS:"3F2DC5D0-94C2-4B48-9C7B-94576B21F76A",GET_DARK_MODE_STATUS:"84C4D37D-14DD-440B-9CAF-7C41AC4790C5",DARK_MODE_STATUS:"DARK_MODE_STATUS"},this.KEEP_BG_ALIVE={PORT_NAME:"KEEP_ALIVE",MAX_BROWSER_CONNECTION_TIME:3e5},this.RTL_LOCALES=["ar","he"]},e.prototype.initHttpStatusCodesConstants=function(){this.httpStatusCodes.OK=200,this.httpStatusCodes.PARTIAL_CONTENT=206,this.httpStatusCodes.CREATED=201,this.httpStatusCodes.NO_CONTENT=204,this.httpStatusCodes.INCORRECT_URI=302,this.httpStatusCodes.NOT_MODIFIED=304,this.httpStatusCodes.BAD_REQUEST=400,this.httpStatusCodes.UNAUTHORIZED=401,this.httpStatusCodes.INVALID_SCHEMA=403,this.httpStatusCodes.NOT_FOUND=404,this.httpStatusCodes.HEADER_ERROR=406,this.httpStatusCodes.GONE=410,this.httpStatusCodes.ENTITY_TOO_LARGE=413,this.httpStatusCodes.DATASTORE_RATE_LIMITED=429,this.httpStatusCodes.RATE_LIMITING=503,this.httpStatusCodes.SERVER_ERROR=500},e.prototype.initLocalizerConstants=function(){this.localizer.DEFAULT_MESSAGES_DICTIONARY="strings",this.localizer.GET_LOCALIZED_STRING="44F4D54E-AB86-454C-A494-DE3AD87E72F9",this.localizer.GET_LOCALIZED_STRINGS="0D1C5EEF-749F-4EEB-AD6D-F9C26018EE91",this.localizer.GET_ALL_LOCALIZED_STRINGS="33445b60-9a88-4d99-829f-564704b2a960",this.localizer.GET_LOCALIZED_STRING_FROM_DICTIONARY="D15C0B4C-DC1B-403F-A3C8-8BB42137B325",this.localizer.GET_LOCALIZED_STRINGS_FROM_DICTIONARY="88313974-C371-4A8D-9196-0A2CE43C8327",this.localizer.GET_LOCALIZED_STRING_WITH_FORMAT="F3D7C8CE-B1A9-425A-AD24-4120C592AF86",this.localizer.GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY="9066F4CC-31A4-45F5-A07A-81DDC38E5F99",this.localizer.GET_CURRENT_LANGUAGE_DIRECTION="C30B2719-DD82-41EC-E93A-8A602444F90A",this.localizer.GET_LOCALIZED_STRINGS_WITH_FORMAT="E225C9A6-209A-4702-8E48-3B6EFBF67E26"},e.prototype.initClipboardConstants=function(){this.clipboard.messages={CLEAR_CLIPBOARD:"aa232db5-1dba-473a-ab4b-e9c378b7978b"},this.clipboard.DEFAULT_TIMEOUT=6e4},e.prototype.initTelemetryConstants=function(){this.telemetry.TELEMETRY_ENABLED="293E0764-AF48-4C52-B675-0161A7B6BECE",this.telemetry.TELEMETRY_OPT_OUT_SHOWN="FE795012-44D6-491D-A8A1-E83633892C9D",this.telemetry.BFW_TELEMETRY_SETTINGS_CONTAINER="233D07C0-6318-4BCE-A36A-82DFB19F3B2A",this.telemetry.USER_RESPONDED_IN_OPT_OUT_PAGE="8157BC1F-5ED8-4373-A18D-8CD8E0263752",this.telemetry.LAST_OFFER_DATE="9EA53F0C-7F18-44A5-8138-C11F27D66FC1",this.telemetry.TELEMETRY_SENT_LIST="C9183765-5049-46B4-9768-DC81712E2696",this.telemetry.TELEMETRY_PARAMETERS_QUEUE="44e993eb-1ad8-42ed-ae2e-7130e3da7086"},e.prototype.initOsConstants=function(){this.os.WINDOWS="Windows",this.os.MAC="Mac",this.os.UNKNOWN="Unknown"},e.prototype.initCdnFileDownloaderConstants=function(){this.CDN_FILE_DOWNLOADER.ENCRYPTION_METHOD="RS256",this.CDN_FILE_DOWNLOADER.SUPPORTED_PROTOCOL="https",this.CDN_FILE_DOWNLOADER.SUPPORTED_FILEFORMATS=["json"],this.CDN_FILE_DOWNLOADER.RESPONSE_STATUS={UNSUCCESSFUL_RESPONSE:"Error in fetching the file with status code",FILE_TAMPERED:"CDN file has been tampered",PUBLIC_KEY_NOT_VERIFIED:"Public key verification has failed",INVALID_PARAMETERS:"Invalid paramaters"},this.CDN_FILE_DOWNLOADER.CERT_ISSUER_NAME="CERT_ISSUER_NAME",this.CDN_FILE_DOWNLOADER.CERT_ISSUED="CERT_ISSUED"},e.prototype.initJsonDownloaderConstants=function(){this.JSON_DOWNLOADER.JSON_DOWNLOADER_ALARM="json_downloader",this.JSON_DOWNLOADER.RETRY_JSON_DOWNLOADER_ALARM="retry_json_downloader",this.JSON_DOWNLOADER.ROOT_CA="\n        -----BEGIN CERTIFICATE-----\n        MIIEvjCCA6agAwIBAgIQBtjZBNVYQ0b2ii+nVCJ+xDANBgkqhkiG9w0BAQsFADBh\n        MQswCQYDVQQGEwJVUzEVMBMGA1UEChMMRGlnaUNlcnQgSW5jMRkwFwYDVQQLExB3\n        d3cuZGlnaWNlcnQuY29tMSAwHgYDVQQDExdEaWdpQ2VydCBHbG9iYWwgUm9vdCBD\n        QTAeFw0yMTA0MTQwMDAwMDBaFw0zMTA0MTMyMzU5NTlaME8xCzAJBgNVBAYTAlVT\n        MRUwEwYDVQQKEwxEaWdpQ2VydCBJbmMxKTAnBgNVBAMTIERpZ2lDZXJ0IFRMUyBS\n        U0EgU0hBMjU2IDIwMjAgQ0ExMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC\n        AQEAwUuzZUdwvN1PWNvsnO3DZuUfMRNUrUpmRh8sCuxkB+Uu3Ny5CiDt3+PE0J6a\n        qXodgojlEVbbHp9YwlHnLDQNLtKS4VbL8Xlfs7uHyiUDe5pSQWYQYE9XE0nw6Ddn\n        g9/n00tnTCJRpt8OmRDtV1F0JuJ9x8piLhMbfyOIJVNvwTRYAIuE//i+p1hJInuW\n        raKImxW8oHzf6VGo1bDtN+I2tIJLYrVJmuzHZ9bjPvXj1hJeRPG/cUJ9WIQDgLGB\n        Afr5yjK7tI4nhyfFK3TUqNaX3sNk+crOU6JWvHgXjkkDKa77SU+kFbnO8lwZV21r\n        eacroicgE7XQPUDTITAHk+qZ9QIDAQABo4IBgjCCAX4wEgYDVR0TAQH/BAgwBgEB\n        /wIBADAdBgNVHQ4EFgQUt2ui6qiqhIx56rTaD5iyxZV2ufQwHwYDVR0jBBgwFoAU\n        A95QNVbRTLtm8KPiGxvDl7I90VUwDgYDVR0PAQH/BAQDAgGGMB0GA1UdJQQWMBQG\n        CCsGAQUFBwMBBggrBgEFBQcDAjB2BggrBgEFBQcBAQRqMGgwJAYIKwYBBQUHMAGG\n        GGh0dHA6Ly9vY3NwLmRpZ2ljZXJ0LmNvbTBABggrBgEFBQcwAoY0aHR0cDovL2Nh\n        Y2VydHMuZGlnaWNlcnQuY29tL0RpZ2lDZXJ0R2xvYmFsUm9vdENBLmNydDBCBgNV\n        HR8EOzA5MDegNaAzhjFodHRwOi8vY3JsMy5kaWdpY2VydC5jb20vRGlnaUNlcnRH\n        bG9iYWxSb290Q0EuY3JsMD0GA1UdIAQ2MDQwCwYJYIZIAYb9bAIBMAcGBWeBDAEB\n        MAgGBmeBDAECATAIBgZngQwBAgIwCAYGZ4EMAQIDMA0GCSqGSIb3DQEBCwUAA4IB\n        AQCAMs5eC91uWg0Kr+HWhMvAjvqFcO3aXbMM9yt1QP6FCvrzMXi3cEsaiVi6gL3z\n        ax3pfs8LulicWdSQ0/1s/dCYbbdxglvPbQtaCdB73sRD2Cqk3p5BJl+7j5nL3a7h\n        qG+fh/50tx8bIKuxT8b1Z11dmzzp/2n3YWzW2fP9NsarA4h20ksudYbj/NhVfSbC\n        EXffPgK2fPOre3qGNm+499iTcc+G33Mw+nur7SpZyEKEOxEXGlLzyQ4UfaJbcme6\n        ce1XR2bFuAJKZTRei9AqPCCcUZlM51Ke92sRKw2Sfh3oius2FkOH6ipjv3U/697E\n        A7sKPPcw7+uvTPyLNhBzPvOk\n        -----END CERTIFICATE-----\n        ",this.JSON_DOWNLOADER.CERT_INFO={CERT_ISSUER_NAME:"DigiCert TLS RSA SHA256 2020 CA1",CERT_ISSUED:"static.nortoncdn.com"}},e.prototype.initPerformanceReporterConstants=function(){this.performanceReporter.MESSAGES={REPORT_START:"2379B4CB-E725-4818-8FCC-A9372EABBF45",REPORT_END:"1F62DD4E-56AD-4528-9A69-BFE9EC135B9F",GET_PERFORMANCE_REPORTER:"2306DE62-ACA8-40AE-9909-517474C1120B"}},e.prototype.initUtils=function(){this.utils.IP="ip"},e.prototype.initNotificationConstants=function(){this.uiConstants={NOTIFICATION:{STACK_COUNT:1,DEFAULT_TIMEOUT:1e4,HEIGHT:200,WARNING_HEIGHT:370,WIDTH:460,BFW_NOTIFICATION_SETTINGS_CONTAINER:"d58fdd21-7954-438c-83fb-8412e1affd1c",NOTIFICATION_QUEUE:"4109ec9d-d6b4-4e4c-a7d4-1bfc7ad1b3bb",NOTIFICATION_EVENT:"9609e71b-3028-402b-ae7a-0e27601d475d",TYPE:{QUESTION:0,TIMED:1,WARNING_QUESTION:2},BUTTON:{DEFAULT:0,SECONDARY:1},MESSAGES:{RESIZE_IFRAME_HEIGHT:"db9de310-ecd6-4213-a3f3-7666afcd23b1",FIXED_IFRAME_HEIGHT:"992D0CB9-739C-462B-9764-A3E6C02C959C",DEFAULT_MESSAGE:"8DB8FE17-6F5E-485E-81EE-1112762F48E4",DEFAULT_BUTTON_PRESSED:"209CBB4D-6D6B-46F4-9EA7-303181937BF6",SECONDARY_LINK_PRESSED:"8881560D-E8A2-41FA-A81D-A90D41311D0D",THIRD_BUTTON_PRESSED:"196F06EB-956E-44EE-A60D-F4741C5CF4D3",NOTIFICATION_CLOSED:"EA7414A5-667F-4459-BAC2-38464F3330A3",NOTIFICATION_QUEUE_MESSAGE:"A88CCFCD-B98D-4607-B780-79A1CF7ADFAD",NOTIFICATIONS_SHOWN:"57C094C2-F0F0-44C2-9BBF-9E147135FB50",UI_INIT:"EE5B61D6-3A55-4ABB-B304-02BDAD9698FE",UI_INIT_PROXY:"0FABE0DB-1C87-475B-D89E-F4EC0EE963DE",HIDE_NOTIFICATIONS:"8211780F-93EC-4E37-8933-E60CB6052E84"}}}},e=new e,t.constants=e},"./source/BfwExtensionAdapterBase.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&null!==t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:String(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionAdapterBase=void 0;var i=(e=r("./source/utils/BfwUtils.js").utils).isString,s=e.isNil,a=e.isFunction,o=e.isArray;(e=function(){var e=this;n(this,"requestPermissions",(function(e){if(!o(e))throw Error("Invalid argument");if(s(chrome)||s(chrome.permissions))throw Error("chrome is null or chrome.permissions is null");return new Promise((function(t){chrome.permissions.request({permissions:e},(function(e){t(e)}))}))})),n(this,"darkModeEnabled",(function(){return e._systemColorThemeDark.matches})),n(this,"addSystemColorThemeChangeEventListener",(function(t){e._systemColorThemeDark.addEventListener("change",t)})),n(this,"removeSystemColorThemeChangeEventListener",(function(t){e._systemColorThemeDark.removeEventListener("change",t)})),this._systemColorThemeDark=window.matchMedia("(prefers-color-scheme: dark)")}).prototype.getExtensionId=function(){return chrome.runtime.id},e.prototype.getBackgroundPage=function(){return s(chrome)||s(chrome.extension)?null:chrome.extension.getBackgroundPage()},e.prototype.getExtensionURL=function(e){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!i(e))throw Error("extensionAdapter.getExtensionURL expects a string path argument");return chrome.runtime.getURL(e)},e.prototype.sendMessage=function(e,t){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(s(e))throw Error("invalid arguments to extensionAdapter.sendMessage");chrome.runtime.sendMessage(e,t)},e.prototype.addMessageListener=function(e){if(s(chrome)||s(chrome.runtime))throw Error("chrome or chrome.runtime is null");if(!a(e))throw Error("invalid arguments to extensionAdapter.addMessageListener");chrome.runtime.onMessage.addListener((function(t,r,n){return e(t,n,r.tab,r.frameId,r.url)}))},e.prototype.addContentScriptMessageListener=function(e){this.addMessageListener(e)},e.prototype.hidePopup=function(){window.open("","_self").close()},e.prototype.init=function(){},t.ExtensionAdapterBase=e},"./source/BfwExtensionAdapterCS.js":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.extensionAdapter=void 0;var i=n("./source/BfwExtensionAdapterBase.js");e=function(){return i.ExtensionAdapterBase.apply(this,arguments)||this},r.inherits(e,i.ExtensionAdapterBase),e=new e,t.extensionAdapter=e},"./source/BfwLogger.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0;var n=r("./source/telemetry/BfwTelemetryWrapper.js"),i=!0;i=!1,(e=function(){}).prototype.debug=function(e){i&&console.debug(e)},e.prototype.log=function(e){i&&console.log(e)},e.prototype.error=function(e){console.error(e),n.telemetryWrapper.send(n.telemetryWrapper.componentType.LOGGER,n.telemetryWrapper.actionType.ERROR,e)},e.prototype.warn=function(e){console.warn(e),n.telemetryWrapper.send(n.telemetryWrapper.componentType.LOGGER,n.telemetryWrapper.actionType.WARN,e)},e.prototype.info=function(e){console.info(e)},e=new e,t.logger=e},"./source/content/BfwPerformanceReporterProxy.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.performanceReporterFactoryProxy=void 0;var n=r("./source/BfwExtensionAdapterCS.js"),i=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var s=i.utils.isNil,a=e.constants.performanceReporter.MESSAGES;(e=function(){this.AUTOMATION_MODE=!0}).prototype.reportStart=function(e,t){this.sendMessage(a.REPORT_START,{component:e,type:t})},e.prototype.reportEnd=function(e,t){this.sendMessage(a.REPORT_END,{component:e,type:t})},e.prototype.sendMessage=function(e,t){if(!1!==this.AUTOMATION_MODE){if(s(e))throw Error("messageID cannot be null");if(s(t))throw Error("payload cannot be null");s(this._frameGUID)&&(this._frameGUID=i.utils.createNewGuid()),t.guid=this._frameGUID,t.frameURL=document.URL,n.extensionAdapter.sendMessage({id:e,payload:t})}},e=new e,t.performanceReporterFactoryProxy=e},"./source/content/BfwUIUtils.js":function(e,t,r){function n(e,t,r){e:if("object"==typeof t&&null!==t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:String(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.uiUtils=void 0,e=r("./source/utils/BfwUtils.js");var i=r("./source/BfwConstants.js"),s=(r=e.utils).isNil,a=r.isntNil;(r=function(){n(this,"isTopLevelWindow",(function(){return window===window.top})),this.notificationnDirection=this.isPageRTL()?"rtl":"ltr"}).prototype.updateFrameSizeAndLocation=function(e,t,r,n){e=document.getElementById(e),s(e)||(a(r)&&e.setAttribute("width",r),a(t)&&e.setAttribute("height",t),a(n)&&e.setAttribute("style","left:"+n.left+"px;top:"+n.top+"px;"))},r.prototype.createFrame=function(e,t,r,n,i){i=void 0===i?null:i;var s=document.createElement("IFRAME");s.setAttribute("id",e),s.setAttribute("src",t),s.setAttribute("class","notification-show"),s.setAttribute("frameBorder",0),a(n)&&s.setAttribute("width",n),a(r)&&s.setAttribute("height",r),a(i)&&s.setAttribute("style","left:"+i.left+"px;top:"+i.top+"px;"),document.documentElement.appendChild(s)},r.prototype.getDirection=function(){return this.notificationnDirection},r.prototype.injectStyle=function(e){var t=document.documentElement,r=document.getElementById("notification-content-stylesheet");a(r)&&t.removeChild(r),(r=document.createElement("LINK")).setAttribute("id","notification-content-stylesheet"),r.setAttribute("rel","stylesheet"),r.setAttribute("href",e),t.appendChild(r)},r.prototype.isPageRTL=function(){return i.constants.RTL_LOCALES.includes(navigator.language.split("-")[0].toLowerCase())},r.prototype.getFaviconUrl=function(e){return s(e)?null:(e=e.domain(),s(e)||""===e?null:"https://static.nortoncdn.com/idsafe/images/v1/favicons/npw_"+e+"_favicon.ico")},r=new r,t.uiUtils=r},"./source/globals/BfwGlobals.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.globals=void 0,e=new function(){this.BROWSER="Chrome",this.PRODUCT_GUID="DC6B1B05-C7B2-43EB-81E3-CBD3896553C2"},t.globals=e},"./source/localizer/BfwLocalizerProxy.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.localizerProxy=void 0;var n=r("./source/utils/BfwUtils.js");e=r("./source/BfwConstants.js");var i=r("./source/BfwExtensionAdapterCS.js"),s=(r=n.utils).isNil,a=r.isFunction,o=e.constants.localizer;(r=function(){}).prototype.getLocalizedString=function(e,t){this.sendMessage(o.GET_LOCALIZED_STRING,e,t)},r.prototype.getLocalizedStrings=function(e,t){this.sendMessage(o.GET_LOCALIZED_STRINGS,e,t)},r.prototype.getAllLocalizedStrings=function(e){this.sendMessage(o.GET_ALL_LOCALIZED_STRINGS,{},e)},r.prototype.getLocalizedStringFromDictionary=function(e,t,r){this.sendMessage(o.GET_LOCALIZED_STRING_FROM_DICTIONARY,{string:e,name:t},r)},r.prototype.getLocalizedStringsFromDictionary=function(e,t,r){this.sendMessage(o.GET_LOCALIZED_STRINGS_FROM_DICTIONARY,{array:e,name:t},r)},r.prototype.getLocalizedStringsWithFormat=function(e,t){this.sendMessage(o.GET_LOCALIZED_STRINGS_WITH_FORMAT,{formatStringDict:e},t)},r.prototype.getLocalizedStringWithFormat=function(e,t,r){this.sendMessage(o.GET_LOCALIZED_STRING_WITH_FORMAT,{string:e,params:t},r)},r.prototype.getLocalizedStringWithFormatFromDictionary=function(e,t,r,n){this.sendMessage(o.GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY,{string:e,params:t,name:r},n)},r.prototype.getCurrentLanguageDirection=function(e){this.sendMessage(o.GET_CURRENT_LANGUAGE_DIRECTION,{},e)},r.prototype.sendMessage=function(e,t,r){if(s(e))throw Error("Message ID cannot be null");if(s(t))throw Error("Payload cannot be null");if(!1===a(r))throw Error("Callback cannot be null");i.extensionAdapter.sendMessage({id:e,payload:t},(function(e){switch(e.id){case o.GET_LOCALIZED_STRING:case o.GET_LOCALIZED_STRINGS:case o.GET_ALL_LOCALIZED_STRINGS:case o.GET_LOCALIZED_STRING_FROM_DICTIONARY:case o.GET_LOCALIZED_STRINGS_FROM_DICTIONARY:case o.GET_LOCALIZED_STRING_WITH_FORMAT:case o.GET_LOCALIZED_STRING_WITH_FORMAT_FROM_DICTIONARY:case o.GET_CURRENT_LANGUAGE_DIRECTION:case o.GET_LOCALIZED_STRINGS_WITH_FORMAT:r(e.payload)}}))},r=new r,t.localizerProxy=r},"./source/telemetry/BfwTelemetryConstants.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryConstants=void 0,(e=function(){this.dataSource={},this.HIT_TYPE={},this.MESSAGES={},this.parameters={},this.TELEMETRY_CATEGORY={},this.actionType={},this.defaultParameters={},this.defaultParametersList=[],this.TELEMETRY_FILTER=[],this.init()}).prototype.init=function(){this.initConstants(),this.initDataSourceConstants(),this.initHitTypeConstants(),this.initMessagesConstants(),this.initParameterConstants(),this.initTelemetryConstants(),this.initActionTypeConstants(),this.initDefaultParametersConstants(),this.buildLists()},e.prototype.initConstants=function(){this.APPLICATION_NAME="APPLICATION_NAME",this.APPLICATION_VERSION="APPLICATION_VERSION",this.CLIENT_ID="CLIENT_ID",this.DATA_SOURCE="DATA_SOURCE",this.TRACKING_ID="TRACKING_ID",this.USER_AGENT="USER_AGENT",this.USER_LANGUAGE="USER_LANGUAGE",this.GOOGLE_ANALYTICS_PROTOCOL_VERSION="GOOGLE_ANALYTICS_PROTOCOL_VERSION",this.ANONYMIZE_IP="ANONYMIZE_IP",this.BROWSER_NAME="BROWSER_NAME"},e.prototype.initDataSourceConstants=function(){this.dataSource.BROWSER_EXTENSION="web",this.dataSource.MOBILE_APP="app"},e.prototype.initHitTypeConstants=function(){this.HIT_TYPE.PAGE_VIEW="pageview",this.HIT_TYPE.SCREEN_VIEW="screenview",this.HIT_TYPE.EVENT="event",this.HIT_TYPE.EXCEPTION="exception",this.HIT_TYPE.SOCIAL="social"},e.prototype.initMessagesConstants=function(){this.MESSAGES.SEND_TELEMETRY_TO_BGPROXY="b021e29a-4fe3-4a60-865f-0cf783318187"},e.prototype.initParameterConstants=function(){this.parameters.NON_INTERACTION_HIT="ni",this.parameters.HIT_TYPE="t",this.parameters.CATEGORY="ec",this.parameters.ACTION="ea",this.parameters.LABEL="el",this.parameters.SOCIAL_NETWORK="sn",this.parameters.SOCIAL_ACTION="sa",this.parameters.SOCIAL_TARGET="st",this.parameters.DOCUMENT_PATH="dp",this.parameters.DOCUMENT_TITLE="dt",this.parameters.SCREEN_RESOLUTION="sr",this.parameters.CUSTOM_DIMENSION1="cd1",this.parameters.CUSTOM_DIMENSION2="cd2",this.parameters.CUSTOM_DIMENSION3="cd3",this.parameters.CUSTOM_DIMENSION4="cd4",this.parameters.CUSTOM_DIMENSION5="cd5",this.parameters.CUSTOM_DIMENSION6="cd6",this.parameters.CUSTOM_DIMENSION7="cd7",this.parameters.CUSTOM_DIMENSION8="cd8",this.parameters.CUSTOM_DIMENSION9="cd9",this.parameters.CUSTOM_DIMENSION10="cd10",this.parameters.CUSTOM_DIMENSION11="cd11",this.parameters.CUSTOM_DIMENSION12="cd12",this.parameters.CUSTOM_DIMENSION13="cd13",this.parameters.CUSTOM_DIMENSION14="cd14",this.parameters.CUSTOM_DIMENSION15="cd15",this.parameters.CUSTOM_DIMENSION16="cd16",this.parameters.CUSTOM_DIMENSION17="cd17",this.parameters.CUSTOM_DIMENSION18="cd18",this.parameters.CUSTOM_DIMENSION19="cd19",this.parameters.CUSTOM_DIMENSION20="cd20",this.parameters.CUSTOM_DIMENSION21="cd21",this.parameters.CUSTOM_DIMENSION22="cd22",this.parameters.CUSTOM_DIMENSION23="cd23",this.parameters.PRODUCT_IMPRESSION_BRAND1="il1pi1br",this.parameters.ITEM_CATEGORY="iv",this.parameters.CAMPAIGN_SOURCE="cs",this.parameters.CAMPAIGN_MEDIUM="cm",this.parameters.CLIENT_ID="cd2"},e.prototype.initTelemetryConstants=function(){this.TELEMETRY_CATEGORY.BROWSER="Browser",this.TELEMETRY_CATEGORY.EXTENSION="Extension"},e.prototype.initActionTypeConstants=function(){this.actionType.BROWSER={LAUNCH:"launch",UPDATE:"update"},this.actionType.EXTENSION={INSTALL:"install",UPDATE:"update"}},e.prototype.initDefaultParametersConstants=function(){this.defaultParameters.APPLICATION_NAME={maxLength:100,key:"an"},this.defaultParameters.APPLICATION_VERSION={maxLength:100,key:"av"},this.defaultParameters.CLIENT_ID={maxLength:100,key:"cid"},this.defaultParameters.DATA_SOURCE={maxLength:50,key:"ds",value:this.dataSource.BROWSER_EXTENSION},this.defaultParameters.TRACKING_ID={maxLength:100,key:"tid"},this.defaultParameters.USER_AGENT={maxLength:1e3,key:"ua"},this.defaultParameters.USER_LANGUAGE={maxLength:20,key:"ul"},this.defaultParameters.GOOGLE_ANALYTICS_PROTOCOL_VERSION={maxLength:100,key:"v",value:1},this.defaultParameters.ANONYMIZE_IP={maxLength:1,key:"aip",value:1},this.defaultParameters.BROWSER_NAME={maxLength:20,key:"cd6"}},e.prototype.buildLists=function(){this.defaultParametersList=[this.APPLICATION_NAME,this.APPLICATION_VERSION,this.CLIENT_ID,this.DATA_SOURCE,this.TRACKING_ID,this.GOOGLE_ANALYTICS_PROTOCOL_VERSION,this.ANONYMIZE_IP,this.BROWSER_NAME],this.TELEMETRY_FILTER=["bfw-logger|error|[xNDC.Web Error]: A soft dependency (seq: 0) failed to initialize: Exception while querying storage: Error: xneStorage::ManagedStorage Error: Browser 'Edge-Chromium' is not supported."]},e=new e,t.telemetryConstants=e},"./source/telemetry/BfwTelemetryProxy.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryProxy=void 0;var n=r("./source/utils/BfwUtils.js"),i=r("./source/telemetry/BfwTelemetryConstants.js"),s=r("./source/BfwExtensionAdapterCS.js"),a=n.utils.isNil,o=!1;(e=function(){this.initExecutionLocation()}).prototype.send=function(e){if(a(e))throw Error("parameters cannot be null");o?n.utils.createCustomHTMLEvent(i.telemetryConstants.MESSAGES.SEND_TELEMETRY_TO_BGPROXY,{parameters:e}):s.extensionAdapter.sendMessage({id:i.telemetryConstants.MESSAGES.SEND_TELEMETRY_TO_BGPROXY,payload:{parameters:e}})},e.prototype.initExecutionLocation=function(){window.chrome&&chrome.runtime&&chrome.runtime.getBackgroundPage?chrome.runtime.getBackgroundPage((function(e){o=e===window})):o=!1},e=new e,t.telemetryProxy=e},"./source/telemetry/BfwTelemetryWrapper.js":function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryWrapper=void 0,e=r("./source/utils/BfwUtils.js");var n=r("./source/telemetry/BfwTelemetryProxy.js"),i=(r=e.utils).isNil,s=r.isString;(r=function(){this.TELEMETRY_CATEGORY="bfw",this.TELEMETRY_TYPE="event",this.componentType={LOGGER:"logger",LOCALIZER:"localizer",STORAGE:"storage",SETTINGS:"settings",SECURE_SETTINGS:"secureSettings",NOTIFICATION:"notification"},this.actionType={WARN:"warn",ERROR:"error"},this.parameters={EVENT:"t",CATEGORY:"ec",ACTION:"ea",PAYLOAD:"el"}}).prototype.send=function(e,t,r){if(!s(e))throw Error("componentType should be a string");if(!s(t))throw Error("actionType should be a string");if(i(r))throw Error("payload should not be Nil");if(!s(r)){if(!(r instanceof Error))throw Error("payload should be an instanceof Error other than a string");r=r.toString()}var a={};return a[this.parameters.EVENT]=this.TELEMETRY_TYPE,a[this.parameters.CATEGORY]=this.TELEMETRY_CATEGORY+"-"+e,a[this.parameters.ACTION]=t,a[this.parameters.PAYLOAD]=r,n.telemetryProxy.send(a)},r=new r,t.telemetryWrapper=r},"./source/utils/BfwBase64Util.js":function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.base64=void 0,(e=function(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}).prototype._utf8Encode=function(e){var t="";e=e.replace(/\r\n/g,"\n");for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);128>n?t+=String.fromCharCode(n):(127<n&&2048>n?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},e.prototype._utf8Decode=function(e){for(var t,r,n,i="",s=0;s<e.length;)128>(t=e.charCodeAt(s))?(i+=String.fromCharCode(t),s++):191<t&&224>t?(r=e.charCodeAt(s+1),i+=String.fromCharCode((31&t)<<6|63&r),s+=2):(r=e.charCodeAt(s+1),n=e.charCodeAt(s+2),i+=String.fromCharCode((15&t)<<12|(63&r)<<6|63&n),s+=3);return i},e.prototype.encode=function(e){var t="",r=0;for(e=this._utf8Encode(e);r<e.length;){var n=e.charCodeAt(r++),i=e.charCodeAt(r++),s=e.charCodeAt(r++),a=n>>2;n=(3&n)<<4|i>>4;var o=(15&i)<<2|s>>6,u=63&s;Number.isNaN(i)?u=o=64:Number.isNaN(s)&&(u=64),t=t+this._keyStr.charAt(a)+this._keyStr.charAt(n)+this._keyStr.charAt(o)+this._keyStr.charAt(u)}return t},e.prototype.decode=function(e){var t="",r=0;for(e=e.replace(/[^A-Za-z0-9+/=]\./g,"");r<e.length;){var n=this._keyStr.indexOf(e.charAt(r++)),i=this._keyStr.indexOf(e.charAt(r++)),s=this._keyStr.indexOf(e.charAt(r++)),a=this._keyStr.indexOf(e.charAt(r++));n=n<<2|i>>4,i=(15&i)<<4|s>>2;var o=(3&s)<<6|a;t+=String.fromCharCode(n),64!==s&&(t+=String.fromCharCode(i)),64!==a&&(t+=String.fromCharCode(o))}return(t=this._utf8Decode(t)).replace(/\0.*$/g,"")},e=new e,t.base64=e},"./source/utils/BfwUtils.js":function(e,t,r){function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t,r){e:if("object"==typeof t&&null!==t){var n=t[Symbol.toPrimitive];if(void 0!==n){if("object"!=typeof(t=n.call(t,"string")))break e;throw new TypeError("@@toPrimitive must return a primitive value.")}t=String(t)}return(t="symbol"==typeof t?t:String(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.utils=void 0;var s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((t=n(t))&&t.has(e))return t.get(e);var r,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var a=s?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(i,r,a):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}(r("node-forge"),!0),a=r("urijs"),o=r("jsrsasign"),u=r("./source/BfwConstants.js"),l=r("./source/globals/BfwGlobals.js"),c={ac:{com:!0,gov:!0,mil:!0,net:!0,org:!0,edu:!0},ad:{nom:!0},ae:{ac:!0,co:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,pro:!0,sch:!0},af:{com:!0,edu:!0,gov:!0,net:!0,org:!0},ai:{off:!0,com:!0,net:!0,org:!0},al:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0,uniti:!0,tirana:!0,soros:!0,upt:!0,inima:!0},an:{com:!0,net:!0,org:!0,edu:!0},ag:{com:!0,org:!0,net:!0,co:!0,nom:!0},ao:{co:!0,ed:!0,gv:!0,it:!0,og:!0,pb:!0},ar:{com:!0,edu:!0,gob:!0,gov:!0,int:!0,mil:!0,net:!0,org:!0,tur:!0},arpa:{e164:!0,"in-addr":!0,iris:!0,ip6:!0,uri:!0,urn:!0},at:{ac:!0,co:!0,gv:!0,or:!0,priv:!0},au:{asn:!0,com:!0,net:!0,id:!0,org:!0,csiro:!0,oz:!0,info:!0,conf:!0,act:!0,nsw:!0,nt:!0,qld:!0,sa:!0,tas:!0,vic:!0,wa:!0},aw:{com:!0},az:{com:!0,net:!0,int:!0,gov:!0,biz:!0,org:!0,edu:!0,mil:!0,pp:!0,name:!0,info:!0},ba:{co:!0,com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0,rs:!0,unbi:!0,unmo:!0,unsa:!0,untz:!0,unze:!0},bb:{biz:!0,co:!0,com:!0,edu:!0,gov:!0,info:!0,net:!0,org:!0,store:!0,tv:!0},bd:{com:!0,edu:!0,net:!0,gov:!0,org:!0,mil:!0},be:{ac:!0},bf:{gov:!0},bh:{biz:!0,cc:!0,com:!0,edu:!0,gov:!0,info:!0,net:!0,org:!0},bm:{com:!0,edu:!0,org:!0,gov:!0,net:!0},bn:{com:!0,edu:!0,gov:!0,net:!0,org:!0},bo:{com:!0,edu:!0,gob:!0,gov:!0,int:!0,mil:!0,net:!0,org:!0,tv:!0},br:{adm:!0,adv:!0,agr:!0,am:!0,arq:!0,art:!0,ato:!0,b:!0,bio:!0,blog:!0,bmd:!0,cim:!0,cng:!0,cnt:!0,com:!0,coop:!0,ecn:!0,edu:!0,eng:!0,esp:!0,etc:!0,eti:!0,far:!0,flog:!0,fm:!0,fnd:!0,fot:!0,fst:!0,g12:!0,ggf:!0,gov:!0,imb:!0,ind:!0,inf:!0,jor:!0,jus:!0,lel:!0,mat:!0,med:!0,mil:!0,mus:!0,net:!0,nom:!0,not:!0,ntr:!0,odo:!0,org:!0,ppg:!0,pro:!0,psc:!0,psi:!0,qsl:!0,rec:!0,slg:!0,srv:!0,tmp:!0,trd:!0,tur:!0,tv:!0,vet:!0,vlog:!0,wiki:!0,zlg:!0},bs:{com:!0,edu:!0,gov:!0,net:!0,org:!0},bt:{com:!0,edu:!0,gov:!0,net:!0,org:!0},bw:{co:!0,org:!0},by:{gov:!0,mil:!0},bz:{du:!0,et:!0,om:!0,ov:!0,rg:!0},ca:{ab:!0,bc:!0,mb:!0,nb:!0,nf:!0,nl:!0,ns:!0,nt:!0,nu:!0,on:!0,pe:!0,qc:!0,sk:!0,yk:!0},cc:{co:!0},ck:{biz:!0,co:!0,edu:!0,gen:!0,gov:!0,info:!0,net:!0,org:!0},cn:{ac:!0,ah:!0,bj:!0,com:!0,cq:!0,edu:!0,fj:!0,gd:!0,gov:!0,gs:!0,gx:!0,gz:!0,ha:!0,hb:!0,he:!0,hi:!0,hl:!0,hn:!0,jl:!0,js:!0,jx:!0,ln:!0,mil:!0,net:!0,nm:!0,nx:!0,org:!0,qh:!0,sc:!0,sd:!0,sh:!0,sn:!0,sx:!0,tj:!0,tw:!0,xj:!0,xz:!0,yn:!0,zj:!0},co:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,nom:!0,org:!0},cr:{ac:!0,c:!0,co:!0,ed:!0,fi:!0,go:!0,or:!0,sa:!0},cx:{gov:!0},cy:{ac:!0,biz:!0,com:!0,ekloges:!0,gov:!0,ltd:!0,name:!0,net:!0,org:!0,parliament:!0,press:!0,pro:!0,tm:!0},cu:{com:!0,edu:!0,org:!0,net:!0,gov:!0,inf:!0},dm:{com:!0,net:!0,org:!0,edu:!0,gov:!0},do:{art:!0,com:!0,edu:!0,gob:!0,gov:!0,mil:!0,net:!0,org:!0,sld:!0,web:!0},dz:{art:!0,asso:!0,com:!0,edu:!0,gov:!0,net:!0,org:!0,pol:!0},ec:{com:!0,edu:!0,fin:!0,gov:!0,info:!0,med:!0,mil:!0,net:!0,org:!0,pro:!0},ee:{com:!0,org:!0,fie:!0,pri:!0},eg:{com:!0,edu:!0,eun:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,sci:!0},er:{com:!0,edu:!0,gov:!0,ind:!0,mil:!0,net:!0,org:!0,rochest:!0,w:!0},es:{com:!0,edu:!0,gob:!0,nom:!0,org:!0},et:{biz:!0,com:!0,edu:!0,gov:!0,info:!0,name:!0,net:!0,org:!0},fi:{aland:!0},fj:{ac:!0,biz:!0,com:!0,info:!0,mil:!0,name:!0,net:!0,org:!0,pro:!0},fk:{ac:!0,co:!0,gov:!0,net:!0,nom:!0,org:!0},fr:{asso:!0,com:!0,f:!0,gouv:!0,nom:!0,prd:!0,presse:!0,tm:!0},ge:{com:!0,edu:!0,gov:!0,org:!0,mil:!0,net:!0,pvt:!0},gg:{co:!0,net:!0,org:!0},gh:{com:!0,edu:!0,gov:!0,mil:!0,org:!0},gi:{com:!0,ltd:!0,gov:!0,mod:!0,edu:!0,org:!0},gn:{ac:!0,com:!0,gov:!0,net:!0,org:!0},gp:{com:!0,net:!0,edu:!0,asso:!0,org:!0},gr:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},gt:{com:!0,edu:!0,gob:!0,ind:!0,mil:!0,net:!0,org:!0},gu:{com:!0,edu:!0,gov:!0,net:!0,org:!0},hk:{com:!0,edu:!0,gov:!0,idv:!0,net:!0,org:!0},ht:{com:!0,net:!0,firm:!0,shop:!0,info:!0,pro:!0,adult:!0,org:!0,art:!0,pol:!0,rel:!0,asso:!0,perso:!0,coop:!0,med:!0,edu:!0,gouv:!0},hu:{2e3:!0,agrar:!0,bolt:!0,casino:!0,city:!0,co:!0,erotica:!0,erotika:!0,film:!0,forum:!0,games:!0,hotel:!0,info:!0,ingatlan:!0,jogasz:!0,konyvelo:!0,lakas:!0,media:!0,news:!0,org:!0,priv:!0,reklam:!0,sex:!0,shop:!0,sport:!0,suli:!0,szex:!0,tm:!0,tozsde:!0,utazas:!0,video:!0},id:{ac:!0,co:!0,go:!0,mil:!0,net:!0,or:!0,sch:!0,web:!0},il:{ac:!0,co:!0,gov:!0,idf:!0,k12:!0,muni:!0,net:!0,org:!0},im:{co:!0,"ltd.co":!0,"plc.co":!0,net:!0,gov:!0,org:!0,nic:!0,ac:!0},in:{ac:!0,co:!0,edu:!0,ernet:!0,firm:!0,gen:!0,gov:!0,i:!0,ind:!0,mil:!0,net:!0,nic:!0,org:!0,res:!0},iq:{com:!0,edu:!0,gov:!0,i:!0,mil:!0,net:!0,org:!0},ir:{ac:!0,co:!0,dnssec:!0,gov:!0,i:!0,id:!0,net:!0,org:!0,sch:!0},it:{edu:!0,gov:!0},je:{co:!0,net:!0,org:!0},jo:{com:!0,edu:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,sch:!0},jp:{ac:!0,ad:!0,co:!0,ed:!0,go:!0,gr:!0,lg:!0,ne:!0,or:!0},ke:{ac:!0,co:!0,go:!0,info:!0,me:!0,mobi:!0,ne:!0,or:!0,sc:!0},kh:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0,per:!0},ki:{biz:!0,com:!0,de:!0,edu:!0,gov:!0,info:!0,mob:!0,net:!0,org:!0,tel:!0},km:{asso:!0,com:!0,coop:!0,edu:!0,gouv:!0,k:!0,medecin:!0,mil:!0,nom:!0,notaires:!0,pharmaciens:!0,presse:!0,tm:!0,veterinaire:!0},kn:{edu:!0,gov:!0,net:!0,org:!0},kr:{ac:!0,busan:!0,chungbuk:!0,chungnam:!0,co:!0,daegu:!0,daejeon:!0,es:!0,gangwon:!0,go:!0,gwangju:!0,gyeongbuk:!0,gyeonggi:!0,gyeongnam:!0,hs:!0,incheon:!0,jeju:!0,jeonbuk:!0,jeonnam:!0,k:!0,kg:!0,mil:!0,ms:!0,ne:!0,or:!0,pe:!0,re:!0,sc:!0,seoul:!0,ulsan:!0},kw:{com:!0,edu:!0,gov:!0,net:!0,org:!0},ky:{com:!0,edu:!0,gov:!0,net:!0,org:!0},kz:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},lb:{com:!0,edu:!0,gov:!0,net:!0,org:!0},lc:{com:!0,org:!0,edu:!0,gov:!0},li:{com:!0,net:!0,org:!0,gov:!0},lk:{assn:!0,com:!0,edu:!0,gov:!0,grp:!0,hotel:!0,int:!0,ltd:!0,net:!0,ngo:!0,org:!0,sch:!0,soc:!0,web:!0},lr:{com:!0,edu:!0,gov:!0,net:!0,org:!0},ls:{org:!0,co:!0},lt:{gov:!0,mil:!0},lu:{gov:!0,mil:!0,org:!0,net:!0},lv:{asn:!0,com:!0,conf:!0,edu:!0,gov:!0,id:!0,mil:!0,net:!0,org:!0},ly:{com:!0,edu:!0,gov:!0,id:!0,med:!0,net:!0,org:!0,plc:!0,sch:!0},ma:{ac:!0,co:!0,gov:!0,m:!0,net:!0,org:!0,press:!0},mc:{asso:!0,tm:!0},me:{ac:!0,co:!0,edu:!0,gov:!0,its:!0,net:!0,org:!0,priv:!0},mg:{com:!0,edu:!0,gov:!0,mil:!0,nom:!0,org:!0,prd:!0,tm:!0},mk:{com:!0,edu:!0,gov:!0,inf:!0,name:!0,net:!0,org:!0,pro:!0},ml:{com:!0,edu:!0,gov:!0,net:!0,org:!0,presse:!0},mn:{edu:!0,gov:!0,org:!0},mo:{com:!0,edu:!0,gov:!0,net:!0,org:!0},mt:{com:!0,edu:!0,gov:!0,net:!0,org:!0},mv:{aero:!0,biz:!0,com:!0,coop:!0,edu:!0,gov:!0,info:!0,int:!0,mil:!0,museum:!0,name:!0,net:!0,org:!0,pro:!0},mw:{ac:!0,co:!0,com:!0,coop:!0,edu:!0,gov:!0,int:!0,museum:!0,net:!0,org:!0},mx:{com:!0,edu:!0,gob:!0,net:!0,org:!0},my:{com:!0,edu:!0,gov:!0,mil:!0,name:!0,net:!0,org:!0,sch:!0},nf:{arts:!0,com:!0,firm:!0,info:!0,net:!0,other:!0,per:!0,rec:!0,store:!0,web:!0},ng:{biz:!0,com:!0,edu:!0,gov:!0,mil:!0,mobi:!0,name:!0,net:!0,org:!0,sch:!0},ni:{ac:!0,co:!0,com:!0,edu:!0,gob:!0,mil:!0,net:!0,nom:!0,org:!0},no:{mil:!0,stat:!0,kommune:!0,herad:!0,priv:!0,vgs:!0,fhs:!0,museum:!0,fylkesbibl:!0,folkebibl:!0,idrett:!0},np:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},nr:{biz:!0,com:!0,edu:!0,gov:!0,info:!0,net:!0,org:!0},om:{ac:!0,biz:!0,co:!0,com:!0,edu:!0,gov:!0,med:!0,mil:!0,museum:!0,net:!0,org:!0,pro:!0,sch:!0},pe:{com:!0,edu:!0,gob:!0,mil:!0,net:!0,nom:!0,org:!0,sld:!0},pf:{com:!0,org:!0,edu:!0},pg:{"com.pg":!0,net:!0},ph:{com:!0,edu:!0,gov:!0,i:!0,mil:!0,net:!0,ngo:!0,org:!0},pk:{biz:!0,com:!0,edu:!0,fam:!0,gob:!0,gok:!0,gon:!0,gop:!0,gos:!0,gov:!0,net:!0,org:!0,web:!0},pl:{art:!0,bialystok:!0,biz:!0,com:!0,edu:!0,gda:!0,gdansk:!0,gorzow:!0,gov:!0,info:!0,katowice:!0,krakow:!0,lodz:!0,lublin:!0,mil:!0,net:!0,ngo:!0,olsztyn:!0,org:!0,poznan:!0,pwr:!0,radom:!0,slupsk:!0,szczecin:!0,torun:!0,warszawa:!0,waw:!0,wroc:!0,wroclaw:!0,zgora:!0},pr:{ac:!0,biz:!0,com:!0,edu:!0,est:!0,gov:!0,info:!0,isla:!0,name:!0,net:!0,org:!0,pro:!0,prof:!0},pro:{law:!0,med:!0,cpa:!0},ps:{com:!0,edu:!0,gov:!0,net:!0,org:!0,plo:!0,sec:!0},pt:{com:!0,edu:!0,gov:!0,int:!0,net:!0,nome:!0,org:!0,publ:!0},pw:{belau:!0,co:!0,ed:!0,go:!0,ne:!0,or:!0},ro:{arts:!0,com:!0,firm:!0,info:!0,nom:!0,nt:!0,org:!0,rec:!0,store:!0,tm:!0,www:!0},rs:{ac:!0,co:!0,edu:!0,gov:!0,in:!0,org:!0},sb:{com:!0,edu:!0,gov:!0,net:!0,org:!0},sc:{com:!0,edu:!0,gov:!0,net:!0,org:!0},sh:{co:!0,com:!0,edu:!0,gov:!0,net:!0,nom:!0,org:!0},sl:{com:!0,edu:!0,gov:!0,net:!0,org:!0},st:{co:!0,com:!0,consulado:!0,edu:!0,embaixada:!0,gov:!0,mil:!0,net:!0,org:!0,principe:!0,saotome:!0,store:!0},sv:{com:!0,edu:!0,gob:!0,org:!0,red:!0},sz:{ac:!0,co:!0,org:!0},tr:{av:!0,bbs:!0,bel:!0,biz:!0,com:!0,dr:!0,edu:!0,gen:!0,gov:!0,info:!0,k12:!0,name:!0,net:!0,org:!0,pol:!0,tel:!0,tsk:!0,tv:!0,web:!0},tt:{aero:!0,biz:!0,cat:!0,co:!0,com:!0,coop:!0,edu:!0,gov:!0,info:!0,int:!0,jobs:!0,mil:!0,mobi:!0,museum:!0,name:!0,net:!0,org:!0,pro:!0,tel:!0,travel:!0},tw:{club:!0,com:!0,ebiz:!0,edu:!0,game:!0,gov:!0,idv:!0,mil:!0,net:!0,org:!0},mu:{ac:!0,co:!0,com:!0,gov:!0,net:!0,or:!0,org:!0},mz:{ac:!0,co:!0,edu:!0,gov:!0,org:!0},na:{co:!0,com:!0},nz:{ac:!0,co:!0,cri:!0,geek:!0,gen:!0,govt:!0,health:!0,iwi:!0,maori:!0,mil:!0,net:!0,org:!0,parliament:!0,school:!0},pa:{abo:!0,ac:!0,com:!0,edu:!0,gob:!0,ing:!0,med:!0,net:!0,nom:!0,org:!0,sld:!0},py:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},qa:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,org:!0},re:{asso:!0,com:!0,nom:!0},ru:{ac:!0,adygeya:!0,altai:!0,amur:!0,arkhangelsk:!0,astrakhan:!0,bashkiria:!0,belgorod:!0,bir:!0,bryansk:!0,buryatia:!0,cbg:!0,chel:!0,chelyabinsk:!0,chita:!0,chukotka:!0,chuvashia:!0,com:!0,dagestan:!0,"e-burg":!0,edu:!0,gov:!0,grozny:!0,int:!0,irkutsk:!0,ivanovo:!0,izhevsk:!0,jar:!0,"joshkar-ola":!0,kalmykia:!0,kaluga:!0,kamchatka:!0,karelia:!0,kazan:!0,kchr:!0,kemerovo:!0,khabarovsk:!0,khakassia:!0,khv:!0,kirov:!0,koenig:!0,komi:!0,kostroma:!0,kranoyarsk:!0,kuban:!0,kurgan:!0,kursk:!0,lipetsk:!0,magadan:!0,mari:!0,"mari-el":!0,marine:!0,mil:!0,mordovia:!0,mosreg:!0,msk:!0,murmansk:!0,nalchik:!0,net:!0,nnov:!0,nov:!0,novosibirsk:!0,nsk:!0,omsk:!0,orenburg:!0,org:!0,oryol:!0,penza:!0,perm:!0,pp:!0,pskov:!0,ptz:!0,rnd:!0,ryazan:!0,sakhalin:!0,samara:!0,saratov:!0,simbirsk:!0,smolensk:!0,spb:!0,stavropol:!0,stv:!0,surgut:!0,tambov:!0,tatarstan:!0,tom:!0,tomsk:!0,tsaritsyn:!0,tsk:!0,tula:!0,tuva:!0,tver:!0,tyumen:!0,udm:!0,udmurtia:!0,"ulan-ude":!0,vladikavkaz:!0,vladimir:!0,vladivostok:!0,volgograd:!0,vologda:!0,voronezh:!0,vrn:!0,vyatka:!0,yakutia:!0,yamal:!0,yekaterinburg:!0,"yuzhno-sakhalinsk":!0},rw:{ac:!0,co:!0,com:!0,edu:!0,gouv:!0,gov:!0,int:!0,mil:!0,net:!0},sa:{com:!0,edu:!0,gov:!0,med:!0,net:!0,org:!0,pub:!0,sch:!0},sd:{com:!0,edu:!0,gov:!0,info:!0,med:!0,net:!0,org:!0,tv:!0},se:{a:!0,ac:!0,b:!0,bd:!0,c:!0,d:!0,e:!0,f:!0,g:!0,h:!0,i:!0,k:!0,l:!0,m:!0,n:!0,o:!0,org:!0,p:!0,parti:!0,pp:!0,press:!0,r:!0,s:!0,t:!0,tm:!0,u:!0,w:!0,x:!0,y:!0,z:!0},sg:{com:!0,edu:!0,gov:!0,idn:!0,net:!0,org:!0,per:!0},sn:{art:!0,com:!0,edu:!0,gouv:!0,org:!0,perso:!0,univ:!0},sy:{com:!0,edu:!0,gov:!0,mil:!0,net:!0,news:!0,org:!0},th:{ac:!0,co:!0,go:!0,in:!0,mi:!0,net:!0,or:!0},tj:{ac:!0,biz:!0,co:!0,com:!0,edu:!0,go:!0,gov:!0,info:!0,int:!0,mil:!0,name:!0,net:!0,nic:!0,org:!0,test:!0,web:!0},tn:{agrinet:!0,com:!0,defense:!0,edunet:!0,ens:!0,fin:!0,gov:!0,ind:!0,info:!0,intl:!0,mincom:!0,nat:!0,net:!0,org:!0,perso:!0,rnrt:!0,rns:!0,rnu:!0,tourism:!0},tz:{ac:!0,co:!0,go:!0,ne:!0,or:!0},ua:{biz:!0,cherkassy:!0,chernigov:!0,chernovtsy:!0,ck:!0,cn:!0,co:!0,com:!0,crimea:!0,cv:!0,dn:!0,dnepropetrovsk:!0,donetsk:!0,dp:!0,edu:!0,gov:!0,if:!0,in:!0,"ivano-frankivsk":!0,kh:!0,kharkov:!0,kherson:!0,khmelnitskiy:!0,kiev:!0,kirovograd:!0,km:!0,kr:!0,ks:!0,kv:!0,lg:!0,lugansk:!0,lutsk:!0,lviv:!0,me:!0,mk:!0,net:!0,nikolaev:!0,od:!0,odessa:!0,org:!0,pl:!0,poltava:!0,pp:!0,rovno:!0,rv:!0,sebastopol:!0,sumy:!0,te:!0,ternopil:!0,uzhgorod:!0,vinnica:!0,vn:!0,zaporizhzhe:!0,zhitomir:!0,zp:!0,zt:!0},ug:{ac:!0,co:!0,go:!0,ne:!0,or:!0,org:!0,sc:!0},uk:{ac:!0,bl:!0,"british-library":!0,co:!0,cym:!0,gov:!0,govt:!0,icnet:!0,jet:!0,lea:!0,ltd:!0,me:!0,mil:!0,mod:!0,"national-library-scotland":!0,nel:!0,net:!0,nhs:!0,nic:!0,nls:!0,org:!0,orgn:!0,parliament:!0,plc:!0,police:!0,sch:!0,scot:!0,soc:!0},us:{dni:!0,fed:!0,isa:!0,kids:!0,nsn:!0},uy:{com:!0,edu:!0,gub:!0,mil:!0,net:!0,org:!0},ve:{co:!0,com:!0,edu:!0,gob:!0,info:!0,mil:!0,net:!0,org:!0,web:!0},vi:{co:!0,com:!0,k12:!0,net:!0,org:!0},vn:{ac:!0,biz:!0,com:!0,edu:!0,gov:!0,health:!0,info:!0,int:!0,name:!0,net:!0,org:!0,pro:!0},ye:{co:!0,com:!0,gov:!0,ltd:!0,me:!0,net:!0,org:!0,plc:!0},yu:{ac:!0,co:!0,edu:!0,gov:!0,org:!0},za:{ac:!0,agric:!0,alt:!0,bourse:!0,city:!0,co:!0,cybernet:!0,db:!0,edu:!0,gov:!0,grondar:!0,iaccess:!0,imt:!0,inca:!0,landesign:!0,law:!0,mil:!0,net:!0,ngo:!0,nis:!0,nom:!0,olivetti:!0,org:!0,pix:!0,school:!0,tm:!0,web:!0},zm:{ac:!0,co:!0,com:!0,edu:!0,gov:!0,net:!0,org:!0,sch:!0}};(e=function(){var e=this;i(this,"isGuid",(function(t){return!!e.isString(t)&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t.toLowerCase())})),i(this,"byteArrayToStringUTF16LE",(function(t){if(!1===e.isArray(t))throw Error("Byte array cannot be null or is not an array");if(2>t.length)throw Error("Byte array needs to contain at least two bytes");if(0!=t.length%2)throw Error("Byte array needs to contain even number of bytes");for(var r="",n=0;n<t.length-1;n+=2){var i=t[n];if(255<i)throw Error("Encoding error: Input contains element larger than a byte.");i&=255;var s=t[n+1];if(255<s)throw Error("Encoding error: Input contains element larger than a byte.");s=s<<8&65280,r+=String.fromCharCode(i+s)}return r})),i(this,"obfuscatePassword",(function(t,r){if(!1===e.isString(t))throw Error("password  cannot be null and has to be a string");if(!1===e.isString(r))throw Error("obfuscationKey  cannot be null and has to be a string");return t=new Uint8Array(e.stringUTF16LEToByteArray(t)),r=new Uint8Array(e.stringUTF16LEToByteArray(r)),r=e._obfuscateData(t,r),e.arrayBufferToStringUTF16LE(r)})),i(this,"isEmptyObject",(function(t){return!(!e.isNil(t)&&0!==Object.keys(t).length)})),i(this,"objectHas",(function(t,r){return!(!e.isObject(t)||!e.isString(r))&&Object.prototype.hasOwnProperty.call(t,r)})),i(this,"isString",(function(t){return!(!e.isntNil(t)||"string"!=typeof t)})),i(this,"isFunction",(function(t){return!(!e.isntNil(t)||"function"!=typeof t)})),i(this,"isArray",(function(e){return Array.isArray(e)})),i(this,"isObject",(function(t){return!(!e.isntNil(t)||"object"!=typeof t||t.constructor!==Object)})),i(this,"isBoolean",(function(t){return!(!e.isntNil(t)||"boolean"!=typeof t)})),i(this,"getSLD",(function(t){if(e.isNil(t))return null;var r=t.split("."),n=r.length-2;return 0>n?null:(t=r[n],r=r[n+1],n=c[r],e.isNil(n)||e.isNil(n[t])?null:t+"."+r)})),i(this,"depthOfTLDorSLD",(function(t){return e.isNil(t)?null:(t=e.getSLD(t),e.isntNil(t)?2:1)})),i(this,"isInteger",(function(t){return!e.isNil(t)&&"number"==typeof t&&Number.isFinite(t)&&Math.floor(t)===t})),i(this,"isNumber",(function(t){return!e.isNil(t)&&"number"==typeof t&&Number.isFinite(t)})),i(this,"isSuccessCode",(function(t){return!e.isNil(t)&&(t===u.constants.httpStatusCodes.OK||t===u.constants.httpStatusCodes.PARTIAL_CONTENT||t===u.constants.httpStatusCodes.CREATED||t===u.constants.httpStatusCodes.NO_CONTENT)})),i(this,"isSuccessCodeLocalFile",(function(t){return!!e.isInteger(t)&&("Safari"===l.globals.BROWSER&&0===t||t===u.constants.httpStatusCodes.OK)})),i(this,"urlWithoutQueryParameters",(function(t,r){if(e.isNil(r)&&(r=!0),e.isNil(t))return null;var n=new a(t),i=n.protocol(),s=t.includes("://")?"://":":";return!e.isNil(i)&&""!==i&&u.constants.PROTOCOLS.includes(i)||(n=new a((i="http")+(s="://")+t)),t=n.hostname(),n=n.path(),(e.isNil(n)||"/"===n)&&(n=""),r?""+i+s+t+n:t+n})),i(this,"getFileNameExtension",(function(t){return e.isString(t)?""===(t=new a(t).suffix())?null:t:null})),i(this,"appendToObject",(function(t,r){if(e.isNil(t)||e.isNil(r))throw Error("invalid arguments to appendToObject");Object.keys(r).forEach((function(e){t[e]=r[e]}))})),i(this,"createCustomHTMLEvent",(function(t,r){if(!1===e.isString(t))throw Error("Event name cannot be null and has to be a string");t=new CustomEvent(t,{detail:r}),window.dispatchEvent(t)})),i(this,"getValueAtPath",(function(t,r,n){return r=e.isString(r)?r.split(/[.[\]]/g).filter(Boolean):r,e.isArray(r)||(r=[r]),r.reduce((function(t,r){return e.objectHas(t,r)?t[r]:n}),t||{})})),i(this,"setDoNotTrack",(function(t){if(t=void 0!==t&&t,!e.isBoolean(t))throw Error("Parameter to setDoNotTrack should be a boolean");try{Object.defineProperty(navigator,"doNotTrack",{value:t?"1":"0",writable:!1,configurable:!0})}catch(e){}}))}).prototype.createNewGuid=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:7&r|8).toString(16)}))},e.prototype.stringUTF16LEToByteArray=function(e){if(!1===this.isString(e))throw Error("Input string cannot be null or is not a string");for(var t=[],r=0;r<e.length;++r){var n=e.charCodeAt(r),i=(65280&n)>>8;t.push(255&n),t.push(i)}return t},e.prototype.arrayBufferToStringUTF16LE=function(e){if(this.isNil(e))return null;e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t=[],r=0;r<e.byteLength;r++)t.push(e[r]);return this.byteArrayToStringUTF16LE(t)},e.prototype.downloadFileFromUrl=function(e){var t=document.createElement("iframe");t.style.display="none",t.src=e,t.width="1",t.height="1",t.frameborder="0",document.body.appendChild(t),setTimeout((function(){document.body.removeChild(t)}),5e3)},e.prototype._obfuscateData=function(e,t){if(this.isNil(e)||this.isNil(t))return null;e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof ArrayBuffer&&(t=new Uint8Array(t));for(var r=e.byteLength,n=new Uint8Array(r),i=0;i<r;i++)n[i]=e[i]^t[i%r];return n},e.prototype.getOSType=function(){var e=u.constants.os.UNKNOWN;return-1!=navigator.appVersion.toLowerCase().indexOf("win")?e=u.constants.os.WINDOWS:-1!=navigator.appVersion.toLowerCase().indexOf("mac")&&(e=u.constants.os.MAC),e},e.prototype.isWin10OS=function(){return this.getOSType()===u.constants.os.WINDOWS&&navigator.userAgent.includes("Windows NT 10.0")},e.prototype.getNextOccurenceDate=function(e){if(!this.isNil(e)){var t=new Date;return e=t.setDate(t.getDate()+e)/6e4,Math.round(e)}},e.prototype.isNil=function(e){return null==e},e.prototype.isntNil=function(e){return null!=e},e.prototype.fetch=function(e,t){return t=void 0===t?{}:t,new Promise((function(r,n){fetch(e,t).then((function(e){r(e)})).catch((function(e){n(e)}))}))},e.prototype.safeFetch=function(e,t,r){return t=void 0===t?{}:t,r=void 0===r?u.constants.DEFAULT_FETCH_TIMEOUT:r,new Promise((function(n,i){var s=setTimeout((function(){i(Error("Request timed out "+e))}),r);fetch(e,t).then((function(e){clearTimeout(s),n(e)})).catch((function(e){clearTimeout(s),i(e)}))}))},e.prototype.baseURL=function(e){return this.isNil(e)?null:new a(e).hostname()},e.prototype.pathName=function(e){return this.isNil(e)?null:new a(e).pathname()},e.prototype.urlProtocol=function(e){return this.isNil(e)||""===(e=new a(e).protocol())?null:e},e.prototype.getUrlTLD=function(e){return this.isNil(e)||""===(e=new a(e).tld())?null:e},e.prototype.getCompanyDomain=function(e,t){if(t=void 0!==t&&t,this.isNil(e))return null;var r=new a(e),n=e;return!t||r.protocol()&&""!==r.protocol()||(n=""+u.constants.HTTPS_PROTOCOL+e,r=new a(n)),e=r.hostname(),n=this.getUrlTLD(n),""===e?null:this.isntNil(n)&&0<e.indexOf(n)?(n=e.substring(0,e.lastIndexOf(n)-1).split("."))[n.length-1]:e},e.prototype.getDomain=function(e){return this.isNil(e)||""===(e=new a(e).domain())?null:e},e.prototype.isUrlAnIp=function(e){return this.isNil(e)?null:new a(e).is(u.constants.utils.IP)},e.prototype.isTopLevelWindow=function(){return"Edge"===l.globals.BROWSER?window.top.location==window.self.location:window.top==window.self},e.prototype.getActiveElement=function(){return document.activeElement},e.prototype.verifyJson=function(e,t,r,n){try{var i=s.md.sha256.create();i.update(JSON.stringify(e));var a=i.digest().toHex(),u=o.KEYUTIL.getKey(r);if(!0===o.KJUR.jws.JWS.verify(t,u,n)){var l=(0,o.b64utoutf8)(t.split(".")[1]);return o.KJUR.jws.JWS.readSafeJSONString(l).hash===a}return!1}catch(e){return!1}},e.prototype.isNewVersionUpdated=function(e,t){t=t.split("."),e=e.split(".");var r=t[1]!==e[1];return!(t[0]===e[0]&&!r)},e.prototype.isStorePageURL=function(e){return!(!this.isString(e)||!e.startsWith(u.constants.STORE_URLS[l.globals.BROWSER]))},e.prototype.upperCaseFirstLetter=function(e){return this.isString(e)?e.charAt(0).toUpperCase()+e.slice(1):e},e.prototype.setTimeout=function(e){return new Promise((function(t,r){return this.isInteger(e)?window.setTimeout(t,e):r(Error("Delay must be an integer"))}))},e.prototype.getRandomIntInRange=function(e,t){if(!this.isInteger(e)||!this.isInteger(t)||e>t||e<u.constants.RANDOM_NUMBER_LIMITS.MIN||t>u.constants.RANDOM_NUMBER_LIMITS.MAX)throw Error("Invalid min or max value");var r=new Uint32Array(1);return window.crypto.getRandomValues(r),Math.floor(r[0]/4294967296*(t-e+1))+e},e.prototype.isTrustedEvent=function(e){if(this.isNil(e))throw Error("event should not be null");return e.isTrusted},e.prototype.isExtnRunningInNSB=function(){var e=navigator.userAgentData;return!this.isNil(e)&&(e=e.brands,!this.isNil(e)&&e.some((function(e){return!!e.brand&&e.brand.toLowerCase()===u.constants.BROWSER_TYPE.NSB.toLowerCase()})))},e=new e,t.utils=e},jsrsasign:function(e){e.exports=a},"node-forge":function(e){e.exports=n},urijs:function(e){e.exports=s}},i={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var o={};return function(){function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}var r=o;r.default=void 0;var n=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};if((r=t(r))&&r.has(e))return r.get(e);var n,i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(n in e)if("default"!==n&&Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(i,n,a):i[n]=e[n]}return i.default=e,r&&r.set(e,i),i}(e("./source/BfwCSInternals.js"),!0);e.g.SymBfw=n,r.default=n}(),o.default}())}).call(e.exports||window)})),i.register("crWTP",(function(e,t){e.exports=i("fHXV5"),i("9I8q5"),i("cubxN"),i("842FK"),i("3DZh2"),i("9OZUy"),i("2irPm"),i("dbgLj"),i("gsvhZ"),i("hxAqs"),i("1196U"),i("7MZO0"),i("8u0Ty"),i("lPEJX"),i("4xsJo"),i("rXEMx"),i("cmu6Z"),i("dzA7S"),i("ahmHA"),i("39Shu"),i("l0Fqb"),i("eBXI9"),i("4UaIe"),i("kSnMm"),i("b5ILr"),i("ckwBP")})),i.register("fHXV5",(function(e,t){e.exports={options:{usePureJavaScript:!1}}})),i.register("9I8q5",(function(e,t){var r=i("fHXV5");function n(e,t){r.cipher.registerAlgorithm(e,(function(){return new r.aes.Algorithm(e,t)}))}i("3DZh2"),i("6CyUm"),i("ckwBP"),e.exports=r.aes=r.aes||{},r.aes.startEncrypting=function(e,t,r,n){var i=g({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i},r.aes.createEncryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!1,mode:t})},r.aes.startDecrypting=function(e,t,r,n){var i=g({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i},r.aes.createDecryptionCipher=function(e,t){return g({key:e,output:null,decrypt:!0,mode:t})},r.aes.Algorithm=function(e,t){c||p();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(e,t){return d(r._w,e,t,!1)},decrypt:function(e,t){return d(r._w,e,t,!0)}}}),r._init=!1},r.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t,n=e.key;if("string"!=typeof n||16!==n.length&&24!==n.length&&32!==n.length){if(r.util.isArray(n)&&(16===n.length||24===n.length||32===n.length)){t=n,n=r.util.createBuffer();for(var i=0;i<t.length;++i)n.putByte(t[i])}}else n=r.util.createBuffer(n);if(!r.util.isArray(n)){t=n,n=[];var s=t.length();if(16===s||24===s||32===s){s>>>=2;for(i=0;i<s;++i)n.push(t.getInt32())}}if(!r.util.isArray(n)||4!==n.length&&6!==n.length&&8!==n.length)throw new Error("Invalid key parameter.");var a=this.mode.name,o=-1!==["CFB","OFB","CTR","GCM"].indexOf(a);this._w=f(n,e.decrypt&&!o),this._init=!0}},r.aes._expandKey=function(e,t){return c||p(),f(e,t)},r.aes._updateBlock=d,n("AES-ECB",r.cipher.modes.ecb),n("AES-CBC",r.cipher.modes.cbc),n("AES-CFB",r.cipher.modes.cfb),n("AES-OFB",r.cipher.modes.ofb),n("AES-CTR",r.cipher.modes.ctr),n("AES-GCM",r.cipher.modes.gcm);var s,a,o,u,l,c=!1,h=4;function p(){c=!0,o=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;s=new Array(256),a=new Array(256),u=new Array(4),l=new Array(4);for(t=0;t<4;++t)u[t]=new Array(256),l[t]=new Array(256);var r,n,i,h,p,f,d,g=0,m=0;for(t=0;t<256;++t){h=(h=m^m<<1^m<<2^m<<3^m<<4)>>8^255&h^99,s[g]=h,a[h]=g,f=(p=e[h])<<24^h<<16^h<<8^h^p,d=((r=e[g])^(n=e[r])^(i=e[n]))<<24^(g^i)<<16^(g^n^i)<<8^g^r^i;for(var y=0;y<4;++y)u[y][g]=f,l[y][h]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;0===g?g=m=1:(g=r^e[e[e[r^i]]],m^=e[e[m]])}}function f(e,t){for(var r,n=e.slice(0),i=1,a=n.length,u=h*(a+6+1),c=a;c<u;++c)r=n[c-1],c%a==0?(r=s[r>>>16&255]<<24^s[r>>>8&255]<<16^s[255&r]<<8^s[r>>>24]^o[i]<<24,i++):a>6&&c%a==4&&(r=s[r>>>24]<<24^s[r>>>16&255]<<16^s[r>>>8&255]<<8^s[255&r]),n[c]=n[c-a]^r;if(t){for(var p,f=l[0],d=l[1],g=l[2],m=l[3],y=n.slice(0),E=(c=0,(u=n.length)-h);c<u;c+=h,E-=h)if(0===c||c===u-h)y[c]=n[E],y[c+1]=n[E+3],y[c+2]=n[E+2],y[c+3]=n[E+1];else for(var v=0;v<h;++v)p=n[E+v],y[c+(3&-v)]=f[s[p>>>24]]^d[s[p>>>16&255]]^g[s[p>>>8&255]]^m[s[255&p]];n=y}return n}function d(e,t,r,n){var i,o,c,h,p,f,d,g,m,y,E,v,T=e.length/4-1;n?(i=l[0],o=l[1],c=l[2],h=l[3],p=a):(i=u[0],o=u[1],c=u[2],h=u[3],p=s),f=t[0]^e[0],d=t[n?3:1]^e[1],g=t[2]^e[2],m=t[n?1:3]^e[3];for(var A=3,S=1;S<T;++S)y=i[f>>>24]^o[d>>>16&255]^c[g>>>8&255]^h[255&m]^e[++A],E=i[d>>>24]^o[g>>>16&255]^c[m>>>8&255]^h[255&f]^e[++A],v=i[g>>>24]^o[m>>>16&255]^c[f>>>8&255]^h[255&d]^e[++A],m=i[m>>>24]^o[f>>>16&255]^c[d>>>8&255]^h[255&g]^e[++A],f=y,d=E,g=v;r[0]=p[f>>>24]<<24^p[d>>>16&255]<<16^p[g>>>8&255]<<8^p[255&m]^e[++A],r[n?3:1]=p[d>>>24]<<24^p[g>>>16&255]<<16^p[m>>>8&255]<<8^p[255&f]^e[++A],r[2]=p[g>>>24]<<24^p[m>>>16&255]<<16^p[f>>>8&255]<<8^p[255&d]^e[++A],r[n?1:3]=p[m>>>24]<<24^p[f>>>16&255]<<16^p[d>>>8&255]<<8^p[255&g]^e[++A]}function g(e){var t,n="AES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?r.cipher.createDecipher(n,e.key):r.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var s=null;n instanceof r.util.ByteBuffer&&(s=n,n={}),(n=n||{}).output=s,n.iv=e,i.call(t,n)},t}})),i.register("3DZh2",(function(e,t){var r=i("fHXV5");i("ckwBP"),e.exports=r.cipher=r.cipher||{},r.cipher.algorithms=r.cipher.algorithms||{},r.cipher.createCipher=function(e,t){var n=e;if("string"==typeof n&&(n=r.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})},r.cipher.createDecipher=function(e,t){var n=e;if("string"==typeof n&&(n=r.cipher.getAlgorithm(n))&&(n=n()),!n)throw new Error("Unsupported algorithm: "+e);return new r.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})},r.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),r.cipher.algorithms[e]=t},r.cipher.getAlgorithm=function(e){return(e=e.toUpperCase())in r.cipher.algorithms?r.cipher.algorithms[e]:null};var n=r.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};n.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=r.util.createBuffer(),this.output=e.output||r.util.createBuffer(),this.mode.start(t)},n.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},n.prototype.finish=function(e){!e||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(t){return e(this.blockSize,t,!1)},this.mode.unpad=function(t){return e(this.blockSize,t,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,t)))}})),i.register("ckwBP",(function(e,r){var n=i("CTJ0g"),s=(n=i("CTJ0g")).Buffer,a=i("fHXV5"),o=i("4VzH4"),u=e.exports=a.util=a.util||{};function l(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function c(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(u.isArrayBuffer(e)||u.isArrayBufferView(e))if(void 0!==s&&e instanceof s)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(e){for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof c||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==n&&n.nextTick,"function"==typeof setImmediate)return u.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(u.nextTick=function(e){return setImmediate(e)});if(u.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var e="forge.setImmediate",t=[];u.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",(function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach((function(e){e()}))}}),!0)}if("undefined"!=typeof MutationObserver){var r=Date.now(),i=!0,s=document.createElement("div");t=[];new MutationObserver((function(){var e=t.slice();t.length=0,e.forEach((function(e){e()}))})).observe(s,{attributes:!0});var a=u.setImmediate;u.setImmediate=function(e){Date.now()-r>15?(r=Date.now(),a(e)):(t.push(e),1===t.length&&s.setAttribute("a",i=!i))}}u.nextTick=u.setImmediate}(),u.isNodejs=void 0!==n&&n.versions&&n.versions.node,u.globalScope=u.isNodejs?t:"undefined"==typeof self?window:self,u.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},u.isArrayBufferView=function(e){return e&&u.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},u.ByteBuffer=c,u.ByteStringBuffer=c;u.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},u.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},u.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},u.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},u.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},u.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},u.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(u.encodeUtf8(e))},u.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},u.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},u.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},u.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},u.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},u.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},u.ByteStringBuffer.prototype.putInt=function(e,t){l(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},u.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},u.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},u.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},u.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},u.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},u.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},u.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},u.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},u.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},u.ByteStringBuffer.prototype.getInt=function(e){l(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},u.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},u.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},u.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},u.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},u.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},u.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},u.ByteStringBuffer.prototype.copy=function(){var e=u.createBuffer(this.data);return e.read=this.read,e},u.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},u.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},u.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},u.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},u.ByteStringBuffer.prototype.toString=function(){return u.decodeUtf8(this.bytes())},u.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=u.isArrayBuffer(e),n=u.isArrayBufferView(e);if(r||n)return this.data=r?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},u.DataBuffer.prototype.length=function(){return this.write-this.read},u.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},u.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},u.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},u.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},u.DataBuffer.prototype.putBytes=function(e,t){if(u.isArrayBufferView(e)){var r=(n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-n.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(n),this.write+=r,this}if(u.isArrayBuffer(e)){var n=new Uint8Array(e);return this.accommodate(n.byteLength),new Uint8Array(this.data.buffer).set(n,this.write),this.write+=n.byteLength,this}if(e instanceof u.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&u.isArrayBufferView(e.data)){n=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(n.byteLength),new Uint8Array(e.data.byteLength,this.write).set(n),this.write+=n.byteLength,this}if(e instanceof u.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=u.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=u.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=u.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=u.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=u.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},u.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},u.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},u.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},u.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},u.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},u.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},u.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},u.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},u.DataBuffer.prototype.putInt=function(e,t){l(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},u.DataBuffer.prototype.putSignedInt=function(e,t){return l(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},u.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},u.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},u.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},u.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},u.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},u.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},u.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},u.DataBuffer.prototype.getInt=function(e){l(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},u.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},u.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},u.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},u.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},u.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},u.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},u.DataBuffer.prototype.copy=function(){return new u.DataBuffer(this)},u.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},u.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},u.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},u.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},u.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return u.binary.raw.encode(t);if("hex"===e)return u.binary.hex.encode(t);if("base64"===e)return u.binary.base64.encode(t);if("utf8"===e)return u.text.utf8.decode(t);if("utf16"===e)return u.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},u.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=u.encodeUtf8(e)),new u.ByteBuffer(e)},u.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},u.xorBytes=function(e,t,r){for(var n="",i="",s="",a=0,o=0;r>0;--r,++a)i=e.charCodeAt(a)^t.charCodeAt(a),o>=10&&(n+=s,s="",o=0),s+=String.fromCharCode(i),++o;return n+=s},u.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},u.bytesToHex=function(e){return u.createBuffer(e).toHex()},u.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";u.encode64=function(e,t){for(var r,n,i,s="",a="",o=0;o<e.length;)r=e.charCodeAt(o++),n=e.charCodeAt(o++),i=e.charCodeAt(o++),s+=h.charAt(r>>2),s+=h.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=h.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":h.charAt(63&i)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+=s},u.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,i,s="",a=0;a<e.length;)t=p[e.charCodeAt(a++)-43],r=p[e.charCodeAt(a++)-43],n=p[e.charCodeAt(a++)-43],i=p[e.charCodeAt(a++)-43],s+=String.fromCharCode(t<<2|r>>4),64!==n&&(s+=String.fromCharCode((15&r)<<4|n>>2),64!==i&&(s+=String.fromCharCode((3&n)<<6|i)));return s},u.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},u.decodeUtf8=function(e){return decodeURIComponent(escape(e))},u.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:o.encode,decode:o.decode}},u.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},u.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},u.binary.hex.encode=u.bytesToHex,u.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var i=0,s=r=r||0;for(1&e.length&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n},u.binary.base64.encode=function(e,t){for(var r,n,i,s="",a="",o=0;o<e.byteLength;)r=e[o++],n=e[o++],i=e[o++],s+=h.charAt(r>>2),s+=h.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=h.charAt((15&n)<<2|i>>6),s+=isNaN(i)?"=":h.charAt(63&i)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+=s},u.binary.base64.decode=function(e,t,r){var n,i,s,a,o=t;o||(o=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=p[e.charCodeAt(u++)-43],i=p[e.charCodeAt(u++)-43],s=p[e.charCodeAt(u++)-43],a=p[e.charCodeAt(u++)-43],o[l++]=n<<2|i>>4,64!==s&&(o[l++]=(15&i)<<4|s>>2,64!==a&&(o[l++]=(3&s)<<6|a));return t?l-r:o.subarray(0,l)},u.binary.base58.encode=function(e,t){return u.binary.baseN.encode(e,f,t)},u.binary.base58.decode=function(e,t){return u.binary.baseN.decode(e,f,t)},u.text={utf8:{},utf16:{}},u.text.utf8.encode=function(e,t,r){e=u.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length));for(var i=r=r||0,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n},u.text.utf8.decode=function(e){return u.decodeUtf8(String.fromCharCode.apply(null,e))},u.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var i=new Uint16Array(n.buffer),s=r=r||0,a=r,o=0;o<e.length;++o)i[a++]=e.charCodeAt(o),s+=2;return t?s-r:n},u.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},u.deflate=function(e,t,r){if(t=u.decode64(e.deflate(u.encode64(t)).rval),r){var n=2;32&t.charCodeAt(1)&&(n=6),t=t.substring(n,t.length-4)}return t},u.inflate=function(e,t,r){var n=e.inflate(u.encode64(t)).rval;return null===n?null:u.decode64(n)};var d=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(null===r?n=e.removeItem(t):(r=u.encode64(JSON.stringify(r)),n=e.setItem(t,r)),void 0!==n&&!0!==n.rval){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},g=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(null===r.rval){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(u.decode64(r))),r},m=function(e,t,r,n){var i=g(e,t);null===i&&(i={}),i[r]=n,d(e,t,i)},y=function(e,t,r){var n=g(e,t);return null!==n&&(n=r in n?n[r]:null),n},E=function(e,t,r){var n=g(e,t);if(null!==n&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),d(e,t,n)}},v=function(e,t){d(e,t,null)},T=function(e,t,r){var n,i=null;void 0===r&&(r=["web","flash"]);var s=!1,a=null;for(var o in r){n=r[o];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");i=e.apply(this,t),s="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,i=e.apply(this,t),s=!0)}catch(e){a=e}if(s)break}if(!s)throw a;return i};u.setItem=function(e,t,r,n,i){T(m,arguments,i)},u.getItem=function(e,t,r,n){return T(y,arguments,n)},u.removeItem=function(e,t,r,n){T(E,arguments,n)},u.clearItems=function(e,t,r){T(v,arguments,r)},u.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},u.format=function(e){for(var t,r,n=/%./g,i=0,s=[],a=0;t=n.exec(e);){(r=e.substring(a,n.lastIndex-2)).length>0&&s.push(r),a=n.lastIndex;var o=t[0][1];switch(o){case"s":case"o":i<arguments.length?s.push(arguments[1+i++]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+o+"?>")}}return s.push(e.substring(a)),s.join("")},u.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,a=void 0===r?",":r,o=void 0===n?".":n,u=i<0?"-":"",l=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",c=l.length>3?l.length%3:0;return u+(c?l.substr(0,c)+o:"")+l.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+o)+(s?a+Math.abs(i-l).toFixed(s).slice(2):"")},u.formatSize=function(e){return e=e>=1073741824?u.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?u.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?u.formatNumber(e/1024,0)+" KiB":u.formatNumber(e,0)+" bytes"},u.bytesFromIP=function(e){return-1!==e.indexOf(".")?u.bytesFromIPv4(e):-1!==e.indexOf(":")?u.bytesFromIPv6(e):null},u.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=u.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()},u.bytesFromIPv6=function(e){for(var t=0,r=2*(8-(e=e.split(":").filter((function(e){return 0===e.length&&++t,!0}))).length+t),n=u.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var s=u.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}else n.fillWithByte(0,r),r=0;return n.getBytes()},u.bytesToIP=function(e){return 4===e.length?u.bytesToIPv4(e):16===e.length?u.bytesToIPv6(e):null},u.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},u.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=u.bytesToHex(e[i]+e[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=r[r.length-1],o=t.length;a&&o===a.end+1?(a.end=o,a.end-a.start>r[n].end-r[n].start&&(n=r.length-1)):r.push({start:o,end:o})}t.push(s)}if(r.length>0){var l=r[n];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),0===l.start&&t.unshift(""),7===l.end&&t.push(""))}return t.join(":")},u.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in u&&!e.update)return t(null,u.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return u.cores=navigator.hardwareConcurrency,t(null,u.cores);if("undefined"==typeof Worker)return u.cores=1,t(null,u.cores);if("undefined"==typeof Blob)return u.cores=2,t(null,u.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",(function(e){for(var t=Date.now(),r=t+4;Date.now()<r;);self.postMessage({st:t,et:r})}))}.toString(),")()"],{type:"application/javascript"}));!function e(n,i,s){if(0===i){var a=Math.floor(n.reduce((function(e,t){return e+t}),0)/n.length);return u.cores=Math.max(1,a),URL.revokeObjectURL(r),t(null,u.cores)}!function(e,t){for(var n=[],i=[],s=0;s<e;++s){var a=new Worker(r);a.addEventListener("message",(function(r){if(i.push(r.data),i.length===e){for(var s=0;s<e;++s)n[s].terminate();t(null,i)}})),n.push(a)}for(s=0;s<e;++s)n[s].postMessage(s)}(s,(function(t,r){n.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var i=t[n],s=r[n]=[],a=0;a<e;++a)if(n!==a){var o=t[a];(i.st>o.st&&i.st<o.et||o.st>i.st&&o.st<i.et)&&s.push(a)}return r.reduce((function(e,t){return Math.max(e,t.length)}),0)}(s,r)),e(n,i-1,s)}))}([],5,16)}})),i.register("CTJ0g",(function(e,t){})),i.register("4VzH4",(function(e,t){var r=i("CTJ0g").Buffer,n={};e.exports=n;var s={};n.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var i=0,s=t.length,a=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var u=0,l=e[i];u<o.length;++u)l+=o[u]<<8,o[u]=l%s,l=l/s|0;for(;l>0;)o.push(l%s),l=l/s|0}for(i=0;0===e[i]&&i<e.length-1;++i)n+=a;for(i=o.length-1;i>=0;--i)n+=t[o[i]]}else n=function(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var a=0,o=e.at(r);a<s.length;++a)o+=s[a]<<8,s[a]=o%n,o=o/n|0;for(;o>0;)s.push(o%n),o=o/n|0}var u="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=t[s[r]];return u}(e,t);if(r){var c=new RegExp(".{1,"+r+"}","g");n=n.match(c).join("\r\n")}return n},n.decode=function(e,t){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');var n=s[t];if(!n){n=s[t]=[];for(var i=0;i<t.length;++i)n[t.charCodeAt(i)]=i}e=e.replace(/\s/g,"");var a=t.length,o=t.charAt(0),u=[0];for(i=0;i<e.length;i++){var l=n[e.charCodeAt(i)];if(void 0===l)return;for(var c=0,h=l;c<u.length;++c)h+=u[c]*a,u[c]=255&h,h>>=8;for(;h>0;)u.push(255&h),h>>=8}for(var p=0;e[p]===o&&p<e.length-1;++p)u.push(0);return void 0!==r?r.from(u.reverse()):new Uint8Array(u.reverse())}})),i.register("6CyUm",(function(e,t){var r=i("fHXV5");i("ckwBP"),r.cipher=r.cipher||{};var n=e.exports=r.cipher.modes=r.cipher.modes||{};function s(e,t){if("string"==typeof e&&(e=r.util.createBuffer(e)),r.util.isArray(e)&&e.length>4){var n=e;e=r.util.createBuffer();for(var i=0;i<n.length;++i)e.putByte(n[i])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!r.util.isArray(e)){var s=[],a=t/4;for(i=0;i<a;++i)s.push(e.getInt32());e=s}return e}function a(e){e[e.length-1]=e[e.length-1]+1&4294967295}function o(e){return[e/4294967296|0,4294967295&e]}n.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.ecb.prototype.start=function(e){},n.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},n.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])},n.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},n.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},n.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.cbc.prototype.start=function(e){if(null===e.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._prev=this._iv.slice(0)}},n.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock},n.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)},n.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0},n.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return!(n>this.blockSize<<2)&&(e.truncate(n),!0)},n.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},n.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},n.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},n.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},n.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(0===e.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}},n.ofb.prototype.decrypt=n.ofb.prototype.encrypt,n.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0},n.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=s(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}a(this._inBlock)},n.ctr.prototype.decrypt=n.ctr.prototype.encrypt,n.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=r.util.createBuffer(),this._partialBytes=0,this._R=3774873600},n.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t,n=r.util.createBuffer(e.iv);if(this._cipherLength=0,t="additionalData"in e?r.util.createBuffer(e.additionalData):r.util.createBuffer(),this._tagLength="tagLength"in e?e.tagLength:128,this._tag=null,e.decrypt&&(this._tag=r.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var i=n.length();if(12===i)this._j0=[n.getInt32(),n.getInt32(),n.getInt32(),1];else{for(this._j0=[0,0,0,0];n.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(o(8*i)))}this._inBlock=this._j0.slice(0),a(this._inBlock),this._partialBytes=0,t=r.util.createBuffer(t),this._aDataLength=o(8*t.length());var s=t.length()%this.blockSize;for(s&&t.fillWithByte(0,this.blockSize-s),this._s=[0,0,0,0];t.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()])},n.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(0===n)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),a(this._inBlock)},n.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),a(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize},n.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=r.util.createBuffer();var i=this._aDataLength.concat(o(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,i);var s=[];this.cipher.encrypt(this._j0,s);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^s[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n},n.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){e[i/32|0]&1<<31-i%32&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r},n.gcm.prototype.pow=function(e,t){for(var r=1&e[3],n=3;n>0;--n)t[n]=e[n]>>>1|(1&e[n-1])<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)},n.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=e[r/8|0]>>>4*(7-r%8)&15,i=this._m[r][n];t[0]^=i[0],t[1]^=i[1],t[2]^=i[2],t[3]^=i[3]}return t},n.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)},n.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),a=0;a<i;++a){var o=[0,0,0,0],u=(n-1-a%n)*t;o[a/n|0]=1<<t-1<<u,s[a]=this.generateSubHashTable(this.multiply(o,e),t)}return s},n.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var a=1;a<s;++a){var o=i[s],u=i[a];i[s+a]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var l=i[s^n];i[s]=[e[0]^l[0],e[1]^l[1],e[2]^l[2],e[3]^l[3]]}return i}})),i.register("cubxN",(function(e,t){var r=i("fHXV5");i("9I8q5"),i("b5ILr");var n=e.exports=r.tls;function s(e,t,i){var s=t.entity===r.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:r.cipher.createDecipher("AES-CBC",s?i.keys.server_write_key:i.keys.client_write_key),iv:s?i.keys.server_write_IV:i.keys.client_write_IV},e.write.cipherState={init:!1,cipher:r.cipher.createCipher("AES-CBC",s?i.keys.client_write_key:i.keys.server_write_key),iv:s?i.keys.client_write_IV:i.keys.server_write_IV},e.read.cipherFunction=l,e.write.cipherFunction=a,e.read.macLength=e.write.macLength=i.mac_length,e.read.macFunction=e.write.macFunction=n.hmac_sha1}function a(e,t){var i,s=!1,a=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(a),t.updateSequenceNumber(),i=e.version.minor===n.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:r.random.getBytesSync(16),t.cipherState.init=!0;var u=t.cipherState.cipher;return u.start({iv:i}),e.version.minor>=n.Versions.TLS_1_1.minor&&u.output.putBytes(i),u.update(e.fragment),u.finish(o)&&(e.fragment=u.output,e.length=e.fragment.length(),s=!0),s}function o(e,t,r){if(!r){var n=e-t.length()%e;t.fillWithByte(n-1,n)}return!0}function u(e,t,r){var n=!0;if(r){for(var i=t.length(),s=t.last(),a=i-1-s;a<i-1;++a)n=n&&t.at(a)==s;n&&t.truncate(s+1)}return n}function l(e,t){var i,s=!1;i=e.version.minor===n.Versions.TLS_1_0.minor?t.cipherState.init?null:t.cipherState.iv:e.fragment.getBytes(16),t.cipherState.init=!0;var a=t.cipherState.cipher;a.start({iv:i}),a.update(e.fragment),s=a.finish(u);var o=t.macLength,l=r.random.getBytesSync(o),c=a.output.length();c>=o?(e.fragment=a.output.getBytes(c-o),l=a.output.getBytes(o)):e.fragment=a.output.getBytes(),e.fragment=r.util.createBuffer(e.fragment),e.length=e.fragment.length();var h=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),s=function(e,t,n){var i=r.hmac.create();return i.start("SHA1",e),i.update(t),t=i.digest().getBytes(),i.start(null,null),i.update(n),n=i.digest().getBytes(),t===n}(t.macKey,l,h)&&s,s}n.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=n.BulkCipherAlgorithm.aes,e.cipher_type=n.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=n.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:s},n.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=n.BulkCipherAlgorithm.aes,e.cipher_type=n.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=n.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:s}})),i.register("b5ILr",(function(e,t){var r=i("fHXV5");i("842FK"),i("dbgLj"),i("01LtU"),i("lPEJX"),i("dzA7S"),i("eBXI9"),i("hdQXz"),i("ckwBP");var n=function(e,t,n,i){var s=r.util.createBuffer(),a=e.length>>1,o=a+(1&e.length),u=e.substr(0,o),l=e.substr(a,o),c=r.util.createBuffer(),h=r.hmac.create();n=t+n;var p=Math.ceil(i/16),f=Math.ceil(i/20);h.start("MD5",u);var d=r.util.createBuffer();c.putBytes(n);for(var g=0;g<p;++g)h.start(null,null),h.update(c.getBytes()),c.putBuffer(h.digest()),h.start(null,null),h.update(c.bytes()+n),d.putBuffer(h.digest());h.start("SHA1",l);var m=r.util.createBuffer();c.clear(),c.putBytes(n);for(g=0;g<f;++g)h.start(null,null),h.update(c.getBytes()),c.putBuffer(h.digest()),h.start(null,null),h.update(c.bytes()+n),m.putBuffer(h.digest());return s.putBytes(r.util.xorBytes(d.getBytes(),m.getBytes(),i)),s},s=function(e,t,n){var i=!1;try{var s=e.deflate(t.fragment.getBytes());t.fragment=r.util.createBuffer(s),t.length=s.length,i=!0}catch(e){}return i},a=function(e,t,n){var i=!1;try{var s=e.inflate(t.fragment.getBytes());t.fragment=r.util.createBuffer(s),t.length=s.length,i=!0}catch(e){}return i},o=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32()}return r.util.createBuffer(e.getBytes(n))},u=function(e,t,r){e.putInt(r.length(),t<<3),e.putBuffer(r)},l={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};l.SupportedVersions=[l.Versions.TLS_1_1,l.Versions.TLS_1_0],l.Version=l.SupportedVersions[0],l.MaxFragment=15360,l.ConnectionEnd={server:0,client:1},l.PRFAlgorithm={tls_prf_sha256:0},l.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},l.CipherType={stream:0,block:1,aead:2},l.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},l.CompressionMethod={none:0,deflate:1},l.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},l.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},l.Alert={},l.Alert.Level={warning:1,fatal:2},l.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},l.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},l.CipherSuites={},l.getCipherSuite=function(e){var t=null;for(var r in l.CipherSuites){var n=l.CipherSuites[r];if(n.id[0]===e.charCodeAt(0)&&n.id[1]===e.charCodeAt(1)){t=n;break}}return t},l.handleUnexpected=function(e,t){!e.open&&e.entity===l.ConnectionEnd.client||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})},l.handleHelloRequest=function(e,t,r){!e.handshaking&&e.handshakes>0&&(l.queue(e,l.createAlert(e,{level:l.Alert.Level.warning,description:l.Alert.Description.no_renegotiation})),l.flush(e)),e.process()},l.parseHelloMessage=function(e,t,n){var i=null,s=e.entity===l.ConnectionEnd.client;if(n<38)e.error(e,{message:s?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});else{var a=t.fragment,u=a.length();if(i={version:{major:a.getByte(),minor:a.getByte()},random:r.util.createBuffer(a.getBytes(32)),session_id:o(a,1),extensions:[]},s?(i.cipher_suite=a.getBytes(2),i.compression_method=a.getByte()):(i.cipher_suites=o(a,2),i.compression_methods=o(a,1)),(u=n-(u-a.length()))>0){for(var c=o(a,2);c.length()>0;)i.extensions.push({type:[c.getByte(),c.getByte()],data:o(c,2)});if(!s)for(var h=0;h<i.extensions.length;++h){var p=i.extensions[h];if(0===p.type[0]&&0===p.type[1])for(var f=o(p.data,2);f.length()>0;){if(0!==f.getByte())break;e.session.extensions.server_name.serverNameList.push(o(f,2).getBytes())}}}if(e.session.version&&(i.version.major!==e.session.version.major||i.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});if(s)e.session.cipherSuite=l.getCipherSuite(i.cipher_suite);else for(var d=r.util.createBuffer(i.cipher_suites.bytes());d.length()>0&&(e.session.cipherSuite=l.getCipherSuite(d.getBytes(2)),null===e.session.cipherSuite););if(null===e.session.cipherSuite)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure},cipherSuite:r.util.bytesToHex(i.cipher_suite)});e.session.compressionMethod=s?i.compression_method:l.CompressionMethod.none}return i},l.createSecurityParameters=function(e,t){var r=e.entity===l.ConnectionEnd.client,n=t.random.bytes(),i=r?e.session.sp.client_random:n,s=r?n:l.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:l.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:s}},l.handleServerHello=function(e,t,r){var n=l.parseHelloMessage(e,t,r);if(!e.fail){if(!(n.version.minor<=e.version.minor))return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}});e.version.minor=n.version.minor,e.session.version=e.version;var i=n.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=d,e.session.resuming=!0,e.session.sp.server_random=n.random.bytes()):(e.expect=c,e.session.resuming=!1,l.createSecurityParameters(e,n)),e.session.id=i,e.process()}},l.handleClientHello=function(e,t,n){var i=l.parseHelloMessage(e,t,n);if(!e.fail){var s=i.session_id.bytes(),a=null;if(e.sessionCache&&(null===(a=e.sessionCache.getSession(s))?s="":(a.version.major!==i.version.major||a.version.minor>i.version.minor)&&(a=null,s="")),0===s.length&&(s=r.random.getBytes(32)),e.session.id=s,e.session.clientHelloVersion=i.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var o,u=1;u<l.SupportedVersions.length&&!((o=l.SupportedVersions[u]).minor<=i.version.minor);++u);e.version={major:o.major,minor:o.minor},e.session.version=e.version}null!==a?(e.expect=A,e.session.resuming=!0,e.session.sp.client_random=i.random.bytes()):(e.expect=!1!==e.verifyClient?E:v,e.session.resuming=!1,l.createSecurityParameters(e,i)),e.open=!0,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHello(e)})),e.session.resuming?(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))):(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)})),e.fail||(l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerKeyExchange(e)})),!1!==e.verifyClient&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateRequest(e)})),l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createServerHelloDone(e)})))),l.flush(e),e.process()}},l.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var i,s,a=t.fragment,u={certificate_list:o(a,3)},c=[];try{for(;u.certificate_list.length()>0;)i=o(u.certificate_list,3),s=r.asn1.fromDer(i),i=r.pki.certificateFromAsn1(s,!0),c.push(i)}catch(t){return e.error(e,{message:"Could not parse certificate list.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var p=e.entity===l.ConnectionEnd.client;!p&&!0!==e.verifyClient||0!==c.length?0===c.length?e.expect=p?h:v:(p?e.session.serverCertificate=c[0]:e.session.clientCertificate=c[0],l.verifyCertificateChain(e,c)&&(e.expect=p?h:v)):e.error(e,{message:p?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}}),e.process()},l.handleServerKeyExchange=function(e,t,r){if(r>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});e.expect=p,e.process()},l.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unsupported_certificate}});var i=t.fragment,s={enc_pre_master_secret:o(i,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=r.pki.privateKeyFromPem(a)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}if(null===a)return e.error(e,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}});try{var u=e.session.sp;u.pre_master_secret=a.decrypt(s.enc_pre_master_secret);var c=e.session.clientHelloVersion;if(c.major!==u.pre_master_secret.charCodeAt(0)||c.minor!==u.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(e){u.pre_master_secret=r.random.getBytes(48)}e.expect=A,null!==e.session.clientCertificate&&(e.expect=T),e.process()},l.handleCertificateRequest=function(e,t,r){if(r<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var n=t.fragment,i={certificate_types:o(n,1),certificate_authorities:o(n,2)};e.session.certificateRequest=i,e.expect=f,e.process()},l.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var i=t.fragment;i.read-=4;var s=i.bytes();i.read+=4;var a={signature:o(i,2).getBytes()},u=r.util.createBuffer();u.putBuffer(e.session.md5.digest()),u.putBuffer(e.session.sha1.digest()),u=u.getBytes();try{if(!e.session.clientCertificate.publicKey.verify(u,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(s),e.session.sha1.update(s)}catch(t){return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.handshake_failure}})}e.expect=A,e.process()},l.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.record_overflow}});if(null===e.serverCertificate){var i={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.insufficient_security}},s=e.verify(e,i.alert.description,0,[]);if(!0!==s)return(s||0===s)&&("object"!=typeof s||r.util.isArray(s)?"number"==typeof s&&(i.alert.description=s):(s.message&&(i.message=s.message),s.alert&&(i.alert.description=s.alert))),e.error(e,i)}null!==e.session.certificateRequest&&(t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificate(e)}),l.queue(e,t)),t=l.createRecord(e,{type:l.ContentType.handshake,data:l.createClientKeyExchange(e)}),l.queue(e,t),e.expect=y;var a=function(e,t){null!==e.session.certificateRequest&&null!==e.session.clientCertificate&&l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createCertificateVerify(e,t)})),l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.pending=l.createConnectionState(e),e.state.current.write=e.state.pending.write,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)})),e.expect=d,l.flush(e),e.process()};if(null===e.session.certificateRequest||null===e.session.clientCertificate)return a(e,null);l.getClientSignature(e,a)},l.handleChangeCipherSpec=function(e,t){if(1!==t.fragment.getByte())return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.illegal_parameter}});var r=e.entity===l.ConnectionEnd.client;(e.session.resuming&&r||!e.session.resuming&&!r)&&(e.state.pending=l.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&r||e.session.resuming&&!r)&&(e.state.pending=null),e.expect=r?g:S,e.process()},l.handleFinished=function(e,t,i){var s=t.fragment;s.read-=4;var a=s.bytes();s.read+=4;var o=t.fragment.getBytes();(s=r.util.createBuffer()).putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest());var u=e.entity===l.ConnectionEnd.client,c=u?"server finished":"client finished",h=e.session.sp;if((s=n(h.master_secret,c,s.getBytes(),12)).getBytes()!==o)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decrypt_error}});e.session.md5.update(a),e.session.sha1.update(a),(e.session.resuming&&u||!e.session.resuming&&!u)&&(l.queue(e,l.createRecord(e,{type:l.ContentType.change_cipher_spec,data:l.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,l.queue(e,l.createRecord(e,{type:l.ContentType.handshake,data:l.createFinished(e)}))),e.expect=u?m:_,e.handshaking=!1,++e.handshakes,e.peerCertificate=u?e.session.serverCertificate:e.session.clientCertificate,l.flush(e),e.isConnected=!0,e.connected(e),e.process()},l.handleAlert=function(e,t){var r,n=t.fragment,i={level:n.getByte(),description:n.getByte()};switch(i.description){case l.Alert.Description.close_notify:r="Connection closed.";break;case l.Alert.Description.unexpected_message:r="Unexpected message.";break;case l.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case l.Alert.Description.decryption_failed:r="Decryption failed.";break;case l.Alert.Description.record_overflow:r="Record overflow.";break;case l.Alert.Description.decompression_failure:r="Decompression failed.";break;case l.Alert.Description.handshake_failure:r="Handshake failure.";break;case l.Alert.Description.bad_certificate:r="Bad certificate.";break;case l.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case l.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case l.Alert.Description.certificate_expired:r="Certificate expired.";break;case l.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case l.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case l.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case l.Alert.Description.access_denied:r="Access denied.";break;case l.Alert.Description.decode_error:r="Decode error.";break;case l.Alert.Description.decrypt_error:r="Decrypt error.";break;case l.Alert.Description.export_restriction:r="Export restriction.";break;case l.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case l.Alert.Description.insufficient_security:r="Insufficient security.";break;case l.Alert.Description.internal_error:r="Internal error.";break;case l.Alert.Description.user_canceled:r="User canceled.";break;case l.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(i.description===l.Alert.Description.close_notify)return e.close();e.error(e,{message:r,send:!1,origin:e.entity===l.ConnectionEnd.client?"server":"client",alert:i}),e.process()},l.handleHandshake=function(e,t){var n=t.fragment,i=n.getByte(),s=n.getInt24();if(s>n.length())return e.fragmented=t,t.fragment=r.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var a=n.bytes(s+4);n.read+=4,i in U[e.entity][e.expect]?(e.entity!==l.ConnectionEnd.server||e.open||e.fail||(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:r.md.md5.create(),sha1:r.md.sha1.create()}),i!==l.HandshakeType.hello_request&&i!==l.HandshakeType.certificate_verify&&i!==l.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),U[e.entity][e.expect][i](e,t,s)):l.handleUnexpected(e,t)},l.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()},l.handleHeartbeat=function(e,t){var n=t.fragment,i=n.getByte(),s=n.getInt16(),a=n.getBytes(s);if(i===l.HeartbeatMessageType.heartbeat_request){if(e.handshaking||s>a.length)return e.process();l.queue(e,l.createRecord(e,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_response,a)})),l.flush(e)}else if(i===l.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,r.util.createBuffer(a))}e.process()};var c=1,h=2,p=3,f=4,d=5,g=6,m=7,y=8,E=1,v=2,T=3,A=4,S=5,_=6,b=l.handleUnexpected,C=l.handleChangeCipherSpec,I=l.handleAlert,x=l.handleHandshake,w=l.handleApplicationData,N=l.handleHeartbeat,R=[];R[l.ConnectionEnd.client]=[[b,I,x,b,N],[b,I,x,b,N],[b,I,x,b,N],[b,I,x,b,N],[b,I,x,b,N],[C,I,b,b,N],[b,I,x,b,N],[b,I,x,w,N],[b,I,x,b,N]],R[l.ConnectionEnd.server]=[[b,I,x,b,N],[b,I,x,b,N],[b,I,x,b,N],[b,I,x,b,N],[C,I,b,b,N],[b,I,x,b,N],[b,I,x,w,N],[b,I,x,b,N]];var F=l.handleHelloRequest,O=l.handleServerHello,D=l.handleCertificate,P=l.handleServerKeyExchange,B=l.handleCertificateRequest,L=l.handleServerHelloDone,M=l.handleFinished,U=[];U[l.ConnectionEnd.client]=[[b,b,O,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,D,P,B,L,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,b,P,B,L,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,b,b,B,L,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,b,b,b,L,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,M],[F,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[F,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]];var k=l.handleClientHello,H=l.handleClientKeyExchange,V=l.handleCertificateVerify;U[l.ConnectionEnd.server]=[[b,k,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,D,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,H,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,V,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,M],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b],[b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b,b]],l.generateKeys=function(e,t){var r=n,i=t.client_random+t.server_random;e.session.resuming||(t.master_secret=r(t.pre_master_secret,"master secret",i,48).bytes(),t.pre_master_secret=null),i=t.server_random+t.client_random;var s=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===l.Versions.TLS_1_0.major&&e.version.minor===l.Versions.TLS_1_0.minor;a&&(s+=2*t.fixed_iv_length);var o=r(t.master_secret,"key expansion",i,s),u={client_write_MAC_key:o.getBytes(t.mac_key_length),server_write_MAC_key:o.getBytes(t.mac_key_length),client_write_key:o.getBytes(t.enc_key_length),server_write_key:o.getBytes(t.enc_key_length)};return a&&(u.client_write_IV=o.getBytes(t.fixed_iv_length),u.server_write_IV=o.getBytes(t.fixed_iv_length)),u},l.createConnectionState=function(e){var t=e.entity===l.ConnectionEnd.client,r=function(){var e={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(e){return!0},compressionState:null,compressFunction:function(e){return!0},updateSequenceNumber:function(){4294967295===e.sequenceNumber[1]?(e.sequenceNumber[1]=0,++e.sequenceNumber[0]):++e.sequenceNumber[1]}};return e},n={read:r(),write:r()};if(n.read.update=function(e,t){return n.read.cipherFunction(t,n.read)?n.read.compressFunction(e,t,n.read)||e.error(e,{message:"Could not decompress record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.decompression_failure}}):e.error(e,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_record_mac}}),!e.fail},n.write.update=function(e,t){return n.write.compressFunction(e,t,n.write)?n.write.cipherFunction(t,n.write)||e.error(e,{message:"Could not encrypt record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):e.error(e,{message:"Could not compress record.",send:!1,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}),!e.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=l.generateKeys(e,i),n.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(n,e,i),i.compression_algorithm){case l.CompressionMethod.none:break;case l.CompressionMethod.deflate:n.read.compressFunction=a,n.write.compressFunction=s;break;default:throw new Error("Unsupported compression algorithm.")}}return n},l.createRandom=function(){var e=new Date,t=+e+6e4*e.getTimezoneOffset(),n=r.util.createBuffer();return n.putInt32(t),n.putBytes(r.random.getBytes(28)),n},l.createRecord=function(e,t){return t.data?{type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data}:null},l.createAlert=function(e,t){var n=r.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),l.createRecord(e,{type:l.ContentType.alert,data:n})},l.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=r.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var i=e.cipherSuites[n];t.putByte(i.id[0]),t.putByte(i.id[1])}var s=t.length(),a=r.util.createBuffer();a.putByte(l.CompressionMethod.none);var o=a.length(),c=r.util.createBuffer();if(e.virtualHost){var h=r.util.createBuffer();h.putByte(0),h.putByte(0);var p=r.util.createBuffer();p.putByte(0),u(p,2,r.util.createBuffer(e.virtualHost));var f=r.util.createBuffer();u(f,2,p),u(h,2,f),c.putBuffer(h)}var d=c.length();d>0&&(d+=2);var g=e.session.id,m=g.length+1+2+4+28+2+s+1+o+d,y=r.util.createBuffer();return y.putByte(l.HandshakeType.client_hello),y.putInt24(m),y.putByte(e.version.major),y.putByte(e.version.minor),y.putBytes(e.session.sp.client_random),u(y,1,r.util.createBuffer(g)),u(y,2,t),u(y,1,a),d>0&&u(y,2,c),y},l.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,i=r.util.createBuffer();return i.putByte(l.HandshakeType.server_hello),i.putInt24(n),i.putByte(e.version.major),i.putByte(e.version.minor),i.putBytes(e.session.sp.server_random),u(i,1,r.util.createBuffer(t)),i.putByte(e.session.cipherSuite.id[0]),i.putByte(e.session.cipherSuite.id[1]),i.putByte(e.session.compressionMethod),i},l.createCertificate=function(e){var t,n=e.entity===l.ConnectionEnd.client,i=null;e.getCertificate&&(t=n?e.session.certificateRequest:e.session.extensions.server_name.serverNameList,i=e.getCertificate(e,t));var s=r.util.createBuffer();if(null!==i)try{r.util.isArray(i)||(i=[i]);for(var a=null,o=0;o<i.length;++o){var c=r.pem.decode(i[o])[0];if("CERTIFICATE"!==c.type&&"X509 CERTIFICATE"!==c.type&&"TRUSTED CERTIFICATE"!==c.type){var h=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw h.headerType=c.type,h}if(c.procType&&"ENCRYPTED"===c.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var p=r.util.createBuffer(c.body);null===a&&(a=r.asn1.fromDer(p.bytes(),!1));var f=r.util.createBuffer();u(f,3,p),s.putBuffer(f)}i=r.pki.certificateFromAsn1(a),n?e.session.clientCertificate=i:e.session.serverCertificate=i}catch(t){return e.error(e,{message:"Could not send certificate list.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate}})}var d=3+s.length(),g=r.util.createBuffer();return g.putByte(l.HandshakeType.certificate),g.putInt24(d),u(g,3,s),g},l.createClientKeyExchange=function(e){var t=r.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(r.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var i=(t=e.session.serverCertificate.publicKey.encrypt(n.pre_master_secret)).length+2,s=r.util.createBuffer();return s.putByte(l.HandshakeType.client_key_exchange),s.putInt24(i),s.putInt16(t.length),s.putBytes(t),s},l.createServerKeyExchange=function(e){var t=r.util.createBuffer();return t},l.getClientSignature=function(e,t){var n=r.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(e,t,n){var i=null;if(e.getPrivateKey)try{i=e.getPrivateKey(e,e.session.clientCertificate),i=r.pki.privateKeyFromPem(i)}catch(t){e.error(e,{message:"Could not get private key.",cause:t,send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}})}null===i?e.error(e,{message:"No private key set.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.internal_error}}):t=i.sign(t,null),n(e,t)},e.getSignature(e,n,t)},l.createCertificateVerify=function(e,t){var n=t.length+2,i=r.util.createBuffer();return i.putByte(l.HandshakeType.certificate_verify),i.putInt24(n),i.putInt16(t.length),i.putBytes(t),i},l.createCertificateRequest=function(e){var t=r.util.createBuffer();t.putByte(1);var n=r.util.createBuffer();for(var i in e.caStore.certs){var s=e.caStore.certs[i],a=r.pki.distinguishedNameToAsn1(s.subject),o=r.asn1.toDer(a);n.putInt16(o.length()),n.putBuffer(o)}var c=1+t.length()+2+n.length(),h=r.util.createBuffer();return h.putByte(l.HandshakeType.certificate_request),h.putInt24(c),u(h,1,t),u(h,2,n),h},l.createServerHelloDone=function(e){var t=r.util.createBuffer();return t.putByte(l.HandshakeType.server_hello_done),t.putInt24(0),t},l.createChangeCipherSpec=function(){var e=r.util.createBuffer();return e.putByte(1),e},l.createFinished=function(e){var t=r.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var i=e.entity===l.ConnectionEnd.client,s=e.session.sp,a=i?"client finished":"server finished";t=n(s.master_secret,a,t.getBytes(),12);var o=r.util.createBuffer();return o.putByte(l.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o},l.createHeartbeat=function(e,t,n){void 0===n&&(n=t.length);var i=r.util.createBuffer();i.putByte(e),i.putInt16(n),i.putBytes(t);var s=i.length(),a=Math.max(16,s-n-3);return i.putBytes(r.random.getBytes(a)),i},l.queue=function(e,t){if(t&&(0!==t.fragment.length()||t.type!==l.ContentType.handshake&&t.type!==l.ContentType.alert&&t.type!==l.ContentType.change_cipher_spec)){if(t.type===l.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var i;if(t.fragment.length()<=l.MaxFragment)i=[t];else{i=[];for(var s=t.fragment.bytes();s.length>l.MaxFragment;)i.push(l.createRecord(e,{type:t.type,data:r.util.createBuffer(s.slice(0,l.MaxFragment))})),s=s.slice(l.MaxFragment);s.length>0&&i.push(l.createRecord(e,{type:t.type,data:r.util.createBuffer(s)}))}for(var a=0;a<i.length&&!e.fail;++a){var o=i[a];e.state.current.write.update(e,o)&&e.records.push(o)}}},l.flush=function(e){for(var t=0;t<e.records.length;++t){var r=e.records[t];e.tlsData.putByte(r.type),e.tlsData.putByte(r.version.major),e.tlsData.putByte(r.version.minor),e.tlsData.putInt16(r.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var j=function(e){switch(e){case!0:return!0;case r.pki.certificateError.bad_certificate:return l.Alert.Description.bad_certificate;case r.pki.certificateError.unsupported_certificate:return l.Alert.Description.unsupported_certificate;case r.pki.certificateError.certificate_revoked:return l.Alert.Description.certificate_revoked;case r.pki.certificateError.certificate_expired:return l.Alert.Description.certificate_expired;case r.pki.certificateError.certificate_unknown:return l.Alert.Description.certificate_unknown;case r.pki.certificateError.unknown_ca:return l.Alert.Description.unknown_ca;default:return l.Alert.Description.bad_certificate}};for(var K in l.verifyCertificateChain=function(e,t){try{var n={};for(var i in e.verifyOptions)n[i]=e.verifyOptions[i];n.verify=function(t,n,i){j(t);var s=e.verify(e,t,n,i);if(!0!==s){if("object"==typeof s&&!r.util.isArray(s)){var a=new Error("The application rejected the certificate.");throw a.send=!0,a.alert={level:l.Alert.Level.fatal,description:l.Alert.Description.bad_certificate},s.message&&(a.message=s.message),s.alert&&(a.alert.description=s.alert),a}s!==t&&(s=function(e){switch(e){case!0:return!0;case l.Alert.Description.bad_certificate:return r.pki.certificateError.bad_certificate;case l.Alert.Description.unsupported_certificate:return r.pki.certificateError.unsupported_certificate;case l.Alert.Description.certificate_revoked:return r.pki.certificateError.certificate_revoked;case l.Alert.Description.certificate_expired:return r.pki.certificateError.certificate_expired;case l.Alert.Description.certificate_unknown:return r.pki.certificateError.certificate_unknown;case l.Alert.Description.unknown_ca:return r.pki.certificateError.unknown_ca;default:return r.pki.certificateError.bad_certificate}}(s))}return s},r.pki.verifyCertificateChain(e.caStore,t,n)}catch(t){var s=t;("object"!=typeof s||r.util.isArray(s))&&(s={send:!0,alert:{level:l.Alert.Level.fatal,description:j(t)}}),"send"in s||(s.send=!0),"alert"in s||(s.alert={level:l.Alert.Level.fatal,description:j(s.error)}),e.error(e,s)}return!e.fail},l.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{for(var i in(n={}).cache=e||{},n.capacity=Math.max(t||100,1),n.order=[],e)n.order.length<=t?n.order.push(i):delete e[i];n.getSession=function(e){var t=null,i=null;if(e?i=r.util.bytesToHex(e):n.order.length>0&&(i=n.order[0]),null!==i&&i in n.cache)for(var s in t=n.cache[i],delete n.cache[i],n.order)if(n.order[s]===i){n.order.splice(s,1);break}return t},n.setSession=function(e,t){if(n.order.length===n.capacity){var i=n.order.shift();delete n.cache[i]}i=r.util.bytesToHex(e);n.order.push(i),n.cache[i]=t}}return n},l.createConnection=function(e){var t=null;t=e.caStore?r.util.isArray(e.caStore)?r.pki.createCaStore(e.caStore):e.caStore:r.pki.createCaStore();var n=e.cipherSuites||null;if(null===n)for(var i in n=[],l.CipherSuites)n.push(l.CipherSuites[i]);var s=e.server?l.ConnectionEnd.server:l.ConnectionEnd.client,a=e.sessionCache?l.createSessionCache(e.sessionCache):null,o={version:{major:l.Version.major,minor:l.Version.minor},entity:s,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(e,t,r,n){return t},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:r.util.createBuffer(),tlsData:r.util.createBuffer(),data:r.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(t,r){r.origin=r.origin||(t.entity===l.ConnectionEnd.client?"client":"server"),r.send&&(l.queue(t,l.createAlert(t,r.alert)),l.flush(t));var n=!1!==r.fatal;n&&(t.fail=!0),e.error(t,r),n&&t.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null,reset:function(e){o.version={major:l.Version.major,minor:l.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=(o.entity,l.ConnectionEnd.client,0),o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(e||void 0===e),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=l.createConnectionState(o)}};o.reset();return o.handshake=function(e){if(o.entity!==l.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&0===o.handshakes&&(o.fail=!1),o.handshaking=!0;var t=null;(e=e||"").length>0&&(o.sessionCache&&(t=o.sessionCache.getSession(e)),null===t&&(e="")),0===e.length&&o.sessionCache&&null!==(t=o.sessionCache.getSession())&&(e=t.id),o.session={id:e,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:r.md.md5.create(),sha1:r.md.sha1.create()},t&&(o.version=t.version,o.session.sp=t.sp),o.session.sp.client_random=l.createRandom().getBytes(),o.open=!0,l.queue(o,l.createRecord(o,{type:l.ContentType.handshake,data:l.createClientHello(o)})),l.flush(o)}},o.process=function(e){var t=0;return e&&o.input.putBytes(e),o.fail||(null!==o.record&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),null===o.record&&(t=function(e){var t=0,n=e.input,i=n.length();if(i<5)t=5-i;else{e.record={type:n.getByte(),version:{major:n.getByte(),minor:n.getByte()},length:n.getInt16(),fragment:r.util.createBuffer(),ready:!1};var s=e.record.version.major===e.version.major;s&&e.session&&e.session.version&&(s=e.record.version.minor===e.version.minor),s||e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.protocol_version}})}return t}(o)),o.fail||null===o.record||o.record.ready||(t=function(e){var t=0,r=e.input,n=r.length();return n<e.record.length?t=e.record.length-n:(e.record.fragment.putBytes(r.getBytes(e.record.length)),r.compact(),e.state.current.read.update(e,e.record)&&(null!==e.fragmented&&(e.fragmented.type===e.record.type?(e.fragmented.fragment.putBuffer(e.record.fragment),e.record=e.fragmented):e.error(e,{message:"Invalid fragmented record.",send:!0,alert:{level:l.Alert.Level.fatal,description:l.Alert.Description.unexpected_message}})),e.record.ready=!0)),t}(o)),!o.fail&&null!==o.record&&o.record.ready&&function(e,t){var r=t.type-l.ContentType.change_cipher_spec,n=R[e.entity][e.expect];r in n?n[r](e,t):l.handleUnexpected(e,t)}(o,o.record)),t},o.prepare=function(e){return l.queue(o,l.createRecord(o,{type:l.ContentType.application_data,data:r.util.createBuffer(e)})),l.flush(o)},o.prepareHeartbeatRequest=function(e,t){return e instanceof r.util.ByteBuffer&&(e=e.bytes()),void 0===t&&(t=e.length),o.expectedHeartbeatPayload=e,l.queue(o,l.createRecord(o,{type:l.ContentType.heartbeat,data:l.createHeartbeat(l.HeartbeatMessageType.heartbeat_request,e,t)})),l.flush(o)},o.close=function(e){if(!o.fail&&o.sessionCache&&o.session){var t={id:o.session.id,version:o.session.version,sp:o.session.sp};t.sp.keys=null,o.sessionCache.setSession(t.id,t)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,l.queue(o,l.createAlert(o,{level:l.Alert.Level.warning,description:l.Alert.Description.close_notify})),l.flush(o)),o.closed(o)),o.reset(e)},o},e.exports=r.tls=r.tls||{},l)"function"!=typeof l[K]&&(r.tls[K]=l[K]);r.tls.prf_tls1=n,r.tls.hmac_sha1=function(e,t,n){var i=r.hmac.create();i.start("SHA1",e);var s=r.util.createBuffer();return s.putInt32(t[0]),s.putInt32(t[1]),s.putByte(n.type),s.putByte(n.version.major),s.putByte(n.version.minor),s.putInt16(n.length),s.putBytes(n.fragment.bytes()),i.update(s.getBytes()),i.digest().getBytes()},r.tls.createSessionCache=l.createSessionCache,r.tls.createConnection=l.createConnection})),i.register("842FK",(function(e,t){var r=i("fHXV5");i("ckwBP"),i("lrulR");var n=e.exports=r.asn1=r.asn1||{};function s(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}n.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},n.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},n.create=function(e,t,i,s,a){if(r.util.isArray(s)){for(var o=[],u=0;u<s.length;++u)void 0!==s[u]&&o.push(s[u]);s=o}var l={tagClass:e,type:t,constructed:i,composed:i||r.util.isArray(s),value:s};return a&&"bitStringContents"in a&&(l.bitStringContents=a.bitStringContents,l.original=n.copy(l)),l},n.copy=function(e,t){var i;if(r.util.isArray(e)){i=[];for(var s=0;s<e.length;++s)i.push(n.copy(e[s],t));return i}return"string"==typeof e?e:(i={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:n.copy(e.value,t)},t&&!t.excludeBitStringContents&&(i.bitStringContents=e.bitStringContents),i)},n.equals=function(e,t,i){if(r.util.isArray(e)){if(!r.util.isArray(t))return!1;if(e.length!==t.length)return!1;for(var s=0;s<e.length;++s)if(!n.equals(e[s],t[s]))return!1;return!0}if(typeof e!=typeof t)return!1;if("string"==typeof e)return e===t;var a=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&n.equals(e.value,t.value);return i&&i.includeBitStringContents&&(a=a&&e.bitStringContents===t.bitStringContents),a},n.getBerValueLength=function(e){var t=e.getByte();if(128!==t)return 128&t?e.getInt((127&t)<<3):t};function a(e,t,r,i){var o;s(e,t,2);var u=e.getByte();t--;var l=192&u,c=31&u;o=e.length();var h,p,f=function(e,t){var r=e.getByte();if(t--,128!==r){var n;if(128&r){var i=127&r;s(e,t,i),n=e.getInt(i<<3)}else n=r;if(n<0)throw new Error("Negative length: "+n);return n}}(e,t);if(t-=o-e.length(),void 0!==f&&f>t){if(i.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=f,d}f=t}var g=32==(32&u);if(g)if(h=[],void 0===f)for(;;){if(s(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}o=e.length(),h.push(a(e,t,r+1,i)),t-=o-e.length()}else for(;f>0;)o=e.length(),h.push(a(e,f,r+1,i)),t-=o-e.length(),f-=o-e.length();if(void 0===h&&l===n.Class.UNIVERSAL&&c===n.Type.BITSTRING&&(p=e.bytes(f)),void 0===h&&i.decodeBitStrings&&l===n.Class.UNIVERSAL&&c===n.Type.BITSTRING&&f>1){var m=e.read,y=t,E=0;if(c===n.Type.BITSTRING&&(s(e,t,1),E=e.getByte(),t--),0===E)try{o=e.length();var v=a(e,t,r+1,{strict:!0,decodeBitStrings:!0}),T=o-e.length();t-=T,c==n.Type.BITSTRING&&T++;var A=v.tagClass;T!==f||A!==n.Class.UNIVERSAL&&A!==n.Class.CONTEXT_SPECIFIC||(h=[v])}catch(e){}void 0===h&&(e.read=m,t=y)}if(void 0===h){if(void 0===f){if(i.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=t}if(c===n.Type.BMPSTRING)for(h="";f>0;f-=2)s(e,t,2),h+=String.fromCharCode(e.getInt16()),t-=2;else h=e.getBytes(f),t-=f}var S=void 0===p?null:{bitStringContents:p};return n.create(l,c,g,h,S)}n.fromDer=function(e,t){void 0===t&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),"boolean"==typeof t&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),"string"==typeof e&&(e=r.util.createBuffer(e));var n=e.length(),i=a(e,e.length(),0,t);if(t.parseAllBytes&&0!==e.length()){var s=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw s.byteCount=n,s.remaining=e.length(),s}return i},n.toDer=function(e){var t=r.util.createBuffer(),i=e.tagClass|e.type,s=r.util.createBuffer(),a=!1;if("bitStringContents"in e&&(a=!0,e.original&&(a=n.equals(e,e.original))),a)s.putBytes(e.bitStringContents);else if(e.composed){e.constructed?i|=32:s.putByte(0);for(var o=0;o<e.value.length;++o)void 0!==e.value[o]&&s.putBuffer(n.toDer(e.value[o]))}else if(e.type===n.Type.BMPSTRING)for(o=0;o<e.value.length;++o)s.putInt16(e.value.charCodeAt(o));else e.type===n.Type.INTEGER&&e.value.length>1&&(0===e.value.charCodeAt(0)&&0==(128&e.value.charCodeAt(1))||255===e.value.charCodeAt(0)&&128==(128&e.value.charCodeAt(1)))?s.putBytes(e.value.substr(1)):s.putBytes(e.value);if(t.putByte(i),s.length()<=127)t.putByte(127&s.length());else{var u=s.length(),l="";do{l+=String.fromCharCode(255&u),u>>>=8}while(u>0);t.putByte(128|l.length);for(o=l.length-1;o>=0;--o)t.putByte(l.charCodeAt(o))}return t.putBuffer(s),t},n.oidToDer=function(e){var t,n,i,s,a=e.split("."),o=r.util.createBuffer();o.putByte(40*parseInt(a[0],10)+parseInt(a[1],10));for(var u=2;u<a.length;++u){t=!0,n=[],i=parseInt(a[u],10);do{s=127&i,i>>>=7,t||(s|=128),n.push(s),t=!1}while(i>0);for(var l=n.length-1;l>=0;--l)o.putByte(n[l])}return o},n.derToOid=function(e){var t;"string"==typeof e&&(e=r.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var i=0;e.length()>0;)i<<=7,128&(n=e.getByte())?i+=127&n:(t+="."+(i+n),i=0);return t},n.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var u=e.charAt(10),l=10;"+"!==u&&"-"!==u&&(o=parseInt(e.substr(10,2),10),l+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,0),l&&("+"===(u=e.charAt(l))||"-"===u)){var c=60*parseInt(e.substr(l+1,2),10)+parseInt(e.substr(l+4,2),10);c*=6e4,"+"===u?t.setTime(+t-c):t.setTime(+t+c)}return t},n.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),u=0,l=0,c=!1;"Z"===e.charAt(e.length-1)&&(c=!0);var h=e.length-5,p=e.charAt(h);"+"!==p&&"-"!==p||(l=60*parseInt(e.substr(h+1,2),10)+parseInt(e.substr(h+4,2),10),l*=6e4,"+"===p&&(l*=-1),c=!0);return"."===e.charAt(14)&&(u=1e3*parseFloat(e.substr(14),10)),c?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,a,o,u),t.setTime(+t+l)):(t.setFullYear(r,n,i),t.setHours(s,a,o,u)),t},n.dateToUtcTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},n.dateToGeneralizedTime=function(e){if("string"==typeof e)return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z"},n.integerToDer=function(e){var t=r.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n},n.derToInteger=function(e){"string"==typeof e&&(e=r.util.createBuffer(e));var t=8*e.length();if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)},n.validate=function(e,t,i,s){var a=!1;if(e.tagClass!==t.tagClass&&void 0!==t.tagClass||e.type!==t.type&&void 0!==t.type)s&&(e.tagClass!==t.tagClass&&s.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&s.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));else if(e.constructed===t.constructed||void 0===t.constructed){if(a=!0,t.value&&r.util.isArray(t.value))for(var o=0,u=0;a&&u<t.value.length;++u)a=t.value[u].optional||!1,e.value[o]&&((a=n.validate(e.value[o],t.value[u],i,s))?++o:t.value[u].optional&&(a=!0)),!a&&s&&s.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(a&&i)if(t.capture&&(i[t.capture]=e.value),t.captureAsn1&&(i[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(i[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)if(e.bitStringContents.length<2)i[t.captureBitStringValue]="";else{if(0!==e.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");i[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else s&&s.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');return a};var o=/[^\\u0000-\\u00ff]/;n.prettyPrint=function(e,t,i){var s="";i=i||2,(t=t||0)>0&&(s+="\n");for(var a="",u=0;u<t*i;++u)a+=" ";switch(s+=a+"Tag: ",e.tagClass){case n.Class.UNIVERSAL:s+="Universal:";break;case n.Class.APPLICATION:s+="Application:";break;case n.Class.CONTEXT_SPECIFIC:s+="Context-Specific:";break;case n.Class.PRIVATE:s+="Private:"}if(e.tagClass===n.Class.UNIVERSAL)switch(s+=e.type,e.type){case n.Type.NONE:s+=" (None)";break;case n.Type.BOOLEAN:s+=" (Boolean)";break;case n.Type.INTEGER:s+=" (Integer)";break;case n.Type.BITSTRING:s+=" (Bit string)";break;case n.Type.OCTETSTRING:s+=" (Octet string)";break;case n.Type.NULL:s+=" (Null)";break;case n.Type.OID:s+=" (Object Identifier)";break;case n.Type.ODESC:s+=" (Object Descriptor)";break;case n.Type.EXTERNAL:s+=" (External or Instance of)";break;case n.Type.REAL:s+=" (Real)";break;case n.Type.ENUMERATED:s+=" (Enumerated)";break;case n.Type.EMBEDDED:s+=" (Embedded PDV)";break;case n.Type.UTF8:s+=" (UTF8)";break;case n.Type.ROID:s+=" (Relative Object Identifier)";break;case n.Type.SEQUENCE:s+=" (Sequence)";break;case n.Type.SET:s+=" (Set)";break;case n.Type.PRINTABLESTRING:s+=" (Printable String)";break;case n.Type.IA5String:s+=" (IA5String (ASCII))";break;case n.Type.UTCTIME:s+=" (UTC time)";break;case n.Type.GENERALIZEDTIME:s+=" (Generalized time)";break;case n.Type.BMPSTRING:s+=" (BMP String)"}else s+=e.type;if(s+="\n",s+=a+"Constructed: "+e.constructed+"\n",e.composed){var l=0,c="";for(u=0;u<e.value.length;++u)void 0!==e.value[u]&&(l+=1,c+=n.prettyPrint(e.value[u],t+1,i),u+1<e.value.length&&(c+=","));s+=a+"Sub values: "+l+c}else{if(s+=a+"Value: ",e.type===n.Type.OID){var h=n.derToOid(e.value);s+=h,r.pki&&r.pki.oids&&h in r.pki.oids&&(s+=" ("+r.pki.oids[h]+") ")}if(e.type===n.Type.INTEGER)try{s+=n.derToInteger(e.value)}catch(t){s+="0x"+r.util.bytesToHex(e.value)}else if(e.type===n.Type.BITSTRING){if(e.value.length>1?s+="0x"+r.util.bytesToHex(e.value.slice(1)):s+="(none)",e.value.length>0){var p=e.value.charCodeAt(0);1==p?s+=" (1 unused bit shown)":p>1&&(s+=" ("+p+" unused bits shown)")}}else if(e.type===n.Type.OCTETSTRING)o.test(e.value)||(s+="("+e.value+") "),s+="0x"+r.util.bytesToHex(e.value);else if(e.type===n.Type.UTF8)try{s+=r.util.decodeUtf8(e.value)}catch(t){if("URI malformed"!==t.message)throw t;s+="0x"+r.util.bytesToHex(e.value)+" (malformed UTF8)"}else e.type===n.Type.PRINTABLESTRING||e.type===n.Type.IA5String?s+=e.value:o.test(e.value)?s+="0x"+r.util.bytesToHex(e.value):0===e.value.length?s+="[null]":s+=e.value}return s}})),i.register("lrulR",(function(e,t){var r=i("fHXV5");r.pki=r.pki||{};var n=e.exports=r.pki.oids=r.oids=r.oids||{};function s(e,t){n[e]=t,n[t]=e}function a(e,t){n[e]=t}s("1.2.840.113549.1.1.1","rsaEncryption"),s("1.2.840.113549.1.1.4","md5WithRSAEncryption"),s("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),s("1.2.840.113549.1.1.7","RSAES-OAEP"),s("1.2.840.113549.1.1.8","mgf1"),s("1.2.840.113549.1.1.9","pSpecified"),s("1.2.840.113549.1.1.10","RSASSA-PSS"),s("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),s("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),s("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),s("1.3.101.112","EdDSA25519"),s("1.2.840.10040.4.3","dsa-with-sha1"),s("1.3.14.3.2.7","desCBC"),s("1.3.14.3.2.26","sha1"),s("1.3.14.3.2.29","sha1WithRSASignature"),s("2.16.840.1.101.3.4.2.1","sha256"),s("2.16.840.1.101.3.4.2.2","sha384"),s("2.16.840.1.101.3.4.2.3","sha512"),s("2.16.840.1.101.3.4.2.4","sha224"),s("2.16.840.1.101.3.4.2.5","sha512-224"),s("2.16.840.1.101.3.4.2.6","sha512-256"),s("1.2.840.113549.2.2","md2"),s("1.2.840.113549.2.5","md5"),s("1.2.840.113549.1.7.1","data"),s("1.2.840.113549.1.7.2","signedData"),s("1.2.840.113549.1.7.3","envelopedData"),s("1.2.840.113549.1.7.4","signedAndEnvelopedData"),s("1.2.840.113549.1.7.5","digestedData"),s("1.2.840.113549.1.7.6","encryptedData"),s("1.2.840.113549.1.9.1","emailAddress"),s("1.2.840.113549.1.9.2","unstructuredName"),s("1.2.840.113549.1.9.3","contentType"),s("1.2.840.113549.1.9.4","messageDigest"),s("1.2.840.113549.1.9.5","signingTime"),s("1.2.840.113549.1.9.6","counterSignature"),s("1.2.840.113549.1.9.7","challengePassword"),s("1.2.840.113549.1.9.8","unstructuredAddress"),s("1.2.840.113549.1.9.14","extensionRequest"),s("1.2.840.113549.1.9.20","friendlyName"),s("1.2.840.113549.1.9.21","localKeyId"),s("1.2.840.113549.1.9.22.1","x509Certificate"),s("1.2.840.113549.1.12.10.1.1","keyBag"),s("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),s("1.2.840.113549.1.12.10.1.3","certBag"),s("1.2.840.113549.1.12.10.1.4","crlBag"),s("1.2.840.113549.1.12.10.1.5","secretBag"),s("1.2.840.113549.1.12.10.1.6","safeContentsBag"),s("1.2.840.113549.1.5.13","pkcs5PBES2"),s("1.2.840.113549.1.5.12","pkcs5PBKDF2"),s("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),s("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),s("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),s("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),s("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),s("1.2.840.113549.2.7","hmacWithSHA1"),s("1.2.840.113549.2.8","hmacWithSHA224"),s("1.2.840.113549.2.9","hmacWithSHA256"),s("1.2.840.113549.2.10","hmacWithSHA384"),s("1.2.840.113549.2.11","hmacWithSHA512"),s("1.2.840.113549.3.7","des-EDE3-CBC"),s("2.16.840.1.101.3.4.1.2","aes128-CBC"),s("2.16.840.1.101.3.4.1.22","aes192-CBC"),s("2.16.840.1.101.3.4.1.42","aes256-CBC"),s("2.5.4.3","commonName"),s("2.5.4.4","surname"),s("2.5.4.5","serialNumber"),s("2.5.4.6","countryName"),s("2.5.4.7","localityName"),s("2.5.4.8","stateOrProvinceName"),s("2.5.4.9","streetAddress"),s("2.5.4.10","organizationName"),s("2.5.4.11","organizationalUnitName"),s("2.5.4.12","title"),s("2.5.4.13","description"),s("2.5.4.15","businessCategory"),s("2.5.4.17","postalCode"),s("2.5.4.42","givenName"),s("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName"),s("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName"),s("2.16.840.1.113730.1.1","nsCertType"),s("2.16.840.1.113730.1.13","nsComment"),a("2.5.29.1","authorityKeyIdentifier"),a("2.5.29.2","keyAttributes"),a("2.5.29.3","certificatePolicies"),a("2.5.29.4","keyUsageRestriction"),a("2.5.29.5","policyMapping"),a("2.5.29.6","subtreesConstraint"),a("2.5.29.7","subjectAltName"),a("2.5.29.8","issuerAltName"),a("2.5.29.9","subjectDirectoryAttributes"),a("2.5.29.10","basicConstraints"),a("2.5.29.11","nameConstraints"),a("2.5.29.12","policyConstraints"),a("2.5.29.13","basicConstraints"),s("2.5.29.14","subjectKeyIdentifier"),s("2.5.29.15","keyUsage"),a("2.5.29.16","privateKeyUsagePeriod"),s("2.5.29.17","subjectAltName"),s("2.5.29.18","issuerAltName"),s("2.5.29.19","basicConstraints"),a("2.5.29.20","cRLNumber"),a("2.5.29.21","cRLReason"),a("2.5.29.22","expirationDate"),a("2.5.29.23","instructionCode"),a("2.5.29.24","invalidityDate"),a("2.5.29.25","cRLDistributionPoints"),a("2.5.29.26","issuingDistributionPoint"),a("2.5.29.27","deltaCRLIndicator"),a("2.5.29.28","issuingDistributionPoint"),a("2.5.29.29","certificateIssuer"),a("2.5.29.30","nameConstraints"),s("2.5.29.31","cRLDistributionPoints"),s("2.5.29.32","certificatePolicies"),a("2.5.29.33","policyMappings"),a("2.5.29.34","policyConstraints"),s("2.5.29.35","authorityKeyIdentifier"),a("2.5.29.36","policyConstraints"),s("2.5.29.37","extKeyUsage"),a("2.5.29.46","freshestCRL"),a("2.5.29.54","inhibitAnyPolicy"),s("1.3.6.1.4.1.11129.2.4.2","timestampList"),s("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),s("1.3.6.1.5.5.7.3.1","serverAuth"),s("1.3.6.1.5.5.7.3.2","clientAuth"),s("1.3.6.1.5.5.7.3.3","codeSigning"),s("1.3.6.1.5.5.7.3.4","emailProtection"),s("1.3.6.1.5.5.7.3.8","timeStamping")})),i.register("dbgLj",(function(e,t){var r=i("fHXV5");i("dze0J"),i("ckwBP"),(e.exports=r.hmac=r.hmac||{}).create=function(){var e=null,t=null,n=null,i=null,s={start:function(s,a){if(null!==s)if("string"==typeof s){if(!((s=s.toLowerCase())in r.md.algorithms))throw new Error('Unknown hash algorithm "'+s+'"');t=r.md.algorithms[s].create()}else t=s;if(null===a)a=e;else{if("string"==typeof a)a=r.util.createBuffer(a);else if(r.util.isArray(a)){var o=a;a=r.util.createBuffer();for(var u=0;u<o.length;++u)a.putByte(o[u])}var l=a.length();l>t.blockLength&&(t.start(),t.update(a.bytes()),a=t.digest()),n=r.util.createBuffer(),i=r.util.createBuffer(),l=a.length();for(u=0;u<l;++u){o=a.at(u);n.putByte(54^o),i.putByte(92^o)}if(l<t.blockLength)for(o=t.blockLength-l,u=0;u<o;++u)n.putByte(54),i.putByte(92);e=a,n=n.bytes(),i=i.bytes()}t.start(),t.update(n)},update:function(e){t.update(e)},getMac:function(){var e=t.digest().bytes();return t.start(),t.update(i),t.update(e),t.digest()}};return s.digest=s.getMac,s}})),i.register("dze0J",(function(e,t){var r=i("fHXV5");e.exports=r.md=r.md||{},r.md.algorithms=r.md.algorithms||{}})),i.register("01LtU",(function(e,t){var r=i("fHXV5");i("dze0J"),i("ckwBP");var n=e.exports=r.md5=r.md5||{};r.md.md5=r.md.algorithms.md5=n,n.create=function(){l||function(){s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],o=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var e=0;e<64;++e)u[e]=Math.floor(4294967296*Math.abs(Math.sin(e+1)));l=!0}();var e=null,t=r.util.createBuffer(),n=new Array(16),i={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},i}};return i.start(),i.update=function(s,a){"utf8"===a&&(s=r.util.encodeUtf8(s));var o=s.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var u=i.fullMessageLength.length-1;u>=0;--u)i.fullMessageLength[u]+=o[1],o[1]=o[0]+(i.fullMessageLength[u]/4294967296>>>0),i.fullMessageLength[u]=i.fullMessageLength[u]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(s),c(e,n,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var a=r.util.createBuffer();a.putBytes(t.bytes());var o=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;a.putBytes(s.substr(0,i.blockLength-o));for(var u,l=0,h=i.fullMessageLength.length-1;h>=0;--h)l=(u=8*i.fullMessageLength[h]+l)/4294967296>>>0,a.putInt32Le(u>>>0);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};c(p,n,a);var f=r.util.createBuffer();return f.putInt32Le(p.h0),f.putInt32Le(p.h1),f.putInt32Le(p.h2),f.putInt32Le(p.h3),f},i};var s=null,a=null,o=null,u=null,l=!1;function c(e,t,r){for(var n,i,s,l,c,h,p,f=r.length();f>=64;){for(i=e.h0,s=e.h1,l=e.h2,c=e.h3,p=0;p<16;++p)t[p]=r.getInt32Le(),n=i+(c^s&(l^c))+u[p]+t[p],i=c,c=l,l=s,s+=n<<(h=o[p])|n>>>32-h;for(;p<32;++p)n=i+(l^c&(s^l))+u[p]+t[a[p]],i=c,c=l,l=s,s+=n<<(h=o[p])|n>>>32-h;for(;p<48;++p)n=i+(s^l^c)+u[p]+t[a[p]],i=c,c=l,l=s,s+=n<<(h=o[p])|n>>>32-h;for(;p<64;++p)n=i+(l^(s|~c))+u[p]+t[a[p]],i=c,c=l,l=s,s+=n<<(h=o[p])|n>>>32-h;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+l|0,e.h3=e.h3+c|0,f-=64}}})),i.register("lPEJX",(function(e,t){var r=i("fHXV5");i("ckwBP");var n=e.exports=r.pem=r.pem||{};function s(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var s=0,a=-1;for(i=0;i<t.length;++i,++s)if(s>65&&-1!==a){var o=t[a];","===o?(++a,t=t.substr(0,a)+"\r\n "+t.substr(a)):t=t.substr(0,a)+"\r\n"+o+t.substr(a+1),s=i-a-1,a=-1,++i}else" "!==t[i]&&"\t"!==t[i]&&","!==t[i]||(a=i);return t}function a(e){return e.replace(/^\s+/,"")}n.encode=function(e,t){t=t||{};var n,i="-----BEGIN "+e.type+"-----\r\n";if(e.procType&&(i+=s(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]})),e.contentDomain&&(i+=s(n={name:"Content-Domain",values:[e.contentDomain]})),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),i+=s(n)),e.headers)for(var a=0;a<e.headers.length;++a)i+=s(e.headers[a]);return e.procType&&(i+="\r\n"),i+=r.util.encode64(e.body,t.maxline||64)+"\r\n",i+="-----END "+e.type+"-----\r\n"},n.decode=function(e){for(var t,n=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;t=i.exec(e);){var u=t[1];"NEW CERTIFICATE REQUEST"===u&&(u="CERTIFICATE REQUEST");var l={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:r.util.decode64(t[3])};if(n.push(l),t[2]){for(var c=t[2].split(o),h=0;t&&h<c.length;){for(var p=c[h].replace(/\s+$/,""),f=h+1;f<c.length;++f){var d=c[f];if(!/\s/.test(d[0]))break;p+=d,h=f}if(t=p.match(s)){for(var g={name:t[1],values:[]},m=t[2].split(","),y=0;y<m.length;++y)g.values.push(a(m[y]));if(l.procType)if(l.contentDomain||"Content-Domain"!==g.name)if(l.dekInfo||"DEK-Info"!==g.name)l.headers.push(g);else{if(0===g.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.contentDomain=m[0]||"";else{if("Proc-Type"!==g.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==g.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++h}if("ENCRYPTED"===l.procType&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===n.length)throw new Error("Invalid PEM formatted message.");return n}})),i.register("dzA7S",(function(e,t){var r=i("fHXV5");i("842FK"),i("lrulR"),i("klWiW"),i("lPEJX"),i("8u0Ty"),i("rXEMx"),i("l0Fqb"),i("d6Nxk"),i("ckwBP"),i("1nW1e");var n=r.asn1,s=e.exports=r.pki=r.pki||{};s.pemToDer=function(e){var t=r.pem.decode(e)[0];if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return r.util.createBuffer(t.body)},s.privateKeyFromPem=function(e){var t=r.pem.decode(e)[0];if("PRIVATE KEY"!==t.type&&"RSA PRIVATE KEY"!==t.type){var i=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw i.headerType=t.type,i}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var a=n.fromDer(t.body);return s.privateKeyFromAsn1(a)},s.privateKeyToPem=function(e,t){var i={type:"RSA PRIVATE KEY",body:n.toDer(s.privateKeyToAsn1(e)).getBytes()};return r.pem.encode(i,{maxline:t})},s.privateKeyInfoToPem=function(e,t){var i={type:"PRIVATE KEY",body:n.toDer(e).getBytes()};return r.pem.encode(i,{maxline:t})}})),i.register("klWiW",(function(e,t){var r=i("fHXV5");if(i("9I8q5"),i("842FK"),i("9OZUy"),i("dze0J"),i("lrulR"),i("8u0Ty"),i("lPEJX"),i("eBXI9"),i("4UaIe"),i("d6Nxk"),i("ckwBP"),void 0===n)var n=r.jsbn.BigInteger;var s=r.asn1,a=r.pki=r.pki||{};e.exports=a.pbe=r.pbe=r.pbe||{};var o=a.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},l={name:"PBES2Algorithms",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:s.Class.UNIVERSAL,type:s.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},c={name:"pkcs-12PbeParams",tagClass:s.Class.UNIVERSAL,type:s.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:s.Class.UNIVERSAL,type:s.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:s.Class.UNIVERSAL,type:s.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(e,t){return e.start().update(t).digest().getBytes()}function p(e){var t;if(e){if(!(t=a.oids[s.derToOid(e)])){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else t="hmacWithSHA1";return f(t)}function f(e){var t=r.md;switch(e){case"hmacWithSHA224":t=r.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}a.encryptPrivateKeyInfo=function(e,t,n){(n=n||{}).saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var i,u,l,c=r.random.getBytesSync(n.saltSize),h=n.count,p=s.integerToDer(h);if(0===n.algorithm.indexOf("aes")||"des"===n.algorithm){var d,g,m;switch(n.algorithm){case"aes128":i=16,d=16,g=o["aes128-CBC"],m=r.aes.createEncryptionCipher;break;case"aes192":i=24,d=16,g=o["aes192-CBC"],m=r.aes.createEncryptionCipher;break;case"aes256":i=32,d=16,g=o["aes256-CBC"],m=r.aes.createEncryptionCipher;break;case"des":i=8,d=8,g=o.desCBC,m=r.des.createEncryptionCipher;break;default:throw(S=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,S}var y="hmacWith"+n.prfAlgorithm.toUpperCase(),E=f(y),v=r.pkcs5.pbkdf2(t,c,h,i,E),T=r.random.getBytesSync(d);(_=m(v)).start(T),_.update(s.toDer(e)),_.finish(),l=_.output.getBytes();var A=function(e,t,n,i){var o=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,e),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,t.getBytes())]);"hmacWithSHA1"!==i&&o.value.push(s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,r.util.hexToBytes(n.toString(16))),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(a.oids[i]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.NULL,!1,"")]));return o}(c,p,i,y);u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.pkcs5PBES2).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o.pkcs5PBKDF2).getBytes()),A]),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(g).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,T)])])])}else{var S;if("3des"!==n.algorithm)throw(S=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=n.algorithm,S;i=24;var _,b=new r.util.ByteBuffer(c);v=a.pbe.generatePkcs12Key(t,b,1,h,i),T=a.pbe.generatePkcs12Key(t,b,2,h,i);(_=r.des.createEncryptionCipher(v)).start(T),_.update(s.toDer(e)),_.finish(),l=_.output.getBytes(),u=s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OID,!1,s.oidToDer(o["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,c),s.create(s.Class.UNIVERSAL,s.Type.INTEGER,!1,p.getBytes())])])}return s.create(s.Class.UNIVERSAL,s.Type.SEQUENCE,!0,[u,s.create(s.Class.UNIVERSAL,s.Type.OCTETSTRING,!1,l)])},a.decryptPrivateKeyInfo=function(e,t){var n=null,i={},o=[];if(!s.validate(e,u,i,o)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=o,l}var c=s.derToOid(i.encryptionOid),h=a.pbe.getCipher(c,i.encryptionParams,t),p=r.util.createBuffer(i.encryptedData);return h.update(p),h.finish()&&(n=s.fromDer(h.output)),n},a.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:s.toDer(e).getBytes()};return r.pem.encode(n,{maxline:t})},a.encryptedPrivateKeyFromPem=function(e){var t=r.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==t.type){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return s.fromDer(t.body)},a.encryptRsaPrivateKey=function(e,t,n){if(!(n=n||{}).legacy){var i=a.wrapRsaPrivateKey(a.privateKeyToAsn1(e));return i=a.encryptPrivateKeyInfo(i,t,n),a.encryptedPrivateKeyToPem(i)}var o,u,l,c;switch(n.algorithm){case"aes128":o="AES-128-CBC",l=16,u=r.random.getBytesSync(16),c=r.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",l=24,u=r.random.getBytesSync(16),c=r.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",l=32,u=r.random.getBytesSync(16),c=r.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",l=24,u=r.random.getBytesSync(8),c=r.des.createEncryptionCipher;break;case"des":o="DES-CBC",l=8,u=r.random.getBytesSync(8),c=r.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw h.algorithm=n.algorithm,h}var p=c(r.pbe.opensslDeriveBytes(t,u.substr(0,8),l));p.start(u),p.update(s.toDer(a.privateKeyToAsn1(e))),p.finish();var f={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:r.util.bytesToHex(u).toUpperCase()},body:p.output.getBytes()};return r.pem.encode(f)},a.decryptRsaPrivateKey=function(e,t){var n=null,i=r.pem.decode(e)[0];if("ENCRYPTED PRIVATE KEY"!==i.type&&"PRIVATE KEY"!==i.type&&"RSA PRIVATE KEY"!==i.type)throw(l=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=l,l;if(i.procType&&"ENCRYPTED"===i.procType.type){var o,u;switch(i.dekInfo.algorithm){case"DES-CBC":o=8,u=r.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,u=r.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,u=r.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,u=r.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,u=r.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,u=function(e){return r.rc2.createDecryptionCipher(e,40)};break;case"RC2-64-CBC":o=8,u=function(e){return r.rc2.createDecryptionCipher(e,64)};break;case"RC2-128-CBC":o=16,u=function(e){return r.rc2.createDecryptionCipher(e,128)};break;default:var l;throw(l=new Error('Could not decrypt private key; unsupported encryption algorithm "'+i.dekInfo.algorithm+'".')).algorithm=i.dekInfo.algorithm,l}var c=r.util.hexToBytes(i.dekInfo.parameters),h=u(r.pbe.opensslDeriveBytes(t,c.substr(0,8),o));if(h.start(c),h.update(r.util.createBuffer(i.body)),!h.finish())return n;n=h.output.getBytes()}else n=i.body;return null!==(n="ENCRYPTED PRIVATE KEY"===i.type?a.decryptPrivateKeyInfo(s.fromDer(n),t):s.fromDer(n))&&(n=a.privateKeyFromAsn1(n)),n},a.pbe.generatePkcs12Key=function(e,t,n,i,s,a){var o,u;if(null==a){if(!("sha1"in r.md))throw new Error('"sha1" hash algorithm unavailable.');a=r.md.sha1.create()}var l=a.digestLength,c=a.blockLength,h=new r.util.ByteBuffer,p=new r.util.ByteBuffer;if(null!=e){for(u=0;u<e.length;u++)p.putInt16(e.charCodeAt(u));p.putInt16(0)}var f=p.length(),d=t.length(),g=new r.util.ByteBuffer;g.fillWithByte(n,c);var m=c*Math.ceil(d/c),y=new r.util.ByteBuffer;for(u=0;u<m;u++)y.putByte(t.at(u%d));var E=c*Math.ceil(f/c),v=new r.util.ByteBuffer;for(u=0;u<E;u++)v.putByte(p.at(u%f));var T=y;T.putBuffer(v);for(var A=Math.ceil(s/l),S=1;S<=A;S++){var _=new r.util.ByteBuffer;_.putBytes(g.bytes()),_.putBytes(T.bytes());for(var b=0;b<i;b++)a.start(),a.update(_.getBytes()),_=a.digest();var C=new r.util.ByteBuffer;for(u=0;u<c;u++)C.putByte(_.at(u%l));var I=Math.ceil(d/c)+Math.ceil(f/c),x=new r.util.ByteBuffer;for(o=0;o<I;o++){var w=new r.util.ByteBuffer(T.getBytes(c)),N=511;for(u=C.length()-1;u>=0;u--)N>>=8,N+=C.at(u)+w.at(u),w.setAt(u,255&N);x.putBuffer(w)}T=x,h.putBuffer(_)}return h.truncate(h.length()-s),h},a.pbe.getCipher=function(e,t,r){switch(e){case a.oids.pkcs5PBES2:return a.pbe.getCipherForPBES2(e,t,r);case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case a.oids["pbewithSHAAnd40BitRC2-CBC"]:return a.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}},a.pbe.getCipherForPBES2=function(e,t,n){var i,o={},u=[];if(!s.validate(t,l,o,u))throw(i=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,i;if((e=s.derToOid(o.kdfOid))!==a.oids.pkcs5PBKDF2)throw(i=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=e,i.supportedOids=["pkcs5PBKDF2"],i;if((e=s.derToOid(o.encOid))!==a.oids["aes128-CBC"]&&e!==a.oids["aes192-CBC"]&&e!==a.oids["aes256-CBC"]&&e!==a.oids["des-EDE3-CBC"]&&e!==a.oids.desCBC)throw(i=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=e,i.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],i;var c,h,f=o.kdfSalt,d=r.util.createBuffer(o.kdfIterationCount);switch(d=d.getInt(d.length()<<3),a.oids[e]){case"aes128-CBC":c=16,h=r.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,h=r.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,h=r.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,h=r.des.createDecryptionCipher;break;case"desCBC":c=8,h=r.des.createDecryptionCipher}var g=p(o.prfOid),m=r.pkcs5.pbkdf2(n,f,d,c,g),y=o.encIv,E=h(m);return E.start(y),E},a.pbe.getCipherForPKCS12PBE=function(e,t,n){var i={},o=[];if(!s.validate(t,c,i,o))throw(g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=o,g;var u,l,h,f=r.util.createBuffer(i.salt),d=r.util.createBuffer(i.iterations);switch(d=d.getInt(d.length()<<3),e){case a.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,l=8,h=r.des.startDecrypting;break;case a.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,l=8,h=function(e,t){var n=r.rc2.createDecryptionCipher(e,40);return n.start(t,null),n};break;default:var g;throw(g=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=e,g}var m=p(i.prfOid),y=a.pbe.generatePkcs12Key(n,f,1,d,u,m);return m.start(),h(y,a.pbe.generatePkcs12Key(n,f,2,d,l,m))},a.pbe.opensslDeriveBytes=function(e,t,n,i){if(null==i){if(!("md5"in r.md))throw new Error('"md5" hash algorithm unavailable.');i=r.md.md5.create()}null===t&&(t="");for(var s=[h(i,e+t)],a=16,o=1;a<n;++o,a+=16)s.push(h(i,s[o-1]+e+t));return s.join("").substr(0,n)}})),i.register("9OZUy",(function(e,t){var r=i("fHXV5");function n(e,t){r.cipher.registerAlgorithm(e,(function(){return new r.des.Algorithm(e,t)}))}i("3DZh2"),i("6CyUm"),i("ckwBP"),e.exports=r.des=r.des||{},r.des.startEncrypting=function(e,t,r,n){var i=d({key:e,output:r,decrypt:!1,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},r.des.createEncryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!1,mode:t})},r.des.startDecrypting=function(e,t,r,n){var i=d({key:e,output:r,decrypt:!0,mode:n||(null===t?"ECB":"CBC")});return i.start(t),i},r.des.createDecryptionCipher=function(e,t){return d({key:e,output:null,decrypt:!0,mode:t})},r.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(e,t){return f(r._keys,e,t,!1)},decrypt:function(e,t){return f(r._keys,e,t,!0)}}}),r._init=!1},r.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=r.util.createBuffer(e.key);if(0===this.name.indexOf("3DES")&&24!==t.length())throw new Error("Invalid Triple-DES key size: "+8*t.length());this._keys=function(e){for(var t,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],i=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],s=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,y=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],v=0,T=0;T<m;T++){var A=e.getInt32(),S=e.getInt32();A^=(t=252645135&(A>>>4^S))<<4,A^=t=65535&((S^=t)>>>-16^A),A^=(t=858993459&(A>>>2^(S^=t<<-16)))<<2,A^=t=65535&((S^=t)>>>-16^A),A^=(t=1431655765&(A>>>1^(S^=t<<-16)))<<1,A^=t=16711935&((S^=t)>>>8^A),t=(A^=(t=1431655765&(A>>>1^(S^=t<<8)))<<1)<<8|(S^=t)>>>20&240,A=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=t;for(var _=0;_<E.length;++_){E[_]?(A=A<<2|A>>>26,S=S<<2|S>>>26):(A=A<<1|A>>>27,S=S<<1|S>>>27),S&=-15;var b=r[(A&=-15)>>>28]|n[A>>>24&15]|i[A>>>20&15]|s[A>>>16&15]|a[A>>>12&15]|o[A>>>8&15]|u[A>>>4&15],C=l[S>>>28]|c[S>>>24&15]|h[S>>>20&15]|p[S>>>16&15]|f[S>>>12&15]|d[S>>>8&15]|g[S>>>4&15];t=65535&(C>>>16^b),y[v++]=b^t,y[v++]=C^t<<16}}return y}(t),this._init=!0}},n("DES-ECB",r.cipher.modes.ecb),n("DES-CBC",r.cipher.modes.cbc),n("DES-CFB",r.cipher.modes.cfb),n("DES-OFB",r.cipher.modes.ofb),n("DES-CTR",r.cipher.modes.ctr),n("3DES-ECB",r.cipher.modes.ecb),n("3DES-CBC",r.cipher.modes.cbc),n("3DES-CFB",r.cipher.modes.cfb),n("3DES-OFB",r.cipher.modes.ofb),n("3DES-CTR",r.cipher.modes.ctr);var s=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],a=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],o=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],l=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],c=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function f(e,t,r,n){var i,f,d=32===e.length?3:9;i=3===d?n?[30,-2,-2]:[0,32,2]:n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=t[0],m=t[1];g^=(f=252645135&(g>>>4^m))<<4,g^=(f=65535&(g>>>16^(m^=f)))<<16,g^=f=858993459&((m^=f)>>>2^g),g^=f=16711935&((m^=f<<2)>>>8^g),g=(g^=(f=1431655765&(g>>>1^(m^=f<<8)))<<1)<<1|g>>>31,m=(m^=f)<<1|m>>>31;for(var y=0;y<d;y+=3){for(var E=i[y+1],v=i[y+2],T=i[y];T!=E;T+=v){var A=m^e[T],S=(m>>>4|m<<28)^e[T+1];f=g,g=m,m=f^(a[A>>>24&63]|u[A>>>16&63]|c[A>>>8&63]|p[63&A]|s[S>>>24&63]|o[S>>>16&63]|l[S>>>8&63]|h[63&S])}f=g,g=m,m=f}m=m>>>1|m<<31,m^=f=1431655765&((g=g>>>1|g<<31)>>>1^m),m^=(f=16711935&(m>>>8^(g^=f<<1)))<<8,m^=(f=858993459&(m>>>2^(g^=f)))<<2,m^=f=65535&((g^=f)>>>16^m),m^=f=252645135&((g^=f<<16)>>>4^m),g^=f<<4,r[0]=g,r[1]=m}function d(e){var t,n="DES-"+((e=e||{}).mode||"CBC").toUpperCase(),i=(t=e.decrypt?r.cipher.createDecipher(n,e.key):r.cipher.createCipher(n,e.key)).start;return t.start=function(e,n){var s=null;n instanceof r.util.ByteBuffer&&(s=n,n={}),(n=n||{}).output=s,n.iv=e,i.call(t,n)},t}})),i.register("8u0Ty",(function(e,t){var r=i("CTJ0g").Buffer,n=i("fHXV5");i("dbgLj"),i("dze0J"),i("ckwBP");var s,a=n.pkcs5=n.pkcs5||{};n.util.isNodejs&&!n.options.usePureJavaScript&&(s=i("CTJ0g")),e.exports=n.pbkdf2=a.pbkdf2=function(e,t,i,a,o,u){if("function"==typeof o&&(u=o,o=null),n.util.isNodejs&&!n.options.usePureJavaScript&&s.pbkdf2&&(null===o||"object"!=typeof o)&&(s.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!=typeof o&&(o="sha1"),e=r.from(e,"binary"),t=r.from(t,"binary"),u?4===s.pbkdf2Sync.length?s.pbkdf2(e,t,i,a,(function(e,t){if(e)return u(e);u(null,t.toString("binary"))})):s.pbkdf2(e,t,i,a,o,(function(e,t){if(e)return u(e);u(null,t.toString("binary"))})):4===s.pbkdf2Sync.length?s.pbkdf2Sync(e,t,i,a).toString("binary"):s.pbkdf2Sync(e,t,i,a,o).toString("binary");if(null==o&&(o="sha1"),"string"==typeof o){if(!(o in n.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=n.md[o].create()}var l=o.digestLength;if(a>4294967295*l){var c=new Error("Derived key is too long.");if(u)return u(c);throw c}var h=Math.ceil(a/l),p=a-(h-1)*l,f=n.hmac.create();f.start(o,e);var d,g,m,y="";if(!u){for(var E=1;E<=h;++E){f.start(null,null),f.update(t),f.update(n.util.int32ToBytes(E)),d=m=f.digest().getBytes();for(var v=2;v<=i;++v)f.start(null,null),f.update(m),g=f.digest().getBytes(),d=n.util.xorBytes(d,g,l),m=g;y+=E<h?d:d.substr(0,p)}return y}E=1;function T(){if(E>h)return u(null,y);f.start(null,null),f.update(t),f.update(n.util.int32ToBytes(E)),d=m=f.digest().getBytes(),v=2,A()}function A(){if(v<=i)return f.start(null,null),f.update(m),g=f.digest().getBytes(),d=n.util.xorBytes(d,g,l),m=g,++v,n.util.setImmediate(A);y+=E<h?d:d.substr(0,p),++E,T()}T()}})),i.register("eBXI9",(function(e,t){var r=i("fHXV5");i("9I8q5"),i("dvpVw"),i("39Shu"),i("ckwBP"),r.random&&r.random.getBytes?e.exports=r.random:function(t){var n={},i=new Array(4),s=r.util.createBuffer();function a(){var e=r.prng.create(n);return e.getBytes=function(t,r){return e.generate(t,r)},e.getBytesSync=function(t){return e.generate(t)},e}n.formatKey=function(e){var t=r.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),r.aes._expandKey(e,!1)},n.formatSeed=function(e){var t=r.util.createBuffer(e);return(e=new Array(4))[0]=t.getInt32(),e[1]=t.getInt32(),e[2]=t.getInt32(),e[3]=t.getInt32(),e},n.cipher=function(e,t){return r.aes._updateBlock(e,t,i,!1),s.putInt32(i[0]),s.putInt32(i[1]),s.putInt32(i[2]),s.putInt32(i[3]),s.getBytes()},n.increment=function(e){return++e[3],e},n.md=r.md.sha256;var o=a(),u=null,l=r.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(u=function(e){return c.getRandomValues(e)}),r.options.usePureJavaScript||!r.util.isNodejs&&!u){if("undefined"==typeof window||window.document,o.collectInt(+new Date,32),"undefined"!=typeof navigator){var h="";for(var p in navigator)try{"string"==typeof navigator[p]&&(h+=navigator[p])}catch(e){}o.collect(h),h=null}t&&(t().mousemove((function(e){o.collectInt(e.clientX,16),o.collectInt(e.clientY,16)})),t().keypress((function(e){o.collectInt(e.charCode,8)})))}if(r.random)for(var p in o)r.random[p]=o[p];else r.random=o;r.random.createInstance=a,e.exports=r.random}("undefined"!=typeof jQuery?jQuery:null)})),i.register("dvpVw",(function(e,t){var r=i("fHXV5");i("dze0J"),i("ckwBP");var n=e.exports=r.sha256=r.sha256||{};r.md.sha256=r.md.algorithms.sha256=n,n.create=function(){a||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=!0);var e=null,t=r.util.createBuffer(),n=new Array(64),i={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},i}};return i.start(),i.update=function(s,a){"utf8"===a&&(s=r.util.encodeUtf8(s));var o=s.length;i.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var l=i.fullMessageLength.length-1;l>=0;--l)i.fullMessageLength[l]+=o[1],o[1]=o[0]+(i.fullMessageLength[l]/4294967296>>>0),i.fullMessageLength[l]=i.fullMessageLength[l]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(s),u(e,n,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var a=r.util.createBuffer();a.putBytes(t.bytes());var o,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;a.putBytes(s.substr(0,i.blockLength-l));for(var c=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)c+=(o=8*i.fullMessageLength[h+1])/4294967296>>>0,a.putInt32(c>>>0),c=o>>>0;a.putInt32(c);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};u(p,n,a);var f=r.util.createBuffer();return f.putInt32(p.h0),f.putInt32(p.h1),f.putInt32(p.h2),f.putInt32(p.h3),f.putInt32(p.h4),f.putInt32(p.h5),f.putInt32(p.h6),f.putInt32(p.h7),f},i};var s=null,a=!1,o=null;function u(e,t,r){for(var n,i,s,a,u,l,c,h,p,f,d,g,m,y=r.length();y>=64;){for(u=0;u<16;++u)t[u]=r.getInt32();for(;u<64;++u)n=((n=t[u-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=((i=t[u-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[u]=n+t[u-7]+i+t[u-16]|0;for(l=e.h0,c=e.h1,h=e.h2,p=e.h3,f=e.h4,d=e.h5,g=e.h6,m=e.h7,u=0;u<64;++u)s=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),a=l&c|h&(l^c),n=m+((f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(g^f&(d^g))+o[u]+t[u],m=g,g=d,d=f,f=p+n>>>0,p=h,h=c,c=l,l=n+(i=s+a)>>>0;e.h0=e.h0+l|0,e.h1=e.h1+c|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+f|0,e.h5=e.h5+d|0,e.h6=e.h6+g|0,e.h7=e.h7+m|0,y-=64}}})),i.register("39Shu",(function(e,t){var r=i("CTJ0g"),n=i("fHXV5");i("ckwBP");var s=null;!n.util.isNodejs||n.options.usePureJavaScript||r.versions["node-webkit"]||(s=i("CTJ0g")),(e.exports=n.prng=n.prng||{}).create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,i=new Array(32),a=0;a<32;++a)i[a]=r.create();function o(){if(t.pools[0].messageLength>=32)return u();var e=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(e)),u()}function u(){t.reseeds=4294967295===t.reseeds?0:t.reseeds+1;var e=t.plugin.md.create();e.update(t.keyBytes);for(var r=1,n=0;n<32;++n)t.reseeds%r==0&&(e.update(t.pools[n].digest().getBytes()),t.pools[n].start()),r<<=1;t.keyBytes=e.digest().getBytes(),e.start(),e.update(t.keyBytes);var i=e.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(i),t.generated=0}function l(e){var t=null,r=n.util.globalScope,i=r.crypto||r.msCrypto;i&&i.getRandomValues&&(t=function(e){return i.getRandomValues(e)});var s=n.util.createBuffer();if(t)for(;s.length()<e;){var a=Math.max(1,Math.min(e-s.length(),65536)/4),o=new Uint32Array(Math.floor(a));try{t(o);for(var u=0;u<o.length;++u)s.putInt32(o[u])}catch(e){if(!("undefined"!=typeof QuotaExceededError&&e instanceof QuotaExceededError))throw e}}if(s.length()<e)for(var l,c,h,p=Math.floor(65536*Math.random());s.length()<e;){c=16807*(65535&p),c+=(32767&(l=16807*(p>>16)))<<16,p=4294967295&(c=(2147483647&(c+=l>>15))+(c>>31));for(u=0;u<3;++u)h=p>>>(u<<3),h^=Math.floor(256*Math.random()),s.putByte(255&h)}return s.getBytes(e)}return t.pools=i,t.pool=0,t.generate=function(e,r){if(!r)return t.generateSync(e);var i=t.plugin.cipher,s=t.plugin.increment,a=t.plugin.formatKey,o=t.plugin.formatSeed,l=n.util.createBuffer();t.key=null,function c(h){if(h)return r(h);if(l.length()>=e)return r(null,l.getBytes(e));t.generated>1048575&&(t.key=null);if(null===t.key)return n.util.nextTick((function(){!function(e){if(t.pools[0].messageLength>=32)return u(),e();var r=32-t.pools[0].messageLength<<5;t.seedFile(r,(function(r,n){if(r)return e(r);t.collect(n),u(),e()}))}(c)}));var p=i(t.key,t.seed);t.generated+=p.length,l.putBytes(p),t.key=a(i(t.key,s(t.seed))),t.seed=o(i(t.key,t.seed)),n.util.setImmediate(c)}()},t.generateSync=function(e){var r=t.plugin.cipher,i=t.plugin.increment,s=t.plugin.formatKey,a=t.plugin.formatSeed;t.key=null;for(var u=n.util.createBuffer();u.length()<e;){t.generated>1048575&&(t.key=null),null===t.key&&o();var l=r(t.key,t.seed);t.generated+=l.length,u.putBytes(l),t.key=s(r(t.key,i(t.seed))),t.seed=a(r(t.key,t.seed))}return u.getBytes(e)},s?(t.seedFile=function(e,t){s.randomBytes(e,(function(e,r){if(e)return t(e);t(null,r.toString())}))},t.seedFileSync=function(e){return s.randomBytes(e).toString()}):(t.seedFile=function(e,t){try{t(null,l(e))}catch(e){t(e)}},t.seedFileSync=l),t.collect=function(e){for(var r=e.length,n=0;n<r;++n)t.pools[t.pool].update(e.substr(n,1)),t.pool=31===t.pool?0:t.pool+1},t.collectInt=function(e,r){for(var n="",i=0;i<r;i+=8)n+=String.fromCharCode(e>>i&255);t.collect(n)},t.registerWorker=function(e){if(e===self)t.seedFile=function(e,t){self.addEventListener("message",(function e(r){var n=r.data;n.forge&&n.forge.prng&&(self.removeEventListener("message",e),t(n.forge.prng.err,n.forge.prng.bytes))})),self.postMessage({forge:{prng:{needed:e}}})};else{e.addEventListener("message",(function(r){var n=r.data;n.forge&&n.forge.prng&&t.seedFile(n.forge.prng.needed,(function(t,r){e.postMessage({forge:{prng:{err:t,bytes:r}}})}))}))}},t}})),i.register("4UaIe",(function(e,t){var r=i("fHXV5");i("ckwBP");var n=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],a=function(e,t){return e<<t&65535|(65535&e)>>16-t},o=function(e,t){return(65535&e)>>t|e<<16-t&65535};e.exports=r.rc2=r.rc2||{},r.rc2.expandKey=function(e,t){"string"==typeof e&&(e=r.util.createBuffer(e)),t=t||128;var i,s=e,a=e.length(),o=t,u=Math.ceil(o/8),l=255>>(7&o);for(i=a;i<128;i++)s.putByte(n[s.at(i-1)+s.at(i-a)&255]);for(s.setAt(128-u,n[s.at(128-u)&l]),i=127-u;i>=0;i--)s.setAt(i,n[s.at(i+1)^s.at(i+u)]);return s};var u=function(e,t,n){var i,u,l,c,h=!1,p=null,f=null,d=null,g=[];for(e=r.rc2.expandKey(e,t),l=0;l<64;l++)g.push(e.getInt16Le());n?(i=function(e){for(l=0;l<4;l++)e[l]+=g[c]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),e[l]=a(e[l],s[l]),c++},u=function(e){for(l=0;l<4;l++)e[l]+=g[63&e[(l+3)%4]]}):(i=function(e){for(l=3;l>=0;l--)e[l]=o(e[l],s[l]),e[l]-=g[c]+(e[(l+3)%4]&e[(l+2)%4])+(~e[(l+3)%4]&e[(l+1)%4]),c--},u=function(e){for(l=3;l>=0;l--)e[l]-=g[63&e[(l+3)%4]]});var m=function(e){var t=[];for(l=0;l<4;l++){var r=p.getInt16Le();null!==d&&(n?r^=d.getInt16Le():d.putInt16Le(r)),t.push(65535&r)}c=n?0:63;for(var i=0;i<e.length;i++)for(var s=0;s<e[i][0];s++)e[i][1](t);for(l=0;l<4;l++)null!==d&&(n?d.putInt16Le(t[l]):t[l]^=d.getInt16Le()),f.putInt16Le(t[l])},y=null;return y={start:function(e,t){e&&"string"==typeof e&&(e=r.util.createBuffer(e)),h=!1,p=r.util.createBuffer(),f=t||new r.util.createBuffer,d=e,y.output=f},update:function(e){for(h||p.putBuffer(e);p.length()>=8;)m([[5,i],[1,u],[6,i],[1,u],[5,i]])},finish:function(e){var t=!0;if(n)if(e)t=e(8,p,!n);else{var r=8===p.length()?8:8-p.length();p.fillWithByte(r,r)}if(t&&(h=!0,y.update()),!n&&(t=0===p.length()))if(e)t=e(8,f,!n);else{var i=f.length(),s=f.at(i-1);s>i?t=!1:f.truncate(s)}return t}}};r.rc2.startEncrypting=function(e,t,n){var i=r.rc2.createEncryptionCipher(e,128);return i.start(t,n),i},r.rc2.createEncryptionCipher=function(e,t){return u(e,t,!0)},r.rc2.startDecrypting=function(e,t,n){var i=r.rc2.createDecryptionCipher(e,128);return i.start(t,n),i},r.rc2.createDecryptionCipher=function(e,t){return u(e,t,!1)}})),i.register("d6Nxk",(function(e,t){var r=i("fHXV5");if(i("842FK"),i("9BCTm"),i("lrulR"),i("4xsJo"),i("ahmHA"),i("eBXI9"),i("ckwBP"),void 0===n)var n=r.jsbn.BigInteger;var s=r.util.isNodejs?i("CTJ0g"):null,a=r.asn1,o=r.util;r.pki=r.pki||{},e.exports=r.pki.rsa=r.rsa=r.rsa||{};var u=r.pki,l=[6,4,2,4,2,4,6,2],c={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},h={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},p={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},f=r.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},d={name:"DigestInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},g=function(e){var t;if(!(e.algorithm in u.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}t=u.oids[e.algorithm];var n=a.oidToDer(t).getBytes(),i=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),s=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);s.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,n)),s.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var o=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),a.toDer(i).getBytes()},m=function(e,t,i){if(i)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);var s;t.dP||(t.dP=t.d.mod(t.p.subtract(n.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(n.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));do{s=new n(r.util.bytesToHex(r.random.getBytes(t.n.bitLength()/8)),16)}while(s.compareTo(t.n)>=0||!s.gcd(t.n).equals(n.ONE));for(var a=(e=e.multiply(s.modPow(t.e,t.n)).mod(t.n)).mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);a.compareTo(o)<0;)a=a.add(t.p);var u=a.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o);return u=u.multiply(s.modInverse(t.n)).mod(t.n)};function y(e,t,n){var i=r.util.createBuffer(),s=Math.ceil(t.n.bitLength()/8);if(e.length>s-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=s-11,a}i.putByte(0),i.putByte(n);var o,u=s-3-e.length;if(0===n||1===n){o=0===n?0:255;for(var l=0;l<u;++l)i.putByte(o)}else for(;u>0;){var c=0,h=r.random.getBytes(u);for(l=0;l<u;++l)0===(o=h.charCodeAt(l))?++c:i.putByte(o);u=c}return i.putByte(0),i.putBytes(e),i}function E(e,t,n,i){var s=Math.ceil(t.n.bitLength()/8),a=r.util.createBuffer(e),o=a.getByte(),u=a.getByte();if(0!==o||n&&0!==u&&1!==u||!n&&2!=u||n&&0===u&&void 0===i)throw new Error("Encryption block is invalid.");var l=0;if(0===u){l=s-3-i;for(var c=0;c<l;++c)if(0!==a.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(l=0;a.length()>1;){if(255!==a.getByte()){--a.read;break}++l}else if(2===u)for(l=0;a.length()>1;){if(0===a.getByte()){--a.read;break}++l}if(0!==a.getByte()||l!==s-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function v(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=r.util.hexToBytes(t);return n.length>1&&(0===n.charCodeAt(0)&&0==(128&n.charCodeAt(1))||255===n.charCodeAt(0)&&128==(128&n.charCodeAt(1)))?n.substr(1):n}function T(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function A(e){return r.util.isNodejs&&"function"==typeof s[e]}function S(e){return void 0!==o.globalScope&&"object"==typeof o.globalScope.crypto&&"object"==typeof o.globalScope.crypto.subtle&&"function"==typeof o.globalScope.crypto.subtle[e]}function _(e){return void 0!==o.globalScope&&"object"==typeof o.globalScope.msCrypto&&"object"==typeof o.globalScope.msCrypto.subtle&&"function"==typeof o.globalScope.msCrypto.subtle[e]}function b(e){for(var t=r.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}u.rsa.encrypt=function(e,t,i){var s,a=i,o=Math.ceil(t.n.bitLength()/8);!1!==i&&!0!==i?(a=2===i,s=y(e,t,i)):(s=r.util.createBuffer()).putBytes(e);for(var u=new n(s.toHex(),16),l=m(u,t,a).toString(16),c=r.util.createBuffer(),h=o-Math.ceil(l.length/2);h>0;)c.putByte(0),--h;return c.putBytes(r.util.hexToBytes(l)),c.getBytes()},u.rsa.decrypt=function(e,t,i,s){var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var o=new Error("Encrypted message length is invalid.");throw o.length=e.length,o.expected=a,o}var u=new n(r.util.createBuffer(e).toHex(),16);if(u.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=m(u,t,i).toString(16),c=r.util.createBuffer(),h=a-Math.ceil(l.length/2);h>0;)c.putByte(0),--h;return c.putBytes(r.util.hexToBytes(l)),!1!==s?E(c.getBytes(),t,i):c.getBytes()},u.rsa.createKeyPairGenerationState=function(e,t,i){"string"==typeof e&&(e=parseInt(e,10)),e=e||2048;var s,a=(i=i||{}).prng||r.random,o={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}},u=i.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(s={algorithm:u,state:0,bits:e,rng:o,eInt:t||65537,e:new n(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null}).e.fromInt(s.eInt),s},u.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new n(null);r.fromInt(30);for(var i,s=0,a=function(e,t){return e|t},o=+new Date,c=0;null===e.keys&&(t<=0||c<t);){if(0===e.state){var h=null===e.p?e.pBits:e.qBits,p=h-1;0===e.pqState?(e.num=new n(h,e.rng),e.num.testBit(p)||e.num.bitwiseTo(n.ONE.shiftLeft(p),a,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),s=0,++e.pqState):1===e.pqState?e.num.bitLength()>h?e.pqState=0:e.num.isProbablePrime(T(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(l[s++%8],0):2===e.pqState?e.pqState=0===e.num.subtract(n.ONE).gcd(e.e).compareTo(n.ONE)?3:0:3===e.pqState&&(e.pqState=0,null===e.p?e.p=e.num:e.q=e.num,null!==e.p&&null!==e.q&&++e.state,e.num=null)}else if(1===e.state)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(2===e.state)e.p1=e.p.subtract(n.ONE),e.q1=e.q.subtract(n.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(3===e.state)0===e.phi.gcd(e.e).compareTo(n.ONE)?++e.state:(e.p=null,e.q=null,e.state=0);else if(4===e.state)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(5===e.state){var f=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)}}c+=(i=+new Date)-o,o=i}return null!==e.keys},u.rsa.generateKeyPair=function(e,t,i,l){if(1===arguments.length?"object"==typeof e?(i=e,e=void 0):"function"==typeof e&&(l=e,e=void 0):2===arguments.length?"number"==typeof e?"function"==typeof t?(l=t,t=void 0):"number"!=typeof t&&(i=t,t=void 0):(i=e,l=t,e=void 0,t=void 0):3===arguments.length&&("number"==typeof t?"function"==typeof i&&(l=i,i=void 0):(l=i,i=t,t=void 0)),i=i||{},void 0===e&&(e=i.bits||2048),void 0===t&&(t=i.e||65537),!r.options.usePureJavaScript&&!i.prng&&e>=256&&e<=16384&&(65537===t||3===t))if(l){if(A("generateKeyPair"))return s.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},(function(e,t,r){if(e)return l(e);l(null,{privateKey:u.privateKeyFromPem(r),publicKey:u.publicKeyFromPem(t)})}));if(S("generateKey")&&S("exportKey"))return o.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:b(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then((function(e){return o.globalScope.crypto.subtle.exportKey("pkcs8",e.privateKey)})).then(void 0,(function(e){l(e)})).then((function(e){if(e){var t=u.privateKeyFromAsn1(a.fromDer(r.util.createBuffer(e)));l(null,{privateKey:t,publicKey:u.setRsaPublicKey(t.n,t.e)})}}));if(_("generateKey")&&_("exportKey")){var c=o.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:b(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);return c.oncomplete=function(e){var t=e.target.result,n=o.globalScope.msCrypto.subtle.exportKey("pkcs8",t.privateKey);n.oncomplete=function(e){var t=e.target.result,n=u.privateKeyFromAsn1(a.fromDer(r.util.createBuffer(t)));l(null,{privateKey:n,publicKey:u.setRsaPublicKey(n.n,n.e)})},n.onerror=function(e){l(e)}},void(c.onerror=function(e){l(e)})}}else if(A("generateKeyPairSync")){var h=s.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:u.privateKeyFromPem(h.privateKey),publicKey:u.publicKeyFromPem(h.publicKey)}}var p=u.rsa.createKeyPairGenerationState(e,t,i);if(!l)return u.rsa.stepKeyPairGenerationState(p,0),p.keys;!function(e,t,i){"function"==typeof t&&(i=t,t={});t=t||{};var s={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(s.prng=t.prng);function a(){o(e.pBits,(function(t,r){return t?i(t):(e.p=r,null!==e.q?l(t,e.q):void o(e.qBits,l))}))}function o(e,t){r.prime.generateProbablePrime(e,s,t)}function l(t,r){if(t)return i(t);if(e.q=r,e.p.compareTo(e.q)<0){var s=e.p;e.p=e.q,e.q=s}if(0!==e.p.subtract(n.ONE).gcd(e.e).compareTo(n.ONE))return e.p=null,void a();if(0!==e.q.subtract(n.ONE).gcd(e.e).compareTo(n.ONE))return e.q=null,void o(e.qBits,l);if(e.p1=e.p.subtract(n.ONE),e.q1=e.q.subtract(n.ONE),e.phi=e.p1.multiply(e.q1),0!==e.phi.gcd(e.e).compareTo(n.ONE))return e.p=e.q=null,void a();if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits)return e.q=null,void o(e.qBits,l);var c=e.e.modInverse(e.phi);e.keys={privateKey:u.rsa.setPrivateKey(e.n,e.e,c,e.p,e.q,c.mod(e.p1),c.mod(e.q1),e.q.modInverse(e.p)),publicKey:u.rsa.setPublicKey(e.n,e.e)},i(null,e.keys)}a()}(p,i,l)},u.setRsaPublicKey=u.rsa.setPublicKey=function(e,t){var n={n:e,e:t,encrypt:function(e,t,i){if("string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===t)t={encode:function(e,t,r){return y(e,t,2).getBytes()}};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={encode:function(e,t){return r.pkcs1.encode_rsa_oaep(t,e,i)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(t))t={encode:function(e){return e}};else if("string"==typeof t)throw new Error('Unsupported encryption scheme: "'+t+'".');var s=t.encode(e,n,!0);return u.rsa.encrypt(s,n,!0)},verify:function(e,t,i,s){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),void 0===s&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),"RSASSA-PKCS1-V1_5"===i?i={verify:function(e,t){t=E(t,n,!0);var i=a.fromDer(t,{parseAllBytes:s._parseAllDigestBytes}),o={},u=[];if(!a.validate(i,d,o,u))throw(l=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.")).errors=u,l;var l,c=a.derToOid(o.algorithmIdentifier);if(c!==r.oids.md2&&c!==r.oids.md5&&c!==r.oids.sha1&&c!==r.oids.sha224&&c!==r.oids.sha256&&c!==r.oids.sha384&&c!==r.oids.sha512&&c!==r.oids["sha512-224"]&&c!==r.oids["sha512-256"])throw(l=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.")).oid=c,l;if((c===r.oids.md2||c===r.oids.md5)&&!("parameters"in o))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return e===o.digest}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(e,t){return e===(t=E(t,n,!0))}});var o=u.rsa.decrypt(t,n,!0,!1);return i.verify(e,o,n.n.bitLength())}};return n},u.setRsaPrivateKey=u.rsa.setPrivateKey=function(e,t,n,i,s,a,o,l){var c={n:e,e:t,d:n,p:i,q:s,dP:a,dQ:o,qInv:l,decrypt:function(e,t,n){"string"==typeof t?t=t.toUpperCase():void 0===t&&(t="RSAES-PKCS1-V1_5");var i=u.rsa.decrypt(e,c,!1,!1);if("RSAES-PKCS1-V1_5"===t)t={decode:E};else if("RSA-OAEP"===t||"RSAES-OAEP"===t)t={decode:function(e,t){return r.pkcs1.decode_rsa_oaep(t,e,n)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(t))throw new Error('Unsupported encryption scheme: "'+t+'".');t={decode:function(e){return e}}}return t.decode(i,c,!1)},sign:function(e,t){var r=!1;"string"==typeof t&&(t=t.toUpperCase()),void 0===t||"RSASSA-PKCS1-V1_5"===t?(t={encode:g},r=1):"NONE"!==t&&"NULL"!==t&&null!==t||(t={encode:function(){return e}},r=1);var n=t.encode(e,c.n.bitLength());return u.rsa.encrypt(n,c,r)}};return c},u.wrapRsaPrivateKey=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(u.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(e).getBytes())])},u.privateKeyFromAsn1=function(e){var t,i,s,o,l,p,f,d,g={},m=[];if(a.validate(e,c,g,m)&&(e=a.fromDer(r.util.createBuffer(g.privateKey))),g={},m=[],!a.validate(e,h,g,m)){var y=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw y.errors=m,y}return t=r.util.createBuffer(g.privateKeyModulus).toHex(),i=r.util.createBuffer(g.privateKeyPublicExponent).toHex(),s=r.util.createBuffer(g.privateKeyPrivateExponent).toHex(),o=r.util.createBuffer(g.privateKeyPrime1).toHex(),l=r.util.createBuffer(g.privateKeyPrime2).toHex(),p=r.util.createBuffer(g.privateKeyExponent1).toHex(),f=r.util.createBuffer(g.privateKeyExponent2).toHex(),d=r.util.createBuffer(g.privateKeyCoefficient).toHex(),u.setRsaPrivateKey(new n(t,16),new n(i,16),new n(s,16),new n(o,16),new n(l,16),new n(p,16),new n(f,16),new n(d,16))},u.privateKeyToAsn1=u.privateKeyToRSAPrivateKey=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.qInv))])},u.publicKeyFromAsn1=function(e){var t={},i=[];if(a.validate(e,f,t,i)){var s,o=a.derToOid(t.publicKeyOid);if(o!==u.oids.rsaEncryption)throw(s=new Error("Cannot read public key. Unknown OID.")).oid=o,s;e=t.rsaPublicKey}if(i=[],!a.validate(e,p,t,i))throw(s=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=i,s;var l=r.util.createBuffer(t.publicKeyModulus).toHex(),c=r.util.createBuffer(t.publicKeyExponent).toHex();return u.setRsaPublicKey(new n(l,16),new n(c,16))},u.publicKeyToAsn1=u.publicKeyToSubjectPublicKeyInfo=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(u.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[u.publicKeyToRSAPublicKey(e)])])},u.publicKeyToRSAPublicKey=function(e){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,v(e.e))])}})),i.register("9BCTm",(function(e,t){var r,n=i("fHXV5");e.exports=n.jsbn=n.jsbn||{};function s(e,t,r){this.data=[],null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function a(){return new s(null)}function o(e,t,r,n,i,s){for(var a=16383&t,o=t>>14;--s>=0;){var u=16383&this.data[e],l=this.data[e++]>>14,c=o*u+l*a;i=((u=a*u+((16383&c)<<14)+r.data[n]+i)>>28)+(c>>14)+o*l,r.data[n++]=268435455&u}return i}n.jsbn.BigInteger=s,"undefined"==typeof navigator?(s.prototype.am=o,r=28):"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(var a=32767&t,o=t>>15;--s>=0;){var u=32767&this.data[e],l=this.data[e++]>>15,c=o*u+l*a;i=((u=a*u+((32767&c)<<15)+r.data[n]+(1073741823&i))>>>30)+(c>>>15)+o*l+(i>>>30),r.data[n++]=1073741823&u}return i},r=30):"Netscape"!=navigator.appName?(s.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var a=t*this.data[e++]+r.data[n]+i;i=Math.floor(a/67108864),r.data[n++]=67108863&a}return i},r=26):(s.prototype.am=o,r=28),s.prototype.DB=r,s.prototype.DM=(1<<r)-1,s.prototype.DV=1<<r;s.prototype.FV=Math.pow(2,52),s.prototype.F1=52-r,s.prototype.F2=2*r-52;var u,l,c="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array;for(u="0".charCodeAt(0),l=0;l<=9;++l)h[u++]=l;for(u="a".charCodeAt(0),l=10;l<36;++l)h[u++]=l;for(u="A".charCodeAt(0),l=10;l<36;++l)h[u++]=l;function p(e){return c.charAt(e)}function f(e,t){var r=h[e.charCodeAt(t)];return null==r?-1:r}function d(e){var t=a();return t.fromInt(e),t}function g(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function m(e){this.m=e}function y(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function E(e,t){return e&t}function v(e,t){return e|t}function T(e,t){return e^t}function A(e,t){return e&~t}function S(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function _(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function b(){}function C(e){return e}function I(e){this.r2=a(),this.q3=a(),s.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}m.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},m.prototype.revert=function(e){return e},m.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},m.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},m.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},y.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(s.ZERO)>0&&this.m.subTo(t,t),t},y.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},y.prototype.reduce=function(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e.data[t],n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},y.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},y.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},s.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s},s.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0},s.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,a=0;--n>=0;){var o=8==r?255&e[n]:f(e,n);o<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==a?this.data[this.t++]=o:a+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this.data[this.t++]=o>>this.DB-a):this.data[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t},s.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s},s.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s},s.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,a=Math.floor(e/this.DB),o=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t.data[r+a+1]=this.data[r]>>i|o,o=(this.data[r]&s)<<n;for(r=a-1;r>=0;--r)t.data[r]=0;t.data[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},s.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var a=r+1;a<this.t;++a)t.data[a-r-1]|=(this.data[a]&s)<<i,t.data[a-r]=this.data[a]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},s.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()},s.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&s.ZERO.subTo(t,t)},s.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()},s.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var o=a(),u=this.s,l=e.s,c=this.DB-g(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var h=o.t,p=o.data[h-1];if(0!=p){var f=p*(1<<this.F1)+(h>1?o.data[h-2]>>this.F2:0),d=this.FV/f,m=(1<<this.F1)/f,y=1<<this.F2,E=r.t,v=E-h,T=null==t?a():t;for(o.dlShiftTo(v,T),r.compareTo(T)>=0&&(r.data[r.t++]=1,r.subTo(T,r)),s.ONE.dlShiftTo(h,T),T.subTo(o,o);o.t<h;)o.data[o.t++]=0;for(;--v>=0;){var A=r.data[--E]==p?this.DM:Math.floor(r.data[E]*d+(r.data[E-1]+y)*m);if((r.data[E]+=o.am(0,A,r,v,0,h))<A)for(o.dlShiftTo(v,T),r.subTo(T,r);r.data[E]<--A;)r.subTo(T,r)}null!=t&&(r.drShiftTo(h,t),u!=l&&s.ZERO.subTo(t,t)),r.t=h,r.clamp(),c>0&&r.rShiftTo(c,r),u<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var e=this.data[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},s.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},s.prototype.exp=function(e,t){if(e>4294967295||e<1)return s.ONE;var r=a(),n=a(),i=t.convert(this),o=g(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var u=r;r=n,n=u}return t.revert(r)},s.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(r=this.data[a]>>o)>0&&(i=!0,s=p(r));a>=0;)o<t?(r=(this.data[a]&(1<<o)-1)<<t-o,r|=this.data[--a]>>(o+=this.DB-t)):(r=this.data[a]>>(o-=t)&n,o<=0&&(o+=this.DB,--a)),r>0&&(i=!0),i&&(s+=p(r));return i?s:"0"},s.prototype.negate=function(){var e=a();return s.ZERO.subTo(this,e),e},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this.data[r]-e.data[r]))return t;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+g(this.data[this.t-1]^this.s&this.DM)},s.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(s.ZERO)>0&&e.subTo(t,t),t},s.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new m(t):new y(t),this.exp(e,r)},s.ZERO=d(0),s.ONE=d(1),b.prototype.convert=C,b.prototype.revert=C,b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},b.prototype.sqrTo=function(e,t){e.squareTo(t)},I.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},I.prototype.revert=function(e){return e},I.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},I.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},I.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var x=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],w=67108864/x[x.length-1];s.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},s.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=d(r),i=a(),s=a(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o},s.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,a=0,o=0,u=0;u<e.length;++u){var l=f(e,u);l<0?"-"==e.charAt(u)&&0==this.signum()&&(i=!0):(o=t*o+l,++a>=r&&(this.dMultiply(n),this.dAddOffset(o,0),a=0,o=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),i&&s.ZERO.subTo(this,this)},s.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(s.ONE.shiftLeft(e-1),v,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(s.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},s.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},s.prototype.changeBit=function(e,t){var r=s.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},s.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()},s.prototype.dMultiply=function(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},s.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}},s.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r.data[--i]=0;for(n=r.t-this.t;i<n;++i)r.data[i+this.t]=this.am(0,e.data[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e.data[i],r,i,0,t-i);r.clamp()},s.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},s.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r},s.prototype.millerRabin=function(e){var t=this.subtract(s.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n,i=t.shiftRight(r),a={nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(256*Math.random())}},o=0;o<e;++o){do{n=new s(this.bitLength(),a)}while(n.compareTo(s.ONE)<=0||n.compareTo(t)>=0);var u=n.modPow(i,this);if(0!=u.compareTo(s.ONE)&&0!=u.compareTo(t)){for(var l=1;l++<r&&0!=u.compareTo(t);)if(0==(u=u.modPowInt(2,this)).compareTo(s.ONE))return!1;if(0!=u.compareTo(t))return!1}}return!0},s.prototype.clone=function(){var e=a();return this.copyTo(e),e},s.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},s.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},s.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},s.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},s.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},s.prototype.equals=function(e){return 0==this.compareTo(e)},s.prototype.min=function(e){return this.compareTo(e)<0?this:e},s.prototype.max=function(e){return this.compareTo(e)>0?this:e},s.prototype.and=function(e){var t=a();return this.bitwiseTo(e,E,t),t},s.prototype.or=function(e){var t=a();return this.bitwiseTo(e,v,t),t},s.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,T,t),t},s.prototype.andNot=function(e){var t=a();return this.bitwiseTo(e,A,t),t},s.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e},s.prototype.shiftLeft=function(e){var t=a();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},s.prototype.shiftRight=function(e){var t=a();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},s.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this.data[e])return e*this.DB+S(this.data[e]);return this.s<0?this.t*this.DB:-1},s.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=_(this.data[r]^t);return e},s.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this.data[t]&1<<e%this.DB)},s.prototype.setBit=function(e){return this.changeBit(e,v)},s.prototype.clearBit=function(e){return this.changeBit(e,A)},s.prototype.flipBit=function(e){return this.changeBit(e,T)},s.prototype.add=function(e){var t=a();return this.addTo(e,t),t},s.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},s.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},s.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},s.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},s.prototype.divideAndRemainder=function(e){var t=a(),r=a();return this.divRemTo(e,t,r),new Array(t,r)},s.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=d(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new m(t):t.isEven()?new I(t):new y(t);var o=new Array,u=3,l=r-1,c=(1<<r)-1;if(o[1]=n.convert(this),r>1){var h=a();for(n.sqrTo(o[1],h);u<=c;)o[u]=a(),n.mulTo(h,o[u-2],o[u]),u+=2}var p,f,E=e.t-1,v=!0,T=a();for(i=g(e.data[E])-1;E>=0;){for(i>=l?p=e.data[E]>>i-l&c:(p=(e.data[E]&(1<<i+1)-1)<<l-i,E>0&&(p|=e.data[E-1]>>this.DB+i-l)),u=r;0==(1&p);)p>>=1,--u;if((i-=u)<0&&(i+=this.DB,--E),v)o[p].copyTo(s),v=!1;else{for(;u>1;)n.sqrTo(s,T),n.sqrTo(T,s),u-=2;u>0?n.sqrTo(s,T):(f=s,s=T,T=f),n.mulTo(T,o[p],s)}for(;E>=0&&0==(e.data[E]&1<<i);)n.sqrTo(s,T),f=s,s=T,T=f,--i<0&&(i=this.DB-1,--E)}return n.revert(s)},s.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return s.ZERO;for(var r=e.clone(),n=this.clone(),i=d(1),a=d(0),o=d(0),u=d(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&a.isEven()||(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&u.isEven()||(o.addTo(this,o),u.subTo(e,u)),o.rShiftTo(1,o)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),a.subTo(u,a)):(n.subTo(r,n),t&&o.subTo(i,o),u.subTo(a,u))}return 0!=n.compareTo(s.ONE)?s.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u},s.prototype.pow=function(e){return this.exp(e,new b)},s.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},s.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r.data[0]<=x[x.length-1]){for(t=0;t<x.length;++t)if(r.data[0]==x[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<x.length;){for(var n=x[t],i=t+1;i<x.length&&n<w;)n*=x[i++];for(n=r.modInt(n);t<i;)if(n%x[t++]==0)return!1}return r.millerRabin(e)}})),i.register("4xsJo",(function(e,t){var r=i("fHXV5");i("ckwBP"),i("eBXI9"),i("hdQXz");var n=e.exports=r.pkcs1=r.pkcs1||{};function s(e,t,n){n||(n=r.md.sha1.create());for(var i="",s=Math.ceil(t/n.digestLength),a=0;a<s;++a){var o=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,255&a);n.start(),n.update(e+o),i+=n.digest().getBytes()}return i.substring(0,t)}n.encode_rsa_oaep=function(e,t,n){var i,a,o,u;"string"==typeof n?(i=n,a=arguments[3]||void 0,o=arguments[4]||void 0):n&&(i=n.label||void 0,a=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(u=n.mgf1.md)),o?o.start():o=r.md.sha1.create(),u||(u=o);var l=Math.ceil(e.n.bitLength()/8),c=l-2*o.digestLength-2;if(t.length>c)throw(m=new Error("RSAES-OAEP input message length is too long.")).length=t.length,m.maxLength=c,m;i||(i=""),o.update(i,"raw");for(var h=o.digest(),p="",f=c-t.length,d=0;d<f;d++)p+="\0";var g=h.getBytes()+p+""+t;if(a){if(a.length!==o.digestLength){var m;throw(m=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=a.length,m.digestLength=o.digestLength,m}}else a=r.random.getBytes(o.digestLength);var y=s(a,l-o.digestLength-1,u),E=r.util.xorBytes(g,y,g.length),v=s(E,o.digestLength,u);return"\0"+r.util.xorBytes(a,v,a.length)+E},n.decode_rsa_oaep=function(e,t,n){var i,a,o;"string"==typeof n?(i=n,a=arguments[3]||void 0):n&&(i=n.label||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var u=Math.ceil(e.n.bitLength()/8);if(t.length!==u)throw(y=new Error("RSAES-OAEP encoded message length is invalid.")).length=t.length,y.expectedLength=u,y;if(void 0===a?a=r.md.sha1.create():a.start(),o||(o=a),u<2*a.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");i||(i=""),a.update(i,"raw");for(var l=a.digest().getBytes(),c=t.charAt(0),h=t.substring(1,a.digestLength+1),p=t.substring(1+a.digestLength),f=s(p,a.digestLength,o),d=s(r.util.xorBytes(h,f,h.length),u-a.digestLength-1,o),g=r.util.xorBytes(p,d,p.length),m=g.substring(0,a.digestLength),y="\0"!==c,E=0;E<a.digestLength;++E)y|=l.charAt(E)!==m.charAt(E);for(var v=1,T=a.digestLength,A=a.digestLength;A<g.length;A++){var S=g.charCodeAt(A);y|=S&(v?65534:0),T+=v&=1&S^1}if(y||1!==g.charCodeAt(T))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(T+1)}})),i.register("hdQXz",(function(e,t){var r=i("fHXV5");i("dze0J"),i("ckwBP");var n=e.exports=r.sha1=r.sha1||{};r.md.sha1=r.md.algorithms.sha1=n,n.create=function(){a||(s=String.fromCharCode(128),s+=r.util.fillString(String.fromCharCode(0),64),a=!0);var e=null,t=r.util.createBuffer(),n=new Array(80),i={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){i.messageLength=0,i.fullMessageLength=i.messageLength64=[];for(var n=i.messageLengthSize/4,s=0;s<n;++s)i.fullMessageLength.push(0);return t=r.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},i}};return i.start(),i.update=function(s,a){"utf8"===a&&(s=r.util.encodeUtf8(s));var u=s.length;i.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var l=i.fullMessageLength.length-1;l>=0;--l)i.fullMessageLength[l]+=u[1],u[1]=u[0]+(i.fullMessageLength[l]/4294967296>>>0),i.fullMessageLength[l]=i.fullMessageLength[l]>>>0,u[0]=u[1]/4294967296>>>0;return t.putBytes(s),o(e,n,t),(t.read>2048||0===t.length())&&t.compact(),i},i.digest=function(){var a=r.util.createBuffer();a.putBytes(t.bytes());var u,l=i.fullMessageLength[i.fullMessageLength.length-1]+i.messageLengthSize&i.blockLength-1;a.putBytes(s.substr(0,i.blockLength-l));for(var c=8*i.fullMessageLength[0],h=0;h<i.fullMessageLength.length-1;++h)c+=(u=8*i.fullMessageLength[h+1])/4294967296>>>0,a.putInt32(c>>>0),c=u>>>0;a.putInt32(c);var p={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};o(p,n,a);var f=r.util.createBuffer();return f.putInt32(p.h0),f.putInt32(p.h1),f.putInt32(p.h2),f.putInt32(p.h3),f.putInt32(p.h4),f},i};var s=null,a=!1;function o(e,t,r){for(var n,i,s,a,o,u,l,c=r.length();c>=64;){for(i=e.h0,s=e.h1,a=e.h2,o=e.h3,u=e.h4,l=0;l<16;++l)n=r.getInt32(),t[l]=n,n=(i<<5|i>>>27)+(o^s&(a^o))+u+1518500249+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<20;++l)n=(n=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|n>>>31,t[l]=n,n=(i<<5|i>>>27)+(o^s&(a^o))+u+1518500249+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<32;++l)n=(n=t[l-3]^t[l-8]^t[l-14]^t[l-16])<<1|n>>>31,t[l]=n,n=(i<<5|i>>>27)+(s^a^o)+u+1859775393+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<40;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(i<<5|i>>>27)+(s^a^o)+u+1859775393+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<60;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(i<<5|i>>>27)+(s&a|o&(s^a))+u+2400959708+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;for(;l<80;++l)n=(n=t[l-6]^t[l-16]^t[l-28]^t[l-32])<<2|n>>>30,t[l]=n,n=(i<<5|i>>>27)+(s^a^o)+u+3395469782+n,u=o,o=a,a=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+a|0,e.h3=e.h3+o|0,e.h4=e.h4+u|0,c-=64}}})),i.register("ahmHA",(function(e,t){var r=i("fHXV5");i("ckwBP"),i("9BCTm"),i("eBXI9"),function(){if(r.prime)e.exports=r.prime;else{var t=e.exports=r.prime=r.prime||{},n=r.jsbn.BigInteger,i=[6,4,2,4,2,4,6,2],s=new n(null);s.fromInt(30);var a=function(e,t){return e|t};t.generateProbablePrime=function(e,t,i){"function"==typeof t&&(i=t,t={});var s=(t=t||{}).algorithm||"PRIMEINC";"string"==typeof s&&(s={name:s}),s.options=s.options||{};var a=t.prng||r.random,u={nextBytes:function(e){for(var t=a.getBytesSync(e.length),r=0;r<e.length;++r)e[r]=t.charCodeAt(r)}};if("PRIMEINC"===s.name)return function(e,t,i,s){return"workers"in i?function(e,t,i,s){if("undefined"==typeof Worker)return o(e,t,i,s);var a=l(e,t),u=i.workers,c=i.workLoad||100,h=30*c/8,p=i.workerScript||"forge/prime.worker.js";if(-1===u)return r.util.estimateCores((function(e,t){e&&(t=2),u=t-1,f()}));function f(){u=Math.max(1,u);for(var r=[],i=0;i<u;++i)r[i]=new Worker(p);for(i=0;i<u;++i)r[i].addEventListener("message",f);var o=!1;function f(i){if(!o){0;var u=i.data;if(u.found){for(var p=0;p<r.length;++p)r[p].terminate();return o=!0,s(null,new n(u.prime,16))}a.bitLength()>e&&(a=l(e,t));var f=a.toString(16);i.target.postMessage({hex:f,workLoad:c}),a.dAddOffset(h,0)}}}f()}(e,t,i,s):o(e,t,i,s)}(e,u,s.options,i);throw new Error("Invalid prime generation algorithm: "+s.name)}}function o(e,t,r,n){var i=l(e,t),s=function(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}(i.bitLength());"millerRabinTests"in r&&(s=r.millerRabinTests);var a=10;"maxBlockTime"in r&&(a=r.maxBlockTime),u(i,e,t,0,s,a,n)}function u(e,t,n,s,a,o,c){var h=+new Date;do{if(e.bitLength()>t&&(e=l(t,n)),e.isProbablePrime(a))return c(null,e);e.dAddOffset(i[s++%8],0)}while(o<0||+new Date-h<o);r.util.setImmediate((function(){u(e,t,n,s,a,o,c)}))}function l(e,t){var r=new n(e,t),i=e-1;return r.testBit(i)||r.bitwiseTo(n.ONE.shiftLeft(i),a,r),r.dAddOffset(31-r.mod(s).byteValue(),0),r}}()})),i.register("rXEMx",(function(e,t){var r=i("fHXV5");i("842FK"),i("dbgLj"),i("lrulR"),i("jCY9T"),i("klWiW"),i("eBXI9"),i("d6Nxk"),i("hdQXz"),i("ckwBP"),i("1nW1e");var n=r.asn1,s=r.pki,a=e.exports=r.pkcs12=r.pkcs12||{},o={name:"ContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:n.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},o,{name:"PFX.macData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},l={name:"SafeBag",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:n.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},c={name:"Attribute",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,capture:"values"}]},h={name:"CertBag",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:n.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:n.Class.UNIVERSAL,type:n.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function p(e,t,r,n){for(var i=[],s=0;s<e.length;s++)for(var a=0;a<e[s].safeBags.length;a++){var o=e[s].safeBags[a];void 0!==n&&o.type!==n||(null!==t?void 0!==o.attributes[t]&&o.attributes[t].indexOf(r)>=0&&i.push(o):i.push(o))}return i}function f(e){if(e.composed||e.constructed){for(var t=r.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function d(e,t){var i={},a=[];if(!n.validate(e,r.pkcs7.asn1.encryptedDataValidator,i,a))throw(o=new Error("Cannot read EncryptedContentInfo.")).errors=a,o;var o,u=n.derToOid(i.contentType);if(u!==s.oids.data)throw(o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,o;u=n.derToOid(i.encAlgorithm);var l=s.pbe.getCipher(u,i.encParameter,t),c=f(i.encryptedContentAsn1),h=r.util.createBuffer(c.value);if(l.update(h),!l.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return l.output.getBytes()}function g(e,t,r){if(!t&&0===e.length)return[];if((e=n.fromDer(e,t)).tagClass!==n.Class.UNIVERSAL||e.type!==n.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var i=[],a=0;a<e.value.length;a++){var o=e.value[a],u={},c=[];if(!n.validate(o,l,u,c))throw(y=new Error("Cannot read SafeBag.")).errors=c,y;var p,f,d={type:n.derToOid(u.bagId),attributes:m(u.bagAttributes)};i.push(d);var g=u.bagValue.value[0];switch(d.type){case s.oids.pkcs8ShroudedKeyBag:if(null===(g=s.decryptPrivateKeyInfo(g,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case s.oids.keyBag:try{d.key=s.privateKeyFromAsn1(g)}catch(e){d.key=null,d.asn1=g}continue;case s.oids.certBag:p=h,f=function(){if(n.derToOid(u.certId)!==s.oids.x509Certificate){var e=new Error("Unsupported certificate type, only X.509 supported.");throw e.oid=n.derToOid(u.certId),e}var r=n.fromDer(u.cert,t);try{d.cert=s.certificateFromAsn1(r,!0)}catch(e){d.cert=null,d.asn1=r}};break;default:var y;throw(y=new Error("Unsupported PKCS#12 SafeBag type.")).oid=d.type,y}if(void 0!==p&&!n.validate(g,p,u,c))throw(y=new Error("Cannot read PKCS#12 "+p.name)).errors=c,y;f()}return i}function m(e){var t={};if(void 0!==e)for(var r=0;r<e.length;++r){var i={},a=[];if(!n.validate(e[r],c,i,a)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=a,o}var u=n.derToOid(i.oid);if(void 0!==s.oids[u]){t[s.oids[u]]=[];for(var l=0;l<i.values.length;++l)t[s.oids[u]].push(i.values[l].value)}}return t}a.pkcs12FromAsn1=function(e,t,i){"string"==typeof t?(i=t,t=!0):void 0===t&&(t=!0);var l={};if(!n.validate(e,u,l,[]))throw(c=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=c,c;var c,h={version:l.version.charCodeAt(0),safeContents:[],getBags:function(e){var t,n={};return"localKeyId"in e?t=e.localKeyId:"localKeyIdHex"in e&&(t=r.util.hexToBytes(e.localKeyIdHex)),void 0===t&&!("friendlyName"in e)&&"bagType"in e&&(n[e.bagType]=p(h.safeContents,null,null,e.bagType)),void 0!==t&&(n.localKeyId=p(h.safeContents,"localKeyId",t,e.bagType)),"friendlyName"in e&&(n.friendlyName=p(h.safeContents,"friendlyName",e.friendlyName,e.bagType)),n},getBagsByFriendlyName:function(e,t){return p(h.safeContents,"friendlyName",e,t)},getBagsByLocalKeyId:function(e,t){return p(h.safeContents,"localKeyId",e,t)}};if(3!==l.version.charCodeAt(0))throw(c=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=l.version.charCodeAt(0),c;if(n.derToOid(l.contentType)!==s.oids.data)throw(c=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=n.derToOid(l.contentType),c;var m=l.content.value[0];if(m.tagClass!==n.Class.UNIVERSAL||m.type!==n.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(m=f(m),l.mac){var y=null,E=0,v=n.derToOid(l.macAlgorithm);switch(v){case s.oids.sha1:y=r.md.sha1.create(),E=20;break;case s.oids.sha256:y=r.md.sha256.create(),E=32;break;case s.oids.sha384:y=r.md.sha384.create(),E=48;break;case s.oids.sha512:y=r.md.sha512.create(),E=64;break;case s.oids.md5:y=r.md.md5.create(),E=16}if(null===y)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+v);var T=new r.util.ByteBuffer(l.macSalt),A="macIterations"in l?parseInt(r.util.bytesToHex(l.macIterations),16):1,S=a.generateKey(i,T,3,A,E,y),_=r.hmac.create();if(_.start(y,S),_.update(m.value),_.getMac().getBytes()!==l.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(e,t,r,i){if(t=n.fromDer(t,r),t.tagClass!==n.Class.UNIVERSAL||t.type!==n.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var a=0;a<t.value.length;a++){var u=t.value[a],l={},c=[];if(!n.validate(u,o,l,c))throw(y=new Error("Cannot read ContentInfo.")).errors=c,y;var h={encrypted:!1},p=null,m=l.content.value[0];switch(n.derToOid(l.contentType)){case s.oids.data:if(m.tagClass!==n.Class.UNIVERSAL||m.type!==n.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");p=f(m).value;break;case s.oids.encryptedData:p=d(m,i),h.encrypted=!0;break;default:var y;throw(y=new Error("Unsupported PKCS#12 contentType.")).contentType=n.derToOid(l.contentType),y}h.safeBags=g(p,r,i),e.safeContents.push(h)}}(h,m.value,t,i),h},a.toPkcs12Asn1=function(e,t,i,o){(o=o||{}).saltSize=o.saltSize||8,o.count=o.count||2048,o.algorithm=o.algorithm||o.encAlgorithm||"aes128","useMac"in o||(o.useMac=!0),"localKeyId"in o||(o.localKeyId=null),"generateLocalKeyId"in o||(o.generateLocalKeyId=!0);var u,l=o.localKeyId;if(null!==l)l=r.util.hexToBytes(l);else if(o.generateLocalKeyId)if(t){var c=r.util.isArray(t)?t[0]:t;"string"==typeof c&&(c=s.certificateFromPem(c)),(x=r.md.sha1.create()).update(n.toDer(s.certificateToAsn1(c)).getBytes()),l=x.digest().getBytes()}else l=r.random.getBytes(20);var h=[];null!==l&&h.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.localKeyId).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,l)])])),"friendlyName"in o&&h.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.friendlyName).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.BMPSTRING,!1,o.friendlyName)])])),h.length>0&&(u=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,h));var p=[],f=[];null!==t&&(f=r.util.isArray(t)?t:[t]);for(var d=[],g=0;g<f.length;++g){"string"==typeof(t=f[g])&&(t=s.certificateFromPem(t));var m=0===g?u:void 0,y=s.certificateToAsn1(t),E=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.certBag).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.x509Certificate).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(y).getBytes())])])]),m]);d.push(E)}if(d.length>0){var v=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,d),T=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.data).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(v).getBytes())])]);p.push(T)}var A=null;if(null!==e){var S=s.wrapRsaPrivateKey(s.privateKeyToAsn1(e));A=null===i?n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.keyBag).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[S]),u]):n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.pkcs8ShroudedKeyBag).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[s.encryptPrivateKeyInfo(S,i,o)]),u]);var _=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[A]),b=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.data).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(_).getBytes())])]);p.push(b)}var C,I=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,p);if(o.useMac){var x=r.md.sha1.create(),w=new r.util.ByteBuffer(r.random.getBytes(o.saltSize)),N=o.count,R=(e=a.generateKey(i,w,3,N,20),r.hmac.create());R.start(x,e),R.update(n.toDer(I).getBytes());var F=R.getMac();C=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.sha1).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,F.getBytes())]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,w.getBytes()),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(N).getBytes())])}return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(3).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.oids.data).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(I).getBytes())])]),C])},a.generateKey=r.pbe.generatePkcs12Key})),i.register("jCY9T",(function(e,t){var r=i("fHXV5");i("842FK"),i("ckwBP");var n=r.asn1,s=e.exports=r.pkcs7asn1=r.pkcs7asn1||{};r.pkcs7=r.pkcs7||{},r.pkcs7.asn1=s;var a={name:"ContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};s.contentInfoValidator=a;var o={name:"EncryptedContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};s.envelopedDataValidator={name:"EnvelopedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(o)},s.encryptedDataValidator={name:"EncryptedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"}].concat(o)};var u={name:"SignerInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};s.signedDataValidator={name:"SignedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},a,{name:"SignedData.Certificates",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},s.recipientInfoValidator={name:"RecipientInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}})),i.register("1nW1e",(function(e,t){var r=i("fHXV5");i("9I8q5"),i("842FK"),i("9OZUy"),i("dze0J"),i("khVhn"),i("lrulR"),i("lPEJX"),i("l0Fqb"),i("d6Nxk"),i("ckwBP");var n=r.asn1,s=e.exports=r.pki=r.pki||{},a=s.oids,o={};o.CN=a.commonName,o.commonName="CN",o.C=a.countryName,o.countryName="C",o.L=a.localityName,o.localityName="L",o.ST=a.stateOrProvinceName,o.stateOrProvinceName="ST",o.O=a.organizationName,o.organizationName="O",o.OU=a.organizationalUnitName,o.organizationalUnitName="OU",o.E=a.emailAddress,o.emailAddress="E";var u=r.pki.rsa.publicKeyValidator,l={name:"Certificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},c={name:"rsapss",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0}]}]}]},p={name:"CertificationRequest",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function f(e,t){"string"==typeof t&&(t={shortName:t});for(var r,n=null,i=0;null===n&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}s.RDNAttributesAsArray=function(e,t){for(var r,i,s,u=[],l=0;l<e.value.length;++l){r=e.value[l];for(var c=0;c<r.value.length;++c)s={},i=r.value[c],s.type=n.derToOid(i.value[0].value),s.value=i.value[1].value,s.valueTagClass=i.value[1].type,s.type in a&&(s.name=a[s.type],s.name in o&&(s.shortName=o[s.name])),t&&(t.update(s.type),t.update(s.value)),u.push(s)}return u},s.CRIAttributesAsArray=function(e){for(var t=[],r=0;r<e.length;++r)for(var i=e[r],u=n.derToOid(i.value[0].value),l=i.value[1].value,c=0;c<l.length;++c){var h={};if(h.type=u,h.value=l[c].value,h.valueTagClass=l[c].type,h.type in a&&(h.name=a[h.type],h.name in o&&(h.shortName=o[h.name])),h.type===a.extensionRequest){h.extensions=[];for(var p=0;p<h.value.length;++p)h.extensions.push(s.certificateExtensionFromAsn1(h.value[p]))}t.push(h)}return t};var d=function(e,t,r){var i={};if(e!==a["RSASSA-PSS"])return i;r&&(i={hash:{algorithmOid:a.sha1},mgf:{algorithmOid:a.mgf1,hash:{algorithmOid:a.sha1}},saltLength:20});var s={},o=[];if(!n.validate(t,c,s,o)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=o,u}return void 0!==s.hashOid&&(i.hash=i.hash||{},i.hash.algorithmOid=n.derToOid(s.hashOid)),void 0!==s.maskGenOid&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=n.derToOid(s.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=n.derToOid(s.maskGenHashOid)),void 0!==s.saltLength&&(i.saltLength=s.saltLength.charCodeAt(0)),i},g=function(e){switch(a[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return r.md.sha1.create();case"md5WithRSAEncryption":return r.md.md5.create();case"sha256WithRSAEncryption":case"RSASSA-PSS":return r.md.sha256.create();case"sha384WithRSAEncryption":return r.md.sha384.create();case"sha512WithRSAEncryption":return r.md.sha512.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},m=function(e){var t,n=e.certificate;switch(n.signatureOid){case a.sha1WithRSAEncryption:case a.sha1WithRSASignature:break;case a["RSASSA-PSS"]:var i,s,o;if(void 0===(i=a[n.signatureParameters.mgf.hash.algorithmOid])||void 0===r.md[i])throw(o=new Error("Unsupported MGF hash function.")).oid=n.signatureParameters.mgf.hash.algorithmOid,o.name=i,o;if(void 0===(s=a[n.signatureParameters.mgf.algorithmOid])||void 0===r.mgf[s])throw(o=new Error("Unsupported MGF function.")).oid=n.signatureParameters.mgf.algorithmOid,o.name=s,o;if(s=r.mgf[s].create(r.md[i].create()),void 0===(i=a[n.signatureParameters.hash.algorithmOid])||void 0===r.md[i])throw(o=new Error("Unsupported RSASSA-PSS hash function.")).oid=n.signatureParameters.hash.algorithmOid,o.name=i,o;t=r.pss.create(r.md[i].create(),s,n.signatureParameters.saltLength)}return n.publicKey.verify(e.md.digest().getBytes(),e.signature,t)};function y(e){for(var t,i,s=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),a=e.attributes,o=0;o<a.length;++o){var u=(t=a[o]).value,l=n.Type.PRINTABLESTRING;"valueTagClass"in t&&(l=t.valueTagClass)===n.Type.UTF8&&(u=r.util.encodeUtf8(u)),i=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),n.create(n.Class.UNIVERSAL,l,!1,u)])]),s.value.push(i)}return s}function E(e){for(var t,r=0;r<e.length;++r){if(void 0===(t=e[r]).name&&(t.type&&t.type in s.oids?t.name=s.oids[t.type]:t.shortName&&t.shortName in o&&(t.name=s.oids[o[t.shortName]])),void 0===t.type){if(!t.name||!(t.name in s.oids))throw(u=new Error("Attribute type not specified.")).attribute=t,u;t.type=s.oids[t.name]}if(void 0===t.shortName&&t.name&&t.name in o&&(t.shortName=o[t.name]),t.type===a.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=n.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(s.certificateExtensionToAsn1(v(t.extensions[i])))}var u;if(void 0===t.value)throw(u=new Error("Attribute value not specified.")).attribute=t,u}}function v(e,t){if(t=t||{},void 0===e.name&&e.id&&e.id in s.oids&&(e.name=s.oids[e.id]),void 0===e.id){if(!e.name||!(e.name in s.oids))throw(A=new Error("Extension ID not specified.")).extension=e,A;e.id=s.oids[e.name]}if(void 0!==e.value)return e;if("keyUsage"===e.name){var i=0,o=0,u=0;e.digitalSignature&&(o|=128,i=7),e.nonRepudiation&&(o|=64,i=6),e.keyEncipherment&&(o|=32,i=5),e.dataEncipherment&&(o|=16,i=4),e.keyAgreement&&(o|=8,i=3),e.keyCertSign&&(o|=4,i=2),e.cRLSign&&(o|=2,i=1),e.encipherOnly&&(o|=1,i=0),e.decipherOnly&&(u|=128,i=7);var l=String.fromCharCode(i);0!==u?l+=String.fromCharCode(o)+String.fromCharCode(u):0!==o&&(l+=String.fromCharCode(o)),e.value=n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,l)}else if("basicConstraints"===e.name)e.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(n.create(n.Class.UNIVERSAL,n.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in e&&e.value.value.push(n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.pathLenConstraint).getBytes()));else if("extKeyUsage"===e.name){e.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);var c=e.value.value;for(var h in e)!0===e[h]&&(h in a?c.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a[h]).getBytes())):-1!==h.indexOf(".")&&c.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(h).getBytes())))}else if("nsCertType"===e.name){i=0,o=0;e.client&&(o|=128,i=7),e.server&&(o|=64,i=6),e.email&&(o|=32,i=5),e.objsign&&(o|=16,i=4),e.reserved&&(o|=8,i=3),e.sslCA&&(o|=4,i=2),e.emailCA&&(o|=2,i=1),e.objCA&&(o|=1,i=0);l=String.fromCharCode(i);0!==o&&(l+=String.fromCharCode(o)),e.value=n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,l)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){e.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);for(var p=0;p<e.altNames.length;++p){l=(E=e.altNames[p]).value;if(7===E.type&&E.ip){if(null===(l=r.util.bytesFromIP(E.ip)))throw(A=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,A}else 8===E.type&&(l=E.oid?n.oidToDer(n.oidToDer(E.oid)):n.oidToDer(l));e.value.value.push(n.create(n.Class.CONTEXT_SPECIFIC,E.type,!1,l))}}else if("nsComment"===e.name&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=n.create(n.Class.UNIVERSAL,n.Type.IA5STRING,!1,e.comment)}else if("subjectKeyIdentifier"===e.name&&t.cert){var f=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=f.toHex(),e.value=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,f.getBytes())}else if("authorityKeyIdentifier"===e.name&&t.cert){e.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);c=e.value.value;if(e.keyIdentifier){var d=!0===e.keyIdentifier?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;c.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!1,d))}if(e.authorityCertIssuer){var g=[n.create(n.Class.CONTEXT_SPECIFIC,4,!0,[y(!0===e.authorityCertIssuer?t.cert.issuer:e.authorityCertIssuer)])];c.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var m=r.util.hexToBytes(!0===e.serialNumber?t.cert.serialNumber:e.serialNumber);c.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===e.name){e.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);c=e.value.value;var E,v=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),T=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);for(p=0;p<e.altNames.length;++p){l=(E=e.altNames[p]).value;if(7===E.type&&E.ip){if(null===(l=r.util.bytesFromIP(E.ip)))throw(A=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=e,A}else 8===E.type&&(l=E.oid?n.oidToDer(n.oidToDer(E.oid)):n.oidToDer(l));T.value.push(n.create(n.Class.CONTEXT_SPECIFIC,E.type,!1,l))}v.value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[T])),c.push(v)}var A;if(void 0===e.value)throw(A=new Error("Extension value not specified.")).extension=e,A;return e}function T(e,t){if(e===a["RSASSA-PSS"]){var r=[];return void 0!==t.hash.algorithmOid&&r.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.hash.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])])),void 0!==t.mgf.algorithmOid&&r.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.mgf.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.mgf.hash.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])])])),void 0!==t.saltLength&&r.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.saltLength).getBytes())])),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,r)}return n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")}function A(e){var t=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===e.attributes.length)return t;for(var i=e.attributes,s=0;s<i.length;++s){var a=i[s],o=a.value,u=n.Type.UTF8;"valueTagClass"in a&&(u=a.valueTagClass),u===n.Type.UTF8&&(o=r.util.encodeUtf8(o));var l=!1;"valueConstructed"in a&&(l=a.valueConstructed);var c=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.type).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,u,l,o)])]);t.value.push(c)}return t}s.certificateFromPem=function(e,t,i){var a=r.pem.decode(e)[0];if("CERTIFICATE"!==a.type&&"X509 CERTIFICATE"!==a.type&&"TRUSTED CERTIFICATE"!==a.type){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=a.type,o}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=n.fromDer(a.body,i);return s.certificateFromAsn1(u,t)},s.certificateToPem=function(e,t){var i={type:"CERTIFICATE",body:n.toDer(s.certificateToAsn1(e)).getBytes()};return r.pem.encode(i,{maxline:t})},s.publicKeyFromPem=function(e){var t=r.pem.decode(e)[0];if("PUBLIC KEY"!==t.type&&"RSA PUBLIC KEY"!==t.type){var i=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw i.headerType=t.type,i}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var a=n.fromDer(t.body);return s.publicKeyFromAsn1(a)},s.publicKeyToPem=function(e,t){var i={type:"PUBLIC KEY",body:n.toDer(s.publicKeyToAsn1(e)).getBytes()};return r.pem.encode(i,{maxline:t})},s.publicKeyToRSAPublicKeyPem=function(e,t){var i={type:"RSA PUBLIC KEY",body:n.toDer(s.publicKeyToRSAPublicKey(e)).getBytes()};return r.pem.encode(i,{maxline:t})},s.getPublicKeyFingerprint=function(e,t){var i,a=(t=t||{}).md||r.md.sha1.create();switch(t.type||"RSAPublicKey"){case"RSAPublicKey":i=n.toDer(s.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=n.toDer(s.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}a.start(),a.update(i);var o=a.digest();if("hex"===t.encoding){var u=o.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return o.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return o},s.certificationRequestFromPem=function(e,t,i){var a=r.pem.decode(e)[0];if("CERTIFICATE REQUEST"!==a.type){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=a.type,o}if(a.procType&&"ENCRYPTED"===a.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=n.fromDer(a.body,i);return s.certificationRequestFromAsn1(u,t)},s.certificationRequestToPem=function(e,t){var i={type:"CERTIFICATE REQUEST",body:n.toDer(s.certificationRequestToAsn1(e)).getBytes()};return r.pem.encode(i,{maxline:t})},s.createCertificate=function(){var e={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return f(e.issuer,t)},e.issuer.addField=function(t){E([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){E([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,r){E(t),e.subject.attributes=t,delete e.subject.uniqueId,r&&(e.subject.uniqueId=r),e.subject.hash=null},e.setIssuer=function(t,r){E(t),e.issuer.attributes=t,delete e.issuer.uniqueId,r&&(e.issuer.uniqueId=r),e.issuer.hash=null},e.setExtensions=function(t){for(var r=0;r<t.length;++r)v(t[r],{cert:e});e.extensions=t},e.getExtension=function(t){"string"==typeof t&&(t={name:t});for(var r,n=null,i=0;null===n&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,i){e.md=i||r.md.sha1.create();var o=a[e.md.algorithm+"WithRSAEncryption"];if(!o){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=o,e.tbsCertificate=s.getTBSCertificate(e);var l=n.toDer(e.tbsCertificate);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var r=!1;if(!e.issued(t)){var i=t.issuer,a=e.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=a.attributes,o.actualIssuer=i.attributes,o}var u=t.md;if(null===u){u=g({signatureOid:t.signatureOid,type:"certificate"});var l=t.tbsCertificate||s.getTBSCertificate(t),c=n.toDer(l);u.update(c.getBytes())}return null!==u&&(r=m({certificate:e,md:u,signature:t.signature})),r},e.isIssuer=function(t){var r=!1,n=e.issuer,i=t.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){var s,a;r=!0;for(var o=0;r&&o<n.attributes.length;++o)s=n.attributes[o],a=i.attributes[o],s.type===a.type&&s.value===a.value||(r=!1)}return r},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return s.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=a.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var i=e.extensions[n];if(i.id===t){var s=e.generateSubjectKeyIdentifier().getBytes();return r.util.hexToBytes(i.subjectKeyIdentifier)===s}}return!1},e},s.certificateFromAsn1=function(e,t){var i={},a=[];if(!n.validate(e,l,i,a)){var o=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw o.errors=a,o}if(n.derToOid(i.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificate();u.version=i.certVersion?i.certVersion.charCodeAt(0):0;var c=r.util.createBuffer(i.certSerialNumber);u.serialNumber=c.toHex(),u.signatureOid=r.asn1.derToOid(i.certSignatureOid),u.signatureParameters=d(u.signatureOid,i.certSignatureParams,!0),u.siginfo.algorithmOid=r.asn1.derToOid(i.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,i.certinfoSignatureParams,!1),u.signature=i.certSignature;var h=[];if(void 0!==i.certValidity1UTCTime&&h.push(n.utcTimeToDate(i.certValidity1UTCTime)),void 0!==i.certValidity2GeneralizedTime&&h.push(n.generalizedTimeToDate(i.certValidity2GeneralizedTime)),void 0!==i.certValidity3UTCTime&&h.push(n.utcTimeToDate(i.certValidity3UTCTime)),void 0!==i.certValidity4GeneralizedTime&&h.push(n.generalizedTimeToDate(i.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=h[0],u.validity.notAfter=h[1],u.tbsCertificate=i.tbsCertificate,t){u.md=g({signatureOid:u.signatureOid,type:"certificate"});var p=n.toDer(u.tbsCertificate);u.md.update(p.getBytes())}var m=r.md.sha1.create(),y=n.toDer(i.certIssuer);m.update(y.getBytes()),u.issuer.getField=function(e){return f(u.issuer,e)},u.issuer.addField=function(e){E([e]),u.issuer.attributes.push(e)},u.issuer.attributes=s.RDNAttributesAsArray(i.certIssuer),i.certIssuerUniqueId&&(u.issuer.uniqueId=i.certIssuerUniqueId),u.issuer.hash=m.digest().toHex();var v=r.md.sha1.create(),T=n.toDer(i.certSubject);return v.update(T.getBytes()),u.subject.getField=function(e){return f(u.subject,e)},u.subject.addField=function(e){E([e]),u.subject.attributes.push(e)},u.subject.attributes=s.RDNAttributesAsArray(i.certSubject),i.certSubjectUniqueId&&(u.subject.uniqueId=i.certSubjectUniqueId),u.subject.hash=v.digest().toHex(),i.certExtensions?u.extensions=s.certificateExtensionsFromAsn1(i.certExtensions):u.extensions=[],u.publicKey=s.publicKeyFromAsn1(i.subjectPublicKeyInfo),u},s.certificateExtensionsFromAsn1=function(e){for(var t=[],r=0;r<e.value.length;++r)for(var n=e.value[r],i=0;i<n.value.length;++i)t.push(s.certificateExtensionFromAsn1(n.value[i]));return t},s.certificateExtensionFromAsn1=function(e){var t={};if(t.id=n.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===n.Type.BOOLEAN?(t.critical=0!==e.value[1].value.charCodeAt(0),t.value=e.value[2].value):t.value=e.value[1].value,t.id in a)if(t.name=a[t.id],"keyUsage"===t.name){var i=0,s=0;(u=n.fromDer(t.value)).value.length>1&&(i=u.value.charCodeAt(1),s=u.value.length>2?u.value.charCodeAt(2):0),t.digitalSignature=128==(128&i),t.nonRepudiation=64==(64&i),t.keyEncipherment=32==(32&i),t.dataEncipherment=16==(16&i),t.keyAgreement=8==(8&i),t.keyCertSign=4==(4&i),t.cRLSign=2==(2&i),t.encipherOnly=1==(1&i),t.decipherOnly=128==(128&s)}else if("basicConstraints"===t.name){(u=n.fromDer(t.value)).value.length>0&&u.value[0].type===n.Type.BOOLEAN?t.cA=0!==u.value[0].value.charCodeAt(0):t.cA=!1;var o=null;u.value.length>0&&u.value[0].type===n.Type.INTEGER?o=u.value[0].value:u.value.length>1&&(o=u.value[1].value),null!==o&&(t.pathLenConstraint=n.derToInteger(o))}else if("extKeyUsage"===t.name)for(var u=n.fromDer(t.value),l=0;l<u.value.length;++l){var c=n.derToOid(u.value[l].value);c in a?t[a[c]]=!0:t[c]=!0}else if("nsCertType"===t.name){i=0;(u=n.fromDer(t.value)).value.length>1&&(i=u.value.charCodeAt(1)),t.client=128==(128&i),t.server=64==(64&i),t.email=32==(32&i),t.objsign=16==(16&i),t.reserved=8==(8&i),t.sslCA=4==(4&i),t.emailCA=2==(2&i),t.objCA=1==(1&i)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){var h;t.altNames=[];u=n.fromDer(t.value);for(var p=0;p<u.value.length;++p){var f={type:(h=u.value[p]).type,value:h.value};switch(t.altNames.push(f),h.type){case 1:case 2:case 6:break;case 7:f.ip=r.util.bytesToIP(h.value);break;case 8:f.oid=n.derToOid(h.value)}}}else if("subjectKeyIdentifier"===t.name){u=n.fromDer(t.value);t.subjectKeyIdentifier=r.util.bytesToHex(u.value)}return t},s.certificationRequestFromAsn1=function(e,t){var i={},a=[];if(!n.validate(e,p,i,a)){var o=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw o.errors=a,o}if(n.derToOid(i.publicKeyOid)!==s.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=s.createCertificationRequest();if(u.version=i.csrVersion?i.csrVersion.charCodeAt(0):0,u.signatureOid=r.asn1.derToOid(i.csrSignatureOid),u.signatureParameters=d(u.signatureOid,i.csrSignatureParams,!0),u.siginfo.algorithmOid=r.asn1.derToOid(i.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,i.csrSignatureParams,!1),u.signature=i.csrSignature,u.certificationRequestInfo=i.certificationRequestInfo,t){u.md=g({signatureOid:u.signatureOid,type:"certification request"});var l=n.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var c=r.md.sha1.create();return u.subject.getField=function(e){return f(u.subject,e)},u.subject.addField=function(e){E([e]),u.subject.attributes.push(e)},u.subject.attributes=s.RDNAttributesAsArray(i.certificationRequestInfoSubject,c),u.subject.hash=c.digest().toHex(),u.publicKey=s.publicKeyFromAsn1(i.subjectPublicKeyInfo),u.getAttribute=function(e){return f(u,e)},u.addAttribute=function(e){E([e]),u.attributes.push(e)},u.attributes=s.CRIAttributesAsArray(i.certificationRequestInfoAttributes||[]),u},s.createCertificationRequest=function(){var e={version:0,signatureOid:null,signature:null,siginfo:{}};return e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return f(e.subject,t)},e.subject.addField=function(t){E([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return f(e,t)},e.addAttribute=function(t){E([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){E(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){E(t),e.attributes=t},e.sign=function(t,i){e.md=i||r.md.sha1.create();var o=a[e.md.algorithm+"WithRSAEncryption"];if(!o){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=e.md.algorithm,u}e.signatureOid=e.siginfo.algorithmOid=o,e.certificationRequestInfo=s.getCertificationRequestInfo(e);var l=n.toDer(e.certificationRequestInfo);e.md.update(l.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,r=e.md;if(null===r){r=g({signatureOid:e.signatureOid,type:"certification request"});var i=e.certificationRequestInfo||s.getCertificationRequestInfo(e),a=n.toDer(i);r.update(a.getBytes())}return null!==r&&(t=m({certificate:e,md:r,signature:e.signature})),t},e};var S=new Date("1950-01-01T00:00:00Z"),_=new Date("2050-01-01T00:00:00Z");function b(e){return e>=S&&e<_?n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(e)):n.create(n.Class.UNIVERSAL,n.Type.GENERALIZEDTIME,!1,n.dateToGeneralizedTime(e))}s.getTBSCertificate=function(e){var t=b(e.validity.notBefore),i=b(e.validity.notAfter),a=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.version).getBytes())]),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.siginfo.algorithmOid).getBytes()),T(e.siginfo.algorithmOid,e.siginfo.parameters)]),y(e.issuer),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[t,i]),y(e.subject),s.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&a.value.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+e.issuer.uniqueId)])),e.subject.uniqueId&&a.value.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!0,[n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+e.subject.uniqueId)])),e.extensions.length>0&&a.value.push(s.certificateExtensionsToAsn1(e.extensions)),a},s.getCertificationRequestInfo=function(e){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.version).getBytes()),y(e.subject),s.publicKeyToAsn1(e.publicKey),A(e)])},s.distinguishedNameToAsn1=function(e){return y(e)},s.certificateToAsn1=function(e){var t=e.tbsCertificate||s.getTBSCertificate(e);return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[t,n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.signatureOid).getBytes()),T(e.signatureOid,e.signatureParameters)]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.certificateExtensionsToAsn1=function(e){var t=n.create(n.Class.CONTEXT_SPECIFIC,3,!0,[]),r=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);t.value.push(r);for(var i=0;i<e.length;++i)r.value.push(s.certificateExtensionToAsn1(e[i]));return t},s.certificateExtensionToAsn1=function(e){var t=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);t.value.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.id).getBytes())),e.critical&&t.value.push(n.create(n.Class.UNIVERSAL,n.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=e.value;return"string"!=typeof e.value&&(r=n.toDer(r).getBytes()),t.value.push(n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,r)),t},s.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||s.getCertificationRequestInfo(e);return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[t,n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.signatureOid).getBytes()),T(e.signatureOid,e.signatureParameters)]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+e.signature)])},s.createCaStore=function(e){var t={certs:{}};function i(e){return a(e),t.certs[e.hash]||null}function a(e){if(!e.hash){var t=r.md.sha1.create();e.attributes=s.RDNAttributesAsArray(y(e),t),e.hash=t.digest().toHex()}}if(t.getIssuer=function(e){return i(e.issuer)},t.addCertificate=function(e){if("string"==typeof e&&(e=r.pki.certificateFromPem(e)),a(e.subject),!t.hasCertificate(e))if(e.subject.hash in t.certs){var n=t.certs[e.subject.hash];r.util.isArray(n)||(n=[n]),n.push(e),t.certs[e.subject.hash]=n}else t.certs[e.subject.hash]=e},t.hasCertificate=function(e){"string"==typeof e&&(e=r.pki.certificateFromPem(e));var t=i(e.subject);if(!t)return!1;r.util.isArray(t)||(t=[t]);for(var a=n.toDer(s.certificateToAsn1(e)).getBytes(),o=0;o<t.length;++o){if(a===n.toDer(s.certificateToAsn1(t[o])).getBytes())return!0}return!1},t.listAllCertificates=function(){var e=[];for(var n in t.certs)if(t.certs.hasOwnProperty(n)){var i=t.certs[n];if(r.util.isArray(i))for(var s=0;s<i.length;++s)e.push(i[s]);else e.push(i)}return e},t.removeCertificate=function(e){var o;if("string"==typeof e&&(e=r.pki.certificateFromPem(e)),a(e.subject),!t.hasCertificate(e))return null;var u=i(e.subject);if(!r.util.isArray(u))return o=t.certs[e.subject.hash],delete t.certs[e.subject.hash],o;for(var l=n.toDer(s.certificateToAsn1(e)).getBytes(),c=0;c<u.length;++c){l===n.toDer(s.certificateToAsn1(u[c])).getBytes()&&(o=u[c],u.splice(c,1))}return 0===u.length&&delete t.certs[e.subject.hash],o},e)for(var o=0;o<e.length;++o){var u=e[o];t.addCertificate(u)}return t},s.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},s.verifyCertificateChain=function(e,t,n){"function"==typeof n&&(n={verify:n}),n=n||{};var i=(t=t.slice(0)).slice(0),a=n.validityCheckDate;void 0===a&&(a=new Date);var o=!0,u=null,l=0;do{var c=t.shift(),h=null,p=!1;if(a&&(a<c.validity.notBefore||a>c.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:s.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:a}),null===u){if(null===(h=t[0]||e.getIssuer(c))&&c.isIssuer(c)&&(p=!0,h=c),h){var f=h;r.util.isArray(f)||(f=[f]);for(var d=!1;!d&&f.length>0;){h=f.shift();try{d=h.verify(c)}catch(e){}}d||(u={message:"Certificate signature is invalid.",error:s.certificateError.bad_certificate})}null!==u||h&&!p||e.hasCertificate(c)||(u={message:"Certificate is not trusted.",error:s.certificateError.unknown_ca})}if(null===u&&h&&!c.isIssuer(h)&&(u={message:"Certificate issuer is invalid.",error:s.certificateError.bad_certificate}),null===u)for(var g={keyUsage:!0,basicConstraints:!0},m=0;null===u&&m<c.extensions.length;++m){var y=c.extensions[m];y.critical&&!(y.name in g)&&(u={message:"Certificate has an unsupported critical extension.",error:s.certificateError.unsupported_certificate})}if(null===u&&(!o||0===t.length&&(!h||p))){var E=c.getExtension("basicConstraints"),v=c.getExtension("keyUsage");if(null!==v&&(v.keyCertSign&&null!==E||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:s.certificateError.bad_certificate})),null!==u||null===E||E.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:s.certificateError.bad_certificate}),null===u&&null!==v&&"pathLenConstraint"in E)l-1>E.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:s.certificateError.bad_certificate})}var T=null===u||u.error,A=n.verify?n.verify(T,l,i):T;if(!0!==A)throw!0===T&&(u={message:"The application rejected the certificate.",error:s.certificateError.bad_certificate}),(A||0===A)&&("object"!=typeof A||r.util.isArray(A)?"string"==typeof A&&(u.error=A):(A.message&&(u.message=A.message),A.error&&(u.error=A.error))),u;u=null,o=!1,++l}while(t.length>0);return!0}})),i.register("khVhn",(function(e,t){var r=i("fHXV5");i("7MZO0"),e.exports=r.mgf=r.mgf||{},r.mgf.mgf1=r.mgf1})),i.register("7MZO0",(function(e,t){var r=i("fHXV5");i("ckwBP"),r.mgf=r.mgf||{},(e.exports=r.mgf.mgf1=r.mgf1=r.mgf1||{}).create=function(e){return{generate:function(t,n){for(var i=new r.util.ByteBuffer,s=Math.ceil(n/e.digestLength),a=0;a<s;a++){var o=new r.util.ByteBuffer;o.putInt32(a),e.start(),e.update(t+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-n),i.getBytes()}}}})),i.register("l0Fqb",(function(e,t){var r=i("fHXV5");i("eBXI9"),i("ckwBP"),(e.exports=r.pss=r.pss||{}).create=function(e){3===arguments.length&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t,n=e.md,i=e.mgf,s=n.digestLength,a=e.salt||null;if("string"==typeof a&&(a=r.util.createBuffer(a)),"saltLength"in e)t=e.saltLength;else{if(null===a)throw new Error("Salt length not specified or specific salt not given.");t=a.length()}if(null!==a&&a.length()!==t)throw new Error("Given salt length does not match length of given salt.");var o=e.prng||r.random,u={encode:function(e,u){var l,c,h=u-1,p=Math.ceil(h/8),f=e.digest().getBytes();if(p<s+t+2)throw new Error("Message is too long to encrypt.");c=null===a?o.getBytesSync(t):a.bytes();var d=new r.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(f),d.putBytes(c),n.start(),n.update(d.getBytes());var g=n.digest().getBytes(),m=new r.util.ByteBuffer;m.fillWithByte(0,p-t-s-2),m.putByte(1),m.putBytes(c);var y=m.getBytes(),E=p-s-1,v=i.generate(g,E),T="";for(l=0;l<E;l++)T+=String.fromCharCode(y.charCodeAt(l)^v.charCodeAt(l));var A=65280>>8*p-h&255;return(T=String.fromCharCode(T.charCodeAt(0)&~A)+T.substr(1))+g+String.fromCharCode(188)},verify:function(e,a,o){var u,l=o-1,c=Math.ceil(l/8);if(a=a.substr(-c),c<s+t+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==a.charCodeAt(c-1))throw new Error("Encoded message does not end in 0xBC.");var h=c-s-1,p=a.substr(0,h),f=a.substr(h,s),d=65280>>8*c-l&255;if(0!=(p.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var g=i.generate(f,h),m="";for(u=0;u<h;u++)m+=String.fromCharCode(p.charCodeAt(u)^g.charCodeAt(u));m=String.fromCharCode(m.charCodeAt(0)&~d)+m.substr(1);var y=c-s-t-2;for(u=0;u<y;u++)if(0!==m.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==m.charCodeAt(y))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var E=m.substr(-t),v=new r.util.ByteBuffer;return v.fillWithByte(0,8),v.putBytes(e),v.putBytes(E),n.start(),n.update(v.getBytes()),f===n.digest().getBytes()}};return u}})),i.register("2irPm",(function(e,t){var r=i("CTJ0g").Buffer,n=i("fHXV5");i("9BCTm"),i("eBXI9"),i("etMSQ"),i("ckwBP");var s=i("MJ7QY"),a=s.publicKeyValidator,o=s.privateKeyValidator;if(void 0===u)var u=n.jsbn.BigInteger;var l=n.util.ByteBuffer,c=void 0===r?Uint8Array:r;n.pki=n.pki||{},e.exports=n.pki.ed25519=n.ed25519=n.ed25519||{};var h=n.ed25519;function p(e){var t=e.message;if(t instanceof Uint8Array||t instanceof c)return t;var n=e.encoding;if(void 0===t){if(!e.md)throw new TypeError('"options.message" or "options.md" not specified.');t=e.md.digest().getBytes(),n="binary"}if("string"==typeof t&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof t){if(void 0!==r)return r.from(t,n);t=new l(t,n)}else if(!(t instanceof l))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var i=new c(t.length()),s=0;s<i.length;++s)i[s]=t.at(s);return i}h.constants={},h.constants.PUBLIC_KEY_BYTE_LENGTH=32,h.constants.PRIVATE_KEY_BYTE_LENGTH=64,h.constants.SEED_BYTE_LENGTH=32,h.constants.SIGN_BYTE_LENGTH=64,h.constants.HASH_BYTE_LENGTH=64,h.generateKeyPair=function(e){var t=(e=e||{}).seed;if(void 0===t)t=n.random.getBytesSync(h.constants.SEED_BYTE_LENGTH);else if("string"==typeof t){if(t.length!==h.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+h.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=p({message:t,encoding:"binary"});for(var r=new c(h.constants.PUBLIC_KEY_BYTE_LENGTH),i=new c(h.constants.PRIVATE_KEY_BYTE_LENGTH),s=0;s<32;++s)i[s]=t[s];return function(e,t){var r,n=[L(),L(),L(),L()],i=A(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,O(n,i),I(e,n),r=0;r<32;++r)t[r+32]=e[r]}(r,i),{publicKey:r,privateKey:i}},h.privateKeyFromAsn1=function(e){var t={},r=[];if(!n.asn1.validate(e,o,t,r)){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=n.asn1.derToOid(t.privateKeyOid),a=n.oids.EdDSA25519;if(s!==a)throw new Error('Invalid OID "'+s+'"; OID must be "'+a+'".');var u=t.privateKey;return{privateKeyBytes:p({message:n.asn1.fromDer(u).value,encoding:"binary"})}},h.publicKeyFromAsn1=function(e){var t={},r=[];if(!n.asn1.validate(e,a,t,r)){var i=new Error("Invalid Key.");throw i.errors=r,i}var s=n.asn1.derToOid(t.publicKeyOid),o=n.oids.EdDSA25519;if(s!==o)throw new Error('Invalid OID "'+s+'"; OID must be "'+o+'".');var u=t.ed25519PublicKey;if(u.length!==h.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return p({message:u,encoding:"binary"})},h.publicKeyFromPrivateKey=function(e){var t=p({message:(e=e||{}).privateKey,encoding:"binary"});if(t.length!==h.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+h.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new c(h.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=t[32+n];return r},h.sign=function(e){var t=p(e=e||{}),r=p({message:e.privateKey,encoding:"binary"});if(r.length===h.constants.SEED_BYTE_LENGTH)r=h.generateKeyPair({seed:r}).privateKey;else if(r.length!==h.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+h.constants.SEED_BYTE_LENGTH+" or "+h.constants.PRIVATE_KEY_BYTE_LENGTH);var n=new c(h.constants.SIGN_BYTE_LENGTH+t.length);!function(e,t,r,n){var i,s,a=new Float64Array(64),o=[L(),L(),L(),L()],u=A(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var l=r+64;for(i=0;i<r;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=u[32+i];var c=A(e.subarray(32),r+32);for(_(c),O(o,c),I(e,o),i=32;i<64;++i)e[i]=n[i];var h=A(e,r+64);for(_(h),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=c[i];for(i=0;i<32;++i)for(s=0;s<32;s++)a[i+s]+=h[i]*u[s];S(e.subarray(32),a)}(n,t,t.length,r);for(var i=new c(h.constants.SIGN_BYTE_LENGTH),s=0;s<i.length;++s)i[s]=n[s];return i},h.verify=function(e){var t=p(e=e||{});if(void 0===e.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=p({message:e.signature,encoding:"binary"});if(r.length!==h.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+h.constants.SIGN_BYTE_LENGTH);var n=p({message:e.publicKey,encoding:"binary"});if(n.length!==h.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+h.constants.PUBLIC_KEY_BYTE_LENGTH);var i,s=new c(h.constants.SIGN_BYTE_LENGTH+t.length),a=new c(h.constants.SIGN_BYTE_LENGTH+t.length);for(i=0;i<h.constants.SIGN_BYTE_LENGTH;++i)s[i]=r[i];for(i=0;i<t.length;++i)s[i+h.constants.SIGN_BYTE_LENGTH]=t[i];return function(e,t,r,n){var i,s=new c(32),a=[L(),L(),L(),L()],o=[L(),L(),L(),L()];if(-1,r<64)return-1;if(function(e,t){var r=L(),n=L(),i=L(),s=L(),a=L(),o=L(),u=L();D(e[2],d),function(e,t){var r;for(r=0;r<16;++r)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(e[1],t),k(i,e[1]),H(s,i,g),U(i,i,e[2]),M(s,e[2],s),k(a,s),k(o,a),H(u,o,a),H(r,u,i),H(r,r,s),function(e,t){var r,n=L();for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)k(n,n),1!==r&&H(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}(r,r),H(r,r,i),H(r,r,s),H(r,r,s),H(e[0],r,s),k(n,e[0]),H(n,n,s),w(n,i)&&H(e[0],e[0],T);if(k(n,e[0]),H(n,n,s),w(n,i))return-1;R(e[0])===t[31]>>7&&U(e[0],f,e[0]);return H(e[3],e[0],e[1]),0}(o,n))return-1;for(i=0;i<r;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=n[i];var u=A(e,r);if(_(u),F(a,o,u),O(o,t.subarray(32)),b(a,o),I(s,a),r-=64,N(t,0,s,0)){for(i=0;i<r;++i)e[i]=0;return-1}for(i=0;i<r;++i)e[i]=t[i+64];return r}(a,s,s.length,n)>=0};var f=L(),d=L([1]),g=L([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),m=L([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),y=L([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),E=L([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),v=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),T=L([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function A(e,t){var i=n.md.sha512.create(),s=new l(e);i.update(s.getBytes(t),"binary");var a=i.digest().getBytes();if(void 0!==r)return r.from(a,"binary");for(var o=new c(h.constants.HASH_BYTE_LENGTH),u=0;u<64;++u)o[u]=a.charCodeAt(u);return o}function S(e,t){var r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*v[i-(n-32)],r=t[i]+128>>8,t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;++i)t[i]+=r-(t[31]>>4)*v[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=r*v[i];for(n=0;n<32;++n)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function _(e){for(var t=new Float64Array(64),r=0;r<64;++r)t[r]=e[r],e[r]=0;S(e,t)}function b(e,t){var r=L(),n=L(),i=L(),s=L(),a=L(),o=L(),u=L(),l=L(),c=L();U(r,e[1],e[0]),U(c,t[1],t[0]),H(r,r,c),M(n,e[0],e[1]),M(c,t[0],t[1]),H(n,n,c),H(i,e[3],t[3]),H(i,i,m),H(s,e[2],t[2]),M(s,s,s),U(a,n,r),U(o,s,i),M(u,s,i),M(l,n,r),H(e[0],a,o),H(e[1],l,u),H(e[2],u,o),H(e[3],a,l)}function C(e,t,r){for(var n=0;n<4;++n)B(e[n],t[n],r)}function I(e,t){var r=L(),n=L(),i=L();!function(e,t){var r,n=L();for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)k(n,n),2!==r&&4!==r&&H(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}(i,t[2]),H(r,t[0],i),H(n,t[1],i),x(e,n),e[31]^=R(r)<<7}function x(e,t){var r,n,i,s=L(),a=L();for(r=0;r<16;++r)a[r]=t[r];for(P(a),P(a),P(a),n=0;n<2;++n){for(s[0]=a[0]-65517,r=1;r<15;++r)s[r]=a[r]-65535-(s[r-1]>>16&1),s[r-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,B(a,s,1-i)}for(r=0;r<16;r++)e[2*r]=255&a[r],e[2*r+1]=a[r]>>8}function w(e,t){var r=new c(32),n=new c(32);return x(r,e),x(n,t),N(r,0,n,0)}function N(e,t,r,n){return function(e,t,r,n,i){var s,a=0;for(s=0;s<i;++s)a|=e[t+s]^r[n+s];return(1&a-1>>>8)-1}(e,t,r,n,32)}function R(e){var t=new c(32);return x(t,e),1&t[0]}function F(e,t,r){var n,i;for(D(e[0],f),D(e[1],d),D(e[2],d),D(e[3],f),i=255;i>=0;--i)C(e,t,n=r[i/8|0]>>(7&i)&1),b(t,e),b(e,e),C(e,t,n)}function O(e,t){var r=[L(),L(),L(),L()];D(r[0],y),D(r[1],E),D(r[2],d),H(r[3],y,E),F(e,r,t)}function D(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function P(e){var t,r,n=1;for(t=0;t<16;++t)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function B(e,t,r){for(var n,i=~(r-1),s=0;s<16;++s)n=i&(e[s]^t[s]),e[s]^=n,t[s]^=n}function L(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;++t)r[t]=e[t];return r}function M(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]+r[n]}function U(e,t,r){for(var n=0;n<16;++n)e[n]=t[n]-r[n]}function k(e,t){H(e,t,t)}function H(e,t,r){var n,i,s=0,a=0,o=0,u=0,l=0,c=0,h=0,p=0,f=0,d=0,g=0,m=0,y=0,E=0,v=0,T=0,A=0,S=0,_=0,b=0,C=0,I=0,x=0,w=0,N=0,R=0,F=0,O=0,D=0,P=0,B=0,L=r[0],M=r[1],U=r[2],k=r[3],H=r[4],V=r[5],j=r[6],K=r[7],G=r[8],W=r[9],q=r[10],z=r[11],Y=r[12],X=r[13],Q=r[14],J=r[15];s+=(n=t[0])*L,a+=n*M,o+=n*U,u+=n*k,l+=n*H,c+=n*V,h+=n*j,p+=n*K,f+=n*G,d+=n*W,g+=n*q,m+=n*z,y+=n*Y,E+=n*X,v+=n*Q,T+=n*J,a+=(n=t[1])*L,o+=n*M,u+=n*U,l+=n*k,c+=n*H,h+=n*V,p+=n*j,f+=n*K,d+=n*G,g+=n*W,m+=n*q,y+=n*z,E+=n*Y,v+=n*X,T+=n*Q,A+=n*J,o+=(n=t[2])*L,u+=n*M,l+=n*U,c+=n*k,h+=n*H,p+=n*V,f+=n*j,d+=n*K,g+=n*G,m+=n*W,y+=n*q,E+=n*z,v+=n*Y,T+=n*X,A+=n*Q,S+=n*J,u+=(n=t[3])*L,l+=n*M,c+=n*U,h+=n*k,p+=n*H,f+=n*V,d+=n*j,g+=n*K,m+=n*G,y+=n*W,E+=n*q,v+=n*z,T+=n*Y,A+=n*X,S+=n*Q,_+=n*J,l+=(n=t[4])*L,c+=n*M,h+=n*U,p+=n*k,f+=n*H,d+=n*V,g+=n*j,m+=n*K,y+=n*G,E+=n*W,v+=n*q,T+=n*z,A+=n*Y,S+=n*X,_+=n*Q,b+=n*J,c+=(n=t[5])*L,h+=n*M,p+=n*U,f+=n*k,d+=n*H,g+=n*V,m+=n*j,y+=n*K,E+=n*G,v+=n*W,T+=n*q,A+=n*z,S+=n*Y,_+=n*X,b+=n*Q,C+=n*J,h+=(n=t[6])*L,p+=n*M,f+=n*U,d+=n*k,g+=n*H,m+=n*V,y+=n*j,E+=n*K,v+=n*G,T+=n*W,A+=n*q,S+=n*z,_+=n*Y,b+=n*X,C+=n*Q,I+=n*J,p+=(n=t[7])*L,f+=n*M,d+=n*U,g+=n*k,m+=n*H,y+=n*V,E+=n*j,v+=n*K,T+=n*G,A+=n*W,S+=n*q,_+=n*z,b+=n*Y,C+=n*X,I+=n*Q,x+=n*J,f+=(n=t[8])*L,d+=n*M,g+=n*U,m+=n*k,y+=n*H,E+=n*V,v+=n*j,T+=n*K,A+=n*G,S+=n*W,_+=n*q,b+=n*z,C+=n*Y,I+=n*X,x+=n*Q,w+=n*J,d+=(n=t[9])*L,g+=n*M,m+=n*U,y+=n*k,E+=n*H,v+=n*V,T+=n*j,A+=n*K,S+=n*G,_+=n*W,b+=n*q,C+=n*z,I+=n*Y,x+=n*X,w+=n*Q,N+=n*J,g+=(n=t[10])*L,m+=n*M,y+=n*U,E+=n*k,v+=n*H,T+=n*V,A+=n*j,S+=n*K,_+=n*G,b+=n*W,C+=n*q,I+=n*z,x+=n*Y,w+=n*X,N+=n*Q,R+=n*J,m+=(n=t[11])*L,y+=n*M,E+=n*U,v+=n*k,T+=n*H,A+=n*V,S+=n*j,_+=n*K,b+=n*G,C+=n*W,I+=n*q,x+=n*z,w+=n*Y,N+=n*X,R+=n*Q,F+=n*J,y+=(n=t[12])*L,E+=n*M,v+=n*U,T+=n*k,A+=n*H,S+=n*V,_+=n*j,b+=n*K,C+=n*G,I+=n*W,x+=n*q,w+=n*z,N+=n*Y,R+=n*X,F+=n*Q,O+=n*J,E+=(n=t[13])*L,v+=n*M,T+=n*U,A+=n*k,S+=n*H,_+=n*V,b+=n*j,C+=n*K,I+=n*G,x+=n*W,w+=n*q,N+=n*z,R+=n*Y,F+=n*X,O+=n*Q,D+=n*J,v+=(n=t[14])*L,T+=n*M,A+=n*U,S+=n*k,_+=n*H,b+=n*V,C+=n*j,I+=n*K,x+=n*G,w+=n*W,N+=n*q,R+=n*z,F+=n*Y,O+=n*X,D+=n*Q,P+=n*J,T+=(n=t[15])*L,a+=38*(S+=n*U),o+=38*(_+=n*k),u+=38*(b+=n*H),l+=38*(C+=n*V),c+=38*(I+=n*j),h+=38*(x+=n*K),p+=38*(w+=n*G),f+=38*(N+=n*W),d+=38*(R+=n*q),g+=38*(F+=n*z),m+=38*(O+=n*Y),y+=38*(D+=n*X),E+=38*(P+=n*Q),v+=38*(B+=n*J),s=(n=(s+=38*(A+=n*M))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),T=(n=T+i+65535)-65536*(i=Math.floor(n/65536)),s=(n=(s+=i-1+37*(i-1))+(i=1)+65535)-65536*(i=Math.floor(n/65536)),a=(n=a+i+65535)-65536*(i=Math.floor(n/65536)),o=(n=o+i+65535)-65536*(i=Math.floor(n/65536)),u=(n=u+i+65535)-65536*(i=Math.floor(n/65536)),l=(n=l+i+65535)-65536*(i=Math.floor(n/65536)),c=(n=c+i+65535)-65536*(i=Math.floor(n/65536)),h=(n=h+i+65535)-65536*(i=Math.floor(n/65536)),p=(n=p+i+65535)-65536*(i=Math.floor(n/65536)),f=(n=f+i+65535)-65536*(i=Math.floor(n/65536)),d=(n=d+i+65535)-65536*(i=Math.floor(n/65536)),g=(n=g+i+65535)-65536*(i=Math.floor(n/65536)),m=(n=m+i+65535)-65536*(i=Math.floor(n/65536)),y=(n=y+i+65535)-65536*(i=Math.floor(n/65536)),E=(n=E+i+65535)-65536*(i=Math.floor(n/65536)),v=(n=v+i+65535)-65536*(i=Math.floor(n/65536)),T=(n=T+i+65535)-65536*(i=Math.floor(n/65536)),s+=i-1+37*(i-1),e[0]=s,e[1]=a,e[2]=o,e[3]=u,e[4]=l,e[5]=c,e[6]=h,e[7]=p,e[8]=f,e[9]=d,e[10]=g,e[11]=m,e[12]=y,e[13]=E,e[14]=v,e[15]=T}})),i.register("etMSQ",(function(e,t){var r=i("fHXV5");i("dze0J"),i("ckwBP");var n=e.exports=r.sha512=r.sha512||{};r.md.sha512=r.md.algorithms.sha512=n;var s=r.sha384=r.sha512.sha384=r.sha512.sha384||{};s.create=function(){return n.create("SHA-384")},r.md.sha384=r.md.algorithms.sha384=s,r.sha512.sha256=r.sha512.sha256||{create:function(){return n.create("SHA-512/256")}},r.md["sha512/256"]=r.md.algorithms["sha512/256"]=r.sha512.sha256,r.sha512.sha224=r.sha512.sha224||{create:function(){return n.create("SHA-512/224")}},r.md["sha512/224"]=r.md.algorithms["sha512/224"]=r.sha512.sha224,n.create=function(e){if(o||(a=String.fromCharCode(128),a+=r.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(l={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],o=!0),void 0===e&&(e="SHA-512"),!(e in l))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=l[e],n=null,i=r.util.createBuffer(),s=new Array(80),h=0;h<80;++h)s[h]=new Array(2);var p=64;switch(e){case"SHA-384":p=48;break;case"SHA-512/256":p=32;break;case"SHA-512/224":p=28}var f={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:p,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){f.messageLength=0,f.fullMessageLength=f.messageLength128=[];for(var e=f.messageLengthSize/4,s=0;s<e;++s)f.fullMessageLength.push(0);i=r.util.createBuffer(),n=new Array(t.length);for(s=0;s<t.length;++s)n[s]=t[s].slice(0);return f}};return f.start(),f.update=function(e,t){"utf8"===t&&(e=r.util.encodeUtf8(e));var a=e.length;f.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var o=f.fullMessageLength.length-1;o>=0;--o)f.fullMessageLength[o]+=a[1],a[1]=a[0]+(f.fullMessageLength[o]/4294967296>>>0),f.fullMessageLength[o]=f.fullMessageLength[o]>>>0,a[0]=a[1]/4294967296>>>0;return i.putBytes(e),c(n,s,i),(i.read>2048||0===i.length())&&i.compact(),f},f.digest=function(){var t=r.util.createBuffer();t.putBytes(i.bytes());var o,u=f.fullMessageLength[f.fullMessageLength.length-1]+f.messageLengthSize&f.blockLength-1;t.putBytes(a.substr(0,f.blockLength-u));for(var l=8*f.fullMessageLength[0],h=0;h<f.fullMessageLength.length-1;++h)l+=(o=8*f.fullMessageLength[h+1])/4294967296>>>0,t.putInt32(l>>>0),l=o>>>0;t.putInt32(l);var p=new Array(n.length);for(h=0;h<n.length;++h)p[h]=n[h].slice(0);c(p,s,t);var d,g=r.util.createBuffer();d="SHA-512"===e?p.length:"SHA-384"===e?p.length-2:p.length-4;for(h=0;h<d;++h)g.putInt32(p[h][0]),h===d-1&&"SHA-512/224"===e||g.putInt32(p[h][1]);return g},f};var a=null,o=!1,u=null,l=null;function c(e,t,r){for(var n,i,s,a,o,l,c,h,p,f,d,g,m,y,E,v,T,A,S,_,b,C,I,x,w,N,R,F,O,D,P,B,L,M=r.length();M>=128;){for(R=0;R<16;++R)t[R][0]=r.getInt32()>>>0,t[R][1]=r.getInt32()>>>0;for(;R<80;++R)n=(((F=(D=t[R-2])[0])>>>19|(O=D[1])<<13)^(O>>>29|F<<3)^F>>>6)>>>0,i=((F<<13|O>>>19)^(O<<3|F>>>29)^(F<<26|O>>>6))>>>0,s=(((F=(B=t[R-15])[0])>>>1|(O=B[1])<<31)^(F>>>8|O<<24)^F>>>7)>>>0,a=((F<<31|O>>>1)^(F<<24|O>>>8)^(F<<25|O>>>7))>>>0,P=t[R-7],L=t[R-16],O=i+P[1]+a+L[1],t[R][0]=n+P[0]+s+L[0]+(O/4294967296>>>0)>>>0,t[R][1]=O>>>0;for(d=e[0][0],g=e[0][1],m=e[1][0],y=e[1][1],E=e[2][0],v=e[2][1],T=e[3][0],A=e[3][1],S=e[4][0],_=e[4][1],b=e[5][0],C=e[5][1],I=e[6][0],x=e[6][1],w=e[7][0],N=e[7][1],R=0;R<80;++R)c=((S>>>14|_<<18)^(S>>>18|_<<14)^(_>>>9|S<<23))>>>0,h=(I^S&(b^I))>>>0,o=((d>>>28|g<<4)^(g>>>2|d<<30)^(g>>>7|d<<25))>>>0,l=((d<<4|g>>>28)^(g<<30|d>>>2)^(g<<25|d>>>7))>>>0,p=(d&m|E&(d^m))>>>0,f=(g&y|v&(g^y))>>>0,O=N+(((S<<18|_>>>14)^(S<<14|_>>>18)^(_<<23|S>>>9))>>>0)+((x^_&(C^x))>>>0)+u[R][1]+t[R][1],n=w+c+h+u[R][0]+t[R][0]+(O/4294967296>>>0)>>>0,i=O>>>0,s=o+p+((O=l+f)/4294967296>>>0)>>>0,a=O>>>0,w=I,N=x,I=b,x=C,b=S,C=_,S=T+n+((O=A+i)/4294967296>>>0)>>>0,_=O>>>0,T=E,A=v,E=m,v=y,m=d,y=g,d=n+s+((O=i+a)/4294967296>>>0)>>>0,g=O>>>0;O=e[0][1]+g,e[0][0]=e[0][0]+d+(O/4294967296>>>0)>>>0,e[0][1]=O>>>0,O=e[1][1]+y,e[1][0]=e[1][0]+m+(O/4294967296>>>0)>>>0,e[1][1]=O>>>0,O=e[2][1]+v,e[2][0]=e[2][0]+E+(O/4294967296>>>0)>>>0,e[2][1]=O>>>0,O=e[3][1]+A,e[3][0]=e[3][0]+T+(O/4294967296>>>0)>>>0,e[3][1]=O>>>0,O=e[4][1]+_,e[4][0]=e[4][0]+S+(O/4294967296>>>0)>>>0,e[4][1]=O>>>0,O=e[5][1]+C,e[5][0]=e[5][0]+b+(O/4294967296>>>0)>>>0,e[5][1]=O>>>0,O=e[6][1]+x,e[6][0]=e[6][0]+I+(O/4294967296>>>0)>>>0,e[6][1]=O>>>0,O=e[7][1]+N,e[7][0]=e[7][0]+w+(O/4294967296>>>0)>>>0,e[7][1]=O>>>0,M-=128}}})),i.register("MJ7QY",(function(t,r){var n,s;e(t.exports,"privateKeyValidator",(()=>n),(e=>n=e)),e(t.exports,"publicKeyValidator",(()=>s),(e=>s=e));var a=i("fHXV5");i("842FK");var o=a.asn1;n={name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:o.Class.UNIVERSAL,type:o.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},s={name:"SubjectPublicKeyInfo",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:o.Class.UNIVERSAL,type:o.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:o.Class.UNIVERSAL,type:o.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:o.Class.UNIVERSAL,type:o.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}})),i.register("gsvhZ",(function(e,t){var r=i("fHXV5");i("ckwBP"),i("eBXI9"),i("9BCTm"),e.exports=r.kem=r.kem||{};var n=r.jsbn.BigInteger;function s(e,t,n,i){e.generate=function(e,s){for(var a=new r.util.ByteBuffer,o=Math.ceil(s/i)+n,u=new r.util.ByteBuffer,l=n;l<o;++l){u.putInt32(l),t.start(),t.update(e+u.getBytes());var c=t.digest();a.putBytes(c.getBytes(i))}return a.truncate(a.length()-s),a.getBytes()}}r.kem.rsa={},r.kem.rsa.create=function(e,t){var i=(t=t||{}).prng||r.random,s={encrypt:function(t,s){var a,o=Math.ceil(t.n.bitLength()/8);do{a=new n(r.util.bytesToHex(i.getBytesSync(o)),16).mod(t.n)}while(a.compareTo(n.ONE)<=0);var u=o-(a=r.util.hexToBytes(a.toString(16))).length;return u>0&&(a=r.util.fillString(String.fromCharCode(0),u)+a),{encapsulation:t.encrypt(a,"NONE"),key:e.generate(a,s)}},decrypt:function(t,r,n){var i=t.decrypt(r,"NONE");return e.generate(i,n)}};return s},r.kem.kdf1=function(e,t){s(this,e,0,t||e.digestLength)},r.kem.kdf2=function(e,t){s(this,e,1,t||e.digestLength)}})),i.register("hxAqs",(function(e,t){var r=i("fHXV5");i("ckwBP"),e.exports=r.log=r.log||{},r.log.levels=["none","error","warning","info","debug","verbose","max"];var n={},s=[],a=null;r.log.LEVEL_LOCKED=2,r.log.NO_LEVEL_CHECK=4,r.log.INTERPOLATE=8;for(var o=0;o<r.log.levels.length;++o){var u=r.log.levels[o];n[u]={index:o,name:u.toUpperCase()}}r.log.logMessage=function(e){for(var t=n[e.level].index,i=0;i<s.length;++i){var a=s[i];if(a.flags&r.log.NO_LEVEL_CHECK)a.f(e);else t<=n[a.level].index&&a.f(a,e)}},r.log.prepareStandard=function(e){"standard"in e||(e.standard=n[e.level].name+" ["+e.category+"] "+e.message)},r.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=r.util.format.apply(this,t)}},r.log.prepareStandardFull=function(e){"standardFull"in e||(r.log.prepareStandard(e),e.standardFull=e.standard)};var l=["error","warning","info","debug","verbose"];for(o=0;o<l.length;++o)!function(e){r.log[e]=function(t,n){var i=Array.prototype.slice.call(arguments).slice(2),s={timestamp:new Date,level:e,category:t,message:n,arguments:i};r.log.logMessage(s)}}(l[o]);if(r.log.makeLogger=function(e){var t={flags:0,f:e};return r.log.setLevel(t,"none"),t},r.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&r.log.LEVEL_LOCKED))for(var i=0;i<r.log.levels.length;++i){if(t==r.log.levels[i]){e.level=t,n=!0;break}}return n},r.log.lock=function(e,t){void 0===t||t?e.flags|=r.log.LEVEL_LOCKED:e.flags&=~r.log.LEVEL_LOCKED},r.log.addLogger=function(e){s.push(e)},"undefined"!=typeof console&&"log"in console){var c;if(console.error&&console.warn&&console.info&&console.debug){var h={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},p=function(e,t){r.log.prepareStandard(t);var n=h[t.level],i=[t.standard];i=i.concat(t.arguments.slice()),n.apply(console,i)};c=r.log.makeLogger(p)}else{p=function(e,t){r.log.prepareStandardFull(t),console.log(t.standardFull)};c=r.log.makeLogger(p)}r.log.setLevel(c,"debug"),r.log.addLogger(c),a=c}else console={log:function(){}};if(null!==a&&"undefined"!=typeof window&&window.location){var f=new URL(window.location.href).searchParams;if(f.has("console.level")&&r.log.setLevel(a,f.get("console.level").slice(-1)[0]),f.has("console.lock"))"true"==f.get("console.lock").slice(-1)[0]&&r.log.lock(a)}r.log.consoleLogger=a})),i.register("1196U",(function(e,t){e.exports=i("dze0J"),i("01LtU"),i("hdQXz"),i("dvpVw"),i("etMSQ")})),i.register("cmu6Z",(function(e,t){var r=i("fHXV5");i("9I8q5"),i("842FK"),i("9OZUy"),i("lrulR"),i("lPEJX"),i("jCY9T"),i("eBXI9"),i("ckwBP"),i("1nW1e");var n=r.asn1,s=e.exports=r.pkcs7=r.pkcs7||{};function a(e){var t={},i=[];if(!n.validate(e,s.asn1.recipientInfoValidator,t,i)){var a=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw a.errors=i,a}return{version:t.version.charCodeAt(0),issuer:r.pki.RDNAttributesAsArray(t.issuer),serialNumber:r.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:n.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function o(e){for(var t,i=[],s=0;s<e.length;++s)i.push((t=e[s],n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:t.issuer}),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(t.serialNumber))]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.encryptedContent.algorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.encryptedContent.content)])));return i}function u(e){var t=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[r.pki.distinguishedNameToAsn1({attributes:e.issuer}),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,r.util.hexToBytes(e.serialNumber))]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.digestAlgorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.signatureAlgorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])),t.value.push(n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var i=n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[]),s=0;s<e.unauthenticatedAttributes.length;++s){var a=e.unauthenticatedAttributes[s];i.values.push(l(a))}t.value.push(i)}return t}function l(e){var t;if(e.type===r.pki.oids.contentType)t=n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.value).getBytes());else if(e.type===r.pki.oids.messageDigest)t=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===r.pki.oids.signingTime){var i=new Date("1950-01-01T00:00:00Z"),s=new Date("2050-01-01T00:00:00Z"),a=e.value;if("string"==typeof a){var o=Date.parse(a);a=isNaN(o)?13===a.length?n.utcTimeToDate(a):n.generalizedTimeToDate(a):new Date(o)}t=a>=i&&a<s?n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(a)):n.create(n.Class.UNIVERSAL,n.Type.GENERALIZEDTIME,!1,n.dateToGeneralizedTime(a))}return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.type).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[t])])}function c(e,t,i){var s={};if(!n.validate(t,i,s,[])){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}if(n.derToOid(s.contentType)!==r.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(s.encryptedContent){var o="";if(r.util.isArray(s.encryptedContent))for(var u=0;u<s.encryptedContent.length;++u){if(s.encryptedContent[u].type!==n.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=s.encryptedContent[u].value}else o=s.encryptedContent;e.encryptedContent={algorithm:n.derToOid(s.encAlgorithm),parameter:r.util.createBuffer(s.encParameter.value),content:r.util.createBuffer(o)}}if(s.content){o="";if(r.util.isArray(s.content))for(u=0;u<s.content.length;++u){if(s.content[u].type!==n.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=s.content[u].value}else o=s.content;e.content=r.util.createBuffer(o)}return e.version=s.version.charCodeAt(0),e.rawCapture=s,s}function h(e){if(void 0===e.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===e.content){var t;switch(e.encryptedContent.algorithm){case r.pki.oids["aes128-CBC"]:case r.pki.oids["aes192-CBC"]:case r.pki.oids["aes256-CBC"]:t=r.aes.createDecryptionCipher(e.encryptedContent.key);break;case r.pki.oids.desCBC:case r.pki.oids["des-EDE3-CBC"]:t=r.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}s.messageFromPem=function(e){var t=r.pem.decode(e)[0];if("PKCS7"!==t.type){var i=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw i.headerType=t.type,i}if(t.procType&&"ENCRYPTED"===t.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var a=n.fromDer(t.body);return s.messageFromAsn1(a)},s.messageToPem=function(e,t){var i={type:"PKCS7",body:n.toDer(e.toAsn1()).getBytes()};return r.pem.encode(i,{maxline:t})},s.messageFromAsn1=function(e){var t={},i=[];if(!n.validate(e,s.asn1.contentInfoValidator,t,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw a.errors=i,a}var o,u=n.derToOid(t.contentType);switch(u){case r.pki.oids.envelopedData:o=s.createEnvelopedData();break;case r.pki.oids.encryptedData:o=s.createEncryptedData();break;case r.pki.oids.signedData:o=s.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return o.fromAsn1(t.content.value[0]),o},s.createSignedData=function(){var e=null;return e={type:r.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(t){if(c(e,t,s.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var n=e.rawCapture.certificates.value,i=0;i<n.length;++i)e.certificates.push(r.pki.certificateFromAsn1(n[i]))},toAsn1:function(){e.contentInfo||e.sign();for(var t=[],i=0;i<e.certificates.length;++i)t.push(r.pki.certificateToAsn1(e.certificates[i]));var s=[],a=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return t.length>0&&a.value[0].value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,t)),s.length>0&&a.value[0].value.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,s)),a.value[0].value.push(n.create(n.Class.UNIVERSAL,n.Type.SET,!0,e.signerInfos)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.type).getBytes()),a])},addSigner:function(t){var n=t.issuer,i=t.serialNumber;if(t.certificate){var s=t.certificate;"string"==typeof s&&(s=r.pki.certificateFromPem(s)),n=s.issuer.attributes,i=s.serialNumber}var a=t.key;if(!a)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof a&&(a=r.pki.privateKeyFromPem(a));var o=t.digestAlgorithm||r.pki.oids.sha1;switch(o){case r.pki.oids.sha1:case r.pki.oids.sha256:case r.pki.oids.sha384:case r.pki.oids.sha512:case r.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var u=t.authenticatedAttributes||[];if(u.length>0){for(var l=!1,c=!1,h=0;h<u.length;++h){var p=u[h];if(l||p.type!==r.pki.oids.contentType){if(c||p.type!==r.pki.oids.messageDigest);else if(c=!0,l)break}else if(l=!0,c)break}if(!l||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:a,version:1,issuer:n,serialNumber:i,digestAlgorithm:o,signatureAlgorithm:r.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(t){var i;(t=t||{},"object"!=typeof e.content||null===e.contentInfo)&&(e.contentInfo=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(r.pki.oids.data).getBytes())]),"content"in e&&(e.content instanceof r.util.ByteBuffer?i=e.content.bytes():"string"==typeof e.content&&(i=r.util.encodeUtf8(e.content)),t.detached?e.detachedContent=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,i)]))));0!==e.signers.length&&function(t){var i;i=e.detachedContent?e.detachedContent:(i=e.contentInfo.value[1]).value[0];if(!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var s=n.derToOid(e.contentInfo.value[0].value),a=n.toDer(i);for(var o in a.getByte(),n.getBerValueLength(a),a=a.getBytes(),t)t[o].start().update(a);for(var c=new Date,h=0;h<e.signers.length;++h){var p=e.signers[h];if(0===p.authenticatedAttributes.length){if(s!==r.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{p.authenticatedAttributesAsn1=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var f=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[]),d=0;d<p.authenticatedAttributes.length;++d){var g=p.authenticatedAttributes[d];g.type===r.pki.oids.messageDigest?g.value=t[p.digestAlgorithm].digest():g.type===r.pki.oids.signingTime&&(g.value||(g.value=c)),f.value.push(l(g)),p.authenticatedAttributesAsn1.value.push(l(g))}a=n.toDer(f).getBytes(),p.md.start().update(a)}p.signature=p.key.sign(p.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=function(e){for(var t=[],r=0;r<e.length;++r)t.push(u(e[r]));return t}(e.signers)}(function(){for(var t={},i=0;i<e.signers.length;++i){var s=e.signers[i];(a=s.digestAlgorithm)in t||(t[a]=r.md[r.pki.oids[a]].create()),0===s.authenticatedAttributes.length?s.md=t[a]:s.md=r.md[r.pki.oids[a]].create()}for(var a in e.digestAlgorithmIdentifiers=[],t)e.digestAlgorithmIdentifiers.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]));return t}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(t){"string"==typeof t&&(t=r.pki.certificateFromPem(t)),e.certificates.push(t)},addCertificateRevokationList:function(e){throw new Error("PKCS#7 CRL support not yet implemented.")}}},s.createEncryptedData=function(){var e=null;return e={type:r.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(t){c(e,t,s.asn1.encryptedDataValidator)},decrypt:function(t){void 0!==t&&(e.encryptedContent.key=t),h(e)}}},s.createEnvelopedData=function(){var e=null;return e={type:r.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:r.pki.oids["aes256-CBC"]},fromAsn1:function(t){var r=c(e,t,s.asn1.envelopedDataValidator);e.recipients=function(e){for(var t=[],r=0;r<e.length;++r)t.push(a(e[r]));return t}(r.recipientInfos.value)},toAsn1:function(){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.type).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,o(e.recipients)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,(t=e.encryptedContent,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(r.pki.oids.data).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.algorithm).getBytes()),t.parameter?n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.content.getBytes())])]))])])]);var t},findRecipient:function(t){for(var r=t.issuer.attributes,n=0;n<e.recipients.length;++n){var i=e.recipients[n],s=i.issuer;if(i.serialNumber===t.serialNumber&&s.length===r.length){for(var a=!0,o=0;o<r.length;++o)if(s[o].type!==r[o].type||s[o].value!==r[o].value){a=!1;break}if(a)return i}}return null},decrypt:function(t,n){if(void 0===e.encryptedContent.key&&void 0!==t&&void 0!==n)switch(t.encryptedContent.algorithm){case r.pki.oids.rsaEncryption:case r.pki.oids.desCBC:var i=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=r.util.createBuffer(i);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}h(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:r.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(void 0===e.encryptedContent.content){var i,s,a;switch(n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key,n){case r.pki.oids["aes128-CBC"]:i=16,s=16,a=r.aes.createEncryptionCipher;break;case r.pki.oids["aes192-CBC"]:i=24,s=16,a=r.aes.createEncryptionCipher;break;case r.pki.oids["aes256-CBC"]:i=32,s=16,a=r.aes.createEncryptionCipher;break;case r.pki.oids["des-EDE3-CBC"]:i=24,s=8,a=r.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(void 0===t)t=r.util.createBuffer(r.random.getBytes(i));else if(t.length()!=i)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+i+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=r.util.createBuffer(r.random.getBytes(s));var o=a(t);if(o.start(e.encryptedContent.parameter.copy()),o.update(e.content),!o.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=o.output}for(var u=0;u<e.recipients.length;++u){var l=e.recipients[u];if(void 0===l.encryptedContent.content){if(l.encryptedContent.algorithm!==r.pki.oids.rsaEncryption)throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm);l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data)}}}}}})),i.register("kSnMm",(function(e,t){var r=i("fHXV5");i("9I8q5"),i("dbgLj"),i("01LtU"),i("hdQXz"),i("ckwBP");var n=e.exports=r.ssh=r.ssh||{};function s(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var i=r.util.hexToBytes(n);e.putInt32(i.length),e.putBytes(i)}function a(e,t){e.putInt32(t.length),e.putString(t)}function o(){for(var e=r.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}n.privateKeyToPutty=function(e,t,n){var i="ssh-rsa",u=""===(t=t||"")?"none":"aes256-cbc",l="PuTTY-User-Key-File-2: "+i+"\r\n";l+="Encryption: "+u+"\r\n",l+="Comment: "+(n=n||"")+"\r\n";var c=r.util.createBuffer();a(c,i),s(c,e.e),s(c,e.n);var h=r.util.encode64(c.bytes(),64),p=Math.floor(h.length/66)+1;l+="Public-Lines: "+p+"\r\n",l+=h;var f,d=r.util.createBuffer();if(s(d,e.d),s(d,e.p),s(d,e.q),s(d,e.qInv),t){var g=d.length()+16-1;g-=g%16;var m=o(d.bytes());m.truncate(m.length()-g+d.length()),d.putBuffer(m);var y=r.util.createBuffer();y.putBuffer(o("\0\0\0\0",t)),y.putBuffer(o("\0\0\0",t));var E=r.aes.createEncryptionCipher(y.truncate(8),"CBC");E.start(r.util.createBuffer().fillWithByte(0,16)),E.update(d.copy()),E.finish();var v=E.output;v.truncate(16),f=r.util.encode64(v.bytes(),64)}else f=r.util.encode64(d.bytes(),64);l+="\r\nPrivate-Lines: "+(p=Math.floor(f.length/66)+1)+"\r\n",l+=f;var T=o("putty-private-key-file-mac-key",t),A=r.util.createBuffer();a(A,i),a(A,u),a(A,n),A.putInt32(c.length()),A.putBuffer(c),A.putInt32(d.length()),A.putBuffer(d);var S=r.hmac.create();return S.start("sha1",T),S.update(A.bytes()),l+="\r\nPrivate-MAC: "+S.digest().toHex()+"\r\n"},n.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var i=r.util.createBuffer();return a(i,n),s(i,e.e),s(i,e.n),n+" "+r.util.encode64(i.bytes())+" "+t},n.privateKeyToOpenSSH=function(e,t){return t?r.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):r.pki.privateKeyToPem(e)},n.getPublicKeyFingerprint=function(e,t){var n=(t=t||{}).md||r.md.md5.create(),i=r.util.createBuffer();a(i,"ssh-rsa"),s(i,e.e),s(i,e.n),n.start(),n.update(i.getBytes());var o=n.digest();if("hex"===t.encoding){var u=o.toHex();return t.delimiter?u.match(/.{2}/g).join(t.delimiter):u}if("binary"===t.encoding)return o.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".');return o}})),i.register("gdKyT",(function(e,t){
/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(t,r){"use strict";e.exports?e.exports=r(i("5AGUC"),i("2J1m3"),i("2AU66")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],r):t.URI=r(t.punycode,t.IPv6,t.SecondLevelDomains,t)}(e.exports,(function(e,t,r,n){"use strict";var i=n&&n.URI;function s(e,t){var r=arguments.length>=1;if(!(this instanceof s))return r?arguments.length>=2?new s(e,t):new s(e):new s;if(void 0===e){if(r)throw new TypeError("undefined is not a valid argument for URI");e="undefined"!=typeof location?location.href+"":""}if(null===e&&r)throw new TypeError("null is not a valid argument for URI");return this.href(e),void 0!==t?this.absoluteTo(t):this}s.version="1.19.11";var a=s.prototype,o=Object.prototype.hasOwnProperty;function u(e){return e.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function l(e){return void 0===e?"Undefined":String(Object.prototype.toString.call(e)).slice(8,-1)}function c(e){return"Array"===l(e)}function h(e,t){var r,n,i={};if("RegExp"===l(t))i=null;else if(c(t))for(r=0,n=t.length;r<n;r++)i[t[r]]=!0;else i[t]=!0;for(r=0,n=e.length;r<n;r++){(i&&void 0!==i[e[r]]||!i&&t.test(e[r]))&&(e.splice(r,1),n--,r--)}return e}function p(e,t){var r,n;if(c(t)){for(r=0,n=t.length;r<n;r++)if(!p(e,t[r]))return!1;return!0}var i=l(t);for(r=0,n=e.length;r<n;r++)if("RegExp"===i){if("string"==typeof e[r]&&e[r].match(t))return!0}else if(e[r]===t)return!0;return!1}function f(e,t){if(!c(e)||!c(t))return!1;if(e.length!==t.length)return!1;e.sort(),t.sort();for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function d(e){return e.replace(/^\/+|\/+$/g,"")}function g(e){return escape(e)}function m(e){return encodeURIComponent(e).replace(/[!'()*]/g,g).replace(/\*/g,"%2A")}s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:s.preventInvalidHostname,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.preventInvalidHostname=!1,s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\._-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},s.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.hostProtocols=["http","https"],s.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},s.getDomAttribute=function(e){if(e&&e.nodeName){var t=e.nodeName.toLowerCase();if("input"!==t||"image"===e.type)return s.domAttributes[t]}},s.encode=m,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=m,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/gi,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},s.encodeQuery=function(e,t){var r=s.encode(e+"");return void 0===t&&(t=s.escapeQuerySpace),t?r.replace(/%20/g,"+"):r},s.decodeQuery=function(e,t){e+="",void 0===t&&(t=s.escapeQuerySpace);try{return s.decode(t?e.replace(/\+/g,"%20"):e)}catch(t){return e}};var y,E={encode:"encode",decode:"decode"},v=function(e,t){return function(r){try{return s[t](r+"").replace(s.characters[e][t].expression,(function(r){return s.characters[e][t].map[r]}))}catch(e){return r}}};for(y in E)s[y+"PathSegment"]=v("pathname",E[y]),s[y+"UrnPathSegment"]=v("urnpath",E[y]);var T=function(e,t,r){return function(n){var i;i=r?function(e){return s[t](s[r](e))}:s[t];for(var a=(n+"").split(e),o=0,u=a.length;o<u;o++)a[o]=i(a[o]);return a.join(e)}};function A(e){return function(t,r){return void 0===t?this._parts[e]||"":(this._parts[e]=t||null,this.build(!r),this)}}function S(e,t){return function(r,n){return void 0===r?this._parts[e]||"":(null!==r&&(r+="").charAt(0)===t&&(r=r.substring(1)),this._parts[e]=r,this.build(!n),this)}}s.decodePath=T("/","decodePathSegment"),s.decodeUrnPath=T(":","decodeUrnPathSegment"),s.recodePath=T("/","encodePathSegment","decode"),s.recodeUrnPath=T(":","encodeUrnPathSegment","decode"),s.encodeReserved=v("reserved","encode"),s.parse=function(e,t){var r;return t||(t={preventInvalidHostname:s.preventInvalidHostname}),(r=(e=(e=e.replace(s.leading_whitespace_expression,"")).replace(s.ascii_tab_whitespace,"")).indexOf("#"))>-1&&(t.fragment=e.substring(r+1)||null,e=e.substring(0,r)),(r=e.indexOf("?"))>-1&&(t.query=e.substring(r+1)||null,e=e.substring(0,r)),"//"===(e=(e=e.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://")).replace(/^[/\\]{2,}/i,"//")).substring(0,2)?(t.protocol=null,e=e.substring(2),e=s.parseAuthority(e,t)):(r=e.indexOf(":"))>-1&&(t.protocol=e.substring(0,r)||null,t.protocol&&!t.protocol.match(s.protocol_expression)?t.protocol=void 0:"//"===e.substring(r+1,r+3).replace(/\\/g,"/")?(e=e.substring(r+3),e=s.parseAuthority(e,t)):(e=e.substring(r+1),t.urn=!0)),t.path=e,t},s.parseHost=function(e,t){e||(e="");var r,n,i=(e=e.replace(/\\/g,"/")).indexOf("/");if(-1===i&&(i=e.length),"["===e.charAt(0))r=e.indexOf("]"),t.hostname=e.substring(1,r)||null,t.port=e.substring(r+2,i)||null,"/"===t.port&&(t.port=null);else{var a=e.indexOf(":"),o=e.indexOf("/"),u=e.indexOf(":",a+1);-1!==u&&(-1===o||u<o)?(t.hostname=e.substring(0,i)||null,t.port=null):(n=e.substring(0,i).split(":"),t.hostname=n[0]||null,t.port=n[1]||null)}return t.hostname&&"/"!==e.substring(i).charAt(0)&&(i++,e="/"+e),t.preventInvalidHostname&&s.ensureValidHostname(t.hostname,t.protocol),t.port&&s.ensureValidPort(t.port),e.substring(i)||"/"},s.parseAuthority=function(e,t){return e=s.parseUserinfo(e,t),s.parseHost(e,t)},s.parseUserinfo=function(e,t){var r=e;-1!==e.indexOf("\\")&&(e=e.replace(/\\/g,"/"));var n,i=e.indexOf("/"),a=e.lastIndexOf("@",i>-1?i:e.length-1);return a>-1&&(-1===i||a<i)?(n=e.substring(0,a).split(":"),t.username=n[0]?s.decode(n[0]):null,n.shift(),t.password=n[0]?s.decode(n.join(":")):null,e=r.substring(a+1)):(t.username=null,t.password=null),e},s.parseQuery=function(e,t){if(!e)return{};if(!(e=e.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"")))return{};for(var r,n,i,a={},u=e.split("&"),l=u.length,c=0;c<l;c++)r=u[c].split("="),n=s.decodeQuery(r.shift(),t),i=r.length?s.decodeQuery(r.join("="),t):null,"__proto__"!==n&&(o.call(a,n)?("string"!=typeof a[n]&&null!==a[n]||(a[n]=[a[n]]),a[n].push(i)):a[n]=i);return a},s.build=function(e){var t="",r=!1;return e.protocol&&(t+=e.protocol+":"),e.urn||!t&&!e.hostname||(t+="//",r=!0),t+=s.buildAuthority(e)||"","string"==typeof e.path&&("/"!==e.path.charAt(0)&&r&&(t+="/"),t+=e.path),"string"==typeof e.query&&e.query&&(t+="?"+e.query),"string"==typeof e.fragment&&e.fragment&&(t+="#"+e.fragment),t},s.buildHost=function(e){var t="";return e.hostname?(s.ip6_expression.test(e.hostname)?t+="["+e.hostname+"]":t+=e.hostname,e.port&&(t+=":"+e.port),t):""},s.buildAuthority=function(e){return s.buildUserinfo(e)+s.buildHost(e)},s.buildUserinfo=function(e){var t="";return e.username&&(t+=s.encode(e.username)),e.password&&(t+=":"+s.encode(e.password)),t&&(t+="@"),t},s.buildQuery=function(e,t,r){var n,i,a,u,l="";for(i in e)if("__proto__"!==i&&o.call(e,i))if(c(e[i]))for(n={},a=0,u=e[i].length;a<u;a++)void 0!==e[i][a]&&void 0===n[e[i][a]+""]&&(l+="&"+s.buildQueryParameter(i,e[i][a],r),!0!==t&&(n[e[i][a]+""]=!0));else void 0!==e[i]&&(l+="&"+s.buildQueryParameter(i,e[i],r));return l.substring(1)},s.buildQueryParameter=function(e,t,r){return s.encodeQuery(e,r)+(null!==t?"="+s.encodeQuery(t,r):"")},s.addQuery=function(e,t,r){if("object"==typeof t)for(var n in t)o.call(t,n)&&s.addQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===e[t])return void(e[t]=r);"string"==typeof e[t]&&(e[t]=[e[t]]),c(r)||(r=[r]),e[t]=(e[t]||[]).concat(r)}},s.setQuery=function(e,t,r){if("object"==typeof t)for(var n in t)o.call(t,n)&&s.setQuery(e,n,t[n]);else{if("string"!=typeof t)throw new TypeError("URI.setQuery() accepts an object, string as the name parameter");e[t]=void 0===r?null:r}},s.removeQuery=function(e,t,r){var n,i,a;if(c(t))for(n=0,i=t.length;n<i;n++)e[t[n]]=void 0;else if("RegExp"===l(t))for(a in e)t.test(a)&&(e[a]=void 0);else if("object"==typeof t)for(a in t)o.call(t,a)&&s.removeQuery(e,a,t[a]);else{if("string"!=typeof t)throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter");void 0!==r?"RegExp"===l(r)?!c(e[t])&&r.test(e[t])?e[t]=void 0:e[t]=h(e[t],r):e[t]!==String(r)||c(r)&&1!==r.length?c(e[t])&&(e[t]=h(e[t],r)):e[t]=void 0:e[t]=void 0}},s.hasQuery=function(e,t,r,n){switch(l(t)){case"String":break;case"RegExp":for(var i in e)if(o.call(e,i)&&t.test(i)&&(void 0===r||s.hasQuery(e,i,r)))return!0;return!1;case"Object":for(var a in t)if(o.call(t,a)&&!s.hasQuery(e,a,t[a]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(l(r)){case"Undefined":return t in e;case"Boolean":return r===Boolean(c(e[t])?e[t].length:e[t]);case"Function":return!!r(e[t],t,e);case"Array":return!!c(e[t])&&(n?p:f)(e[t],r);case"RegExp":return c(e[t])?!!n&&p(e[t],r):Boolean(e[t]&&e[t].match(r));case"Number":r=String(r);case"String":return c(e[t])?!!n&&p(e[t],r):e[t]===r;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.joinPaths=function(){for(var e=[],t=[],r=0,n=0;n<arguments.length;n++){var i=new s(arguments[n]);e.push(i);for(var a=i.segment(),o=0;o<a.length;o++)"string"==typeof a[o]&&t.push(a[o]),a[o]&&r++}if(!t.length||!r)return new s("");var u=new s("").segment(t);return""!==e[0].path()&&"/"!==e[0].path().slice(0,1)||u.path("/"+u.path()),u.normalize()},s.commonPath=function(e,t){var r,n=Math.min(e.length,t.length);for(r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r)){r--;break}return r<1?e.charAt(0)===t.charAt(0)&&"/"===e.charAt(0)?"/":"":("/"===e.charAt(r)&&"/"===t.charAt(r)||(r=e.substring(0,r).lastIndexOf("/")),e.substring(0,r+1))},s.withinString=function(e,t,r){r||(r={});var n=r.start||s.findUri.start,i=r.end||s.findUri.end,a=r.trim||s.findUri.trim,o=r.parens||s.findUri.parens,u=/[a-z0-9-]=["']?$/i;for(n.lastIndex=0;;){var l=n.exec(e);if(!l)break;var c=l.index;if(r.ignoreHtml){var h=e.slice(Math.max(c-3,0),c);if(h&&u.test(h))continue}for(var p=c+e.slice(c).search(i),f=e.slice(c,p),d=-1;;){var g=o.exec(f);if(!g)break;var m=g.index+g[0].length;d=Math.max(d,m)}if(!((f=d>-1?f.slice(0,d)+f.slice(d).replace(a,""):f.replace(a,"")).length<=l[0].length||r.ignore&&r.ignore.test(f))){var y=t(f,c,p=c+f.length,e);void 0!==y?(y=String(y),e=e.slice(0,c)+y+e.slice(p),n.lastIndex=c+y.length):n.lastIndex=p}}return n.lastIndex=0,e},s.ensureValidHostname=function(t,r){var n=!!t,i=!1;if(!!r&&(i=p(s.hostProtocols,r)),i&&!n)throw new TypeError("Hostname cannot be empty, if protocol is "+r);if(t&&t.match(s.invalid_hostname_characters)){if(!e)throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(e.toASCII(t).match(s.invalid_hostname_characters))throw new TypeError('Hostname "'+t+'" contains characters other than [A-Z0-9.-:_]')}},s.ensureValidPort=function(e){if(e){var t=Number(e);if(!(/^[0-9]+$/.test(t)&&t>0&&t<65536))throw new TypeError('Port "'+e+'" is not a valid port')}},s.noConflict=function(e){if(e){var t={URI:this.noConflict()};return n.URITemplate&&"function"==typeof n.URITemplate.noConflict&&(t.URITemplate=n.URITemplate.noConflict()),n.IPv6&&"function"==typeof n.IPv6.noConflict&&(t.IPv6=n.IPv6.noConflict()),n.SecondLevelDomains&&"function"==typeof n.SecondLevelDomains.noConflict&&(t.SecondLevelDomains=n.SecondLevelDomains.noConflict()),t}return n.URI===this&&(n.URI=i),this},a.build=function(e){return!0===e?this._deferred_build=!0:(void 0===e||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},a.clone=function(){return new s(this)},a.valueOf=a.toString=function(){return this.build(!1)._string},a.protocol=A("protocol"),a.username=A("username"),a.password=A("password"),a.hostname=A("hostname"),a.port=A("port"),a.query=S("query","?"),a.fragment=S("fragment","#"),a.search=function(e,t){var r=this.query(e,t);return"string"==typeof r&&r.length?"?"+r:r},a.hash=function(e,t){var r=this.fragment(e,t);return"string"==typeof r&&r.length?"#"+r:r},a.pathname=function(e,t){if(void 0===e||!0===e){var r=this._parts.path||(this._parts.hostname?"/":"");return e?(this._parts.urn?s.decodeUrnPath:s.decodePath)(r):r}return this._parts.urn?this._parts.path=e?s.recodeUrnPath(e):"":this._parts.path=e?s.recodePath(e):"/",this.build(!t),this},a.path=a.pathname,a.href=function(e,t){var r;if(void 0===e)return this.toString();this._string="",this._parts=s._parts();var n=e instanceof s,i="object"==typeof e&&(e.hostname||e.path||e.pathname);e.nodeName&&(e=e[s.getDomAttribute(e)]||"",i=!1);if(!n&&i&&void 0!==e.pathname&&(e=e.toString()),"string"==typeof e||e instanceof String)this._parts=s.parse(String(e),this._parts);else{if(!n&&!i)throw new TypeError("invalid input");var a=n?e._parts:e;for(r in a)"query"!==r&&o.call(this._parts,r)&&(this._parts[r]=a[r]);a.query&&this.query(a.query,!1)}return this.build(!t),this},a.is=function(e){var t=!1,n=!1,i=!1,a=!1,o=!1,u=!1,l=!1,c=!this._parts.urn;switch(this._parts.hostname&&(c=!1,n=s.ip4_expression.test(this._parts.hostname),i=s.ip6_expression.test(this._parts.hostname),o=(a=!(t=n||i))&&r&&r.has(this._parts.hostname),u=a&&s.idn_expression.test(this._parts.hostname),l=a&&s.punycode_expression.test(this._parts.hostname)),e.toLowerCase()){case"relative":return c;case"absolute":return!c;case"domain":case"name":return a;case"sld":return o;case"ip":return t;case"ip4":case"ipv4":case"inet4":return n;case"ip6":case"ipv6":case"inet6":return i;case"idn":return u;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return l}return null};var _=a.protocol,b=a.port,C=a.hostname;a.protocol=function(e,t){if(e&&!(e=e.replace(/:(\/\/)?$/,"")).match(s.protocol_expression))throw new TypeError('Protocol "'+e+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return _.call(this,e,t)},a.scheme=a.protocol,a.port=function(e,t){return this._parts.urn?void 0===e?"":this:(void 0!==e&&(0===e&&(e=null),e&&(":"===(e+="").charAt(0)&&(e=e.substring(1)),s.ensureValidPort(e))),b.call(this,e,t))},a.hostname=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0!==e){var r={preventInvalidHostname:this._parts.preventInvalidHostname};if("/"!==s.parseHost(e,r))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');e=r.hostname,this._parts.preventInvalidHostname&&s.ensureValidHostname(e,this._parts.protocol)}return C.call(this,e,t)},a.origin=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=this.protocol();return this.authority()?(r?r+"://":"")+this.authority():""}var n=s(e);return this.protocol(n.protocol()).authority(n.authority()).build(!t),this},a.host=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?s.buildHost(this._parts):"";if("/"!==s.parseHost(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},a.authority=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e)return this._parts.hostname?s.buildAuthority(this._parts):"";if("/"!==s.parseAuthority(e,this._parts))throw new TypeError('Hostname "'+e+'" contains characters other than [A-Z0-9.-]');return this.build(!t),this},a.userinfo=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){var r=s.buildUserinfo(this._parts);return r?r.substring(0,r.length-1):r}return"@"!==e[e.length-1]&&(e+="@"),s.parseUserinfo(e,this._parts),this.build(!t),this},a.resource=function(e,t){var r;return void 0===e?this.path()+this.search()+this.hash():(r=s.parse(e),this._parts.path=r.path,this._parts.query=r.query,this._parts.fragment=r.fragment,this.build(!t),this)},a.subdomain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,r)||""}var n=this._parts.hostname.length-this.domain().length,i=this._parts.hostname.substring(0,n),a=new RegExp("^"+u(i));if(e&&"."!==e.charAt(e.length-1)&&(e+="."),-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");return e&&s.ensureValidHostname(e,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(a,e),this.build(!t),this},a.domain=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var r=this._parts.hostname.match(/\./g);if(r&&r.length<2)return this._parts.hostname;var n=this._parts.hostname.length-this.tld(t).length-1;return n=this._parts.hostname.lastIndexOf(".",n-1)+1,this._parts.hostname.substring(n)||""}if(!e)throw new TypeError("cannot set domain empty");if(-1!==e.indexOf(":"))throw new TypeError("Domains cannot contain colons");if(s.ensureValidHostname(e,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=e;else{var i=new RegExp(u(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(i,e)}return this.build(!t),this},a.tld=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("boolean"==typeof e&&(t=e,e=void 0),void 0===e){if(!this._parts.hostname||this.is("IP"))return"";var n=this._parts.hostname.lastIndexOf("."),i=this._parts.hostname.substring(n+1);return!0!==t&&r&&r.list[i.toLowerCase()]&&r.get(this._parts.hostname)||i}var s;if(!e)throw new TypeError("cannot set TLD empty");if(e.match(/[^a-zA-Z0-9-]/)){if(!r||!r.is(e))throw new TypeError('TLD "'+e+'" contains characters other than [A-Z0-9]');s=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");s=new RegExp(u(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(s,e)}return this.build(!t),this},a.directory=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var r=this._parts.path.length-this.filename().length-1,n=this._parts.path.substring(0,r)||(this._parts.hostname?"/":"");return e?s.decodePath(n):n}var i=this._parts.path.length-this.filename().length,a=this._parts.path.substring(0,i),o=new RegExp("^"+u(a));return this.is("relative")||(e||(e="/"),"/"!==e.charAt(0)&&(e="/"+e)),e&&"/"!==e.charAt(e.length-1)&&(e+="/"),e=s.recodePath(e),this._parts.path=this._parts.path.replace(o,e),this.build(!t),this},a.filename=function(e,t){if(this._parts.urn)return void 0===e?"":this;if("string"!=typeof e){if(!this._parts.path||"/"===this._parts.path)return"";var r=this._parts.path.lastIndexOf("/"),n=this._parts.path.substring(r+1);return e?s.decodePathSegment(n):n}var i=!1;"/"===e.charAt(0)&&(e=e.substring(1)),e.match(/\.?\//)&&(i=!0);var a=new RegExp(u(this.filename())+"$");return e=s.recodePath(e),this._parts.path=this._parts.path.replace(a,e),i?this.normalizePath(t):this.build(!t),this},a.suffix=function(e,t){if(this._parts.urn)return void 0===e?"":this;if(void 0===e||!0===e){if(!this._parts.path||"/"===this._parts.path)return"";var r,n,i=this.filename(),a=i.lastIndexOf(".");return-1===a?"":(r=i.substring(a+1),n=/^[a-z0-9%]+$/i.test(r)?r:"",e?s.decodePathSegment(n):n)}"."===e.charAt(0)&&(e=e.substring(1));var o,l=this.suffix();if(l)o=e?new RegExp(u(l)+"$"):new RegExp(u("."+l)+"$");else{if(!e)return this;this._parts.path+="."+s.recodePath(e)}return o&&(e=s.recodePath(e),this._parts.path=this._parts.path.replace(o,e)),this.build(!t),this},a.segment=function(e,t,r){var n=this._parts.urn?":":"/",i=this.path(),s="/"===i.substring(0,1),a=i.split(n);if(void 0!==e&&"number"!=typeof e&&(r=t,t=e,e=void 0),void 0!==e&&"number"!=typeof e)throw new Error('Bad segment "'+e+'", must be 0-based integer');if(s&&a.shift(),e<0&&(e=Math.max(a.length+e,0)),void 0===t)return void 0===e?a:a[e];if(null===e||void 0===a[e])if(c(t)){a=[];for(var o=0,u=t.length;o<u;o++)(t[o].length||a.length&&a[a.length-1].length)&&(a.length&&!a[a.length-1].length&&a.pop(),a.push(d(t[o])))}else(t||"string"==typeof t)&&(t=d(t),""===a[a.length-1]?a[a.length-1]=t:a.push(t));else t?a[e]=d(t):a.splice(e,1);return s&&a.unshift(""),this.path(a.join(n),r)},a.segmentCoded=function(e,t,r){var n,i,a;if("number"!=typeof e&&(r=t,t=e,e=void 0),void 0===t){if(c(n=this.segment(e,t,r)))for(i=0,a=n.length;i<a;i++)n[i]=s.decode(n[i]);else n=void 0!==n?s.decode(n):void 0;return n}if(c(t))for(i=0,a=t.length;i<a;i++)t[i]=s.encode(t[i]);else t="string"==typeof t||t instanceof String?s.encode(t):t;return this.segment(e,t,r)};var I=a.query;return a.query=function(e,t){if(!0===e)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof e){var r=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),n=e.call(this,r);return this._parts.query=s.buildQuery(n||r,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this}return void 0!==e&&"string"!=typeof e?(this._parts.query=s.buildQuery(e,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!t),this):I.call(this,e,t)},a.setQuery=function(e,t,r){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof e||e instanceof String)n[e]=void 0!==t?t:null;else{if("object"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var i in e)o.call(e,i)&&(n[i]=e[i])}return this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},a.addQuery=function(e,t,r){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(n,e,void 0===t?null:t),this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},a.removeQuery=function(e,t,r){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(n,e,t),this._parts.query=s.buildQuery(n,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof e&&(r=t),this.build(!r),this},a.hasQuery=function(e,t,r){var n=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(n,e,t,r)},a.setSearch=a.setQuery,a.addSearch=a.addQuery,a.removeSearch=a.removeQuery,a.hasSearch=a.hasQuery,a.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},a.normalizeProtocol=function(e){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!e)),this},a.normalizeHostname=function(r){return this._parts.hostname&&(this.is("IDN")&&e?this._parts.hostname=e.toASCII(this._parts.hostname):this.is("IPv6")&&t&&(this._parts.hostname=t.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!r)),this},a.normalizePort=function(e){return"string"==typeof this._parts.protocol&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!e)),this},a.normalizePath=function(e){var t,r=this._parts.path;if(!r)return this;if(this._parts.urn)return this._parts.path=s.recodeUrnPath(this._parts.path),this.build(!e),this;if("/"===this._parts.path)return this;var n,i,a="";for("/"!==(r=s.recodePath(r)).charAt(0)&&(t=!0,r="/"+r),"/.."!==r.slice(-3)&&"/."!==r.slice(-2)||(r+="/"),r=r.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),t&&(a=r.substring(1).match(/^(\.\.\/)+/)||"")&&(a=a[0]);-1!==(n=r.search(/\/\.\.(\/|$)/));)0!==n?(-1===(i=r.substring(0,n).lastIndexOf("/"))&&(i=n),r=r.substring(0,i)+r.substring(n+3)):r=r.substring(3);return t&&this.is("relative")&&(r=a+r.substring(1)),this._parts.path=r,this.build(!e),this},a.normalizePathname=a.normalizePath,a.normalizeQuery=function(e){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!e)),this},a.normalizeFragment=function(e){return this._parts.fragment||(this._parts.fragment=null,this.build(!e)),this},a.normalizeSearch=a.normalizeQuery,a.normalizeHash=a.normalizeFragment,a.iso8859=function(){var e=s.encode,t=s.decode;s.encode=escape,s.decode=decodeURIComponent;try{this.normalize()}finally{s.encode=e,s.decode=t}return this},a.unicode=function(){var e=s.encode,t=s.decode;s.encode=m,s.decode=unescape;try{this.normalize()}finally{s.encode=e,s.decode=t}return this},a.readable=function(){var t=this.clone();t.username("").password("").normalize();var r="";if(t._parts.protocol&&(r+=t._parts.protocol+"://"),t._parts.hostname&&(t.is("punycode")&&e?(r+=e.toUnicode(t._parts.hostname),t._parts.port&&(r+=":"+t._parts.port)):r+=t.host()),t._parts.hostname&&t._parts.path&&"/"!==t._parts.path.charAt(0)&&(r+="/"),r+=t.path(!0),t._parts.query){for(var n="",i=0,a=t._parts.query.split("&"),o=a.length;i<o;i++){var u=(a[i]||"").split("=");n+="&"+s.decodeQuery(u[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==u[1]&&(n+="="+s.decodeQuery(u[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}r+="?"+n.substring(1)}return r+=s.decodeQuery(t.hash(),!0)},a.absoluteTo=function(e){var t,r,n,i=this.clone(),a=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e instanceof s||(e=new s(e)),i._parts.protocol)return i;if(i._parts.protocol=e._parts.protocol,this._parts.hostname)return i;for(r=0;n=a[r];r++)i._parts[n]=e._parts[n];return i._parts.path?(".."===i._parts.path.substring(-2)&&(i._parts.path+="/"),"/"!==i.path().charAt(0)&&(t=(t=e.directory())||(0===e.path().indexOf("/")?"/":""),i._parts.path=(t?t+"/":"")+i._parts.path,i.normalizePath())):(i._parts.path=e._parts.path,i._parts.query||(i._parts.query=e._parts.query)),i.build(),i},a.relativeTo=function(e){var t,r,n,i,a,o=this.clone().normalize();if(o._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(e=new s(e).normalize(),t=o._parts,r=e._parts,i=o.path(),a=e.path(),"/"!==i.charAt(0))throw new Error("URI is already relative");if("/"!==a.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(t.protocol===r.protocol&&(t.protocol=null),t.username!==r.username||t.password!==r.password)return o.build();if(null!==t.protocol||null!==t.username||null!==t.password)return o.build();if(t.hostname!==r.hostname||t.port!==r.port)return o.build();if(t.hostname=null,t.port=null,i===a)return t.path="",o.build();if(!(n=s.commonPath(i,a)))return o.build();var u=r.path.substring(n.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return t.path=u+t.path.substring(n.length)||"./",o.build()},a.equals=function(e){var t,r,n,i,a,u=this.clone(),l=new s(e),h={};if(u.normalize(),l.normalize(),u.toString()===l.toString())return!0;if(n=u.query(),i=l.query(),u.query(""),l.query(""),u.toString()!==l.toString())return!1;if(n.length!==i.length)return!1;for(a in t=s.parseQuery(n,this._parts.escapeQuerySpace),r=s.parseQuery(i,this._parts.escapeQuerySpace),t)if(o.call(t,a)){if(c(t[a])){if(!f(t[a],r[a]))return!1}else if(t[a]!==r[a])return!1;h[a]=!0}for(a in r)if(o.call(r,a)&&!h[a])return!1;return!0},a.preventInvalidHostname=function(e){return this._parts.preventInvalidHostname=!!e,this},a.duplicateQueryParameters=function(e){return this._parts.duplicateQueryParameters=!!e,this},a.escapeQuerySpace=function(e){return this._parts.escapeQuerySpace=!!e,this},s}))})),i.register("5AGUC",(function(e,r){!function(n){var i=r&&!r.nodeType&&r,s=e&&!e.nodeType&&e,a="object"==typeof t&&t;a.global!==a&&a.window!==a&&a.self!==a||(n=a);var o,u,l=2147483647,c=36,h=1,p=26,f=38,d=700,g=72,m=128,y="-",E=/^xn--/,v=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},S=c-h,_=Math.floor,b=String.fromCharCode;function C(e){throw new RangeError(A[e])}function I(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function x(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),n+I((e=e.replace(T,".")).split("."),t).join(".")}function w(e){for(var t,r,n=[],i=0,s=e.length;i<s;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function N(e){return I(e,(function(e){var t="";return e>65535&&(t+=b((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=b(e)})).join("")}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function F(e,t,r){var n=0;for(e=r?_(e/d):e>>1,e+=_(e/t);e>S*p>>1;n+=c)e=_(e/S);return _(n+(S+1)*e/(e+f))}function O(e){var t,r,n,i,s,a,o,u,f,d,E,v=[],T=e.length,A=0,S=m,b=g;for((r=e.lastIndexOf(y))<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&C("not-basic"),v.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<T;){for(s=A,a=1,o=c;i>=T&&C("invalid-input"),((u=(E=e.charCodeAt(i++))-48<10?E-22:E-65<26?E-65:E-97<26?E-97:c)>=c||u>_((l-A)/a))&&C("overflow"),A+=u*a,!(u<(f=o<=b?h:o>=b+p?p:o-b));o+=c)a>_(l/(d=c-f))&&C("overflow"),a*=d;b=F(A-s,t=v.length+1,0==s),_(A/t)>l-S&&C("overflow"),S+=_(A/t),A%=t,v.splice(A++,0,S)}return N(v)}function D(e){var t,r,n,i,s,a,o,u,f,d,E,v,T,A,S,I=[];for(v=(e=w(e)).length,t=m,r=0,s=g,a=0;a<v;++a)(E=e[a])<128&&I.push(b(E));for(n=i=I.length,i&&I.push(y);n<v;){for(o=l,a=0;a<v;++a)(E=e[a])>=t&&E<o&&(o=E);for(o-t>_((l-r)/(T=n+1))&&C("overflow"),r+=(o-t)*T,t=o,a=0;a<v;++a)if((E=e[a])<t&&++r>l&&C("overflow"),E==t){for(u=r,f=c;!(u<(d=f<=s?h:f>=s+p?p:f-s));f+=c)S=u-d,A=c-d,I.push(b(R(d+S%A,0))),u=_(S/A);I.push(b(R(u,0))),s=F(r,T,n==i),r=0,++n}++r,++t}return I.join("")}if(o={version:"1.3.2",ucs2:{decode:w,encode:N},decode:O,encode:D,toASCII:function(e){return x(e,(function(e){return v.test(e)?"xn--"+D(e):e}))},toUnicode:function(e){return x(e,(function(e){return E.test(e)?O(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return o}));else if(i&&s)if(e.exports==i)s.exports=o;else for(u in o)o.hasOwnProperty(u)&&(i[u]=o[u]);else n.punycode=o}(this)})),i.register("2J1m3",(function(e,t){
/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(t,r){"use strict";e.exports?e.exports=r():"function"==typeof define&&define.amd?define(r):t.IPv6=r(t)}(e.exports,(function(e){"use strict";var t=e&&e.IPv6;return{best:function(e){var t,r,n=e.toLowerCase().split(":"),i=n.length,s=8;for(""===n[0]&&""===n[1]&&""===n[2]?(n.shift(),n.shift()):""===n[0]&&""===n[1]?n.shift():""===n[i-1]&&""===n[i-2]&&n.pop(),-1!==n[(i=n.length)-1].indexOf(".")&&(s=7),t=0;t<i&&""!==n[t];t++);if(t<s)for(n.splice(t,1,"0000");n.length<s;)n.splice(t,0,"0000");for(var a=0;a<s;a++){r=n[a].split("");for(var o=0;o<3&&("0"===r[0]&&r.length>1);o++)r.splice(0,1);n[a]=r.join("")}var u=-1,l=0,c=0,h=-1,p=!1;for(a=0;a<s;a++)p?"0"===n[a]?c+=1:(p=!1,c>l&&(u=h,l=c)):"0"===n[a]&&(p=!0,h=a,c=1);c>l&&(u=h,l=c),l>1&&n.splice(u,l,""),i=n.length;var f="";for(""===n[0]&&(f=":"),a=0;a<i&&(f+=n[a],a!==i-1);a++)f+=":";return""===n[i-1]&&(f+=":"),f},noConflict:function(){return e.IPv6===this&&(e.IPv6=t),this}}}))})),i.register("2AU66",(function(e,t){
/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */
!function(t,r){"use strict";e.exports?e.exports=r():"function"==typeof define&&define.amd?define(r):t.SecondLevelDomains=r(t)}(e.exports,(function(e){"use strict";var t=e&&e.SecondLevelDomains,r={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return!1;var i=r.list[e.slice(t+1)];return!!i&&i.indexOf(" "+e.slice(n+1,t)+" ")>=0},is:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(e.lastIndexOf(".",t-1)>=0)return!1;var n=r.list[e.slice(t+1)];return!!n&&n.indexOf(" "+e.slice(0,t)+" ")>=0},get:function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var n=e.lastIndexOf(".",t-1);if(n<=0||n>=t-1)return null;var i=r.list[e.slice(t+1)];return i?i.indexOf(" "+e.slice(n+1,t)+" ")<0?null:e.slice(n+1):null},noConflict:function(){return e.SecondLevelDomains===this&&(e.SecondLevelDomains=t),this}};return r}))})),i.register("dnzgs",(function(t,r){var n,s,a,o,u,l,c,h,p,f,d,g,m,y,E,v,T,A,S,_,b,C,I,x,w,N,R,F,O,D,P,B,L,M,U,k,H,V,j,K,G,W,q,z,Y,X,Q,J,Z,$,ee,te,re,ne,ie,se,ae,oe,ue,le,ce,he,pe,fe,de,ge,me,ye,Ee,ve,Te,Ae,Se,_e,be,Ce,Ie,xe,we;e(t.exports,"SecureRandom",(()=>n),(e=>n=e)),e(t.exports,"rng_seed_time",(()=>s),(e=>s=e)),e(t.exports,"BigInteger",(()=>a),(e=>a=e)),e(t.exports,"RSAKey",(()=>o),(e=>o=e)),e(t.exports,"ECDSA",(()=>u),(e=>u=e)),e(t.exports,"DSA",(()=>l),(e=>l=e)),e(t.exports,"Signature",(()=>c),(e=>c=e)),e(t.exports,"MessageDigest",(()=>h),(e=>h=e)),e(t.exports,"Mac",(()=>p),(e=>p=e)),e(t.exports,"Cipher",(()=>f),(e=>f=e)),e(t.exports,"KEYUTIL",(()=>d),(e=>d=e)),e(t.exports,"ASN1HEX",(()=>g),(e=>g=e)),e(t.exports,"X509",(()=>m),(e=>m=e)),e(t.exports,"X509CRL",(()=>y),(e=>y=e)),e(t.exports,"CryptoJS",(()=>E),(e=>E=e)),e(t.exports,"b64tohex",(()=>v),(e=>v=e)),e(t.exports,"b64toBA",(()=>T),(e=>T=e)),e(t.exports,"ECFieldElementFp",(()=>A),(e=>A=e)),e(t.exports,"ECPointFp",(()=>S),(e=>S=e)),e(t.exports,"ECCurveFp",(()=>_),(e=>_=e)),e(t.exports,"stoBA",(()=>b),(e=>b=e)),e(t.exports,"BAtos",(()=>C),(e=>C=e)),e(t.exports,"BAtohex",(()=>I),(e=>I=e)),e(t.exports,"stohex",(()=>x),(e=>x=e)),e(t.exports,"stob64",(()=>w),(e=>w=e)),e(t.exports,"stob64u",(()=>N),(e=>N=e)),e(t.exports,"b64utos",(()=>R),(e=>R=e)),e(t.exports,"b64tob64u",(()=>F),(e=>F=e)),e(t.exports,"b64utob64",(()=>O),(e=>O=e)),e(t.exports,"hex2b64",(()=>D),(e=>D=e)),e(t.exports,"hextob64u",(()=>P),(e=>P=e)),e(t.exports,"b64utohex",(()=>B),(e=>B=e)),e(t.exports,"utf8tob64u",(()=>L),(e=>L=e)),e(t.exports,"b64utoutf8",(()=>M),(e=>M=e)),e(t.exports,"utf8tob64",(()=>U),(e=>U=e)),e(t.exports,"b64toutf8",(()=>k),(e=>k=e)),e(t.exports,"utf8tohex",(()=>H),(e=>H=e)),e(t.exports,"hextoutf8",(()=>V),(e=>V=e)),e(t.exports,"hextorstr",(()=>j),(e=>j=e)),e(t.exports,"rstrtohex",(()=>K),(e=>K=e)),e(t.exports,"hextob64",(()=>G),(e=>G=e)),e(t.exports,"hextob64nl",(()=>W),(e=>W=e)),e(t.exports,"b64nltohex",(()=>q),(e=>q=e)),e(t.exports,"hextopem",(()=>z),(e=>z=e)),e(t.exports,"pemtohex",(()=>Y),(e=>Y=e)),e(t.exports,"hextoArrayBuffer",(()=>X),(e=>X=e)),e(t.exports,"ArrayBuffertohex",(()=>Q),(e=>Q=e)),e(t.exports,"zulutomsec",(()=>J),(e=>J=e)),e(t.exports,"zulutosec",(()=>Z),(e=>Z=e)),e(t.exports,"zulutodate",(()=>$),(e=>$=e)),e(t.exports,"datetozulu",(()=>ee),(e=>ee=e)),e(t.exports,"uricmptohex",(()=>te),(e=>te=e)),e(t.exports,"hextouricmp",(()=>re),(e=>re=e)),e(t.exports,"ipv6tohex",(()=>ne),(e=>ne=e)),e(t.exports,"hextoipv6",(()=>ie),(e=>ie=e)),e(t.exports,"hextoip",(()=>se),(e=>se=e)),e(t.exports,"iptohex",(()=>ae),(e=>ae=e)),e(t.exports,"ucs2hextoutf8",(()=>oe),(e=>oe=e)),e(t.exports,"encodeURIComponentAll",(()=>ue),(e=>ue=e)),e(t.exports,"newline_toUnix",(()=>le),(e=>le=e)),e(t.exports,"newline_toDos",(()=>ce),(e=>ce=e)),e(t.exports,"hextoposhex",(()=>he),(e=>he=e)),e(t.exports,"intarystrtohex",(()=>pe),(e=>pe=e)),e(t.exports,"strdiffidx",(()=>fe),(e=>fe=e)),e(t.exports,"oidtohex",(()=>de),(e=>de=e)),e(t.exports,"hextooid",(()=>ge),(e=>ge=e)),e(t.exports,"strpad",(()=>me),(e=>me=e)),e(t.exports,"bitstrtoint",(()=>ye),(e=>ye=e)),e(t.exports,"inttobitstr",(()=>Ee),(e=>Ee=e)),e(t.exports,"bitstrtobinstr",(()=>ve),(e=>ve=e)),e(t.exports,"binstrtobitstr",(()=>Te),(e=>Te=e)),e(t.exports,"isBase64URLDot",(()=>Ae),(e=>Ae=e)),e(t.exports,"namearraytobinstr",(()=>Se),(e=>Se=e)),e(t.exports,"extendClass",(()=>_e),(e=>_e=e)),e(t.exports,"KJUR",(()=>be),(e=>be=e)),e(t.exports,"crypto",(()=>Ce),(e=>Ce=e)),e(t.exports,"asn1",(()=>Ie),(e=>Ie=e)),e(t.exports,"jws",(()=>xe),(e=>xe=e)),e(t.exports,"lang",(()=>we),(e=>we=e));var Ne,Re,Fe,Oe,De,Pe,Be,Le,Me,Ue,ke,He=i("ipyC2").Buffer,Ve={userAgent:!1},je={},Ke=Ke||(Ne=Math,Fe=(Re={}).lib={},Oe=Fe.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),De=Fe.WordArray=Oe.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||Be).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var s=0;s<i;s++){var a=r[s>>>2]>>>24-s%4*8&255;t[n+s>>>2]|=a<<24-(n+s)%4*8}else for(s=0;s<i;s+=4)t[n+s>>>2]=r[s>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Ne.ceil(t/4)},clone:function(){var e=Oe.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],r=0;r<e;r+=4)t.push(4294967296*Ne.random()|0);return new De.init(t,e)}}),Pe=Re.enc={},Be=Pe.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push((s>>>4).toString(16)),n.push((15&s).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new De.init(r,t/2)}},Le=Pe.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;i<r;i++){var s=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(s))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new De.init(r,t)}},Me=Pe.Utf8={stringify:function(e){try{return decodeURIComponent(escape(Le.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return Le.parse(unescape(encodeURIComponent(e)))}},Ue=Fe.BufferedBlockAlgorithm=Oe.extend({reset:function(){this._data=new De.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=Me.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,r=t.words,n=t.sigBytes,i=this.blockSize,s=n/(4*i),a=(s=e?Ne.ceil(s):Ne.max((0|s)-this._minBufferSize,0))*i,o=Ne.min(4*a,n);if(a){for(var u=0;u<a;u+=i)this._doProcessBlock(r,u);var l=r.splice(0,a);t.sigBytes-=o}return new De.init(l,o)},clone:function(){var e=Oe.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),Fe.Hasher=Ue.extend({cfg:Oe.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){Ue.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new ke.HMAC.init(e,r).finalize(t)}}}),ke=Re.algo={},Re);!function(e){var t,r=(t=Ke).lib,n=r.Base,i=r.WordArray;(t=t.x64={}).Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),t.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;n<t;n++){var s=e[n];r.push(s.high),r.push(s.low)}return i.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),Ke.lib.Cipher||function(e){var t=(f=Ke).lib,r=t.Base,n=t.WordArray,i=t.BufferedBlockAlgorithm,s=f.enc.Base64,a=f.algo.EvpKDF,o=t.Cipher=i.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,n){return("string"==typeof r?d:p).encrypt(e,t,r,n)},decrypt:function(t,r,n){return("string"==typeof r?d:p).decrypt(e,t,r,n)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=f.mode={},l=function(e,t,r){var n=this._iv;n?this._iv=undefined:n=this._prevBlock;for(var i=0;i<r;i++)e[t+i]^=n[i]},c=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize;l.call(this,e,t,n),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),c.Decryptor=c.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),l.call(this,e,t,n),this._prevBlock=i}}),u=u.CBC=c,c=(f.pad={}).Pkcs7={pad:function(e,t){for(var r,i=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,s=[],a=0;a<r;a+=4)s.push(i);r=n.create(s,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:u,padding:c}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),p=(u=(f.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?n.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=n.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:r,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),e.createDecryptor(r,n).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),f=(f.kdf={}).OpenSSL={execute:function(e,t,r,i){return i||(i=n.random(8)),e=a.create({keySize:t+r}).compute(e,i),r=n.create(e.words.slice(t),4*r),e.sigBytes=4*t,h.create({key:e,iv:r,salt:i})}},d=t.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:f}),encrypt:function(e,t,r,n){return r=(n=this.cfg.extend(n)).kdf.execute(r,e.keySize,e.ivSize),n.iv=r.iv,(e=p.encrypt.call(this,e,t,r.key,n)).mixIn(r),e},decrypt:function(e,t,r,n){return n=this.cfg.extend(n),t=this._parse(t,n.format),r=n.kdf.execute(r,e.keySize,e.ivSize,t.salt),n.iv=r.iv,p.decrypt.call(this,e,t,r.key,n)}})}(),function(){for(var e=Ke,t=e.lib.BlockCipher,r=e.algo,n=[],i=[],s=[],a=[],o=[],u=[],l=[],c=[],h=[],p=[],f=[],d=0;256>d;d++)f[d]=128>d?d<<1:d<<1^283;var g=0,m=0;for(d=0;256>d;d++){var y=(y=m^m<<1^m<<2^m<<3^m<<4)>>>8^255&y^99;n[g]=y,i[y]=g;var E=f[g],v=f[E],T=f[v],A=257*f[y]^16843008*y;s[g]=A<<24|A>>>8,a[g]=A<<16|A>>>16,o[g]=A<<8|A>>>24,u[g]=A,A=16843009*T^65537*v^257*E^16843008*g,l[y]=A<<24|A>>>8,c[y]=A<<16|A>>>16,h[y]=A<<8|A>>>24,p[y]=A,g?(g=E^f[f[f[T^E]]],m^=f[f[m]]):g=m=1}var S=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],s=0;s<r;s++)if(s<t)i[s]=e[s];else{var a=i[s-1];s%t?6<t&&4==s%t&&(a=n[a>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a]):(a=n[(a=a<<8|a>>>24)>>>24]<<24|n[a>>>16&255]<<16|n[a>>>8&255]<<8|n[255&a],a^=S[s/t|0]<<24),i[s]=i[s-t]^a}for(e=this._invKeySchedule=[],t=0;t<r;t++)s=r-t,a=t%4?i[s]:i[s-4],e[t]=4>t||4>=s?a:l[n[a>>>24]]^c[n[a>>>16&255]]^h[n[a>>>8&255]]^p[n[255&a]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,a,o,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,c,h,p,i),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,s,a,o){for(var u=this._nRounds,l=e[t]^r[0],c=e[t+1]^r[1],h=e[t+2]^r[2],p=e[t+3]^r[3],f=4,d=1;d<u;d++){var g=n[l>>>24]^i[c>>>16&255]^s[h>>>8&255]^a[255&p]^r[f++],m=n[c>>>24]^i[h>>>16&255]^s[p>>>8&255]^a[255&l]^r[f++],y=n[h>>>24]^i[p>>>16&255]^s[l>>>8&255]^a[255&c]^r[f++];p=n[p>>>24]^i[l>>>16&255]^s[c>>>8&255]^a[255&h]^r[f++],l=g,c=m,h=y}g=(o[l>>>24]<<24|o[c>>>16&255]<<16|o[h>>>8&255]<<8|o[255&p])^r[f++],m=(o[c>>>24]<<24|o[h>>>16&255]<<16|o[p>>>8&255]<<8|o[255&l])^r[f++],y=(o[h>>>24]<<24|o[p>>>16&255]<<16|o[l>>>8&255]<<8|o[255&c])^r[f++],p=(o[p>>>24]<<24|o[l>>>16&255]<<16|o[c>>>8&255]<<8|o[255&h])^r[f++],e[t]=g,e[t+1]=m,e[t+2]=y,e[t+3]=p},keySize:8});e.AES=t._createHelper(r)}(),function(){function e(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function t(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var r=Ke,n=(i=r.lib).WordArray,i=i.BlockCipher,s=r.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],c=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=i.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;56>r;r++){var n=a[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(e=this._subKeys=[],n=0;16>n;n++){var i=e[n]=[],s=u[n];for(r=0;24>r;r++)i[r/6|0]|=t[(o[r]-1+s)%28]<<31-r%6,i[4+(r/6|0)]|=t[28+(o[r+24]-1+s)%28]<<31-r%6;for(i[0]=i[0]<<1|i[0]>>>31,r=1;7>r;r++)i[r]>>>=4*(r-1)+3;i[7]=i[7]<<5|i[7]>>>27}for(t=this._invSubKeys=[],r=0;16>r;r++)t[r]=e[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(r,n,i){this._lBlock=r[n],this._rBlock=r[n+1],e.call(this,4,252645135),e.call(this,16,65535),t.call(this,2,858993459),t.call(this,8,16711935),e.call(this,1,1431655765);for(var s=0;16>s;s++){for(var a=i[s],o=this._lBlock,u=this._rBlock,h=0,p=0;8>p;p++)h|=l[p][((u^a[p])&c[p])>>>0];this._lBlock=u,this._rBlock=o^h}i=this._lBlock,this._lBlock=this._rBlock,this._rBlock=i,e.call(this,1,1431655765),t.call(this,8,16711935),t.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),r[n]=this._lBlock,r[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});r.DES=i._createHelper(h),s=s.TripleDES=i.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(n.create(e.slice(0,2))),this._des2=h.createEncryptor(n.create(e.slice(2,4))),this._des3=h.createEncryptor(n.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2}),r.TripleDES=i._createHelper(s)}(),function(){var e=Ke,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp(),e=[];for(var i=0;i<r;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,a=0;4>a&&i+.75*a<r;a++)e.push(n.charAt(s>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var r=e.length,n=this._map;(i=n.charAt(64))&&(-1!=(i=e.indexOf(i))&&(r=i));for(var i=[],s=0,a=0;a<r;a++)if(a%4){var o=n.indexOf(e.charAt(a-1))<<a%4*2,u=n.indexOf(e.charAt(a))>>>6-a%4*2;i[s>>>2]|=(o|u)<<24-s%4*8,s++}return t.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,r,n,i,s,a){return((e=e+(t&r|~t&n)+i+a)<<s|e>>>32-s)+t}function r(e,t,r,n,i,s,a){return((e=e+(t&n|r&~n)+i+a)<<s|e>>>32-s)+t}function n(e,t,r,n,i,s,a){return((e=e+(t^r^n)+i+a)<<s|e>>>32-s)+t}function i(e,t,r,n,i,s,a){return((e=e+(r^(t|~n))+i+a)<<s|e>>>32-s)+t}for(var s=Ke,a=(u=s.lib).WordArray,o=u.Hasher,u=s.algo,l=[],c=0;64>c;c++)l[c]=4294967296*e.abs(e.sin(c+1))|0;u=u.MD5=o.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,s){for(var a=0;16>a;a++){var o=e[u=s+a];e[u]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}a=this._hash.words;var u=e[s+0],c=(o=e[s+1],e[s+2]),h=e[s+3],p=e[s+4],f=e[s+5],d=e[s+6],g=e[s+7],m=e[s+8],y=e[s+9],E=e[s+10],v=e[s+11],T=e[s+12],A=e[s+13],S=e[s+14],_=e[s+15],b=t(b=a[0],x=a[1],I=a[2],C=a[3],u,7,l[0]),C=t(C,b,x,I,o,12,l[1]),I=t(I,C,b,x,c,17,l[2]),x=t(x,I,C,b,h,22,l[3]);b=t(b,x,I,C,p,7,l[4]),C=t(C,b,x,I,f,12,l[5]),I=t(I,C,b,x,d,17,l[6]),x=t(x,I,C,b,g,22,l[7]),b=t(b,x,I,C,m,7,l[8]),C=t(C,b,x,I,y,12,l[9]),I=t(I,C,b,x,E,17,l[10]),x=t(x,I,C,b,v,22,l[11]),b=t(b,x,I,C,T,7,l[12]),C=t(C,b,x,I,A,12,l[13]),I=t(I,C,b,x,S,17,l[14]),b=r(b,x=t(x,I,C,b,_,22,l[15]),I,C,o,5,l[16]),C=r(C,b,x,I,d,9,l[17]),I=r(I,C,b,x,v,14,l[18]),x=r(x,I,C,b,u,20,l[19]),b=r(b,x,I,C,f,5,l[20]),C=r(C,b,x,I,E,9,l[21]),I=r(I,C,b,x,_,14,l[22]),x=r(x,I,C,b,p,20,l[23]),b=r(b,x,I,C,y,5,l[24]),C=r(C,b,x,I,S,9,l[25]),I=r(I,C,b,x,h,14,l[26]),x=r(x,I,C,b,m,20,l[27]),b=r(b,x,I,C,A,5,l[28]),C=r(C,b,x,I,c,9,l[29]),I=r(I,C,b,x,g,14,l[30]),b=n(b,x=r(x,I,C,b,T,20,l[31]),I,C,f,4,l[32]),C=n(C,b,x,I,m,11,l[33]),I=n(I,C,b,x,v,16,l[34]),x=n(x,I,C,b,S,23,l[35]),b=n(b,x,I,C,o,4,l[36]),C=n(C,b,x,I,p,11,l[37]),I=n(I,C,b,x,g,16,l[38]),x=n(x,I,C,b,E,23,l[39]),b=n(b,x,I,C,A,4,l[40]),C=n(C,b,x,I,u,11,l[41]),I=n(I,C,b,x,h,16,l[42]),x=n(x,I,C,b,d,23,l[43]),b=n(b,x,I,C,y,4,l[44]),C=n(C,b,x,I,T,11,l[45]),I=n(I,C,b,x,_,16,l[46]),b=i(b,x=n(x,I,C,b,c,23,l[47]),I,C,u,6,l[48]),C=i(C,b,x,I,g,10,l[49]),I=i(I,C,b,x,S,15,l[50]),x=i(x,I,C,b,f,21,l[51]),b=i(b,x,I,C,T,6,l[52]),C=i(C,b,x,I,h,10,l[53]),I=i(I,C,b,x,E,15,l[54]),x=i(x,I,C,b,o,21,l[55]),b=i(b,x,I,C,m,6,l[56]),C=i(C,b,x,I,_,10,l[57]),I=i(I,C,b,x,d,15,l[58]),x=i(x,I,C,b,A,21,l[59]),b=i(b,x,I,C,p,6,l[60]),C=i(C,b,x,I,v,10,l[61]),I=i(I,C,b,x,c,15,l[62]),x=i(x,I,C,b,y,21,l[63]);a[0]=a[0]+b|0,a[1]=a[1]+x|0,a[2]=a[2]+I|0,a[3]=a[3]+C|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var s=e.floor(n/4294967296);for(r[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[14+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,n=0;4>n;n++)i=r[n],r[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),s.MD5=o._createHelper(u),s.HmacMD5=o._createHmacHelper(u)}(Math),function(){var e=Ke,t=(i=e.lib).WordArray,r=i.Hasher,n=[],i=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],s=r[1],a=r[2],o=r[3],u=r[4],l=0;80>l;l++){if(16>l)n[l]=0|e[t+l];else{var c=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=c<<1|c>>>31}c=(i<<5|i>>>27)+u+n[l],c=20>l?c+(1518500249+(s&a|~s&o)):40>l?c+(1859775393+(s^a^o)):60>l?c+((s&a|s&o|a&o)-1894007588):c+((s^a^o)-899497514),u=o,o=a,a=s<<30|s>>>2,s=i,i=c}r[0]=r[0]+i|0,r[1]=r[1]+s|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA1=r._createHelper(i),e.HmacSHA1=r._createHmacHelper(i)}(),function(e){for(var t=Ke,r=(i=t.lib).WordArray,n=i.Hasher,i=t.algo,s=[],a=[],o=function(e){return 4294967296*(e-(0|e))|0},u=2,l=0;64>l;){var c;e:{c=u;for(var h=e.sqrt(c),p=2;p<=h;p++)if(!(c%p)){c=!1;break e}c=!0}c&&(8>l&&(s[l]=o(e.pow(u,.5))),a[l]=o(e.pow(u,1/3)),l++),u++}var f=[];i=i.SHA256=n.extend({_doReset:function(){this._hash=new r.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],s=r[2],o=r[3],u=r[4],l=r[5],c=r[6],h=r[7],p=0;64>p;p++){if(16>p)f[p]=0|e[t+p];else{var d=f[p-15],g=f[p-2];f[p]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+f[p-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+f[p-16]}d=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&l^~u&c)+a[p]+f[p],g=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&i^n&s^i&s),h=c,c=l,l=u,u=o+d|0,o=s,s=i,i=n,n=d+g|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+s|0,r[3]=r[3]+o|0,r[4]=r[4]+u|0,r[5]=r[5]+l|0,r[6]=r[6]+c|0,r[7]=r[7]+h|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[14+(i+64>>>9<<4)]=e.floor(n/4294967296),r[15+(i+64>>>9<<4)]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=n._createHelper(i),t.HmacSHA256=n._createHmacHelper(i)}(Math),function(){var e=Ke,t=e.lib.WordArray,r=(n=e.algo).SHA256,n=n.SHA224=r.extend({_doReset:function(){this._hash=new t.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=r._doFinalize.call(this);return e.sigBytes-=4,e}});e.SHA224=r._createHelper(n),e.HmacSHA224=r._createHmacHelper(n)}(),function(){function e(){return n.create.apply(n,arguments)}for(var t=Ke,r=t.lib.Hasher,n=(s=t.x64).Word,i=s.WordArray,s=t.algo,a=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],o=[],u=0;80>u;u++)o[u]=e();s=s.SHA512=r.extend({_doReset:function(){this._hash=new i.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=(h=this._hash.words)[0],n=h[1],i=h[2],s=h[3],u=h[4],l=h[5],c=h[6],h=h[7],p=r.high,f=r.low,d=n.high,g=n.low,m=i.high,y=i.low,E=s.high,v=s.low,T=u.high,A=u.low,S=l.high,_=l.low,b=c.high,C=c.low,I=h.high,x=h.low,w=p,N=f,R=d,F=g,O=m,D=y,P=E,B=v,L=T,M=A,U=S,k=_,H=b,V=C,j=I,K=x,G=0;80>G;G++){var W=o[G];if(16>G)var q=W.high=0|e[t+2*G],z=W.low=0|e[t+2*G+1];else{q=((z=(q=o[G-15]).high)>>>1|(Y=q.low)<<31)^(z>>>8|Y<<24)^z>>>7;var Y=(Y>>>1|z<<31)^(Y>>>8|z<<24)^(Y>>>7|z<<25),X=((z=(X=o[G-2]).high)>>>19|(Q=X.low)<<13)^(z<<3|Q>>>29)^z>>>6,Q=(Q>>>19|z<<13)^(Q<<3|z>>>29)^(Q>>>6|z<<26),J=(z=o[G-7]).high,Z=($=o[G-16]).high,$=$.low;q=(q=(q=q+J+((z=Y+z.low)>>>0<Y>>>0?1:0))+X+((z=z+Q)>>>0<Q>>>0?1:0))+Z+((z=z+$)>>>0<$>>>0?1:0);W.high=q,W.low=z}J=L&U^~L&H,$=M&k^~M&V,W=w&R^w&O^R&O;var ee=N&F^N&D^F&D,te=(Y=(w>>>28|N<<4)^(w<<30|N>>>2)^(w<<25|N>>>7),X=(N>>>28|w<<4)^(N<<30|w>>>2)^(N<<25|w>>>7),(Q=a[G]).high),re=Q.low;Z=j+((L>>>14|M<<18)^(L>>>18|M<<14)^(L<<23|M>>>9))+((Q=K+((M>>>14|L<<18)^(M>>>18|L<<14)^(M<<23|L>>>9)))>>>0<K>>>0?1:0),j=H,K=V,H=U,V=k,U=L,k=M,L=P+(Z=(Z=(Z=Z+J+((Q=Q+$)>>>0<$>>>0?1:0))+te+((Q=Q+re)>>>0<re>>>0?1:0))+q+((Q=Q+z)>>>0<z>>>0?1:0))+((M=B+Q|0)>>>0<B>>>0?1:0)|0,P=O,B=D,O=R,D=F,R=w,F=N,w=Z+(W=Y+W+((z=X+ee)>>>0<X>>>0?1:0))+((N=Q+z|0)>>>0<Q>>>0?1:0)|0}f=r.low=f+N,r.high=p+w+(f>>>0<N>>>0?1:0),g=n.low=g+F,n.high=d+R+(g>>>0<F>>>0?1:0),y=i.low=y+D,i.high=m+O+(y>>>0<D>>>0?1:0),v=s.low=v+B,s.high=E+P+(v>>>0<B>>>0?1:0),A=u.low=A+M,u.high=T+L+(A>>>0<M>>>0?1:0),_=l.low=_+k,l.high=S+U+(_>>>0<k>>>0?1:0),C=c.low=C+V,c.high=b+H+(C>>>0<V>>>0?1:0),x=h.low=x+K,h.high=I+j+(x>>>0<K>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32}),t.SHA512=r._createHelper(s),t.HmacSHA512=r._createHmacHelper(s)}(),function(){var e=Ke,t=(i=e.x64).Word,r=i.WordArray,n=(i=e.algo).SHA512,i=i.SHA384=n.extend({_doReset:function(){this._hash=new r.init([new t.init(3418070365,3238371032),new t.init(1654270250,914150663),new t.init(2438529370,812702999),new t.init(355462360,4144912697),new t.init(1731405415,4290775857),new t.init(2394180231,1750603025),new t.init(3675008525,1694076839),new t.init(1203062813,3204075428)])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=16,e}});e.SHA384=n._createHelper(i),e.HmacSHA384=n._createHmacHelper(i)}(),function(){var e=Ke,t=(n=e.lib).WordArray,r=n.Hasher,n=e.algo,i=t.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=t.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),a=t.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),o=t.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),u=t.create([0,1518500249,1859775393,2400959708,2840853838]),l=t.create([1352829926,1548603684,1836072691,2053994217,0]);n=n.RIPEMD160=r.extend({_doReset:function(){this._hash=t.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;16>r;r++){var n=e[T=t+r];e[T]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var c,h,p,f,d,g,m,y,E,v,T=this._hash.words,A=(n=u.words,l.words),S=i.words,_=s.words,b=a.words,C=o.words;g=c=T[0],m=h=T[1],y=p=T[2],E=f=T[3],v=d=T[4];var I;for(r=0;80>r;r+=1)I=c+e[t+S[r]]|0,I=16>r?I+((h^p^f)+n[0]):32>r?I+((h&p|~h&f)+n[1]):48>r?I+(((h|~p)^f)+n[2]):64>r?I+((h&f|p&~f)+n[3]):I+((h^(p|~f))+n[4]),I=(I=(I|=0)<<b[r]|I>>>32-b[r])+d|0,c=d,d=f,f=p<<10|p>>>22,p=h,h=I,I=g+e[t+_[r]]|0,I=16>r?I+((m^(y|~E))+A[0]):32>r?I+((m&E|y&~E)+A[1]):48>r?I+(((m|~y)^E)+A[2]):64>r?I+((m&y|~m&E)+A[3]):I+((m^y^E)+A[4]),I=(I=(I|=0)<<C[r]|I>>>32-C[r])+v|0,g=v,v=E,E=y<<10|y>>>22,y=m,m=I;I=T[1]+p+E|0,T[1]=T[2]+f+v|0,T[2]=T[3]+d+g|0,T[3]=T[4]+c+m|0,T[4]=T[0]+h+y|0,T[0]=I},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;for(t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process(),t=(e=this._hash).words,r=0;5>r;r++)n=t[r],t[r]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return e},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e}});e.RIPEMD160=r._createHelper(n),e.HmacRIPEMD160=r._createHmacHelper(n)}(Math),function(){var e=Ke,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,r){e=this._hasher=new e.init,"string"==typeof r&&(r=t.parse(r));var n=e.blockSize,i=4*n;r.sigBytes>i&&(r=e.finalize(r)),r.clamp();for(var s=this._oKey=r.clone(),a=this._iKey=r.clone(),o=s.words,u=a.words,l=0;l<n;l++)o[l]^=1549556828,u[l]^=909522486;s.sigBytes=a.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=Ke,r=(e=t.lib).Base,n=e.WordArray,i=(e=t.algo).HMAC,s=e.PBKDF2=r.extend({cfg:r.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var r=this.cfg,s=i.create(r.hasher,e),a=n.create(),o=n.create([1]),u=a.words,l=o.words,c=r.keySize;for(r=r.iterations;u.length<c;){var h=s.update(t).finalize(o);s.reset();for(var p=h.words,f=p.length,d=h,g=1;g<r;g++){d=s.finalize(d),s.reset();for(var m=d.words,y=0;y<f;y++)p[y]^=m[y]}a.concat(h),l[0]++}return a.sigBytes=4*c,a}});t.PBKDF2=function(e,t,r){return s.create(r).compute(e,t)}}();
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
var Ge,We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qe="=";function ze(e){var t,r,n="";for(t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),n+=We.charAt(r>>6)+We.charAt(63&r);if(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),n+=We.charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),n+=We.charAt(r>>2)+We.charAt((3&r)<<4)),qe)for(;(3&n.length)>0;)n+=qe;return n}function Ye(e){var t,r,n,i="",s=0;for(t=0;t<e.length&&e.charAt(t)!=qe;++t)(n=We.indexOf(e.charAt(t)))<0||(0==s?(i+=rt(n>>2),r=3&n,s=1):1==s?(i+=rt(r<<2|n>>4),r=15&n,s=2):2==s?(i+=rt(r),i+=rt(n>>2),r=3&n,s=3):(i+=rt(r<<2|n>>4),i+=rt(15&n),s=0));return 1==s&&(i+=rt(r<<2)),i}function Xe(e){var t,r=Ye(e),n=new Array;for(t=0;2*t<r.length;++t)n[t]=parseInt(r.substring(2*t,2*t+2),16);return n}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function Qe(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function Je(){return new Qe(null)}"Microsoft Internet Explorer"==Ve.appName?(Qe.prototype.am=function(e,t,r,n,i,s){for(var a=32767&t,o=t>>15;--s>=0;){var u=32767&this[e],l=this[e++]>>15,c=o*u+l*a;i=((u=a*u+((32767&c)<<15)+r[n]+(1073741823&i))>>>30)+(c>>>15)+o*l+(i>>>30),r[n++]=1073741823&u}return i},Ge=30):"Netscape"!=Ve.appName?(Qe.prototype.am=function(e,t,r,n,i,s){for(;--s>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i},Ge=26):(Qe.prototype.am=function(e,t,r,n,i,s){for(var a=16383&t,o=t>>14;--s>=0;){var u=16383&this[e],l=this[e++]>>14,c=o*u+l*a;i=((u=a*u+((16383&c)<<14)+r[n]+i)>>28)+(c>>14)+o*l,r[n++]=268435455&u}return i},Ge=28),Qe.prototype.DB=Ge,Qe.prototype.DM=(1<<Ge)-1,Qe.prototype.DV=1<<Ge;Qe.prototype.FV=Math.pow(2,52),Qe.prototype.F1=52-Ge,Qe.prototype.F2=2*Ge-52;var Ze,$e,et="0123456789abcdefghijklmnopqrstuvwxyz",tt=new Array;for(Ze="0".charCodeAt(0),$e=0;$e<=9;++$e)tt[Ze++]=$e;for(Ze="a".charCodeAt(0),$e=10;$e<36;++$e)tt[Ze++]=$e;for(Ze="A".charCodeAt(0),$e=10;$e<36;++$e)tt[Ze++]=$e;function rt(e){return et.charAt(e)}function nt(e,t){var r=tt[e.charCodeAt(t)];return null==r?-1:r}function it(e){var t=Je();return t.fromInt(e),t}function st(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function at(e){this.m=e}function ot(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function ut(e,t){return e&t}function lt(e,t){return e|t}function ct(e,t){return e^t}function ht(e,t){return e&~t}function pt(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function ft(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function dt(){}function gt(e){return e}function mt(e){this.r2=Je(),this.q3=Je(),Qe.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}at.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},at.prototype.revert=function(e){return e},at.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},at.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},at.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},ot.prototype.convert=function(e){var t=Je();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Qe.ZERO)>0&&this.m.subTo(t,t),t},ot.prototype.revert=function(e){var t=Je();return e.copyTo(t),this.reduce(t),t},ot.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},ot.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},ot.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Qe.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Qe.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},Qe.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var a=8==r?255&e[n]:nt(e,n);a<0?"-"==e.charAt(n)&&(i=!0):(i=!1,0==s?this[this.t++]=a:s+r>this.DB?(this[this.t-1]|=(a&(1<<this.DB-s)-1)<<s,this[this.t++]=a>>this.DB-s):this[this.t-1]|=a<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,s>0&&(this[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&Qe.ZERO.subTo(this,this)},Qe.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},Qe.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},Qe.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},Qe.prototype.lShiftTo=function(e,t){var r,n=e%this.DB,i=this.DB-n,s=(1<<i)-1,a=Math.floor(e/this.DB),o=this.s<<n&this.DM;for(r=this.t-1;r>=0;--r)t[r+a+1]=this[r]>>i|o,o=(this[r]&s)<<n;for(r=a-1;r>=0;--r)t[r]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},Qe.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t[0]=this[r]>>n;for(var a=r+1;a<this.t;++a)t[a-r-1]|=(this[a]&s)<<i,t[a-r]=this[a]>>n;n>0&&(t[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}},Qe.prototype.subTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]-e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e[r],t[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t[r++]=this.DV+n:n>0&&(t[r++]=n),t.t=r,t.clamp()},Qe.prototype.multiplyTo=function(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t[i]=0;for(i=0;i<n.t;++i)t[i+r.t]=r.am(0,n[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&Qe.ZERO.subTo(t,t)},Qe.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},Qe.prototype.divRemTo=function(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=Je());var s=Je(),a=this.s,o=e.s,u=this.DB-st(n[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var l=s.t,c=s[l-1];if(0!=c){var h=c*(1<<this.F1)+(l>1?s[l-2]>>this.F2:0),p=this.FV/h,f=(1<<this.F1)/h,d=1<<this.F2,g=r.t,m=g-l,y=null==t?Je():t;for(s.dlShiftTo(m,y),r.compareTo(y)>=0&&(r[r.t++]=1,r.subTo(y,r)),Qe.ONE.dlShiftTo(l,y),y.subTo(s,s);s.t<l;)s[s.t++]=0;for(;--m>=0;){var E=r[--g]==c?this.DM:Math.floor(r[g]*p+(r[g-1]+d)*f);if((r[g]+=s.am(0,E,r,m,0,l))<E)for(s.dlShiftTo(m,y),r.subTo(y,r);r[g]<--E;)r.subTo(y,r)}null!=t&&(r.drShiftTo(l,t),a!=o&&Qe.ZERO.subTo(t,t)),r.t=l,r.clamp(),u>0&&r.rShiftTo(u,r),a<0&&Qe.ZERO.subTo(r,r)}}},Qe.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},Qe.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},Qe.prototype.exp=function(e,t){if(e>4294967295||e<1)return Qe.ONE;var r=Je(),n=Je(),i=t.convert(this),s=st(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var a=r;r=n,n=a}return t.revert(r)},Qe.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,n=(1<<t)-1,i=!1,s="",a=this.t,o=this.DB-a*this.DB%t;if(a-- >0)for(o<this.DB&&(r=this[a]>>o)>0&&(i=!0,s=rt(r));a>=0;)o<t?(r=(this[a]&(1<<o)-1)<<t-o,r|=this[--a]>>(o+=this.DB-t)):(r=this[a]>>(o-=t)&n,o<=0&&(o+=this.DB,--a)),r>0&&(i=!0),i&&(s+=rt(r));return i?s:"0"},Qe.prototype.negate=function(){var e=Je();return Qe.ZERO.subTo(this,e),e},Qe.prototype.abs=function(){return this.s<0?this.negate():this},Qe.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},Qe.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+st(this[this.t-1]^this.s&this.DM)},Qe.prototype.mod=function(e){var t=Je();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Qe.ZERO)>0&&e.subTo(t,t),t},Qe.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new at(t):new ot(t),this.exp(e,r)},Qe.ZERO=it(0),Qe.ONE=it(1),dt.prototype.convert=gt,dt.prototype.revert=gt,dt.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},dt.prototype.sqrTo=function(e,t){e.squareTo(t)},mt.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Je();return e.copyTo(t),this.reduce(t),t},mt.prototype.revert=function(e){return e},mt.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},mt.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},mt.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var yt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Et=67108864/yt[yt.length-1];
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function vt(){this.i=0,this.j=0,this.S=new Array}Qe.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},Qe.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=it(r),i=Je(),s=Je(),a="";for(this.divRemTo(n,i,s);i.signum()>0;)a=(r+s.intValue()).toString(e).substr(1)+a,i.divRemTo(n,i,s);return s.intValue().toString(e)+a},Qe.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,a=0,o=0;o<e.length;++o){var u=nt(e,o);u<0?"-"==e.charAt(o)&&0==this.signum()&&(i=!0):(a=t*a+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(a,0),s=0,a=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(a,0)),i&&Qe.ZERO.subTo(this,this)},Qe.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(Qe.ONE.shiftLeft(e-1),lt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(Qe.ONE.shiftLeft(e-1),this);else{var n=new Array,i=7&e;n.length=1+(e>>3),t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}},Qe.prototype.bitwiseTo=function(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r[n]=t(this[n],e[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r[n]=t(this[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},Qe.prototype.changeBit=function(e,t){var r=Qe.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},Qe.prototype.addTo=function(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this[r]+e[r],t[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this[r],t[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e[r],t[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t[r++]=n:n<-1&&(t[r++]=this.DV+n),t.t=r,t.clamp()},Qe.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},Qe.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},Qe.prototype.multiplyLowerTo=function(e,t,r){var n,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(n=r.t-this.t;i<n;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(n=Math.min(e.t,t);i<n;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},Qe.prototype.multiplyUpperTo=function(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)},Qe.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r},Qe.prototype.millerRabin=function(e){var t=this.subtract(Qe.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var n=t.shiftRight(r);(e=e+1>>1)>yt.length&&(e=yt.length);for(var i=Je(),s=0;s<e;++s){i.fromInt(yt[Math.floor(Math.random()*yt.length)]);var a=i.modPow(n,this);if(0!=a.compareTo(Qe.ONE)&&0!=a.compareTo(t)){for(var o=1;o++<r&&0!=a.compareTo(t);)if(0==(a=a.modPowInt(2,this)).compareTo(Qe.ONE))return!1;if(0!=a.compareTo(t))return!1}}return!0},Qe.prototype.clone=
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function(){var e=Je();return this.copyTo(e),e},Qe.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},Qe.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},Qe.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},Qe.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},Qe.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,n=this.DB-e*this.DB%8,i=0;if(e-- >0)for(n<this.DB&&(r=this[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this[e]&(1<<n)-1)<<8-n,r|=this[--e]>>(n+=this.DB-8)):(r=this[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),0!=(128&r)&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},Qe.prototype.equals=function(e){return 0==this.compareTo(e)},Qe.prototype.min=function(e){return this.compareTo(e)<0?this:e},Qe.prototype.max=function(e){return this.compareTo(e)>0?this:e},Qe.prototype.and=function(e){var t=Je();return this.bitwiseTo(e,ut,t),t},Qe.prototype.or=function(e){var t=Je();return this.bitwiseTo(e,lt,t),t},Qe.prototype.xor=function(e){var t=Je();return this.bitwiseTo(e,ct,t),t},Qe.prototype.andNot=function(e){var t=Je();return this.bitwiseTo(e,ht,t),t},Qe.prototype.not=function(){for(var e=Je(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},Qe.prototype.shiftLeft=function(e){var t=Je();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},Qe.prototype.shiftRight=function(e){var t=Je();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},Qe.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+pt(this[e]);return this.s<0?this.t*this.DB:-1},Qe.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=ft(this[r]^t);return e},Qe.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)},Qe.prototype.setBit=function(e){return this.changeBit(e,lt)},Qe.prototype.clearBit=function(e){return this.changeBit(e,ht)},Qe.prototype.flipBit=function(e){return this.changeBit(e,ct)},Qe.prototype.add=function(e){var t=Je();return this.addTo(e,t),t},Qe.prototype.subtract=function(e){var t=Je();return this.subTo(e,t),t},Qe.prototype.multiply=function(e){var t=Je();return this.multiplyTo(e,t),t},Qe.prototype.divide=function(e){var t=Je();return this.divRemTo(e,t,null),t},Qe.prototype.remainder=function(e){var t=Je();return this.divRemTo(e,null,t),t},Qe.prototype.divideAndRemainder=function(e){var t=Je(),r=Je();return this.divRemTo(e,t,r),new Array(t,r)},Qe.prototype.modPow=function(e,t){var r,n,i=e.bitLength(),s=it(1);if(i<=0)return s;r=i<18?1:i<48?3:i<144?4:i<768?5:6,n=i<8?new at(t):t.isEven()?new mt(t):new ot(t);var a=new Array,o=3,u=r-1,l=(1<<r)-1;if(a[1]=n.convert(this),r>1){var c=Je();for(n.sqrTo(a[1],c);o<=l;)a[o]=Je(),n.mulTo(c,a[o-2],a[o]),o+=2}var h,p,f=e.t-1,d=!0,g=Je();for(i=st(e[f])-1;f>=0;){for(i>=u?h=e[f]>>i-u&l:(h=(e[f]&(1<<i+1)-1)<<u-i,f>0&&(h|=e[f-1]>>this.DB+i-u)),o=r;0==(1&h);)h>>=1,--o;if((i-=o)<0&&(i+=this.DB,--f),d)a[h].copyTo(s),d=!1;else{for(;o>1;)n.sqrTo(s,g),n.sqrTo(g,s),o-=2;o>0?n.sqrTo(s,g):(p=s,s=g,g=p),n.mulTo(g,a[h],s)}for(;f>=0&&0==(e[f]&1<<i);)n.sqrTo(s,g),p=s,s=g,g=p,--i<0&&(i=this.DB-1,--f)}return n.revert(s)},Qe.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return Qe.ZERO;for(var r=e.clone(),n=this.clone(),i=it(1),s=it(0),a=it(0),o=it(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(i.isEven()&&s.isEven()||(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?(a.isEven()&&o.isEven()||(a.addTo(this,a),o.subTo(e,o)),a.rShiftTo(1,a)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(a,i),s.subTo(o,s)):(n.subTo(r,n),t&&a.subTo(i,a),o.subTo(s,o))}return 0!=n.compareTo(Qe.ONE)?Qe.ZERO:o.compareTo(e)>=0?o.subtract(e):o.signum()<0?(o.addTo(e,o),o.signum()<0?o.add(e):o):o},Qe.prototype.pow=function(e){return this.exp(e,new dt)},Qe.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r},Qe.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=yt[yt.length-1]){for(t=0;t<yt.length;++t)if(r[0]==yt[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<yt.length;){for(var n=yt[t],i=t+1;i<yt.length&&n<Et;)n*=yt[i++];for(n=r.modInt(n);t<i;)if(n%yt[t++]==0)return!1}return r.millerRabin(e)},Qe.prototype.square=function(){var e=Je();return this.squareTo(e),e},vt.prototype.init=function(e){var t,r,n;for(t=0;t<256;++t)this.S[t]=t;for(r=0,t=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,n=this.S[t],this.S[t]=this.S[r],this.S[r]=n;this.i=0,this.j=0},vt.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var Tt,At,St,_t=256;
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */function bt(){!function(e){At[St++]^=255&e,At[St++]^=e>>8&255,At[St++]^=e>>16&255,At[St++]^=e>>24&255,St>=_t&&(St-=_t)}((new Date).getTime())}if(null==At){var Ct;if(At=new Array,St=0,void 0!==je&&(void 0!==je.crypto||void 0!==je.msCrypto)){var It=je.crypto||je.msCrypto;if(It.getRandomValues){var xt=new Uint8Array(32);for(It.getRandomValues(xt),Ct=0;Ct<32;++Ct)At[St++]=xt[Ct]}else if("Netscape"==Ve.appName&&Ve.appVersion<"5"){var wt=je.crypto.random(32);for(Ct=0;Ct<wt.length;++Ct)At[St++]=255&wt.charCodeAt(Ct)}}for(;St<_t;)Ct=Math.floor(65536*Math.random()),At[St++]=Ct>>>8,At[St++]=255&Ct;St=0,bt()}function Nt(){if(null==Tt){for(bt(),(Tt=new vt).init(At),St=0;St<At.length;++St)At[St]=0;St=0}return Tt.next()}function Rt(){}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Ft(e,t){return new Qe(e,t)}function Ot(e,t,r){for(var n="",i=0;n.length<t;)n+=r(String.fromCharCode.apply(String,e.concat([(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))),i+=1;return n}function Dt(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function Pt(e,t,r){for(var n="",i=0;n.length<t;)n+=r(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])),i+=1;return n}
/*! (c) Tom Wu | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function Bt(e,t){this.x=t,this.q=e}function Lt(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=null==n?Qe.ONE:n,this.zinv=null}function Mt(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new Lt(this,null,null)}Rt.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=Nt()},Dt.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},Dt.prototype.setPublic=function(e,t){if(this.isPublic=!0,this.isPrivate=!1,"string"!=typeof e)this.n=e,this.e=t;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA public key";this.n=Ft(e,16),this.e=parseInt(t,16)}},Dt.prototype.encrypt=function(e){var t=function(e,t){if(t<e.length+11)throw"Message too long for RSA";for(var r=new Array,n=e.length-1;n>=0&&t>0;){var i=e.charCodeAt(n--);i<128?r[--t]=i:i>127&&i<2048?(r[--t]=63&i|128,r[--t]=i>>6|192):(r[--t]=63&i|128,r[--t]=i>>6&63|128,r[--t]=i>>12|224)}r[--t]=0;for(var s=new Rt,a=new Array;t>2;){for(a[0]=0;0==a[0];)s.nextBytes(a);r[--t]=a[0]}return r[--t]=2,r[--t]=0,new Qe(r)}(e,this.n.bitLength()+7>>3);if(null==t)return null;var r=this.doPublic(t);if(null==r)return null;var n=r.toString(16);return 0==(1&n.length)?n:"0"+n},Dt.prototype.encryptOAEP=function(e,t,r){var n=function(e,t,r,n){var i=kt.crypto.MessageDigest,s=kt.crypto.Util,a=null;if(r||(r="sha1"),"string"==typeof r&&(a=i.getCanonicalAlgName(r),n=i.getHashLength(a),r=function(e){return er(s.hashHex(tr(e),a))}),e.length+2*n+2>t)throw"Message too long for RSA";var o,u="";for(o=0;o<t-e.length-2*n-2;o+=1)u+="\0";var l=r("")+u+""+e,c=new Array(n);(new Rt).nextBytes(c);var h=Ot(c,l.length,r),p=[];for(o=0;o<l.length;o+=1)p[o]=l.charCodeAt(o)^h.charCodeAt(o);var f=Ot(p,c.length,r),d=[0];for(o=0;o<c.length;o+=1)d[o+1]=c[o]^f.charCodeAt(o);return new Qe(d.concat(p))}(e,this.n.bitLength()+7>>3,t,r);if(null==n)return null;var i=this.doPublic(n);if(null==i)return null;var s=i.toString(16);return 0==(1&s.length)?s:"0"+s},Dt.prototype.type="RSA",Dt.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},Dt.prototype.setPrivate=function(e,t,r){if(this.isPrivate=!0,"string"!=typeof e)this.n=e,this.e=t,this.d=r;else{if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key";this.n=Ft(e,16),this.e=parseInt(t,16),this.d=Ft(r,16)}},Dt.prototype.setPrivateEx=function(e,t,r,n,i,s,a,o){if(this.isPrivate=!0,this.isPublic=!1,null==e)throw"RSASetPrivateEx N == null";if(null==t)throw"RSASetPrivateEx E == null";if(0==e.length)throw"RSASetPrivateEx N.length == 0";if(0==t.length)throw"RSASetPrivateEx E.length == 0";if(!(null!=e&&null!=t&&e.length>0&&t.length>0))throw"Invalid RSA private key in RSASetPrivateEx";this.n=Ft(e,16),this.e=parseInt(t,16),this.d=Ft(r,16),this.p=Ft(n,16),this.q=Ft(i,16),this.dmp1=Ft(s,16),this.dmq1=Ft(a,16),this.coeff=Ft(o,16)},Dt.prototype.generate=function(e,t){var r=new Rt,n=e>>1;this.e=parseInt(t,16);for(var i=new Qe(t,16),s=e/2-100,a=Qe.ONE.shiftLeft(s);;){for(;this.p=new Qe(e-n,1,r),0!=this.p.subtract(Qe.ONE).gcd(i).compareTo(Qe.ONE)||!this.p.isProbablePrime(10););for(;this.q=new Qe(n,1,r),0!=this.q.subtract(Qe.ONE).gcd(i).compareTo(Qe.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var o=this.p;this.p=this.q,this.q=o}var u=this.q.subtract(this.p).abs();if(!(u.bitLength()<s||u.compareTo(a)<=0)){var l=this.p.subtract(Qe.ONE),c=this.q.subtract(Qe.ONE),h=l.multiply(c);if(0==h.gcd(i).compareTo(Qe.ONE)&&(this.n=this.p.multiply(this.q),this.n.bitLength()==e)){this.d=i.modInverse(h),this.dmp1=this.d.mod(l),this.dmq1=this.d.mod(c),this.coeff=this.q.modInverse(this.p);break}}}this.isPrivate=!0},Dt.prototype.decrypt=function(e){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var t=Ft(e,16),r=this.doPrivate(t);return null==r?null:
/*! (c) Tom Wu, Kenji Urushima | http://www-cs-students.stanford.edu/~tjw/jsbn/
 */
function(e,t){for(var r=e.toByteArray(),n=0;n<r.length&&0==r[n];)++n;if(r.length-n!=t-1||2!=r[n])return null;for(++n;0!=r[n];)if(++n>=r.length)return null;for(var i="";++n<r.length;){var s=255&r[n];s<128?i+=String.fromCharCode(s):s>191&&s<224?(i+=String.fromCharCode((31&s)<<6|63&r[n+1]),++n):(i+=String.fromCharCode((15&s)<<12|(63&r[n+1])<<6|63&r[n+2]),n+=2)}return i}(r,this.n.bitLength()+7>>3)},Dt.prototype.decryptOAEP=function(e,t,r){if(e.length!=Math.ceil(this.n.bitLength()/4))throw new Error("wrong ctext length");var n=Ft(e,16),i=this.doPrivate(n);return null==i?null:function(e,t,r,n){var i=kt.crypto.MessageDigest,s=kt.crypto.Util,a=null;for(r||(r="sha1"),"string"==typeof r&&(a=i.getCanonicalAlgName(r),n=i.getHashLength(a),r=function(e){return er(s.hashHex(tr(e),a))}),e=e.toByteArray(),o=0;o<e.length;o+=1)e[o]&=255;for(;e.length<t;)e.unshift(0);if((e=String.fromCharCode.apply(String,e)).length<2*n+2)throw"Cipher too short";var o,u=e.substr(1,n),l=e.substr(n+1),c=Pt(l,n,r),h=[];for(o=0;o<u.length;o+=1)h[o]=u.charCodeAt(o)^c.charCodeAt(o);var p=Pt(String.fromCharCode.apply(String,h),e.length-n,r),f=[];for(o=0;o<l.length;o+=1)f[o]=l.charCodeAt(o)^p.charCodeAt(o);if((f=String.fromCharCode.apply(String,f)).substr(0,n)!==r(""))throw"Hash mismatch";var d=(f=f.substr(n)).indexOf("");if((-1!=d?f.substr(0,d).lastIndexOf("\0"):-1)+1!=d)throw"Malformed data";return f.substr(d+1)}(i,this.n.bitLength()+7>>3,t,r)},Bt.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.x.equals(e.x)},Bt.prototype.toBigInteger=function(){return this.x},Bt.prototype.negate=function(){return new Bt(this.q,this.x.negate().mod(this.q))},Bt.prototype.add=function(e){return new Bt(this.q,this.x.add(e.toBigInteger()).mod(this.q))},Bt.prototype.subtract=function(e){return new Bt(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))},Bt.prototype.multiply=function(e){return new Bt(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))},Bt.prototype.square=function(){return new Bt(this.q,this.x.square().mod(this.q))},Bt.prototype.divide=function(e){return new Bt(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))},Bt.prototype.sqrt=function(){return new Bt(this.q,this.x.sqrt().mod(this.q))},Lt.prototype.getX=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Lt.prototype.getY=function(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))},Lt.prototype.equals=function(e){return e==this||(this.isInfinity()?e.isInfinity():e.isInfinity()?this.isInfinity():!!e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(Qe.ZERO)&&e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q).equals(Qe.ZERO))},Lt.prototype.isInfinity=function(){return null==this.x&&null==this.y||this.z.equals(Qe.ZERO)&&!this.y.toBigInteger().equals(Qe.ZERO)},Lt.prototype.negate=function(){return new Lt(this.curve,this.x,this.y.negate(),this.z)},Lt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(Qe.ZERO.equals(r))return Qe.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new Qe("3"),i=this.x.toBigInteger(),s=this.y.toBigInteger(),a=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),o=a.multiply(r),u=i.multiply(a),l=t.square().multiply(this.z),c=l.subtract(u.shiftLeft(1)).multiply(e.z).subtract(o).multiply(r).mod(this.curve.q),h=u.multiply(n).multiply(t).subtract(s.multiply(o)).subtract(l.multiply(t)).multiply(e.z).add(t.multiply(o)).mod(this.curve.q),p=o.multiply(this.z).multiply(e.z).mod(this.curve.q);return new Lt(this.curve,this.curve.fromBigInteger(c),this.curve.fromBigInteger(h),p)},Lt.prototype.twice=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new Qe("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),s=this.curve.a.toBigInteger(),a=t.square().multiply(e);Qe.ZERO.equals(s)||(a=a.add(this.z.square().multiply(s)));var o=(a=a.mod(this.curve.q)).square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=a.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(a.square().multiply(a)).mod(this.curve.q),l=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new Lt(this.curve,this.curve.fromBigInteger(o),this.curve.fromBigInteger(u),l)},Lt.prototype.multiply=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new Qe("3")),i=this.negate(),s=this,a=this.curve.q.subtract(e),o=a.multiply(new Qe("3")),u=new Lt(this.curve,this.x,this.y),l=u.negate();for(t=n.bitLength()-2;t>0;--t){s=s.twice();var c=n.testBit(t);c!=r.testBit(t)&&(s=s.add(c?this:i))}for(t=o.bitLength()-2;t>0;--t){u=u.twice();var h=o.testBit(t);h!=a.testBit(t)&&(u=u.add(h?u:l))}return s},Lt.prototype.multiplyTwo=function(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),s=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=r.testBit(n)?i.add(s):i.add(this):r.testBit(n)&&(i=i.add(t)),--n;return i},Mt.prototype.getQ=function(){return this.q},Mt.prototype.getA=function(){return this.a},Mt.prototype.getB=function(){return this.b},Mt.prototype.equals=function(e){return e==this||this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)},Mt.prototype.getInfinity=function(){return this.infinity},Mt.prototype.fromBigInteger=function(e){return new Bt(this.q,e)},Mt.prototype.decodePointHex=function(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:var t=e.substr(0,2),r=(e.substr(2),this.fromBigInteger(new Qe(o,16))),n=this.getA(),i=this.getB(),s=r.square().add(n).multiply(r).add(i).sqrt();return"03"==t&&(s=s.negate()),new Lt(this,r,s);case 4:case 6:case 7:var a=(e.length-2)/2,o=e.substr(2,a),u=e.substr(a+2,a);return new Lt(this,this.fromBigInteger(new Qe(o,16)),this.fromBigInteger(new Qe(u,16)));default:return null}},
/*! (c) Stefan Thomas | https://github.com/bitcoinjs/bitcoinjs-lib
 */
Bt.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},Lt.prototype.getEncoded=function(e){var t=function(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r},r=this.getX().toBigInteger(),n=this.getY().toBigInteger(),i=t(r,32);return e?n.isEven()?i.unshift(2):i.unshift(3):(i.unshift(4),i=i.concat(t(n,32))),i},Lt.decodeFrom=function(e,t){t[0];var r=t.length-1,n=t.slice(1,1+r/2),i=t.slice(1+r/2,1+r);n.unshift(0),i.unshift(0);var s=new Qe(n),a=new Qe(i);return new Lt(e,e.fromBigInteger(s),e.fromBigInteger(a))},Lt.decodeFromHex=function(e,t){t.substr(0,2);var r=t.length-2,n=t.substr(2,r/2),i=t.substr(2+r/2,r/2),s=new Qe(n,16),a=new Qe(i,16);return new Lt(e,e.fromBigInteger(s),e.fromBigInteger(a))},Lt.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y).divide(t),n=r.square().subtract(this.x).subtract(e.x),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new Lt(this.curve,n,i)},Lt.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(Qe.valueOf(2)),t=this.curve.fromBigInteger(Qe.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new Lt(this.curve,n,i)},Lt.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new Qe("3")),i=this.negate(),s=this;for(t=n.bitLength()-2;t>0;--t){s=s.twice();var a=n.testBit(t);a!=r.testBit(t)&&(s=s.add2D(a?this:i))}return s},Lt.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),s=t.multiply(t).mod(i),a=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(i);return s.equals(a)},Lt.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},Lt.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(Qe.ONE)<0||t.compareTo(e.subtract(Qe.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(Qe.ONE)<0||r.compareTo(e.subtract(Qe.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0};
/*! Mike Samuel (c) 2009 | code.google.com/p/json-sans-eval
 */
var Ut=function(){var e=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),t=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),r={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"};function n(e,t,n){return t?r[t]:String.fromCharCode(parseInt(n,16))}var i=new String(""),s=Object.hasOwnProperty;return function(r,a){var o,u,l=r.match(e),c=l[0],h=!1;"{"===c?o={}:"["===c?o=[]:(o=[],h=!0);for(var p=[o],f=1-h,d=l.length;f<d;++f){var g;switch((c=l[f]).charCodeAt(0)){default:(g=p[0])[u||g.length]=+c,u=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf("\\")&&(c=c.replace(t,n)),g=p[0],!u){if(!(g instanceof Array)){u=c||i;break}u=g.length}g[u]=c,u=void 0;break;case 91:g=p[0],p.unshift(g[u||g.length]=[]),u=void 0;break;case 93:case 125:p.shift();break;case 102:(g=p[0])[u||g.length]=!1,u=void 0;break;case 110:(g=p[0])[u||g.length]=null,u=void 0;break;case 116:(g=p[0])[u||g.length]=!0,u=void 0;break;case 123:g=p[0],p.unshift(g[u||g.length]={}),u=void 0}}if(h){if(1!==p.length)throw new Error;o=o[0]}else if(p.length)throw new Error;if(a){var m=function(e,t){var r=e[t];if(r&&"object"==typeof r){var n=null;for(var i in r)if(s.call(r,i)&&r!==e){var o=m(r,i);void 0!==o?r[i]=o:(n||(n=[]),n.push(i))}if(n)for(var u=n.length;--u>=0;)delete r[n[u]]}return a.call(e,t,r)};o=m({"":o},"")}return o}}();void 0!==kt&&kt||(kt={}),void 0!==kt.asn1&&kt.asn1||(kt.asn1={}),kt.asn1.ASN1Util=new function(){this.integerToByteHex=function(e){var t=e.toString(16);return t.length%2==1&&(t="0"+t),t},this.bigIntToMinTwosComplementsHex=function(e){var t=e.toString(16);if("-"!=t.substr(0,1))t.length%2==1?t="0"+t:t.match(/^[0-7]/)||(t="00"+t);else{var r=t.substr(1).length;r%2==1?r+=1:t.match(/^[0-7]/)||(r+=2);for(var n="",i=0;i<r;i++)n+="f";t=new Qe(n,16).xor(e).add(Qe.ONE).toString(16).replace(/^-/,"")}return t},this.getPEMStringFromHex=function(e,t){return sr(e,t)},this.newObject=function(e){var t=kt.asn1,r=t.ASN1Object,n=t.DERBoolean,i=t.DERInteger,s=t.DERBitString,a=t.DEROctetString,o=t.DERNull,u=t.DERObjectIdentifier,l=t.DEREnumerated,c=t.DERUTF8String,h=t.DERNumericString,p=t.DERPrintableString,f=t.DERTeletexString,d=t.DERIA5String,g=t.DERUTCTime,m=t.DERGeneralizedTime,y=t.DERVisibleString,E=t.DERBMPString,v=t.DERSequence,T=t.DERSet,A=t.DERTaggedObject,S=t.ASN1Util.newObject;if(e instanceof t.ASN1Object)return e;var _=Object.keys(e);if(1!=_.length)throw new Error("key of param shall be only one.");var b=_[0];if(-1==":asn1:bool:int:bitstr:octstr:null:oid:enum:utf8str:numstr:prnstr:telstr:ia5str:utctime:gentime:visstr:bmpstr:seq:set:tag:".indexOf(":"+b+":"))throw new Error("undefined key: "+b);if("bool"==b)return new n(e[b]);if("int"==b)return new i(e[b]);if("bitstr"==b)return new s(e[b]);if("octstr"==b)return new a(e[b]);if("null"==b)return new o(e[b]);if("oid"==b)return new u(e[b]);if("enum"==b)return new l(e[b]);if("utf8str"==b)return new c(e[b]);if("numstr"==b)return new h(e[b]);if("prnstr"==b)return new p(e[b]);if("telstr"==b)return new f(e[b]);if("ia5str"==b)return new d(e[b]);if("utctime"==b)return new g(e[b]);if("gentime"==b)return new m(e[b]);if("visstr"==b)return new y(e[b]);if("bmpstr"==b)return new E(e[b]);if("asn1"==b)return new r(e[b]);if("seq"==b){for(var C=e[b],I=[],x=0;x<C.length;x++){var w=S(C[x]);I.push(w)}return new v({array:I})}if("set"==b){for(C=e[b],I=[],x=0;x<C.length;x++){w=S(C[x]);I.push(w)}return new T({array:I})}if("tag"==b){var N=e[b];if("[object Array]"===Object.prototype.toString.call(N)&&3==N.length){var R=S(N[2]);return new A({tag:N[0],explicit:N[1],obj:R})}return new A(N)}},this.jsonToASN1HEX=function(e){return this.newObject(e).tohex()}},kt.asn1.ASN1Util.oidHexToInt=function(e){for(var t="",r=parseInt(e.substr(0,2),16),n=(t=Math.floor(r/40)+"."+r%40,""),i=2;i<e.length;i+=2){var s=("00000000"+parseInt(e.substr(i,2),16).toString(2)).slice(-8);if(n+=s.substr(1,7),"0"==s.substr(0,1))t=t+"."+new Qe(n,2).toString(10),n=""}return t},kt.asn1.ASN1Util.oidIntToHex=function(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=new Qe(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var s="",a=0;a<i;a++)s+="0";n=s+n;for(a=0;a<n.length-1;a+=7){var o=n.substr(a,7);a!=n.length-7&&(o="1"+o),r+=t(parseInt(o,2))}return r};if(!e.match(/^[0-9.]+$/))throw"malformed oid string: "+e;var n="",i=e.split("."),s=40*parseInt(i[0])+parseInt(i[1]);n+=t(s),i.splice(0,2);for(var a=0;a<i.length;a++)n+=r(i[a]);return n},kt.asn1.ASN1Object=function(e){this.params=null,this.getLengthHexFromValue=function(){if(void 0===this.hV||null==this.hV)throw new Error("this.hV is null or undefined");if(this.hV.length%2==1)throw new Error("value hex must be even length: n=0,v="+this.hV);var e=this.hV.length/2,t=e.toString(16);if(t.length%2==1&&(t="0"+t),e<128)return t;var r=t.length/2;if(r>15)throw new Error("ASN.1 length too long to represent by 8x: n = "+e.toString(16));return(128+r).toString(16)+t},this.tohex=function(){return(null==this.hTLV||this.isModified)&&(this.hV=this.getFreshValueHex(),this.hL=this.getLengthHexFromValue(),this.hTLV=this.hT+this.hL+this.hV,this.isModified=!1),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.getValueHex=function(){return this.tohex(),this.hV},this.getFreshValueHex=function(){return""},this.setByParam=function(e){this.params=e},null!=e&&null!=e.tlv&&(this.hTLV=e.tlv,this.isModified=!1)},kt.asn1.DERAbstractString=function(e){kt.asn1.DERAbstractString.superclass.constructor.call(this);this.getString=function(){return this.s},this.setString=function(e){this.hTLV=null,this.isModified=!0,this.s=e,this.hV=Jt(this.s).toLowerCase()},this.setStringHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e?this.setString(e):void 0!==e.str?this.setString(e.str):void 0!==e.hex&&this.setStringHex(e.hex))},Nr(kt.asn1.DERAbstractString,kt.asn1.ASN1Object),kt.asn1.DERAbstractTime=function(e){kt.asn1.DERAbstractTime.superclass.constructor.call(this);this.localDateToUTC=function(e){var t=e.getTime()+6e4*e.getTimezoneOffset();return new Date(t)},this.formatDate=function(e,t,r){var n=this.zeroPadding,i=this.localDateToUTC(e),s=String(i.getFullYear());"utc"==t&&(s=s.substr(2,2));var a=s+n(String(i.getMonth()+1),2)+n(String(i.getDate()),2)+n(String(i.getHours()),2)+n(String(i.getMinutes()),2)+n(String(i.getSeconds()),2);if(!0===r){var o=i.getMilliseconds();if(0!=o){var u=n(String(o),3);a=a+"."+(u=u.replace(/[0]+$/,""))}}return a+"Z"},this.zeroPadding=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},this.setByParam=function(e){this.hV=null,this.hTLV=null,this.params=e},this.getString=function(){},this.setString=function(e){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.str=e},this.setByDate=function(e){this.hTLV=null,this.isModified=!0,null==this.params&&(this.params={}),this.params.date=e},this.setByDateValue=function(e,t,r,n,i,s){var a=new Date(Date.UTC(e,t-1,r,n,i,s,0));this.setByDate(a)},this.getFreshValueHex=function(){return this.hV}},Nr(kt.asn1.DERAbstractTime,kt.asn1.ASN1Object),kt.asn1.DERAbstractStructured=function(e){kt.asn1.DERAbstractString.superclass.constructor.call(this);this.setByASN1ObjectArray=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array=e},this.appendASN1Object=function(e){this.hTLV=null,this.isModified=!0,this.asn1Array.push(e)},this.asn1Array=new Array,void 0!==e&&void 0!==e.array&&(this.asn1Array=e.array)},Nr(kt.asn1.DERAbstractStructured,kt.asn1.ASN1Object),kt.asn1.DERBoolean=function(e){kt.asn1.DERBoolean.superclass.constructor.call(this),this.hT="01",this.hTLV=0==e?"010100":"0101ff"},Nr(kt.asn1.DERBoolean,kt.asn1.ASN1Object),kt.asn1.DERInteger=function(e){kt.asn1.DERInteger.superclass.constructor.call(this),this.hT="02",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=kt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new Qe(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.bigint?this.setByBigInteger(e.bigint):void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},Nr(kt.asn1.DERInteger,kt.asn1.ASN1Object),kt.asn1.DERBitString=function(e){if(void 0!==e&&void 0!==e.obj){var t=kt.asn1.ASN1Util.newObject(e.obj);e.hex="00"+t.tohex()}kt.asn1.DERBitString.superclass.constructor.call(this),this.hT="03",this.setHexValueIncludingUnusedBits=function(e){this.hTLV=null,this.isModified=!0,this.hV=e},this.setUnusedBitsAndHexValue=function(e,t){if(e<0||7<e)throw"unused bits shall be from 0 to 7: u = "+e;var r="0"+e;this.hTLV=null,this.isModified=!0,this.hV=r+t},this.setByBinaryString=function(e){var t=8-(e=e.replace(/0+$/,"")).length%8;8==t&&(t=0),e+="0000000".substr(0,t);for(var r="",n=0;n<e.length-1;n+=8){var i=e.substr(n,8),s=parseInt(i,2).toString(16);1==s.length&&(s="0"+s),r+=s}this.hTLV=null,this.isModified=!0,this.hV="0"+t+r},this.setByBooleanArray=function(e){for(var t="",r=0;r<e.length;r++)1==e[r]?t+="1":t+="0";this.setByBinaryString(t)},this.newFalseArray=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=!1;return t},this.getFreshValueHex=function(){return this.hV},void 0!==e&&("string"==typeof e&&e.toLowerCase().match(/^[0-9a-f]+$/)?this.setHexValueIncludingUnusedBits(e):void 0!==e.hex?this.setHexValueIncludingUnusedBits(e.hex):void 0!==e.bin?this.setByBinaryString(e.bin):void 0!==e.array&&this.setByBooleanArray(e.array))},Nr(kt.asn1.DERBitString,kt.asn1.ASN1Object),kt.asn1.DEROctetString=function(e){if(void 0!==e&&void 0!==e.obj){var t=kt.asn1.ASN1Util.newObject(e.obj);e.hex=t.tohex()}kt.asn1.DEROctetString.superclass.constructor.call(this,e),this.hT="04"},Nr(kt.asn1.DEROctetString,kt.asn1.DERAbstractString),kt.asn1.DERNull=function(){kt.asn1.DERNull.superclass.constructor.call(this),this.hT="05",this.hTLV="0500"},Nr(kt.asn1.DERNull,kt.asn1.ASN1Object),kt.asn1.DERObjectIdentifier=function(e){kt.asn1.DERObjectIdentifier.superclass.constructor.call(this),this.hT="06",this.setValueHex=function(e){this.hTLV=null,this.isModified=!0,this.s=null,this.hV=e},this.setValueOidString=function(e){var t=Sr(e);if(null==t)throw new Error("malformed oid string: "+e);this.hTLV=null,this.isModified=!0,this.s=null,this.hV=t},this.setValueName=function(e){var t=kt.asn1.x509.OID.name2oid(e);if(""===t)throw new Error("DERObjectIdentifier oidName undefined: "+e);this.setValueOidString(t)},this.setValueNameOrOid=function(e){e.match(/^[0-2].[0-9.]+$/)?this.setValueOidString(e):this.setValueName(e)},this.getFreshValueHex=function(){return this.hV},this.setByParam=function(e){"string"==typeof e?this.setValueNameOrOid(e):void 0!==e.oid?this.setValueNameOrOid(e.oid):void 0!==e.name?this.setValueNameOrOid(e.name):void 0!==e.hex&&this.setValueHex(e.hex)},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.DERObjectIdentifier,kt.asn1.ASN1Object),kt.asn1.DEREnumerated=function(e){kt.asn1.DEREnumerated.superclass.constructor.call(this),this.hT="0a",this.setByBigInteger=function(e){this.hTLV=null,this.isModified=!0,this.hV=kt.asn1.ASN1Util.bigIntToMinTwosComplementsHex(e)},this.setByInteger=function(e){var t=new Qe(String(e),10);this.setByBigInteger(t)},this.setValueHex=function(e){this.hV=e},this.getFreshValueHex=function(){return this.hV},void 0!==e&&(void 0!==e.int?this.setByInteger(e.int):"number"==typeof e?this.setByInteger(e):void 0!==e.hex&&this.setValueHex(e.hex))},Nr(kt.asn1.DEREnumerated,kt.asn1.ASN1Object),kt.asn1.DERUTF8String=function(e){kt.asn1.DERUTF8String.superclass.constructor.call(this,e),this.hT="0c"},Nr(kt.asn1.DERUTF8String,kt.asn1.DERAbstractString),kt.asn1.DERNumericString=function(e){kt.asn1.DERNumericString.superclass.constructor.call(this,e),this.hT="12"},Nr(kt.asn1.DERNumericString,kt.asn1.DERAbstractString),kt.asn1.DERPrintableString=function(e){kt.asn1.DERPrintableString.superclass.constructor.call(this,e),this.hT="13"},Nr(kt.asn1.DERPrintableString,kt.asn1.DERAbstractString),kt.asn1.DERTeletexString=function(e){kt.asn1.DERTeletexString.superclass.constructor.call(this,e),this.hT="14"},Nr(kt.asn1.DERTeletexString,kt.asn1.DERAbstractString),kt.asn1.DERIA5String=function(e){kt.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="16"},Nr(kt.asn1.DERIA5String,kt.asn1.DERAbstractString),kt.asn1.DERVisibleString=function(e){kt.asn1.DERIA5String.superclass.constructor.call(this,e),this.hT="1a"},Nr(kt.asn1.DERVisibleString,kt.asn1.DERAbstractString),kt.asn1.DERBMPString=function(e){kt.asn1.DERBMPString.superclass.constructor.call(this,e),this.hT="1e"},Nr(kt.asn1.DERBMPString,kt.asn1.DERAbstractString),kt.asn1.DERUTCTime=function(e){kt.asn1.DERUTCTime.superclass.constructor.call(this,e),this.hT="17",this.params=void 0,this.getFreshValueHex=function(){var e=this.params;if(null==this.params&&(e={date:new Date}),"string"==typeof e){if(!e.match(/^[0-9]{12}Z$/)&&!e.match(/^[0-9]{12}\.[0-9]+Z$/))throw new Error("malformed string for UTCTime: "+e);this.hV=qt(e)}else if(null!=e.str)this.hV=qt(e.str);else if(null==e.date&&1==e.millis){var t=new Date;this.hV=qt(this.formatDate(t,"utc",!0))}else if(null!=e.date&&e.date instanceof Date){var r=!0===e.millis;this.hV=qt(this.formatDate(e.date,"utc",r))}else e instanceof Date&&(this.hV=qt(this.formatDate(e,"utc")));if(null==this.hV)throw new Error("parameter not specified properly for UTCTime");return this.hV},null!=e&&this.setByParam(e)},Nr(kt.asn1.DERUTCTime,kt.asn1.DERAbstractTime),kt.asn1.DERGeneralizedTime=function(e){kt.asn1.DERGeneralizedTime.superclass.constructor.call(this,e),this.hT="18",this.params=e,this.getFreshValueHex=function(){var e=this.params;if(null==this.params&&(e={date:new Date}),"string"==typeof e){if(!e.match(/^[0-9]{14}Z$/)&&!e.match(/^[0-9]{14}\.[0-9]+Z$/))throw new Error("malformed string for GeneralizedTime: "+e);this.hV=qt(e)}else if(null!=e.str)this.hV=qt(e.str);else if(null==e.date&&1==e.millis){var t=new Date;this.hV=qt(this.formatDate(t,"gen",!0))}else if(null!=e.date&&e.date instanceof Date){var r=!0===e.millis;this.hV=qt(this.formatDate(e.date,"gen",r))}else e instanceof Date&&(this.hV=qt(this.formatDate(e,"gen")));if(null==this.hV)throw new Error("parameter not specified properly for GeneralizedTime");return this.hV},null!=e&&this.setByParam(e)},Nr(kt.asn1.DERGeneralizedTime,kt.asn1.DERAbstractTime),kt.asn1.DERSequence=function(e){kt.asn1.DERSequence.superclass.constructor.call(this,e),this.hT="30",this.getFreshValueHex=function(){for(var e="",t=0;t<this.asn1Array.length;t++){e+=this.asn1Array[t].tohex()}return this.hV=e,this.hV}},Nr(kt.asn1.DERSequence,kt.asn1.DERAbstractStructured),kt.asn1.DERSet=function(e){kt.asn1.DERSet.superclass.constructor.call(this,e),this.hT="31",this.sortFlag=!0,this.getFreshValueHex=function(){for(var e=new Array,t=0;t<this.asn1Array.length;t++){var r=this.asn1Array[t];e.push(r.tohex())}return 1==this.sortFlag&&e.sort(),this.hV=e.join(""),this.hV},void 0!==e&&void 0!==e.sortflag&&0==e.sortflag&&(this.sortFlag=!1)},Nr(kt.asn1.DERSet,kt.asn1.DERAbstractStructured),kt.asn1.DERTaggedObject=function(e){kt.asn1.DERTaggedObject.superclass.constructor.call(this);var t=kt.asn1,r=jt,n=r.getV,i=(r.isASN1HEX,t.ASN1Util.newObject);this.hT="a0",this.hV="",this.isExplicit=!0,this.asn1Object=null,this.params={tag:"a0",explicit:!0},this.setASN1Object=function(e,t,r){this.params={tag:t,explicit:e,obj:r}},this.getFreshValueHex=function(){var e=this.params;if(null==e.explicit&&(e.explicit=!0),null!=e.tage&&(e.tag=e.tage,e.explicit=!0),null!=e.tagi&&(e.tag=e.tagi,e.explicit=!1),null!=e.str)this.hV=Jt(e.str);else if(null!=e.hex)this.hV=e.hex;else{if(null==e.obj)throw new Error("str, hex nor obj not specified");var r;e.obj instanceof t.ASN1Object?r=e.obj.tohex():"object"==typeof e.obj&&(r=i(e.obj).tohex()),e.explicit?this.hV=r:this.hV=n(r,0)}return null==e.tag&&(e.tag="a0"),this.hT=e.tag,this.hTLV=null,this.isModified=!0,this.hV},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.DERTaggedObject,kt.asn1.ASN1Object);var kt,Ht,Vt,jt=new function(){};function Kt(e){for(var t=new Array,r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}function Gt(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function Wt(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function qt(e){return Wt(Kt(e))}function zt(e){return e=(e=(e=e.replace(/\=/g,"")).replace(/\+/g,"-")).replace(/\//g,"_")}function Yt(e){return e.length%4==2?e+="==":e.length%4==3&&(e+="="),e=(e=e.replace(/-/g,"+")).replace(/_/g,"/")}function Xt(e){return e.length%2==1&&(e="0"+e),zt(ze(e))}function Qt(e){return Ye(Yt(e))}function Jt(e){return lr(Er(e)).toLowerCase()}function Zt(e){try{return decodeURIComponent(cr(e))}catch(e){return null}}function $t(e){return Zt(function(e){for(var t=e.match(/.{1,2}/g),r=[],n=0;n<t.length;n++){var i=parseInt(t[n],16);161<=i&&i<=191?(r.push("c2"),r.push(t[n])):192<=i&&i<=255?(r.push("c3"),r.push((i-64).toString(16))):r.push(t[n])}return r.join("")}(e))}function er(e){for(var t="",r=0;r<e.length-1;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t}function tr(e){for(var t="",r=0;r<e.length;r++)t+=("0"+e.charCodeAt(r).toString(16)).slice(-2);return t}function rr(e){return ze(e)}function nr(e){var t=rr(e).replace(/(.{64})/g,"$1\r\n");return t=t.replace(/\r\n$/,"")}function ir(e){return Ye(e.replace(/[^0-9A-Za-z\/+=]*/g,""))}function sr(e,t){return"-----BEGIN "+t+"-----\r\n"+nr(e)+"\r\n-----END "+t+"-----\r\n"}function ar(e,t){if(-1==e.indexOf("-----BEGIN "))throw"can't find PEM header: "+t;return ir(e=void 0!==t?(e=e.replace(new RegExp("^[^]*-----BEGIN "+t+"-----"),"")).replace(new RegExp("-----END "+t+"-----[^]*$"),""):(e=e.replace(/^[^]*-----BEGIN [^-]+-----/,"")).replace(/-----END [^-]+-----[^]*$/,""))}function or(e){var t,r,n,i,s,a,o,u,l,c,h;if(h=e.match(/^(\d{2}|\d{4})(\d\d)(\d\d)(\d\d)(\d\d)(\d\d)(|\.\d+)Z$/))return u=h[1],t=parseInt(u),2===u.length&&(50<=t&&t<100?t=1900+t:0<=t&&t<50&&(t=2e3+t)),r=parseInt(h[2])-1,n=parseInt(h[3]),i=parseInt(h[4]),s=parseInt(h[5]),a=parseInt(h[6]),o=0,""!==(l=h[7])&&(c=(l.substr(1)+"00").substr(0,3),o=parseInt(c)),Date.UTC(t,r,n,i,s,a,o);throw new Error("unsupported zulu format: "+e)}function ur(e){return Math.round(or(e)/1e3)}function lr(e){return e.replace(/%/g,"")}function cr(e){return e.replace(/(..)/g,"%$1")}function hr(e){var t="malformed IPv6 address";if(!e.match(/^[0-9A-Fa-f:]+$/))throw t;var r=(e=e.toLowerCase()).split(":").length-1;if(r<2)throw t;var n=":".repeat(7-r+2),i=(e=e.replace("::",n)).split(":");if(8!=i.length)throw t;for(var s=0;s<8;s++)i[s]=("0000"+i[s]).slice(-4);return i.join("")}function pr(e){if(!e.match(/^[0-9A-Fa-f]{32}$/))throw new Error("malformed IPv6 address: "+e);var t=(e=e.toLowerCase()).match(/.{1,4}/g);t=t.map((function(e){return e.replace(/^0+/,"")})),t=t.map((function(e){return""==e?"0":e}));var r=(e=":"+t.join(":")+":").match(/:(0:){2,}/g);if(null==r)return e.slice(1,-1);var n=r.sort().slice(-1)[0];return"::"!=(e=e.replace(n.substr(0,n.length-1),":")).substr(0,2)&&(e=e.substr(1)),"::"!=e.substr(-2,2)&&(e=e.substr(0,e.length-1)),e}function fr(e){var t=new Error("malformed hex value");if(!e.match(/^([0-9A-Fa-f][0-9A-Fa-f]){1,}$/))throw t;if(8==e.length){try{return parseInt(e.substr(0,2),16)+"."+parseInt(e.substr(2,2),16)+"."+parseInt(e.substr(4,2),16)+"."+parseInt(e.substr(6,2),16)}catch(e){throw t}}else{if(16!=e.length){if(32==e.length)return pr(e);if(64==e.length){try{return pr(e.substr(0,32))+"/"+dr(e.substr(32))}catch(e){throw t}return}return e}try{return fr(e.substr(0,8))+"/"+dr(e.substr(8))}catch(e){throw t}}}function dr(e){var t,r=new Error("malformed mask");try{t=new Qe(e,16).toString(2)}catch(e){throw r}if(!t.match(/^1*0*$/))throw r;return t.replace(/0+$/,"").length}function gr(e){var t=new Error("malformed IP address");if(!(e=e.toLowerCase(e)).match(/^[0-9a-f.:/]+$/))throw t;if(!e.match(/^[0-9.]+$/)){var r;if(e.match(/^[0-9.]+\/[0-9]+$/))return gr((r=e.split("/"))[0])+mr(parseInt(r[1]),32);if(e.match(/^[0-9a-f:]+$/)&&-1!==e.indexOf(":"))return hr(e);if(e.match(/^[0-9a-f:]+\/[0-9]+$/)&&-1!==e.indexOf(":"))return hr((r=e.split("/"))[0])+mr(parseInt(r[1]),128);throw t}var n=e.split(".");if(4!==n.length)throw t;var i="";try{for(var s=0;s<4;s++){i+=("0"+parseInt(n[s]).toString(16)).slice(-2)}return i}catch(e){throw t}}function mr(e,t){return 32==t&&0==e?"00000000":128==t&&0==e?"00000000000000000000000000000000":new Qe(Array(e+1).join("1")+Array(t-e+1).join("0"),2).toString(16)}function yr(e){var t=e.match(/.{4}/g).map((function(e){var t=parseInt(e.substr(0,2),16),r=parseInt(e.substr(2),16);if(0==t&r<128)return String.fromCharCode(r);if(t<8){var n=128|63&r;return Zt((192|(7&t)<<3|(192&r)>>6).toString(16)+n.toString(16))}n=128|(15&t)<<2|(192&r)>>6;var i=128|63&r;return Zt((224|(240&t)>>4).toString(16)+n.toString(16)+i.toString(16))}));return t.join("")}function Er(e){for(var t=encodeURIComponent(e),r="",n=0;n<t.length;n++)"%"==t[n]?(r+=t.substr(n,3),n+=2):r=r+"%"+qt(t[n]);return r}function vr(e){return!(e.length%2!=0||!e.match(/^[0-9a-f]+$/)&&!e.match(/^[0-9A-F]+$/))}function Tr(e){return!!e.match(/^[0-9A-Za-z-_.]+$/)}function Ar(e){return e.length%2==1?"0"+e:e.substr(0,1)>"7"?"00"+e:e}jt.getLblen=function(e,t){if("8"!=e.substr(t+2,1))return 1;var r=parseInt(e.substr(t+3,1));return 0==r?-1:0<r&&r<10?r+1:-2},jt.getL=function(e,t){var r=jt.getLblen(e,t);return r<1?"":e.substr(t+2,2*r)},jt.getVblen=function(e,t){var r;return""==(r=jt.getL(e,t))?-1:("8"===r.substr(0,1)?new Qe(r.substr(2),16):new Qe(r,16)).intValue()},jt.getVidx=function(e,t){var r=jt.getLblen(e,t);return r<0?r:t+2*(r+1)},jt.getV=function(e,t){var r=jt.getVidx(e,t),n=jt.getVblen(e,t);return e.substr(r,2*n)},jt.getTLV=function(e,t){return e.substr(t,2)+jt.getL(e,t)+jt.getV(e,t)},jt.getTLVblen=function(e,t){return 2+2*jt.getLblen(e,t)+2*jt.getVblen(e,t)},jt.getNextSiblingIdx=function(e,t){return jt.getVidx(e,t)+2*jt.getVblen(e,t)},jt.getChildIdx=function(e,t){var r,n,i,s=jt,a=[];r=s.getVidx(e,t),n=2*s.getVblen(e,t),"03"==e.substr(t,2)&&(r+=2,n-=2),i=0;for(var o=r;i<=n;){var u=s.getTLVblen(e,o);if((i+=u)<=n&&a.push(o),o+=u,i>=n)break}return a},jt.getNthChildIdx=function(e,t,r){return jt.getChildIdx(e,t)[r]},jt.getIdxbyList=function(e,t,r,n){var i,s,a=jt;return 0==r.length?void 0!==n&&e.substr(t,2)!==n?-1:t:(i=r.shift())>=(s=a.getChildIdx(e,t)).length?-1:a.getIdxbyList(e,s[i],r,n)},jt.getIdxbyListEx=function(e,t,r,n){var i,s,a=jt;if(0==r.length)return void 0!==n&&e.substr(t,2)!==n?-1:t;i=r.shift(),s=a.getChildIdx(e,t);for(var o=0,u=0;u<s.length;u++){var l=e.substr(s[u],2);if("number"==typeof i&&!a.isContextTag(l)&&o==i||"string"==typeof i&&a.isContextTag(l,i))return a.getIdxbyListEx(e,s[u],r,n);a.isContextTag(l)||o++}return-1},jt.getTLVbyList=function(e,t,r,n){var i=jt,s=i.getIdxbyList(e,t,r,n);return-1==s||s>=e.length?null:i.getTLV(e,s)},jt.getTLVbyListEx=function(e,t,r,n){var i=jt,s=i.getIdxbyListEx(e,t,r,n);return-1==s?null:i.getTLV(e,s)},jt.getVbyList=function(e,t,r,n,i){var s,a,o=jt;return-1==(s=o.getIdxbyList(e,t,r,n))||s>=e.length?null:(a=o.getV(e,s),!0===i&&(a=a.substr(2)),a)},jt.getVbyListEx=function(e,t,r,n,i){var s,a,o=jt;return-1==(s=o.getIdxbyListEx(e,t,r,n))?null:(a=o.getV(e,s),"03"==e.substr(s,2)&&!1!==i&&(a=a.substr(2)),a)},jt.getInt=function(e,t,r){null==r&&(r=-1);try{var n=e.substr(t,2);if("02"!=n&&"03"!=n)return r;var i=jt.getV(e,t);return"02"==n?parseInt(i,16):Cr(i)}catch(e){return r}},jt.getOID=function(e,t,r){null==r&&(r=null);try{return"06"!=e.substr(t,2)?r:_r(jt.getV(e,t))}catch(e){return r}},jt.getOIDName=function(e,t,r){null==r&&(r=null);try{var n=jt.getOID(e,t,r);if(n==r)return r;var i=kt.asn1.x509.OID.oid2name(n);return""==i?n:i}catch(e){return r}},jt.getString=function(e,t,r){null==r&&(r=null);try{return er(jt.getV(e,t))}catch(e){return r}},jt.hextooidstr=function(e){var t=function(e,t){return e.length>=t?e:new Array(t-e.length+1).join("0")+e},r=[],n=e.substr(0,2),i=parseInt(n,16);r[0]=new String(Math.floor(i/40)),r[1]=new String(i%40);for(var s=e.substr(2),a=[],o=0;o<s.length/2;o++)a.push(parseInt(s.substr(2*o,2),16));var u=[],l="";for(o=0;o<a.length;o++)128&a[o]?l+=t((127&a[o]).toString(2),7):(l+=t((127&a[o]).toString(2),7),u.push(new String(parseInt(l,2))),l="");var c=r.join(".");return u.length>0&&(c=c+"."+u.join(".")),c},jt.dump=function(e,t,r,n){var i=jt,s=i.getV,a=i.dump,o=i.getChildIdx,u=e;e instanceof kt.asn1.ASN1Object&&(u=e.tohex());var l=function(e,t){return e.length<=2*t?e:e.substr(0,t)+"..(total "+e.length/2+"bytes).."+e.substr(e.length-t,t)};void 0===t&&(t={ommit_long_octet:32}),void 0===r&&(r=0),void 0===n&&(n="");var c,h=t.ommit_long_octet;if("01"==(c=u.substr(r,2)))return"00"==(p=s(u,r))?n+"BOOLEAN FALSE\n":n+"BOOLEAN TRUE\n";if("02"==c)return n+"INTEGER "+l(p=s(u,r),h)+"\n";if("03"==c){var p=s(u,r);if(i.isASN1HEX(p.substr(2))){var f=n+"BITSTRING, encapsulates\n";return f+=a(p.substr(2),t,0,n+"  ")}return n+"BITSTRING "+l(p,h)+"\n"}if("04"==c){p=s(u,r);if(i.isASN1HEX(p)){f=n+"OCTETSTRING, encapsulates\n";return f+=a(p,t,0,n+"  ")}return n+"OCTETSTRING "+l(p,h)+"\n"}if("05"==c)return n+"NULL\n";if("06"==c){var d=s(u,r),g=kt.asn1.ASN1Util.oidHexToInt(d),m=kt.asn1.x509.OID.oid2name(g),y=g.replace(/\./g," ");return""!=m?n+"ObjectIdentifier "+m+" ("+y+")\n":n+"ObjectIdentifier ("+y+")\n"}if("0a"==c)return n+"ENUMERATED "+parseInt(s(u,r))+"\n";if("0c"==c)return n+"UTF8String '"+Zt(s(u,r))+"'\n";if("13"==c)return n+"PrintableString '"+Zt(s(u,r))+"'\n";if("14"==c)return n+"TeletexString '"+Zt(s(u,r))+"'\n";if("16"==c)return n+"IA5String '"+Zt(s(u,r))+"'\n";if("17"==c)return n+"UTCTime "+Zt(s(u,r))+"\n";if("18"==c)return n+"GeneralizedTime "+Zt(s(u,r))+"\n";if("1a"==c)return n+"VisualString '"+Zt(s(u,r))+"'\n";if("1e"==c)return n+"BMPString '"+yr(s(u,r))+"'\n";if("30"==c){if("3000"==u.substr(r,4))return n+"SEQUENCE {}\n";f=n+"SEQUENCE\n";var E=t;if((2==(A=o(u,r)).length||3==A.length)&&"06"==u.substr(A[0],2)&&"04"==u.substr(A[A.length-1],2)){m=i.oidname(s(u,A[0]));var v=JSON.parse(JSON.stringify(t));v.x509ExtName=m,E=v}for(var T=0;T<A.length;T++)f+=a(u,E,A[T],n+"  ");return f}if("31"==c){f=n+"SET\n";var A=o(u,r);for(T=0;T<A.length;T++)f+=a(u,t,A[T],n+"  ");return f}if(0!=(128&(c=parseInt(c,16)))){var S=31&c;if(0!=(32&c)){for(f=n+"["+S+"]\n",A=o(u,r),T=0;T<A.length;T++)f+=a(u,t,A[T],n+"  ");return f}p=s(u,r);if(jt.isASN1HEX(p)){var f=n+"["+S+"]\n";return f+=a(p,t,0,n+"  ")}return("68747470"==p.substr(0,8)||"subjectAltName"===t.x509ExtName&&2==S)&&(p=Zt(p)),f=n+"["+S+"] "+p+"\n"}return n+"UNKNOWN("+c+") "+s(u,r)+"\n"},jt.parse=function(e){var t=jt,r=t.parse,n=t.isASN1HEX,i=t.getV,s=t.getTLV,a=t.getChildIdx,o=kt.asn1,u=o.ASN1Util.oidHexToInt,l=o.x509.OID.oid2name,c=Zt,h=yr,p=$t,f={"0c":"utf8str",12:"numstr",13:"prnstr",14:"telstr",16:"ia5str",17:"utctime",18:"gentime","1a":"visstr","1e":"bmpstr",30:"seq",31:"set"},d=e.substr(0,2),g={},m=i(e,0);if("01"==d)return"0101ff"==e?{bool:!0}:{bool:!1};if("02"==d)return{int:{hex:m}};if("03"==d)try{if("00"!=m.substr(0,2))throw"not encap";var y=m.substr(2);if(!n(y))throw"not encap";return{bitstr:{obj:r(y)}}}catch(e){var E=null;return m.length<=10&&(E=xr(m)),null==E?{bitstr:{hex:m}}:{bitstr:{bin:E}}}else if("04"==d)try{if(!n(m))throw"not encap";return{octstr:{obj:r(m)}}}catch(e){return{octstr:{hex:m}}}else{if("05"==d)return{null:""};if("06"==d){var v=u(m),T=l(v);return""==T?{oid:v}:{oid:T}}if("0a"==d)return m.length>4?{enum:{hex:m}}:{enum:parseInt(m,16)};if("30"==d||"31"==d)return g[f[d]]=function(e){for(var t=[],n=a(e,0),i=0;i<n.length;i++){var o=n[i],u=s(e,o),l=r(u);t.push(l)}return t}(e),g;if("14"==d){var A=p(m);return g[f[d]]={str:A},g}if("1e"==d){A=h(m);return g[f[d]]={str:A},g}if(-1!=":0c:12:13:16:17:18:1a:".indexOf(d)){A=c(m);return g[f[d]]={str:A},g}if(d.match(/^8[0-9]$/))return null==(A=c(m))|""==A||null!=A.match(/[\x00-\x1F\x7F-\x9F]/)||null!=A.match(/[\u0000-\u001F\u0080–\u009F]/)?{tag:{tag:d,explicit:!1,hex:m}}:{tag:{tag:d,explicit:!1,str:A}};if(!d.match(/^a[0-9]$/)){var S=new kt.asn1.ASN1Object;return S.hV=m,{asn1:{tlv:d+S.getLengthHexFromValue()+m}}}try{if(!n(m))throw new Error("not encap");return{tag:{tag:d,explicit:!0,obj:r(m)}}}catch(e){return{tag:{tag:d,explicit:!0,hex:m}}}}},jt.isContextTag=function(e,t){var r,n;e=e.toLowerCase();try{r=parseInt(e,16)}catch(e){return-1}if(void 0===t)return 128==(192&r);try{return null!=t.match(/^\[[0-9]+\]$/)&&(!((n=parseInt(t.substr(1,t.length-1),10))>31)&&(128==(192&r)&&(31&r)==n))}catch(e){return!1}},jt.isASN1HEX=function(e){var t=jt;if(e.length%2==1)return!1;var r=t.getVblen(e,0),n=e.substr(0,2),i=t.getL(e,0);return e.length-n.length-i.length==2*r},jt.checkStrictDER=function(e,t,r,n,i){var s=jt;if(void 0===r){if("string"!=typeof e)throw new Error("not hex string");if(e=e.toLowerCase(),!kt.lang.String.isHex(e))throw new Error("not hex string");r=e.length,i=(n=e.length/2)<128?1:Math.ceil(n.toString(16))+1}if(s.getL(e,t).length>2*i)throw new Error("L of TLV too long: idx="+t);var a=s.getVblen(e,t);if(a>n)throw new Error("value of L too long than hex: idx="+t);var o=s.getTLV(e,t),u=o.length-2-s.getL(e,t).length;if(u!==2*a)throw new Error("V string length and L's value not the same:"+u+"/"+2*a);if(0===t&&e.length!=o.length)throw new Error("total length and TLV length unmatch:"+e.length+"!="+o.length);var l=e.substr(t,2);if("02"===l){var c=s.getVidx(e,t);if("00"==e.substr(c,2)&&e.charCodeAt(c+2)<56)throw new Error("not least zeros for DER INTEGER")}if(32&parseInt(l,16)){for(var h=s.getVblen(e,t),p=0,f=s.getChildIdx(e,t),d=0;d<f.length;d++){p+=s.getTLV(e,f[d]).length,s.checkStrictDER(e,f[d],r,n,i)}if(2*h!=p)throw new Error("sum of children's TLV length and L unmatch: "+2*h+"!="+p)}},jt.oidname=function(e){var t=kt.asn1;kt.lang.String.isHex(e)&&(e=t.ASN1Util.oidHexToInt(e));var r=t.x509.OID.oid2name(e);return""===r&&(r=e),r},void 0!==kt&&kt||(kt={}),void 0!==kt.asn1&&kt.asn1||(kt.asn1={}),void 0!==kt.asn1.x509&&kt.asn1.x509||(kt.asn1.x509={}),kt.asn1.x509.Certificate=function(e){kt.asn1.x509.Certificate.superclass.constructor.call(this);var t=kt.asn1,r=t.DERBitString,n=t.DERSequence,i=t.x509,s=i.TBSCertificate,a=i.AlgorithmIdentifier;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.sigalg;null!=e.sigalg.name&&(t=e.sigalg.name);var r=e.tbsobj.tohex(),n=new kt.crypto.Signature({alg:t});n.init(e.cakey),n.updateHex(r),e.sighex=n.sign()},this.getPEM=function(){return sr(this.tohex(),"CERTIFICATE")},this.tohex=function(){var e=this.params;if(null!=e.tbsobj&&null!=e.tbsobj||(e.tbsobj=new s(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new a({name:e.sigalg})),t.push(new r({hex:"00"+e.sighex})),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&(this.params=e)},Nr(kt.asn1.x509.Certificate,kt.asn1.ASN1Object),kt.asn1.x509.TBSCertificate=function(e){kt.asn1.x509.TBSCertificate.superclass.constructor.call(this);var t=kt.asn1,r=t.x509,n=t.DERTaggedObject,i=t.DERInteger,s=t.DERSequence,a=r.AlgorithmIdentifier,o=r.Time,u=r.X500Name,l=r.Extensions,c=r.SubjectPublicKeyInfo;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=[],t=this.params;if(null!=t.version||1!=t.version){var r=2;null!=t.version&&(r=t.version-1);var h=new n({obj:new i({int:r})});e.push(h)}return e.push(new i(t.serial)),e.push(new a({name:t.sigalg})),e.push(new u(t.issuer)),e.push(new s({array:[new o(t.notbefore),new o(t.notafter)]})),e.push(new u(t.subject)),e.push(new c(Rr.getKey(t.sbjpubkey))),void 0!==t.ext&&t.ext.length>0&&e.push(new n({tag:"a3",obj:new l(t.ext)})),new kt.asn1.DERSequence({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.TBSCertificate,kt.asn1.ASN1Object),kt.asn1.x509.Extensions=function(e){kt.asn1.x509.Extensions.superclass.constructor.call(this);var t=kt.asn1,r=t.DERSequence,n=t.x509;this.aParam=[],this.setByParam=function(e){this.aParam=e},this.tohex=function(){for(var e=[],t=0;t<this.aParam.length;t++){var i=this.aParam[t],s=i.extname,a=null;if(null!=i.extn)a=new n.PrivateExtension(i);else if("subjectKeyIdentifier"==s)a=new n.SubjectKeyIdentifier(i);else if("keyUsage"==s)a=new n.KeyUsage(i);else if("subjectAltName"==s)a=new n.SubjectAltName(i);else if("issuerAltName"==s)a=new n.IssuerAltName(i);else if("basicConstraints"==s)a=new n.BasicConstraints(i);else if("nameConstraints"==s)a=new n.NameConstraints(i);else if("cRLDistributionPoints"==s)a=new n.CRLDistributionPoints(i);else if("certificatePolicies"==s)a=new n.CertificatePolicies(i);else if("authorityKeyIdentifier"==s)a=new n.AuthorityKeyIdentifier(i);else if("extKeyUsage"==s)a=new n.ExtKeyUsage(i);else if("authorityInfoAccess"==s)a=new n.AuthorityInfoAccess(i);else if("cRLNumber"==s)a=new n.CRLNumber(i);else if("cRLReason"==s)a=new n.CRLReason(i);else if("ocspNonce"==s)a=new n.OCSPNonce(i);else if("ocspNoCheck"==s)a=new n.OCSPNoCheck(i);else if("adobeTimeStamp"==s)a=new n.AdobeTimeStamp(i);else{if("subjectDirectoryAttributes"!=s)throw new Error("extension not supported:"+JSON.stringify(i));a=new n.SubjectDirectoryAttributes(i)}null!=a&&e.push(a)}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.x509.Extensions,kt.asn1.ASN1Object),kt.asn1.x509.Extension=function(e){kt.asn1.x509.Extension.superclass.constructor.call(this);var t=kt.asn1,r=t.DERObjectIdentifier,n=t.DEROctetString,i=(t.DERBitString,t.DERBoolean),s=t.DERSequence;this.tohex=function(){var e=new r({oid:this.oid}),t=new n({hex:this.getExtnValueHex()}),a=new Array;return a.push(e),this.critical&&a.push(new i),a.push(t),new s({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.critical=!1,void 0!==e&&void 0!==e.critical&&(this.critical=e.critical)},Nr(kt.asn1.x509.Extension,kt.asn1.ASN1Object),kt.asn1.x509.KeyUsage=function(e){kt.asn1.x509.KeyUsage.superclass.constructor.call(this,e);var t=Error,r={digitalSignature:0,nonRepudiation:1,keyEncipherment:2,dataEncipherment:3,keyAgreement:4,keyCertSign:5,cRLSign:6,encipherOnly:7,decipherOnly:8};this.getExtnValueHex=function(){var e=this.getBinValue();return this.asn1ExtnValue=new kt.asn1.DERBitString({bin:e}),this.asn1ExtnValue.tohex()},this.getBinValue=function(){var e=this.params;if("object"!=typeof e||"object"!=typeof e.names&&"string"!=typeof e.bin)throw new t("parameter not yet set");if(null!=e.names)return wr(e.names,r);if(null!=e.bin)return e.bin;throw new t("parameter not set properly")},this.oid="2.5.29.15",void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.KeyUsage,kt.asn1.x509.Extension),kt.asn1.x509.BasicConstraints=function(e){kt.asn1.x509.BasicConstraints.superclass.constructor.call(this,e);var t=kt.asn1,r=t.DERBoolean,n=t.DERInteger,i=t.DERSequence;this.getExtnValueHex=function(){var e=new Array;this.cA&&e.push(new r),this.pathLen>-1&&e.push(new n({int:this.pathLen}));var t=new i({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.oid="2.5.29.19",this.cA=!1,this.pathLen=-1,void 0!==e&&(void 0!==e.cA&&(this.cA=e.cA),void 0!==e.pathLen&&(this.pathLen=e.pathLen))},Nr(kt.asn1.x509.BasicConstraints,kt.asn1.x509.Extension),kt.asn1.x509.CRLDistributionPoints=function(e){kt.asn1.x509.CRLDistributionPoints.superclass.constructor.call(this,e);var t=kt.asn1,r=t.x509;this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.setByDPArray=function(e){for(var n=[],i=0;i<e.length;i++)if(e[i]instanceof kt.asn1.ASN1Object)n.push(e[i]);else{var s=new r.DistributionPoint(e[i]);n.push(s)}this.asn1ExtnValue=new t.DERSequence({array:n})},this.setByOneURI=function(e){var t=new r.DistributionPoint({fulluri:e});this.setByDPArray([t])},this.oid="2.5.29.31",void 0!==e&&(void 0!==e.array?this.setByDPArray(e.array):void 0!==e.uri&&this.setByOneURI(e.uri))},Nr(kt.asn1.x509.CRLDistributionPoints,kt.asn1.x509.Extension),kt.asn1.x509.DistributionPoint=function(e){kt.asn1.x509.DistributionPoint.superclass.constructor.call(this);var t=kt.asn1,r=t.x509.DistributionPointName;this.tohex=function(){var e=new t.DERSequence;if(null!=this.asn1DP){var r=new t.DERTaggedObject({explicit:!0,tag:"a0",obj:this.asn1DP});e.appendASN1Object(r)}return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.dpobj?this.asn1DP=e.dpobj:void 0!==e.dpname?this.asn1DP=new r(e.dpname):void 0!==e.fulluri&&(this.asn1DP=new r({full:[{uri:e.fulluri}]})))},Nr(kt.asn1.x509.DistributionPoint,kt.asn1.ASN1Object),kt.asn1.x509.DistributionPointName=function(e){kt.asn1.x509.DistributionPointName.superclass.constructor.call(this);var t=kt.asn1,r=t.DERTaggedObject;if(this.tohex=function(){if("full"!=this.type)throw new Error("currently type shall be 'full': "+this.type);return this.asn1Obj=new r({explicit:!1,tag:this.tag,obj:this.asn1V}),this.hTLV=this.asn1Obj.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e)if(t.x509.GeneralNames.prototype.isPrototypeOf(e))this.type="full",this.tag="a0",this.asn1V=e;else{if(void 0===e.full)throw new Error("This class supports GeneralNames only as argument");this.type="full",this.tag="a0",this.asn1V=new t.x509.GeneralNames(e.full)}},Nr(kt.asn1.x509.DistributionPointName,kt.asn1.ASN1Object),kt.asn1.x509.CertificatePolicies=function(e){kt.asn1.x509.CertificatePolicies.superclass.constructor.call(this,e);var t=kt.asn1,r=t.x509,n=t.DERSequence,i=r.PolicyInformation;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++)e.push(new i(this.params.array[t]));var r=new n({array:e});return this.asn1ExtnValue=r,this.asn1ExtnValue.tohex()},this.oid="2.5.29.32",void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.CertificatePolicies,kt.asn1.x509.Extension),kt.asn1.x509.PolicyInformation=function(e){kt.asn1.x509.PolicyInformation.superclass.constructor.call(this,e);var t=kt.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,i=t.x509.PolicyQualifierInfo;this.params=null,this.tohex=function(){if(void 0===this.params.policyoid&&void 0===this.params.array)throw new Error("parameter oid and array missing");var e=[new n(this.params.policyoid)];if(void 0!==this.params.array){for(var t=[],s=0;s<this.params.array.length;s++)t.push(new i(this.params.array[s]));t.length>0&&e.push(new r({array:t}))}return new r({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.PolicyInformation,kt.asn1.ASN1Object),kt.asn1.x509.PolicyQualifierInfo=function(e){kt.asn1.x509.PolicyQualifierInfo.superclass.constructor.call(this,e);var t=kt.asn1,r=t.DERSequence,n=t.DERIA5String,i=t.DERObjectIdentifier,s=t.x509.UserNotice;this.params=null,this.tohex=function(){return void 0!==this.params.cps?new r({array:[new i({oid:"1.3.6.1.5.5.7.2.1"}),new n({str:this.params.cps})]}).tohex():null!=this.params.unotice?new r({array:[new i({oid:"1.3.6.1.5.5.7.2.2"}),new s(this.params.unotice)]}).tohex():void 0},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.PolicyQualifierInfo,kt.asn1.ASN1Object),kt.asn1.x509.UserNotice=function(e){kt.asn1.x509.UserNotice.superclass.constructor.call(this,e);var t=kt.asn1.DERSequence,r=(kt.asn1.DERInteger,kt.asn1.x509.DisplayText),n=kt.asn1.x509.NoticeReference;this.params=null,this.tohex=function(){var e=[];return void 0!==this.params.noticeref&&e.push(new n(this.params.noticeref)),void 0!==this.params.exptext&&e.push(new r(this.params.exptext)),new t({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.UserNotice,kt.asn1.ASN1Object),kt.asn1.x509.NoticeReference=function(e){kt.asn1.x509.NoticeReference.superclass.constructor.call(this,e);var t=kt.asn1.DERSequence,r=kt.asn1.DERInteger,n=kt.asn1.x509.DisplayText;this.params=null,this.tohex=function(){var e=[];if(void 0!==this.params.org&&e.push(new n(this.params.org)),void 0!==this.params.noticenum){for(var i=[],s=this.params.noticenum,a=0;a<s.length;a++)i.push(new r(s[a]));e.push(new t({array:i}))}if(0==e.length)throw new Error("parameter is empty");return new t({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.NoticeReference,kt.asn1.ASN1Object),kt.asn1.x509.DisplayText=function(e){kt.asn1.x509.DisplayText.superclass.constructor.call(this,e),this.hT="0c",void 0!==e&&("ia5"===e.type?this.hT="16":"vis"===e.type?this.hT="1a":"bmp"===e.type&&(this.hT="1e"))},Nr(kt.asn1.x509.DisplayText,kt.asn1.DERAbstractString),kt.asn1.x509.NameConstraints=function(e){kt.asn1.x509.NameConstraints.superclass.constructor.call(this,e);var t=kt.asn1,r=t.x509,n=t.ASN1Util.newObject,i=r.GeneralSubtree;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[];if(null!=e.permit&&null!=e.permit.length){for(var r=[],s=0;s<e.permit.length;s++)r.push(new i(e.permit[s]));t.push({tag:{tagi:"a0",obj:{seq:r}}})}if(null!=e.exclude&&null!=e.exclude.length){var a=[];for(s=0;s<e.exclude.length;s++)a.push(new i(e.exclude[s]));t.push({tag:{tagi:"a1",obj:{seq:a}}})}return this.asn1ExtnValue=n({seq:t}),this.asn1ExtnValue.tohex()},this.oid="2.5.29.30",void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.NameConstraints,kt.asn1.x509.Extension),kt.asn1.x509.GeneralSubtree=function(e){kt.asn1.x509.GeneralSubtree.superclass.constructor.call(this);var t=kt.asn1,r=t.x509.GeneralName,n=t.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params,t=[new r(e)];return null!=e.min&&t.push({tag:{tagi:"80",obj:{int:e.min}}}),null!=e.max&&t.push({tag:{tagi:"81",obj:{int:e.max}}}),n({seq:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.GeneralSubtree,kt.asn1.ASN1Object),kt.asn1.x509.ExtKeyUsage=function(e){kt.asn1.x509.ExtKeyUsage.superclass.constructor.call(this,e);var t=kt.asn1;this.setPurposeArray=function(e){this.asn1ExtnValue=new t.DERSequence;for(var r=0;r<e.length;r++){var n=new t.DERObjectIdentifier(e[r]);this.asn1ExtnValue.appendASN1Object(n)}},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.37",void 0!==e&&void 0!==e.array&&this.setPurposeArray(e.array)},Nr(kt.asn1.x509.ExtKeyUsage,kt.asn1.x509.Extension),kt.asn1.x509.AuthorityKeyIdentifier=function(e){kt.asn1.x509.AuthorityKeyIdentifier.superclass.constructor.call(this,e);var t=kt,r=t.asn1,n=r.DERTaggedObject,i=r.x509.GeneralNames;t.crypto.Util.isKey;this.asn1KID=null,this.asn1CertIssuer=null,this.asn1CertSN=null,this.getExtnValueHex=function(){var e=new Array;this.asn1KID&&e.push(new n({explicit:!1,tag:"80",obj:this.asn1KID})),this.asn1CertIssuer&&e.push(new n({explicit:!1,tag:"a1",obj:new i([{dn:this.asn1CertIssuer}])})),this.asn1CertSN&&e.push(new n({explicit:!1,tag:"82",obj:this.asn1CertSN}));var t=new r.DERSequence({array:e});return this.asn1ExtnValue=t,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new kt.asn1.DEROctetString(e);else if("object"==typeof e&&kt.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN ")){var t=e;"string"==typeof e&&(t=Rr.getKey(e));var r=Rr.getKeyID(t);this.asn1KID=new kt.asn1.DEROctetString({hex:r})}},this.setCertIssuerByParam=function(e){void 0!==e.str||void 0!==e.ldapstr||void 0!==e.hex||void 0!==e.certsubject||void 0!==e.certissuer?this.asn1CertIssuer=new kt.asn1.x509.X500Name(e):"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&-1!=e.indexOf("CERTIFICATE")&&(this.asn1CertIssuer=new kt.asn1.x509.X500Name({certissuer:e}))},this.setCertSNByParam=function(e){if(void 0!==e.str||void 0!==e.bigint||void 0!==e.hex)this.asn1CertSN=new kt.asn1.DERInteger(e);else if("string"==typeof e&&-1!=e.indexOf("BEGIN ")&&e.indexOf("CERTIFICATE")){var t=new Pr;t.readCertPEM(e);var r=t.getSerialNumberHex();this.asn1CertSN=new kt.asn1.DERInteger({hex:r})}},this.oid="2.5.29.35",void 0!==e&&(void 0!==e.kid&&this.setKIDByParam(e.kid),void 0!==e.issuer&&this.setCertIssuerByParam(e.issuer),void 0!==e.sn&&this.setCertSNByParam(e.sn),void 0!==e.issuersn&&"string"==typeof e.issuersn&&-1!=e.issuersn.indexOf("BEGIN ")&&e.issuersn.indexOf("CERTIFICATE")&&(this.setCertSNByParam(e.issuersn),this.setCertIssuerByParam(e.issuersn)))},Nr(kt.asn1.x509.AuthorityKeyIdentifier,kt.asn1.x509.Extension),kt.asn1.x509.SubjectKeyIdentifier=function(e){kt.asn1.x509.SubjectKeyIdentifier.superclass.constructor.call(this,e);var t=kt.asn1.DEROctetString;this.asn1KID=null,this.getExtnValueHex=function(){return this.asn1ExtnValue=this.asn1KID,this.asn1ExtnValue.tohex()},this.setKIDByParam=function(e){if(void 0!==e.str||void 0!==e.hex)this.asn1KID=new t(e);else if("object"==typeof e&&kt.crypto.Util.isKey(e)||"string"==typeof e&&-1!=e.indexOf("BEGIN")){var r=e;"string"==typeof e&&(r=Rr.getKey(e));var n=Rr.getKeyID(r);this.asn1KID=new kt.asn1.DEROctetString({hex:n})}},this.oid="2.5.29.14",void 0!==e&&void 0!==e.kid&&this.setKIDByParam(e.kid)},Nr(kt.asn1.x509.SubjectKeyIdentifier,kt.asn1.x509.Extension),kt.asn1.x509.AuthorityInfoAccess=function(e){kt.asn1.x509.AuthorityInfoAccess.superclass.constructor.call(this,e),this.setAccessDescriptionArray=function(e){for(var t=new Array,r=kt.asn1,n=r.DERSequence,i=r.DERObjectIdentifier,s=r.x509.GeneralName,a=0;a<e.length;a++){var o,u=e[a];if(void 0!==u.ocsp)o=new n({array:[new i({oid:"1.3.6.1.5.5.7.48.1"}),new s({uri:u.ocsp})]});else{if(void 0===u.caissuer)throw new Error("unknown AccessMethod parameter: "+JSON.stringify(u));o=new n({array:[new i({oid:"1.3.6.1.5.5.7.48.2"}),new s({uri:u.caissuer})]})}t.push(o)}this.asn1ExtnValue=new n({array:t})},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.1.1",void 0!==e&&void 0!==e.array&&this.setAccessDescriptionArray(e.array)},Nr(kt.asn1.x509.AuthorityInfoAccess,kt.asn1.x509.Extension),kt.asn1.x509.SubjectAltName=function(e){kt.asn1.x509.SubjectAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new kt.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.17",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},Nr(kt.asn1.x509.SubjectAltName,kt.asn1.x509.Extension),kt.asn1.x509.IssuerAltName=function(e){kt.asn1.x509.IssuerAltName.superclass.constructor.call(this,e),this.setNameArray=function(e){this.asn1ExtnValue=new kt.asn1.x509.GeneralNames(e)},this.getExtnValueHex=function(){return this.asn1ExtnValue.tohex()},this.oid="2.5.29.18",void 0!==e&&void 0!==e.array&&this.setNameArray(e.array)},Nr(kt.asn1.x509.IssuerAltName,kt.asn1.x509.Extension),kt.asn1.x509.SubjectDirectoryAttributes=function(e){kt.asn1.x509.SubjectDirectoryAttributes.superclass.constructor.call(this,e);var t=kt.asn1,r=t.DERSequence,n=t.ASN1Util.newObject,i=t.x509.OID.name2oid;this.params=null,this.getExtnValueHex=function(){for(var e=[],t=0;t<this.params.array.length;t++){var s=this.params.array[t],a={seq:[{oid:"1.2.3.4"},{set:[{utf8str:"DE"}]}]};if("dateOfBirth"==s.attr)a.seq[0].oid=i(s.attr),a.seq[1].set[0]={gentime:s.str};else if("placeOfBirth"==s.attr)a.seq[0].oid=i(s.attr),a.seq[1].set[0]={utf8str:s.str};else if("gender"==s.attr)a.seq[0].oid=i(s.attr),a.seq[1].set[0]={prnstr:s.str};else if("countryOfCitizenship"==s.attr)a.seq[0].oid=i(s.attr),a.seq[1].set[0]={prnstr:s.str};else{if("countryOfResidence"!=s.attr)throw new Error("unsupported attribute: "+s.attr);a.seq[0].oid=i(s.attr),a.seq[1].set[0]={prnstr:s.str}}e.push(new n(a))}var o=new r({array:e});return this.asn1ExtnValue=o,this.asn1ExtnValue.tohex()},this.oid="2.5.29.9",void 0!==e&&(this.params=e)},Nr(kt.asn1.x509.SubjectDirectoryAttributes,kt.asn1.x509.Extension),kt.asn1.x509.PrivateExtension=function(e){kt.asn1.x509.PrivateExtension.superclass.constructor.call(this,e);var t=kt,r=t.lang.String.isHex,n=t.asn1,i=n.x509.OID.name2oid,s=n.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.oid=i(e.extname),this.params=e},this.getExtnValueHex=function(){if(null==this.params.extname||null==this.params.extn)throw new Error("extname or extnhex not specified");var e=this.params.extn;if("string"==typeof e&&r(e))return e;if("object"==typeof e)try{return s(e).tohex()}catch(e){}throw new Error("unsupported extn value")},null!=e&&this.setByParam(e)},Nr(kt.asn1.x509.PrivateExtension,kt.asn1.x509.Extension),kt.asn1.x509.CRL=function(e){kt.asn1.x509.CRL.superclass.constructor.call(this);var t=kt.asn1,r=t.DERSequence,n=t.DERBitString,i=t.x509,s=i.AlgorithmIdentifier,a=i.TBSCertList;this.params=void 0,this.setByParam=function(e){this.params=e},this.sign=function(){var e=new a(this.params).tohex(),t=new kt.crypto.Signature({alg:this.params.sigalg});t.init(this.params.cakey),t.updateHex(e);var r=t.sign();this.params.sighex=r},this.getPEM=function(){return sr(this.tohex(),"X509 CRL")},this.tohex=function(){var e=this.params;if(null==e.tbsobj&&(e.tbsobj=new a(e)),null==e.sighex&&null!=e.cakey&&this.sign(),null==e.sighex)throw new Error("sighex or cakey parameter not defined");var t=[];return t.push(e.tbsobj),t.push(new s({name:e.sigalg})),t.push(new n({hex:"00"+e.sighex})),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&(this.params=e)},Nr(kt.asn1.x509.CRL,kt.asn1.ASN1Object),kt.asn1.x509.TBSCertList=function(e){kt.asn1.x509.TBSCertList.superclass.constructor.call(this);var t=kt.asn1,r=t.DERInteger,n=t.DERSequence,i=t.DERTaggedObject,s=(t.DERObjectIdentifier,t.x509),a=s.AlgorithmIdentifier,o=s.Time,u=s.Extensions,l=s.X500Name;this.params=null,this.setByParam=function(e){this.params=e},this.getRevCertSequence=function(){for(var e=[],t=this.params.revcert,i=0;i<t.length;i++){var s=[new r(t[i].sn),new o(t[i].date)];null!=t[i].ext&&s.push(new u(t[i].ext)),e.push(new n({array:s}))}return new n({array:e})},this.tohex=function(){var e=[],t=this.params;if(null!=t.version){var s=t.version-1,c=new r({int:s});e.push(c)}if(e.push(new a({name:t.sigalg})),e.push(new l(t.issuer)),e.push(new o(t.thisupdate)),null!=t.nextupdate&&e.push(new o(t.nextupdate)),null!=t.revcert&&e.push(this.getRevCertSequence()),null!=t.ext){var h=new u(t.ext);e.push(new i({tag:"a0",explicit:!0,obj:h}))}return new n({array:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.TBSCertList,kt.asn1.ASN1Object),kt.asn1.x509.CRLEntry=function(e){kt.asn1.x509.CRLEntry.superclass.constructor.call(this);var t=kt.asn1;this.setCertSerial=function(e){this.sn=new t.DERInteger(e)},this.setRevocationDate=function(e){this.time=new t.x509.Time(e)},this.tohex=function(){var e=new t.DERSequence({array:[this.sn,this.time]});return this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.time&&this.setRevocationDate(e.time),void 0!==e.sn&&this.setCertSerial(e.sn))},Nr(kt.asn1.x509.CRLEntry,kt.asn1.ASN1Object),kt.asn1.x509.CRLNumber=function(e){kt.asn1.x509.CRLNumber.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new kt.asn1.DERInteger(this.params.num),this.asn1ExtnValue.tohex()},this.oid="2.5.29.20",null!=e&&(this.params=e)},Nr(kt.asn1.x509.CRLNumber,kt.asn1.x509.Extension),kt.asn1.x509.CRLReason=function(e){kt.asn1.x509.CRLReason.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new kt.asn1.DEREnumerated(this.params.code),this.asn1ExtnValue.tohex()},this.oid="2.5.29.21",null!=e&&(this.params=e)},Nr(kt.asn1.x509.CRLReason,kt.asn1.x509.Extension),kt.asn1.x509.OCSPNonce=function(e){kt.asn1.x509.OCSPNonce.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new kt.asn1.DEROctetString(this.params),this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.2",null!=e&&(this.params=e)},Nr(kt.asn1.x509.OCSPNonce,kt.asn1.x509.Extension),kt.asn1.x509.OCSPNoCheck=function(e){kt.asn1.x509.OCSPNoCheck.superclass.constructor.call(this,e),this.params=void 0,this.getExtnValueHex=function(){return this.asn1ExtnValue=new kt.asn1.DERNull,this.asn1ExtnValue.tohex()},this.oid="1.3.6.1.5.5.7.48.1.5",null!=e&&(this.params=e)},Nr(kt.asn1.x509.OCSPNoCheck,kt.asn1.x509.Extension),kt.asn1.x509.AdobeTimeStamp=function(e){kt.asn1.x509.AdobeTimeStamp.superclass.constructor.call(this,e);var t=kt.asn1,r=t.DERInteger,n=t.DERBoolean,i=t.DERSequence,s=t.x509.GeneralName;this.params=null,this.getExtnValueHex=function(){var e=this.params,t=[new r(1)];return t.push(new s({uri:e.uri})),null!=e.reqauth&&t.push(new n(e.reqauth)),this.asn1ExtnValue=new i({array:t}),this.asn1ExtnValue.tohex()},this.oid="1.2.840.113583.1.1.9.1",void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.AdobeTimeStamp,kt.asn1.x509.Extension),kt.asn1.x509.X500Name=function(e){kt.asn1.x509.X500Name.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=kt.asn1,r=t.x509,n=r.RDN;this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var r=e.split("/");r.shift();for(var i=[],s=0;s<r.length;s++)if(r[s].match(/^[^=]+=.+$/))i.push(r[s]);else{var a=i.length-1;i[a]=i[a]+"/"+r[s]}for(s=0;s<i.length;s++)this.asn1Array.push(new n({str:i[s],rule:this.sRule}))},this.setByLdapString=function(e,t){void 0!==t&&(this.sRule=t);var n=r.X500Name.ldapToCompat(e);this.setByString(n,t)},this.setByObject=function(e,t){for(var r in void 0!==t&&(this.sRule=t),e)if(e.hasOwnProperty(r)){var i=new n({str:r+"="+e[r],rule:this.sRule});this.asn1Array?this.asn1Array.push(i):this.asn1Array=[i]}},this.setByParam=function(e){if(void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.array)this.paramArray=e.array;else if(void 0!==e.str)this.setByString(e.str);else if(void 0!==e.ldapstr)this.setByLdapString(e.ldapstr);else if(void 0!==e.hex)this.hTLV=e.hex;else if(void 0!==e.certissuer){(t=new Pr).readCertPEM(e.certissuer),this.hTLV=t.getIssuerHex()}else{var t;if(void 0!==e.certsubject)(t=new Pr).readCertPEM(e.certsubject),this.hTLV=t.getSubjectHex();else"object"==typeof e&&void 0===e.certsubject&&void 0===e.certissuer&&this.setByObject(e)}},this.tohex=function(){if("string"==typeof this.hTLV)return this.hTLV;if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var r={array:this.paramArray[e]};"utf8"!=this.sRule&&(r.rule=this.sRule);var i=new n(r);this.asn1Array.push(i)}var s=new t.DERSequence({array:this.asn1Array});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.X500Name,kt.asn1.ASN1Object),kt.asn1.x509.X500Name.compatToLDAP=function(e){if("/"!==e.substr(0,1))throw"malformed input";var t=(e=e.substr(1)).split("/");return t.reverse(),t=t.map((function(e){return e.replace(/,/,"\\,")})),t.join(",")},kt.asn1.x509.X500Name.onelineToLDAP=function(e){return kt.asn1.x509.X500Name.compatToLDAP(e)},kt.asn1.x509.X500Name.ldapToCompat=function(e){for(var t=e.split(","),r=!1,n=[],i=0;t.length>0;i++){var s=t.shift();if(!0===r){var a=(n.pop()+","+s).replace(/\\,/g,",");n.push(a),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}return n=n.map((function(e){return e.replace("/","\\/")})),n.reverse(),"/"+n.join("/")},kt.asn1.x509.X500Name.ldapToOneline=function(e){return kt.asn1.x509.X500Name.ldapToCompat(e)},kt.asn1.x509.RDN=function(e){kt.asn1.x509.RDN.superclass.constructor.call(this),this.asn1Array=[],this.paramArray=[],this.sRule="utf8";var t=kt.asn1.x509.AttributeTypeAndValue;this.setByParam=function(e){void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.str&&this.addByMultiValuedString(e.str),void 0!==e.array&&(this.paramArray=e.array)},this.addByString=function(e){this.asn1Array.push(new kt.asn1.x509.AttributeTypeAndValue({str:e,rule:this.sRule}))},this.addByMultiValuedString=function(e){for(var t=kt.asn1.x509.RDN.parseString(e),r=0;r<t.length;r++)this.addByString(t[r])},this.tohex=function(){if(0==this.asn1Array.length&&this.paramArray.length>0)for(var e=0;e<this.paramArray.length;e++){var r=this.paramArray[e];void 0!==r.rule&&"utf8"!=this.sRule&&(r.rule=this.sRule);var n=new t(r);this.asn1Array.push(n)}var i=new kt.asn1.DERSet({array:this.asn1Array});return this.TLV=i.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.RDN,kt.asn1.ASN1Object),kt.asn1.x509.RDN.parseString=function(e){for(var t=e.split(/\+/),r=!1,n=[],i=0;t.length>0;i++){var s=t.shift();if(!0===r){var a=(n.pop()+"+"+s).replace(/\\\+/g,"+");n.push(a),r=!1}else n.push(s);"\\"===s.substr(-1,1)&&(r=!0)}var o=!1,u=[];for(i=0;n.length>0;i++){s=n.shift();if(!0===o){var l=u.pop();if(s.match(/"$/)){a=(l+"+"+s).replace(/^([^=]+)="(.*)"$/,"$1=$2");u.push(a),o=!1}else u.push(l+"+"+s)}else u.push(s);s.match(/^[^=]+="/)&&(o=!0)}return u},kt.asn1.x509.AttributeTypeAndValue=function(e){kt.asn1.x509.AttributeTypeAndValue.superclass.constructor.call(this),this.sRule="utf8",this.sType=null,this.sValue=null,this.dsType=null;var t=kt,r=t.asn1,n=r.DERSequence,i=r.DERUTF8String,s=r.DERPrintableString,a=r.DERTeletexString,o=r.DERIA5String,u=r.DERVisibleString,l=r.DERBMPString,c=t.lang.String.isMail,h=t.lang.String.isPrintable;this.setByParam=function(e){if(void 0!==e.rule&&(this.sRule=e.rule),void 0!==e.ds&&(this.dsType=e.ds),void 0===e.value&&void 0!==e.str){var t=e.str.match(/^([^=]+)=(.+)$/);if(!t)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.sType=t[1],this.sValue=t[2]}else this.sType=e.type,this.sValue=e.value},this.setByString=function(e,t){void 0!==t&&(this.sRule=t);var r=e.match(/^([^=]+)=(.+)$/);if(!r)throw new Error("malformed attrTypeAndValueStr: "+attrTypeAndValueStr);this.setByAttrTypeAndValueStr(r[1],r[2])},this._getDsType=function(){var e=this.sType,t=this.sValue,r=this.sRule;return"prn"===r?"CN"==e&&c(t)?"ia5":h(t)?"prn":"utf8":"utf8"===r?"CN"==e&&c(t)?"ia5":"C"==e?"prn":"utf8":"utf8"},this.setByAttrTypeAndValueStr=function(e,t,r){void 0!==r&&(this.sRule=r),this.sType=e,this.sValue=t},this.getValueObj=function(e,t){if("utf8"==e)return new i({str:t});if("prn"==e)return new s({str:t});if("tel"==e)return new a({str:t});if("ia5"==e)return new o({str:t});if("vis"==e)return new u({str:t});if("bmp"==e)return new l({str:t});throw new Error("unsupported directory string type: type="+e+" value="+t)},this.tohex=function(){null==this.dsType&&(this.dsType=this._getDsType());var e=kt.asn1.x509.OID.atype2obj(this.sType),t=this.getValueObj(this.dsType,this.sValue),r=new n({array:[e,t]});return this.TLV=r.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.AttributeTypeAndValue,kt.asn1.ASN1Object),kt.asn1.x509.SubjectPublicKeyInfo=function(e){kt.asn1.x509.SubjectPublicKeyInfo.superclass.constructor.call(this);var t=kt,r=t.asn1,n=r.DERInteger,i=r.DERBitString,s=r.DERObjectIdentifier,a=r.DERSequence,o=r.ASN1Util.newObject,u=r.x509.AlgorithmIdentifier,l=t.crypto;l.ECDSA,l.DSA;this.getASN1Object=function(){if(null==this.asn1AlgId||null==this.asn1SubjPKey)throw"algId and/or subjPubKey not set";return new a({array:[this.asn1AlgId,this.asn1SubjPKey]})},this.tohex=function(){var e=this.getASN1Object();return this.hTLV=e.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},this.setPubKey=function(e){try{if(e instanceof Dt){var t=o({seq:[{int:{bigint:e.n}},{int:{int:e.e}}]}).tohex();this.asn1AlgId=new u({name:"rsaEncryption"}),this.asn1SubjPKey=new i({hex:"00"+t})}}catch(e){}try{if(e instanceof kt.crypto.ECDSA){var r=new s({name:e.curveName});this.asn1AlgId=new u({name:"ecPublicKey",asn1params:r}),this.asn1SubjPKey=new i({hex:"00"+e.pubKeyHex})}}catch(e){}try{if(e instanceof kt.crypto.DSA){r=new o({seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]});this.asn1AlgId=new u({name:"dsa",asn1params:r});var a=new n({bigint:e.y});this.asn1SubjPKey=new i({hex:"00"+a.tohex()})}}catch(e){}},void 0!==e&&this.setPubKey(e)},Nr(kt.asn1.x509.SubjectPublicKeyInfo,kt.asn1.ASN1Object),kt.asn1.x509.Time=function(e){kt.asn1.x509.Time.superclass.constructor.call(this);var t=kt.asn1,r=t.DERUTCTime,n=t.DERGeneralizedTime;this.params=null,this.type=null,this.setTimeParams=function(e){this.timeParams=e},this.setByParam=function(e){this.params=e},this.getType=function(e){return e.match(/^[0-9]{12}Z$/)?"utc":e.match(/^[0-9]{14}Z$/)?"gen":e.match(/^[0-9]{12}\.[0-9]+Z$/)?"utc":e.match(/^[0-9]{14}\.[0-9]+Z$/)?"gen":null},this.tohex=function(){var e=this.params,t=null;if("string"==typeof e&&(e={str:e}),null==e||!e.str||null!=e.type&&null!=e.type||(e.type=this.getType(e.str)),null!=e&&e.str?("utc"==e.type&&(t=new r(e.str)),"gen"==e.type&&(t=new n(e.str))):t="gen"==this.type?new n:new r,null==t)throw new Error("wrong setting for Time");return this.TLV=t.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},kt.asn1.x509.Time_bak=function(e){kt.asn1.x509.Time_bak.superclass.constructor.call(this);var t=kt.asn1,r=t.DERUTCTime,n=t.DERGeneralizedTime;this.setTimeParams=function(e){this.timeParams=e},this.tohex=function(){var e=null;return e=null!=this.timeParams?"utc"==this.type?new r(this.timeParams):new n(this.timeParams):"utc"==this.type?new r:new n,this.TLV=e.tohex(),this.TLV},this.getEncodedHex=function(){return this.tohex()},this.type="utc",void 0!==e&&(void 0!==e.type?this.type=e.type:void 0!==e.str&&(e.str.match(/^[0-9]{12}Z$/)&&(this.type="utc"),e.str.match(/^[0-9]{14}Z$/)&&(this.type="gen")),this.timeParams=e)},Nr(kt.asn1.x509.Time,kt.asn1.ASN1Object),kt.asn1.x509.AlgorithmIdentifier=function(e){kt.asn1.x509.AlgorithmIdentifier.superclass.constructor.call(this),this.nameAlg=null,this.asn1Alg=null,this.asn1Params=null,this.paramEmpty=!1;var t=kt.asn1,r=t.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV;if(this.tohex=function(){if(null===this.nameAlg&&null===this.asn1Alg)throw new Error("algorithm not specified");if(null!==this.nameAlg){var e=null;for(var n in r)n===this.nameAlg&&(e=r[n]);if(null!==e)return this.hTLV=e,this.hTLV}null!==this.nameAlg&&null===this.asn1Alg&&(this.asn1Alg=t.x509.OID.name2obj(this.nameAlg));var i=[this.asn1Alg];null!==this.asn1Params&&i.push(this.asn1Params);var s=new t.DERSequence({array:i});return this.hTLV=s.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&(void 0!==e.name&&(this.nameAlg=e.name),void 0!==e.asn1params&&(this.asn1Params=e.asn1params),void 0!==e.paramempty&&(this.paramEmpty=e.paramempty)),null===this.asn1Params&&!1===this.paramEmpty&&null!==this.nameAlg){void 0!==this.nameAlg.name&&(this.nameAlg=this.nameAlg.name);var n=this.nameAlg.toLowerCase();"withdsa"!==n.substr(-7,7)&&"withecdsa"!==n.substr(-9,9)&&(this.asn1Params=new t.DERNull)}},Nr(kt.asn1.x509.AlgorithmIdentifier,kt.asn1.ASN1Object),kt.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV={SHAwithRSAandMGF1:"300d06092a864886f70d01010a3000",SHA256withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040201a11a301806092a864886f70d010108300b0609608648016503040201a203020120",SHA384withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040202a11a301806092a864886f70d010108300b0609608648016503040202a203020130",SHA512withRSAandMGF1:"303d06092a864886f70d01010a3030a00d300b0609608648016503040203a11a301806092a864886f70d010108300b0609608648016503040203a203020140"},kt.asn1.x509.GeneralName=function(e){kt.asn1.x509.GeneralName.superclass.constructor.call(this);var t=kt.asn1,r=t.x509,n=r.X500Name,i=r.OtherName,s=t.DERIA5String,a=(t.DERPrintableString,t.DEROctetString),o=t.DERTaggedObject,u=t.ASN1Object,l=Error;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e,t,r=this.params,c=!1;if(void 0!==r.other)e="a0",t=new i(r.other);else if(void 0!==r.rfc822)e="81",t=new s({str:r.rfc822});else if(void 0!==r.dns)e="82",t=new s({str:r.dns});else if(void 0!==r.dn)e="a4",c=!0,t="string"==typeof r.dn?new n({str:r.dn}):r.dn instanceof kt.asn1.x509.X500Name?r.dn:new n(r.dn);else if(void 0!==r.ldapdn)e="a4",c=!0,t=new n({ldapstr:r.ldapdn});else if(void 0!==r.certissuer||void 0!==r.certsubj){var h,p;e="a4",c=!0;var f=null;if(void 0!==r.certsubj?(h=!1,p=r.certsubj):(h=!0,p=r.certissuer),p.match(/^[0-9A-Fa-f]+$/),-1!=p.indexOf("-----BEGIN ")&&(f=ar(p)),null==f)throw new Error("certsubj/certissuer not cert");var d,g=new Pr;g.hex=f,d=h?g.getIssuerHex():g.getSubjectHex(),(t=new u).hTLV=d}else if(void 0!==r.uri)e="86",t=new s({str:r.uri});else{if(void 0===r.ip)throw new l("improper params");var m;e="87";var y=r.ip;try{if(y.match(/^[0-9a-f]+$/)){var E=y.length;if(8!=E&&16!=E&&32!=E&&64!=E)throw"err";m=y}else m=gr(y)}catch(e){throw new l("malformed IP address: "+r.ip+":"+e.message)}t=new a({hex:m})}return new o({tag:e,explicit:c,obj:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.GeneralName,kt.asn1.ASN1Object),kt.asn1.x509.GeneralNames=function(e){kt.asn1.x509.GeneralNames.superclass.constructor.call(this);var t=kt.asn1;this.setByParamArray=function(e){for(var r=0;r<e.length;r++){var n=new t.x509.GeneralName(e[r]);this.asn1Array.push(n)}},this.tohex=function(){return new t.DERSequence({array:this.asn1Array}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.asn1Array=new Array,void 0!==e&&this.setByParamArray(e)},Nr(kt.asn1.x509.GeneralNames,kt.asn1.ASN1Object),kt.asn1.x509.OtherName=function(e){kt.asn1.x509.OtherName.superclass.constructor.call(this);var t=kt.asn1,r=t.DERObjectIdentifier,n=t.DERSequence,i=t.ASN1Util.newObject;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if(null==e.oid||null==e.value)throw new Error("oid or value not specified");var t=new r({oid:e.oid}),s=i({tag:{tag:"a0",explicit:!0,obj:e.value}});return new n({array:[t,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.x509.OtherName,kt.asn1.ASN1Object),kt.asn1.x509.OID=new function(){var e=kt.asn1.DERObjectIdentifier;this.name2oidList={sha1:"1.3.14.3.2.26",sha256:"2.16.840.1.101.3.4.2.1",sha384:"2.16.840.1.101.3.4.2.2",sha512:"2.16.840.1.101.3.4.2.3",sha224:"2.16.840.1.101.3.4.2.4",md5:"1.2.840.113549.2.5",md2:"1.3.14.7.2.2.1",ripemd160:"1.3.36.3.2.1",MD2withRSA:"1.2.840.113549.1.1.2",MD4withRSA:"1.2.840.113549.1.1.3",MD5withRSA:"1.2.840.113549.1.1.4",SHA1withRSA:"1.2.840.113549.1.1.5","pkcs1-MGF":"1.2.840.113549.1.1.8",rsaPSS:"1.2.840.113549.1.1.10",SHA224withRSA:"1.2.840.113549.1.1.14",SHA256withRSA:"1.2.840.113549.1.1.11",SHA384withRSA:"1.2.840.113549.1.1.12",SHA512withRSA:"1.2.840.113549.1.1.13",SHA1withECDSA:"1.2.840.10045.4.1",SHA224withECDSA:"1.2.840.10045.4.3.1",SHA256withECDSA:"1.2.840.10045.4.3.2",SHA384withECDSA:"1.2.840.10045.4.3.3",SHA512withECDSA:"1.2.840.10045.4.3.4",dsa:"1.2.840.10040.4.1",SHA1withDSA:"1.2.840.10040.4.3",SHA224withDSA:"2.16.840.1.101.3.4.3.1",SHA256withDSA:"2.16.840.1.101.3.4.3.2",rsaEncryption:"1.2.840.113549.1.1.1",commonName:"2.5.4.3",countryName:"2.5.4.6",localityName:"2.5.4.7",stateOrProvinceName:"2.5.4.8",streetAddress:"2.5.4.9",organizationName:"2.5.4.10",organizationalUnitName:"2.5.4.11",domainComponent:"0.9.2342.19200300.100.1.25",userId:"0.9.2342.19200300.100.1.1",surname:"2.5.4.4",givenName:"2.5.4.42",title:"2.5.4.12",distinguishedName:"2.5.4.49",emailAddress:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3",subjectDirectoryAttributes:"2.5.29.9",subjectKeyIdentifier:"2.5.29.14",keyUsage:"2.5.29.15",subjectAltName:"2.5.29.17",issuerAltName:"2.5.29.18",basicConstraints:"2.5.29.19",cRLNumber:"2.5.29.20",cRLReason:"2.5.29.21",nameConstraints:"2.5.29.30",cRLDistributionPoints:"2.5.29.31",certificatePolicies:"2.5.29.32",anyPolicy:"2.5.29.32.0",authorityKeyIdentifier:"2.5.29.35",policyConstraints:"2.5.29.36",extKeyUsage:"2.5.29.37",authorityInfoAccess:"1.3.6.1.5.5.7.1.1",ocsp:"1.3.6.1.5.5.7.48.1",ocspBasic:"1.3.6.1.5.5.7.48.1.1",ocspNonce:"1.3.6.1.5.5.7.48.1.2",ocspNoCheck:"1.3.6.1.5.5.7.48.1.5",caIssuers:"1.3.6.1.5.5.7.48.2",anyExtendedKeyUsage:"2.5.29.37.0",serverAuth:"1.3.6.1.5.5.7.3.1",clientAuth:"1.3.6.1.5.5.7.3.2",codeSigning:"1.3.6.1.5.5.7.3.3",emailProtection:"1.3.6.1.5.5.7.3.4",timeStamping:"1.3.6.1.5.5.7.3.8",ocspSigning:"1.3.6.1.5.5.7.3.9",dateOfBirth:"1.3.6.1.5.5.7.9.1",placeOfBirth:"1.3.6.1.5.5.7.9.2",gender:"1.3.6.1.5.5.7.9.3",countryOfCitizenship:"1.3.6.1.5.5.7.9.4",countryOfResidence:"1.3.6.1.5.5.7.9.5",ecPublicKey:"1.2.840.10045.2.1","P-256":"1.2.840.10045.3.1.7",secp256r1:"1.2.840.10045.3.1.7",secp256k1:"1.3.132.0.10",secp384r1:"1.3.132.0.34",secp521r1:"1.3.132.0.35",pkcs5PBES2:"1.2.840.113549.1.5.13",pkcs5PBKDF2:"1.2.840.113549.1.5.12","des-EDE3-CBC":"1.2.840.113549.3.7",data:"1.2.840.113549.1.7.1","signed-data":"1.2.840.113549.1.7.2","enveloped-data":"1.2.840.113549.1.7.3","digested-data":"1.2.840.113549.1.7.5","encrypted-data":"1.2.840.113549.1.7.6","authenticated-data":"1.2.840.113549.1.9.16.1.2",tstinfo:"1.2.840.113549.1.9.16.1.4",signingCertificate:"1.2.840.113549.1.9.16.2.12",timeStampToken:"1.2.840.113549.1.9.16.2.14",signaturePolicyIdentifier:"1.2.840.113549.1.9.16.2.15",etsArchiveTimeStamp:"1.2.840.113549.1.9.16.2.27",signingCertificateV2:"1.2.840.113549.1.9.16.2.47",etsArchiveTimeStampV2:"1.2.840.113549.1.9.16.2.48",extensionRequest:"1.2.840.113549.1.9.14",contentType:"1.2.840.113549.1.9.3",messageDigest:"1.2.840.113549.1.9.4",signingTime:"1.2.840.113549.1.9.5",counterSignature:"1.2.840.113549.1.9.6",archiveTimeStampV3:"0.4.0.1733.2.4",pdfRevocationInfoArchival:"1.2.840.113583.1.1.8",adobeTimeStamp:"1.2.840.113583.1.1.9.1"},this.atype2oidList={CN:"2.5.4.3",L:"2.5.4.7",ST:"2.5.4.8",O:"2.5.4.10",OU:"2.5.4.11",C:"2.5.4.6",STREET:"2.5.4.9",DC:"0.9.2342.19200300.100.1.25",UID:"0.9.2342.19200300.100.1.1",SN:"2.5.4.4",T:"2.5.4.12",DN:"2.5.4.49",E:"1.2.840.113549.1.9.1",description:"2.5.4.13",businessCategory:"2.5.4.15",postalCode:"2.5.4.17",serialNumber:"2.5.4.5",uniqueIdentifier:"2.5.4.45",organizationIdentifier:"2.5.4.97",jurisdictionOfIncorporationL:"1.3.6.1.4.1.311.60.2.1.1",jurisdictionOfIncorporationSP:"1.3.6.1.4.1.311.60.2.1.2",jurisdictionOfIncorporationC:"1.3.6.1.4.1.311.60.2.1.3"},this.objCache={},this.name2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];if(void 0===this.name2oidList[t])throw"Name of ObjectIdentifier not defined: "+t;var r=this.name2oidList[t],n=new e({oid:r});return this.objCache[t]=n,n},this.atype2obj=function(t){if(void 0!==this.objCache[t])return this.objCache[t];var r;if(t.match(/^\d+\.\d+\.[0-9.]+$/))r=t;else if(void 0!==this.atype2oidList[t])r=this.atype2oidList[t];else{if(void 0===this.name2oidList[t])throw new Error("AttributeType name undefined: "+t);r=this.name2oidList[t]}var n=new e({oid:r});return this.objCache[t]=n,n},this.registerOIDs=function(e){if(this.checkOIDs(e))for(var t in e)this.name2oidList[t]=e[t]},this.checkOIDs=function(e){try{var t=Object.keys(e);return 0!=t.length&&(t.map((function(e,t,r){if(!this[e].match(/^[0-2]\.[0-9.]+$/))throw new Error("value is not OID")}),e),!0)}catch(e){return!1}}},kt.asn1.x509.OID.oid2name=function(e){var t=kt.asn1.x509.OID.name2oidList;for(var r in t)if(t[r]==e)return r;return""},kt.asn1.x509.OID.oid2atype=function(e){var t=kt.asn1.x509.OID.atype2oidList;for(var r in t)if(t[r]==e)return r;return e},kt.asn1.x509.OID.name2oid=function(e){if(e.match(/^[0-9.]+$/))return e;var t=kt.asn1.x509.OID.name2oidList;return void 0===t[e]?"":t[e]},kt.asn1.x509.X509Util={},kt.asn1.x509.X509Util.newCertPEM=function(e){var t=kt.asn1.x509;t.TBSCertificate;return new(0,t.Certificate)(e).getPEM()},void 0!==kt&&kt||(kt={}),void 0!==kt.asn1&&kt.asn1||(kt.asn1={}),void 0!==kt.asn1.cms&&kt.asn1.cms||(kt.asn1.cms={}),kt.asn1.cms.Attribute=function(e){var t=Error,r=kt.asn1,n=r.DERSequence,i=r.DERSet,s=r.DERObjectIdentifier;this.params=null,this.typeOid=null,this.setByParam=function(e){this.params=e},this.getValueArray=function(){throw new t("not yet implemented abstract")},this.tohex=function(){var e=new s({oid:this.typeOid}),t=new i({array:this.getValueArray()});return new n({array:[e,t]}).tohex()},this.getEncodedHex=function(){return this.tohex()}},Nr(kt.asn1.cms.Attribute,kt.asn1.ASN1Object),kt.asn1.cms.ContentType=function(e){var t=kt.asn1;t.cms.ContentType.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.3",this.getValueArray=function(){return[new t.DERObjectIdentifier(this.params.type)]},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.ContentType,kt.asn1.cms.Attribute),kt.asn1.cms.MessageDigest=function(e){var t=kt.asn1,r=t.DEROctetString;t.cms.MessageDigest.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.4",this.getValueArray=function(){return[new r(this.params)]},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.MessageDigest,kt.asn1.cms.Attribute),kt.asn1.cms.SigningTime=function(e){var t=kt.asn1;t.cms.SigningTime.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.5",this.getValueArray=function(){return[new t.x509.Time(this.params)]},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SigningTime,kt.asn1.cms.Attribute),kt.asn1.cms.SigningCertificate=function(e){var t=Error,r=kt,n=r.asn1,i=n.DERSequence,s=n.cms,a=s.ESSCertID;r.crypto;s.SigningCertificate.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.12",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new t("parameter 'array' not specified");for(var r=this.params.array,n=[],s=0;s<r.length;s++){var o=r[s];0!=e.hasis||"string"!=typeof o||-1==o.indexOf("-----BEGIN")&&!jt.isASN1HEX(o)||(o={cert:o}),0!=o.hasis&&0==e.hasis&&(o.hasis=!1),n.push(new a(o))}var u=new i({array:n});return[new i({array:[u]})]},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SigningCertificate,kt.asn1.cms.Attribute),kt.asn1.cms.ESSCertID=function(e){kt.asn1.cms.ESSCertID.superclass.constructor.call(this);var t=Error,r=kt,n=r.asn1,i=n.DEROctetString,s=n.DERSequence,a=n.cms.IssuerSerial;this.params=null,this.getCertHash=function(e,n){if(null!=e.hash)return e.hash;if("string"==typeof e&&-1==e.indexOf("-----BEGIN")&&!jt.isASN1HEX(e))return e;var i,s,a;if("string"==typeof e)i=e;else{if(null==e.cert)throw new t("hash nor cert unspecified");i=e.cert}if(s=-1!=i.indexOf("-----BEGIN")?ar(i):i,"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?s=ar(e):jt.isASN1HEX(e)&&(s=e)),null!=e.alg)a=e.alg;else{if(null==n)throw new t("hash alg unspecified");a=n}return r.crypto.Util.hashHex(s,a)},this.tohex=function(){var e=this.params,t=this.getCertHash(e,"sha1"),r=[];return r.push(new i({hex:t})),("string"==typeof e&&-1!=e.indexOf("-----BEGIN")||null!=e.cert&&0!=e.hasis||null!=e.issuer&&null!=e.serial)&&r.push(new a(e)),new s({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.ESSCertID,kt.asn1.ASN1Object),kt.asn1.cms.SigningCertificateV2=function(e){var t=Error,r=kt,n=r.asn1,i=n.DERSequence,s=(n.x509,n.cms),a=s.ESSCertIDv2;r.crypto;s.SigningCertificateV2.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.47",this.getValueArray=function(){if(null==this.params||null==this.params||null==this.params.array)throw new t("parameter 'array' not specified");for(var r=this.params.array,n=[],s=0;s<r.length;s++){var o=r[s];null==e.alg&&0!=e.hasis||"string"!=typeof o||-1==o.indexOf("-----BEGIN")&&!jt.isASN1HEX(o)||(o={cert:o}),null==o.alg&&null!=e.alg&&(o.alg=e.alg),0!=o.hasis&&0==e.hasis&&(o.hasis=!1),n.push(new a(o))}var u=new i({array:n});return[new i({array:[u]})]},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SigningCertificateV2,kt.asn1.cms.Attribute),kt.asn1.cms.ESSCertIDv2=function(e){kt.asn1.cms.ESSCertIDv2.superclass.constructor.call(this);Error;var t=kt.asn1,r=t.DEROctetString,n=t.DERSequence,i=t.cms.IssuerSerial,s=t.x509.AlgorithmIdentifier;this.params=null,this.tohex=function(){var e=this.params,t=this.getCertHash(e,"sha256"),a=[];return null!=e.alg&&"sha256"!=e.alg&&a.push(new s({name:e.alg})),a.push(new r({hex:t})),("string"==typeof e&&-1!=e.indexOf("-----BEGIN")||null!=e.cert&&0!=e.hasis||null!=e.issuer&&null!=e.serial)&&a.push(new i(e)),new n({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.ESSCertIDv2,kt.asn1.cms.ESSCertID),kt.asn1.cms.IssuerSerial=function(e){var t=Error,r=kt.asn1,n=r.DERInteger,i=r.DERSequence,s=r.cms,a=r.x509.GeneralNames,o=Pr;s.IssuerSerial.superclass.constructor.call(this),this.setByParam=function(e){this.params=e},this.tohex=function(){var e,r,s=this.params;if("string"==typeof s&&-1!=s.indexOf("-----BEGIN")||null!=s.cert){var u;u=null!=s.cert?s.cert:s;var l=new o;l.readCertPEM(u),e=l.getIssuer(),r={hex:l.getSerialNumberHex()}}else{if(null==s.issuer||!s.serial)throw new t("cert or issuer and serial parameter not specified");e=s.issuer,r=s.serial}var c=new a([{dn:e}]),h=new n(r);return new i({array:[c,h]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.IssuerSerial,kt.asn1.ASN1Object),kt.asn1.cms.SignerIdentifier=function(e){var t=kt.asn1,r=(t.DERInteger,t.DERSequence,t.cms),n=r.IssuerAndSerialNumber,i=r.SubjectKeyIdentifier;t.x509.X500Name,Error;r.SignerIdentifier.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if("isssn"==e.type)return new n(e).tohex();if("skid"==e.type)return new i(e).tohex();throw new Error("wrong property for isssn or skid")},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SignerIdentifier,kt.asn1.ASN1Object),kt.asn1.cms.IssuerAndSerialNumber=function(e){var t=kt.asn1,r=t.DERInteger,n=t.DERSequence,i=t.cms,s=t.x509.X500Name,a=Pr,o=Error;i.IssuerAndSerialNumber.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e,t,i=this.params;if("string"==typeof i&&-1!=i.indexOf("-----BEGIN")||null!=i.cert){var u;u=null!=i.cert?i.cert:i;var l=new a;l.readCertPEM(u),e=l.getIssuer(),t={hex:l.getSerialNumberHex()}}else{if(null==i.issuer||!i.serial)throw new o("cert or issuer and serial parameter not specified");e=i.issuer,t=i.serial}var c=new s(e),h=new r(t);return new n({array:[c,h]}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.IssuerAndSerialNumber,kt.asn1.ASN1Object),kt.asn1.cms.SubjectKeyIdentifier=function(e){var t=kt.asn1,r=(t.DERInteger,t.DERSequence,t.ASN1Util.newObject),n=t.cms,i=(n.IssuerAndSerialName,n.SubjectKeyIdentifier,t.x509.X500Name,Pr),s=Error;n.SubjectKeyIdentifier.superclass.constructor.call(this),this.tohex=function(){var e,t=this.params;if(null==t.cert&&null==t.skid)throw new s("property cert nor skid undefined");null!=t.cert?e=new i(t.cert).getExtSubjectKeyIdentifier().kid.hex:null!=t.skid&&(e=t.skid);return r({tag:{tage:"a0",obj:{octstr:{hex:e}}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SubjectKeyIdentifier,kt.asn1.ASN1Object),kt.asn1.cms.AttributeList=function(e){var t=Error,r=kt.asn1,n=r.DERSet,i=r.cms;i.AttributeList.superclass.constructor.call(this),this.params=null,this.hTLV=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if(null!=this.hTLV)return this.hTLV;var r=!0;null!=e.sortflag&&(r=e.sortflag);for(var s=e.array,a=[],o=0;o<s.length;o++){var u=s[o],l=u.attr;if("contentType"==l)a.push(new i.ContentType(u));else if("messageDigest"==l)a.push(new i.MessageDigest(u));else if("signingTime"==l)a.push(new i.SigningTime(u));else if("signingCertificate"==l)a.push(new i.SigningCertificate(u));else if("signingCertificateV2"==l)a.push(new i.SigningCertificateV2(u));else if("signaturePolicyIdentifier"==l)a.push(new kt.asn1.cades.SignaturePolicyIdentifier(u));else{if("signatureTimeStamp"!=l&&"timeStampToken"!=l)throw new t("unknown attr: "+l);a.push(new kt.asn1.cades.SignatureTimeStamp(u))}}var c=new n({array:a,sortflag:r});return this.hTLV=c.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.AttributeList,kt.asn1.ASN1Object),kt.asn1.cms.SignerInfo=function(e){var t=Error,r=kt,n=r.asn1,i=n.DERInteger,s=n.DEROctetString,a=n.DERSequence,o=n.DERTaggedObject,u=n.cms,l=u.SignerIdentifier,c=u.AttributeList,h=(u.ContentType,u.EncapsulatedContentInfo,u.MessageDigest,u.SignedData,n.x509.AlgorithmIdentifier),p=r.crypto,f=Rr;u.SignerInfo.superclass.constructor.call(this),this.params=null,this.sign=function(){var e=this.params,t=e.sigalg,r=new c(e.sattrs).tohex(),n=f.getKey(e.signkey),i=new p.Signature({alg:t});i.init(n),i.updateHex(r);var s=i.sign();e.sighex=s},this.tohex=function(){var e=this.params,r=[];if(r.push(new i({int:e.version})),r.push(new l(e.id)),r.push(new h({name:e.hashalg})),null!=e.sattrs){var n=new c(e.sattrs);try{r.push(new o({tag:"a0",explicit:!1,obj:n}))}catch(e){throw new t("si sattr error: "+e)}}if(null!=e.sigalgfield?r.push(new h({name:e.sigalgfield})):r.push(new h({name:e.sigalg})),null==e.sighex&&null!=e.signkey&&this.sign(),r.push(new s({hex:e.sighex})),null!=e.uattrs){n=new c(e.uattrs);try{r.push(new o({tag:"a1",explicit:!1,obj:n}))}catch(e){throw new t("si uattr error: "+e)}}return new a({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SignerInfo,kt.asn1.ASN1Object),kt.asn1.cms.EncapsulatedContentInfo=function(e){var t=kt.asn1,r=t.DERTaggedObject,n=t.DERSequence,i=t.DERObjectIdentifier,s=t.DEROctetString;t.cms.EncapsulatedContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];if(t.push(new i(e.type)),null!=e.content&&(null!=e.content.hex||null!=e.content.str)&&1!=e.isDetached){var a=new s(e.content),o=new r({tag:"a0",explicit:!0,obj:a});t.push(o)}return new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.EncapsulatedContentInfo,kt.asn1.ASN1Object),kt.asn1.cms.ContentInfo=function(e){var t=kt.asn1,r=t.DERTaggedObject,n=t.DERSequence,i=t.DERObjectIdentifier;t.x509.OID.name2obj;kt.asn1.cms.ContentInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];t.push(new i(e.type));var s=new r({tag:"a0",explicit:!0,obj:e.obj});return t.push(s),new n({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.ContentInfo,kt.asn1.ASN1Object),kt.asn1.cms.SignedData=function(e){Error;var t=kt.asn1,r=(t.ASN1Object,t.DERInteger),n=t.DERSet,i=t.DERSequence,s=(t.DERTaggedObject,t.cms),a=s.EncapsulatedContentInfo,o=s.SignerInfo,u=s.ContentInfo,l=s.CertificateSet,c=s.RevocationInfoChoices,h=t.x509.AlgorithmIdentifier;kt.asn1.cms.SignedData.superclass.constructor.call(this),this.params=null,this.checkAndFixParam=function(){var e=this.params;this._setDigestAlgs(e),this._setContentTypeByEContent(e),this._setMessageDigestByEContent(e),this._setSignerInfoVersion(e),this._setSignedDataVersion(e)},this._setDigestAlgs=function(e){for(var t={},r=e.sinfos,n=0;n<r.length;n++){t[r[n].hashalg]=1}e.hashalgs=Object.keys(t).sort()},this._setContentTypeByEContent=function(e){for(var t=e.econtent.type,r=e.sinfos,n=0;n<r.length;n++){var i=r[n];this._getAttrParamByName(i,"contentType").type=t}},this._setMessageDigestByEContent=function(e){var t=e.econtent,r=(e.econtent.type,t.content.hex);null==r&&"data"==t.type&&null!=t.content.str&&(r=tr(t.content.str));for(var n=e.sinfos,i=0;i<n.length;i++){var s=n[i],a=s.hashalg,o=this._getAttrParamByName(s,"messageDigest"),u=kt.crypto.Util.hashHex(r,a);o.hex=u}},this._getAttrParamByName=function(e,t){for(var r=e.sattrs.array,n=0;n<r.length;n++)if(r[n].attr==t)return r[n]},this._setSignerInfoVersion=function(e){for(var t=e.sinfos,r=0;r<t.length;r++){var n=t[r],i=1;"skid"==n.id.type&&(i=3),n.version=i}},this._setSignedDataVersion=function(e){var t=this._getSignedDataVersion(e);e.version=t},this._getSignedDataVersion=function(e){if(null!=e.revinfos)for(var t=e.revinfos,r=0;r<t.length;r++){if(null!=t[r].ocsp)return 5}var n=e.sinfos;for(r=0;r<n.length;r++){if(3==e.sinfos[r].version)return 3}return"data"!=e.econtent.type?3:1},this.tohex=function(){var e=this.params;null!=this.getEncodedHexPrepare&&this.getEncodedHexPrepare(),1!=e.fixed&&this.checkAndFixParam();var t=[];t.push(new r({int:e.version}));for(var s=[],u=0;u<e.hashalgs.length;u++){var p=e.hashalgs[u];s.push(new h({name:p}))}t.push(new n({array:s})),t.push(new a(e.econtent)),null!=e.certs&&t.push(new l(e.certs)),null!=e.revinfos&&t.push(new c(e.revinfos));var f=[];for(u=0;u<e.sinfos.length;u++){var d=e.sinfos[u];f.push(new o(d))}return t.push(new n({array:f})),new i({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.getContentInfo=function(){return new u({type:"signed-data",obj:this})},this.getContentInfoEncodedHex=function(){return this.getContentInfo().tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.SignedData,kt.asn1.ASN1Object),kt.asn1.cms.CertificateSet=function(e){kt.asn1.cms.CertificateSet.superclass.constructor.call(this);var t=Error,r=kt.asn1,n=r.DERTaggedObject,i=r.DERSet,s=r.ASN1Object;this.params=null,this.tohex=function(){var e,r=this.params,a=[];if(r instanceof Array)e=r;else{if(null==r.array)throw new t("cert array not specified");e=r.array}for(var o=0;o<e.length;o++){var u=ar(e[o]),l=new s;l.hTLV=u,a.push(l)}var c={array:a};0==r.sortflag&&(c.sortflag=!1);var h=new i(c);return new n({tag:"a0",explicit:!1,obj:h}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.CertificateSet,kt.asn1.ASN1Object),kt.asn1.cms.RevocationInfoChoices=function(e){kt.asn1.cms.RevocationInfoChoices.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new Error("params is not array");for(var t=[],r=0;r<e.length;r++)t.push(new kt.asn1.cms.RevocationInfoChoice(e[r]));return kt.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:{set:t}}}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.RevocationInfoChoices,kt.asn1.ASN1Object),kt.asn1.cms.RevocationInfoChoice=function(e){kt.asn1.cms.RevocationInfoChoice.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(null!=e.crl&&"string"==typeof e.crl){var t=e.crl;return-1!=e.crl.indexOf("-----BEGIN")&&(t=ar(e.crl)),t}if(null!=e.ocsp)return kt.asn1.ASN1Util.newObject({tag:{tagi:"a1",obj:new kt.asn1.cms.OtherRevocationFormat(e)}}).tohex();throw new Error("property crl or ocsp undefined")},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.RevocationInfoChoice,kt.asn1.ASN1Object),kt.asn1.cms.OtherRevocationFormat=function(e){kt.asn1.cms.OtherRevocationFormat.superclass.constructor.call(this);var t=Error,r=kt,n=r.asn1.ASN1Util.newObject,i=r.lang.String.isHex;this.params=null,this.tohex=function(){var e=this.params;if(null==e.ocsp)throw new t("property ocsp not specified");if(!i(e.ocsp)||!jt.isASN1HEX(e.ocsp))throw new t("ocsp value not ASN.1 hex string");return n({seq:[{oid:"1.3.6.1.5.5.7.16.2"},{asn1:{tlv:e.ocsp}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cms.OtherRevocationFormat,kt.asn1.ASN1Object),kt.asn1.cms.CMSUtil=new function(){},kt.asn1.cms.CMSUtil.newSignedData=function(e){return new kt.asn1.cms.SignedData(e)},kt.asn1.cms.CMSUtil.verifySignedData=function(e){var t=kt,r=t.asn1,n=r.cms,i=(n.SignerInfo,n.SignedData,n.SigningTime,n.SigningCertificate,n.SigningCertificateV2,r.cades.SignaturePolicyIdentifier,t.lang.String.isHex),s=jt,a=s.getVbyList,o=s.getTLVbyList,u=s.getIdxbyList,l=s.getChildIdx,c=s.getTLV,h=s.oidname,p=t.crypto.Util.hashHex;void 0===e.cms&&i(e.cms);var f=e.cms,d=function(e,t){var r=t.idx;t.signerid_issuer1=o(e,r,[1,0],"30"),t.signerid_serial1=a(e,r,[1,1],"02"),t.hashalg=h(a(e,r,[2,0],"06"));var n=u(e,r,[3],"a0");t.idxSignedAttrs=n,g(e,t,n);var i=l(e,r).length;if(i<6)throw"malformed SignerInfo";t.sigalg=h(a(e,r,[i-2,0],"06")),t.sigval=a(e,r,[i-1],"04")},g=function(e,t,r){var n=l(e,r);t.signedAttrIdxList=n;for(var i=0;i<n.length;i++){var s,o=n[i],u=a(e,o,[0],"06");"2a864886f70d010905"===u?(s=Zt(a(e,o,[1,0])),t.saSigningTime=s):"2a864886f70d010904"===u&&(s=a(e,o,[1,0],"04"),t.saMessageDigest=s)}},m=function(e,t,r,n){r.verifyDetail={};var i=r.verifyDetail,s=t.parse.econtent,a=r.hashalg,o=r.saMessageDigest;i.validMessageDigest=!1,p(s,a)===o&&(i.validMessageDigest=!0),function(e,t,r,n){var i,s=t.parse.certsIdx;if(void 0===t.certs){i=[],t.certkeys=[];for(var a=l(e,s),o=0;o<a.length;o++){var u=c(e,a[o]),h=new Pr;h.readCertHex(u),i[o]=h,t.certkeys[o]=h.getPublicKey()}t.certs=i}else i=t.certs;for(t.cccc=i.length,t.cccci=a.length,o=0;o<i.length;o++){var p=h.getIssuerHex(),f=h.getSerialNumberHex();r.signerid_issuer1===p&&r.signerid_serial1===f&&(r.certkey_idx=o)}}(e,t,r),i.validSignatureValue=!1;var u=r.sigalg,h="31"+c(e,r.idxSignedAttrs).substr(2);r.signedattrshex=h;var f=t.certs[r.certkey_idx].getPublicKey(),d=new kt.crypto.Signature({alg:u});d.init(f),d.updateHex(h);var g=d.verify(r.sigval);i.validSignatureValue_isValid=g,!0===g&&(i.validSignatureValue=!0),r.isValid=!1,i.validMessageDigest&&i.validSignatureValue&&(r.isValid=!0)},y={isValid:!1,parse:{}};return function(e,t){if("2a864886f70d010702"!==a(e,0,[0],"06"))return t;t.cmsType="signedData",t.econtent=a(e,0,[1,0,2,1,0]),function(e,t){for(var r,n=3;n<6;n++)if(void 0!==(r=u(e,0,[1,0,n]))){var i=e.substr(r,2);"a0"===i&&(t.certsIdx=r),"a1"===i&&(t.revinfosIdx=r),"31"===i&&(t.signerinfosIdx=r)}}(e,t),t.signerInfos=[],function(e,t){var r=t.signerinfosIdx;if(void 0!==r){var n=l(e,r);t.signerInfoIdxList=n;for(var i=0;i<n.length;i++){var s={idx:n[i]};d(e,s),t.signerInfos.push(s)}}}(e,t)}(f,y.parse),function(e,t){for(var r=t.parse.signerInfos,n=r.length,i=!0,s=0;s<n;s++){var a=r[s];m(e,t,a,s),a.isValid||(i=!1)}t.isValid=i}(f,y),y},kt.asn1.cms.CMSParser=function(){var e=Error,t=Pr,r=new t,n=jt,i=n.getV,s=n.getTLV,a=(n.getIdxbyList,n.getTLVbyList),o=n.getTLVbyListEx,u=n.getVbyList,l=n.getVbyListEx,c=n.getChildIdx;this.getCMSSignedData=function(e){var t=a(e,0,[1,0]);return this.getSignedData(t)},this.getSignedData=function(e){var t=c(e,0),r={},n=i(e,t[0]),a=parseInt(n,16);r.version=a;var u=s(e,t[1]);r.hashalgs=this.getHashAlgArray(u);var l=s(e,t[2]);r.econtent=this.getEContent(l);var h=o(e,0,["[0]"]);null!=h&&(r.certs=this.getCertificateSet(h));o(e,0,["[1]"]);var p=o(e,0,[3]);return r.sinfos=this.getSignerInfos(p),r},this.getHashAlgArray=function(e){for(var r=c(e,0),n=new t,i=[],a=0;a<r.length;a++){var o=s(e,r[a]),u=n.getAlgorithmIdentifierName(o);i.push(u)}return i},this.getEContent=function(e){var t={},r=u(e,0,[0]),n=u(e,0,[1,0]);return t.type=kt.asn1.x509.OID.oid2name(jt.hextooidstr(r)),t.content={hex:n},t},this.getSignerInfos=function(e){for(var t=[],r=c(e,0),n=0;n<r.length;n++){var i=s(e,r[n]),a=this.getSignerInfo(i);t.push(a)}return t},this.getSignerInfo=function(e){var t={},i=c(e,0),a=n.getInt(e,i[0],-1);-1!=a&&(t.version=a);var u=s(e,i[1]),h=this.getIssuerAndSerialNumber(u);t.id=h;var p=s(e,i[2]),f=r.getAlgorithmIdentifierName(p);t.hashalg=f;var d=o(e,0,["[0]"]);if(null!=d){var g=this.getAttributeList(d);t.sattrs=g}var m=o(e,0,[3]),y=r.getAlgorithmIdentifierName(m);t.sigalg=y;var E=l(e,0,[4]);t.sighex=E;var v=o(e,0,["[1]"]);if(null!=v){var T=this.getAttributeList(v);t.uattrs=T}return t},this.getSignerIdentifier=function(e){if("30"==e.substr(0,2))return this.getIssuerAndSerialNumber(e);throw new Error("SKID of signerIdentifier not supported")},this.getIssuerAndSerialNumber=function(e){var t={type:"isssn"},n=c(e,0),a=s(e,n[0]);t.issuer=r.getX500Name(a);var o=i(e,n[1]);return t.serial={hex:o},t},this.getAttributeList=function(e){for(var t=[],r=c(e,0),n=0;n<r.length;n++){var i=s(e,r[n]),a=this.getAttribute(i);t.push(a)}return{array:t}},this.getAttribute=function(e){var t={},r=c(e,0),i=n.getOID(e,r[0]),a=kt.asn1.x509.OID.oid2name(i);t.attr=a;var o=s(e,r[1]),u=c(o,0);if(1==u.length)t.valhex=s(o,u[0]);else{for(var l=[],h=0;h<u.length;h++)l.push(s(o,u[h]));t.valhex=l}return"contentType"==a?this.setContentType(t):"messageDigest"==a?this.setMessageDigest(t):"signingTime"==a?this.setSigningTime(t):"signingCertificate"==a?this.setSigningCertificate(t):"signingCertificateV2"==a?this.setSigningCertificateV2(t):"signaturePolicyIdentifier"==a&&this.setSignaturePolicyIdentifier(t),t},this.setContentType=function(e){var t=n.getOIDName(e.valhex,0,null);null!=t&&(e.type=t,delete e.valhex)},this.setSigningTime=function(e){var t=Zt(i(e.valhex,0));e.str=t,delete e.valhex},this.setMessageDigest=function(e){var t=i(e.valhex,0);e.hex=t,delete e.valhex},this.setSigningCertificate=function(e){var t=c(e.valhex,0);if(t.length>0){for(var r=s(e.valhex,t[0]),n=c(r,0),i=[],a=0;a<n.length;a++){var o=s(r,n[a]),u=this.getESSCertID(o);i.push(u)}e.array=i}if(t.length>1){var l=s(e.valhex,t[1]);e.polhex=l}delete e.valhex},this.setSignaturePolicyIdentifier=function(e){var r=c(e.valhex,0);if(r.length>0){var a=n.getOID(e.valhex,r[0]);e.oid=a}if(r.length>1){var o=new t,u=c(e.valhex,r[1]),l=s(e.valhex,u[0]),h=o.getAlgorithmIdentifierName(l);e.alg=h;var p=i(e.valhex,u[1]);e.hash=p}delete e.valhex},this.setSigningCertificateV2=function(e){var t=c(e.valhex,0);if(t.length>0){for(var r=s(e.valhex,t[0]),n=c(r,0),i=[],a=0;a<n.length;a++){var o=s(r,n[a]),u=this.getESSCertIDv2(o);i.push(u)}e.array=i}if(t.length>1){var l=s(e.valhex,t[1]);e.polhex=l}delete e.valhex},this.getESSCertID=function(e){var t={},r=c(e,0);if(r.length>0){var n=i(e,r[0]);t.hash=n}if(r.length>1){var a=s(e,r[1]),o=this.getIssuerSerial(a);null!=o.serial&&(t.serial=o.serial),null!=o.issuer&&(t.issuer=o.issuer)}return t},this.getESSCertIDv2=function(t){var n={},a=c(t,0);if(a.length<1||3<a.length)throw new e("wrong number of elements");var o=0;if("30"==t.substr(a[0],2)){var u=s(t,a[0]);n.alg=r.getAlgorithmIdentifierName(u),o++}else n.alg="sha256";var l=i(t,a[o]);if(n.hash=l,a.length>o+1){var h=s(t,a[o+1]),p=this.getIssuerSerial(h);n.issuer=p.issuer,n.serial=p.serial}return n},this.getIssuerSerial=function(e){var t={},n=c(e,0),a=s(e,n[0]),o=r.getGeneralNames(a)[0].dn;t.issuer=o;var u=i(e,n[1]);return t.serial={hex:u},t},this.getCertificateSet=function(e){for(var t=c(e,0),r=[],n=0;n<t.length;n++){var i=s(e,t[n]);if("30"==i.substr(0,2)){var a=sr(i,"CERTIFICATE");r.push(a)}}return{array:r,sortflag:!1}}},void 0!==kt&&kt||(kt={}),void 0!==kt.asn1&&kt.asn1||(kt.asn1={}),void 0!==kt.asn1.tsp&&kt.asn1.tsp||(kt.asn1.tsp={}),kt.asn1.tsp.TimeStampToken=function(e){var t=kt.asn1.tsp;t.TimeStampToken.superclass.constructor.call(this),this.params=null,this.getEncodedHexPrepare=function(){var e=new t.TSTInfo(this.params.econtent.content);this.params.econtent.content.hex=e.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.TimeStampToken,kt.asn1.cms.SignedData),kt.asn1.tsp.TSTInfo=function(e){Error;var t=kt.asn1,r=t.DERSequence,n=t.DERInteger,i=t.DERBoolean,s=t.DERGeneralizedTime,a=t.DERObjectIdentifier,o=t.DERTaggedObject,u=t.tsp,l=u.MessageImprint,c=u.Accuracy,h=(t.x509.X500Name,t.x509.GeneralName);if(u.TSTInfo.superclass.constructor.call(this),this.dVersion=new n({int:1}),this.dPolicy=null,this.dMessageImprint=null,this.dSerial=null,this.dGenTime=null,this.dAccuracy=null,this.dOrdering=null,this.dNonce=null,this.dTsa=null,this.tohex=function(){var e=[this.dVersion];if(null==this.dPolicy)throw new Error("policy shall be specified.");if(e.push(this.dPolicy),null==this.dMessageImprint)throw new Error("messageImprint shall be specified.");if(e.push(this.dMessageImprint),null==this.dSerial)throw new Error("serialNumber shall be specified.");if(e.push(this.dSerial),null==this.dGenTime)throw new Error("genTime shall be specified.");e.push(this.dGenTime),null!=this.dAccuracy&&e.push(this.dAccuracy),null!=this.dOrdering&&e.push(this.dOrdering),null!=this.dNonce&&e.push(this.dNonce),null!=this.dTsa&&e.push(this.dTsa);var t=new r({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e){if("string"==typeof e.policy){if(!e.policy.match(/^[0-9.]+$/))throw"policy shall be oid like 0.1.4.134";this.dPolicy=new a({oid:e.policy})}void 0!==e.messageImprint&&(this.dMessageImprint=new l(e.messageImprint)),void 0!==e.serial&&(this.dSerial=new n(e.serial)),void 0!==e.genTime&&(this.dGenTime=new s(e.genTime)),void 0!==e.accuracy&&(this.dAccuracy=new c(e.accuracy)),void 0!==e.ordering&&1==e.ordering&&(this.dOrdering=new i),void 0!==e.nonce&&(this.dNonce=new n(e.nonce)),void 0!==e.tsa&&(this.dTsa=new o({tag:"a0",explicit:!0,obj:new h({dn:e.tsa})}))}},Nr(kt.asn1.tsp.TSTInfo,kt.asn1.ASN1Object),kt.asn1.tsp.Accuracy=function(e){var t=kt.asn1,r=t.ASN1Util.newObject;t.tsp.Accuracy.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return null!=e.seconds&&"number"==typeof e.seconds&&t.push({int:e.seconds}),null!=e.millis&&"number"==typeof e.millis&&t.push({tag:{tagi:"80",obj:{int:e.millis}}}),null!=e.micros&&"number"==typeof e.micros&&t.push({tag:{tagi:"81",obj:{int:e.micros}}}),r({seq:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.Accuracy,kt.asn1.ASN1Object),kt.asn1.tsp.MessageImprint=function(e){var t=kt.asn1,r=t.DERSequence,n=t.DEROctetString,i=t.x509.AlgorithmIdentifier;t.tsp.MessageImprint.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=new i({name:e.alg}),s=new n({hex:e.hash});return new r({array:[t,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.tsp.MessageImprint,kt.asn1.ASN1Object),kt.asn1.tsp.TimeStampReq=function(e){var t=kt.asn1,r=t.DERSequence,n=t.DERInteger,i=t.DERBoolean,s=(t.ASN1Object,t.DERObjectIdentifier),a=t.tsp,o=a.MessageImprint;a.TimeStampReq.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return t.push(new n({int:1})),e.messageImprint instanceof kt.asn1.ASN1Object?t.push(e.messageImprint):t.push(new o(e.messageImprint)),null!=e.policy&&t.push(new s(e.policy)),null!=e.nonce&&t.push(new n(e.nonce)),1==e.certreq&&t.push(new i),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.TimeStampReq,kt.asn1.ASN1Object),kt.asn1.tsp.TimeStampResp=function(e){var t=kt.asn1,r=t.DERSequence,n=(t.ASN1Object,t.tsp),i=n.PKIStatusInfo;n.TimeStampResp.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,s=[];if(null!=e.econtent||null!=e.tst)if(null!=e.statusinfo?s.push(new i(e.statusinfo)):s.push(new i("granted")),null!=e.econtent)s.push(new n.TimeStampToken(e).getContentInfo());else{if(!(e.tst instanceof t.ASN1Object))throw new Error("improper member tst value");s.push(e.tst)}else{if(null==e.statusinfo)throw new Error("parameter for token nor statusinfo not specified");s.push(new i(e.statusinfo))}return new r({array:s}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.TimeStampResp,kt.asn1.ASN1Object),kt.asn1.tsp.PKIStatusInfo=function(e){var t=Error,r=kt.asn1,n=r.DERSequence,i=r.tsp,s=i.PKIStatus,a=i.PKIFreeText,o=i.PKIFailureInfo;i.PKIStatusInfo.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,r=[];if("string"==typeof e)r.push(new s(e));else{if(null==e.status)throw new t("property 'status' unspecified");r.push(new s(e.status)),null!=e.statusstr&&r.push(new a(e.statusstr)),null!=e.failinfo&&r.push(new o(e.failinfo))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.PKIStatusInfo,kt.asn1.ASN1Object),kt.asn1.tsp.PKIStatus=function(e){var t=Error,r=kt.asn1,n=r.DERInteger;r.tsp.PKIStatus.superclass.constructor.call(this);var i={granted:0,grantedWithMods:1,rejection:2,waiting:3,revocationWarning:4,revocationNotification:5};this.params=null,this.tohex=function(){var e,r=this.params;if("string"==typeof r)try{e=i[r]}catch(e){throw new t("undefined name: "+r)}else{if("number"!=typeof r)throw new t("unsupported params");e=r}return new n({int:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.PKIStatus,kt.asn1.ASN1Object),kt.asn1.tsp.PKIFreeText=function(e){var t=Error,r=kt.asn1,n=r.DERSequence,i=r.DERUTF8String;r.tsp.PKIFreeText.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(!e instanceof Array)throw new t("wrong params: not array");for(var r=[],s=0;s<e.length;s++)r.push(new i({str:e[s]}));return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.PKIFreeText,kt.asn1.ASN1Object),kt.asn1.tsp.PKIFailureInfo=function(e){var t=Error,r=kt.asn1,n=r.DERBitString,i=r.tsp.PKIFailureInfo,s={badAlg:0,badRequest:2,badDataFormat:5,timeNotAvailable:14,unacceptedPolicy:15,unacceptedExtension:16,addInfoNotAvailable:17,systemFailure:25};i.superclass.constructor.call(this),this.params=null,this.getBinValue=function(){var e=this.params,r=0;if("number"==typeof e&&0<=e&&e<=25){for(var n=(r|=1<<e).toString(2),i="",a=n.length-1;a>=0;a--)i+=n[a];return i}if("string"==typeof e&&null!=s[e])return wr([e],s);if("object"==typeof e&&null!=e.length)return wr(e,s);throw new t("wrong params")},this.tohex=function(){this.params;var e=this.getBinValue();return new n({bin:e}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.tsp.PKIFailureInfo,kt.asn1.ASN1Object),kt.asn1.tsp.AbstractTSAAdapter=function(e){this.getTSTHex=function(e,t){throw"not implemented yet"}},kt.asn1.tsp.SimpleTSAAdapter=function(e){var t=kt,r=t.asn1.tsp,n=t.crypto.Util.hashHex;r.SimpleTSAAdapter.superclass.constructor.call(this),this.params=null,this.serial=0,this.getTSTHex=function(e,t){var i=n(e,t);this.params.econtent.content.messageImprint={alg:t,hash:i},this.params.econtent.content.serial={int:this.serial++};var s=Math.floor(1e9*Math.random());return this.params.econtent.content.nonce={int:s},new r.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},Nr(kt.asn1.tsp.SimpleTSAAdapter,kt.asn1.tsp.AbstractTSAAdapter),kt.asn1.tsp.FixedTSAAdapter=function(e){var t=kt,r=t.asn1.tsp,n=t.crypto.Util.hashHex;r.FixedTSAAdapter.superclass.constructor.call(this),this.params=null,this.getTSTHex=function(e,t){var i=n(e,t);return this.params.econtent.content.messageImprint={alg:t,hash:i},new r.TimeStampToken(this.params).getContentInfoEncodedHex()},void 0!==e&&(this.params=e)},Nr(kt.asn1.tsp.FixedTSAAdapter,kt.asn1.tsp.AbstractTSAAdapter),kt.asn1.tsp.TSPUtil=new function(){},kt.asn1.tsp.TSPUtil.newTimeStampToken=function(e){return new kt.asn1.tsp.TimeStampToken(e)},kt.asn1.tsp.TSPUtil.parseTimeStampReq=function(e){return(new kt.asn1.tsp.TSPParser).getTimeStampReq(e)},kt.asn1.tsp.TSPUtil.parseMessageImprint=function(e){return(new kt.asn1.tsp.TSPParser).getMessageImprint(e)},kt.asn1.tsp.TSPParser=function(){Error;var e=new Pr,t=jt,r=t.getV,n=t.getTLV,i=t.getIdxbyList,s=(t.getTLVbyListEx,t.getChildIdx),a=["granted","grantedWithMods","rejection","waiting","revocationWarning","revocationNotification"],o={0:"badAlg",2:"badRequest",5:"badDataFormat",14:"timeNotAvailable",15:"unacceptedPolicy",16:"unacceptedExtension",17:"addInfoNotAvailable",25:"systemFailure"};this.getResponse=function(e){var t=s(e,0);if(1==t.length)return this.getPKIStatusInfo(n(e,t[0]));if(t.length>1){var r=this.getPKIStatusInfo(n(e,t[0])),i=n(e,t[1]),a=this.getToken(i);return a.statusinfo=r,a}},this.getToken=function(e){var t=(new kt.asn1.cms.CMSParser).getCMSSignedData(e);return this.setTSTInfo(t),t},this.setTSTInfo=function(e){var t=e.econtent;if("tstinfo"==t.type){var r=t.content.hex,n=this.getTSTInfo(r);t.content=n}},this.getTSTInfo=function(t){var i={},a=s(t,0),o=r(t,a[1]);i.policy=_r(o);var u=n(t,a[2]);i.messageImprint=this.getMessageImprint(u);var l=r(t,a[3]);i.serial={hex:l};var c=r(t,a[4]);i.genTime={str:Zt(c)};var h=0;if(a.length>5&&"30"==t.substr(a[5],2)){var p=n(t,a[5]);i.accuracy=this.getAccuracy(p),h++}a.length>5+h&&"01"==t.substr(a[5+h],2)&&("ff"==r(t,a[5+h])&&(i.ordering=!0),h++);if(a.length>5+h&&"02"==t.substr(a[5+h],2)){var f=r(t,a[5+h]);i.nonce={hex:f},h++}if(a.length>5+h&&"a0"==t.substr(a[5+h],2)){var d=n(t,a[5+h]);d="30"+d.substr(2),pGeneralNames=e.getGeneralNames(d);var g=pGeneralNames[0].dn;i.tsa=g,h++}if(a.length>5+h&&"a1"==t.substr(a[5+h],2)){var m=n(t,a[5+h]);m="30"+m.substr(2);var y=e.getExtParamArray(m);i.ext=y,h++}return i},this.getAccuracy=function(e){for(var t={},n=s(e,0),i=0;i<n.length;i++){var a=e.substr(n[i],2),o=r(e,n[i]),u=parseInt(o,16);"02"==a?t.seconds=u:"80"==a?t.millis=u:"81"==a&&(t.micros=u)}return t},this.getMessageImprint=function(e){if("30"!=e.substr(0,2))throw new Error("head of messageImprint hex shall be x30");var n={},a=(s(e,0),i(e,0,[0,0])),o=r(e,a),u=t.hextooidstr(o),l=kt.asn1.x509.OID.oid2name(u);if(""==l)throw new Error("hashAlg name undefined: "+u);var c=l,h=i(e,0,[1]);return n.alg=c,n.hash=r(e,h),n},this.getPKIStatusInfo=function(e){var t={},i=s(e,0),o=0;try{var u=r(e,i[0]),l=parseInt(u,16);t.status=a[l]}catch(e){}if(i.length>1&&"30"==e.substr(i[1],2)){var c=n(e,i[1]);t.statusstr=this.getPKIFreeText(c),o++}if(i.length>o&&"03"==e.substr(i[1+o],2)){var h=n(e,i[1+o]);t.failinfo=this.getPKIFailureInfo(h)}return t},this.getPKIFreeText=function(e){for(var r=[],n=s(e,0),i=0;i<n.length;i++)r.push(t.getString(e,n[i]));return r},this.getPKIFailureInfo=function(e){var r=t.getInt(e,0);return null!=o[r]?o[r]:r},this.getTimeStampReq=function(e){var i={certreq:!1},a=s(e,0);if(a.length<2)throw new Error("TimeStampReq must have at least 2 items");var o=n(e,a[1]);i.messageImprint=kt.asn1.tsp.TSPUtil.parseMessageImprint(o);for(var u=2;u<a.length;u++){var l=a[u],c=e.substr(l,2);if("06"==c){var h=r(e,l);i.policy=t.hextooidstr(h)}"02"==c&&(i.nonce=r(e,l)),"01"==c&&(i.certreq=!0)}return i}},void 0!==kt&&kt||(kt={}),void 0!==kt.asn1&&kt.asn1||(kt.asn1={}),void 0!==kt.asn1.cades&&kt.asn1.cades||(kt.asn1.cades={}),kt.asn1.cades.SignaturePolicyIdentifier=function(e){var t=kt.asn1.cades,r=t.SignaturePolicyId;t.SignaturePolicyIdentifier.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.15",this.params=null,this.getValueArray=function(){return[new r(this.params)]},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.SignaturePolicyIdentifier,kt.asn1.cms.Attribute),kt.asn1.cades.SignaturePolicyId=function(e){var t=kt.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,i=(t.x509.AlgorithmIdentifier,t.cades),s=i.SignaturePolicyId,a=i.OtherHashAlgAndValue;s.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,t=[];return t.push(new n(e.oid)),t.push(new a(e)),new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.SignaturePolicyId,kt.asn1.ASN1Object),kt.asn1.cades.OtherHashAlgAndValue=function(e){var t=Error,r=kt.asn1,n=r.DERSequence,i=r.DEROctetString,s=r.x509.AlgorithmIdentifier;r.cades.OtherHashAlgAndValue.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if(null==e.alg)throw new t("property 'alg' not specified");if(null==e.hash&&null==e.cert)throw new t("property 'hash' nor 'cert' not specified");var r=null;if(null!=e.hash)r=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var a=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(a=ar(e.cert)),r=kt.crypto.Util.hashHex(a,e.alg)}var o=[];return o.push(new s({name:e.alg})),o.push(new i({hex:r})),new n({array:o}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.OtherHashAlgAndValue,kt.asn1.ASN1Object),kt.asn1.cades.OtherHashValue=function(e){kt.asn1.cades.OtherHashValue.superclass.constructor.call(this);var t=Error,r=kt,n=(r.lang.String.isHex,r.asn1.DEROctetString);r.crypto.Util.hashHex;this.params=null,this.tohex=function(){var e=this.params;if(null==e.hash&&null==e.cert)throw new t("hash or cert not specified");var r=null;if(null!=e.hash)r=e.hash;else if(null!=e.cert){if("string"!=typeof e.cert)throw new t("cert not string");var i=e.cert;-1!=e.cert.indexOf("-----BEGIN")&&(i=ar(e.cert)),r=kt.crypto.Util.hashHex(i,"sha1")}return new n({hex:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.OtherHashValue,kt.asn1.ASN1Object),kt.asn1.cades.SignatureTimeStamp=function(e){var t=Error,r=kt,n=r.lang.String.isHex,i=r.asn1,s=i.ASN1Object;i.x509;i.cades.SignatureTimeStamp.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.14",this.params=null,this.getValueArray=function(){var e=this.params;if(null!=e.tst){if(n(e.tst))return(i=new s).hTLV=e.tst,[i];if(e.tst instanceof s)return[e.tst];throw new t("params.tst has wrong value")}if(null!=e.res){var r=e.res;if(r instanceof s&&(r=r.tohex()),"string"!=typeof r||!n(r))throw new t("params.res has wrong value");var i;jt.getTLVbyList(r,0,[1]);return(i=new s).hTLV=e.tst,[i]}},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.SignatureTimeStamp,kt.asn1.cms.Attribute),kt.asn1.cades.CompleteCertificateRefs=function(e){var t=Error,r=kt,n=r.asn1,i=n.DERSequence,s=n.cades,a=s.OtherCertID,o=r.lang.String.isHex;s.CompleteCertificateRefs.superclass.constructor.call(this),this.typeOid="1.2.840.113549.1.9.16.2.21",this.params=null,this.getValueArray=function(){for(var e=this.params,r=[],n=0;n<e.array.length;n++){var s=e.array[n];if("string"==typeof s)if(-1!=s.indexOf("-----BEGIN"))s={cert:s};else{if(!o(s))throw new t("unsupported value: "+s);s={hash:s}}null!=e.alg&&null==s.alg&&(s.alg=e.alg),null!=e.hasis&&null==s.hasis&&(s.hasis=e.hasis);var u=new a(s);r.push(u)}return[new i({array:r})]},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.CompleteCertificateRefs,kt.asn1.cms.Attribute),kt.asn1.cades.OtherCertID=function(e){var t=kt.asn1,r=t.DERSequence,n=t.cms.IssuerSerial,i=t.cades,s=i.OtherHashValue,a=i.OtherHashAlgAndValue;i.OtherCertID.superclass.constructor.call(this),this.params=e,this.tohex=function(){var e=this.params;"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?e={cert:e}:_isHex(e)&&(e={hash:e}));var t=[],i=null;if(i=null!=e.alg?new a(e):new s(e),t.push(i),null!=e.cert&&1==e.hasis||null!=e.issuer&&null!=e.serial){var o=new n(e);t.push(o)}return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.OtherCertID,kt.asn1.ASN1Object),kt.asn1.cades.OtherHash=function(e){Error;var t=kt,r=t.asn1,n=(r.cms,r.cades),i=n.OtherHashAlgAndValue,s=n.OtherHashValue,a=(t.crypto.Util.hashHex,t.lang.String.isHex);n.OtherHash.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?e={cert:e}:a(e)&&(e={hash:e}));return(null!=e.alg?new i(e):new s(e)).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.cades.OtherHash,kt.asn1.ASN1Object),kt.asn1.cades.CAdESUtil=new function(){},kt.asn1.cades.CAdESUtil.parseSignedDataForAddingUnsigned=function(e){return(new kt.asn1.cms.CMSParser).getCMSSignedData(e)},kt.asn1.cades.CAdESUtil.parseSignerInfoForAddingUnsigned=function(e,t,r){var n=jt,i=n.getChildIdx,s=n.getTLV,a=n.getV,o=kt.asn1,u=o.ASN1Object,l=o.cms,c=l.AttributeList,h=l.SignerInfo,p={},f=i(e,t);if(6!=f.length)throw"not supported items for SignerInfo (!=6)";var d=f.shift();p.version=s(e,d);var g=f.shift();p.si=s(e,g);var m=f.shift();p.digalg=s(e,m);var y=f.shift();p.sattrs=s(e,y);var E=f.shift();p.sigalg=s(e,E);var v=f.shift();p.sig=s(e,v),p.sigval=a(e,v);var T=null;return p.obj=new h,(T=new u).hTLV=p.version,p.obj.dCMSVersion=T,(T=new u).hTLV=p.si,p.obj.dSignerIdentifier=T,(T=new u).hTLV=p.digalg,p.obj.dDigestAlgorithm=T,(T=new u).hTLV=p.sattrs,p.obj.dSignedAttrs=T,(T=new u).hTLV=p.sigalg,p.obj.dSigAlg=T,(T=new u).hTLV=p.sig,p.obj.dSig=T,p.obj.dUnsignedAttrs=new c,p},void 0!==kt.asn1.csr&&kt.asn1.csr||(kt.asn1.csr={}),kt.asn1.csr.CertificationRequest=function(e){var t=kt.asn1,r=t.DERBitString,n=t.DERSequence,i=t.csr,s=(t.x509,i.CertificationRequestInfo);i.CertificationRequest.superclass.constructor.call(this),this.setByParam=function(e){this.params=e},this.sign=function(){var e=new s(this.params).tohex(),t=new kt.crypto.Signature({alg:this.params.sigalg});t.init(this.params.sbjprvkey),t.updateHex(e);var r=t.sign();this.params.sighex=r},this.getPEM=function(){return sr(this.tohex(),"CERTIFICATE REQUEST")},this.tohex=function(){var e=this.params,t=new kt.asn1.csr.CertificationRequestInfo(this.params),i=new kt.asn1.x509.AlgorithmIdentifier({name:e.sigalg});if(null==e.sighex&&null!=e.sbjprvkey&&this.sign(),null==e.sighex)throw new Error("sighex or sbjprvkey parameter not defined");var s=new r({hex:"00"+e.sighex});return new n({array:[t,i,s]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.csr.CertificationRequest,kt.asn1.ASN1Object),kt.asn1.csr.CertificationRequestInfo=function(e){var t=kt.asn1,r=(t.DERBitString,t.DERSequence),n=t.DERInteger,i=t.DERUTF8String,s=t.DERTaggedObject,a=t.ASN1Util.newObject,o=t.csr,u=t.x509,l=u.X500Name,c=u.Extensions,h=u.SubjectPublicKeyInfo;o.CertificationRequestInfo.superclass.constructor.call(this),this.params=null,this.setByParam=function(e){null!=e&&(this.params=e)},this.tohex=function(){var e=this.params,t=[];if(t.push(new n({int:0})),t.push(new l(e.subject)),t.push(new h(Rr.getKey(e.sbjpubkey))),null!=e.extreq){var o=new c(e.extreq),u=a({tag:{tag:"a0",explict:!0,obj:{seq:[{oid:"1.2.840.113549.1.9.14"},{set:[o]}]}}});t.push(u)}else t.push(new s({tag:"a0",explicit:!1,obj:new i({str:""})}));return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},null!=e&&this.setByParam(e)},Nr(kt.asn1.csr.CertificationRequestInfo,kt.asn1.ASN1Object),kt.asn1.csr.CSRUtil=new function(){},kt.asn1.csr.CSRUtil.newCSRPEM=function(e){return new kt.asn1.csr.CertificationRequest(e).getPEM()},kt.asn1.csr.CSRUtil.getParam=function(e,t){var r=jt,n=r.getV,i=r.getIdxbyList,s=r.getTLVbyList,a=r.getTLVbyListEx,o=r.getVbyListEx,u={};if(-1==e.indexOf("-----BEGIN CERTIFICATE REQUEST"))throw new Error("argument is not PEM file");var l=ar(e,"CERTIFICATE REQUEST");t&&(u.tbs=s(l,0,[0]));try{var c=a(l,0,[0,1]);if("3000"==c)u.subject={};else{var h=new Pr;u.subject=h.getX500Name(c)}}catch(e){}var p=a(l,0,[0,2]),f=Rr.getKey(p,null,"pkcs8pub");u.sbjpubkey=Rr.getPEM(f,"PKCS8PUB");var d,g,m=(g=i(d=l,0,[0,3,0,0],"06"),"2a864886f70d01090e"!=n(d,g)?null:s(d,0,[0,3,0,1,0],"30"));h=new Pr;null!=m&&(u.extreq=h.getExtParamArray(m));try{var y=a(l,0,[1],"30");h=new Pr;u.sigalg=h.getAlgorithmIdentifierName(y)}catch(e){}try{var E=o(l,0,[2]);u.sighex=E}catch(e){}return u},kt.asn1.csr.CSRUtil.verifySignature=function(e){try{var t=null;if("string"==typeof e&&-1!=e.indexOf("-----BEGIN CERTIFICATE REQUEST")?t=kt.asn1.csr.CSRUtil.getParam(e,!0):"object"==typeof e&&null!=e.sbjpubkey&&null!=e.sigalg&&null!=e.sighex&&null!=e.tbs&&(t=e),null==t)return!1;var r=new kt.crypto.Signature({alg:t.sigalg});return r.init(t.sbjpubkey),r.updateHex(t.tbs),r.verify(t.sighex)}catch(e){return alert(e),!1}},void 0!==kt&&kt||(kt={}),void 0!==kt.asn1&&kt.asn1||(kt.asn1={}),void 0!==kt.asn1.ocsp&&kt.asn1.ocsp||(kt.asn1.ocsp={}),kt.asn1.ocsp.DEFAULT_HASH="sha1",kt.asn1.ocsp.OCSPResponse=function(e){kt.asn1.ocsp.OCSPResponse.superclass.constructor.call(this);kt.asn1.DEREnumerated;var t=kt.asn1.ASN1Util.newObject,r=kt.asn1.ocsp.ResponseBytes,n=["successful","malformedRequest","internalError","tryLater","_not_used_","sigRequired","unauthorized"];this.params=null,this._getStatusCode=function(){var e=this.params.resstatus;return"number"==typeof e?e:"string"!=typeof e?-1:n.indexOf(e)},this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params,n=this._getStatusCode();if(-1==n)throw new Error("responseStatus not supported: "+e.resstatus);if(0!=n)return t({seq:[{enum:{int:n}}]}).tohex();var i=new r(e);return t({seq:[{enum:{int:0}},{tag:{tag:"a0",explicit:!0,obj:i}}]}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.OCSPResponse,kt.asn1.ASN1Object),kt.asn1.ocsp.ResponseBytes=function(e){kt.asn1.ocsp.ResponseBytes.superclass.constructor.call(this);var t=kt.asn1,r=t.DERSequence,n=t.DERObjectIdentifier,i=t.DEROctetString,s=t.ocsp.BasicOCSPResponse;this.params=null,this.setByParam=function(e){this.params=e},this.tohex=function(){var e=this.params;if("ocspBasic"!=e.restype)throw new Error("not supported responseType: "+e.restype);var t=new s(e),a=[];return a.push(new n({name:"ocspBasic"})),a.push(new i({hex:t.tohex()})),new r({array:a}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.ResponseBytes,kt.asn1.ASN1Object),kt.asn1.ocsp.BasicOCSPResponse=function(e){kt.asn1.ocsp.BasicOCSPResponse.superclass.constructor.call(this);var t=Error,r=kt.asn1,n=r.ASN1Object,i=r.DERSequence,s=(r.DERGeneralizedTime,r.DERTaggedObject),a=r.DERBitString,o=(r.x509.Extensions,r.x509.AlgorithmIdentifier),u=r.ocsp;u.ResponderID;_SingleResponseList=u.SingleResponseList,_ResponseData=u.ResponseData,this.params=null,this.setByParam=function(e){this.params=e},this.sign=function(){var e=this.params,t=e.tbsresp.tohex(),r=new kt.crypto.Signature({alg:e.sigalg});r.init(e.reskey),r.updateHex(t),e.sighex=r.sign()},this.tohex=function(){var e=this.params;null==e.tbsresp&&(e.tbsresp=new _ResponseData(e)),null==e.sighex&&null!=e.reskey&&this.sign();var r=[];if(r.push(e.tbsresp),r.push(new o({name:e.sigalg})),r.push(new a({hex:"00"+e.sighex})),null!=e.certs&&null!=e.certs.length){for(var u=[],l=0;l<e.certs.length;l++){var c=e.certs[l],h=null;if(jt.isASN1HEX(c))h=c;else{if(!c.match(/-----BEGIN/))throw new t("certs["+l+"] not hex or PEM");h=ar(c)}u.push(new n({tlv:h}))}var p=new i({array:u});r.push(new s({tag:"a0",explicit:!0,obj:p}))}return new i({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.BasicOCSPResponse,kt.asn1.ASN1Object),kt.asn1.ocsp.ResponseData=function(e){kt.asn1.ocsp.ResponseData.superclass.constructor.call(this);var t=Error,r=kt.asn1,n=r.DERSequence,i=r.DERGeneralizedTime,s=r.DERTaggedObject,a=r.x509.Extensions,o=r.ocsp,u=o.ResponderID;_SingleResponseList=o.SingleResponseList,this.params=null,this.tohex=function(){var e=this.params;null!=e.respid&&new t("respid not specified"),null!=e.prodat&&new t("prodat not specified"),null!=e.array&&new t("array not specified");var r=[];if(r.push(new u(e.respid)),r.push(new i(e.prodat)),r.push(new _SingleResponseList(e.array)),null!=e.ext){var o=new a(e.ext);r.push(new s({tag:"a1",explicit:!0,obj:o}))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.ResponseData,kt.asn1.ASN1Object),kt.asn1.ocsp.ResponderID=function(e){kt.asn1.ocsp.ResponderID.superclass.constructor.call(this);var t=kt,r=t.asn1,n=r.ASN1Util.newObject,i=r.x509.X500Name,s=t.lang.String.isHex,a=Error;this.params=null,this.tohex=function(){var e=this.params;if(null!=e.key){var t=null;if("string"==typeof e.key){if(s(e.key)&&(t=e.key),e.key.match(/-----BEGIN CERTIFICATE/))null!=(r=new Pr(e.key).getExtSubjectKeyIdentifier())&&(t=r.kid.hex)}else if(e.key instanceof Pr){var r;null!=(r=e.key.getExtSubjectKeyIdentifier())&&(t=r.kid.hex)}if(null==t)throw new a("wrong key member value");return n({tag:{tag:"a2",explicit:!0,obj:{octstr:{hex:t}}}}).tohex()}if(null!=e.name){var o=null;if("string"==typeof e.name&&e.name.match(/-----BEGIN CERTIFICATE/))o=new Pr(e.name).getSubject();else e.name instanceof Pr?o=e.name.getSubject():"object"!=typeof e.name||null==e.name.array&&null==e.name.str||(o=e.name);if(null==o)throw new a("wrong name member value");return n({tag:{tag:"a1",explicit:!0,obj:new i(o)}}).tohex()}throw new a("key or name not specified")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.ResponderID,kt.asn1.ASN1Object),kt.asn1.ocsp.SingleResponseList=function(e){kt.asn1.ocsp.SingleResponseList.superclass.constructor.call(this);var t=kt.asn1,r=t.DERSequence,n=t.ocsp.SingleResponse;this.params=null,this.tohex=function(){var e=this.params;if("object"!=typeof e||null==e.length)throw new Error("params not specified properly");for(var t=[],i=0;i<e.length;i++)t.push(new n(e[i]));return new r({array:t}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.SingleResponseList,kt.asn1.ASN1Object),kt.asn1.ocsp.SingleResponse=function(e){var t=Error,r=kt.asn1,n=r.DERSequence,i=r.DERGeneralizedTime,s=r.DERTaggedObject,a=r.ocsp,o=a.CertID,u=a.CertStatus,l=r.x509.Extensions;a.SingleResponse.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params,r=[];if(null==e.certid)throw new t("certid unspecified");if(null==e.status)throw new t("status unspecified");if(null==e.thisupdate)throw new t("thisupdate unspecified");if(r.push(new o(e.certid)),r.push(new u(e.status)),r.push(new i(e.thisupdate)),null!=e.nextupdate){var a=new i(e.nextupdate);r.push(new s({tag:"a0",explicit:!0,obj:a}))}if(null!=e.ext){var c=new l(e.ext);r.push(new s({tag:"a1",explicit:!0,obj:c}))}return new n({array:r}).tohex()},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.SingleResponse,kt.asn1.ASN1Object),kt.asn1.ocsp.CertID=function(e){var t=kt,r=t.asn1,n=r.DEROctetString,i=r.DERInteger,s=r.DERSequence,a=r.x509.AlgorithmIdentifier,o=r.ocsp,u=(o.DEFAULT_HASH,t.crypto.Util.hashHex),l=Pr,c=jt.getVbyList;o.CertID.superclass.constructor.call(this),this.DEFAULT_HASH="sha1",this.params=null,this.setByValue=function(e,t,r,n){null==n&&(n=this.DEFAULT_HASH),this.params={alg:n,issname:e,isskey:t,sbjsn:r}},this.setByCert=function(e,t,r){null==r&&(r=this.DEFAULT_HASH),this.params={alg:r,issuerCert:e,subjectCert:t}},this.getParamByCerts=function(e,t,r){null==r&&(r=this.DEFAULT_HASH);var n=new l(e),i=new l(t),s=u(n.getSubjectHex(),r),a=n.getPublicKeyHex();return{alg:r,issname:s,isskey:u(c(a,0,[1],"03",!0),r),sbjsn:i.getSerialNumberHex()}},this.tohex=function(){if("object"!=typeof this.params)throw new Error("params not set");var e,t,r,o,u=this.params;if(o=null==u.alg?this.DEFAULT_HASH:u.alg,null!=u.issuerCert&&null!=u.subjectCert){var l=this.getParamByCerts(u.issuerCert,u.subjectCert,o);e=l.issname,t=l.isskey,r=l.sbjsn}else{if(null==u.issname||null==u.isskey||null==u.sbjsn)throw new Error("required param members not defined");e=u.issname,t=u.isskey,r=u.sbjsn}var c=new a({name:o}),h=new n({hex:e}),p=new n({hex:t}),f=new i({hex:r}),d=new s({array:[c,h,p,f]});return this.hTLV=d.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.CertID,kt.asn1.ASN1Object),kt.asn1.ocsp.CertStatus=function(e){kt.asn1.ocsp.CertStatus.superclass.constructor.call(this),this.params=null,this.tohex=function(){var e=this.params;if("good"==e.status)return"8000";if("unknown"==e.status)return"8200";if("revoked"==e.status){var t=[{gentime:{str:e.time}}];null!=e.reason&&t.push({tag:{tag:"a0",explicit:!0,obj:{enum:{int:e.reason}}}});var r={tag:"a1",explicit:!1,obj:{seq:t}};return kt.asn1.ASN1Util.newObject({tag:r}).tohex()}throw new Error("bad status")},this.getEncodedHex=function(){return this.tohex()},this.setByParam=function(e){this.params=e},void 0!==e&&this.setByParam(e)},Nr(kt.asn1.ocsp.CertStatus,kt.asn1.ASN1Object),kt.asn1.ocsp.Request=function(e){var t=kt.asn1,r=t.DERSequence,n=t.ocsp;if(n.Request.superclass.constructor.call(this),this.dReqCert=null,this.dExt=null,this.tohex=function(){var e=[];if(null===this.dReqCert)throw"reqCert not set";e.push(this.dReqCert);var t=new r({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e){var i=new n.CertID(e);this.dReqCert=i}},Nr(kt.asn1.ocsp.Request,kt.asn1.ASN1Object),kt.asn1.ocsp.TBSRequest=function(e){var t=kt.asn1,r=t.DERSequence,n=t.ocsp;n.TBSRequest.superclass.constructor.call(this),this.version=0,this.dRequestorName=null,this.dRequestList=[],this.dRequestExt=null,this.setRequestListByParam=function(e){for(var t=[],r=0;r<e.length;r++){var i=new n.Request(e[0]);t.push(i)}this.dRequestList=t},this.tohex=function(){var e=[];if(0!==this.version)throw"not supported version: "+this.version;if(null!==this.dRequestorName)throw"requestorName not supported";var t=new r({array:this.dRequestList});if(e.push(t),null!==this.dRequestExt)throw"requestExtensions not supported";var n=new r({array:e});return this.hTLV=n.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&void 0!==e.reqList&&this.setRequestListByParam(e.reqList)},Nr(kt.asn1.ocsp.TBSRequest,kt.asn1.ASN1Object),kt.asn1.ocsp.OCSPRequest=function(e){var t=kt.asn1,r=t.DERSequence,n=t.ocsp;if(n.OCSPRequest.superclass.constructor.call(this),this.dTbsRequest=null,this.dOptionalSignature=null,this.tohex=function(){var e=[];if(null===this.dTbsRequest)throw"tbsRequest not set";if(e.push(this.dTbsRequest),null!==this.dOptionalSignature)throw"optionalSignature not supported";var t=new r({array:e});return this.hTLV=t.tohex(),this.hTLV},this.getEncodedHex=function(){return this.tohex()},void 0!==e&&void 0!==e.reqList){var i=new n.TBSRequest(e);this.dTbsRequest=i}},Nr(kt.asn1.ocsp.OCSPRequest,kt.asn1.ASN1Object),kt.asn1.ocsp.OCSPUtil={},kt.asn1.ocsp.OCSPUtil.getRequestHex=function(e,t,r){var n=kt.asn1.ocsp;void 0===r&&(r=n.DEFAULT_HASH);var i={alg:r,issuerCert:e,subjectCert:t};return new n.OCSPRequest({reqList:[i]}).tohex()},kt.asn1.ocsp.OCSPUtil.getOCSPResponseInfo=function(e){var t=jt,r=t.getVbyList,n=t.getVbyListEx,i=t.getIdxbyList,s=(t.getIdxbyListEx,t.getV),a={};try{var o=n(e,0,[0],"0a");a.responseStatus=parseInt(o,16)}catch(e){}if(0!==a.responseStatus)return a;try{var u=i(e,0,[1,0,1,0,0,2,0,1]);"80"===e.substr(u,2)?a.certStatus="good":"a1"===e.substr(u,2)?(a.certStatus="revoked",a.revocationTime=Zt(r(e,u,[0]))):"82"===e.substr(u,2)&&(a.certStatus="unknown")}catch(e){}try{var l=i(e,0,[1,0,1,0,0,2,0,2]);a.thisUpdate=Zt(s(e,l))}catch(e){}try{var c=i(e,0,[1,0,1,0,0,2,0,3]);"a0"===e.substr(c,2)&&(a.nextUpdate=Zt(r(e,c,[0])))}catch(e){}return a},kt.asn1.ocsp.OCSPParser=function(){var e=Error,t=Pr,r=new t,n=jt,i=n.getV,s=n.getTLV,a=n.getIdxbyList,o=n.getVbyList,u=n.getTLVbyList,l=n.getVbyListEx,c=n.getTLVbyListEx,h=n.getChildIdx;this.getOCSPRequest=function(t){var r=h(t,0);if(1!=r.length&&2!=r.length)throw new e("wrong number elements: "+r.length);return this.getTBSRequest(s(t,r[0]))},this.getTBSRequest=function(e){var t={},n=c(e,0,[0],"30");t.array=this.getRequestList(n);var i=c(e,0,["[2]",0],"30");return null!=i&&(t.ext=r.getExtParamArray(i)),t},this.getRequestList=function(e){for(var t=[],r=h(e,0),n=0;n<r.length;n++){e=s(e,r[n]);t.push(this.getRequest(e))}return t},this.getRequest=function(t){var n=h(t,0);if(1!=n.length&&2!=n.length)throw new e("wrong number elements: "+n.length);var i=this.getCertID(s(t,n[0]));if(2==n.length){var o=a(t,0,[1,0]);i.ext=r.getExtParamArray(s(t,o))}return i},this.getCertID=function(r){var n=h(r,0);if(4!=n.length)throw new e("wrong number elements: "+n.length);var a=new t,o={};return o.alg=a.getAlgorithmIdentifierName(s(r,n[0])),o.issname=i(r,n[1]),o.isskey=i(r,n[2]),o.sbjsn=i(r,n[3]),o},this.getOCSPResponse=function(e){var t,r=h(e,0),n=i(e,r[0]),s=parseInt(n);if(1==r.length)return{resstatus:s};var a=u(e,0,[1,0]);return(t=this.getResponseBytes(a)).resstatus=s,t},this.getResponseBytes=function(e){var t,r=h(e,0),n=u(e,0,[1,0]);t=this.getBasicOCSPResponse(n);var s=i(e,r[0]);return t.restype=kt.asn1.x509.OID.oid2name(_r(s)),t},this.getBasicOCSPResponse=function(e){var t,r=h(e,0);t=this.getResponseData(s(e,r[0]));var n=new Pr;t.alg=n.getAlgorithmIdentifierName(s(e,r[1]));var a=i(e,r[2]);t.sighex=a.substr(2);var o=l(e,0,["[0]"]);if(null!=o){for(var u=h(o,0),c=[],p=0;p<u.length;p++){var f=s(o,u[p]);c.push(f)}t.certs=c}return t},this.getResponseData=function(e){var t=h(e,0),r=t.length,n={},a=0;"a0"==e.substr(t[0],2)&&a++,n.respid=this.getResponderID(s(e,t[a++]));var o=i(e,t[a++]);if(n.prodat=Zt(o),n.array=this.getSingleResponseList(s(e,t[a++])),"a1"==e.substr(t[r-1],2)){var l=u(e,t[r-1],[0]),c=new Pr;n.ext=c.getExtParamArray(l)}return n},this.getResponderID=function(e){var t={};if("a2"==e.substr(0,2)){var r=o(e,0,[0]);t.key=r}if("a1"==e.substr(0,2)){var n=u(e,0,[0]),i=new Pr;t.name=i.getX500Name(n)}return t},this.getSingleResponseList=function(e){for(var t=h(e,0),r=[],n=0;n<t.length;n++){var i=this.getSingleResponse(s(e,t[n]));r.push(i)}return r},this.getSingleResponse=function(e){var t=h(e,0),r={},n=this.getCertID(s(e,t[0]));r.certid=n;var a=this.getCertStatus(s(e,t[1]));if(r.status=a,"18"==e.substr(t[2],2)){var l=i(e,t[2]);r.thisupdate=Zt(l)}for(var c=3;c<t.length;c++){if("a0"==e.substr(t[c],2)){var p=o(e,t[c],[0],"18");r.nextupdate=Zt(p)}if("a1"==e.substr(t[c],2)){var f=new Pr,d=u(e,0,[c,0]);r.ext=f.getExtParamArray(d)}}return r},this.getCertStatus=function(e){var t={};if("8000"==e)return{status:"good"};if("8200"==e)return{status:"unknown"};if("a1"==e.substr(0,2)){t.status="revoked";var r=Zt(o(e,0,[0]));t.time=r}return t}},void 0!==kt&&kt||(kt={}),void 0!==kt.lang&&kt.lang||(kt.lang={}),kt.lang.String=function(){},"function"==typeof He?(Ht=function(e){return zt(He.from(e,"utf8").toString("base64"))},Vt=function(e){return He.from(Yt(e),"base64").toString("utf8")}):(Ht=function(e){return Xt(lr(Er(e)))},Vt=function(e){return decodeURIComponent(cr(Qt(e)))}),kt.lang.String.isInteger=function(e){return!!e.match(/^[0-9]+$/)||!!e.match(/^-[0-9]+$/)},kt.lang.String.isHex=function(e){return vr(e)},kt.lang.String.isBase64=function(e){return!(!(e=e.replace(/\s+/g,"")).match(/^[0-9A-Za-z+\/]+={0,3}$/)||e.length%4!=0)},kt.lang.String.isBase64URL=function(e){return!e.match(/[+/=]/)&&(e=Yt(e),kt.lang.String.isBase64(e))},kt.lang.String.isIntegerArray=function(e){return!!(e=e.replace(/\s+/g,"")).match(/^\[[0-9,]+\]$/)},kt.lang.String.isPrintable=function(e){return null!==e.match(/^[0-9A-Za-z '()+,-./:=?]*$/)},kt.lang.String.isIA5=function(e){return null!==e.match(/^[\x20-\x21\x23-\x7f]*$/)},kt.lang.String.isMail=function(e){return null!==e.match(/^[A-Za-z0-9]{1}[A-Za-z0-9_.-]*@{1}[A-Za-z0-9_.-]{1,}\.[A-Za-z0-9]{1,}$/)};function Sr(e){var t=function(e){var t=e.toString(16);return 1==t.length&&(t="0"+t),t},r=function(e){var r="",n=parseInt(e,10).toString(2),i=7-n.length%7;7==i&&(i=0);for(var s="",a=0;a<i;a++)s+="0";n=s+n;for(a=0;a<n.length-1;a+=7){var o=n.substr(a,7);a!=n.length-7&&(o="1"+o),r+=t(parseInt(o,2))}return r};try{if(!e.match(/^[0-9.]+$/))return null;var n="",i=e.split("."),s=40*parseInt(i[0],10)+parseInt(i[1],10);n+=t(s),i.splice(0,2);for(var a=0;a<i.length;a++)n+=r(i[a]);return n}catch(e){return null}}function _r(e){if(!vr(e))return null;try{var t=[],r=e.substr(0,2),n=parseInt(r,16);t[0]=new String(Math.floor(n/40)),t[1]=new String(n%40);for(var i=e.substr(2),s=[],a=0;a<i.length/2;a++)s.push(parseInt(i.substr(2*a,2),16));var o=[],u="";for(a=0;a<s.length;a++)128&s[a]?u+=br((127&s[a]).toString(2),7):(u+=br((127&s[a]).toString(2),7),o.push(new String(parseInt(u,2))),u="");var l=t.join(".");return o.length>0&&(l=l+"."+o.join(".")),l}catch(e){return null}}var br=function(e,t,r){return null==r&&(r="0"),e.length>=t?e:new Array(t-e.length+1).join(r)+e};function Cr(e){if(e.length%2!=0)return-1;if(null==(e=e.toLowerCase()).match(/^[0-9a-f]+$/))return-1;try{var t=e.substr(0,2);if("00"==t)return parseInt(e.substr(2),16);var r=parseInt(t,16);if(r>7)return-1;var n=e.substr(2),i=parseInt(n,16).toString(2);"0"==i&&(i="00000000"),i=i.slice(0,0-r);var s=parseInt(i,2);return NaN==s?-1:s}catch(e){return-1}}function Ir(e){if("number"!=typeof e)return null;if(e<0)return null;var t=Number(e).toString(2),r=8-t.length%8;8==r&&(r=0),t+=br("",r,"0");var n=parseInt(t,2).toString(16);return n.length%2==1&&(n="0"+n),"0"+r+n}function xr(e){if("string"!=typeof e)return null;if(e.length%2!=0)return null;if(!e.match(/^[0-9a-f]+$/))return null;try{var t=parseInt(e.substr(0,2),16);if(t<0||7<t)return null;for(var r=e.substr(2),n="",i=0;i<r.length;i+=2){var s=r.substr(i,2),a=parseInt(s,16).toString(2);n+=a=("0000000"+a).slice(-8)}return n.substr(0,n.length-t)}catch(e){return null}}function wr(e,t){for(var r=0,n=0;n<e.length;n++)r|=1<<t[e[n]];var i=r.toString(2),s="";for(n=i.length-1;n>=0;n--)s+=i[n];return s}function Nr(e,t){var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.superclass=t.prototype,t.prototype.constructor==Object.prototype.constructor&&(t.prototype.constructor=t)}void 0!==kt&&kt||(kt={}),void 0!==kt.crypto&&kt.crypto||(kt.crypto={}),kt.crypto.Util=new function(){this.DIGESTINFOHEAD={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},this.DEFAULTPROVIDER={md5:"cryptojs",sha1:"cryptojs",sha224:"cryptojs",sha256:"cryptojs",sha384:"cryptojs",sha512:"cryptojs",ripemd160:"cryptojs",hmacmd5:"cryptojs",hmacsha1:"cryptojs",hmacsha224:"cryptojs",hmacsha256:"cryptojs",hmacsha384:"cryptojs",hmacsha512:"cryptojs",hmacripemd160:"cryptojs",MD5withRSA:"cryptojs/jsrsa",SHA1withRSA:"cryptojs/jsrsa",SHA224withRSA:"cryptojs/jsrsa",SHA256withRSA:"cryptojs/jsrsa",SHA384withRSA:"cryptojs/jsrsa",SHA512withRSA:"cryptojs/jsrsa",RIPEMD160withRSA:"cryptojs/jsrsa",MD5withECDSA:"cryptojs/jsrsa",SHA1withECDSA:"cryptojs/jsrsa",SHA224withECDSA:"cryptojs/jsrsa",SHA256withECDSA:"cryptojs/jsrsa",SHA384withECDSA:"cryptojs/jsrsa",SHA512withECDSA:"cryptojs/jsrsa",RIPEMD160withECDSA:"cryptojs/jsrsa",SHA1withDSA:"cryptojs/jsrsa",SHA224withDSA:"cryptojs/jsrsa",SHA256withDSA:"cryptojs/jsrsa",MD5withRSAandMGF1:"cryptojs/jsrsa",SHAwithRSAandMGF1:"cryptojs/jsrsa",SHA1withRSAandMGF1:"cryptojs/jsrsa",SHA224withRSAandMGF1:"cryptojs/jsrsa",SHA256withRSAandMGF1:"cryptojs/jsrsa",SHA384withRSAandMGF1:"cryptojs/jsrsa",SHA512withRSAandMGF1:"cryptojs/jsrsa",RIPEMD160withRSAandMGF1:"cryptojs/jsrsa"},this.CRYPTOJSMESSAGEDIGESTNAME={md5:Ke.algo.MD5,sha1:Ke.algo.SHA1,sha224:Ke.algo.SHA224,sha256:Ke.algo.SHA256,sha384:Ke.algo.SHA384,sha512:Ke.algo.SHA512,ripemd160:Ke.algo.RIPEMD160},this.getDigestInfoHex=function(e,t){if(void 0===this.DIGESTINFOHEAD[t])throw"alg not supported in Util.DIGESTINFOHEAD: "+t;return this.DIGESTINFOHEAD[t]+e},this.getPaddedDigestInfoHex=function(e,t,r){var n=this.getDigestInfoHex(e,t),i=r/4;if(n.length+22>i)throw"key is too short for SigAlg: keylen="+r+","+t;for(var s="0001",a="00"+n,o="",u=i-4-a.length,l=0;l<u;l+=2)o+="ff";return s+o+a},this.hashString=function(e,t){return new kt.crypto.MessageDigest({alg:t}).digestString(e)},this.hashHex=function(e,t){return new kt.crypto.MessageDigest({alg:t}).digestHex(e)},this.sha1=function(e){return this.hashString(e,"sha1")},this.sha256=function(e){return this.hashString(e,"sha256")},this.sha256Hex=function(e){return this.hashHex(e,"sha256")},this.sha512=function(e){return this.hashString(e,"sha512")},this.sha512Hex=function(e){return this.hashHex(e,"sha512")},this.isKey=function(e){return e instanceof Dt||e instanceof kt.crypto.DSA||e instanceof kt.crypto.ECDSA}},kt.crypto.Util.md5=function(e){return new kt.crypto.MessageDigest({alg:"md5",prov:"cryptojs"}).digestString(e)},kt.crypto.Util.ripemd160=function(e){return new kt.crypto.MessageDigest({alg:"ripemd160",prov:"cryptojs"}).digestString(e)},kt.crypto.Util.SECURERANDOMGEN=new Rt,kt.crypto.Util.getRandomHexOfNbytes=function(e){var t=new Array(e);return kt.crypto.Util.SECURERANDOMGEN.nextBytes(t),Wt(t)},kt.crypto.Util.getRandomBigIntegerOfNbytes=function(e){return new Qe(kt.crypto.Util.getRandomHexOfNbytes(e),16)},kt.crypto.Util.getRandomHexOfNbits=function(e){var t=e%8,r=new Array((e-t)/8+1);return kt.crypto.Util.SECURERANDOMGEN.nextBytes(r),r[0]=(255<<t&255^255)&r[0],Wt(r)},kt.crypto.Util.getRandomBigIntegerOfNbits=function(e){return new Qe(kt.crypto.Util.getRandomHexOfNbits(e),16)},kt.crypto.Util.getRandomBigIntegerZeroToMax=function(e){for(var t=e.bitLength();;){var r=kt.crypto.Util.getRandomBigIntegerOfNbits(t);if(-1!=e.compareTo(r))return r}},kt.crypto.Util.getRandomBigIntegerMinToMax=function(e,t){var r=e.compareTo(t);if(1==r)throw"biMin is greater than biMax";if(0==r)return e;var n=t.subtract(e);return kt.crypto.Util.getRandomBigIntegerZeroToMax(n).add(e)},kt.crypto.MessageDigest=function(e){this.setAlgAndProvider=function(e,t){if(null!==(e=kt.crypto.MessageDigest.getCanonicalAlgName(e))&&void 0===t&&(t=kt.crypto.Util.DEFAULTPROVIDER[e]),-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(e)&&"cryptojs"==t){try{this.md=kt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[e].create()}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=Ke.enc.Hex.parse(e);this.md.update(t)},this.digest=function(){return this.md.finalize().toString(Ke.enc.Hex)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}if(-1!=":sha256:".indexOf(e)&&"sjcl"==t){try{this.md=new sjcl.hash.sha256}catch(t){throw"setAlgAndProvider hash alg set fail alg="+e+"/"+t}this.updateString=function(e){this.md.update(e)},this.updateHex=function(e){var t=sjcl.codec.hex.toBits(e);this.md.update(t)},this.digest=function(){var e=this.md.finalize();return sjcl.codec.hex.fromBits(e)},this.digestString=function(e){return this.updateString(e),this.digest()},this.digestHex=function(e){return this.updateHex(e),this.digest()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digest=function(){throw"digest() not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algName+"/"+this.provName},this.digestHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algName+"/"+this.provName},void 0!==e&&void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=kt.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName))},kt.crypto.MessageDigest.getCanonicalAlgName=function(e){return"string"==typeof e&&(e=(e=e.toLowerCase()).replace(/-/,"")),e},kt.crypto.MessageDigest.getHashLength=function(e){var t=kt.crypto.MessageDigest,r=t.getCanonicalAlgName(e);if(void 0===t.HASHLENGTH[r])throw"not supported algorithm: "+e;return t.HASHLENGTH[r]},kt.crypto.MessageDigest.HASHLENGTH={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,ripemd160:20},kt.crypto.Mac=function(e){this.setAlgAndProvider=function(e,t){if(null==(e=e.toLowerCase())&&(e="hmacsha1"),"hmac"!=(e=e.toLowerCase()).substr(0,4))throw"setAlgAndProvider unsupported HMAC alg: "+e;void 0===t&&(t=kt.crypto.Util.DEFAULTPROVIDER[e]),this.algProv=e+"/"+t;var r=e.substr(4);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(r)&&"cryptojs"==t){try{var n=kt.crypto.Util.CRYPTOJSMESSAGEDIGESTNAME[r];this.mac=Ke.algo.HMAC.create(n,this.pass)}catch(e){throw"setAlgAndProvider hash alg set fail hashAlg="+r+"/"+e}this.updateString=function(e){this.mac.update(e)},this.updateHex=function(e){var t=Ke.enc.Hex.parse(e);this.mac.update(t)},this.doFinal=function(){return this.mac.finalize().toString(Ke.enc.Hex)},this.doFinalString=function(e){return this.updateString(e),this.doFinal()},this.doFinalHex=function(e){return this.updateHex(e),this.doFinal()}}},this.updateString=function(e){throw"updateString(str) not supported for this alg/prov: "+this.algProv},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg/prov: "+this.algProv},this.doFinal=function(){throw"digest() not supported for this alg/prov: "+this.algProv},this.doFinalString=function(e){throw"digestString(str) not supported for this alg/prov: "+this.algProv},this.doFinalHex=function(e){throw"digestHex(hex) not supported for this alg/prov: "+this.algProv},this.setPassword=function(e){if("string"==typeof e){var t=e;return e.length%2!=1&&e.match(/^[0-9A-Fa-f]+$/)||(t=tr(e)),void(this.pass=Ke.enc.Hex.parse(t))}if("object"!=typeof e)throw"KJUR.crypto.Mac unsupported password type: "+e;t=null;if(void 0!==e.hex){if(e.hex.length%2!=0||!e.hex.match(/^[0-9A-Fa-f]+$/))throw"Mac: wrong hex password: "+e.hex;t=e.hex}if(void 0!==e.utf8&&(t=Jt(e.utf8)),void 0!==e.rstr&&(t=tr(e.rstr)),void 0!==e.b64&&(t=Ye(e.b64)),void 0!==e.b64u&&(t=Qt(e.b64u)),null==t)throw"KJUR.crypto.Mac unsupported password type: "+e;this.pass=Ke.enc.Hex.parse(t)},void 0!==e&&(void 0!==e.pass&&this.setPassword(e.pass),void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov&&(this.provName=kt.crypto.Util.DEFAULTPROVIDER[this.algName]),this.setAlgAndProvider(this.algName,this.provName)))},kt.crypto.Signature=function(e){var t=null;if(this._setAlgNames=function(){var e=this.algName.match(/^(.+)with(.+)$/);e&&(this.mdAlgName=e[1].toLowerCase(),this.pubkeyAlgName=e[2].toLowerCase(),"rsaandmgf1"==this.pubkeyAlgName&&"sha"==this.mdAlgName&&(this.mdAlgName="sha1"))},this._zeroPaddingOfSignature=function(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e},this.setAlgAndProvider=function(e,t){if(this._setAlgNames(),"cryptojs/jsrsa"!=t)throw new Error("provider not supported: "+t);if(-1!=":md5:sha1:sha224:sha256:sha384:sha512:ripemd160:".indexOf(this.mdAlgName)){try{this.md=new kt.crypto.MessageDigest({alg:this.mdAlgName})}catch(e){throw new Error("setAlgAndProvider hash alg set fail alg="+this.mdAlgName+"/"+e)}this.init=function(e,t){var r=null;try{r=void 0===t?Rr.getKey(e):Rr.getKey(e,t)}catch(e){throw"init failed:"+e}if(!0===r.isPrivate)this.prvKey=r,this.state="SIGN";else{if(!0!==r.isPublic)throw"init failed.:"+r;this.pubKey=r,this.state="VERIFY"}},this.updateString=function(e){this.md.updateString(e)},this.updateHex=function(e){this.md.updateHex(e)},this.sign=function(){if(this.sHashHex=this.md.digest(),void 0===this.prvKey&&void 0!==this.ecprvhex&&void 0!==this.eccurvename&&void 0!==kt.crypto.ECDSA&&(this.prvKey=new kt.crypto.ECDSA({curve:this.eccurvename,prv:this.ecprvhex})),this.prvKey instanceof Dt&&"rsaandmgf1"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHashPSS(this.sHashHex,this.mdAlgName,this.pssSaltLen);else if(this.prvKey instanceof Dt&&"rsa"===this.pubkeyAlgName)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex,this.mdAlgName);else if(this.prvKey instanceof kt.crypto.ECDSA)this.hSign=this.prvKey.signWithMessageHash(this.sHashHex);else{if(!(this.prvKey instanceof kt.crypto.DSA))throw"Signature: unsupported private key alg: "+this.pubkeyAlgName;this.hSign=this.prvKey.signWithMessageHash(this.sHashHex)}return this.hSign},this.signString=function(e){return this.updateString(e),this.sign()},this.signHex=function(e){return this.updateHex(e),this.sign()},this.verify=function(e){if(this.sHashHex=this.md.digest(),void 0===this.pubKey&&void 0!==this.ecpubhex&&void 0!==this.eccurvename&&void 0!==kt.crypto.ECDSA&&(this.pubKey=new kt.crypto.ECDSA({curve:this.eccurvename,pub:this.ecpubhex})),this.pubKey instanceof Dt&&"rsaandmgf1"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHashPSS(this.sHashHex,e,this.mdAlgName,this.pssSaltLen);if(this.pubKey instanceof Dt&&"rsa"===this.pubkeyAlgName)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==kt.crypto.ECDSA&&this.pubKey instanceof kt.crypto.ECDSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);if(void 0!==kt.crypto.DSA&&this.pubKey instanceof kt.crypto.DSA)return this.pubKey.verifyWithMessageHash(this.sHashHex,e);throw"Signature: unsupported public key alg: "+this.pubkeyAlgName}}},this.init=function(e,t){throw"init(key, pass) not supported for this alg:prov="+this.algProvName},this.updateString=function(e){throw"updateString(str) not supported for this alg:prov="+this.algProvName},this.updateHex=function(e){throw"updateHex(hex) not supported for this alg:prov="+this.algProvName},this.sign=function(){throw"sign() not supported for this alg:prov="+this.algProvName},this.signString=function(e){throw"digestString(str) not supported for this alg:prov="+this.algProvName},this.signHex=function(e){throw"digestHex(hex) not supported for this alg:prov="+this.algProvName},this.verify=function(e){throw"verify(hSigVal) not supported for this alg:prov="+this.algProvName},this.initParams=e,void 0!==e&&(void 0!==e.alg&&(this.algName=e.alg,void 0===e.prov?this.provName=kt.crypto.Util.DEFAULTPROVIDER[this.algName]:this.provName=e.prov,this.algProvName=this.algName+":"+this.provName,this.setAlgAndProvider(this.algName,this.provName),this._setAlgNames()),void 0!==e.psssaltlen&&(this.pssSaltLen=e.psssaltlen),void 0!==e.prvkeypem)){if(void 0!==e.prvkeypas)throw"both prvkeypem and prvkeypas parameters not supported";try{t=Rr.getKey(e.prvkeypem);this.init(t)}catch(e){throw"fatal error to load pem private key: "+e}}},kt.crypto.Cipher=function(e){},kt.crypto.Cipher.encrypt=function(e,t,r){if(t instanceof Dt&&t.isPublic){var n=kt.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.encrypt(e);if("RSAOAEP"===n)return t.encryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.encryptOAEP(e,"sha"+i[1]);throw"Cipher.encrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.encrypt: unsupported key or algorithm"},kt.crypto.Cipher.decrypt=function(e,t,r){if(t instanceof Dt&&t.isPrivate){var n=kt.crypto.Cipher.getAlgByKeyAndName(t,r);if("RSA"===n)return t.decrypt(e);if("RSAOAEP"===n)return t.decryptOAEP(e,"sha1");var i=n.match(/^RSAOAEP(\d+)$/);if(null!==i)return t.decryptOAEP(e,"sha"+i[1]);throw"Cipher.decrypt: unsupported algorithm for RSAKey: "+r}throw"Cipher.decrypt: unsupported key or algorithm"},kt.crypto.Cipher.getAlgByKeyAndName=function(e,t){if(e instanceof Dt){if(-1!=":RSA:RSAOAEP:RSAOAEP224:RSAOAEP256:RSAOAEP384:RSAOAEP512:".indexOf(t))return t;if(null==t)return"RSA";throw"getAlgByKeyAndName: not supported algorithm name for RSAKey: "+t}throw"getAlgByKeyAndName: not supported algorithm name: "+t},kt.crypto.OID=new function(){this.oidhex2name={"2a864886f70d010101":"rsaEncryption","2a8648ce3d0201":"ecPublicKey","2a8648ce380401":"dsa","2a8648ce3d030107":"secp256r1","2b8104001f":"secp192k1","2b81040021":"secp224r1","2b8104000a":"secp256k1","2b81040022":"secp384r1","2b81040023":"secp521r1","2a8648ce380403":"SHA1withDSA","608648016503040301":"SHA224withDSA","608648016503040302":"SHA256withDSA"}},void 0!==kt&&kt||(kt={}),void 0!==kt.crypto&&kt.crypto||(kt.crypto={}),kt.crypto.ECDSA=function(e){var t=Error,r=Qe,n=Lt,i=kt.crypto.ECDSA,s=kt.crypto.ECParameterDB,a=i.getName,o=jt,u=o.getVbyListEx,l=o.isASN1HEX,c=new Rt;this.type="EC",this.isPrivate=!1,this.isPublic=!1,this.getBigRandom=function(e){return new r(e.bitLength(),c).mod(e.subtract(r.ONE)).add(r.ONE)},this.setNamedCurve=function(e){this.ecparams=s.getByName(e),this.prvKeyHex=null,this.pubKeyHex=null,this.curveName=e},this.setPrivateKeyHex=function(e){this.isPrivate=!0,this.prvKeyHex=e},this.setPublicKeyHex=function(e){this.isPublic=!0,this.pubKeyHex=e},this.getPublicKeyXYHex=function(){var e=this.pubKeyHex;if("04"!==e.substr(0,2))throw"this method supports uncompressed format(04) only";var t=this.ecparams.keycharlen;if(e.length!==2+2*t)throw"malformed public key hex length";var r={};return r.x=e.substr(2,t),r.y=e.substr(2+t),r},this.getShortNISTPCurveName=function(){var e=this.curveName;return"secp256r1"===e||"NIST P-256"===e||"P-256"===e||"prime256v1"===e?"P-256":"secp384r1"===e||"NIST P-384"===e||"P-384"===e?"P-384":"secp521r1"===e||"NIST P-521"===e||"P-521"===e?"P-521":null},this.generateKeyPairHex=function(){var e=this.ecparams.n,t=this.getBigRandom(e),r=this.ecparams.keycharlen,n=("0000000000"+t.toString(16)).slice(-r);return this.setPrivateKeyHex(n),{ecprvhex:n,ecpubhex:this.generatePublicKeyHex()}},this.generatePublicKeyHex=function(){var e=new r(this.prvKeyHex,16),t=this.ecparams.G.multiply(e),n=t.getX().toBigInteger(),i=t.getY().toBigInteger(),s=this.ecparams.keycharlen,a="04"+("0000000000"+n.toString(16)).slice(-s)+("0000000000"+i.toString(16)).slice(-s);return this.setPublicKeyHex(a),a},this.signWithMessageHash=function(e){return this.signHex(e,this.prvKeyHex)},this.signHex=function(e,t){var n=new r(t,16),s=this.ecparams.n,a=new r(e.substring(0,this.ecparams.keycharlen),16);do{var o=this.getBigRandom(s),u=this.ecparams.G.multiply(o).getX().toBigInteger().mod(s)}while(u.compareTo(r.ZERO)<=0);var l=o.modInverse(s).multiply(a.add(n.multiply(u))).mod(s);return i.biRSSigToASN1Sig(u,l)},this.sign=function(e,t){var n=t,i=this.ecparams.n,s=r.fromByteArrayUnsigned(e);do{var a=this.getBigRandom(i),o=this.ecparams.G.multiply(a).getX().toBigInteger().mod(i)}while(o.compareTo(Qe.ZERO)<=0);var u=a.modInverse(i).multiply(s.add(n.multiply(o))).mod(i);return this.serializeSig(o,u)},this.verifyWithMessageHash=function(e,t){return this.verifyHex(e,t,this.pubKeyHex)},this.verifyHex=function(e,t,s){try{var a,o,u=i.parseSigHex(t);a=u.r,o=u.s;var l=n.decodeFromHex(this.ecparams.curve,s),c=new r(e.substring(0,this.ecparams.keycharlen),16);return this.verifyRaw(c,a,o,l)}catch(e){return!1}},this.verify=function(e,t,i){var s,a,o;if(Bitcoin.Util.isArray(t)){var u=this.parseSig(t);s=u.r,a=u.s}else{if("object"!=typeof t||!t.r||!t.s)throw"Invalid value for signature";s=t.r,a=t.s}if(i instanceof Lt)o=i;else{if(!Bitcoin.Util.isArray(i))throw"Invalid format for pubkey value, must be byte array or ECPointFp";o=n.decodeFrom(this.ecparams.curve,i)}var l=r.fromByteArrayUnsigned(e);return this.verifyRaw(l,s,a,o)},this.verifyRaw=function(e,t,n,i){var s=this.ecparams.n,a=this.ecparams.G;if(t.compareTo(r.ONE)<0||t.compareTo(s)>=0)return!1;if(n.compareTo(r.ONE)<0||n.compareTo(s)>=0)return!1;var o=n.modInverse(s),u=e.multiply(o).mod(s),l=t.multiply(o).mod(s);return a.multiply(u).add(i.multiply(l)).getX().toBigInteger().mod(s).equals(t)},this.serializeSig=function(e,t){var r=e.toByteArraySigned(),n=t.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),(i=i.concat(r)).push(2),i.push(n.length),(i=i.concat(n)).unshift(i.length),i.unshift(48),i},this.parseSig=function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(2!=e[t=2])throw new Error("First element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);if(2!=e[t+=2+e[t+1]])throw new Error("Second element in signature must be a DERInteger");var i=e.slice(t+2,t+2+e[t+1]);return t+=2+e[t+1],{r:r.fromByteArrayUnsigned(n),s:r.fromByteArrayUnsigned(i)}},this.parseSigCompact=function(e){if(65!==e.length)throw"Signature has the wrong length";var t=e[0]-27;if(t<0||t>7)throw"Invalid signature type";var n=this.ecparams.n;return{r:r.fromByteArrayUnsigned(e.slice(1,33)).mod(n),s:r.fromByteArrayUnsigned(e.slice(33,65)).mod(n),i:t}},this.readPKCS5PrvKeyHex=function(e){if(!1===l(e))throw new Error("not ASN.1 hex string");var t,r,n;try{t=u(e,0,["[0]",0],"06"),r=u(e,0,[1],"04");try{n=u(e,0,["[1]",0],"03")}catch(e){}}catch(e){throw new Error("malformed PKCS#1/5 plain ECC private key")}if(this.curveName=a(t),void 0===this.curveName)throw"unsupported curve name";this.setNamedCurve(this.curveName),this.setPublicKeyHex(n),this.setPrivateKeyHex(r),this.isPublic=!1},this.readPKCS8PrvKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var r,n,i;try{u(e,0,[1,0],"06"),r=u(e,0,[1,1],"06"),n=u(e,0,[2,0,1],"04");try{i=u(e,0,[2,0,"[1]",0],"03")}catch(e){}}catch(e){throw new t("malformed PKCS#8 plain ECC private key")}if(this.curveName=a(r),void 0===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i),this.setPrivateKeyHex(n),this.isPublic=!1},this.readPKCS8PubKeyHex=function(e){if(!1===l(e))throw new t("not ASN.1 hex string");var r,n;try{u(e,0,[0,0],"06"),r=u(e,0,[0,1],"06"),n=u(e,0,[1],"03")}catch(e){throw new t("malformed PKCS#8 ECC public key")}if(this.curveName=a(r),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(n)},this.readCertPubKeyHex=function(e,r){if(!1===l(e))throw new t("not ASN.1 hex string");var n,i;try{n=u(e,0,[0,5,0,1],"06"),i=u(e,0,[0,5,1],"03")}catch(e){throw new t("malformed X.509 certificate ECC public key")}if(this.curveName=a(n),null===this.curveName)throw new t("unsupported curve name");this.setNamedCurve(this.curveName),this.setPublicKeyHex(i)},void 0!==e&&void 0!==e.curve&&(this.curveName=e.curve),void 0===this.curveName&&(this.curveName="secp256r1"),this.setNamedCurve(this.curveName),void 0!==e&&(void 0!==e.prv&&this.setPrivateKeyHex(e.prv),void 0!==e.pub&&this.setPublicKeyHex(e.pub))},kt.crypto.ECDSA.parseSigHex=function(e){var t=kt.crypto.ECDSA.parseSigHexInHexRS(e);return{r:new Qe(t.r,16),s:new Qe(t.s,16)}},kt.crypto.ECDSA.parseSigHexInHexRS=function(e){var t=jt,r=t.getChildIdx,n=t.getV;if(t.checkStrictDER(e,0),"30"!=e.substr(0,2))throw new Error("signature is not a ASN.1 sequence");var i=r(e,0);if(2!=i.length)throw new Error("signature shall have two elements");var s=i[0],a=i[1];if("02"!=e.substr(s,2))throw new Error("1st item not ASN.1 integer");if("02"!=e.substr(a,2))throw new Error("2nd item not ASN.1 integer");return{r:n(e,s),s:n(e,a)}},kt.crypto.ECDSA.asn1SigToConcatSig=function(e){var t=kt.crypto.ECDSA.parseSigHexInHexRS(e),r=t.r,n=t.s;if(r.length>=130&&r.length<=134){if(r.length%2!=0)throw Error("unknown ECDSA sig r length error");if(n.length%2!=0)throw Error("unknown ECDSA sig s length error");"00"==r.substr(0,2)&&(r=r.substr(2)),"00"==n.substr(0,2)&&(n=n.substr(2));var i=Math.max(r.length,n.length);return(r=("000000"+r).slice(-i))+(n=("000000"+n).slice(-i))}if("00"==r.substr(0,2)&&r.length%32==2&&(r=r.substr(2)),"00"==n.substr(0,2)&&n.length%32==2&&(n=n.substr(2)),r.length%32==30&&(r="00"+r),n.length%32==30&&(n="00"+n),r.length%32!=0)throw Error("unknown ECDSA sig r length error");if(n.length%32!=0)throw Error("unknown ECDSA sig s length error");return r+n},kt.crypto.ECDSA.concatSigToASN1Sig=function(e){if(e.length%4!=0)throw Error("unknown ECDSA concatinated r-s sig length error");var t=e.substr(0,e.length/2),r=e.substr(e.length/2);return kt.crypto.ECDSA.hexRSSigToASN1Sig(t,r)},kt.crypto.ECDSA.hexRSSigToASN1Sig=function(e,t){var r=new Qe(e,16),n=new Qe(t,16);return kt.crypto.ECDSA.biRSSigToASN1Sig(r,n)},kt.crypto.ECDSA.biRSSigToASN1Sig=function(e,t){var r=kt.asn1,n=new r.DERInteger({bigint:e}),i=new r.DERInteger({bigint:t});return new r.DERSequence({array:[n,i]}).tohex()},kt.crypto.ECDSA.getName=function(e){return"2b8104001f"===e?"secp192k1":"2a8648ce3d030107"===e?"secp256r1":"2b8104000a"===e?"secp256k1":"2b81040021"===e?"secp224r1":"2b81040022"===e?"secp384r1":"2b81040023"===e?"secp521r1":-1!=="|secp256r1|NIST P-256|P-256|prime256v1|".indexOf(e)?"secp256r1":-1!=="|secp256k1|".indexOf(e)?"secp256k1":-1!=="|secp224r1|NIST P-224|P-224|".indexOf(e)?"secp224r1":-1!=="|secp384r1|NIST P-384|P-384|".indexOf(e)?"secp384r1":-1!=="|secp521r1|NIST P-521|P-521|".indexOf(e)?"secp521r1":null},void 0!==kt&&kt||(kt={}),void 0!==kt.crypto&&kt.crypto||(kt.crypto={}),kt.crypto.ECParameterDB=new function(){var e={},t={};function r(e){return new Qe(e,16)}this.getByName=function(r){var n=r;if(void 0!==t[n]&&(n=t[r]),void 0!==e[n])return e[n];throw"unregistered EC curve name: "+n},this.regist=function(n,i,s,a,o,u,l,c,h,p,f,d){e[n]={};var g=r(s),m=r(a),y=r(o),E=r(u),v=r(l),T=new Mt(g,m,y),A=T.decodePointHex("04"+c+h);e[n].name=n,e[n].keylen=i,e[n].keycharlen=2*Math.ceil(i/8),e[n].curve=T,e[n].G=A,e[n].n=E,e[n].h=v,e[n].oid=f,e[n].info=d;for(var S=0;S<p.length;S++)t[p[S]]=n}},kt.crypto.ECParameterDB.regist("secp128r1",128,"FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC","E87579C11079F43DD824993C2CEE5ED3","FFFFFFFE0000000075A30D1B9038A115","1","161FF7528B899B2D0C28607CA52C5B86","CF5AC8395BAFEB13C02DA292DDED7A83",[],"","secp128r1 : SECG curve over a 128 bit prime field"),kt.crypto.ECParameterDB.regist("secp160k1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73","0","7","0100000000000000000001B8FA16DFAB9ACA16B6B3","1","3B4C382CE37AA192A4019E763036F4F5DD4D7EBB","938CF935318FDCED6BC28286531733C3F03C4FEE",[],"","secp160k1 : SECG curve over a 160 bit prime field"),kt.crypto.ECParameterDB.regist("secp160r1",160,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC","1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45","0100000000000000000001F4C8F927AED3CA752257","1","4A96B5688EF573284664698968C38BB913CBFC82","23A628553168947D59DCC912042351377AC5FB32",[],"","secp160r1 : SECG curve over a 160 bit prime field"),kt.crypto.ECParameterDB.regist("secp192k1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37","0","3","FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D","1","DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D","9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D",[]),kt.crypto.ECParameterDB.regist("secp192r1",192,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC","64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1","FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831","1","188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF1012","07192B95FFC8DA78631011ED6B24CDD573F977A11E794811",[]),kt.crypto.ECParameterDB.regist("secp224r1",224,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE","B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4","FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D","1","B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21","BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34",[]),kt.crypto.ECParameterDB.regist("secp256k1",256,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","0","7","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","1","79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8",[]),kt.crypto.ECParameterDB.regist("secp256r1",256,"FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC","5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B","FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551","1","6B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C296","4FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5",["NIST P-256","P-256","prime256v1"]),kt.crypto.ECParameterDB.regist("secp384r1",384,"FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFF0000000000000000FFFFFFFC","B3312FA7E23EE7E4988E056BE3F82D19181D9C6EFE8141120314088F5013875AC656398D8A2ED19D2A85C8EDD3EC2AEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC7634D81F4372DDF581A0DB248B0A77AECEC196ACCC52973","1","AA87CA22BE8B05378EB1C71EF320AD746E1D3B628BA79B9859F741E082542A385502F25DBF55296C3A545E3872760AB7","3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f",["NIST P-384","P-384"]),kt.crypto.ECParameterDB.regist("secp521r1",521,"1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFC","051953EB9618E1C9A1F929A21A0B68540EEA2DA725B99B315F3B8B489918EF109E156193951EC7E937B1652C0BD3BB1BF073573DF883D2C34F1EF451FD46B503F00","1FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFA51868783BF2F966B7FCC0148F709A5D03BB5C9B8899C47AEBB6FB71E91386409","1","00C6858E06B70404E9CD9E3ECB662395B4429C648139053FB521F828AF606B4D3DBAA14B5E77EFE75928FE1DC127A2FFA8DE3348B3C1856A429BF97E7E31C2E5BD66","011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650",["NIST P-521","P-521"]),void 0!==kt&&kt||(kt={}),void 0!==kt.crypto&&kt.crypto||(kt.crypto={}),kt.crypto.DSA=function(){var e=jt,t=(e.getVbyList,e.getVbyListEx),r=e.isASN1HEX,n=Qe;this.p=null,this.q=null,this.g=null,this.y=null,this.x=null,this.type="DSA",this.isPrivate=!1,this.isPublic=!1,this.setPrivate=function(e,t,r,n,i){this.isPrivate=!0,this.p=e,this.q=t,this.g=r,this.y=n,this.x=i},this.setPrivateHex=function(e,t,r,n,i){var s,a,o,u,l;s=new Qe(e,16),a=new Qe(t,16),o=new Qe(r,16),u="string"==typeof n&&n.length>1?new Qe(n,16):null,l=new Qe(i,16),this.setPrivate(s,a,o,u,l)},this.setPublic=function(e,t,r,n){this.isPublic=!0,this.p=e,this.q=t,this.g=r,this.y=n,this.x=null},this.setPublicHex=function(e,t,r,n){var i,s,a,o;i=new Qe(e,16),s=new Qe(t,16),a=new Qe(r,16),o=new Qe(n,16),this.setPublic(i,s,a,o)},this.signWithMessageHash=function(e){var t=this.p,r=this.q,n=this.g,i=(this.y,this.x),s=kt.crypto.Util.getRandomBigIntegerMinToMax(Qe.ONE.add(Qe.ONE),r.subtract(Qe.ONE)),a=new Qe(e.substr(0,r.bitLength()/4),16),o=n.modPow(s,t).mod(r),u=s.modInverse(r).multiply(a.add(i.multiply(o))).mod(r);return kt.asn1.ASN1Util.jsonToASN1HEX({seq:[{int:{bigint:o}},{int:{bigint:u}}]})},this.verifyWithMessageHash=function(e,t){var r=this.p,n=this.q,i=this.g,s=this.y,a=this.parseASN1Signature(t),o=a[0],u=a[1],l=new Qe(e.substr(0,n.bitLength()/4),16);if(Qe.ZERO.compareTo(o)>0||o.compareTo(n)>0)throw"invalid DSA signature";if(Qe.ZERO.compareTo(u)>=0||u.compareTo(n)>0)throw"invalid DSA signature";var c=u.modInverse(n),h=l.multiply(c).mod(n),p=o.multiply(c).mod(n);return 0==i.modPow(h,r).multiply(s.modPow(p,r)).mod(r).mod(n).compareTo(o)},this.parseASN1Signature=function(e){try{return[new n(t(e,0,[0],"02"),16),new n(t(e,0,[1],"02"),16)]}catch(e){throw new Error("malformed ASN.1 DSA signature")}},this.readPKCS5PrvKeyHex=function(e){var n,i,s,a,o;if(!1===r(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[1],"02"),i=t(e,0,[2],"02"),s=t(e,0,[3],"02"),a=t(e,0,[4],"02"),o=t(e,0,[5],"02")}catch(e){throw new Error("malformed PKCS#1/5 plain DSA private key")}this.setPrivateHex(n,i,s,a,o)},this.readPKCS8PrvKeyHex=function(e){var n,i,s,a;if(!1===r(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[1,1,0],"02"),i=t(e,0,[1,1,1],"02"),s=t(e,0,[1,1,2],"02"),a=t(e,0,[2,0],"02")}catch(e){throw new Error("malformed PKCS#8 plain DSA private key")}this.setPrivateHex(n,i,s,null,a)},this.readPKCS8PubKeyHex=function(e){var n,i,s,a;if(!1===r(e))throw new Error("not ASN.1 hex string");try{n=t(e,0,[0,1,0],"02"),i=t(e,0,[0,1,1],"02"),s=t(e,0,[0,1,2],"02"),a=t(e,0,[1,0],"02")}catch(e){throw new Error("malformed PKCS#8 DSA public key")}this.setPublicHex(n,i,s,a)},this.readCertPubKeyHex=function(e,n){var i,s,a,o;if(!1===r(e))throw new Error("not ASN.1 hex string");try{i=t(e,0,[0,5,0,1,0],"02"),s=t(e,0,[0,5,0,1,1],"02"),a=t(e,0,[0,5,0,1,2],"02"),o=t(e,0,[0,5,1,0],"02")}catch(e){throw new Error("malformed X.509 certificate DSA public key")}this.setPublicHex(i,s,a,o)}};var Rr=function(){var e=function(e,r,n){return t(Ke.AES,e,r,n)},t=function(e,t,r,n){var i=Ke.enc.Hex.parse(t),s=Ke.enc.Hex.parse(r),a=Ke.enc.Hex.parse(n),o={};o.key=s,o.iv=a,o.ciphertext=i;var u=e.decrypt(o,s,{iv:a});return Ke.enc.Hex.stringify(u)},r=function(e,t,r){return n(Ke.AES,e,t,r)},n=function(e,t,r,n){var i=Ke.enc.Hex.parse(t),s=Ke.enc.Hex.parse(r),a=Ke.enc.Hex.parse(n),o=e.encrypt(i,s,{iv:a}),u=Ke.enc.Hex.parse(o.toString());return Ke.enc.Base64.stringify(u)},i={"AES-256-CBC":{proc:e,eproc:r,keylen:32,ivlen:16},"AES-192-CBC":{proc:e,eproc:r,keylen:24,ivlen:16},"AES-128-CBC":{proc:e,eproc:r,keylen:16,ivlen:16},"DES-EDE3-CBC":{proc:function(e,r,n){return t(Ke.TripleDES,e,r,n)},eproc:function(e,t,r){return n(Ke.TripleDES,e,t,r)},keylen:24,ivlen:8},"DES-CBC":{proc:function(e,r,n){return t(Ke.DES,e,r,n)},eproc:function(e,t,r){return n(Ke.DES,e,t,r)},keylen:8,ivlen:8}},s=function(e){var t={},r=e.match(new RegExp("DEK-Info: ([^,]+),([0-9A-Fa-f]+)","m"));r&&(t.cipher=r[1],t.ivsalt=r[2]);var n=e.match(new RegExp("-----BEGIN ([A-Z]+) PRIVATE KEY-----"));n&&(t.type=n[1]);var i=-1,s=0;-1!=e.indexOf("\r\n\r\n")&&(i=e.indexOf("\r\n\r\n"),s=2),-1!=e.indexOf("\n\n")&&(i=e.indexOf("\n\n"),s=1);var a=e.indexOf("-----END");if(-1!=i&&-1!=a){var o=e.substring(i+2*s,a-s);o=o.replace(/\s+/g,""),t.data=o}return t},a=function(e,t,r){for(var n=r.substring(0,16),s=Ke.enc.Hex.parse(n),a=Ke.enc.Utf8.parse(t),o=i[e].keylen+i[e].ivlen,u="",l=null;;){var c=Ke.algo.MD5.create();if(null!=l&&c.update(l),c.update(a),c.update(s),l=c.finalize(),(u+=Ke.enc.Hex.stringify(l)).length>=2*o)break}var h={};return h.keyhex=u.substr(0,2*i[e].keylen),h.ivhex=u.substr(2*i[e].keylen,2*i[e].ivlen),h},o=function(e,t,r,n){var s=Ke.enc.Base64.parse(e),a=Ke.enc.Hex.stringify(s);return(0,i[t].proc)(a,r,n)};return{version:"1.0.0",parsePKCS5PEM:function(e){return s(e)},getKeyAndUnusedIvByPasscodeAndIvsalt:function(e,t,r){return a(e,t,r)},decryptKeyB64:function(e,t,r,n){return o(e,t,r,n)},getDecryptedKeyHex:function(e,t){var r=s(e),n=(r.type,r.cipher),i=r.ivsalt,u=r.data,l=a(n,t,i).keyhex;return o(u,n,l,i)},getEncryptedPKCS5PEMFromPrvKeyHex:function(e,t,r,n,s){var o="";if(void 0!==n&&null!=n||(n="AES-256-CBC"),void 0===i[n])throw new Error("KEYUTIL unsupported algorithm: "+n);if(void 0===s||null==s){var u=function(e){var t=Ke.lib.WordArray.random(e);return Ke.enc.Hex.stringify(t)}(i[n].ivlen);s=u.toUpperCase()}var l=function(e,t,r,n){return(0,i[t].eproc)(e,r,n)}(t,n,a(n,r,s).keyhex,s);o="-----BEGIN "+e+" PRIVATE KEY-----\r\n";return o+="Proc-Type: 4,ENCRYPTED\r\n",o+="DEK-Info: "+n+","+s+"\r\n",o+="\r\n",o+=l.replace(/(.{64})/g,"$1\r\n"),o+="\r\n-----END "+e+" PRIVATE KEY-----\r\n"},parseHexOfEncryptedPKCS8:function(e){var t=jt,r=t.getChildIdx,n=t.getV,i={},s=r(e,0);if(2!=s.length)throw new Error("malformed format: SEQUENCE(0).items != 2: "+s.length);i.ciphertext=n(e,s[1]);var a=r(e,s[0]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0).items != 2: "+a.length);if("2a864886f70d01050d"!=n(e,a[0]))throw new Error("this only supports pkcs5PBES2");var o=r(e,a[1]);if(2!=a.length)throw new Error("malformed format: SEQUENCE(0.0.1).items != 2: "+o.length);var u=r(e,o[1]);if(2!=u.length)throw new Error("malformed format: SEQUENCE(0.0.1.1).items != 2: "+u.length);if("2a864886f70d0307"!=n(e,u[0]))throw"this only supports TripleDES";i.encryptionSchemeAlg="TripleDES",i.encryptionSchemeIV=n(e,u[1]);var l=r(e,o[0]);if(2!=l.length)throw new Error("malformed format: SEQUENCE(0.0.1.0).items != 2: "+l.length);if("2a864886f70d01050c"!=n(e,l[0]))throw new Error("this only supports pkcs5PBKDF2");var c=r(e,l[1]);if(c.length<2)throw new Error("malformed format: SEQUENCE(0.0.1.0.1).items < 2: "+c.length);i.pbkdf2Salt=n(e,c[0]);var h=n(e,c[1]);try{i.pbkdf2Iter=parseInt(h,16)}catch(e){throw new Error("malformed format pbkdf2Iter: "+h)}return i},getPBKDF2KeyHexFromParam:function(e,t){var r=Ke.enc.Hex.parse(e.pbkdf2Salt),n=e.pbkdf2Iter,i=Ke.PBKDF2(t,r,{keySize:6,iterations:n});return Ke.enc.Hex.stringify(i)},_getPlainPKCS8HexFromEncryptedPKCS8PEM:function(e,t){var r=ar(e,"ENCRYPTED PRIVATE KEY"),n=this.parseHexOfEncryptedPKCS8(r),i=Rr.getPBKDF2KeyHexFromParam(n,t),s={};s.ciphertext=Ke.enc.Hex.parse(n.ciphertext);var a=Ke.enc.Hex.parse(i),o=Ke.enc.Hex.parse(n.encryptionSchemeIV),u=Ke.TripleDES.decrypt(s,a,{iv:o});return Ke.enc.Hex.stringify(u)},getKeyFromEncryptedPKCS8PEM:function(e,t){var r=this._getPlainPKCS8HexFromEncryptedPKCS8PEM(e,t);return this.getKeyFromPlainPrivatePKCS8Hex(r)},parsePlainPrivatePKCS8Hex:function(e){var t=jt,r=t.getChildIdx,n=t.getV,i={algparam:null};if("30"!=e.substr(0,2))throw new Error("malformed plain PKCS8 private key(code:001)");var s=r(e,0);if(s.length<3)throw new Error("malformed plain PKCS8 private key(code:002)");if("30"!=e.substr(s[1],2))throw new Error("malformed PKCS8 private key(code:003)");var a=r(e,s[1]);if(2!=a.length)throw new Error("malformed PKCS8 private key(code:004)");if("06"!=e.substr(a[0],2))throw new Error("malformed PKCS8 private key(code:005)");if(i.algoid=n(e,a[0]),"06"==e.substr(a[1],2)&&(i.algparam=n(e,a[1])),"04"!=e.substr(s[2],2))throw new Error("malformed PKCS8 private key(code:006)");return i.keyidx=t.getVidx(e,s[2]),i},getKeyFromPlainPrivatePKCS8PEM:function(e){var t=ar(e,"PRIVATE KEY");return this.getKeyFromPlainPrivatePKCS8Hex(t)},getKeyFromPlainPrivatePKCS8Hex:function(e){var t,r=this.parsePlainPrivatePKCS8Hex(e);if("2a864886f70d010101"==r.algoid)t=new Dt;else if("2a8648ce380401"==r.algoid)t=new kt.crypto.DSA;else{if("2a8648ce3d0201"!=r.algoid)throw new Error("unsupported private key algorithm");t=new kt.crypto.ECDSA}return t.readPKCS8PrvKeyHex(e),t},_getKeyFromPublicPKCS8Hex:function(e){var t,r=jt.getVbyList(e,0,[0,0],"06");if("2a864886f70d010101"===r)t=new Dt;else if("2a8648ce380401"===r)t=new kt.crypto.DSA;else{if("2a8648ce3d0201"!==r)throw new Error("unsupported PKCS#8 public key hex");t=new kt.crypto.ECDSA}return t.readPKCS8PubKeyHex(e),t},parsePublicRawRSAKeyHex:function(e){var t=jt,r=t.getChildIdx,n=t.getV,i={};if("30"!=e.substr(0,2))throw new Error("malformed RSA key(code:001)");var s=r(e,0);if(2!=s.length)throw new Error("malformed RSA key(code:002)");if("02"!=e.substr(s[0],2))throw new Error("malformed RSA key(code:003)");if(i.n=n(e,s[0]),"02"!=e.substr(s[1],2))throw new Error("malformed RSA key(code:004)");return i.e=n(e,s[1]),i},parsePublicPKCS8Hex:function(e){var t=jt,r=t.getChildIdx,n=t.getV,i={algparam:null},s=r(e,0);if(2!=s.length)throw new Error("outer DERSequence shall have 2 elements: "+s.length);var a=s[0];if("30"!=e.substr(a,2))throw new Error("malformed PKCS8 public key(code:001)");var o=r(e,a);if(2!=o.length)throw new Error("malformed PKCS8 public key(code:002)");if("06"!=e.substr(o[0],2))throw new Error("malformed PKCS8 public key(code:003)");if(i.algoid=n(e,o[0]),"06"==e.substr(o[1],2)?i.algparam=n(e,o[1]):"30"==e.substr(o[1],2)&&(i.algparam={},i.algparam.p=t.getVbyList(e,o[1],[0],"02"),i.algparam.q=t.getVbyList(e,o[1],[1],"02"),i.algparam.g=t.getVbyList(e,o[1],[2],"02")),"03"!=e.substr(s[1],2))throw new Error("malformed PKCS8 public key(code:004)");return i.key=n(e,s[1]).substr(2),i}}}();Rr.getKey=function(e,t,r){var n=(m=jt).getChildIdx,i=(m.getV,m.getVbyList),s=kt.crypto,a=s.ECDSA,o=s.DSA,u=Dt,l=ar,c=Rr;if(void 0!==u&&e instanceof u)return e;if(void 0!==a&&e instanceof a)return e;if(void 0!==o&&e instanceof o)return e;if(void 0!==e.curve&&void 0!==e.xy&&void 0===e.d)return new a({pub:e.xy,curve:e.curve});if(void 0!==e.curve&&void 0!==e.d)return new a({prv:e.d,curve:e.curve});if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(x=new u).setPublic(e.n,e.e),x;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.co&&void 0===e.qi)return(x=new u).setPrivateEx(e.n,e.e,e.d,e.p,e.q,e.dp,e.dq,e.co),x;if(void 0===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0===e.p)return(x=new u).setPrivate(e.n,e.e,e.d),x;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0===e.x)return(x=new o).setPublic(e.p,e.q,e.g,e.y),x;if(void 0!==e.p&&void 0!==e.q&&void 0!==e.g&&void 0!==e.y&&void 0!==e.x)return(x=new o).setPrivate(e.p,e.q,e.g,e.y,e.x),x;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0===e.d)return(x=new u).setPublic(Qt(e.n),Qt(e.e)),x;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d&&void 0!==e.p&&void 0!==e.q&&void 0!==e.dp&&void 0!==e.dq&&void 0!==e.qi)return(x=new u).setPrivateEx(Qt(e.n),Qt(e.e),Qt(e.d),Qt(e.p),Qt(e.q),Qt(e.dp),Qt(e.dq),Qt(e.qi)),x;if("RSA"===e.kty&&void 0!==e.n&&void 0!==e.e&&void 0!==e.d)return(x=new u).setPrivate(Qt(e.n),Qt(e.e),Qt(e.d)),x;if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0===e.d){var h=(I=new a({curve:e.crv})).ecparams.keycharlen,p="04"+("0000000000"+Qt(e.x)).slice(-h)+("0000000000"+Qt(e.y)).slice(-h);return I.setPublicKeyHex(p),I}if("EC"===e.kty&&void 0!==e.crv&&void 0!==e.x&&void 0!==e.y&&void 0!==e.d){h=(I=new a({curve:e.crv})).ecparams.keycharlen,p="04"+("0000000000"+Qt(e.x)).slice(-h)+("0000000000"+Qt(e.y)).slice(-h);var f=("0000000000"+Qt(e.d)).slice(-h);return I.setPublicKeyHex(p),I.setPrivateKeyHex(f),I}if("pkcs5prv"===r){var d,g=e,m=jt;if(9===(d=n(g,0)).length)(x=new u).readPKCS5PrvKeyHex(g);else if(6===d.length)(x=new o).readPKCS5PrvKeyHex(g);else{if(!(d.length>2&&"04"===g.substr(d[1],2)))throw new Error("unsupported PKCS#1/5 hexadecimal key");(x=new a).readPKCS5PrvKeyHex(g)}return x}if("pkcs8prv"===r)return x=c.getKeyFromPlainPrivatePKCS8Hex(e);if("pkcs8pub"===r)return c._getKeyFromPublicPKCS8Hex(e);if("x509pub"===r)return Pr.getPublicKeyFromCertHex(e);if(-1!=e.indexOf("-END CERTIFICATE-",0)||-1!=e.indexOf("-END X509 CERTIFICATE-",0)||-1!=e.indexOf("-END TRUSTED CERTIFICATE-",0))return Pr.getPublicKeyFromCertPEM(e);if(-1!=e.indexOf("-END PUBLIC KEY-")){var y=ar(e,"PUBLIC KEY");return c._getKeyFromPublicPKCS8Hex(y)}if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var E=l(e,"RSA PRIVATE KEY");return c.getKey(E,null,"pkcs5prv")}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){var v=i(R=l(e,"DSA PRIVATE KEY"),0,[1],"02"),T=i(R,0,[2],"02"),A=i(R,0,[3],"02"),S=i(R,0,[4],"02"),_=i(R,0,[5],"02");return(x=new o).setPrivate(new Qe(v,16),new Qe(T,16),new Qe(A,16),new Qe(S,16),new Qe(_,16)),x}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1==e.indexOf("4,ENCRYPTED")){E=l(e,"EC PRIVATE KEY");return c.getKey(E,null,"pkcs5prv")}if(-1!=e.indexOf("-END PRIVATE KEY-"))return c.getKeyFromPlainPrivatePKCS8PEM(e);if(-1!=e.indexOf("-END RSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var b=c.getDecryptedKeyHex(e,t),C=new Dt;return C.readPKCS5PrvKeyHex(b),C}if(-1!=e.indexOf("-END EC PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var I,x=i(R=c.getDecryptedKeyHex(e,t),0,[1],"04"),w=i(R,0,[2,0],"06"),N=i(R,0,[3,0],"03").substr(2);if(void 0===kt.crypto.OID.oidhex2name[w])throw new Error("undefined OID(hex) in KJUR.crypto.OID: "+w);return(I=new a({curve:kt.crypto.OID.oidhex2name[w]})).setPublicKeyHex(N),I.setPrivateKeyHex(x),I.isPublic=!1,I}if(-1!=e.indexOf("-END DSA PRIVATE KEY-")&&-1!=e.indexOf("4,ENCRYPTED")){var R;v=i(R=c.getDecryptedKeyHex(e,t),0,[1],"02"),T=i(R,0,[2],"02"),A=i(R,0,[3],"02"),S=i(R,0,[4],"02"),_=i(R,0,[5],"02");return(x=new o).setPrivate(new Qe(v,16),new Qe(T,16),new Qe(A,16),new Qe(S,16),new Qe(_,16)),x}if(-1!=e.indexOf("-END ENCRYPTED PRIVATE KEY-"))return c.getKeyFromEncryptedPKCS8PEM(e,t);throw new Error("not supported argument")},Rr.generateKeypair=function(e,t){if("RSA"==e){var r=t;(a=new Dt).generate(r,"10001"),a.isPrivate=!0,a.isPublic=!0;var n=new Dt,i=a.n.toString(16),s=a.e.toString(16);return n.setPublic(i,s),n.isPrivate=!1,n.isPublic=!0,(o={}).prvKeyObj=a,o.pubKeyObj=n,o}if("EC"==e){var a,o,u=t,l=new kt.crypto.ECDSA({curve:u}).generateKeyPairHex();return(a=new kt.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),a.setPrivateKeyHex(l.ecprvhex),a.isPrivate=!0,a.isPublic=!1,(n=new kt.crypto.ECDSA({curve:u})).setPublicKeyHex(l.ecpubhex),n.isPrivate=!1,n.isPublic=!0,(o={}).prvKeyObj=a,o.pubKeyObj=n,o}throw new Error("unknown algorithm: "+e)},Rr.getPEM=function(e,t,r,n,i,s){var a=kt,o=a.asn1,u=o.DERObjectIdentifier,l=o.DERInteger,c=o.ASN1Util.newObject,h=o.x509.SubjectPublicKeyInfo,p=a.crypto,f=p.DSA,d=p.ECDSA,g=Dt;function m(e){return c({seq:[{int:0},{int:{bigint:e.n}},{int:e.e},{int:{bigint:e.d}},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.dmp1}},{int:{bigint:e.dmq1}},{int:{bigint:e.coeff}}]})}function y(e){return c({seq:[{int:1},{octstr:{hex:e.prvKeyHex}},{tag:["a0",!0,{oid:{name:e.curveName}}]},{tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]}]})}function E(e){return c({seq:[{int:0},{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}},{int:{bigint:e.y}},{int:{bigint:e.x}}]})}if((void 0!==g&&e instanceof g||void 0!==f&&e instanceof f||void 0!==d&&e instanceof d)&&1==e.isPublic&&(void 0===t||"PKCS8PUB"==t))return sr(S=new h(e).tohex(),"PUBLIC KEY");if("PKCS1PRV"==t&&void 0!==g&&e instanceof g&&(void 0===r||null==r)&&1==e.isPrivate)return sr(S=m(e).tohex(),"RSA PRIVATE KEY");if("PKCS1PRV"==t&&void 0!==d&&e instanceof d&&(void 0===r||null==r)&&1==e.isPrivate){var v=new u({name:e.curveName}).tohex(),T=y(e).tohex(),A="";return A+=sr(v,"EC PARAMETERS"),A+=sr(T,"EC PRIVATE KEY")}if("PKCS1PRV"==t&&void 0!==f&&e instanceof f&&(void 0===r||null==r)&&1==e.isPrivate)return sr(S=E(e).tohex(),"DSA PRIVATE KEY");if("PKCS5PRV"==t&&void 0!==g&&e instanceof g&&void 0!==r&&null!=r&&1==e.isPrivate){var S=m(e).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("RSA",S,r,n,s)}if("PKCS5PRV"==t&&void 0!==d&&e instanceof d&&void 0!==r&&null!=r&&1==e.isPrivate){S=y(e).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("EC",S,r,n,s)}if("PKCS5PRV"==t&&void 0!==f&&e instanceof f&&void 0!==r&&null!=r&&1==e.isPrivate){S=E(e).tohex();return void 0===n&&(n="DES-EDE3-CBC"),this.getEncryptedPKCS5PEMFromPrvKeyHex("DSA",S,r,n,s)}var _=function(e,t){var r=b(e,t);return new c({seq:[{seq:[{oid:{name:"pkcs5PBES2"}},{seq:[{seq:[{oid:{name:"pkcs5PBKDF2"}},{seq:[{octstr:{hex:r.pbkdf2Salt}},{int:r.pbkdf2Iter}]}]},{seq:[{oid:{name:"des-EDE3-CBC"}},{octstr:{hex:r.encryptionSchemeIV}}]}]}]},{octstr:{hex:r.ciphertext}}]}).tohex()},b=function(e,t){var r=Ke.lib.WordArray.random(8),n=Ke.lib.WordArray.random(8),i=Ke.PBKDF2(t,r,{keySize:6,iterations:100}),s=Ke.enc.Hex.parse(e),a=Ke.TripleDES.encrypt(s,i,{iv:n})+"",o={};return o.ciphertext=a,o.pbkdf2Salt=Ke.enc.Hex.stringify(r),o.pbkdf2Iter=100,o.encryptionSchemeAlg="DES-EDE3-CBC",o.encryptionSchemeIV=Ke.enc.Hex.stringify(n),o};if("PKCS8PRV"==t&&null!=g&&e instanceof g&&1==e.isPrivate){var C=m(e).tohex();S=c({seq:[{int:0},{seq:[{oid:{name:"rsaEncryption"}},{null:!0}]},{octstr:{hex:C}}]}).tohex();return void 0===r||null==r?sr(S,"PRIVATE KEY"):sr(T=_(S,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==d&&e instanceof d&&1==e.isPrivate){var I={seq:[{int:1},{octstr:{hex:e.prvKeyHex}}]};"string"==typeof e.pubKeyHex&&I.seq.push({tag:["a1",!0,{bitstr:{hex:"00"+e.pubKeyHex}}]});C=new c(I).tohex(),S=c({seq:[{int:0},{seq:[{oid:{name:"ecPublicKey"}},{oid:{name:e.curveName}}]},{octstr:{hex:C}}]}).tohex();return void 0===r||null==r?sr(S,"PRIVATE KEY"):sr(T=_(S,r),"ENCRYPTED PRIVATE KEY")}if("PKCS8PRV"==t&&void 0!==f&&e instanceof f&&1==e.isPrivate){C=new l({bigint:e.x}).tohex(),S=c({seq:[{int:0},{seq:[{oid:{name:"dsa"}},{seq:[{int:{bigint:e.p}},{int:{bigint:e.q}},{int:{bigint:e.g}}]}]},{octstr:{hex:C}}]}).tohex();return void 0===r||null==r?sr(S,"PRIVATE KEY"):sr(T=_(S,r),"ENCRYPTED PRIVATE KEY")}throw new Error("unsupported object nor format")},Rr.getKeyFromCSRPEM=function(e){var t=ar(e,"CERTIFICATE REQUEST");return Rr.getKeyFromCSRHex(t)},Rr.getKeyFromCSRHex=function(e){var t=Rr.parseCSRHex(e);return Rr.getKey(t.p8pubkeyhex,null,"pkcs8pub")},Rr.parseCSRHex=function(e){var t=jt,r=t.getChildIdx,n=t.getTLV,i={},s=e;if("30"!=s.substr(0,2))throw new Error("malformed CSR(code:001)");var a=r(s,0);if(a.length<1)throw new Error("malformed CSR(code:002)");if("30"!=s.substr(a[0],2))throw new Error("malformed CSR(code:003)");var o=r(s,a[0]);if(o.length<3)throw new Error("malformed CSR(code:004)");return i.p8pubkeyhex=n(s,o[2]),i},Rr.getKeyID=function(e){var t=Rr,r=jt;"string"==typeof e&&-1!=e.indexOf("BEGIN ")&&(e=t.getKey(e));var n=ar(t.getPEM(e)),i=r.getIdxbyList(n,0,[1]),s=r.getV(n,i).substring(2);return kt.crypto.Util.hashHex(s,"sha1")},Rr.getJWK=function(e,t,r,n,i){var s,a,o={},u=kt.crypto.Util.hashHex;if("string"==typeof e)s=Rr.getKey(e),-1!=e.indexOf("CERTIFICATE")&&(a=ar(e));else{if("object"!=typeof e)throw new Error("unsupported keyinfo type");e instanceof Pr?(s=e.getPublicKey(),a=e.hex):s=e}if(s instanceof Dt&&s.isPrivate)o.kty="RSA",o.n=Xt(s.n.toString(16)),o.e=Xt(s.e.toString(16)),o.d=Xt(s.d.toString(16)),o.p=Xt(s.p.toString(16)),o.q=Xt(s.q.toString(16)),o.dp=Xt(s.dmp1.toString(16)),o.dq=Xt(s.dmq1.toString(16)),o.qi=Xt(s.coeff.toString(16));else if(s instanceof Dt&&s.isPublic)o.kty="RSA",o.n=Xt(s.n.toString(16)),o.e=Xt(s.e.toString(16));else if(s instanceof kt.crypto.ECDSA&&s.isPrivate){if("P-256"!==(c=s.getShortNISTPCurveName())&&"P-384"!==c&&"P-521"!==c)throw new Error("unsupported curve name for JWT: "+c);var l=s.getPublicKeyXYHex();o.kty="EC",o.crv=c,o.x=Xt(l.x),o.y=Xt(l.y),o.d=Xt(s.prvKeyHex)}else if(s instanceof kt.crypto.ECDSA&&s.isPublic){var c;if("P-256"!==(c=s.getShortNISTPCurveName())&&"P-384"!==c&&"P-521"!==c)throw new Error("unsupported curve name for JWT: "+c);l=s.getPublicKeyXYHex();o.kty="EC",o.crv=c,o.x=Xt(l.x),o.y=Xt(l.y)}if(null==o.kty)throw new Error("unsupported keyinfo");return s.isPrivate||1==t||(o.kid=kt.jws.JWS.getJWKthumbprint(o)),null!=a&&1!=r&&(o.x5c=[ze(a)]),null!=a&&1!=n&&(o.x5t=zt(ze(u(a,"sha1")))),null!=a&&1!=i&&(o["x5t#S256"]=zt(ze(u(a,"sha256")))),o},Rr.getJWKFromKey=function(e){return Rr.getJWK(e,!0,!0,!0,!0)},Dt.getPosArrayOfChildrenFromHex=function(e){return jt.getChildIdx(e,0)},Dt.getHexValueArrayOfChildrenFromHex=function(e){var t,r=jt.getV,n=r(e,(t=Dt.getPosArrayOfChildrenFromHex(e))[0]),i=r(e,t[1]),s=r(e,t[2]),a=r(e,t[3]),o=r(e,t[4]),u=r(e,t[5]),l=r(e,t[6]),c=r(e,t[7]),h=r(e,t[8]);return(t=new Array).push(n,i,s,a,o,u,l,c,h),t},Dt.prototype.readPrivateKeyFromPEMString=function(e){var t=ar(e),r=Dt.getHexValueArrayOfChildrenFromHex(t);this.setPrivateEx(r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8])},Dt.prototype.readPKCS5PrvKeyHex=function(e){var t=Dt.getHexValueArrayOfChildrenFromHex(e);this.setPrivateEx(t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Dt.prototype.readPKCS8PrvKeyHex=function(e){var t,r,n,i,s,a,o,u,l=jt,c=l.getVbyListEx;if(!1===l.isASN1HEX(e))throw new Error("not ASN.1 hex string");try{t=c(e,0,[2,0,1],"02"),r=c(e,0,[2,0,2],"02"),n=c(e,0,[2,0,3],"02"),i=c(e,0,[2,0,4],"02"),s=c(e,0,[2,0,5],"02"),a=c(e,0,[2,0,6],"02"),o=c(e,0,[2,0,7],"02"),u=c(e,0,[2,0,8],"02")}catch(e){throw new Error("malformed PKCS#8 plain RSA private key")}this.setPrivateEx(t,r,n,i,s,a,o,u)},Dt.prototype.readPKCS5PubKeyHex=function(e){var t=jt,r=t.getV;if(!1===t.isASN1HEX(e))throw new Error("keyHex is not ASN.1 hex string");var n=t.getChildIdx(e,0);if(2!==n.length||"02"!==e.substr(n[0],2)||"02"!==e.substr(n[1],2))throw new Error("wrong hex for PKCS#5 public key");var i=r(e,n[0]),s=r(e,n[1]);this.setPublic(i,s)},Dt.prototype.readPKCS8PubKeyHex=function(e){var t=jt;if(!1===t.isASN1HEX(e))throw new Error("not ASN.1 hex string");if("06092a864886f70d010101"!==t.getTLVbyListEx(e,0,[0,0]))throw new Error("not PKCS8 RSA public key");var r=t.getTLVbyListEx(e,0,[1,0]);this.readPKCS5PubKeyHex(r)},Dt.prototype.readCertPubKeyHex=function(e,t){var r,n;(r=new Pr).readCertHex(e),n=r.getPublicKeyHex(),this.readPKCS8PubKeyHex(n)};new RegExp("[^0-9a-f]","gi");function Fr(e,t){for(var r="",n=t/4-e.length,i=0;i<n;i++)r+="0";return r+e}function Or(e,t,r){for(var n="",i=0;n.length<t;)n+=er(r(tr(e+String.fromCharCode.apply(String,[(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i])))),i+=1;return n}function Dr(e){for(var t in kt.crypto.Util.DIGESTINFOHEAD){var r=kt.crypto.Util.DIGESTINFOHEAD[t],n=r.length;if(e.substring(0,n)==r)return[t,e.substring(n)]}return[]}function Pr(e){var t,r=jt,n=r.getChildIdx,i=r.getV,s=(r.dump,r.parse),a=r.getTLV,o=r.getVbyList,u=r.getVbyListEx,l=r.getTLVbyList,c=r.getTLVbyListEx,h=r.getIdxbyList,p=r.getIdxbyListEx,f=r.getVidx,d=r.getInt,g=r.oidname,m=r.hextooidstr,y=ar;try{t=kt.asn1.x509.AlgorithmIdentifier.PSSNAME2ASN1TLV}catch(e){}this.HEX2STAG={"0c":"utf8",13:"prn",16:"ia5","1a":"vis","1e":"bmp"},this.hex=null,this.version=0,this.foffset=0,this.aExtInfo=null,this.getVersion=function(){if(null===this.hex||0!==this.version)return this.version;var e=l(this.hex,0,[0,0]);if("a0"==e.substr(0,2)){var t=l(e,0,[0]),r=d(t,0);if(r<0||2<r)throw new Error("malformed version field");return this.version=r+1,this.version}return this.version=1,this.foffset=-1,1},this.getSerialNumberHex=function(){return u(this.hex,0,[0,0],"02")},this.getSignatureAlgorithmField=function(){var e=c(this.hex,0,[0,1]);return this.getAlgorithmIdentifierName(e)},this.getAlgorithmIdentifierName=function(e){for(var r in t)if(e===t[r])return r;return g(u(e,0,[0],"06"))},this.getIssuer=function(){return this.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return l(this.hex,0,[0,3+this.foffset],"30")},this.getIssuerString=function(){return this.getIssuer().str},this.getSubject=function(){return this.getX500Name(this.getSubjectHex())},this.getSubjectHex=function(){return l(this.hex,0,[0,5+this.foffset],"30")},this.getSubjectString=function(){return this.getSubject().str},this.getNotBefore=function(){var e=o(this.hex,0,[0,4+this.foffset,0]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getNotAfter=function(){var e=o(this.hex,0,[0,4+this.foffset,1]);return e=e.replace(/(..)/g,"%$1"),e=decodeURIComponent(e)},this.getPublicKeyHex=function(){return this.getSPKI()},this.getSPKI=function(){return l(this.hex,0,[0,6+this.foffset],"30")},this.getSPKIValue=function(){var e=this.getSPKI();return null==e?null:o(e,0,[1],"03",!0)},this.getPublicKeyIdx=function(){return h(this.hex,0,[0,6+this.foffset],"30")},this.getPublicKeyContentIdx=function(){var e=this.getPublicKeyIdx();return h(this.hex,e,[1,0],"30")},this.getPublicKey=function(){return Rr.getKey(this.getPublicKeyHex(),null,"pkcs8pub")},this.getSignatureAlgorithmName=function(){var e=l(this.hex,0,[1],"30");return this.getAlgorithmIdentifierName(e)},this.getSignatureValueHex=function(){return o(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=l(this.hex,0,[0],"30"),i=new kt.crypto.Signature({alg:t});return i.init(e),i.updateHex(n),i.verify(r)},this.parseExt=function(e){var t,s,a;if(void 0===e){if(a=this.hex,3!==this.version)return-1;t=h(a,0,[0,7,0],"30"),s=n(a,t)}else{a=ar(e);var u=h(a,0,[0,3,0,0],"06");if("2a864886f70d01090e"!=i(a,u))return void(this.aExtInfo=new Array);t=h(a,0,[0,3,0,1,0],"30"),s=n(a,t),this.hex=a}this.aExtInfo=new Array;for(var l=0;l<s.length;l++){var c={critical:!1},p=0;3===n(a,s[l]).length&&(c.critical=!0,p=1),c.oid=r.hextooidstr(o(a,s[l],[0],"06"));var d=h(a,s[l],[1+p]);c.vidx=f(a,d),this.aExtInfo.push(c)}},this.getExtInfo=function(e){var t=this.aExtInfo,r=e;if(e.match(/^[0-9.]+$/)||(r=kt.asn1.x509.OID.name2oid(e)),""!==r)for(var n=0;n<t.length;n++)if(t[n].oid===r)return t[n]},this.getExtBasicConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("basicConstraints");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var n={extname:"basicConstraints"};if(t&&(n.critical=!0),"3000"===e)return n;if("30030101ff"===e)return n.cA=!0,n;if("30060101ff02"===e.substr(0,12)){var s=i(e,10),o=parseInt(s,16);return n.cA=!0,n.pathLen=o,n}throw new Error("hExtV parse error: "+e)},this.getExtNameConstraints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("nameConstraints");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var i={extname:"nameConstraints"};t&&(i.critical=!0);for(var s=n(e,0),o=0;o<s.length;o++){for(var u=[],l=n(e,s[o]),c=0;c<l.length;c++){var h=a(e,l[c]),p=this.getGeneralSubtree(h);u.push(p)}var f=e.substr(s[o],2);"a0"==f?i.permit=u:"a1"==f&&(i.exclude=u)}return i},this.getGeneralSubtree=function(e){var t=n(e,0),r=t.length;if(r<1||2<r)throw new Error("wrong num elements");for(var s=this.getGeneralName(a(e,t[0])),o=1;o<r;o++){var u=e.substr(t[o],2),l=i(e,t[o]),c=parseInt(l,16);"80"==u&&(s.min=c),"81"==u&&(s.max=c)}return s},this.getExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("keyUsage");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var n={extname:"keyUsage"};return t&&(n.critical=!0),n.names=this.getExtKeyUsageString(e).split(","),n},this.getExtKeyUsageBin=function(e){if(void 0===e){var t=this.getExtInfo("keyUsage");if(void 0===t)return"";e=a(this.hex,t.vidx)}if(8!=e.length&&10!=e.length)throw new Error("malformed key usage value: "+e);var r="000000000000000"+parseInt(e.substr(6),16).toString(2);return 8==e.length&&(r=r.slice(-8)),10==e.length&&(r=r.slice(-16)),""==(r=r.replace(/0+$/,""))&&(r="0"),r},this.getExtKeyUsageString=function(e){for(var t=this.getExtKeyUsageBin(e),r=new Array,n=0;n<t.length;n++)"1"==t.substr(n,1)&&r.push(Pr.KEYUSAGE_NAME[n]);return r.join(",")},this.getExtSubjectKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectKeyIdentifier");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var n={extname:"subjectKeyIdentifier"};t&&(n.critical=!0);var s=i(e,0);return n.kid={hex:s},n},this.getExtAuthorityKeyIdentifier=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityKeyIdentifier");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var s={extname:"authorityKeyIdentifier"};t&&(s.critical=!0);for(var o=n(e,0),u=0;u<o.length;u++){var l=e.substr(o[u],2);if("80"===l&&(s.kid={hex:i(e,o[u])}),"a1"===l){var c=a(e,o[u]),h=this.getGeneralNames(c);s.issuer=h[0].dn}"82"===l&&(s.sn={hex:i(e,o[u])})}return s},this.getExtExtKeyUsage=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("extKeyUsage");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var s={extname:"extKeyUsage",array:[]};t&&(s.critical=!0);for(var o=n(e,0),u=0;u<o.length;u++)s.array.push(g(i(e,o[u])));return s},this.getExtExtKeyUsageName=function(){var e=this.getExtInfo("extKeyUsage");if(void 0===e)return e;var t=new Array,r=a(this.hex,e.vidx);if(""===r)return t;for(var s=n(r,0),o=0;o<s.length;o++)t.push(g(i(r,s[o])));return t},this.getExtSubjectAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("subjectAltName");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var n={extname:"subjectAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getExtIssuerAltName=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("issuerAltName");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var n={extname:"issuerAltName",array:[]};return t&&(n.critical=!0),n.array=this.getGeneralNames(e),n},this.getGeneralNames=function(e){for(var t=n(e,0),r=[],i=0;i<t.length;i++){var s=this.getGeneralName(a(e,t[i]));void 0!==s&&r.push(s)}return r},this.getGeneralName=function(e){var t=e.substr(0,2),r=i(e,0),n=er(r);return"81"==t?{rfc822:n}:"82"==t?{dns:n}:"86"==t?{uri:n}:"87"==t?{ip:fr(r)}:"a4"==t?{dn:this.getX500Name(r)}:"a0"==t?{other:this.getOtherName(e)}:void 0},this.getExtSubjectAltName2=function(){var e,t,r,s=this.getExtInfo("subjectAltName");if(void 0===s)return s;for(var o=new Array,u=a(this.hex,s.vidx),l=n(u,0),c=0;c<l.length;c++)r=u.substr(l[c],2),e=i(u,l[c]),"81"===r&&(t=Zt(e),o.push(["MAIL",t])),"82"===r&&(t=Zt(e),o.push(["DNS",t])),"84"===r&&(t=Pr.hex2dn(e,0),o.push(["DN",t])),"86"===r&&(t=Zt(e),o.push(["URI",t])),"87"===r&&(t=fr(e),o.push(["IP",t]));return o},this.getExtCRLDistributionPoints=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("cRLDistributionPoints");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var i={extname:"cRLDistributionPoints",array:[]};t&&(i.critical=!0);for(var s=n(e,0),o=0;o<s.length;o++){var u=a(e,s[o]);i.array.push(this.getDistributionPoint(u))}return i},this.getDistributionPoint=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var s=e.substr(r[i],2),o=a(e,r[i]);"a0"==s&&(t.dpname=this.getDistributionPointName(o))}return t},this.getDistributionPointName=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var s=e.substr(r[i],2),o=a(e,r[i]);"a0"==s&&(t.full=this.getGeneralNames(o))}return t},this.getExtCRLDistributionPointsURI=function(){var e=this.getExtCRLDistributionPoints();if(null==e)return e;for(var t=e.array,r=[],n=0;n<t.length;n++)try{null!=t[n].dpname.full[0].uri&&r.push(t[n].dpname.full[0].uri)}catch(e){}return r},this.getExtAIAInfo=function(){var e=this.getExtInfo("authorityInfoAccess");if(void 0===e)return e;for(var t={ocsp:[],caissuer:[]},r=n(this.hex,e.vidx),i=0;i<r.length;i++){var s=o(this.hex,r[i],[0],"06"),a=o(this.hex,r[i],[1],"86");"2b06010505073001"===s&&t.ocsp.push(Zt(a)),"2b06010505073002"===s&&t.caissuer.push(Zt(a))}return t},this.getExtAuthorityInfoAccess=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("authorityInfoAccess");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var i={extname:"authorityInfoAccess",array:[]};t&&(i.critical=!0);for(var s=n(e,0),l=0;l<s.length;l++){var c=u(e,s[l],[0],"06"),h=Zt(o(e,s[l],[1],"86"));if("2b06010505073001"==c)i.array.push({ocsp:h});else{if("2b06010505073002"!=c)throw new Error("unknown method: "+c);i.array.push({caissuer:h})}}return i},this.getExtCertificatePolicies=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("certificatePolicies");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var i={extname:"certificatePolicies",array:[]};t&&(i.critical=!0);for(var s=n(e,0),o=0;o<s.length;o++){var u=a(e,s[o]),l=this.getPolicyInformation(u);i.array.push(l)}return i},this.getPolicyInformation=function(e){var t={},r=o(e,0,[0],"06");t.policyoid=g(r);var i=p(e,0,[1],"30");if(-1!=i){t.array=[];for(var s=n(e,i),u=0;u<s.length;u++){var l=a(e,s[u]),c=this.getPolicyQualifierInfo(l);t.array.push(c)}}return t},this.getOtherName=function(e){var t={},r=n(e,0),i=o(e,r[0],[],"06"),a=o(e,r[1],[]);return t.oid=kt.asn1.ASN1Util.oidHexToInt(i),t.obj=s(a),t},this.getPolicyQualifierInfo=function(e){var t={},r=o(e,0,[0],"06");if("2b06010505070201"===r){var n=u(e,0,[1],"16");t.cps=er(n)}else if("2b06010505070202"===r){var i=l(e,0,[1],"30");t.unotice=this.getUserNotice(i)}return t},this.getUserNotice=function(e){for(var t={},r=n(e,0),i=0;i<r.length;i++){var s=a(e,r[i]);"30"!=s.substr(0,2)&&(t.exptext=this.getDisplayText(s))}return t},this.getDisplayText=function(e){var t={};return t.type={"0c":"utf8",16:"ia5","1a":"vis","1e":"bmp"}[e.substr(0,2)],t.str=er(i(e,0)),t},this.getExtCRLNumber=function(e,t){var r={extname:"cRLNumber"};if(t&&(r.critical=!0),"02"==e.substr(0,2))return r.num={hex:i(e,0)},r;throw new Error("hExtV parse error: "+e)},this.getExtCRLReason=function(e,t){var r={extname:"cRLReason"};if(t&&(r.critical=!0),"0a"==e.substr(0,2))return r.code=parseInt(i(e,0),16),r;throw new Error("hExtV parse error: "+e)},this.getExtOcspNonce=function(e,t){var r={extname:"ocspNonce"};t&&(r.critical=!0);var n=i(e,0);return r.hex=n,r},this.getExtOcspNoCheck=function(e,t){var r={extname:"ocspNoCheck"};return t&&(r.critical=!0),r},this.getExtAdobeTimeStamp=function(e,t){if(void 0===e&&void 0===t){var r=this.getExtInfo("adobeTimeStamp");if(void 0===r)return;e=a(this.hex,r.vidx),t=r.critical}var i={extname:"adobeTimeStamp"};t&&(i.critical=!0);var s=n(e,0);if(s.length>1){var o=a(e,s[1]),u=this.getGeneralName(o);null!=u.uri&&(i.uri=u.uri)}if(s.length>2){var l=a(e,s[2]);"0101ff"==l&&(i.reqauth=!0),"010100"==l&&(i.reqauth=!1)}return i};var E=function(e){var t={};try{var r=e.seq[0].oid,n=kt.asn1.x509.OID.name2oid(r);t.type=kt.asn1.x509.OID.oid2atype(n);var i=e.seq[1];if(null!=i.utf8str)t.ds="utf8",t.value=i.utf8str.str;else if(null!=i.numstr)t.ds="num",t.value=i.numstr.str;else if(null!=i.telstr)t.ds="tel",t.value=i.telstr.str;else if(null!=i.prnstr)t.ds="prn",t.value=i.prnstr.str;else if(null!=i.ia5str)t.ds="ia5",t.value=i.ia5str.str;else if(null!=i.visstr)t.ds="vis",t.value=i.visstr.str;else{if(null==i.bmpstr)throw"error";t.ds="bmp",t.value=i.bmpstr.str}return t}catch(e){throw new Erorr("improper ASN.1 parsed AttrTypeAndValue")}},v=function(e){try{return e.set.map((function(e){return E(e)}))}catch(e){throw new Error("improper ASN.1 parsed RDN: "+e)}};this.getX500NameRule=function(e){for(var t=null,r=[],n=0;n<e.length;n++)for(var i=e[n],s=0;s<i.length;s++)r.push(i[s]);for(n=0;n<r.length;n++){var a=r[n],o=a.ds,u=a.value,l=a.type;if(":"+o,"prn"!=o&&"utf8"!=o&&"ia5"!=o)return"mixed";if("ia5"==o){if("CN"!=l)return"mixed";if(kt.lang.String.isMail(u))continue;return"mixed"}if("C"==l){if("prn"==o)continue;return"mixed"}if(":"+o,null==t)t=o;else if(t!==o)return"mixed"}return null==t?"prn":t},this.getAttrTypeAndValue=function(e){var t=s(e);return E(t)},this.getRDN=function(e){var t=s(e);return v(t)},this.getX500NameArray=function(e){return function(e){try{return e.seq.map((function(e){return v(e)}))}catch(e){throw new Error("improper ASN.1 parsed X500Name: "+e)}}(s(e))},this.getX500Name=function(e){var t=this.getX500NameArray(e);return{array:t,str:this.dnarraytostr(t)}},this.readCertPEM=function(e){this.readCertHex(y(e))},this.readCertHex=function(e){this.hex=e,this.getVersion();try{h(this.hex,0,[0,7],"a3"),this.parseExt()}catch(e){}},this.getParam=function(e){var t={};return t.version=this.getVersion(),t.serial={hex:this.getSerialNumberHex()},t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.notbefore=this.getNotBefore(),t.notafter=this.getNotAfter(),t.subject=this.getSubject(),t.sbjpubkey=sr(this.getPublicKeyHex(),"PUBLIC KEY"),null!=this.aExtInfo&&this.aExtInfo.length>0&&(t.ext=this.getExtParamArray()),t.sighex=this.getSignatureValueHex(),"object"==typeof e&&(1==e.tbshex&&(t.tbshex=l(this.hex,0,[0])),1==e.nodnarray&&(delete t.issuer.array,delete t.subject.array)),t},this.getExtParamArray=function(e){null==e&&(-1!=p(this.hex,0,[0,"[3]"])&&(e=c(this.hex,0,[0,"[3]",0],"30")));for(var t=[],r=n(e,0),i=0;i<r.length;i++){var s=a(e,r[i]),o=this.getExtParam(s);null!=o&&t.push(o)}return t},this.getExtParam=function(e){var t=n(e,0).length;if(2!=t&&3!=t)throw new Error("wrong number elements in Extension: "+t+" "+e);var r=m(o(e,0,[0],"06")),i=!1;3==t&&"0101ff"==l(e,0,[1])&&(i=!0);var s=l(e,0,[t-1,0]),a=void 0;if("2.5.29.14"==r?a=this.getExtSubjectKeyIdentifier(s,i):"2.5.29.15"==r?a=this.getExtKeyUsage(s,i):"2.5.29.17"==r?a=this.getExtSubjectAltName(s,i):"2.5.29.18"==r?a=this.getExtIssuerAltName(s,i):"2.5.29.19"==r?a=this.getExtBasicConstraints(s,i):"2.5.29.30"==r?a=this.getExtNameConstraints(s,i):"2.5.29.31"==r?a=this.getExtCRLDistributionPoints(s,i):"2.5.29.32"==r?a=this.getExtCertificatePolicies(s,i):"2.5.29.35"==r?a=this.getExtAuthorityKeyIdentifier(s,i):"2.5.29.37"==r?a=this.getExtExtKeyUsage(s,i):"1.3.6.1.5.5.7.1.1"==r?a=this.getExtAuthorityInfoAccess(s,i):"2.5.29.20"==r?a=this.getExtCRLNumber(s,i):"2.5.29.21"==r?a=this.getExtCRLReason(s,i):"1.3.6.1.5.5.7.48.1.2"==r?a=this.getExtOcspNonce(s,i):"1.3.6.1.5.5.7.48.1.5"==r?a=this.getExtOcspNoCheck(s,i):"1.2.840.113583.1.1.9.1"==r&&(a=this.getExtAdobeTimeStamp(s,i)),null!=a)return a;var u={extname:r,extn:s};return i&&(u.critical=!0),u},this.findExt=function(e,t){for(var r=0;r<e.length;r++)if(e[r].extname==t)return e[r];return null},this.updateExtCDPFullURI=function(e,t){var r=this.findExt(e,"cRLDistributionPoints");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)if(null!=n[i].dpname&&null!=n[i].dpname.full)for(var s=n[i].dpname.full,a=0;a<s.length;a++){var o=s[i];null!=o.uri&&(o.uri=t)}},this.updateExtAIAOCSP=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].ocsp&&(n[i].ocsp=t)},this.updateExtAIACAIssuer=function(e,t){var r=this.findExt(e,"authorityInfoAccess");if(null!=r&&null!=r.array)for(var n=r.array,i=0;i<n.length;i++)null!=n[i].caissuer&&(n[i].caissuer=t)},this.dnarraytostr=function(e){return"/"+e.map((function(e){return function(e){return e.map((function(e){return function(e){return e.type+"="+e.value}(e).replace(/\+/,"\\+")})).join("+")}(e).replace(/\//,"\\/")})).join("/")},this.getInfo=function(){var e,t,r,n,i=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];if(t+="    policy oid: "+i.policyoid+"\n",void 0!==i.array)for(var s=0;s<i.array.length;s++){var a=i.array[s];void 0!==a.cps&&(t+="    cps: "+a.cps+"\n")}}return t},s=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];try{void 0!==i.dpname.full[0].uri&&(t+="    "+i.dpname.full[0].uri+"\n")}catch(e){}try{void 0!==i.dname.full[0].dn.hex&&(t+="    "+Pr.hex2dn(i.dpname.full[0].dn.hex)+"\n")}catch(e){}}return t},a=function(e){for(var t="",r=e.array,n=0;n<r.length;n++){var i=r[n];void 0!==i.caissuer&&(t+="    caissuer: "+i.caissuer+"\n"),void 0!==i.ocsp&&(t+="    ocsp: "+i.ocsp+"\n")}return t};if(e="Basic Fields\n",e+="  serial number: "+this.getSerialNumberHex()+"\n",e+="  signature algorithm: "+this.getSignatureAlgorithmField()+"\n",e+="  issuer: "+this.getIssuerString()+"\n",e+="  notBefore: "+this.getNotBefore()+"\n",e+="  notAfter: "+this.getNotAfter()+"\n",e+="  subject: "+this.getSubjectString()+"\n",e+="  subject public key info: \n",e+="    key algorithm: "+(t=this.getPublicKey()).type+"\n","RSA"===t.type&&(e+="    n="+Ar(t.n.toString(16)).substr(0,16)+"...\n",e+="    e="+Ar(t.e.toString(16))+"\n"),null!=(r=this.aExtInfo)){e+="X509v3 Extensions:\n";for(var o=0;o<r.length;o++){var u=r[o],l=kt.asn1.x509.OID.oid2name(u.oid);""===l&&(l=u.oid);var c="";if(!0===u.critical&&(c="CRITICAL"),e+="  "+l+" "+c+":\n","basicConstraints"===l){var h=this.getExtBasicConstraints();void 0===h.cA?e+="    {}\n":(e+="    cA=true",void 0!==h.pathLen&&(e+=", pathLen="+h.pathLen),e+="\n")}else if("keyUsage"===l)e+="    "+this.getExtKeyUsageString()+"\n";else if("subjectKeyIdentifier"===l)e+="    "+this.getExtSubjectKeyIdentifier().kid.hex+"\n";else if("authorityKeyIdentifier"===l){var p=this.getExtAuthorityKeyIdentifier();void 0!==p.kid&&(e+="    kid="+p.kid.hex+"\n")}else if("extKeyUsage"===l){e+="    "+this.getExtExtKeyUsage().array.join(", ")+"\n"}else{if("subjectAltName"===l)e+="    "+(n=this.getExtSubjectAltName(),JSON.stringify(n.array).replace(/[\[\]\{\}\"]/g,""))+"\n";else if("cRLDistributionPoints"===l){e+=s(this.getExtCRLDistributionPoints())}else{if("authorityInfoAccess"===l)e+=a(this.getExtAuthorityInfoAccess());else"certificatePolicies"===l&&(e+=i(this.getExtCertificatePolicies()))}}}}return e+="signature algorithm: "+this.getSignatureAlgorithmName()+"\n",e+="signature: "+this.getSignatureValueHex().substr(0,16)+"...\n"},"string"==typeof e&&(-1!=e.indexOf("-----BEGIN")?this.readCertPEM(e):kt.lang.String.isHex(e)&&this.readCertHex(e))}Dt.prototype.sign=function(e,t){var r=function(e){return kt.crypto.Util.hashString(e,t)}(e);return this.signWithMessageHash(r,t)},Dt.prototype.signWithMessageHash=function(e,t){var r=Ft(kt.crypto.Util.getPaddedDigestInfoHex(e,t,this.n.bitLength()),16);return Fr(this.doPrivate(r).toString(16),this.n.bitLength())},Dt.prototype.signPSS=function(e,t,r){var n,i=(n=tr(e),kt.crypto.Util.hashHex(n,t));return void 0===r&&(r=-1),this.signWithMessageHashPSS(i,t,r)},Dt.prototype.signWithMessageHashPSS=function(e,t,r){var n,i=er(e),s=i.length,a=this.n.bitLength()-1,o=Math.ceil(a/8),u=function(e){return kt.crypto.Util.hashHex(e,t)};if(-1===r||void 0===r)r=s;else if(-2===r)r=o-s-2;else if(r<-2)throw new Error("invalid salt length");if(o<s+r+2)throw new Error("data too long");var l="";r>0&&(l=new Array(r),(new Rt).nextBytes(l),l=String.fromCharCode.apply(String,l));var c=er(u(tr("\0\0\0\0\0\0\0\0"+i+l))),h=[];for(n=0;n<o-r-s-2;n+=1)h[n]=0;var p=String.fromCharCode.apply(String,h)+""+l,f=Or(c,p.length,u),d=[];for(n=0;n<p.length;n+=1)d[n]=p.charCodeAt(n)^f.charCodeAt(n);var g=65280>>8*o-a&255;for(d[0]&=~g,n=0;n<s;n++)d.push(c.charCodeAt(n));return d.push(188),Fr(this.doPrivate(new Qe(d)).toString(16),this.n.bitLength())},Dt.prototype.verify=function(e,t){if(null==(t=t.toLowerCase()).match(/^[0-9a-f]+$/))return!1;var r=Ft(t,16),n=this.n.bitLength();if(r.bitLength()>n)return!1;var i=this.doPublic(r).toString(16);if(i.length+3!=n/4)return!1;var s=Dr(i.replace(/^1f+00/,""));if(0==s.length)return!1;var a=s[0],o=s[1],u=function(e){return kt.crypto.Util.hashString(e,a)}(e);return o==u},Dt.prototype.verifyWithMessageHash=function(e,t){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var r=Ft(t,16);if(r.bitLength()>this.n.bitLength())return 0;var n=Dr(this.doPublic(r).toString(16).replace(/^1f+00/,""));if(0==n.length)return!1;n[0];return n[1]==e},Dt.prototype.verifyPSS=function(e,t,r,n){var i,s=(i=tr(e),kt.crypto.Util.hashHex(i,r));return void 0===n&&(n=-1),this.verifyWithMessageHashPSS(s,t,r,n)},Dt.prototype.verifyWithMessageHashPSS=function(e,t,r,n){if(t.length!=Math.ceil(this.n.bitLength()/4))return!1;var i,s=new Qe(t,16),a=function(e){return kt.crypto.Util.hashHex(e,r)},o=er(e),u=o.length,l=this.n.bitLength()-1,c=Math.ceil(l/8);if(-1===n||void 0===n)n=u;else if(-2===n)n=c-u-2;else if(n<-2)throw new Error("invalid salt length");if(c<u+n+2)throw new Error("data too long");var h=this.doPublic(s).toByteArray();for(i=0;i<h.length;i+=1)h[i]&=255;for(;h.length<c;)h.unshift(0);if(188!==h[c-1])throw new Error("encoded message does not end in 0xbc");var p=(h=String.fromCharCode.apply(String,h)).substr(0,c-u-1),f=h.substr(p.length,u),d=65280>>8*c-l&255;if(0!=(p.charCodeAt(0)&d))throw new Error("bits beyond keysize not zero");var g=Or(f,p.length,a),m=[];for(i=0;i<p.length;i+=1)m[i]=p.charCodeAt(i)^g.charCodeAt(i);m[0]&=~d;var y=c-u-n-2;for(i=0;i<y;i+=1)if(0!==m[i])throw new Error("leftmost octets not zero");if(1!==m[y])throw new Error("0x01 marker not found");return f===er(a(tr("\0\0\0\0\0\0\0\0"+o+String.fromCharCode.apply(String,m.slice(-n)))))},Dt.SALT_LEN_HLEN=-1,Dt.SALT_LEN_MAX=-2,Dt.SALT_LEN_RECOVER=-2,Pr.hex2dn=function(e,t){void 0===t&&(t=0);var r=new Pr;jt.getTLV(e,t);return r.getX500Name(e).str},Pr.hex2rdn=function(e,t){if(void 0===t&&(t=0),"31"!==e.substr(t,2))throw new Error("malformed RDN");for(var r=new Array,n=jt.getChildIdx(e,t),i=0;i<n.length;i++)r.push(Pr.hex2attrTypeValue(e,n[i]));return r=r.map((function(e){return e.replace("+","\\+")})),r.join("+")},Pr.hex2attrTypeValue=function(e,t){var r=jt,n=r.getV;if(void 0===t&&(t=0),"30"!==e.substr(t,2))throw new Error("malformed attribute type and value");var i=r.getChildIdx(e,t);2!==i.length||e.substr(i[0],2);var s=n(e,i[0]),a=kt.asn1.ASN1Util.oidHexToInt(s);return kt.asn1.x509.OID.oid2atype(a)+"="+er(n(e,i[1]))},Pr.getPublicKeyFromCertHex=function(e){var t=new Pr;return t.readCertHex(e),t.getPublicKey()},Pr.getPublicKeyFromCertPEM=function(e){var t=new Pr;return t.readCertPEM(e),t.getPublicKey()},Pr.getPublicKeyInfoPropOfCertPEM=function(e){var t,r,n=jt.getVbyList,i={};return i.algparam=null,(t=new Pr).readCertPEM(e),r=t.getPublicKeyHex(),i.keyhex=n(r,0,[1],"03").substr(2),i.algoid=n(r,0,[0,0],"06"),"2a8648ce3d0201"===i.algoid&&(i.algparam=n(r,0,[0,1],"06")),i},Pr.KEYUSAGE_NAME=["digitalSignature","nonRepudiation","keyEncipherment","dataEncipherment","keyAgreement","keyCertSign","cRLSign","encipherOnly","decipherOnly"];void 0!==kt&&kt||(kt={}),void 0!==kt.jws&&kt.jws||(kt.jws={}),kt.jws.JWS=function(){var e=kt.jws.JWS.isSafeJSONString;this.parseJWS=function(t,r){if(void 0===this.parsedJWS||!r&&void 0===this.parsedJWS.sigvalH){var n=t.match(/^([^.]+)\.([^.]+)\.([^.]+)$/);if(null==n)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";var i=n[1],s=n[2],a=n[3],o=i+"."+s;if(this.parsedJWS={},this.parsedJWS.headB64U=i,this.parsedJWS.payloadB64U=s,this.parsedJWS.sigvalB64U=a,this.parsedJWS.si=o,!r){var u=Qt(a),l=Ft(u,16);this.parsedJWS.sigvalH=u,this.parsedJWS.sigvalBI=l}var c=Vt(i),h=Vt(s);if(this.parsedJWS.headS=c,this.parsedJWS.payloadS=h,!e(c,this.parsedJWS,"headP"))throw"malformed JSON string for JWS Head: "+c}}},kt.jws.JWS.sign=function(e,t,r,n,i){var s,a,o,u=kt,l=u.jws.JWS,c=l.readSafeJSONString,h=l.isSafeJSONString,p=u.crypto,f=(p.ECDSA,p.Mac),d=p.Signature,g=JSON;if("string"!=typeof t&&"object"!=typeof t)throw"spHeader must be JSON string or object: "+t;if("object"==typeof t&&(a=t,s=g.stringify(a)),"string"==typeof t){if(!h(s=t))throw"JWS Head is not safe JSON string: "+s;a=c(s)}if(o=r,"object"==typeof r&&(o=g.stringify(r)),""!=e&&null!=e||void 0===a.alg||(e=a.alg),""!=e&&null!=e&&void 0===a.alg&&(a.alg=e,s=g.stringify(a)),e!==a.alg)throw"alg and sHeader.alg doesn't match: "+e+"!="+a.alg;var m=null;if(void 0===l.jwsalg2sigalg[e])throw"unsupported alg name: "+e;m=l.jwsalg2sigalg[e];var y=Ht(s)+"."+Ht(o),E="";if("Hmac"==m.substr(0,4)){if(void 0===n)throw"mac key shall be specified for HS* alg";var v=new f({alg:m,prov:"cryptojs",pass:n});v.updateString(y),E=v.doFinal()}else if(-1!=m.indexOf("withECDSA")){(A=new d({alg:m})).init(n,i),A.updateString(y);var T=A.sign();E=kt.crypto.ECDSA.asn1SigToConcatSig(T)}else if("none"!=m){var A;(A=new d({alg:m})).init(n,i),A.updateString(y),E=A.sign()}return y+"."+Xt(E)},kt.jws.JWS.verify=function(e,t,r){var n,i=kt,s=i.jws.JWS,a=s.readSafeJSONString,o=i.crypto,u=o.ECDSA,l=o.Mac,c=o.Signature;if(n=Dt,!Tr(e))return!1;var h=e.split(".");if(3!==h.length)return!1;var p=h[0]+"."+h[1],f=Qt(h[2]),d=a(Vt(h[0])),g=null,m=null;if(void 0===d.alg)throw"algorithm not specified in header";if((m=(g=d.alg).substr(0,2),null!=r&&"[object Array]"===Object.prototype.toString.call(r)&&r.length>0)&&-1==(":"+r.join(":")+":").indexOf(":"+g+":"))throw"algorithm '"+g+"' not accepted in the list";if("none"!=g&&null===t)throw"key shall be specified to verify.";if("string"==typeof t&&-1!=t.indexOf("-----BEGIN ")&&(t=Rr.getKey(t)),!("RS"!=m&&"PS"!=m||t instanceof n))throw"key shall be a RSAKey obj for RS* and PS* algs";if("ES"==m&&!(t instanceof u))throw"key shall be a ECDSA obj for ES* algs";var y=null;if(void 0===s.jwsalg2sigalg[d.alg])throw"unsupported alg name: "+g;if("none"==(y=s.jwsalg2sigalg[g]))throw"not supported";if("Hmac"==y.substr(0,4)){if(void 0===t)throw"hexadecimal key shall be specified for HMAC";var E=new l({alg:y,pass:t});return E.updateString(p),f==E.doFinal()}if(-1!=y.indexOf("withECDSA")){var v,T=null;try{T=u.concatSigToASN1Sig(f)}catch(e){return!1}return(v=new c({alg:y})).init(t),v.updateString(p),v.verify(T)}return(v=new c({alg:y})).init(t),v.updateString(p),v.verify(f)},kt.jws.JWS.parse=function(e){var t,r,n,i=e.split("."),s={};if(2!=i.length&&3!=i.length)throw"malformed sJWS: wrong number of '.' splitted elements";return t=i[0],r=i[1],3==i.length&&(n=i[2]),s.headerObj=kt.jws.JWS.readSafeJSONString(Vt(t)),s.payloadObj=kt.jws.JWS.readSafeJSONString(Vt(r)),s.headerPP=JSON.stringify(s.headerObj,null,"  "),null==s.payloadObj?s.payloadPP=Vt(r):s.payloadPP=JSON.stringify(s.payloadObj,null,"  "),void 0!==n&&(s.sigHex=Qt(n)),s},kt.jws.JWS.verifyJWT=function(e,t,r){var n=kt.jws,i=n.JWS,s=i.readSafeJSONString,a=i.inArray,o=i.includedArray;if(!Tr(e))return!1;var u=e.split(".");if(3!=u.length)return!1;var l=u[0],c=u[1],h=(Qt(u[2]),s(Vt(l))),p=s(Vt(c));if(void 0===h.alg)return!1;if(void 0===r.alg)throw"acceptField.alg shall be specified";if(!a(h.alg,r.alg))return!1;if(void 0!==p.iss&&"object"==typeof r.iss&&!a(p.iss,r.iss))return!1;if(void 0!==p.sub&&"object"==typeof r.sub&&!a(p.sub,r.sub))return!1;if(void 0!==p.aud&&"object"==typeof r.aud)if("string"==typeof p.aud){if(!a(p.aud,r.aud))return!1}else if("object"==typeof p.aud&&!o(p.aud,r.aud))return!1;var f=n.IntDate.getNow();return void 0!==r.verifyAt&&"number"==typeof r.verifyAt&&(f=r.verifyAt),void 0!==r.gracePeriod&&"number"==typeof r.gracePeriod||(r.gracePeriod=0),!(void 0!==p.exp&&"number"==typeof p.exp&&p.exp+r.gracePeriod<f)&&(!(void 0!==p.nbf&&"number"==typeof p.nbf&&f<p.nbf-r.gracePeriod)&&(!(void 0!==p.iat&&"number"==typeof p.iat&&f<p.iat-r.gracePeriod)&&((void 0===p.jti||void 0===r.jti||p.jti===r.jti)&&!!i.verify(e,t,r.alg))))},kt.jws.JWS.includedArray=function(e,t){var r=kt.jws.JWS.inArray;if(null===e)return!1;if("object"!=typeof e)return!1;if("number"!=typeof e.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t))return!1;return!0},kt.jws.JWS.inArray=function(e,t){if(null===t)return!1;if("object"!=typeof t)return!1;if("number"!=typeof t.length)return!1;for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},kt.jws.JWS.jwsalg2sigalg={HS256:"HmacSHA256",HS384:"HmacSHA384",HS512:"HmacSHA512",RS256:"SHA256withRSA",RS384:"SHA384withRSA",RS512:"SHA512withRSA",ES256:"SHA256withECDSA",ES384:"SHA384withECDSA",ES512:"SHA512withECDSA",PS256:"SHA256withRSAandMGF1",PS384:"SHA384withRSAandMGF1",PS512:"SHA512withRSAandMGF1",none:"none"},kt.jws.JWS.isSafeJSONString=function(e,t,r){var n=null;try{return"object"!=typeof(n=Ut(e))||n.constructor===Array?0:(t&&(t[r]=n),1)}catch(e){return 0}},kt.jws.JWS.readSafeJSONString=function(e){var t=null;try{return"object"!=typeof(t=Ut(e))||t.constructor===Array?null:t}catch(e){return null}},kt.jws.JWS.getEncodedSignatureValueFromJWS=function(e){var t=e.match(/^[^.]+\.[^.]+\.([^.]+)$/);if(null==t)throw"JWS signature is not a form of 'Head.Payload.SigValue'.";return t[1]},kt.jws.JWS.getJWKthumbprint=function(e){if("RSA"!==e.kty&&"EC"!==e.kty&&"oct"!==e.kty)throw"unsupported algorithm for JWK Thumprint";var t="{";if("RSA"===e.kty){if("string"!=typeof e.n||"string"!=typeof e.e)throw"wrong n and e value for RSA key";t+='"e":"'+e.e+'",',t+='"kty":"'+e.kty+'",',t+='"n":"'+e.n+'"}'}else if("EC"===e.kty){if("string"!=typeof e.crv||"string"!=typeof e.x||"string"!=typeof e.y)throw"wrong crv, x and y value for EC key";t+='"crv":"'+e.crv+'",',t+='"kty":"'+e.kty+'",',t+='"x":"'+e.x+'",',t+='"y":"'+e.y+'"}'}else if("oct"===e.kty){if("string"!=typeof e.k)throw"wrong k value for oct(symmetric) key";t+='"kty":"'+e.kty+'",',t+='"k":"'+e.k+'"}'}var r=tr(t);return Xt(kt.crypto.Util.hashHex(r,"sha256"))},kt.jws.IntDate={},kt.jws.IntDate.get=function(e){var t=kt.jws.IntDate,r=t.getNow,n=t.getZulu;if("now"==e)return r();if("now + 1hour"==e)return r()+3600;if("now + 1day"==e)return r()+86400;if("now + 1month"==e)return r()+2592e3;if("now + 1year"==e)return r()+31536e3;if(e.match(/Z$/))return n(e);if(e.match(/^[0-9]+$/))return parseInt(e);throw"unsupported format: "+e},kt.jws.IntDate.getZulu=function(e){return ur(e)},kt.jws.IntDate.getNow=function(){return~~(new Date/1e3)},kt.jws.IntDate.intDate2UTCString=function(e){return new Date(1e3*e).toUTCString()},kt.jws.IntDate.intDate2Zulu=function(e){var t=new Date(1e3*e);return("0000"+t.getUTCFullYear()).slice(-4)+("00"+(t.getUTCMonth()+1)).slice(-2)+("00"+t.getUTCDate()).slice(-2)+("00"+t.getUTCHours()).slice(-2)+("00"+t.getUTCMinutes()).slice(-2)+("00"+t.getUTCSeconds()).slice(-2)+"Z"},void 0!==kt&&kt||(kt={}),void 0!==kt.jws&&kt.jws||(kt.jws={}),kt.jws.JWSJS=function(){var e=kt.jws.JWS,t=e.readSafeJSONString;this.aHeader=[],this.sPayload="",this.aSignature=[],this.init=function(){this.aHeader=[],this.sPayload=void 0,this.aSignature=[]},this.initWithJWS=function(e){this.init();var t=e.split(".");if(3!=t.length)throw"malformed input JWS";this.aHeader.push(t[0]),this.sPayload=t[1],this.aSignature.push(t[2])},this.addSignature=function(e,t,r,n){if(void 0===this.sPayload||null===this.sPayload)throw"there's no JSON-JS signature to add.";var i=this.aHeader.length;if(this.aHeader.length!=this.aSignature.length)throw"aHeader.length != aSignature.length";try{var s=kt.jws.JWS.sign(e,t,this.sPayload,r,n).split(".");s[0],s[2];this.aHeader.push(s[0]),this.aSignature.push(s[2])}catch(e){throw this.aHeader.length>i&&this.aHeader.pop(),this.aSignature.length>i&&this.aSignature.pop(),"addSignature failed: "+e}},this.verifyAll=function(e){if(this.aHeader.length!==e.length||this.aSignature.length!==e.length)return!1;for(var t=0;t<e.length;t++){var r=e[t];if(2!==r.length)return!1;if(!1===this.verifyNth(t,r[0],r[1]))return!1}return!0},this.verifyNth=function(t,r,n){if(this.aHeader.length<=t||this.aSignature.length<=t)return!1;var i=this.aHeader[t],s=this.aSignature[t],a=i+"."+this.sPayload+"."+s,o=!1;try{o=e.verify(a,r,n)}catch(e){return!1}return o},this.readJWSJS=function(e){if("string"==typeof e){var r=t(e);if(null==r)throw"argument is not safe JSON object string";this.aHeader=r.headers,this.sPayload=r.payload,this.aSignature=r.signatures}else try{if(!(e.headers.length>0))throw"malformed header";if(this.aHeader=e.headers,"string"!=typeof e.payload)throw"malformed signatures";if(this.sPayload=e.payload,!(e.signatures.length>0))throw"malformed signatures";this.aSignature=e.signatures}catch(e){throw"malformed JWS-JS JSON object: "+e}},this.getJSON=function(){return{headers:this.aHeader,payload:this.sPayload,signatures:this.aSignature}},this.isEmpty=function(){return 0==this.aHeader.length?1:0}},n=Rt,s=bt,a=Qe,o=Dt,u=kt.crypto.ECDSA,l=kt.crypto.DSA,c=kt.crypto.Signature,h=kt.crypto.MessageDigest,p=kt.crypto.Mac,f=kt.crypto.Cipher,d=Rr,g=jt,m=Pr,y=function(e){var t=kt.lang.String.isHex,r=jt,n=r.getV,i=r.getTLV,s=r.getVbyList,a=r.getTLVbyList,o=r.getTLVbyListEx,u=r.getIdxbyList,l=r.getIdxbyListEx,c=r.getChildIdx,h=new Pr;this.hex=null,this.posSigAlg=null,this.posRevCert=null,this.parsed=null,this._setPos=function(){var e=u(this.hex,0,[0,0]),t=this.hex.substr(e,2);if("02"==t)this.posSigAlg=1;else{if("30"!=t)throw new Error("malformed 1st item of TBSCertList: "+t);this.posSigAlg=0}var r,n=u(this.hex,0,[0,this.posSigAlg+3]),i=this.hex.substr(n,2);if("17"==i||"18"==i)r=u(this.hex,0,[0,this.posSigAlg+4]),this.posRevCert=null,-1!=r&&"30"==this.hex.substr(r,2)&&(this.posRevCert=this.posSigAlg+4);else if("30"==i)this.posRevCert=this.posSigAlg+3;else{if("a0"!=i)throw new Error("malformed nextUpdate or revCert tag: "+i);this.posRevCert=null}},this.getVersion=function(){return 0==this.posSigAlg?null:parseInt(s(this.hex,0,[0,0],"02"),16)+1},this.getSignatureAlgorithmField=function(){var e=a(this.hex,0,[0,this.posSigAlg],"30");return h.getAlgorithmIdentifierName(e)},this.getIssuer=function(){return h.getX500Name(this.getIssuerHex())},this.getIssuerHex=function(){return a(this.hex,0,[0,this.posSigAlg+1],"30")},this.getThisUpdate=function(){var e=s(this.hex,0,[0,this.posSigAlg+2]);return result=er(e)},this.getNextUpdate=function(){var e=u(this.hex,0,[0,this.posSigAlg+3]),t=this.hex.substr(e,2);return"17"!=t&&"18"!=t?null:er(n(this.hex,e))},this.getRevCertArray=function(){if(null==this.posRevCert)return null;for(var e=[],t=u(this.hex,0,[0,this.posRevCert]),r=c(this.hex,t),n=0;n<r.length;n++){var s=i(this.hex,r[n]);e.push(this.getRevCert(s))}return e},this.getRevCert=function(e){var t={},r=c(e,0);return t.sn={hex:s(e,0,[0],"02")},t.date=er(s(e,0,[1])),3==r.length&&(t.ext=h.getExtParamArray(a(e,0,[2]))),t},this.findRevCert=function(e){var t=new Pr(e).getSerialNumberHex();return this.findRevCertBySN(t)},this.findRevCertBySN=function(e){if(null==this.parsed&&this.getParam(),null==this.parsed.revcert)return null;for(var t=this.parsed.revcert,r=0;r<t.length;r++)if(e==t[r].sn.hex)return t[r];return null},this.getSignatureValueHex=function(){return s(this.hex,0,[2],"03",!0)},this.verifySignature=function(e){var t=this.getSignatureAlgorithmField(),r=this.getSignatureValueHex(),n=a(this.hex,0,[0],"30"),i=new kt.crypto.Signature({alg:t});return i.init(e),i.updateHex(n),i.verify(r)},this.getParam=function(e){var t={},r=this.getVersion();null!=r&&(t.version=r),t.sigalg=this.getSignatureAlgorithmField(),t.issuer=this.getIssuer(),t.thisupdate=this.getThisUpdate();var n=this.getNextUpdate();null!=n&&(t.nextupdate=n);var i=this.getRevCertArray();if(null!=i&&(t.revcert=i),-1!=l(this.hex,0,[0,"[0]"])){var s=o(this.hex,0,[0,"[0]",0]);t.ext=h.getExtParamArray(s)}return t.sighex=this.getSignatureValueHex(),this.parsed=t,"object"==typeof e&&(1==e.tbshex&&(t.tbshex=a(this.hex,0,[0])),1==e.nodnarray&&delete t.issuer.array),t},"string"==typeof e&&(t(e)?this.hex=e:e.match(/-----BEGIN X509 CRL/)&&(this.hex=ar(e)),this._setPos())},E=Ke,v=Ye,T=Xe,A=Bt,S=Lt,_=Mt,b=Kt,C=Gt,I=Wt,x=qt,w=function(e){return ze(qt(e))},N=function(e){return zt(ze(qt(e)))},R=function(e){return Gt(Xe(Yt(e)))},F=zt,O=Yt,D=ze,P=Xt,B=Qt,L=Ht,M=Vt,U=function(e){return ze(lr(Er(e)))},k=function(e){return decodeURIComponent(cr(Ye(e)))},H=Jt,V=Zt,j=er,K=tr,G=rr,W=nr,q=ir,z=sr,Y=ar,X=function(e){if(e.length%2!=0)throw"input is not even length";if(null==e.match(/^[0-9A-Fa-f]+$/))throw"input is not hexadecimal";for(var t=new ArrayBuffer(e.length/2),r=new DataView(t),n=0;n<e.length/2;n++)r.setUint8(n,parseInt(e.substr(2*n,2),16));return t},Q=function(e){for(var t="",r=new DataView(e),n=0;n<e.byteLength;n++)t+=("00"+r.getUint8(n).toString(16)).slice(-2);return t},J=or,Z=ur,$=function(e){return new Date(or(e))},ee=function(e,t,r){var n,i=e.getUTCFullYear();if(t){if(i<1950||2049<i)throw"not proper year for UTCTime: "+i;n=(""+i).slice(-2)}else n=("000"+i).slice(-4);if(n+=("0"+(e.getUTCMonth()+1)).slice(-2),n+=("0"+e.getUTCDate()).slice(-2),n+=("0"+e.getUTCHours()).slice(-2),n+=("0"+e.getUTCMinutes()).slice(-2),n+=("0"+e.getUTCSeconds()).slice(-2),r){var s=e.getUTCMilliseconds();0!==s&&(n+="."+(s=(s=("00"+s).slice(-3)).replace(/0+$/g,"")))}return n+="Z"},te=lr,re=cr,ne=hr,ie=pr,se=fr,ae=gr,oe=yr,ue=Er,le=function(e){return e=e.replace(/\r\n/gm,"\n")},ce=function(e){return e=(e=e.replace(/\r\n/gm,"\n")).replace(/\n/gm,"\r\n")},he=Ar,pe=function(e){e=(e=(e=e.replace(/^\s*\[\s*/,"")).replace(/\s*\]\s*$/,"")).replace(/\s*/g,"");try{return e.split(/,/).map((function(e,t,r){var n=parseInt(e);if(n<0||255<n)throw"integer not in range 0-255";return("00"+n.toString(16)).slice(-2)})).join("")}catch(e){throw"malformed integer array string: "+e}},fe=function(e,t){var r=e.length;e.length>t.length&&(r=t.length);for(var n=0;n<r;n++)if(e.charCodeAt(n)!=t.charCodeAt(n))return n;return e.length!=t.length?r:-1},de=Sr,ge=_r,me=br,ye=Cr,Ee=Ir,ve=xr,Te=function(e){if("string"!=typeof e)return null;if(null==e.match(/^[01]+$/))return null;try{return Ir(parseInt(e,2))}catch(e){return null}},Ae=Tr,Se=wr,_e=Nr,be=kt,Ce=kt.crypto,Ie=kt.asn1,xe=kt.jws,we=kt.lang})),i.register("ipyC2",(function(t,r){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var n,s;e(t.exports,"Buffer",(()=>n),(e=>n=e)),e(t.exports,"INSPECT_MAX_BYTES",(()=>s),(e=>s=e));var a=i("6nb6j"),o=i("cdSdK"),u="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;n=h,s=50;var l=2147483647;function c(e){if(e>l)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,h.prototype),t}function h(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return p(e,t,r)}function p(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!h.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|E(e,t),n=c(r),i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return g(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return m(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return m(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return h.from(n,t,r);var i=function(e){if(h.isBuffer(e)){var t=0|y(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||q(e.length)?c(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return h.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return f(e),c(e<0?0:0|y(e))}function g(e){for(var t=e.length<0?0:0|y(e.length),r=c(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function m(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,h.prototype),n}function y(e){if(e>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return 0|e}function E(e,t){if(h.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return j(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return K(e).length;default:if(i)return n?-1:j(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,r);case"utf8":case"utf-8":return R(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return D(this,t,r);case"base64":return N(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function T(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function A(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),q(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=h.from(t,n)),h.isBuffer(t))return 0===t.length?-1:S(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):S(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,r,n,i){var s,a=1,o=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,o/=2,u/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(s=r;s<o;s++)if(l(e,s)===l(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===u)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(r+u>o&&(r=o-u),s=r;s>=0;s--){for(var h=!0,p=0;p<u;p++)if(l(e,s+p)!==l(t,p)){h=!1;break}if(h)return s}return-1}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var s=t.length;n>s/2&&(n=s/2);for(var a=0;a<n;++a){var o=parseInt(t.substr(2*a,2),16);if(q(o))return a;e[r+a]=o}return a}function b(e,t,r,n){return G(j(t,e.length-r),e,r,n)}function C(e,t,r,n){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function I(e,t,r,n){return C(e,t,r,n)}function x(e,t,r,n){return G(K(t),e,r,n)}function w(e,t,r,n){return G(function(e,t){for(var r,n,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function N(e,t,r){return 0===t&&r===e.length?a.fromByteArray(e):a.fromByteArray(e.slice(t,r))}function R(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,u,l=e[i],c=null,h=l>239?4:l>223?3:l>191?2:1;if(i+h<=r)switch(h){case 1:l<128&&(c=l);break;case 2:128==(192&(s=e[i+1]))&&(u=(31&l)<<6|63&s)>127&&(c=u);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(u=(15&l)<<12|(63&s)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(u=(15&l)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=F)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=F));return r}(n)}h.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),h.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),h.poolSize=8192,h.from=function(e,t,r){return p(e,t,r)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array),h.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},h.allocUnsafe=function(e){return d(e)},h.allocUnsafeSlow=function(e){return d(e)},h.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==h.prototype},h.compare=function(e,t){if(W(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=h.from(t,t.offset,t.byteLength)),!h.isBuffer(e)||!h.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},h.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return h.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=h.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var s=e[r];if(W(s,Uint8Array)&&(s=h.from(s)),!h.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},h.byteLength=E,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)T(this,t,t+1);return this},h.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)T(this,t,t+3),T(this,t+1,t+2);return this},h.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)T(this,t,t+7),T(this,t+1,t+6),T(this,t+2,t+5),T(this,t+3,t+4);return this},h.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?R(this,0,e):v.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(e){if(!h.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===h.compare(this,e)},h.prototype.inspect=function(){var e="",t=s;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},u&&(h.prototype[u]=h.prototype.inspect),h.prototype.compare=function(e,t,r,n,i){if(W(e,Uint8Array)&&(e=h.from(e,e.offset,e.byteLength)),!h.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(s,a),u=this.slice(n,i),l=e.slice(t,r),c=0;c<o;++c)if(u[c]!==l[c]){s=u[c],a=l[c];break}return s<a?-1:a<s?1:0},h.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},h.prototype.indexOf=function(e,t,r){return A(this,e,t,r,!0)},h.prototype.lastIndexOf=function(e,t,r){return A(this,e,t,r,!1)},h.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return C(this,e,t,r);case"latin1":case"binary":return I(this,e,t,r);case"base64":return x(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var F=4096;function O(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function D(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function P(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",s=t;s<r;++s)i+=z[e[s]];return i}function B(e,t,r){for(var n=e.slice(t,r),i="",s=0;s<n.length;s+=2)i+=String.fromCharCode(n[s]+256*n[s+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,i,s){if(!h.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function k(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,0,r,4),o.write(e,t,r,n,23,4),r+4}function H(e,t,r,n,i){return t=+t,r>>>=0,i||U(e,0,r,8),o.write(e,t,r,n,52,8),r+8}h.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,h.prototype),n},h.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},h.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},h.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},h.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},h.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},h.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},h.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},h.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},h.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var n=t,i=1,s=this[e+--n];n>0&&(i*=256);)s+=this[e+--n]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},h.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},h.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},h.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},h.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),o.read(this,e,!0,23,4)},h.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),o.read(this,e,!1,23,4)},h.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),o.read(this,e,!0,52,8)},h.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),o.read(this,e,!1,52,8)},h.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},h.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||M(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},h.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},h.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},h.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<r&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},h.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var i=Math.pow(2,8*r-1);M(this,e,t,r,i-1,-i)}var s=r-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+r},h.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},h.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},h.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},h.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},h.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},h.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},h.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},h.prototype.writeDoubleLE=function(e,t,r){return H(this,e,t,!0,r)},h.prototype.writeDoubleBE=function(e,t,r){return H(this,e,t,!1,r)},h.prototype.copy=function(e,t,r,n){if(!h.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=i-1;s>=0;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},h.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var i=e.charCodeAt(0);("utf8"===n&&i<128||"latin1"===n)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var s;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var a=h.isBuffer(e)?e:h.from(e,n),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<r-t;++s)this[s+t]=a[s%o]}return this};var V=/[^+/0-9A-Za-z-_]/g;function j(e,t){var r;t=t||1/0;for(var n=e.length,i=null,s=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function K(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}var z=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()})),i.register("6nb6j",(function(t,r){var n,i;e(t.exports,"toByteArray",(()=>n),(e=>n=e)),e(t.exports,"fromByteArray",(()=>i),(e=>i=e)),n=function(e){var t,r,n=c(e),i=n[0],s=n[1],u=new o(function(e,t,r){return 3*(t+r)/4-r}(0,i,s)),l=0,h=s>0?i-4:i;for(r=0;r<h;r+=4)t=a[e.charCodeAt(r)]<<18|a[e.charCodeAt(r+1)]<<12|a[e.charCodeAt(r+2)]<<6|a[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===s&&(t=a[e.charCodeAt(r)]<<2|a[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===s&&(t=a[e.charCodeAt(r)]<<10|a[e.charCodeAt(r+1)]<<4|a[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},i=function(e){for(var t,r=e.length,n=r%3,i=[],a=16383,o=0,u=r-n;o<u;o+=a)i.push(h(e,o,o+a>u?u:o+a));1===n?(t=e[r-1],i.push(s[t>>2]+s[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],i.push(s[t>>10]+s[t>>4&63]+s[t<<2&63]+"="));return i.join("")};for(var s=[],a=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=0;l<64;++l)s[l]=u[l],a[u.charCodeAt(l)]=l;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,r){for(var n,i,a=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s[(i=n)>>18&63]+s[i>>12&63]+s[i>>6&63]+s[63&i]);return a.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63})),i.register("cdSdK",(function(t,r){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var n,i;e(t.exports,"read",(()=>n),(e=>n=e)),e(t.exports,"write",(()=>i),(e=>i=e)),n=function(e,t,r,n,i){var s,a,o=8*i-n-1,u=(1<<o)-1,l=u>>1,c=-7,h=r?i-1:0,p=r?-1:1,f=e[t+h];for(h+=p,s=f&(1<<-c)-1,f>>=-c,c+=o;c>0;s=256*s+e[t+h],h+=p,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;c>0;a=256*a+e[t+h],h+=p,c-=8);if(0===s)s=1-l;else{if(s===u)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,n),s-=l}return(f?-1:1)*a*Math.pow(2,s-n)},i=function(e,t,r,n,i,s){var a,o,u,l=8*s-i-1,c=(1<<l)-1,h=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,d=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+h>=1?p/u:p*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(o=0,a=c):a+h>=1?(o=(t*u-1)*Math.pow(2,i),a+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[r+f]=255&o,f+=d,o/=256,i-=8);for(a=a<<i|o,l+=i;l>0;e[r+f]=255&a,f+=d,a/=256,l-=8);e[r+f-d]|=128*g}})),i.register("jKPaA",(function(e,t){"use strict";var r,n=e.exports&&e.exports.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))},a=e.exports&&e.exports.__generator||function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AutofillManagerCS=void 0;var u=i("g7GFY"),l=i("l8jEC"),c=i("5GAFo"),h=i("g8bpu"),p=i("bKelf"),f=i("cV11G"),d=i("i3xLZ"),g=i("eTtHm"),m=o(i("a4yvB")),y=i("bdbwF"),E=function(e){function t(){var t,r=e.call(this)||this;return r.messageMap=((t={})[d.AUTOFILL_BG_MESSAGES.FILL_EMAIL_MASK]=r._onFillEmailMask.bind(r),t[d.AUTOFILL_BG_MESSAGES.CLOSE_ICON_CLICKED]=r._storeCloseIconClickedValue.bind(r),t),r._checkInitRequired=r._checkInitRequired.bind(r),r.fieldClassifier=u.FieldClassifierFactory.getFieldClassifier(u.FieldClassifierType.WAX),r.fieldClassifier.registerEmailFieldFound(r._onEmailFieldFound.bind(r)),r._checkInitRequired(),r.existingEmailFields=[],r.handleResize=r.handleResize.bind(r),r.onBadgeClick=r.onBadgeClick.bind(r),r.handleInputEvents=r.handleInputEvents.bind(r),r.handleEmailFieldClick=r.handleEmailFieldClick.bind(r),r.getEmailFieldConfig=r.getEmailFieldConfig.bind(r),r.closeIconClicked=!1,r}return n(t,e),t.prototype._onFillEmailMask=function(e){var t=new URL(e.payload.iframeSrc).searchParams.get("id"),r=this.existingEmailFields.find((function(e){return e.guid===t}));if(r){var n=r.field,i=document.activeElement;(0,f.setInputFieldValue)(n,e.payload.emailMask),i&&i.focus(),this._sendFillMaskTelemetry(n,e)}},t.prototype._storeCloseIconClickedValue=function(){this.closeIconClicked=!0},t.prototype._addEventsForEmailField=function(e){var t=this;e.addEventListener(h.CLICK_EVENT,(function(r){r.stopPropagation(),t.handleEmailFieldClick(e)})),e.addEventListener(h.MOUSE_UP_EVENT,(function(e){e.stopPropagation()})),e.addEventListener(h.MOUSE_DOWN_EVENT,(function(e){e.stopPropagation()}))},t.prototype._sendFillMaskTelemetry=function(e,t){var r=t.payload.emailMask,n=r&&r===e.value?d.TelemetryCTAName.aliasFilled:d.TelemetryCTAName.aliasFillFailed,i={eventName:d.TelemetryEventName,ctaName:n,ctaData:d.TelemetryCTAData.click,isAnonymous:!0};g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_ACTION_REQUEST,payload:{type:d.ActionType.SEND_FILL_MASK_TELEMETRY,payload:{telemetryParams:i}}})},t.prototype._sendBadgeClickTelemetry=function(){return s(this,void 0,void 0,(function(){var e;return a(this,(function(t){return e={eventName:d.TelemetryEventName,ctaName:d.TelemetryCTAName.atIconClick,ctaData:d.TelemetryCTAData.click,isAnonymous:!1},g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_ACTION_REQUEST,payload:{type:d.ActionType.SEND_TELEMETRY,payload:{telemetryParams:e}}}),[2]}))}))},t.prototype._onEmailFieldFound=function(e){return s(this,void 0,void 0,(function(){var t,r,n,i,s=this;return a(this,(function(a){switch(a.label){case 0:if(t=!1,r=[],e.forEach((function(n){var i=n.emailField;if(s.existingEmailFields.find((function(e){return e.field===i})))e=e.filter((function(e){return e!==n}));else{t=!0;var a={rect:(0,y.getEmailFieldRect)(i.getBoundingClientRect())};m.default.utils.isTopLevelWindow()||(a.iframeSrc=document.URL),r.push(a);var o=m.default.utils.createNewGuid();n.guid=o,a.guid=o,s.existingEmailFields.push({field:i,guid:o})}})),!t)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_EVENT_TRIGGERED,payload:{type:d.EventType.EMAIL_FIELD_FOUND,payload:{emailFieldsConfig:r}}})];case 2:return n=a.sent().data,m.default.logger.info("response for event EMAIL_FIELD_FOUND: "+n),this.productIcon=n.productIcon,p.badgeUI.showBadgeUI(e,n.productIcon,this.onBadgeClick),this.existingEmailFields.forEach((function(e){s._addEventsForEmailField(e.field)})),[2];case 3:return i=a.sent(),m.default.logger.error("Exception getting response for event EMAIL_FIELD_FOUND: "+i),[3,4];case 4:return[2]}}))}))},t.prototype._checkForOtherElements=function(e){return!!(0,f.getSiblingElements)(e).find((function(e){return e.id===h.NORTON_PASSWORD_MANAGER_DIV_ID}))},t.prototype.handleEmailFieldClick=function(e){if(!this._checkForOtherElements(e)&&!this.closeIconClicked){var t=[this.getEmailFieldConfig(e)];this.sendShowPopupEvent(t),this._sendBadgeClickTelemetry()}},t.prototype._checkInitRequired=function(){return s(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_ACTION_REQUEST,payload:{type:d.ActionType.CHECK_SDK_INIT_REQUIRED}})];case 1:return(null==(e=r.sent())?void 0:e.data)?(m.default.logger.info("Initializing CS WAX..."),this.init()):m.default.logger.error("CS WAX not initialized"),[3,3];case 2:return t=r.sent(),m.default.logger.error("Exception getting response for event CHECK_SDK_INIT_REQUIRED: "+t),[3,3];case 3:return[2]}}))}))},t.prototype.sendShowPopupEvent=function(e){g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_EVENT_TRIGGERED,payload:{type:d.EventType.SHOW_POPUP,payload:{emailFieldsConfig:e}}})},t.prototype.getEmailFieldConfig=function(e){var t={rect:(0,y.getEmailFieldRect)(e.getBoundingClientRect())};m.default.utils.isTopLevelWindow()||(t.iframeSrc=document.URL);var r=this.existingEmailFields.find((function(t){return t.field===e}));return t.guid=null==r?void 0:r.guid,t},t.prototype.sendPopupResizeEvent=function(){var e=this,t=this.existingEmailFields.map((function(t){return e.getEmailFieldConfig(t.field)}));this.sendShowPopupEvent(t)},t.prototype.handleResize=function(){if(0!==this.existingEmailFields.length){var e=this.fieldClassifier.getBadgePositions(),t=this.existingEmailFields.map((function(t,r){return{emailField:t.field,badgePositionData:e[r],guid:t.guid}}));p.badgeUI.showBadgeUI(t,this.productIcon,this.onBadgeClick),document.getElementById("autofill-iframe")&&this.sendPopupResizeEvent()}},t.prototype.onBadgeClick=function(e){var t=e.id.split("".concat(h.DIV_ID,"-"))[1],r=this.existingEmailFields.find((function(e){return e.guid===t}));if(r&&r.field){var n=[this.getEmailFieldConfig(r.field)];this._checkForOtherElements(e)&&g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_EVENT_TRIGGERED,payload:{type:d.EventType.SEND_NPW_TELEMETRY,payload:{}}}),this.sendShowPopupEvent(n),this._sendBadgeClickTelemetry()}},t.prototype.addWindowResizeListener=function(){var e=(0,f.debounce)(this.handleResize,h.BADGE_POSITION_CALCULATION_DELAY_IN_MS);window.addEventListener("resize",e)},t.prototype.handleInputEvents=function(){g.browser.runtime.sendMessage({id:d.AUTOFILL_BG_MESSAGES.AUTOFILL_EVENT_TRIGGERED,payload:{type:d.EventType.CLOSE_AUTOFILL_POPUP,payload:{eventDetail:c.DOCUMENT_CLICK}}})},t.prototype.addEventListeners=function(){this.addWindowResizeListener(),document.addEventListener(h.KEY_DOWN_EVENT,this.handleInputEvents),document.addEventListener(h.CLICK_EVENT,this.handleInputEvents)},t.prototype.init=function(){e.prototype.init.call(this),this.fieldClassifier.init(),this.addEventListeners()},t}(l.MessageListener);e.exports.AutofillManagerCS=E})),i.register("g7GFY",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("csiLA"),e.exports),n(i("lDp76"),e.exports),n(i("4oiDb"),e.exports),n(i("fgllU"),e.exports)})),i.register("csiLA",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FieldClassifierFactory=void 0;var r=i("lDp76"),n=i("fgllU"),s=function(){function e(){}return e.getFieldClassifier=function(e){return e===r.FieldClassifierType.WAX?new n.WaxFieldClassifier:null},e}();e.exports.FieldClassifierFactory=s})),i.register("lDp76",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.FieldClassifierType=void 0,(e.exports.FieldClassifierType||(e.exports.FieldClassifierType={})).WAX="WAX"})),i.register("fgllU",(function(e,t){"use strict";var r=e.exports&&e.exports.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{u(n.next(e))}catch(e){s(e)}}function o(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,o)}u((n=n.apply(e,t||[])).next())}))},n=e.exports&&e.exports.__generator||function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},s=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.WaxFieldClassifier=void 0;var a=s(i("a4yvB")),o=s(i("42vmj")),u=function(){function e(){this._onEmailFieldFound=this._onEmailFieldFound.bind(this),this.init=this.init.bind(this)}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,o.default.main.init()];case 1:return e.sent(),o.default.main.registerFieldsFoundCallback(this._onEmailFieldFound,o.default.constants.fieldFilter.type.CATEGORIZED_EMAIL_FIELDS),a.default.logger.info("WAX CS initialized"),[3,3];case 2:return e.sent(),a.default.logger.error("WAX CS initialization error"),[3,3];case 3:return[2]}}))}))},e.prototype.registerEmailFieldFound=function(e){this.emailFieldFoundCallback=e},e.prototype._onEmailFieldFound=function(e){this.waxFields=e;var t=e.map((function(e){var t;return{emailField:e.getElement(),badgePositionData:null===(t=e.badgePositionData)||void 0===t?void 0:t.getCurrentBadgePosition(e)}}));this.emailFieldFoundCallback&&this.emailFieldFoundCallback(t)},e.prototype.getBadgePositions=function(){return this.waxFields.map((function(e){var t;return null===(t=e.badgePositionData)||void 0===t?void 0:t.getCurrentBadgePosition(e)}))},e}();e.exports.WaxFieldClassifier=u})),i.register("42vmj",(function(e,t){!function(e){"use strict";(e.SymWax=e.SymWax||{}).constants=function(e){var t={requestType:{},header:{},contentType:{},IN_PAGE_POPUP:"symc-in-page-popup",DEFAULT_XHR_TIMEOUT:6e4};t.requestType.GET_METHOD="GET",t.contentType.JSON="application/json",t.header.CONTENT_TYPE="Content-Type",t.DEFAULT_PARSINGPREFERENCES="DefaultParsingPreferences",t.DOMAIN_RULES="DomainRules",t.URL_RULES="UrlRules",t.COUNTRIES="Countries",t.COUNTRY_DATA="CountryData",t.DATA="data",t.DATA_TYPE="datatype",t.COUNTRY_ATTRIBUTE="CountryAttribute",t.DOMAIN="Domain",t.LANGUAGES="Languages",t.DOMAIN_MATCH="/",t.FIELD_TYPE="fieldType",t.RULES="rules",t.ENGINE_RULES="engine_rules",t.FORM_SUBMIT_TIMEOUT=100,t.EVENT_OBJECT_SUBMIT_TIMEOUT=100,t.PATTERN="pattern",t.REGEX="regEx",t.MAX_STRING_LENGTH_FOR_REGEX=200,t.NORMALIZE_URL="normalizeUrl",t.ORIGINAL_URL="org",t.NORMALIZED_URL="nor",t.PROXIMITY_THRESHOLD_X=70,t.PROXIMITY_THRESHOLD_Y=50,t.rules={PRE_PARSE:"preparse",POST_PARSE:"postparse",SCRIPTS:"scripts",ON_FILL:"onfill",FETCH_CREDENTIALS:"fetchcredentials",ON_FIELD_FOUND:"onfieldfound",AFTER_FILL:"afterfill",BEFORE_FILL:"beforefill",OPERATION:"Operation",PROPERTY:"Property",DOM_METHOD:"DomMethod",EXECUTION_CONTEXT:"ExecutionContext",DELAY:"Delay",EVENT_NAME:"EventName",SET_TIMEOUT:"setTimeout",SET_INTERVAL:"setInterval",RETRY_ITERATION:"RetryIteration",CLICK_HANDLER:"ClickHandler",DELAY_IN_MS:"DelayInMs",operation:{CALL_JAVA_SCRIPT:"calljavascript",FILL_EX:"fillex",FIELD_MAPPING:"FieldMapping",GROUP_MAPPING:"GroupMapping",UPDATE_ATTRIBUTE:"updateAttribute",FETCH_DATA:"fetchData",SPLIT_FILL:"splitFill",CLICK:"Click",CUSTOM_FILL:"CustomFill",ADD_EVENT_LISTENER:"addEventListener",ADD_CLICK_HANDLER:"AddClickHandler",ADD_RESIZE_HANDLER:"AddResizeHandler",ADD_MOUSE_UP_HANDLER:"AddMouseUpHandler"},property:{NAME:"name",ATTRIBUTES:"attributes",FIELD_TYPE:"FieldType",INPUT_TYPE:"InputType",LOGIN_TYPE:"LoginType",GROUP_TYPE:"GroupType"},domMethod:{GET_ELEMENT_BY_ID:"getElementById",GET_ELEMENT_BY_NAME:"getElementsByName",QUERY_SELECTOR_ALL:"querySelectorAll",QUERY_SELECTOR:"querySelector"},SUBMIT_EVENTS:"SubmitEvents"},t.PREFERENCES="preferences",t.URL_BASED_DATA="urlBasedData",t.GLOBAL_DATA="globalData",t.messages={GET_URL_DATA:"F1F837B8-DC04-478A-C9EB-45F87DD3B88F",TRIGGER_AJAX_PARSE_RETRY:"BEE46703-475E-411B-C6CD-6331AC68CB18",TRIGGER_AJAX_PARSE_RETRY_RESPONSE:"30220307-AB5C-45DA-F586-37894089452E",TRIGGER_FORCED_WAX_ANALYSIS:"577408EC-2807-49D8-B479-E91120B89183",CHECK_ANALYSIS_REQUIRED:"11A574D4-6B97-45D1-BFFE-F23A3036C829",TOP_FRAME_UNLOAD_EVENT:"282955FF-C442-4AD4-A28F-1FA4F6183400",SEND_WAX_TELEMETRY_TO_BG:"319e4246-a421-4a7b-bfa7-faaa7681e45b",SEND_WAX_TELEMETRY_TO_BFW:"0e72ba18-d35c-43e5-a025-91afb1132866",DOES_FORM_EXIST:"4479A99F-4C87-4568-A855-2B133E24A442"},t.NO_THRESHOLD_CHECK_VALUE=-1,t.htmlTagName={A:"A",BODY:"BODY",BUTTON:"BUTTON",DIV:"DIV",FIELDSET:"FIELDSET",HEAD:"HEAD",IFRAME:"IFRAME",IMG:"IMG",FORM:"FORM",INPUT:"INPUT",LABEL:"LABEL",META:"META",NOSCRIPT:"NOSCRIPT",OPTION:"OPTION",P:"P",SCRIPT:"SCRIPT",SELECT:"SELECT",SPAN:"SPAN",TABLE:"TABLE",TD:"TD",TEXTAREA:"TEXTAREA",TH:"TH",THEAD:"THEAD",TITLE:"TITLE",TR:"TR",B:"B",I:"I",U:"U",LI:"LI",H1:"H1",H2:"H2",H3:"H3",H4:"H4",H5:"H5",H6:"H6",FONT:"FONT",STRONG:"STRONG",EM:"EM"},t.htmlElementAttributes={ACTION:"action",ALT:"alt",CLASS:"class",CHECKED:"checked",FOR:"for",FORM:"form",FORMACTION:"formaction",ID:"id",MAXLENGTH:"maxlength",NAME:"name",PATTERN:"pattern",PLACEHOLDER:"placeholder",READONLY:"readonly",SRC:"src",TYPE:"type",TITLE:"title",VALUE:"value"},t.inputType={UNKNOWN:"Unknown",TEXT:"Text",TEXTAREA:"Textarea",PASSWORD:"Password",SUBMIT:"Submit",IMAGE:"Image",BUTTON:"Button",CHECKBOX:"Checkbox",RADIO:"Radio",RESET:"Reset",FILE:"File",HIDDEN:"Hidden",SELECT:"Select",EVENT_OBJECT:"EventObject",TELEPHONE:"tel",NUMBER:"number",CUSTOM_FILL:"CustomFill"},t.patternTokens={DAY:"dd",MONTH:"mmm",YEAR:"yyyy",PREFIX:"p",SUFFIX:"s",FIRST_NAME:"fn",MIDDLE_NAME:"mn",LAST_NAME:"ln",CARD_NUMBER:"cc",UNKNOWN:"x",IGNORE:"xx"},t.fieldType={ALL:"All",UNKNOWN:"Unknown",LOGIN_NAME:"LoginName",PASSWORD:"Password",PASSWORD_PLACEHOLDER:"PasswordPlaceHolder",VERIFY_PASSWORD:"VerifyPassword",PASSWORD_HINT:"PasswordHint",LOGIN_BUTTON:"LoginButton",SIGNUP_BUTTON:"SignUpButton",CONTINUE_BUTTON:"ContinueButton",SIGNON_DESTINATION:"SignonDestination",EMAIL:"Email",VERIFY_EMAIL:"VerifyEmail",ALTERNATE_EMAIL:"AlternateEmail",FULL_NAME:"FullName",FIRST_NAME:"FirstName",LAST_NAME:"LastName",MIDDLE_NAME:"MiddleName",PREFIX:"Prefix",SUFFIX:"Suffix",FULL_NAME_PHONETIC:"FullNamePhonetic",FIRST_NAME_PHONETIC:"FirstNamePhonetic",LAST_NAME_PHONETIC:"LastNamePhonetic",MIDDLE_NAME_PHONETIC:"MiddleNamePhonetic",FULL_NAME_ROMAN:"FullNameRoman",FIRST_NAME_ROMAN:"FirstNameRoman",LAST_NAME_ROMAN:"LastNameRoman",MIDDLE_NAME_ROMAN:"MiddleNameRoman",SSN:"SSN",ADDRESS:"Address",ADDRESS_LINE2:"AddressLine2",ADDRESS_LINE3:"AddressLine3",ADDRESS_PHONETIC:"AddressPhonetic",ADDRESS_LINE2_PHONETIC:"AddressLine2Phonetic",ADDRESS_LINE3_PHONETIC:"AddressLine3Phonetic",CITY:"City",CITY_PHONETIC:"CityPhonetic",ZIP_CODE:"ZipCode",STATE:"State",REGION:"Region",HOUSE_NUMBER:"HouseNumber",HOUSE_NAME:"HouseName",VILLAGE:"Village",SUB_AREA:"SubArea",BLOCK_NUMBER:"BlockNumber",DISTRICT:"District",APARTMENT_NUMBER:"ApartmentNumber",APARTMENT_FLOOR:"ApartmentFloor",SUITE_NUMBER:"SuiteNumber",BIRTH_DATE:"BirthDate",BIRTH_DAY:"BirthDay",BIRTH_MONTH:"BirthMonth",BIRTH_YEAR:"BirthYear",DATE:"Date",DAY:"Day",MONTH:"Month",YEAR:"Year",ACCOUNT_NUMBER:"AccountNumber",PIN:"Pin",ROUTING_NUMBER:"RoutingNumber",PHONE_NUMBER_COUNTRY_CODE:"PhoneNumberCountryCode",PHONE_NUMBER_AREA_CODE:"PhoneNumberAreaCode",PHONE_NUMBER_EXTENSION:"PhoneNumberExtension",PHONE_NUMBER:"PhoneNumber",PHONE_NUMBER_WORK:"PhoneNumberWork",PHONE_NUMBER_WORK_FAX:"PhoneNumberWorkFax",PHONE_NUMBER_HOME:"PhoneNumberHome",PHONE_NUMBER_FAX:"PhoneNumberFax",PHONE_NUMBER_CELL:"PhoneNumberCell",SECURITY_QUESTION:"SecurityQuestion",ANSWER:"Answer",GENDER:"Gender",CREDIT_CARD_HOLDER_NAME:"CreditCardHolderName",CREDIT_CARD_HOLDER_FIRST_NAME:"CreditCardHolderFirstName",CREDIT_CARD_HOLDER_LAST_NAME:"CreditCardHolderLastName",CREDIT_CARD_TYPE:"CreditCardType",CREDIT_CARD_NUMBER:"CreditCardNumber",CREDIT_CARD_EXPIRATION_DATE:"CreditCardExpirationDate",CREDIT_CARD_EXPIRATION_MONTH:"CreditCardExpirationMonth",CREDIT_CARD_EXPIRATION_YEAR:"CreditCardExpirationYear",CREDIT_CARD_SECURITY_CODE:"CreditCardSecurityCode",CREDIT_CARD_START_DATE:"CreditCardStartDate",CREDIT_CARD_START_MONTH:"CreditCardStartMonth",CREDIT_CARD_START_YEAR:"CreditCardStartYear",CREDIT_CARD_ISSUE_NUMBER:"CreditCardIssueNumber",ADD_CARD_DETAILS:"AddCard",COMPANY:"Company",DEPARTMENT:"Department",WORK_ID:"WorkId",WORK_JOB_TITLE:"WorkJobTitle",WORK_EMAIL:"WorkEmail",WORK_ADDRESS:"WorkAddress",WORK_CITY:"WorkCity",WORK_ZIP_CODE:"WorkZipCode",WORK_STATE:"WorkState",WORK_REGION:"WorkRegion",WORK_WEBSITE:"WorkWebSite",SEARCH:"Search",LANGUAGE:"Language",OPEN_ID:"OpenID",VERIFICATION_CODE:"VerificationCode",WEBSITE:"WebSite",MOTHERS_MAIDEN_NAME:"MothersMaidenName",TIMEZONE:"TimeZone",DOMAIN:"Domain",AJAX_ACTION:"AjaxAction",BUTTON_ACTION:"ButtonAction",SKIP_FIELD:"SkipField",CHANGE_PASSWORD_BUTTON:"ChangePasswordButton",SUBSCRIBE:"Subscribe",PASSPORT_NUMBER:"PassportNumber",DRIVER_LICENSE:"DriversLicense",SEARCH_ANNOTATION:"SearchAnnotation",APPLY:"Apply",UPDATE:"Update",COMMENT:"Comment",BANK_NAME:"BankName",BANK_ACCOUNT_HOLDER_NAME:"BankAccountHolderName",MAILING_ADDRESS:"MailingAddress",NEW_PASSWORD:"NewPassword",IGNORE_FIELD:"IgnoreField",GENDER_MALE:"GenderMale",GENDER_FEMALE:"GenderFemale",SEARCH_BUTTON:"SearchButton",MUTLI_SPAN_USERNAME:"MultiSpanUsername",SUBSCRIBE_BUTTON:"SubscribeButton",APPLY_BUTTON:"ApplyButton",UPDATE_BUTTON:"UpdateButton",OTP:"OTP"},t.emailFieldTypes=[t.fieldType.EMAIL,t.fieldType.VERIFY_EMAIL,t.fieldType.ALTERNATE_EMAIL,t.fieldType.WORK_EMAIL],t.matchProperties={INVALID:"Invalid",NAME:"Name",VALUE:"Value",CLASS:"Class",ATTACHED_TEXT:"AttachedText",ALTERNATIVE_TEXT:"Alt",ID:"ID",IMAGE_SRC:"Src",TITLE:"Title",INNER_TEXT:"InnerText",HREF:"HREF",CONTENT:"Content",FIRST_LIST_ITEM:"FirstListItem",PLACE_HOLDER:"Placeholder",TYPE:"Type",ARIA_LABEL:"aria-label",NODE_TYPE:"node-type",ACTION_DATA:"action-data",AUTOCOMPLETE:"autocomplete",INPUTMODE:"inputmode"},t.eventType={ON_CLICK:"onclick",ON_SUBMIT:"onsubmit",ON_MOUSE_DOWN:"onmousedown",ON_MOUSE_UP:"onmouseup",FORM_ACTION:"formaction",COMMAND:"command",HREF:"href",ROLE:"role",CHANGE:"change",INPUT:"input",HTML_EVENTS:"HTMLEvents",EVENTS:"Events",CLICK:"click",KEYDOWN:"keydown",MOUSEDOWN:"mousedown",KEYUP:"keyup",SUBMIT:"submit",MOUSE_OVER:"mouseover",ONFOCUS:"focus",RESIZE:"resize",MOUSEUP:"mouseup"},t.groupType={UNKNOWN:"Unknown",LOGIN:"Login",MULTI_PAGE_LOGIN:"MultiPageLogin",PARTIAL_LOGIN:"PartialLogin",PARTIAL_CARDS_PAGE:"PartialCardsPage",CARDS_PAGE:"CardsPage",PERSONAL_INFO_PAGE:"PersonalInfoPage",CHANGE_PASSWORD_PAGE:"ChangePasswordPage",REGISTRATION_PAGE:"RegistrationPage",PARTIAL_REGISTRATION_PAGE:"PartialRegistrationPage",PARTIAL_CHANGE_PASSWORD_PAGE:"PartialChangePasswordPage",LIMITED_CHANGE_PASSWORD_PAGE:"LimitedChangePasswordPage",ADDRESS_PAGE:"AddressPage",INTERACTION_PAGE:"InteractionPage"},t.groupTypeRank=[t.groupType.INTERACTION_PAGE,t.groupType.REGISTRATION_PAGE,t.groupType.ADDRESS_PAGE,t.groupType.LOGIN,t.groupType.PARTIAL_LOGIN,t.groupType.MULTI_PAGE_LOGIN,t.groupType.CARDS_PAGE,t.groupType.PARTIAL_CARDS_PAGE,t.groupType.PERSONAL_INFO_PAGE,t.groupType.CHANGE_PASSWORD_PAGE,t.groupType.PARTIAL_REGISTRATION_PAGE,t.groupType.PARTIAL_CHANGE_PASSWORD_PAGE,t.groupType.LIMITED_CHANGE_PASSWORD_PAGE],t.anyFieldTypes={ANY_LOGIN_FIELD:"AnyLoginField",ANY_LOGIN_FIELD_EX:"AnyLoginFieldEx",ANY_LOGIN_BUTTON:"AnyLoginButton",ANY_CHANGE_PASSWORD_BUTTON:"AnyChangePasswordButton",ANY_LOGIN_PASSWORD_FIELD:"AnyLoginPasswordField",ANY_CHANGE_PASSWORD_FIELD:"AnyChangePasswordField"},t.loginType={USERNAME:"Username",PASSWORD:"Password",LOGIN_BUTTON:"LoginButton"},t.anyInputTypes={ANY_INPUT_BUTTON_TYPE:"AnyInputButtonType"},t.groupCategorization={MAPPING_FIELDS:"MappingFields",INPUT_FIELDS:"InputFields",GROUP_TYPE:"GroupType",FIELD_TYPE:"FieldType",INPUT_TYPE:"InputType",LOGIN_TYPE:"LoginType",PARTIAL:"Partial",LOGIN_CATEGORIZATIONS:"LoginCategorizations",PAGE_CATEGORIZATIONS:"PageCategorizations"},t.telemetry={CATEGORY:"wax",VALIDATION_TIMEOUT:300,ANALYSIS_THRESHOLD:2500,TRACKING_ID:"UA-80690213-3"},t.telemetry.config={ENABLE_TELEMETRY:"false",ENABLE_DETECTION_FAILURE_TELEMETRY:"false",ENABLE_ADDRESS_DETECTION_TELEMETRY:"false"},t.telemetry.type={FILL_FAILURE:"fillfailure",FIELD_CHANGED:"fieldchanged",FILL_SUCCESS:"fillsuccess",DETECTION_FAILURE:"detectionfailure",REG_ADDRESS_DETECTION:"regaddressdetection"},t.telemetry.parameters={TAG_NAME:"cd4",INPUT_TYPE:"cd5",ID:"cd6",NAME:"cd7",PLACE_HOLDER:"cd8",CLASS_NAME:"cd9",FIELD_INNER_TEXT:"cd10",FORM_ID:"cd11",FORM_NAME:"cd12",URL:"cd13",FORM_TYPES:"cd14"},t.parsePreferences={PARSE_CRITERIAS:"ParseCriterias",REGEX_ENABLED_FIELDS:"RegexEnabledFields"},t.fieldsCombinationMapping={[t.groupType.REGISTRATION_PAGE]:[[t.fieldType.EMAIL,t.fieldType.FIRST_NAME],[t.fieldType.FIRST_NAME,t.fieldType.LAST_NAME],[t.fieldType.EMAIL,t.fieldType.FULL_NAME],[t.fieldType.EMAIL,t.fieldType.VERIFY_EMAIL],[t.fieldType.EMAIL,t.fieldType.LOGIN_NAME],[t.fieldType.FULL_NAME,t.fieldType.LOGIN_NAME]],[t.groupType.ADDRESS_PAGE]:[[t.fieldType.ADDRESS,t.fieldType.ZIP_CODE],[t.fieldType.ADDRESS_LINE2,t.fieldType.ZIP_CODE],[t.fieldType.CITY,t.fieldType.ZIP_CODE],[t.fieldType.STATE,t.fieldType.ZIP_CODE],[t.fieldType.REGION,t.fieldType.ZIP_CODE]]},t.parseCriterias={EVENT_OBECTS:"EventObjects",IGNORE_FIELD_SETS:"IgnoreFieldSets",VERIFY_ATTRIBUTE_BY_ATTACHED_TEXT:"VerifyAttributeByAttachedText",ENABLE_SORTING:"EnableSorting",CHECK_IF_OUT_OF_BOUNDS:"CheckIfOutOfBounds",USE_PATTERN_MATCHING:"UsePatternMatching",IGNORE_HIDDEN_INPUTS:"IgnoreHiddenInputs",ALLOW_PAGE_PORT_VIEW:"AllowPagePortView",ENABLE_AJAX_SUPPORT:"EnableAjaxSupport",USE_GLOBAL_LOOKUP_CACHE:"UseGlobalLookupCache",LOGIN_EVENT_REPLAY:"LoginEventReplay",USE_GROUP_PATTERN_MATCHING:"UseGroupPatternMatching",LOGIN_THREAD_CALLBACK_REPLAY:"LoginThreadCallbackReplay",ATTACHED_TEXT_LENGTH:"AttachedTextLength",ATTACHED_TEXT_PIXEL_SIZE:"AttachedTextPixelSize",USE_REG_EX_ON_EVENT_OBJECTS:"UseRegExOnEventObjects",USE_REG_EX_ON_IMAGES:"UseRegExOnImages",IGNORE_IMAGES:"IgnoreImages",DETERMINISTIC_EVENT_REPLAY:"DeterministicEventReplay",DONT_VALIDATE_FIELD_TYPE:"DontValidateFieldType",DONT_CATEGORIZE_AS_MULTIPLE_PAGE_LOGIN:"DontCategorizeAsMultiPageLogin",VERIFY_DOCUMENT_WIDTH_AND_HEIGHT:"VerifyDocumentWidthAndHeight",INPUTS_ONLY:"InputsOnly",IGNORE_FORMS:"IgnoreForms",ADD_SHADOW_DOM_FIELDS:"AddShadowDomFields",DONT_PERFORM_GROUP_CATEGORIZE:"DontPerformGroupCategorize",DONT_PERFORM_FIELD_MAPPING:"DontPerformFieldMapping",CHROME_DONT_USE_JAVA_SCRIPT:"ChromeDontUseJavaScript",DONT_PARSE:"DontParse",CARDS_EVENT_REPLAY:"CardsEventReplay",IGNORE_FRAMEWORK_SUBMIT:"IgnoreFrameworkSubmit",SKIP_DOCS_WITH_FEW_ELEMENTS:"SkipDocsWithFewElements",ENABLE_FORM_EXIST_VALIDATION:"EnableFormExistValidation",DONT_USE_CUSTOM_SUBMIT_HOOK:"DontUseCustomSubmitHook",DONT_USE_PASSWORD_FIELD_CORRECTION:"DontUsePasswordFieldCorrection"},t.keyCode={ENTER:13},t.performanceReporter={COMPONENT:{WAX:"wax"},TYPE:{DO_PARSE:"doParse",INIT:"init",FIELD_MAPPING_PROCESS_PAGE:"fieldMappingProcessPage",FIELD_GROUP_MAPPING_PROCESS_PAGE:"fieldGroupMappingProcessPage",GROUP_CATEGORIZATION_PROCESS_PAGE:"groupCategorizationProcessPage",PROCESS_GROUP_CATEGORIZATION_RESULTS:"processGroupCategorizationResults",INIT_WITH_THRESHOLD:"waxInitWithThreshold"}},t.formDataPublicKey="##FORMDATA_PUBLICKEY##";const r={CDN_FORMDATA_BASE_URL:"##CDN_SERVER##/idsafe/waxFormdata/v1/"};return r.CDN_L10N_JSON_URL=r.CDN_FORMDATA_BASE_URL+"l10n/",r.L10N_US_CODE="us",r.MASKED_PASSWORD_CHAR=8226,t.cloudFormData=r,t.textPosition={Invalid:0,Center:1,Left:2,FarLeft:4,Top:8,Bottom:32,Right:64,FarRight:128,CenterTop:9,LeftTop:10,FarLeftTop:12,RightTop:72,FarRightTop:136,LeftCenter:3,FarLeftCenter:5,RightCenter:65,FarRightCenter:129,CenterBottom:33,LeftBottom:34,FarLeftBottom:36,RightBottom:96,FarRightBottom:160},t.elementType={Unknown:0,Label:1,TableCell:2,Header:3,Table:4,TableBody:5,TableRow:6,Input:7,TextArea:8,Button:9,Image:10,Select:11,Link:12,Container:13,SelectOption:14,Generic:15,Form:16,Comments:17,FieldSet:18},t.languageQueryParameterKeys=["lang",".lang","hl"],t.fieldTypeToPIIIdentifiers={[t.fieldType.SSN]:27,[t.fieldType.CREDIT_CARD_HOLDER_NAME]:71,[t.fieldType.CREDIT_CARD_HOLDER_FIRST_NAME]:72,[t.fieldType.CREDIT_CARD_HOLDER_LAST_NAME]:73,[t.fieldType.CREDIT_CARD_TYPE]:74,[t.fieldType.CREDIT_CARD_NUMBER]:75,[t.fieldType.CREDIT_CARD_EXPIRATION_DATE]:76,[t.fieldType.CREDIT_CARD_EXPIRATION_MONTH]:77,[t.fieldType.CREDIT_CARD_EXPIRATION_YEAR]:78,[t.fieldType.CREDIT_CARD_SECURITY_CODE]:79,[t.fieldType.CREDIT_CARD_START_DATE]:80,[t.fieldType.CREDIT_CARD_START_MONTH]:81,[t.fieldType.CREDIT_CARD_START_YEAR]:82,[t.fieldType.CREDIT_CARD_ISSUE_NUMBER]:83,[t.fieldType.LOGIN_NAME]:1,[t.fieldType.PASSWORD]:2,[t.fieldType.PASSWORD_PLACEHOLDER]:3,[t.fieldType.VERIFY_PASSWORD]:4,[t.fieldType.PASSWORD_HINT]:5,[t.fieldType.LOGIN_BUTTON]:6,[t.fieldType.SIGNUP_BUTTON]:7,[t.fieldType.CONTINUE_BUTTON]:8,[t.fieldType.SIGNON_DESTINATION]:9,[t.fieldType.EMAIL]:10,[t.fieldType.VERIFY_EMAIL]:11,[t.fieldType.ALTERNATE_EMAIL]:12,[t.fieldType.FULL_NAME]:13,[t.fieldType.FIRST_NAME]:14,[t.fieldType.LAST_NAME]:15,[t.fieldType.MIDDLE_NAME]:16,[t.fieldType.PREFIX]:17,[t.fieldType.SUFFIX]:18,[t.fieldType.FULL_NAME_PHONETIC]:19,[t.fieldType.FIRST_NAME_PHONETIC]:20,[t.fieldType.LAST_NAME_PHONETIC]:21,[t.fieldType.MIDDLE_NAME_PHONETIC]:22,[t.fieldType.FULL_NAME_ROMAN]:23,[t.fieldType.FIRST_NAME_ROMAN]:24,[t.fieldType.LAST_NAME_ROMAN]:25,[t.fieldType.MIDDLE_NAME_ROMAN]:26,[t.fieldType.ADDRESS]:28,[t.fieldType.ADDRESS_LINE2]:29,[t.fieldType.ADDRESS_LINE3]:30,[t.fieldType.ADDRESS_PHONETIC]:31,[t.fieldType.ADDRESS_LINE2_PHONETIC]:32,[t.fieldType.ADDRESS_LINE3_PHONETIC]:33,[t.fieldType.CITY]:34,[t.fieldType.CITY_PHONETIC]:35,[t.fieldType.ZIP_CODE]:36,[t.fieldType.STATE]:37,[t.fieldType.REGION]:38,[t.fieldType.HOUSE_NUMBER]:39,[t.fieldType.HOUSE_NAME]:40,[t.fieldType.VILLAGE]:41,[t.fieldType.SUB_AREA]:42,[t.fieldType.BLOCK_NUMBER]:43,[t.fieldType.DISTRICT]:44,[t.fieldType.APARTMENT_NUMBER]:45,[t.fieldType.APARTMENT_FLOOR]:46,[t.fieldType.SUITE_NUMBER]:47,[t.fieldType.BIRTH_DATE]:48,[t.fieldType.BIRTH_DAY]:49,[t.fieldType.BIRTH_MONTH]:50,[t.fieldType.BIRTH_YEAR]:51,[t.fieldType.DATE]:52,[t.fieldType.DAY]:53,[t.fieldType.MONTH]:54,[t.fieldType.YEAR]:55,[t.fieldType.ACCOUNT_NUMBER]:56,[t.fieldType.PIN]:57,[t.fieldType.ROUTING_NUMBER]:58,[t.fieldType.PHONE_NUMBER_COUNTRY_CODE]:59,[t.fieldType.PHONE_NUMBER_AREA_CODE]:60,[t.fieldType.PHONE_NUMBER_EXTENSION]:61,[t.fieldType.PHONE_NUMBER]:62,[t.fieldType.PHONE_NUMBER_WORK]:63,[t.fieldType.PHONE_NUMBER_WORK_FAX]:64,[t.fieldType.PHONE_NUMBER_HOME]:65,[t.fieldType.PHONE_NUMBER_FAX]:66,[t.fieldType.PHONE_NUMBER_CELL]:67,[t.fieldType.SECURITY_QUESTION]:68,[t.fieldType.ANSWER]:69,[t.fieldType.GENDER]:70,[t.fieldType.COMPANY]:84,[t.fieldType.DEPARTMENT]:85,[t.fieldType.WORK_ID]:86,[t.fieldType.WORK_JOB_TITLE]:87,[t.fieldType.WORK_EMAIL]:88,[t.fieldType.WORK_ADDRESS]:89,[t.fieldType.WORK_CITY]:90,[t.fieldType.WORK_ZIP_CODE]:91,[t.fieldType.WORK_STATE]:92,[t.fieldType.WORK_REGION]:93,[t.fieldType.WORK_WEBSITE]:94,[t.fieldType.SEARCH]:95,[t.fieldType.LANGUAGE]:96,[t.fieldType.OPEN_ID]:97,[t.fieldType.VERIFICATION_CODE]:98,[t.fieldType.WEBSITE]:99,[t.fieldType.MOTHERS_MAIDEN_NAME]:100,[t.fieldType.TIMEZONE]:101,[t.fieldType.DOMAIN]:102,[t.fieldType.AJAX_ACTION]:103,[t.fieldType.SKIP_FIELD]:104,[t.fieldType.IGNORE_FIELD]:124,[t.fieldType.GENDER_MALE]:155,[t.fieldType.GENDER_FEMALE]:156,[t.fieldType.SEARCH_BUTTON]:157,[t.fieldType.MUTLI_SPAN_USERNAME]:158},t.fieldFilter={},t.fieldFilter.type={ALL:"ALL",CATEGORIZED_INPUT_FIELDS:"CATEGORIZED_INPUT_FIELDS",CATEGORIZED_INPUT_AND_NONINPUT_FIELDS:"CATEGORIZED_INPUT_AND_NONINPUT_FIELDS",CATEGORIZED_EMAIL_FIELDS:"CATEGORIZED_EMAIL_FIELDS"},t.fieldCategory={EMAIL:"email"},t.FIELD_STYLING={DIV_HEIGHT_REC:22,DIV_HEIGHT_RATIO:16,DIV_LEFT_RTL:6,DIV_LEFT_LTR:180,DIV_WIDTH_REC:186,MAX_ICON_HEIGHT_WIDTH:24,MIN_ICON_HEIGHT_WIDTH:16},t.NORTON_PASSWORD_MANAGER_DIV_ID="norton-idsafe-field-styling-divId",t.LEFT_POSITION_SPACING_DECREMENT_VALUE=10,t.tabStatus={COMPLETE:"complete",LOADING:"loading"},t.formEvents={FORMS_FOUND:"4AF4F7BD-9AB6-4308-9C68-420FAAE6177C",FORM_SUBMIT:"F5B47B7B-C96E-48F1-AC71-C71F31435965",ALL_FORM_ELEMENTS_REMOVED:"415DA29C-3871-45AF-8321-D08B644B0809"},t.DATA_NLOCK_REF_GUID="data-nlok-ref-guid",t.WAX_JSON_DOWNLOAD="wax-json-download",t.WAX_JSON_DOWNLOAD_RETRY="wax-json-download-retry",t.WAX_RULES_DOWNLOAD_INTERVAL=864e5,t.WAX_RULES_RETRY_INTERVAL=18e5,t.WAX_STORAGE_CONTAINER="10a259c2-f812-4c39-9516-2a513734e1d5",t.MILLISECONDS_MINUTES_CONVERSION=6e4,t.WAX_STORAGE={WAX_STORAGE_CONTAINER:"10a259c2-f812-4c39-9516-2a513734e1d5",WAX_RULES_DOWNLOAD_TIMESTAMP:"wax_rules_download_timestamp",PARSE_PREFERENCE_JSON:"parse_preference_json",RULES_JSON:"rules_json",ENGINE_RULES_JSON:"engine_rules_json",DOMAINS_DATA:"domains_data",GLOBAL_JSON:"global_json",URL_BASED_DATA:"url_based_data"},t}(e.SymWax)}(window),function(e){"use strict";var t,r,n;e.SymWax.ParsePreference=(t=e.SymBfw,e.SymWax,r=t.utils.isNil,t.utils.isntNil,t.utils.isArray,(n=function(e){if(r(e))throw new Error("jsonParsePreference object cannot be null");this._languages=e.Languages,this._overwriteRule=e.OverwriteRule,this._matchFullURLPath=e.MatchFullURLPath,this._parseCriterias=e.ParseCriterias,this._parseCriteriasEx=e.ParseCriteriasEx,this._eventTypes=e.EventTypes,this._matchingProperties=e.MatchingProperties,this._initialParseDelay=e.InitialParseDelay,this._parseRetryInfo=e.ParseRetryInfo,this._ajaxParseRetryInfo=e.AjaxParseRetryInfo,this._signonDestinations=e.SignonDestinations,this._stringPixelSize=e.StringPixelSize,this._regexEnabledFields=e.RegexEnabledFields,this._browsers=e.Browsers,this._groupSeperatorWidth=e.GroupSeperatorWidth,this._mutationObserverTargetElement=e.MutationObserverTarget,this._customEventsAfterFill=e.CustomEventsAfterFill,this._shadowDomTargetElements=e.ShadowDomTargets}).prototype.isOverwriteRuleAvailable=function(){return this._overwriteRule},n.prototype.isMatchFullURLPathPresent=function(){return this._matchFullURLPath},n.prototype.getMutationObserverTargetElement=function(){return this._mutationObserverTargetElement},n.prototype.getShadowDomTargetElements=function(){return this._shadowDomTargetElements},n.prototype.getParseCriterias=function(){return this._parseCriterias},n.prototype.getParseCriteriasEx=function(){return this._parseCriteriasEx},n.prototype.getEventTypes=function(){return this._eventTypes},n.prototype.getLanguages=function(){return this._languages},n.prototype.getMatchingProperties=function(){return this._matchingProperties},n.prototype.getInitialParseDelay=function(){return this._initialParseDelay},n.prototype.getParseRetryInfo=function(){return this._parseRetryInfo},n.prototype.getAjaxParseRetryInfo=function(){return this._ajaxParseRetryInfo},n.prototype.getSignonDestinations=function(){return this._signonDestinations},n.prototype.getStringPixelSize=function(){return this._stringPixelSize},n.prototype.getBrowsers=function(){return this._browsers},n.prototype.getRegexEnabledFields=function(){return this._regexEnabledFields},n.prototype.getGroupSeperatorWidth=function(){return this._groupSeperatorWidth},n.prototype.getCustomEventsAfterFill=function(){return this._customEventsAfterFill},n.prototype.serialize=function(){return{OverwriteRule:this.isOverwriteRuleAvailable(),MatchingProperties:this.getMatchingProperties(),ParseCriterias:this.getParseCriterias(),EventTypes:this.getEventTypes(),SignonDestinations:this.getSignonDestinations(),ParseCriteriasEx:this.getParseCriteriasEx(),InitialParseDelay:this.getInitialParseDelay(),ParseRetryInfo:this.getParseRetryInfo(),Languages:this.getLanguages(),MatchFullURLPath:this.isMatchFullURLPathPresent(),AjaxParseRetryInfo:this.getAjaxParseRetryInfo(),StringPixelSize:this.getStringPixelSize(),Browsers:this.getBrowsers(),RegexEnabledFields:this.getRegexEnabledFields(),GroupSeperatorWidth:this.getGroupSeperatorWidth(),MutationObserverTarget:this.getMutationObserverTargetElement(),CustomEventsAfterFill:this.getCustomEventsAfterFill(),ShadowDomTargets:this.getShadowDomTargetElements()}},n)}(window),function(e){"use strict";e.SymWax.utils=function(e,t){var r=Number.MAX_VALUE,n=Number.MAX_VALUE,i=e.utils.isNil,s=e.utils.isntNil,a=e.utils.isArray,o=e.utils.isString,u=t.constants,l=u.inputType,c=u.eventType,h=u.matchProperties,p=e.logger,f=t.constants.parseCriterias,d={};const g=[u.fieldType.CREDIT_CARD_HOLDER_NAME,u.fieldType.CREDIT_CARD_HOLDER_FIRST_NAME,u.fieldType.CREDIT_CARD_HOLDER_LAST_NAME,u.fieldType.CREDIT_CARD_NUMBER,u.fieldType.CREDIT_CARD_EXPIRATION_DATE,u.fieldType.CREDIT_CARD_EXPIRATION_MONTH,u.fieldType.CREDIT_CARD_EXPIRATION_YEAR],m=[u.fieldType.LOGIN_NAME,u.fieldType.EMAIL,u.fieldType.FULL_NAME,u.fieldType.FULL_NAME_ROMAN,u.fieldType.FULL_NAME_PHONETIC,u.fieldType.SSN,u.fieldType.PIN,u.fieldType.OPEN_ID,u.fieldType.PHONE_NUMBER,u.fieldType.PHONE_NUMBER_HOME,u.fieldType.PHONE_NUMBER_CELL,u.fieldType.MOTHERS_MAIDEN_NAME,u.fieldType.ACCOUNT_NUMBER,u.fieldType.ROUTING_NUMBER,u.fieldType.WORK_ID],y=[u.fieldType.SSN,u.fieldType.ACCOUNT_NUMBER],E=[u.fieldType.OTP];return d.hasEventHandler=function(e,t){if(!a(e))throw new Error("eventTypes must be an array");if(i(t))throw new Error("element cannot be nil");if(-1!==e.indexOf(c.ON_CLICK)&&s(t.getAttribute(c.ON_CLICK)))return!0;if(-1!==e.indexOf(c.ON_SUBMIT)&&s(t.getAttribute(c.ON_SUBMIT)))return!0;if(-1!==e.indexOf(c.ON_MOUSE_DOWN)&&s(t.getAttribute(c.ON_MOUSE_DOWN)))return!0;if(-1!==e.indexOf(c.ON_MOUSE_UP)&&s(t.getAttribute(c.ON_MOUSE_UP)))return!0;var r;if(-1!==e.indexOf(c.HREF)&&(r=t.getAttribute(c.HREF),s(r))){if(0===(r=r.toLowerCase()).indexOf("javascript"))return!0;if(0===r.indexOf("#"))return!0}return!(-1===e.indexOf(c.COMMAND)||!s(t.getAttribute(c.COMMAND)))||(!(-1===e.indexOf(c.FORM_ACTION)||!s(t.getAttribute(c.FORM_ACTION)))||!(-1===e.indexOf(c.ROLE)||(r=t.getAttribute(c.ROLE),!s(r)||0!==(r=r.toLowerCase()).indexOf("button"))))},d.getInputType=function(e){if(i(e))throw new Error("element cannot be nil");var t=e.type,r=l.UNKNOWN;switch(t){case"text":case"email":case"search":r=l.TEXT;break;case"textarea":r=l.TEXTAREA;break;case"password":r=l.PASSWORD;break;case"submit":r=l.SUBMIT;break;case"image":r=l.IMAGE;break;case"button":r=l.BUTTON;break;case"checkbox":r=l.CHECKBOX;break;case"radio":r=l.RADIO;break;case"reset":r=l.RESET;break;case"file":r=l.FILE;break;case"hidden":r=l.HIDDEN;break;case"select":case"select-one":r=l.SELECT;break;case"tel":r=l.TELEPHONE;break;case"number":r=l.NUMBER;break;default:var n=[c.ON_CLICK,c.ON_SUBMIT,c.ON_MOUSE_DOWN,c.ON_MOUSE_UP,c.FORM_ACTION,c.COMMAND,c.HREF,c.ROLE];d.hasEventHandler(n,e)&&(r=l.EVENT_OBJECT)}return r},d.getTrimmedString=function(e){if(!o(e))throw new Error("text must be a string");e=e.toLowerCase();try{var t=new RegExp(["\\s","-","\\.","\\*","_","\\$","\\%","\\&",":","\\/",";",",","\\[","\\]","\\■","\\™","\\»","\\→","\\▼","\\>","\\#","\\+","\\!","\\?","\\（","\\）","\\※","\\＊"].join("|"),"g");e=e.replace(t,"")}catch(e){return null}return e},d.stripBegin=function(e,t){if(!o(e))throw new Error("text must be a string");if(!o(t))throw new Error("prefix must be a string");return e.startsWith(t)?e.substring(t.length,e.length):e},d.stripEnd=function(e,t){if(!o(e))throw new Error("text must be a string");if(!o(t))throw new Error("suffix must be a string");return e.endsWith(t)?e.substring(0,e.length-t.length):e},d.getMatchPropertiesByInputType=function(e){if(!o(e))throw new Error("inputType must be a string");switch(e){case l.UNKNOWN:return[h.NAME,h.ID,h.INNER_TEXT];case l.EVENT_OBJECT:return[h.INNER_TEXT,h.TITLE,h.ALTERNATIVE_TEXT,h.VALUE,h.NAME,h.ID,h.IMAGE_SRC,h.CLASS];case l.SUBMIT:case l.BUTTON:case l.IMAGE:return[h.INNER_TEXT,h.ALTERNATIVE_TEXT,h.TITLE,h.VALUE,h.NAME,h.ID,h.IMAGE_SRC,h.CLASS,h.ATTACHED_TEXT];case u.fieldCategory.EMAIL:return[h.INNER_TEXT,h.PLACE_HOLDER,h.ARIA_LABEL,h.AUTOCOMPLETE,h.INPUTMODE,h.NAME,h.CLASS,h.ID,h.NODE_TYPE,h.ACTION_DATA,h.TYPE];default:return[h.PLACE_HOLDER,h.ALTERNATIVE_TEXT,h.INNER_TEXT,h.NAME,h.TITLE,h.ID,h.ATTACHED_TEXT,h.VALUE,h.IMAGE_SRC,h.CLASS]}},d.isElementInsideRectangle=function(e,t){var r=e.getBoundingClientRect();return!(r.height>t.height||r.width>t.width)&&!(r.top<t.top||r.bottom>t.bottom||r.left<t.left||r.right>t.right)},d.isHtmlString=function(e){return 0===(e=e.trim()).indexOf("<")&&e.lastIndexOf(">")===e.length-1},d.isFormData=function(e){return e instanceof t.FormData},d.isAnyLoginField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==m.indexOf(e)},d.isAnyCardField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==g.indexOf(e)},d.isAnyPersonalInfoField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==y.indexOf(e)},d.isAnyInteractionField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==E.indexOf(e)},d.isAnyLoginFieldEx=function(e){if(!o(e))throw new Error("fieldType must be a string");return d.isAnyLoginField(e)||e===u.fieldType.UNKNOWN},d.isAnyLoginButtonField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==[u.fieldType.LOGIN_BUTTON,u.fieldType.CONTINUE_BUTTON,u.fieldType.OPEN_ID].indexOf(e)},d.isAnyChangePasswordButtonField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==[u.fieldType.CHANGE_PASSWORD_BUTTON,u.fieldType.APPLY_BUTTON,u.fieldType.UPDATE_BUTTON].indexOf(e)},d.isAnyLoginPasswordField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==[u.fieldType.PASSWORD,u.fieldType.PASSWORD_PLACEHOLDER].indexOf(e)},d.isAnyChangePasswordField=function(e){if(!o(e))throw new Error("fieldType must be a string");return-1!==[u.fieldType.VERIFY_PASSWORD,u.fieldType.NEW_PASSWORD].indexOf(e)},d.isAnyInputButtonType=function(e){if(!o(e))throw new Error("inputType must be a string");return-1!==[u.inputType.SUBMIT,u.inputType.IMAGE,u.inputType.BUTTON,u.inputType.AJAX_ACTION].indexOf(e)},d.isAnyChangePasswordFormType=function(e){if(i(e))return!1;if(!o(e))throw new Error("formType must be a string");return-1!==[u.groupType.CHANGE_PASSWORD_PAGE,u.groupType.LIMITED_CHANGE_PASSWORD_PAGE,u.groupType.PARTIAL_CHANGE_PASSWORD_PAGE].indexOf(e)},d.isOfFormType=function(e,r){if(!o(e))throw new Error("formType has to be of type string");const n=u.fieldsCombinationMapping[e];if(!a(n)||0===n.length)return!1;if(!(r instanceof t.WaxDom))throw new Error("waxDom must be of type WaxDom");const i=u.inputType.UNKNOWN;let s=r.getFieldMapping().filter((e=>e instanceof t.WaxInputField||e instanceof t.WaxSelectField)).filter((e=>e.getInputType()!==i&&e.getFieldType()!==i)),l=Array.from(new Set(s.map((e=>e.getFieldType()))));return!(e===u.groupType.REGISTRATION_PAGE&&!(e=>e.some((e=>e.toLowerCase().includes(u.fieldType.PASSWORD.toLowerCase()))))(l))&&n.some((e=>l.length===Array.from(new Set(l.concat(e))).length))},d.isRegExPatternMatched=function(e,t){if(!o(e)||!o(t))throw new Error("The input values cannot be nil");var r=!1;try{var n=new RegExp("^"+t+"$");r=s(e.match(n))}catch(e){return p.error(e),!1}return r},d.isFieldTypeMatched=function(e,t){if(!o(e)||!o(t))throw new Error("The input values cannot be nil");if(e===t)return!0;switch(t){case u.anyFieldTypes.ANY_LOGIN_FIELD:return d.isAnyLoginField(e);case u.anyFieldTypes.ANY_LOGIN_FIELD_EX:return d.isAnyLoginFieldEx(e);case u.anyFieldTypes.ANY_LOGIN_BUTTON:return d.isAnyLoginButtonField(e);case u.anyFieldTypes.ANY_CHANGE_PASSWORD_BUTTON:return d.isAnyChangePasswordButtonField(e);case u.anyFieldTypes.ANY_CHANGE_PASSWORD_FIELD:return d.isAnyChangePasswordField(e);case u.anyFieldTypes.ANY_LOGIN_PASSWORD_FIELD:return d.isAnyLoginPasswordField(e)}return d.isRegExPatternMatched(e,t)},d.isInputTypeMatched=function(e,t){if(!o(e)||!o(t))throw new Error("The input values cannot be nil");return e===t||(t===u.anyInputTypes.ANY_INPUT_BUTTON_TYPE?d.isAnyInputButtonType(e):d.isRegExPatternMatched(e,t))},d.isWaxField=function(e){return e instanceof t.WaxField},d.isInputElement=function(e){if(i(e)||!o(e.tagName))return!1;var t=e.tagName.toUpperCase();return t===u.htmlTagName.INPUT||t===u.htmlTagName.TEXTAREA||t===u.htmlTagName.SELECT},d.isInputTextElement=function(e){return e===u.inputType.TEXT||e===u.inputType.PASSWORD||e===u.inputType.TEXTAREA},d.isInputButtonElement=function(e){return e===u.inputType.SUBMIT||e===u.inputType.BUTTON||e==u.inputType.IMAGE},d.focusElement=function(e,t){if(!i(e)){var r=window.scrollX,n=window.scrollY;e.focus(),!0!==t&&window.scrollTo(r,n)}},d.clickElement=function(e){i(e)||(d.focusElement(e,!0),e.click())},d.blurElement=function(e){i(e)||e.blur()},d.isWaxDom=function(e){return e instanceof t.WaxDom},d.triggerCreateEvent=function(t,r,n){if(i(t)||i(r)||i(n))p.warn("Function parameters cannot be Nil");else if(e.utils.isFunction(document.createEvent)){var s=document.createEvent(r);s.initEvent(n,!0,!0),t.dispatchEvent(s)}else p.error("document.createEvent is not a function")},d.triggerNewCustomEvent=function(e,t){if(i(e)||i(t))p.warn("Function parameters cannot be Nil");else{var r=new Event(t);e.dispatchEvent(r)}},d.isWaxForm=function(e){return e instanceof t.WaxForm},d.isWaxLoginForm=function(e){return e instanceof t.WaxLoginForm},d.isWaxChangePasswordForm=function(e){return e instanceof t.WaxChangePasswordForm},d.isWaxForm=function(e){return e instanceof t.WaxForm},d.isWaxCardForm=function(e){return e instanceof t.WaxCardForm},d.isButtonField=function(e){if(!d.isWaxField(e))throw new Error("The argument should be a wax field");var t=e.getFieldType();if(i(t))return!1;switch(t){case u.fieldType.LOGIN_BUTTON:case u.fieldType.SIGNUP_BUTTON:case u.fieldType.CONTINUE_BUTTON:case u.fieldType.CHANGE_PASSWORD_BUTTON:case u.fieldType.SEARCH_BUTTON:case u.fieldType.SUBSCRIBE_BUTTON:case u.fieldType.APPLY_BUTTON:case u.fieldType.UPDATE_BUTTON:case u.anyFieldTypes.ANY_LOGIN_BUTTON:return!0}return!1},d.isElementVisibleOnViewPort=function(e){if(i(e))throw new Error("Element cannot be Nil");for(var t=e.getClientRects(),r=0,n=t.length;r<n;r++){var s=t[r];const n=[{x:s.left,y:s.top},{x:s.right,y:s.top},{x:s.left,y:s.bottom},{x:s.right,y:s.bottom},{x:(s.left+s.right)/2,y:(s.top+s.bottom)/2}];for(let t of n){let r=document.elementFromPoint(t.x,t.y);if(!i(r)){if(r.id===u.IN_PAGE_POPUP){let e=r,n=e.style.pointerEvents;e.style.pointerEvents="none",r=document.elementFromPoint(t.x,t.y),e.style.pointerEvents=n}if(r===e)return!0}}}return!1},d.isParentOffsetVisible=function(e){if(i(e))throw new Error("Element cannot be Nil");const t=e.tagName.toLowerCase(),r="body"!==t&&t!==u.htmlElementAttributes.FORM;if(r&&(e.offsetWidth<3||e.offsetHeight<3))return!1;if(r&&e.offsetLeft-e.offsetWidth>screen.width)return!1;if(r&&e.offsetWidth+e.offsetLeft<3)return!1;if(r&&e.offsetTop+e.offsetHeight<3)return!1;var n=e.offsetParent;return!n||d.isParentOffsetVisible(n)},d.isElementVisible=function(e,r){let n=t.formDataLoaderCS.getFormData().getParsePreference().getParseCriterias().indexOf(f.ALLOW_PAGE_PORT_VIEW)>-1;if(i(e))throw new Error("Element cannot be Nil");if(e.nodeType!==Node.ELEMENT_NODE)return!1;var s=window.getComputedStyle(e);if(!s)return!1;if("none"===s.display||"hidden"===s.visibility)return!1;if(s.opacity&&"radio"!==e.type){if(r&&"1"!==s.opacity)return!1;if("0"===s.opacity)return!1}return 0!==e.offsetWidth&&0!==e.offsetHeight&&(!!n||(!!d.isElementVisibleOnViewPort(e)||!!d.isParentOffsetVisible(e)))},d.isElementReadOnly=function(e){return!(!s(e)||!e.readOnly)},d.isValidElement=function(e,a){var o=t.formDataLoaderCS.getFormData().getParsePreference().getParseCriterias().indexOf(f.IGNORE_HIDDEN_INPUTS)>-1;if(i(e)||i(a))return!1;if(!0===o&&!1===d.isElementVisible(e))return!1;var u=a.right-a.left,l=a.bottom-a.top;if(0===u&&0===l)return!o;if(u<0||u>r||l<0||l>n)return!1;var c=!0;try{var h=e.getAttribute("type");s(h)&&"hidden"==h&&(c=!1)}catch(e){}return c},d.createFieldStylingElement=function(t,r,n,a){if(i(n))throw new Error("fieldStyling cannot be nil");if(i(n.DIV_ID))throw new Error("fieldStyling DIV_ID cannot be nil");if(i(n.Z_INDEX))throw new Error("fieldStyling Z_INDEX cannot be nil");if(i(n.IMG_PATH))throw new Error("fieldStyling IMG_PATH cannot be nil");if(i(n.IMG_ID))throw new Error("fieldStyling IMG_ID cannot be nil");if(d.isValidElement(t,t.getBoundingClientRect())){var o=d._getFieldStylingPosition(t,r,n),u=n.DIV_ID,l=o.height,c=o.width,h=o.top,p=o.left,f=n.Z_INDEX,g=document.createElement("div");g.setAttribute("id",u);var m="height:"+l+"px;";m=(m=(m=m+"max-width:"+c+"px;")+"vertical-align:top; position:absolute; top:"+h+"px;")+"left:"+p+"px;",m+="cursor:pointer;",m=(m+="resize: both;")+"z-index:"+f+";",g.setAttribute("style",m),g.addEventListener("click",(function(e){e.stopPropagation(),a()})),g.addEventListener("mousedown",(function(e){e.stopPropagation()})),g.addEventListener("mouseup",(function(e){e.stopPropagation()}));var y=e.extensionAdapter.getExtensionURL(n.IMG_PATH);if(s(y)){var E=document.createElement("img");E.setAttribute("id",n.IMG_ID),E.setAttribute("src",y),E.setAttribute("style","height:"+l+"px; max-width:"+c+"px;"),g.appendChild(E),t.insertAdjacentElement("afterend",g)}}},d.createActionableElement=function(e,t){let r=!1;d.isValidElement(e,e.getBoundingClientRect())&&(e.setAttribute("autocomplete","off"),e.addEventListener("click",(function(e){e.stopPropagation(),t()})),document.addEventListener("keydown",(function(e){e.stopPropagation(),!r&&e.key&&"tab"===e.key.toLowerCase()&&(r=!0)})),e.addEventListener("focus",(function(e){e.stopPropagation(),r&&(r=!1,t())})),e.addEventListener("mousedown",(function(e){e.stopPropagation()})),e.addEventListener("mouseup",(function(e){e.stopPropagation()})))},d._getFieldStylingPosition=function(e,t,r){let n=e=>/^body|html$/i.test(e),i=function(e,t){return window.getComputedStyle(e).getPropertyValue(t)},s=function(e){let t=function(e){let t=e.offsetParent||document.body;for(;t&&!n(t.tagName)&&"static"==i(t,"position");)t=t.offsetParent;return t}(e),r=n(t.tagName)?{top:-window.scrollY,left:0}:t.getBoundingClientRect(),s=e.getBoundingClientRect(),a=s.top-i(e,"marginTop")||0,o=s.left-i(e,"marginLeft")||0;return{top:a-(r.top+i(t,"borderTopWidth")||0),left:o-(r.left+i(t,"borderLeftWidth")||0)}}(e),a=s.top,o=s.left;var u=e.getBoundingClientRect();const l=u.height*r.DIV_HEIGHT_RATIO/r.DIV_HEIGHT_REC>=r.MAX_ICON_HEIGHT_WIDTH?r.MAX_ICON_HEIGHT_WIDTH:r.MIN_ICON_HEIGHT_WIDTH;var c=l,h=a+(u.height-l)/2;return{left:t?o+u.width*r.DIV_LEFT_RTL/r.DIV_WIDTH_REC:o+u.width*r.DIV_LEFT_LTR/r.DIV_WIDTH_REC-c,top:h,height:l,width:c}},d._getSiblingElements=e=>{if(!e.parentNode)return[];const t=e.parentNode.children;return Array.from(t).filter((t=>t!==e))},d._getLeftPositionIfElementExists=(e,t)=>{let r=e;const n=d._getSiblingElements(t);if(!n||0===n.length)return r;const i=n.find((e=>e.id===u.NORTON_PASSWORD_MANAGER_DIV_ID));return i?(r=r-i.offsetWidth-u.LEFT_POSITION_SPACING_DECREMENT_VALUE,r):r},d.getBadgePositionAndSizeForField=t=>{if(i(t))return null;const r=t.getElement();if(i(r))return null;if(!d.isValidElement(r,r.getBoundingClientRect()))return null;const n=e.uiUtils.isPageRTL(r),s=d._getFieldStylingPosition(r,n,u.FIELD_STYLING);let a=s.left;return a=d._getLeftPositionIfElementExists(a,r),{position:{position:"absolute",left:`${a}px`,top:`${s.top}px`},size:{"min-height":`${s.height}px`,width:`${s.width}px`}}},d.isEventObject=function(e){if(!d.isWaxField(e))throw new Error("The argument must be a wax field");var t=e.getInputType();if(i(t))return!1;if(t===u.inputType.EVENT_OBJECT)return!0;const r=e.getFieldType();return-1!=[u.fieldType.AJAX_ACTION,u.fieldType.CREDIT_CARD_TYPE,u.fieldType.BUTTON_ACTION,u.fieldType.CONTINUE_BUTTON].indexOf(r)||!(t!==u.inputType.UNKNOWN||!d.isAnyLoginButtonField(r))},d.isPtnInRect=function(e,t,r){if(i(e)||i(t)||i(r))throw new Error("The arguments should not be null");return e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom},d.Rect=function(e,t,r,n){if(i(e)||i(t)||i(r)||i(n))throw new Error("The arguments should not be null");this.left=e,this.top=t,this.right=r,this.bottom=n},d.Rect.prototype.getLeft=function(){return this.left},d.Rect.prototype.getTop=function(){return this.top},d.Rect.prototype.getRight=function(){return this.right},d.Rect.prototype.getBottom=function(){return this.bottom},d.Rect.prototype.getRect=function(){return this.left+","+this.top+","+this.right+","+this.bottom},d.getFillableElement=function(e,t){if(!i(e)&&!i(t)){var r=t.getBoundingClientRect(),n=(r.left+r.right)/2,s=(r.top+r.bottom)/2,a=e.elementFromPoint(n,s);d.focusElement(a);var o=e.elementFromPoint(n,s);return a===t&&a!==o&&d.isInputElement(o)?o:t}},d.getHtmlElementSiblings=function(e,t){if(i(e))return;let r=[];e=e.parentNode.firstChild;do{t&&!t(e)||d.isHtmlElement(e)&&r.push(e)}while(e=e.nextElementSibling);return r},d.isHtmlElement=function(e){return!i(e)&&e.nodeType===Node.ELEMENT_NODE},d.getWindowInnerHeight=function(){return window.innerHeight},d.getElementClientHeight=function(){return document.documentElement.clientHeight},d.getDocumentLanguages=function(){var e=Array.prototype.map,t=e=>s(e)&&""!==e;function r(e){return e.reduce(((e,t)=>[].concat(e,t))).filter((e=>s(e)))}function n(e){let t=e.split("-");if(1==t.length)return t;{let r=t.map((e=>e.trim())).map((e=>e.toLowerCase()));return r.unshift(e),r}}return d.getDocumentLanguages=function(){let i=document.documentElement.getAttribute("xml:lang")||document.documentElement.lang;if(""!==i)return function(e){let t=e.split(",");return 1==t.length?n(e):r(t.map((e=>e.trim())).map(n))}(i);let s=document.querySelectorAll("meta[http-equiv='content-language']");if(s.length>0){let i=e.call(s,(e=>e.getAttribute("content"))).filter(t);if(i.length>0)return r(i.map(n))}let a=document.querySelectorAll("meta[name='language']");if(a.length>0){let i=e.call(a,(e=>e.getAttribute("content"))).filter(t);if(i.length>0)return r(i.map(n))}let o=document.querySelectorAll("meta[lang]");if(o.length>0){let i=e.call(o,(e=>e.getAttribute("lang"))).filter(t);if(i.length>0)return r(i.map(n))}let l=[],c=new URLSearchParams(d.getWindowLocationSearch());return u.languageQueryParameterKeys.forEach((function(e){c.has(e)&&l.push(c.get(e))})),l.length>0?r(l.map(n)):[]},d.getDocumentLanguages()},d.getDocumentClientHeight=function(){return document.body.clientHeight},d.getWindowLocationSearch=function(){return window.location.search},d.getWindowInnerWidth=function(){return window.innerWidth},d.getElementClientWidth=function(){return document.documentElement.clientWidth},d.getDocumentClientWidth=function(){return document.body.clientWidth},d.getWindowHeight=function(){return d.getWindowInnerHeight()||d.getElementClientHeight()||d.getDocumentClientHeight()},d.getWindowWidth=function(){return d.getWindowInnerWidth()||d.getElementClientWidth()||d.getDocumentClientWidth()},d.getTrimmedPropertyValue=function(e){if(!o(e))throw new Error("text must be a string");e=e.toLowerCase();const t=["$",":",".","|"];let r=0;for(;s(t[r]);){let n=e.lastIndexOf(t[r]);-1!=n&&(e=e.substr(n+1)),r++}if(s(e)){let t=["textbox","textfield","txt","tbx","tb","ddl","dd","tx","cbo","fld","drop","billing","billto","bill","shipping","shipto","ship","customer","cust"],r=0;for(;s(t[r]);)e=e.replace(t[r],""),r++}return e},d}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.formDataFactory=function(e,t){var r=e.utils.isNil;const n=e.utils.isEmptyObject;var i=e.utils.isntNil,s=e.utils.isArray;const a=t.constants;var o={},u=function(){this._parsePreference={},this._rule={},this._engineRule={},this._global={},this._urlBasedData={},this._l10n={countries:[],attributes:[]}};return u.prototype.getParsePreference=function(){return this._parsePreference},u.prototype.getRule=function(){return this._rule},u.prototype.getEngineRule=function(){return this._engineRule},u.prototype.getGlobal=function(){return this._global},u.prototype.getUrlBasedData=function(){return this._urlBasedData},u.prototype.getL10nCountries=function(){return this._l10n.countries},u.prototype.getValidL10nCountries=function(){const e=this.getL10nCountries();return this._getValidFormData(e)},u.prototype.getL10nAttributes=function(){return this._l10n.attributes},u.prototype.getValidL10nAttributes=function(){const e=this.getL10nAttributes();return this._getValidFormData(e)},u.prototype._getValidFormData=function(e){return e.filter((e=>!n(e[a.DATA])&&!n(e[a.FIELD_TYPE])))},u.prototype.serialize=function(){return{parsePreference:this.getParsePreference().serialize(),rule:this.getRule(),engineRule:this.getEngineRule(),global:this.getGlobal(),urlBasedData:this.getUrlBasedData(),l10n:{countries:this.getL10nCountries(),attributes:this.getL10nAttributes()}}},u.prototype.setParsePreference=function(e){if(r(e))throw new Error("parsePreference cannot be nil");this._parsePreference=new t.ParsePreference(e)},u.prototype.setRule=function(e){if(r(e))throw new Error("rule cannot be nil");this._rule=e},u.prototype.setEngineRule=function(e){if(r(e))throw new Error("engine rule cannot be nil");this._engineRule=e},u.prototype.setGlobal=function(e){if(r(e))throw new Error("global cannot be nil");this._global=e},u.prototype.setUrlBasedData=function(e){if(r(e))throw new Error("urlBasedData cannot be nil");this._urlBasedData=e},u.prototype.setL10nCountries=function(e){if(!s(e))throw new Error("countries must be an array");this._l10n.countries=e},u.prototype.setL10nAttributes=function(e){if(!s(e))throw new Error("attributes must be an array");this._l10n.attributes=e},u.prototype.appendL10nCountries=function(e){if(!s(e))throw new Error("countries must be an array");this._l10n.countries=this._l10n.countries.concat(e)},u.prototype.appendL10nAttributes=function(e){if(!s(e))throw new Error("attributes must be an array");this._l10n.attributes=this._l10n.attributes.concat(e)},u.prototype.prependL10nCountries=function(e){if(!s(e))throw new Error("countries must be an array");this._l10n.countries=e.concat(this._l10n.countries)},u.prototype.prependL10nAttributes=function(e){if(!s(e))throw new Error("attributes must be an array");this._l10n.attributes=e.concat(this._l10n.attributes)},o.filterRegexInCountryData=function(e,r){const n=t.constants,i=r||[];return i.length>0?i.includes(n.fieldType.ALL)?e:e.map((e=>{const t=e[n.FIELD_TYPE];let r=[];i.forEach((e=>{let n=t.indexOf(e);n>-1&&r.push(n)}));let s=e[n.REGEX];return r.length>0?Object.keys(s).forEach((t=>{let i=s[t];r.includes(i)||delete e[n.REGEX][t]})):e[n.REGEX]={},e})):(e.map((e=>(e[n.REGEX]={},e))),e)},o.create=function(e){var t=new u;if(i(e)&&(i(e.parsePreference)&&t.setParsePreference(e.parsePreference),i(e.rule)&&t.setRule(e.rule),i(e.engineRule)&&!n(e.engineRule)&&t.setEngineRule(e.engineRule),i(e.global)&&t.setGlobal(e.global),i(e.urlBasedData)&&t.setUrlBasedData(e.urlBasedData),i(e.l10n))){if(s(e.l10n.countries)){const r=t.getParsePreference().getRegexEnabledFields()||[];let n=e.l10n.countries;r.length>0&&(n=o.filterRegexInCountryData(e.l10n.countries,r)),t.setL10nCountries(n)}s(e.l10n.attributes)&&t.setL10nAttributes(e.l10n.attributes)}return t},t.FormData=u,o}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";var t,r,n,i,s,a,o,u;e.SymWax.formDataLoaderCS=(t=e.SymBfw,r=e.SymWax,n=t.utils.isNil,i=t.utils.isntNil,s=r.utils.getDocumentLanguages,a=t.extensionAdapter,o=r.constants.messages,u={_formDataLoaderClient:null,registerFormDataLoaderClient:function(e){if(!(e instanceof r.IFormSubmissionClient))throw new Error("formDataClient has to be of type IFormSubmissionClient");u._formDataLoaderClient=e},loadFormData:async function(){if(i(u.formDataPromise))return u.formDataPromise;let e={senderURL:document.URL};i(u._formDataLoaderClient)&&(e=await u._formDataLoaderClient.processSubmissionPayload(e));let t=e.senderURL;return u.formDataPromise=new Promise((function(e,n){var i=s(),l={id:o.GET_URL_DATA,payload:{url:t,lang:i}};a.sendMessage(l,(function(t){u._formData=r.formDataFactory.create(t),e("form data loaded successfuly")}))})),u.formDataPromise},getFormData:function(){if(n(u._formData))throw new Error("Form data is not loaded. Load the Form Data then call getFormData");return u._formData}})}(window),function(e){"use strict";var t,r,n,i,s,a,o;e.SymWax.telemetryWrapper=(t=e.SymBfw,r=e.SymWax,n=t.utils.isString,i=t.telemetryConstants,s=r.constants,a=t.logger,o={sendWaxFillFailure:function(e){n(e)?o._send(s.telemetry.CATEGORY,s.telemetry.type.FILL_FAILURE,e):a.error("sendWaxFillFailure: siteName must be a string")},sendWaxFieldChanged:function(e){n(e)?o._send(s.telemetry.CATEGORY,s.telemetry.type.FIELD_CHANGED,e):a.error("sendWaxFieldChanged: siteName must be a string")},sendWaxFormFill:function(e,t){if(n(e)){var r=s.telemetry.CATEGORY,i=s.telemetry.type.FILL_SUCCESS+"-"+e;o._send(r,i,t+"")}else a.error("sendWaxFieldChanged: siteName must be a string")},_send:function(e,r,n){var s={};s[i.parameters.HIT_TYPE]=i.HIT_TYPE.EVENT,s[i.parameters.CATEGORY]=e,s[i.parameters.ACTION]=r,s[i.parameters.LABEL]=n,t.telemetryProxy.send(s)}})}(window),function(e){"use strict";e.SymWax.detectionTelemetryWrapper=function(e,t){e.utils.isString;const r=t.constants,n=e.logger,i=r.messages,s=e.utils.isNil,a=e.utils.isArray,o=e.extensionAdapter,u=e.utils.urlWithoutQueryParameters,l=r.telemetry.parameters;let c={prepareAndSend:function(e,t,r){if(s(e))return void n.error("prepareAndSend: parameter should be valid");if(s(r))return void n.error("prepareAndSend: eventtype parameter should be valid");let i={[l.TAG_NAME]:e.tagName,[l.INPUT_TYPE]:e.type,[l.ID]:e.id,[l.NAME]:e.name,[l.PLACE_HOLDER]:e.placeholder,[l.CLASS_NAME]:e.className,[l.FIELD_INNER_TEXT]:e.innerText};e.form&&(i[l.FORM_ID]=e.form.id,i[l.FORM_NAME]=e.form.name),i[l.URL]=u(document.location.href),a(t)&&t.length>0&&(i[l.FORM_TYPES]=t.join(",")),c._sendWaxDetectionTelemetry(i,r)},_sendWaxDetectionTelemetry:function(e,t){let r={id:i.SEND_WAX_TELEMETRY_TO_BG,payload:{customDimensions:e,eventType:t}};o.sendMessage(r)}};return c}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";!function(e,t){const{utils:{isNil:r,isntNil:n,isArray:i}}=e,s=t.constants,a=t.detectionTelemetryWrapper;class o{constructor(){this.formTypes=null}registerInputField(e){throw new Error("Should be implemented by derived object")}doesDomRequireObserver(e){throw new Error("Should be implemented by derived object")}boundInputElementFocusEvent(e){throw new Error("Should be implemented by derived object")}}t.DetectionFailureTelemetryObserver=class extends o{constructor(){super(),this.boundInputElementFocusEvent=this.boundInputElementFocusEvent.bind(this)}doesDomRequireObserver(e){return r(e.getFormType())&&e._inputFields.length>0&&n(a)}registerInputField(e){e.removeEventListener(s.eventType.ONFOCUS,this.boundInputElementFocusEvent,{once:!0}),e.addEventListener(s.eventType.ONFOCUS,this.boundInputElementFocusEvent,{once:!0})}boundInputElementFocusEvent(e){e.isTrusted&&(a.prepareAndSend(e.currentTarget,this.formTypes,s.telemetry.type.DETECTION_FAILURE),e.currentTarget.removeEventListener(s.eventType.ONFOCUS,this.boundInputElementFocusEvent,{once:!0}))}},t.FormTypeDetectionTelemetryObserver=class extends o{constructor(){super(),this.boundInputElementFocusEvent=this.boundInputElementFocusEvent.bind(this)}_isValidRegistrationForm(e){if(i(e)&&e.length<=0)return!1;return e.some((e=>e.includes(s.groupType.REGISTRATION_PAGE)||e.includes(s.groupType.ADDRESS_PAGE)))}doesDomRequireObserver(e){return!!(this._isValidRegistrationForm(e.getFormTypes())&&e._inputFields.length>0&&n(a))&&(this.formTypes=e.getFormTypes(),!0)}registerInputField(e){e.removeEventListener(s.eventType.ONFOCUS,this.boundInputElementFocusEvent,{once:!0}),e.addEventListener(s.eventType.ONFOCUS,this.boundInputElementFocusEvent,{once:!0})}boundInputElementFocusEvent(e){e.isTrusted&&(a.prepareAndSend(e.currentTarget,this.formTypes,s.telemetry.type.REG_ADDRESS_DETECTION),e.currentTarget.removeEventListener(s.eventType.ONFOCUS,this.boundInputElementFocusEvent,{once:!0}))}}}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.waxTelemetryListener=function(e,t){let r=t.DetectionFailureTelemetryObserver,n=t.FormTypeDetectionTelemetryObserver;const{utils:{isNil:i,isntNil:s}}=e,a=t.constants;return new class{constructor(){this._observers=[],this.initTelemetryConfig()}initTelemetryConfig(){"true"===a.telemetry.config.ENABLE_TELEMETRY&&("true"===a.telemetry.config.ENABLE_DETECTION_FAILURE_TELEMETRY&&this._observers.push(new r),"true"===a.telemetry.config.ENABLE_ADDRESS_DETECTION_TELEMETRY&&this._observers.push(new n))}_isValidInputField(e){if(i(e))return!1;let t=e.tagName.toUpperCase();return t!==a.htmlTagName.BUTTON&&t!==a.htmlTagName.IMG&&(!s(e.type)||e.type.toUpperCase()!==a.htmlTagName.BUTTON)}registerInputFieldObservers(e){let t=[];for(const r in this._observers)this._observers[r].doesDomRequireObserver(e)&&t.push(this._observers[r]);t.length<=0||e._inputFields.forEach((e=>{if(this._isValidInputField(e))for(const r in t)t[r].registerInputField(e)}))}}}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";var t,r,n,i,s,a,o,u;(e.SymWax=e.SymWax||{}).WaxField=(t=e.SymBfw,r=e.SymWax,n=r.constants,i=t.utils.isNil,s=t.utils.isFunction,t.utils.isString,a=r.utils,o=a.isInputElement,r.formDataLoaderCS,(u=function(){this._fieldType=null,this._loginFieldType=null,this._inputType=null,this._groupType=null,this._element=null,this._preGroupFieldType=null,this._submitEvents=null,this._categories=[]}).prototype.getFieldType=function(){return this._fieldType},u.prototype.getPreGroupFieldType=function(){return this._preGroupFieldType},u.prototype.getLoginFieldType=function(){return this._loginFieldType},u.prototype.getInputType=function(){return this._inputType},u.prototype.getGroupType=function(){return this._groupType},u.prototype.getElement=function(){return this._element},u.prototype.getSubmitEvents=function(){return this._submitEvents},u.prototype.getCategories=function(){return this._categories},u.prototype.addCategory=function(e){if(i(e))throw new Error("category cannot be null");this._categories.push(e)},u.prototype.setFieldType=function(e){if(i(e))throw new Error("fieldType cannot be nil");this._fieldType=e},u.prototype.setPreGroupFieldType=function(e){if(i(e))throw new Error("preGroupFieldType cannot be nil");this._preGroupFieldType=e},u.prototype.setLoginFieldType=function(e){if(i(e))throw new Error("loginFieldType cannot be nil");this._loginFieldType=e},u.prototype.setInputType=function(e){if(i(e))throw new Error("inputType cannot be nil");this._inputType=e},u.prototype.setGroupType=function(e){if(i(e))throw new Error("groupType cannot be nil");this._groupType=e},u.prototype.setElement=function(e){if(i(e))throw new Error("element cannot be nil");this._element=e},u.prototype.setSubmitEvents=function(e){if(i(e)||!Array.isArray(e))throw new Error("events cannot be nil and must be an array");this._submitEvents=e},u.prototype.fill=function(){throw new Error("Should be implemented by derived class")},u.prototype.findFillableElement=function(){return o(this._element)?a.getFillableElement(document,this._element):null},u.prototype.triggerChangeEvent=function(e,t,r){a.triggerCreateEvent(e,n.eventType.HTML_EVENTS,n.eventType.CHANGE),s(r)&&r({elementFilled:e,isElementChanged:e!==this._element,filledValue:t})},u)}(window),function(e){"use strict";var t,r,n,i,s,a,o;e.SymWax.Rule=(t=e.SymBfw,r=e.SymWax,n=t.utils,i=n.isNil,s=n.isString,a=r.constants,(o=function(e){if(i(e))throw new Error("ruleJSON cannot be null to create a Rule object");this._ruleJSON=e}).prototype._getRule=function(e){return!i(this._ruleJSON)&&s(e)&&this._ruleJSON.hasOwnProperty(e)?this._ruleJSON[e]:null},o.prototype.getPreParseRule=function(){return this._getRule(a.rules.PRE_PARSE)},o.prototype.getPostParseRule=function(){return this._getRule(a.rules.POST_PARSE)},o.prototype.getRuleScripts=function(){return this._getRule(a.rules.SCRIPTS)},o.prototype.getFetchCredentialsRule=function(){return this._getRule(a.rules.FETCH_CREDENTIALS)},o.prototype.getOnFieldFoundRule=function(){return this._getRule(a.rules.ON_FIELD_FOUND)},o.prototype.getOnFillRule=function(){return this._getRule(a.rules.ON_FILL)},o.prototype.getBeforeFillRule=function(){return this._getRule(a.rules.BEFORE_FILL)},o.prototype.getAfterFillRule=function(){return this._getRule(a.rules.AFTER_FILL)},o)}(window),function(e){"use strict";var t,r,n,i,s,a,o,u,l,c,h;e.SymWax.rulesEngine=(t=e.SymBfw,r=e.SymWax,n=t.utils,i=n.isNil,s=n.isFunction,a=n.isEmptyObject,o=t.utils.isntNil,u=r.constants,l=t.logger,c=r.utils,(h={credentials:{},variableContainer:{},_analyzeOnEventElements:[],_getRuleOperation:function(e){return i(e)||!e.hasOwnProperty(u.rules.OPERATION)?null:e[u.rules.OPERATION]},_getRuleProperty:function(e){return i(e)||!e.hasOwnProperty(u.rules.PROPERTY)?null:e[u.rules.PROPERTY]},_getRulePropertyAttributes:function(e){return!i(e)&&e.hasOwnProperty(u.rules.PROPERTY)&&e[u.rules.PROPERTY].hasOwnProperty(u.rules.property.ATTRIBUTES)?e[u.rules.PROPERTY][u.rules.property.ATTRIBUTES]:null},_getRuleFieldTypeProperty:function(e){return!i(e)&&e.hasOwnProperty(u.rules.PROPERTY)&&e[u.rules.PROPERTY].hasOwnProperty(u.rules.property.FIELD_TYPE)?e[u.rules.PROPERTY][u.rules.property.FIELD_TYPE]:null},_getRuleInputTypeProperty:function(e){return!i(e)&&e.hasOwnProperty(u.rules.PROPERTY)&&e[u.rules.PROPERTY].hasOwnProperty(u.rules.property.INPUT_TYPE)?e[u.rules.PROPERTY][u.rules.property.INPUT_TYPE]:null},_getRuleSubmitEventsProperty:function(e){return!i(e)&&e.hasOwnProperty(u.rules.PROPERTY)&&e[u.rules.PROPERTY].hasOwnProperty(u.rules.SUBMIT_EVENTS)?e[u.rules.PROPERTY][u.rules.SUBMIT_EVENTS]:null},_getRuleGroupTypeProperty:function(e){return!i(e)&&e.hasOwnProperty(u.rules.PROPERTY)&&e[u.rules.PROPERTY].hasOwnProperty(u.rules.property.GROUP_TYPE)?e[u.rules.PROPERTY][u.rules.property.GROUP_TYPE]:null},_getRuleLoginTypeProperty:function(e){return!i(e)&&e.hasOwnProperty(u.rules.PROPERTY)&&e[u.rules.PROPERTY].hasOwnProperty(u.rules.property.LOGIN_TYPE)?e[u.rules.PROPERTY][u.rules.property.LOGIN_TYPE]:null},_executeCallJavaScriptOperation:function(e,t){var r=h._getRuleProperty(e);if(!r.hasOwnProperty(u.rules.property.NAME))throw new Error("calljavascript type of operation expects a property object that has name of function to be called");if(!s(window[r[u.rules.property.NAME]]))return void l.error("could not find function to call for calljavascript type of operation. Rule : "+JSON.stringify(e));const n=window[r[u.rules.property.NAME]](t);return"waxFetchData"===r[u.rules.property.NAME]&&(h.credentials=n),n},_executeClickOperation:function(e){var t=h._getRuleProperty(e),r=null;if(t.hasOwnProperty(u.htmlElementAttributes.ID))return r=document.getElementById(t[u.htmlElementAttributes.ID]),i(r)?void l.error("could not find element for click operation. Rule : "+JSON.stringify(e)):void c.clickElement(r);if(t.hasOwnProperty(u.htmlElementAttributes.NAME)){var n=document.getElementsByName(t[u.htmlElementAttributes.NAME]);return i(n)?void l.error("could not find element for click operation. Rule : "+JSON.stringify(e)):(r=n[0],i(r)?void l.error("could not find element for click operation. Rule : "+JSON.stringify(e)):void c.clickElement(r))}},_executeAddEventHandler:function(e,t,r){h._getRuleProperty(t);const n=h._getRulePropertyAttributes(t);if(i(n)||a(n))return;const s=n.selectors;i(s)||0===s.length||s.forEach((n=>{const i=document.querySelectorAll(n);i&&[...i].forEach((n=>{if(h._analyzeOnEventElements.includes(n))return;const i=t[u.rules.DELAY_IN_MS]?t[u.rules.DELAY_IN_MS]:500;h._analyzeOnEventElements.push(n),n.addEventListener(e,(()=>{setTimeout((()=>{r()}),i)}))}))}))},_doesObjContainAttribute:function(e,t){if(i(e)||a(t))return!1;for(var r in t)if(t.hasOwnProperty(r)&&e[r]!==t[r])return!1;return!0},_executeGroupMappingOperation:function(e,t){for(var r=0;r<t.length;r++)if(u.rules.operation.GROUP_MAPPING===h._getRuleOperation(t[r])){var n=h._getRulePropertyAttributes(t[r]);if(h._doesObjContainAttribute(e._htmlForm,n))return e.setFormType(h._getRuleGroupTypeProperty(t[r])),!0}return!1},_executeFieldMappingOperation:function(e,t){for(var n=0;n<t.length;n++)if(u.rules.operation.FIELD_MAPPING===h._getRuleOperation(t[n])){var s=h._getRulePropertyAttributes(t[n]);if(h._doesObjContainAttribute(e,s)){var a=r.fieldMapping.createWaxFieldObject(e),c=h._getRuleFieldTypeProperty(t[n]);i(c)?l.error("could not set fieldType/inputType for rule : "+t[n]):(a.setFieldType(c),a.setPreGroupFieldType(c));var p=h._getRuleInputTypeProperty(t[n]);i(p)?a.setInputType(r.utils.getInputType(e)):a.setInputType(p);const s=h._getRuleSubmitEventsProperty(t[n]);o(s)&&a.setSubmitEvents(s);var f=h._getRuleLoginTypeProperty(t[n]);return o(f)&&a.setLoginFieldType(f),a.setElement(e),a}}return null},_executeFillExOperation:function(e,t){return i(e)||i(t)?(l.debug("Fill Ex operation parameter is null"),!1):(c.clickElement(t),c.focusElement(t),t.value=e,!0)},_executePostParseRule:function(e,t,n){for(var i=e.length,s=0;s<t.length;s++){var a=t[s];h._executeGroupMappingOperation(a,e)&&i--;var l,c=[];if(0===i)break;for(var p=a.getInputFields(),f=0;f<p.length;f++){var d=p[f];if(0===i)break;var g=d.getBoundingClientRect();r.utils.isValidElement(d,g)&&(l=h._executeFieldMappingOperation(d,e),o(l)&&(i--,c.push(l)))}for(var m=a.getNonInputFields(),y=0;y<m.length;y++){var E=m[y];if(0===i)break;l=h._executeFieldMappingOperation(E,e),o(l)&&(i--,c.push(l))}for(var v=0;v<e.length;v++){let t=null;switch(h._getRuleOperation(e[v])){case u.rules.operation.ADD_CLICK_HANDLER:t=u.eventType.CLICK;break;case u.rules.operation.ADD_RESIZE_HANDLER:t=u.eventType.RESIZE;break;case u.rules.operation.ADD_MOUSE_UP_HANDLER:t=u.eventType.MOUSEUP}t&&h._executeAddEventHandler(t,e[v],n)}a.setFieldMapping(c)}return t},applyPreParseRule:function(e){if(i(e))throw new Error("applyPreParseRule needs a rule object");var t=e.getPreParseRule();if(i(t))return;let r,n,s,a,l;t.forEach((function(e){if(r=h._getRuleOperation(e),n=h._getExecutionContext(e),o(n))s=h._getExecutionContextDelay(e),n===u.rules.SET_TIMEOUT?setTimeout((()=>{h.operationsMap[r](e)}),s):(a=h._getRetryIteration(e),l=setInterval((()=>{if(h.operationsMap[r](e),a--<=0)return clearInterval(l),void(l=0)}),s));else if(u.rules.operation.FILL_EX===h._getRuleOperation(e)){const t=h._getElementFromRule(e),r=t.element,n=t.attributesObj;o(r)&&h._executeFillExOperation(n.value,r)}else h.operationsMap[r](e)}))},applyPostParseRule:function(e,t,r){if(i(e)||i(t))throw new Error("applyPostParseRule did not get the right attributes");var n=e.getPostParseRule();if(!i(n))return h._executePostParseRule(n,t,r)},applyFetchCredentialsRule:function(e){if(i(e))throw new Error("applyFetchCredentialsRule needs a rule object");var t=e.getFetchCredentialsRule();if(i(t))return;let r;for(var n=0;n<t.length;n++)r=h._getRuleOperation(t[n]),h.operationsMap[r](t[n]);const s=Object.assign({},this.credentials);return this.credentials={},s},applyOnFieldFoundRule:function(e){if(i(e))throw new Error("applyOnFieldFoundRule needs a rule object");var t=e.getOnFieldFoundRule();if(!i(t))for(var r=0;r<t.length;r++)u.rules.operation.CALL_JAVA_SCRIPT===h._getRuleOperation(t[r])&&h._executeCallJavaScriptOperation(t[r])},applyOnFillRule:function(e,t,r){if(i(e))throw new Error("applyOnFillRule did not get the right attributes");var n=e.getOnFillRule();if(i(n))return;let s=r.getFieldType(),a=!1;for(var l=0;l<n.length;l++){if(h._getRuleProperty(n[l]).name!=s)continue;const e=h._getElementFromRule(n[l]),r=e.element,c=e.attributesObj;i(r)||(o(c)&&o(c.variableName)&&(h.variableContainer[c.variableName]=t),u.rules.operation.FILL_EX===h._getRuleOperation(n[l])?a=h._executeFillExOperation(t,r):u.rules.operation.SPLIT_FILL===h._getRuleOperation(n[l])&&o(c)&&(a=h._executeSplitFillOperation(t,r,c.index,c.seperator)))}return a},applyBeforeFillRule:function(e){if(i(e))throw new Error("applyBeforeFillRule needs a rule object");var t=e.getBeforeFillRule();if(!i(t))for(var r=0;r<t.length;r++)u.rules.operation.CLICK===h._getRuleOperation(t[r])&&h._executeClickOperation(t[r])},applyAfterFillRule:function(e){if(i(e))throw new Error("applyAfterFillRule needs a rule object");var t=e.getAfterFillRule();if(!i(t))for(var r=0;r<t.length;r++)u.rules.operation.UPDATE_ATTRIBUTE===h._getRuleOperation(t[r])&&h._executeUpdateAttributeOperation(t[r]),u.rules.operation.CALL_JAVA_SCRIPT===h._getRuleOperation(t[r])&&h._executeCallJavaScriptOperation(t[r])},_executeUpdateAttributeOperation:function(e){if(i(e))return;const t=h._getDomMethod(e);let r,n;if(o(t)&&(r=h._getRulePropertyAttributes(e)),o(r))for(let e=0;e<r.length;e++)n=h._getElementFromDom(t,r[e]),o(n)&&(n[r[e].attributeProperty]=r[e].value)},_getDomMethod:function(e){return i(e)||!e.hasOwnProperty(u.rules.DOM_METHOD)?null:e[u.rules.DOM_METHOD]},_getElementFromDom:function(e,t){if(i(e)||i(t))return null;let r;switch(e){case u.rules.domMethod.GET_ELEMENT_BY_ID:r=document.getElementById(t.id);break;case u.rules.domMethod.GET_ELEMENT_BY_NAME:r=document.getElementsByName(t.name)[t.index];break;case u.rules.domMethod.QUERY_SELECTOR_ALL:r=document.querySelectorAll(t.selectorAll)[t.index];break;case u.rules.domMethod.QUERY_SELECTOR:r=document.querySelector(t.selector)}return r},_executeFetchDataOperation:function(e){if(i(e))return;let t,r,n=h._getRulePropertyAttributes(e);e.hasOwnProperty(u.rules.DOM_METHOD)?(t=h._getDomMethod(e),o(n)&&o(t)&&(r=h._getElementFromDom(t,n)),o(r)&&(o(h.credentials[n.setValue])&&o(n.seperator)?h.credentials[n.setValue]+=n.seperator+r.value:h.credentials[n.setValue]=r.value)):h.credentials[n.setValue]=h.variableContainer[n.variableName]},_executeSplitFillOperation:function(e,t,r,n){if(i(e)||i(t))return l.debug("Fill Ex operation parameter is null"),!1;let s=e.split(n);return t.value=s[r],!0},_getExecutionContext:function(e){return i(e)||!e.hasOwnProperty(u.rules.EXECUTION_CONTEXT)?null:e[u.rules.EXECUTION_CONTEXT]},_getExecutionContextDelay:function(e){return i(e)||!e.hasOwnProperty(u.rules.DELAY)?null:e[u.rules.DELAY]},_getEventName:function(e){return i(e)||!e.hasOwnProperty(u.rules.EVENT_NAME)?null:e[u.rules.EVENT_NAME]},_getRetryIteration:function(e){return i(e)||!e.hasOwnProperty(u.rules.RETRY_ITERATION)?null:e[u.rules.RETRY_ITERATION]},_executeAddEventListenerOperation:function(e){if(i(e))return null;const t=h._getElementFromRule(e),r=t.element,n=t.attributesObj;let s=h._getEventName(e);o(r)&&s.forEach((function(e){r.addEventListener(e,(function(t){h.eventsMap[e](t,n)}))}))},_handleKeyupEvent:function(e,t){e.keyCode!==t.keyCode&&e.which!==t.which&&(h.variableContainer[t.variableName]=e.target[t.targetAttribute])},_handleChangeEvent:function(e,t){(i(t.isTrusted)||t.isTrusted===e.isTrusted)&&(h.variableContainer[t.variableName]=e.target[t.targetAttribute])},_handleInputEvent:function(e,t){(i(t.checkMaskedState)||!0===t.checkMaskedState&&e.target[t.targetAttribute].indexOf(String.fromCharCode(u.MASKED_PASSWORD_CHAR))<0)&&(h.variableContainer[t.variableName]=e.target[t.targetAttribute])},_handleFocusEvent:function(e,t){(i(t.checkMaskedState)||!0===t.checkMaskedState&&e.target[t.targetAttribute].indexOf(String.fromCharCode(u.MASKED_PASSWORD_CHAR))<0&&e.target[t.targetAttribute].length>0)&&(h.variableContainer[t.variableName]=e.target[t.targetAttribute])},_getElementFromRule:function(e){if(i(e))return null;const t=h._getDomMethod(e);let r,n;return o(t)&&(r=h._getRulePropertyAttributes(e)),o(r)&&(n=h._getElementFromDom(t,r)),{element:n,attributesObj:r}}}).operationsMap={[u.rules.operation.FILL_EX]:h._executeFillExOperation,[u.rules.operation.ADD_EVENT_LISTENER]:h._executeAddEventListenerOperation,[u.rules.operation.CLICK]:h._executeClickOperation,[u.rules.operation.FETCH_DATA]:h._executeFetchDataOperation,[u.rules.operation.CALL_JAVA_SCRIPT]:h._executeCallJavaScriptOperation},h.eventsMap={[u.eventType.KEYUP]:h._handleKeyupEvent,[u.eventType.CHANGE]:h._handleChangeEvent,[u.eventType.INPUT]:h._handleInputEvent,[u.eventType.ONFOCUS]:h._handleFocusEvent},h)}(window),function(e){"use strict";(e.SymWax=e.SymWax||{}).WaxDom=function(e,t){var r=e.utils.isNil,n=e.utils.isntNil,i=e.utils.isArray,s=e.utils.isFunction,a=t.constants,o=t.utils,u=e.logger;const l=600;var c=function(){this._formType=[],this._htmlForm=null,this._inputFields=[],this._inputFieldsForAttachedText=[],this._nonInputFields=[],this._fieldSets=[],this._fieldMapping=[],this._categorizedWaxFields=[],this._formSubmitListeners=[],this._formSubmitListenersParams=[],this._submitListenerTimeout=0,this._eventObjectWaxFields=[],this._eventObjectSubmitListeners=[],this._eventObjectSubmitListenerTimeout=0,this._formBoundary=new o.Rect(Number.MAX_VALUE,Number.MAX_VALUE,0,0),this._horizontalInputs=new Map};return c.prototype.getEventObjectWaxFields=function(){return this._eventObjectWaxFields},c.prototype.setEventObjectWaxFields=function(e){this._eventObjectWaxFields=e},c.prototype.removeFormType=function(e){const t=this._formType.indexOf(e);t>-1&&this._formType.splice(t,1)},c.prototype._resetFormTypes=function(){this._formType=[]},c.prototype.getFormType=function(){if(this._formType.length>0)return this._formType[0]},c.prototype.getTopRankedFormType=function(){if(this._formType.length>0){let e=e=>a.groupTypeRank.indexOf(e);return this._formType.reduce(((t,r)=>e(t)<e(r)?t:r))}return null},c.prototype.getFormTypes=function(){return this._formType},c.prototype.getHtmlForm=function(){return this._htmlForm},c.prototype.getInputFields=function(){return this._inputFields},c.prototype.getInputFieldsForAttachedText=function(){return this._inputFieldsForAttachedText},c.prototype.getNonInputFields=function(){return this._nonInputFields},c.prototype.getFieldSets=function(){return this._fieldSets},c.prototype.getFieldMapping=function(){return this._fieldMapping},c.prototype.setFormType=function(e){if(r(e))throw new Error("formType cannot by nil");this._formType.push(e)},c.prototype.setHtmlForm=function(e){if(r(e))throw new Error("htmlForm cannot by nil");this._htmlForm=e},c.prototype.setInputFields=function(e){if(!i(e))throw new Error("inputFields must be an array");this._inputFields=e},c.prototype.addToInputFields=function(e){if(r(e))throw new Error("inputField cannot be nil");this._inputFields.push(e),this._expandRect(e)},c.prototype.addToInputFieldsForAttachedText=function(e){if(r(e))throw new Error("inputField cannot be nil");this._inputFieldsForAttachedText.push(e)},c.prototype.setNonInputFields=function(e){if(!i(e))throw new Error("nonInputFields must be an array");this._nonInputFields=e},c.prototype.addToNonInputFields=function(e){if(r(e))throw new Error("nonInputField cannot be nil");this._nonInputFields.push(e)},c.prototype.setFieldSets=function(e){if(!i(e))throw new Error("fieldSets must be an array");this._fieldSets=e},c.prototype.addToFieldSets=function(e){if(r(e))throw new Error("fieldSet cannot be nil");this._fieldSets.push(e)},c.prototype.setFieldMapping=function(e){if(!i(e))throw new Error("fieldMapping must be an array");this._fieldMapping=e},c.prototype.ConcatFieldMapping=function(e){if(!i(e)||0===e.length)throw new Error("ConcatFieldMapping should be given an array input");this._fieldMapping=this._fieldMapping.concat(e)},c.prototype.setCategorizedWaxFields=function(e){if(!i(e))throw new Error("waxFields must be an array");this._categorizedWaxFields=e},c.prototype.getCategorizedWaxFields=function(){return this._categorizedWaxFields},c.prototype.setHorizontalInputs=function(e){if(r(e))throw new Error("horizontal inputs should not be null");this._horizontalInputs=e},c.prototype.getHorizontalInputs=function(){return this._horizontalInputs},c.prototype.propertiesDataCopy=function(){var e={};for(var t in this)if(this.hasOwnProperty(t)&&!s(t)){var r=this[t];e[t]={value:r,writable:!0}}return e},c.prototype.registerDOMEvents=function(e,t,n){if(r(e)||r(t))return;if(!s(n))return;[a.eventType.MOUSEDOWN,a.eventType.CLICK].includes(t)&&e.addEventListener(t,n)},c.prototype.removeDOMEvents=function(e,t,n){if(r(e)||r(t))return;if(!s(n))return;[a.eventType.MOUSEDOWN,a.eventType.CLICK].includes(t)&&e.removeEventListener(t,n)},c.prototype.registerFormSubmitEvent=function(e){this._boundSubmitListener=()=>this._onSubmitListener(),this._boundKeyDownListener=e=>this._onKeyDownListener(e),e.forEach((e=>{var t=e.getElement();if(!r(t))if(o.isButtonField(e)){const r=e.getSubmitEvents();r?r.forEach((e=>this.registerDOMEvents(t,e,this._boundSubmitListener))):this.registerDOMEvents(t,a.eventType.CLICK,this._boundSubmitListener)}else o.isInputElement(t)&&t.addEventListener(a.eventType.KEYDOWN,this._boundKeyDownListener)}));var t=this.getHtmlForm();n(t)&&t.addEventListener(a.eventType.SUBMIT,this._boundSubmitListener)},c.prototype.removeFormSubmitEvent=function(){this.getCategorizedWaxFields().forEach((e=>{var t=e.getElement();if(!r(t))if(o.isButtonField(e)){if(r(this._boundSubmitListener))return;const n=e.getSubmitEvents();n?n.forEach((e=>this.removeDOMEvents(t,e,this._boundSubmitListener))):this.removeDOMEvents(t,a.eventType.CLICK,this._boundSubmitListener)}else if(o.isInputElement(t)){if(r(this._boundKeyDownListener))return;t.removeEventListener(a.eventType.KEYDOWN,this._boundKeyDownListener)}}));var e=this.getHtmlForm();if(n(e)){if(r(this._boundSubmitListener))return;e.removeEventListener(a.eventType.SUBMIT,this._boundSubmitListener)}},c.prototype.isInsideForm=function(e){const t=e.getBoundingClientRect();let r=(t.right-t.left)/2+t.left,n=(t.bottom-t.top)/2+t.top;return!!o.isPtnInRect(r,n,this._formBoundary)},c.prototype._onSubmitListener=function(){0!==this._submitListenerTimeout&&(clearTimeout(this._submitListenerTimeout),this._submitListenerTimeout=0),this._submitListenerTimeout=setTimeout((()=>{this._formSubmitListeners.forEach(((e,t)=>{try{e(this._formSubmitListenersParams[t])}catch(e){u.error(e)}}))}),a.FORM_SUBMIT_TIMEOUT)},c.prototype._onKeyDownListener=function(e){e.which!==a.keyCode.ENTER&&e.keyCode!==a.keyCode.ENTER||this._onSubmitListener()},c.prototype.addFormSubmitListener=function(e,t){if(!s(e))throw new Error("callback should be a function");this._formSubmitListeners.push(e),this._formSubmitListenersParams.push(t)},c.prototype._registerEventObjectSubmitEvent=function(){this._boundEventObjectSubmitListener=()=>this._onEventObjectSubmitListener(),this._eventObjectWaxFields.forEach((e=>{var t=e.getElement();if(r(t))return;let n=this._getEventsTypesToListen(e);if(n)for(let e of n)t.addEventListener(e,this._boundEventObjectSubmitListener)}))},c.prototype._onEventObjectSubmitListener=function(){0!==this._eventObjectSubmitListenerTimeout&&(clearTimeout(this._eventObjectSubmitListenerTimeout),this._eventObjectSubmitListenerTimeout=0),this._eventObjectSubmitListenerTimeout=setTimeout((()=>{this._eventObjectSubmitListeners.forEach((e=>{try{e()}catch(e){u.error(e)}}))}),a.EVENT_OBJECT_SUBMIT_TIMEOUT)},c.prototype.removeEventObjectSubmitEvent=function(){this._eventObjectWaxFields.forEach((e=>{var t=e.getElement();r(t)||(t.removeEventListener(a.eventType.CLICK,this._boundEventObjectSubmitListener),t.removeEventListener(a.eventType.MOUSE_OVER,this._boundEventObjectSubmitListener))}))},c.prototype.addEventObjectSubmitListener=function(e){if(!s(e))throw new Error("callback should be a function");this._eventObjectSubmitListeners.push(e),this._registerEventObjectSubmitEvent()},c.prototype.determineFormTypes=function(){let e=!1,t=!1,r=!1;const n=this.getFieldMapping();for(let i in n){let s=n[i],u=s.getFieldType(),l=s.getPreGroupFieldType();if(e||o.isAnyCardField(u)&&o.isInputElement(s.getElement())&&(this.setFormType(a.groupType.CARDS_PAGE),e=!0),t||(o.isAnyPersonalInfoField(u)||u!=l&&o.isAnyPersonalInfoField(l))&&o.isInputElement(s.getElement())&&(this.setFormType(a.groupType.PERSONAL_INFO_PAGE),t=!0),r||o.isAnyInteractionField(u)&&o.isInputElement(s.getElement())&&(this.setFormType(a.groupType.INTERACTION_PAGE),r=!0),e&&t)break}!this.getFormTypes().includes(a.groupType.REGISTRATION_PAGE)&&o.isOfFormType(a.groupType.REGISTRATION_PAGE,this)&&this.setFormType(a.groupType.REGISTRATION_PAGE),o.isOfFormType(a.groupType.ADDRESS_PAGE,this)&&this.setFormType(a.groupType.ADDRESS_PAGE)},c.prototype._expandRect=function(e){const t=e.getBoundingClientRect();0==t.height&&0==t.width||(t.left<this._formBoundary.left&&(this._formBoundary.left=t.left-l>0?t.left-l:0),t.top<this._formBoundary.top&&(this._formBoundary.top=t.top-l>0?t.top-30:0),t.right>this._formBoundary.right&&(this._formBoundary.right=t.right+l),t.bottom>this._formBoundary.bottom&&(this._formBoundary.bottom=t.bottom+30))},c.prototype._getEventsTypesToListen=function(e){const t=e.getFieldType();let r={[a.fieldType.AJAX_ACTION]:[a.eventType.CLICK,a.eventType.MOUSE_OVER],[a.fieldType.BUTTON_ACTION]:[a.eventType.CLICK],[a.fieldType.CONTINUE_BUTTON]:[a.eventType.CLICK]}[t];if(r)return r;const n=e.getInputType();return{[a.inputType.BUTTON]:[a.eventType.CLICK],[a.inputType.RADIO]:[a.eventType.CLICK],[a.inputType.SELECT]:[a.eventType.CHANGE],[a.inputType.EVENT_OBJECT]:[a.eventType.CLICK,a.eventType.MOUSE_OVER]}[n]},c}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.WaxForm=function(e,t){const r=t.utils.isWaxDom,n=e.utils.isString,i=e.utils.isntNil,s=t.utils;var a=function(e,t){if(!n(t))throw new Error("parameter should be of type string");if(this._formType=t,this._waxDom=null,this._isRegisterdForListerners=!1,this._popupWaxField=null,!r(e))throw new Error("parameter should be of type WaxDom");this._waxDom=e};return a.prototype.init=function(){},a.prototype._setInputElementForPopup=function(){this._popupWaxField=null;const e=this._getInputElementsForPopup();for(let r=0;r<e.length;r++)if(t.utils.isElementVisible(e[r].getElement()))return void(this._popupWaxField=e[r])},a.prototype.canDisplayPopup=function(){return!!this._popupWaxField},a.prototype.getInputElementForPopup=function(){return this._popupWaxField||this._setInputElementForPopup(),this._popupWaxField},a.prototype._getInputElementsForPopup=function(){return[]},a.prototype.getFieldsForStyling=function(){throw new Error("Should be implemented by derived object")},a.prototype.captureData=function(){throw new Error("Should be implemented by derived object")},a.prototype.fillForm=function(){throw new Error("Should be implemented by derived object")},a.prototype.registerFormSubmitEvent=function(e){this._waxDom.registerFormSubmitEvent(e),this._isRegisterdForListerners=!0},a.prototype.unregisterFormSubmitEvent=function(){this._isRegisterdForListerners&&(this._waxDom.removeFormSubmitEvent(),this._isRegisterdForListerners=!1)},a.prototype._addFormSubmitListener=function(){this._waxDom.addFormSubmitListener(t.main._processSubmittedForm,this)},a.prototype.getHtmlForm=function(){return this._waxDom._htmlForm},a.prototype.isFormComplete=function(){throw new Error("Should be implemented by derived object")},a.prototype.getCategorizedWaxFields=function(){return this._waxDom.getCategorizedWaxFields()},a.prototype.getFormType=function(){return this._formType},a.prototype.setMutationObserver=function(){throw new Error("Should be implemented by derived object")},a.prototype._getFieldsVisibility=function(e){var t=[];return e.forEach((function(e){var r={visible:!1,readOnly:!1};if(i(e)){const t=e.getElement();i(t)&&(s.isElementVisible(t)&&(r.visible=!0),s.isElementReadOnly(t)&&(r.readOnly=!0))}t.push(r)})),t},a.prototype._getHtmlElements=function(e){let t=[];return e.forEach((function(e){if(i(e)){const r=e.getElement();i(r)&&t.push(r)}})),t},a.prototype.addObserverToElements=function(e,t,r){e.forEach((function(e){t.observe(e,r)}))},a.prototype.addObserverToForm=function(e,t){const r=this._waxDom.getHtmlForm();return!!i(r)&&(e.observe(r,t),!0)},a.prototype.addObserverToElementsForm=function(e,t,r){for(let n=0;n<e.length;n++){const s=e[n];if(i(s.form)){t.observe(s.form,r);break}}},a.prototype.removeHiddenFields=function(e){let t=[];return e.forEach((function(e){if(i(e)){const r=e.getElement();i(r)&&s.isElementVisible(r)&&t.push(e)}})),t},a}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.WaxSelectField=function(e,t){const r=e.utils.isntNil,n=t.constants,i=(t.utils.isInputElement,t.utils),s=(e.logger,e.utils.isNil),a=e.utils.isString;e.utils.isFunction;var o=t.formDataLoaderCS,u=function(){t.WaxField.call(this)};return(u.prototype=Object.create(t.WaxField.prototype))._findYearIndex=function(e){let t=[];var r=-1,n=0;for(n=0;n<this._element.options.length;n++){var i=this._element.options[n].text;t.push(i)}return t.indexOf(e)>-1?r=t.indexOf(e):t.indexOf(e.substr(-2))>-1&&(r=t.indexOf(e.substr(-2))),r},u.prototype._findMonthIndex=function(e){var t=0;if(s(this._element.options)||s(this._element.options[0]))return-1;var r=this._element.options[0].text;return r&&(isNaN(r)?r.toLowerCase().indexOf("jan")>=0&&(t=1):t=1),e-t},u.prototype.fill=function(e,s){if(!a(e))return!1;var u=this.findFillableElement(),l=o.getFormData(),c=l.getParsePreference().getParseCriterias(),h=-1,p=l.getRule();if(r(p)){var f=new t.Rule(p);t.rulesEngine.applyBeforeFillRule(f)}switch(this._fieldType){case n.fieldType.CREDIT_CARD_EXPIRATION_YEAR:case n.fieldType.YEAR:h=this._findYearIndex(e);break;case n.fieldType.CREDIT_CARD_EXPIRATION_MONTH:case n.fieldType.MONTH:h=this._findMonthIndex(e)}return c.indexOf(n.parseCriterias.LOGIN_EVENT_REPLAY)>-1||c.indexOf(n.parseCriterias.CARDS_EVENT_REPLAY)>-1?(i.triggerNewCustomEvent(u,n.eventType.ONFOCUS),u.selectedIndex=h,i.blurElement(u)):u.selectedIndex=h,this.triggerChangeEvent(u,e,s),!0},u}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.WaxInputField=function(e,t){const r=e.utils.isntNil,n=t.constants,i=(t.utils.isInputElement,t.utils),s=e.logger,a=e.utils.isNil,o=e.utils.isString;e.utils.isFunction;var u=t.formDataLoaderCS,l=function(){t.WaxField.call(this)};return(l.prototype=Object.create(t.WaxField.prototype)).fill=function(e,s){if(!o(e))return!1;var a=this.findFillableElement(),c=u.getFormData(),h=c.getParsePreference(),p=h.getParseCriterias(),f=c.getRule();if(r(f)){var d=new t.Rule(f);t.rulesEngine.applyBeforeFillRule(d)}switch(this._fieldType){case n.fieldType.CREDIT_CARD_EXPIRATION_DATE:e=(new t.ExpirationDateFormat).getFormattedExpDate(this._element,e);break;case n.fieldType.CREDIT_CARD_EXPIRATION_MONTH:case n.fieldType.MONTH:Number(e)<10&&(e="0"+e);break;case n.fieldType.CREDIT_CARD_EXPIRATION_YEAR:e=(new t.ExpirationDateFormat).getFormattedYear(this._element,e)}return p.indexOf(n.parseCriterias.LOGIN_EVENT_REPLAY)>-1||p.indexOf(n.parseCriterias.CARDS_EVENT_REPLAY)>-1?(i.triggerNewCustomEvent(a,n.eventType.ONFOCUS),a.value=e,l.triggerPostFillEventsOnElement(a,h),i.blurElement(a)):(a.value=e,l.triggerPostFillEventsOnElement(a,h)),this.triggerChangeEvent(a,e,s),!0},l.triggerPostFillEventsOnElement=function(e,t){if(a(e))return void s.warn("Element cannot be Null");i.triggerNewCustomEvent(e,n.eventType.INPUT);const r=t.getCustomEventsAfterFill();if(0!=r.length)for(let t of r)for(const[r,n]of Object.entries(t))i.triggerCreateEvent(e,r,n)},l}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.ExpirationDateFormat=function(e,t){const r=e.utils.isntNil,n=t.constants,i=t.utils,s=(e.logger,e.utils.isNil);var a=function(){};return a.prototype.getFormattedExpDate=function(e,t){let n=null;if(s(e)||s(t))return n;if(5===t.length&&(t="0"+t),n=this._applyExpDateFormat(e,t),s(n)){let s=i.getHtmlElementSiblings(e),a=s.length;for(let e=0;e<a;e++){let i=s[e];if(n=this._applyExpDateFormat(i,t),r(n))break}}return s(n)&&(n=t.slice(0,2)+"/"+t.slice(-2)),n},a.prototype.getFormattedYear=function(e,t){if(s(e)||s(t))return null;if(4!==t.length)return t;const n=["YYYY","YY"];let i=n.find((t=>this._isFormatFoundInElement(e,t)));return s(i)&&(i=n.find((r=>this._doesYearValueMatchConstraints(e,t.slice(-r.length))))),r(i)?t.slice(-i.length):t},a.prototype._isFormatFoundInElement=function(e,t){if(this.findExpDateFormat(e,t))return!0;return i.getHtmlElementSiblings(e).some((e=>this.findExpDateFormat(e,t)))},a.prototype._doesYearValueMatchConstraints=function(e,t){const i=Number(e.getAttribute(n.htmlElementAttributes.MAXLENGTH));if(i>0&&i<=4)return t.length===i;const s=e.getAttribute(n.htmlElementAttributes.PATTERN);if(r(s)){const e=t.match(s);if(e&&e[0]===t)return!0}return!1},a.prototype._applyExpDateFormat=function(e,t){let r=null;if(s(e)||s(t))return r;let n=t.slice(0,2),i=t.slice(-4);return this.findExpDateFormat(e,"mm/yyyy")?r=n+"/"+i.slice(-4):this.findExpDateFormat(e,"mm/yy")&&(r=n+"/"+i.slice(-2)),r},a.prototype.findExpDateFormat=function(e,t){if(s(e)||s(t))return!1;var n={};for(var i in n.placeholder=e.getAttribute("placeholder"),n.dataPlaceholder=e.getAttribute("data-placeholder"),n.textContent=e.textContent,n)if(n.hasOwnProperty(i)){let e=n[i];if(r(e)&&-1!==e.replace(/\s/g,"").toLowerCase().indexOf(t.toLowerCase()))return!0}return!1},a}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";var t,r,n,i,s,a,o;e.SymWax.WaxInteractionForm=(t=e.SymBfw,r=e.SymWax,n=r.utils.isWaxField,t.utils.isntNil,i=r.constants,s=r.utils.isInputElement,r.utils,a=t.logger,((o=function(e,t){r.WaxForm.call(this,e,t),this._OTP=null,this._OTPWaxField=null}).prototype=Object.create(r.WaxForm.prototype)).init=function(){this._waxDom.getFieldMapping().forEach((e=>{if(!s(e.getElement()))return;let t=e.getFieldType(),r=e.getPreGroupFieldType();t!==i.fieldType.OTP&&r!==i.fieldType.OTP||(this.setOTPWaxField(e),a.debug("****OTP Field detected - Id: "+e.getElement().id+"\n"))}))},o.prototype.getOTPWaxField=function(){return this._OTPWaxField},o.prototype.setOTPWaxField=function(e){if(!n(e))throw new Error("OTP wax field must be a wax field");this._OTPWaxField=e},o.prototype.getInputElementForLoginPopup=function(){return null},o.prototype.getFieldsForStyling=function(){return[]},o.prototype.isFormComplete=function(){return!0},o)}(window),function(e){"use strict";var t,r,n,i,s,a,o;e.SymWax.WaxPersonalInfoForm=(t=e.SymBfw,r=e.SymWax,n=r.utils.isWaxField,t.utils.isntNil,i=r.constants,s=r.utils.isInputElement,r.utils,a=t.logger,((o=function(e,t){r.WaxForm.call(this,e,t),this._accountNumber=null,this._SSN=null,this._accountNumberWaxField=null,this._SSNWaxField=null}).prototype=Object.create(r.WaxForm.prototype)).init=function(){this._waxDom.getFieldMapping().forEach((e=>{if(!s(e.getElement()))return;let t=e.getFieldType(),r=e.getPreGroupFieldType();t===i.fieldType.ACCOUNT_NUMBER||r===i.fieldType.ACCOUNT_NUMBER?(this.setAccountNumberWaxField(e),a.debug("*****Account Number detected - Id: "+e.getElement().id+"\n")):t!==i.fieldType.SSN&&r!==i.fieldType.SSN||(this.setSSNWaxField(e),a.debug("****SSN Field detected - Id: "+e.getElement().id+"\n"))}))},o.prototype.getAccountNumberWaxField=function(){return this._accountNumberWaxField},o.prototype.setAccountNumberWaxField=function(e){if(!n(e))throw new Error("account number wax field must be a wax field");this._accountNumberWaxField=e},o.prototype.getSSNWaxField=function(){return this._SSNWaxField},o.prototype.setSSNWaxField=function(e){if(!n(e))throw new Error("SSN wax field must be a wax field");this._SSNWaxField=e},o.prototype.getInputElementForLoginPopup=function(){return null},o.prototype.getFieldsForStyling=function(){return[]},o.prototype.isFormComplete=function(){return!0},o)}(window),function(e){"use strict";e.SymWax.WaxCardForm=function(e,t){const r=t.utils.isWaxField,n=e.utils.isntNil,i=t.constants,s=(t.utils.isInputElement,t.utils),a=e.logger,o=e.utils.isNil,u=e.utils.isString,l=e.utils.isFunction;var c=function(e,r){t.WaxForm.call(this,e,r),this._name=null,this._firstName=null,this._lastName=null,this._number=null,this._expirationMonth=null,this._expirationYear=null,this._nameWaxField=null,this._firstNameWaxField=null,this._lastNameWaxField=null,this._numberWaxField=null,this._expirationMonthWaxField=null,this._expirationYearWaxField=null,this._expirationDateWaxField=null,this._formFiller=t.formFiller};return(c.prototype=Object.create(t.WaxForm.prototype))._printFormFields=function(){a.debug("----------Print Card Fields for form------------- \n"),n(this._expirationMonthWaxField)&&a.debug("Field Type for Month : "+this._expirationMonthWaxField.getFieldType()+"\n"),n(this._expirationYearWaxField)&&a.debug("Field Type for Year : "+this._expirationYearWaxField.getFieldType()+"\n"),o(this._expirationMonthWaxField)&&o(this._expirationYearWaxField)&&n(this._expirationDateWaxField)&&a.debug("Field Type for Date : "+this._expirationDateWaxField.getFieldType()+"\n"),n(this._numberWaxField)&&a.debug("Field Type for Number : "+this._numberWaxField.getFieldType()+"\n"),n(this._nameWaxField)&&a.debug("Field Type for Name : "+this._nameWaxField.getFieldType()+"\n"),a.debug("----------End Of Print Card Fields for form------------- \n")},c.prototype._isPotentialCardCandidate=function(e){const t=e.getFieldType(),r=e.getInputType();return-1!=[i.inputType.TELEPHONE,i.inputType.NUMBER,i.inputType.TEXT,i.inputType.SELECT,i.inputType.TEXTAREA,i.inputType.CUSTOM_FILL].indexOf(r)&&(!!s.isAnyCardField(t)||-1!==[i.fieldType.FIRST_NAME,i.fieldType.LAST_NAME,i.fieldType.MONTH,i.fieldType.YEAR].indexOf(t))},c.prototype.init=function(){let e=this._waxDom.getFieldMapping(),t=[];for(let r of e){if(!this._isPotentialCardCandidate(r))continue;switch(r.getFieldType()){case i.fieldType.CREDIT_CARD_HOLDER_NAME:this.setCreditCardHolderNameWaxField(r),t.push(r);break;case i.fieldType.CREDIT_CARD_HOLDER_FIRST_NAME:this.setCreditCardHolderFirstNameWaxField(r),t.push(r);break;case i.fieldType.CREDIT_CARD_HOLDER_LAST_NAME:this.setCreditCardHolderLastNameWaxField(r),t.push(r);break;case i.fieldType.CREDIT_CARD_NUMBER:this.setCreditCardNumberWaxField(r),t.push(r);break;case i.fieldType.CREDIT_CARD_EXPIRATION_MONTH:case i.fieldType.MONTH:this.setCreditCardExpirationMonthWaxField(r),t.push(r);break;case i.fieldType.CREDIT_CARD_EXPIRATION_YEAR:case i.fieldType.YEAR:this.setCreditCardExpirationYearWaxField(r),t.push(r);break;case i.fieldType.CREDIT_CARD_EXPIRATION_DATE:this.setCreditCardExpirationDateWaxField(r),t.push(r)}}this._waxDom.setCategorizedWaxFields(t),this._setInputElementForPopup(),this._printFormFields()},c.prototype.getCardHolderName=function(){return this._name},c.prototype.getCardHolderFirstName=function(){return this._firstName},c.prototype.getCardHolderLastName=function(){return this._lastName},c.prototype.getCardNameWaxField=function(){return this._nameWaxField},c.prototype.getCardNumber=function(){return this._number},c.prototype.getCardNumberWaxField=function(){return this._numberWaxField},c.prototype.getCardExpirationYearWaxField=function(){return this._expirationYearWaxField},c.prototype.getCardExpirationMonthWaxField=function(){return this._expirationMonthWaxField},c.prototype.getCardExpirationDateWaxField=function(){return this._expirationDateWaxField},c.prototype.setCreditCardHolderNameWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._nameWaxField=e},c.prototype.setCreditCardHolderFirstNameWaxField=function(e){if(!r(e))throw new Error("waxField argument must be a WaxField type");this._firstNameWaxField=e},c.prototype.setCreditCardHolderLastNameWaxField=function(e){if(!r(e))throw new Error("waxField argument must be a WaxField type");this._lastNameWaxField=e},c.prototype.setCardHolderName=function(e){if(!u(e))throw new Error("cardHolderName must be a string");this._name=e},c.prototype.setFirstName=function(e){if(!u(e))throw new Error("firstName must be a string");this._firstName=e},c.prototype.setLastName=function(e){if(!u(e))throw new Error("lastName must be a string");this._lastName=e},c.prototype._parseFirstName=function(e){const[t]=e.split(" ");return t},c.prototype._parseLastName=function(e){const t=e.split(" ");return t[t.length-1]},c.prototype.setExpirationMonth=function(e){if(!n(e))throw new Error("expiry month can't be nil");this._expirationMonth=e},c.prototype.setExpirationYear=function(e){if(!n(e))throw new Error("expiry year can't be NIL");this._expirationYear=e},c.prototype.setCreditCardNumberWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._numberWaxField=e},c.prototype.setCardNumber=function(e){if(!u(e))throw new Error("cardNumber must be a string");this._number=e},c.prototype.setCreditCardExpirationMonthWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._expirationMonthWaxField=e},c.prototype.setCreditCardExpirationYearWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._expirationYearWaxField=e},c.prototype.setCreditCardExpirationDateWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._expirationDateWaxField=e},c.prototype._getInputElementsForPopup=function(){let e=[];if(n(this._nameWaxField)){const t=this._nameWaxField.getElement();n(t)&&e.push(this._nameWaxField)}if(n(this._firstNameWaxField)){const t=this._firstNameWaxField.getElement();n(t)&&e.push(this._firstNameWaxField)}if(n(this._lastNameWaxField)){const t=this._lastNameWaxField.getElement();n(t)&&e.push(this._lastNameWaxField)}if(n(this._numberWaxField)){const t=this._numberWaxField.getElement();n(t)&&e.push(this._numberWaxField)}return e},c.prototype.getFieldsForStyling=function(){let e=[this._numberWaxField,this._nameWaxField,this._firstNameWaxField,this._lastNameWaxField];return this.removeHiddenFields(e)},c.prototype.isFormComplete=function(){return!(o(this._numberWaxField)&&o(this._nameWaxField)&&o(this._firstNameWaxField)&&o(this._lastNameWaxField))},c.prototype.fillForm=function(e,t){if(o(e))return!1;if(!l(t))return!1;const r=n(this._numberWaxField)&&n(e.cardNumber),i=n(this._nameWaxField)&&n(e.nameOnCard),s=n(this._firstNameWaxField)&&n(e.nameOnCard),a=n(this._lastNameWaxField)&&n(e.nameOnCard),u=n(this._expirationMonthWaxField)&&n(e.expMonth),c=n(this._expirationYearWaxField)&&n(e.expYear),h=n(this._expirationDateWaxField)&&n(e.expMonth)&&n(e.expYear);if(!(r||i||u||c||h||s||a))return!1;let p=!0,f=!0;if(r&&(this.setCardNumber(e.cardNumber),p=this._numberWaxField.fill(this._number,t)),i&&(this.setCardHolderName(e.nameOnCard),p=p&&this._nameWaxField.fill(this._name,t)),s){const r=this._parseFirstName(e.nameOnCard);this.setFirstName(r),p=p&&this._firstNameWaxField.fill(this._firstName,t)}if(a){const r=this._parseLastName(e.nameOnCard);this.setLastName(r),p=p&&this._lastNameWaxField.fill(this._lastName,t)}if(u&&(f=this._formFiller.applyOnFillRule(e.expMonth,this._expirationMonthWaxField)),f||(this.setExpirationMonth(e.expMonth),p=p&&this._expirationMonthWaxField.fill(this._expirationMonth,t)),c&&(f=this._formFiller.applyOnFillRule(e.expYear,this._expirationYearWaxField)),f||(this.setExpirationYear(e.expYear),p=p&&this._expirationYearWaxField.fill(this._expirationYear,t)),h){this.setExpirationMonth(e.expMonth),this.setExpirationYear(e.expYear);let r=this._expirationMonth+this._expirationYear;p=p&&this._expirationDateWaxField.fill(r,t)}return p},c.prototype.getFieldsVisibility=function(){var e=[this._numberWaxField,this._nameWaxField,this._firstNameWaxField,this._lastNameWaxField];return this._getFieldsVisibility(e)},c.prototype.setMutationObserver=function(e,t){var r=this._getHtmlElements([this._numberWaxField,this._nameWaxField,this._firstNameWaxField,this._lastNameWaxField]);this.addObserverToElements(r,e,t);this.addObserverToForm(e,t)||this.addObserverToElementsForm(r,e,t)},c}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";var t,r,n,i,s,a,o,u;e.SymWax.WaxLoginForm=(t=e.SymBfw,r=e.SymWax,n=t.utils.isString,i=r.utils.isWaxField,r.utils.isWaxDom,s=r.constants,a=t.utils.isntNil,o=t.utils.isNil,t.utils.isFunction,((u=function(e,t){r.WaxForm.call(this,e,t),this._username=null,this._password=null,this._usernameWaxField=null,this._passwordWaxField=null,this._formFiller=r.formFiller}).prototype=Object.create(r.WaxForm.prototype)).init=function(){const e=this._waxDom.getCategorizedWaxFields();for(let t in e){let r=e[t];r.getLoginFieldType()===s.loginType.USERNAME&&this.setUsernameWaxField(r),r.getLoginFieldType()===s.loginType.PASSWORD&&this.setPasswordWaxField(r)}this.registerFormSubmitEvent(e),this._setInputElementForPopup(),this._addFormSubmitListener()},u.prototype.getUsername=function(){return this._username},u.prototype.getUsernameWaxField=function(){return this._usernameWaxField},u.prototype.getPassword=function(){return this._password},u.prototype.getPasswordWaxField=function(){return this._passwordWaxField},u.prototype.setUsername=function(e){if(!n(e))throw new Error("username must be a string");this._username=e},u.prototype.setUsernameWaxField=function(e){if(!i(e))throw new Error("username wax field must be a wax field");this._usernameWaxField=e},u.prototype.setPassword=function(e){if(!n(e))throw new Error("password must be a string");this._password=e},u.prototype.setPasswordWaxField=function(e){if(!i(e))throw new Error("password wax field must be a wax field");this._passwordWaxField=e},u.prototype._getInputElementsForPopup=function(){let e=[];if(a(this._usernameWaxField)){const t=this._usernameWaxField.getElement();a(t)&&e.push(this._usernameWaxField)}if(a(this._passwordWaxField)){const t=this._passwordWaxField.getElement();a(t)&&e.push(this._passwordWaxField)}return e},u.prototype.isFormComplete=function(){return this._formType===s.groupType.LOGIN},u.prototype.getFieldsForStyling=function(){let e=[this._usernameWaxField,this._passwordWaxField];return this.removeHiddenFields(e)},u.prototype.fillForm=function(e,t){if(o(e))return!1;const r=a(this._usernameWaxField)&&a(e.username),n=a(this._passwordWaxField)&&a(e.password);if(!r&&!n)return!1;r&&this.setUsername(e.username),n&&this.setPassword(e.password);var i=!0;return a(this._usernameWaxField)&&a(this._username)&&(i=i&&this._formFiller.applyOnFillRule(this._username,this._usernameWaxField)),i||(i=!i&&this._usernameWaxField.fill(this._username,t)),a(this._passwordWaxField)&&a(this._password)&&(i=i&&this._formFiller.applyOnFillRule(this._password,this._passwordWaxField)),i||(i=!i&&this._passwordWaxField.fill(this._password,t)),i},u.prototype.captureData=function(){var e=null,t=!1,i=!1;a(r.main._rule)&&(e=r.rulesEngine.applyFetchCredentialsRule(r.main._rule)),a(e)&&(e.hasOwnProperty(s.loginType.USERNAME)&&n(e[s.loginType.USERNAME])&&(this.setUsername(e[s.loginType.USERNAME]),t=!0),e.hasOwnProperty(s.loginType.PASSWORD)&&n(e[s.loginType.PASSWORD])&&(this.setPassword(e[s.loginType.PASSWORD]),i=!0));var o=this.getUsernameWaxField();if(a(o)&&!t){var u=o.getElement();if(a(u)){var l=u.value;n(l)&&this.setUsername(l)}}var c=this.getPasswordWaxField();if(a(c)&&!i){var h=c.getElement();if(a(h)){var p=h.value;n(p)&&this.setPassword(p)}}},u.prototype.getFieldsVisibility=function(){var e=[this._usernameWaxField,this._passwordWaxField];return this._getFieldsVisibility(e)},u.prototype.setMutationObserver=function(e,t){var r=this._getHtmlElements([this._usernameWaxField,this._passwordWaxField]);this.addObserverToElements(r,e,t),this.addObserverToForm(e,t)||this.addObserverToElementsForm(r,e,t)},u)}(window),function(e){"use strict";var t,r,n,i,s,a,o,u,l,c,h,p;(e.SymWax=e.SymWax||{}).parser=(t=e.SymBfw,r=e.SymWax,n=r.WaxDom,i=t.utils.isNil,s=t.utils.isFunction,a=t.utils.isntNil,o=t.utils.isArray,u=r.constants.parseCriterias,l=r.rulesEngine,c=r.utils,h=r.constants,p=t.performanceReporterFactoryProxy,function(){let e=8,t=1024,f=8,d=92;var g=!1,m={},y=1,E=2,v=4,T=8,A=16,S=32,_=64,b=128,C=256,I=0,x=1,w=2,N=3,R=4,F=5,O=6,D=7,P=8,B=9,L=10,M=11,U=12,k=13,H=0,V=1,j=2,K=3,G=6,W=7,q=8,z=9,Y=10,X=11,Q=12,J=13,Z=14,$=15,ee=16,te=18,re=[],ne=[];let ie;return{doParse:function(m){var y=h.performanceReporter.TYPE.DO_PARSE+":"+Date.now();p.reportStart(h.performanceReporter.COMPONENT.WAX,y),ne=[],g=!1;var E=window.document.body;if(void 0===E)throw new Error("window.document.body is undefined");var v=m.getRule();if(a(v)){var T=new r.Rule(v);l.applyPreParseRule(T)}ie=m.getParsePreference();var A=ie.getParseCriterias(),S=ie.getStringPixelSize();o(A)&&(re=A),o(S)&&4==S.length&&(e=S[0],t=S[1],f=S[2],d=S[3]);var _=new c.Rect(0,0,Number.MAX_VALUE,Number.MAX_VALUE);const b=re.indexOf(u.IGNORE_FORMS)>-1;var C=[];C.push(0);var I=[];this.collectForms(C,I);var x,w,N,R,F=[];if(!this.collectInputs(E,_,C,F))throw new Error("collectInputs return false");var O=new n,D=[];for(x in F)!0!==s(w=F[x])&&(i(w.form)||b?D.push(w):(N=w.form,-1!==(R=I.indexOf(N))&&ne[R].addToInputFields(w)));O.setInputFields(D);var P=[];P.push(0);var B=[];this.collectNonInputs(E,_,C,P,B);var L=[];for(x in B){w=B[x];let e=this.isPotentialCustomButton(w);!0!==s(w)&&(i(w.form)&&!e||re.indexOf(u.IGNORE_FORMS)>-1?L.push(w):(N=w.form,e&&(N=w.closest(h.htmlTagName.FORM)),-1!==(R=I.indexOf(N))?ne[R].addToNonInputFields(w):L.push(w)))}return O.setNonInputFields(L),ne.push(O),p.reportEnd(h.performanceReporter.COMPONENT.WAX,y),ne},getElement:function(e){if(!i(m))return e<0||e>=m.length?null:m[e]},collectForms:function(e,t){if(re.indexOf(u.IGNORE_FORMS)>-1)return!1;if(!o(e)||!o(t))return!1;for(var r=window.document.forms,i={},s={},l=r.length,c=0;c<l;++c){var h=r[c],p=new n;p.setHtmlForm(h),i.value=ee,s.value=I;var f=h.getBoundingClientRect(),d=this.processInput(h,f,i,s);a(d)&&(t.push(h),e.push(d.length),e.push(d),ne.push(p)),this.collectFieldSets(h,e,t,p)}},collectFieldSets:function(e,t,r,n){if(re.indexOf(u.IGNORE_FIELD_SETS)>-1||re.indexOf(u.IGNORE_FORMS)>-1)return!0;if(i(e)||!o(t)||!o(r))return!1;var s={},l={};s.value=te,l.value=I;for(var c=e.getElementsByTagName("fieldset"),h=c.length,p=0;p<h;++p){var f=c[p],d=f.getBoundingClientRect(),g=this.processInput(f,d,s,l);a(g)&&n.addToFieldSets(f)}return!0},collectInputs:function(e,t,r,n){if(void 0===e||void 0===t||void 0===r||void 0===n)return!1;if(c.Rect!=t.constructor||!o(r)||!o(n))return!1;var i=1e3,s=(new Date).getTime();const a=re.includes(u.ADD_SHADOW_DOM_FIELDS);var l=e.getElementsByTagName("INPUT");if(void 0!==l&&0===l.length&&(l=e.getElementsByTagName("input")),this.processInputs(l,t,r,n),g||(void 0!==(l=e.getElementsByTagName("BUTTON"))&&0===l.length&&(l=e.getElementsByTagName("button")),this.processInputs(l,t,r,n)),g||(void 0!==(l=e.getElementsByTagName("SELECT"))&&0===l.length&&(l=e.getElementsByTagName("select")),this.processInputs(l,t,r,n)),!g&&a){const i=ie.getShadowDomTargetElements();i&&i.forEach((i=>{const s=e.querySelector(i);s&&s.shadowRoot&&(l=s.shadowRoot.querySelectorAll("INPUT"),this.processInputs(l,t,r,n),l=s.shadowRoot.querySelectorAll("BUTTON"),this.processInputs(l,t,r,n),l=s.shadowRoot.querySelectorAll("SELECT"),this.processInputs(l,t,r,n))}))}var h=(new Date).getTime();return h-s>i&&(g=!0),g||-1!==re.indexOf(u.IGNORE_IMAGES)||-1!==re.indexOf(u.INPUTS_ONLY)||this.processInputs(e.getElementsByTagName("IMG"),null,r,n),(h=(new Date).getTime())-s>i&&(g=!0),(h=(new Date).getTime())-s>i&&(g=!0),!0},collectNonInputs:function(e,t,r,n,s){if(void 0===e||void 0===t||void 0===r||void 0===n||void 0===s)return!1;if(c.Rect!=t.constructor||!o(r)||!o(n)||!o(s))return!1;var l=re.indexOf(u.EVENT_OBECTS)>-1;re.indexOf(u.VERIFY_ATTRIBUTE_BY_ATTACHED_TEXT),re.indexOf(u.ENABLE_AJAX_SUPPORT);var h=l?511:0,p=(new c.Rect(0,0,0,0),e.getElementsByTagName("*"));if((i(p)||0===p.length)&&(p=e.all,i(p)||0===p.length))return!1;for(var f={},d={},m=(new Date).getTime(),y=0;y<p.length;++y){if(0==y%150&&(new Date).getTime()-m>500){g=!0;break}var E=p[y];if(!i(E)&&(f.value=H,d.value=I,(this.getElementType(E,f,d)||H==f.value)&&W!=d.value&&X!=f.value&&z!=d.value&&Y!=f.value&&Z!=f.value&&ee!=f.value&&L!=d.value&&R!=d.value)){var v=E.getBoundingClientRect();if(I==d.value&&l&&0!==h&&this.hasEventHandler(h,E)&&(d.value=k),I!=d.value){var T=v.right-v.left,A=v.bottom-v.top;if(T<4||T>1024||A<8||A>75){if(re.indexOf(u.IGNORE_HIDDEN_INPUTS)>-1)continue;if(0!==T&&0!==A)continue}if(w==d.value||k==d.value){var S=this.processInput(E,v,f,d);a(S)&&(a(t)&&this.expandRect(v,t),s.push(E),r.push(S.length),r.push(S))}}else{var _=(v.right-v.left)/2+v.left,b=(v.bottom-v.top)/2+v.top;if(!(_>=t.left&&_<=t.right&&b>=t.top&&b<=t.bottom))continue;var C=this.getElementText(E,v),x=E;if(i(C)){var N=E.firstChild;a(N)&&(C=this.getElementText(N,v),x=N)}if(a(C)){var F=(C=C.trim()).length,O="";F>0?(O="{"+f.value+",0},{"+v.left+","+v.top+","+v.right+","+v.bottom+"}",O+="#!#"+F+"#!#"+C):(O="{"+f.value+",0},{"+v.left+","+v.top+","+v.right+","+v.bottom+"}",O+="#!#0"),n.push(O.length),n.push(O),s.push(x)}}}}return!0},processInputs:function(e,t,n,i){if(void 0===e||void 0===n||void 0===i)return!1;if(a(t)&&c.Rect!=t.constructor||!o(n)||!o(i))return!1;var s=e.length;if(0===s)return!0;for(var u=(new Date).getTime(),l=0;l<s;++l){if(0==l%150&&(new Date).getTime()-u>500){g=!0;break}var h=e[l],p=h.getBoundingClientRect();if(r.utils.isValidElement(h,p)){var f={},d={};if(this.getElementType(h,f,d)&&D!=d.value&&Z!=f.value){var m=this.processInput(h,p,f,d);a(m)&&(a(t)&&this.expandRect(p,t),i.push(h),n.push(m.length),n.push(m))}}}return!0},getElementText:function(r,n){if(void 0===r||void 0===n)return null;var s=n.right-n.left,a=n.bottom-n.top;if(s<e||s>t||a<f||a>d)return null;var o=r.innerText;if(i(o))return null;var u=(o=c.getTrimmedString(o)).length;return u<1||u>45?null:o},processInput:function(e,t,r,n){if(i(e)||i(t))return null;re.indexOf(u.ENABLE_AJAX_SUPPORT);var s,o,l=re.indexOf(u.IGNORE_IMAGES)>-1,h=null;if(ee!=r.value&&te!=r.value)h=e.outerHTML;else if(U==n.value){h="<select";var p=e.attributes;if(a(p))for(s=p.length,o=0;o<s;++o){var f=p[o];void 0!==f&&(h+=" "+f.name+'="'+f.value+'"')}h+="></select>"}if(i(h)&&(k===n.value||l))return null;var d="";if(z==r.value)d=e.innerText,i(d)&&(d=e.getAttribute("value"));else if(U==n.value){var g=[];s=0;var m=e.options;if(a(m)){for(s=m.length,o=0,o=0;o<s;++o)d=m[o].innerText,i(d)||0===d.length?g.push("<!>#<!>"):(d=c.getTrimmedString(d),g.push(d));if(g.length>0){var y='"'+g.join('":"')+'"';y.replace("<!>#<!>"," "),d=g.length+"#!#"+y}}0===s&&(d="0#!#")}else if(R==n.value)d=e.getAttribute("value"),i(d)&&(d=e.innerText);else if(k==n.value){var E=e.firstChild;a(E)&&(d=E.innerText),(i(d)||0===d.length)&&(d=e.innerText),a(d)&&(d=d.trim())}else if(Q==r.value)d=e.innerText;else if(P===n.value&&(i(d)||0===d.length)){var v=e.nextSibling;a(v)&&(d=v.innerText)}var T=this.getInputDescription(e,t,r,n);return i(T)?null:(i(d)||0===(s=(d=d.trim()).length)?T.push("0"):(T.push(d.length),T.push(d)),i(h)||0===(s=h.length)?T.push("0"):(T.push(h.length),T.push(h)),T.join("#!#"))},getInputDescription:function(e,t,r,n){if(void 0===e||void 0===t)return null;var s=[];s.push("{"+r.value+","+n.value+"},{"+t.left+","+t.top+","+t.right+","+t.bottom+"}");var a=e.attributes;if(i(a))s.push("0");else{var o=a.length;if(s.push(o),o>0){var u="",l=0;for(l=0;l<o;++l){var c=a[l];if(void 0!==c){var h=c.value,p=h.length;0!==p&&(p>128&&(h=h.substring(p-128)),"id"!=c.name?(u.length>0?u+=',"':u+='"',u+=c.name+'":"'+h+'"'):u=u.length>0?'"'+c.name+'":"'+h+'",'+u:'"'+c.name+'":"'+h+'"')}}s.push(u.length),s.push(u)}}return s},expandRect:function(e,t){return!!i(t)||void 0!==e&&void 0!==t&&(e.left<t.left&&(t.left=e.left-600>0?e.left-600:0),e.top<t.top&&(t.top=e.top-30>0?e.top-30:0),e.right>t.right&&(t.right=e.right+600),e.bottom>t.bottom&&(t.bottom=e.bottom+30),!0)},getElementType:function(e,t,r){if(t.value=H,r.value=I,void 0===e)return!1;var n=!1,i=e.nodeName.toUpperCase(),s=i.length;return 1==s?"A"==i?t.value=Q:"B"==i&&(t.value=V):2==s?("TD"!=i&&"TH"!=i||(t.value=j),"TR"==i&&(t.value=G),"EM"==i?t.value=K:"H1"!=i&&"H2"!=i&&"H3"!=i&&"H4"!=i&&"H5"!=i&&"H6"!=i||(t.value=K)):3==s?"DIV"==i?t.value=J:"IMG"==i&&(t.value=Y,n=!0):4==s?"SPAN"==i?t.value=J:"FORM"==i&&(r.value=I,t.value=ee):5==s?"INPUT"==i?(t.value=W,n=!0):"LABEL"==i&&(t.value=V):6==s?"OPTION"==i?t.value=Z:"SELECT"==i?(t.value=X,r.value=U):"BUTTON"==i?(t.value=z,this.getElementInputType(e,r),R!=r.value&&(r.value=O)):"STRONG"==i&&(t.value=K):8==s&&("TEXTAREA"==i?(t.value=q,r.value=w):"FIELDSET"==i&&(r.value=I,t.value=te)),H==t.value&&(t.value=$),!0===n&&(this.getElementInputType(e,r),Y==t.value&&R!=r.value&&(r.value=F)),!0},getElementInputType:function(e,t){if(t.value=I,void 0===e)return!1;var r=e.getAttribute("type");return i(r)||0===r.length?(t.value=x,!0):(t.value=x,r=r.toUpperCase(),t.value="PASSWORD"==r?N:"SUBMIT"==r?R:"IMAGE"==r?F:"BUTTON"==r?O:"CHECKBOX"==r?D:"RADIO"==r?P:"RESET"==r?B:"FILE"==r?L:"HIDDEN"==r?M:x,!0)},hasEventHandler:function(e,t){if(0===e||void 0===t)return!1;if(e&y&&a(t.getAttribute("onclick")))return!0;if(e&E&&a(t.getAttribute("onsubmit")))return!0;if(e&v&&a(t.getAttribute("onmousedown")))return!0;if(e&T&&a(t.getAttribute("onmouseup")))return!0;var r;if((e&A||e&b)&&(r=t.getAttribute("href"),a(r))){if(0===(r=r.toLowerCase()).indexOf("javascript"))return!0;if(0===r.indexOf("#"))return!0}return!!(e&_&&a(t.getAttribute("command")))||!!(e&S&&a(t.getAttribute("formaction")))||!!(e&C&&(r=t.getAttribute("role"),a(r)&&0===(r=r.toLowerCase()).indexOf("button")))},isPotentialCustomButton:function(e){return!i(e)&&!i(e.closest(h.htmlTagName.FORM))&&e.tagName===h.htmlTagName.A}}}())}(window),function(e){"use strict";e.SymWax.fieldMapping=function(e,t){var r=e.utils.isNil,n=e.utils.isntNil,i=e.utils.isArray,s=e.logger,a=t.utils,o=a.isHtmlString,u=a.isFormData,l=t.constants,c=l.htmlTagName,h=l.htmlElementAttributes,p=e.performanceReporterFactoryProxy,f=e.utils.isFunction,d=l.inputType;const g=l.textPosition,m=t.parser,y=e.utils.isEmptyObject;var E=18,v={_dummyFormList:[],_isIgnoreFormsEnabled:!1,_lastFoundLocationMatch:-1,processPage:function(e,t,r,n){var s=l.performanceReporter.TYPE.FIELD_MAPPING_PROCESS_PAGE+":"+Date.now();if(p.reportStart(l.performanceReporter.COMPONENT.WAX,s),!i(e))throw new Error("parseResults must be an array");if(!u(t))throw new Error("formData must be an object of FormData");if("boolean"!=typeof r)throw new Error("useRegEx must be an boolean type");v._parseResults=e,v._formData=t,v._useRegEx=r,v._dataCountries=t.getValidL10nCountries(),v._dataAttributes=t.getValidL10nAttributes();var a=v._formData.getParsePreference().getParseCriterias();return a.indexOf(l.parseCriterias.IGNORE_FORMS)>-1&&(v._isIgnoreFormsEnabled=!0),v._associateInputTypeWithInputField(n),a.indexOf(l.parseCriterias.DONT_PERFORM_FIELD_MAPPING)>-1||(v._associateAttachedTextWithInputField(n),v._setFieldTypes(n),v._postMappingFieldTypeCorrection(),p.reportEnd(l.performanceReporter.COMPONENT.WAX,s)),v._parseResults},_isAttachedTextCandidate:function(e){switch(e.tagName){case c.LABEL:case c.DIV:case c.SPAN:case c.TD:case c.A:case c.TH:case c.LI:case c.P:case c.B:case c.I:case c.U:case c.H1:case c.H2:case c.H3:case c.H4:case c.H5:case c.H6:case c.FONT:case c.STRONG:case c.EM:return!0}return!1},_isTextInHorizontalProximity:function(e,t){var r,n=e.left+(e.right-e.left)/2,i=t.left+(t.right-t.left)/2,a=(e.bottom-e.top)/2,o=e.top+a,u=t.top+(t.bottom-t.top)/2,l=Math.abs(u-o);if(l>50)return g.Invalid;if(t.left>=e.left-4&&t.right<=e.right+4)return s.debug("Attached text matched by center"),g.Center;if(t.left>=e.left-48&&t.right<=e.right+48&&t.left<n&&t.right>n||t.left<n&&t.right>n&&Math.abs(t.left-e.left)<12)return s.debug("Attached text matched by center"),g.Center;if(t.right<=e.right||e.left-t.left>t.right-e.right){if(r=Math.abs(e.left-t.right),l<a&&r<48||t.right>=e.left)return s.debug("Attached text matched by left"),g.Left;if(l<a&&r<600)return s.debug("Attached text matched by far left"),g.FarLeft}if(t.right>=n){if(Math.abs(i-n)<12)return s.debug("Attached text matched by center"),g.Center;if((r=Math.abs(e.right-t.left))<48||t.left<=e.right)return s.debug("Attached text matched by right"),g.Right;if(r<600)return s.debug("Attached text matched by far right"),g.FarRight}return g.Invalid},_isTextInVerticalProximity:function(e,t){var r=e.top+(e.bottom-e.top)/2,n=t.top+(t.bottom-t.top)/2,i=Math.abs(r-n);const a=e.left+(e.right-e.left)/2,o=t.left+(t.right-t.left)/2;Math.abs(a-o);let u=v._formData.getParsePreference().getStringPixelSize()[3]||0;var l=t.bottom-e.bottom<=E&&e.top-t.top>=E;return t.top>=e.top-4&&t.bottom<=e.bottom+4?(s.debug("Attached text matched by center"),g.Center):t.top>=e.top-u/2&&t.bottom<=e.bottom+E&&t.bottom>=e.top-E?i<=8&&!l?(s.debug("Attached text matched by center"),g.Center):r>n?(s.debug("Attached text matched by top"),g.Top):(s.debug("Attached text matched by bottom"),g.Bottom):t.top>=e.bottom-E&&t.top<e.bottom+E?i<=8?(s.debug("Attached text matched by center"),g.Center):(s.debug("Attached text matched by bottom"),g.Bottom):t.top>=e.top-E&&t.bottom<=e.bottom+E?(s.debug("Attached text matched by center"),g.Center):t.bottom<e.top&&Math.abs(t.bottom-e.top)<=E?(s.debug("Attached text matched by top"),g.Top):t.top>e.bottom&&Math.abs(t.top-e.bottom)<=E?(s.debug("Attached text matched by bottom"),g.Bottom):t.top>=e.top-E&&t.top<=e.bottom?t.top>=e.top-4&&t.top<=e.top+4||i<=8?(s.debug("Attached text matched by center"),g.Center):(s.debug("Attached text matched by bottom"),g.Bottom):i<=E?(s.debug("Attached text matched by center"),g.Center):g.Invalid},_isTextInProximityOfElement:function(e,t,r){var i=e.getBoundingClientRect(),s=t.getBoundingClientRect();if(a.isElementInsideRectangle(e,s))return!1;let o,u;return o=v._isTextInHorizontalProximity(i,s),o!=g.Invalid&&(u=v._isTextInVerticalProximity(i,s),u!=g.Invalid&&(n(r)&&(r.location=o|u),!0))},_addAttachedLabelsToElement:function(e,t,r,n){let i=!1;if(n.has(r)){let s=n.get(r),a=t;const o=s.getBoundingClientRect(),u=a.getBoundingClientRect(),h=e.getBoundingClientRect(),p=s.tagName.toUpperCase(),f=a.tagName.toUpperCase();let d={},y={},E={};if(d.value=0,y.value=0,E.value=0,m.getElementType(s,d,E),m.getElementType(a,y,E),p==c.LABEL&&f!=c.LABEL)return i;if(p!=c.LABEL&&f==c.LABEL)i=!0;else{if(d.value<l.elementType.Header&&y.value>=l.elementType.Header)return i;y.value<=l.elementType.TableCell&&d.value>l.elementType.TableCell&&(r&g.Left||r&g.FarLeft?u.left>=o.right&&(i=!0):(r&g.Right||r&g.FarRight)&&u.left<=o.right&&(i=!0))}if(!1===i){const e={};if(e.x=h.left+(h.right-h.left)/2,e.y=h.top+(h.bottom-h.top)/2,r===g.CenterTop)(Math.abs(h.left-o.left)>Math.abs(h.left-u.left)||Math.abs(h.right-o.right)>Math.abs(h.right-u.right))&&(i=!0);else{const t={x:0};t.y=o.top+(o.bottom-o.top)/2;const n={x:0};n.y=o.top+(u.bottom-u.top)/2,r&g.Right||r&g.FarRight?(t.x=o.left,n.x=u.left):r&g.Left||r&g.FarLeft?(t.x=o.right,n.x=u.right):(t.x=o.left+(o.right-o.left)/2,n.x=u.left+(u.right-u.left)/2);const s=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))<s&&(i=!0)}}}else i=!0;return i},_findAttachedTextsForElement:function(e,t,r){for(var n in t){if(!t.hasOwnProperty(n))continue;var i=t[n];let s={location:0};if(v._isTextInProximityOfElement(e,i,s)){-1==[g.FarLeftTop,g.FarRightTop,g.CenterBottom,g.LeftBottom,g.FarLeftBottom,g.RightBottom,g.FarRightBottom].indexOf(s.location)&&v._addAttachedLabelsToElement(e,i,s.location,r)&&r.set(s.location,i)}}},_isLabelWithoutForAttribute:function(e){if(e.tagName===c.LABEL){const t=e.getAttribute(h.FOR);if(r(t))return!0}return!1},_isPotentialLabel:function(e,t){if(e.childElementCount>1||!a.isElementVisible(e))return!1;if(1===e.childElementCount&&e.firstElementChild.tagName===c.DIV){if(!t)return!1;if(!v._isLabelWithoutForAttribute(e))return!1}var r=e.innerText;return r&&0!==r.length||o(e.innerHTML)||(r=e.innerHTML),0!=(r=r.trim()).length},_isCompositeLabel:e=>{const t=Array.from(e.childNodes).some((e=>"[object Text]"===Object.prototype.toString.call(e)));return v._isPotentialLabel(e)&&t},_addAssociatedAttachedTextToWaxDom:function(e,t,r){if(e.attachedTextAssociation=e.attachedTextAssociation||{},e.associatedElementList=e.associatedElementList||[],this._mappedInputFields&&this._mappedInputFields.has(t))return!1;var n=r.innerText;return 0!==n.length||o(r.innerHTML)||(n=r.innerHTML),n.length>0&&(e.attachedTextAssociation[n]=t,this._mappedInputFields&&this._mappedInputFields.add(t),e.associatedElementList.push(r)),!0},_associateAttachedTextWithProximity:function(e,t){var i=e.getInputFieldsForAttachedText();if(r(i)||0===i.length)return;var s=e.getNonInputFields();if(r(s)||0===s.length)return;e.attachedTextAssociation=e.attachedTextAssociation||{},e.associatedElementList=e.associatedElementList||[];var a=Object.values(e.attachedTextAssociation);if(a.length===i.length)return;var o=[];if(s.forEach((function(r){if(!v._isPotentialLabel(r,t))return!0;-1===e.associatedElementList.indexOf(r)&&o.push(r)})),0===o.length)return;let u=v._processInputsForHorizantalMapping(i,a);e.setHorizontalInputs(u);const c=new AVLTree;for(let e in o){if(!o.hasOwnProperty(e))continue;let t=o[e];const r=t.getBoundingClientRect(),n=r.top+(r.bottom-r.top)/2;c.insert(n,t)}i.forEach((function(r){if(a.indexOf(r)>-1)return;const i=r.getBoundingClientRect(),s=[],o=i.top+(i.bottom-i.top)/2,u=i.left+(i.right-i.left)/2;if(c.range(o-l.PROXIMITY_THRESHOLD_Y,o+l.PROXIMITY_THRESHOLD_Y,(e=>{let t=e.data;const r=t.getBoundingClientRect(),n=r.left+(r.right-r.left)/2;let a=i.width+i.width/2;i.width<l.PROXIMITY_THRESHOLD_X&&(a+=l.PROXIMITY_THRESHOLD_X),n>u-a&&n<u+a&&s.push(t)})),s.length>0){let i=new Map;v._findAttachedTextsForElement(r,s,i);let a=v._findAttachedTextForElementWithLocation(e,r,i,t);if(n(a)){var h=s.indexOf(a);h>-1&&s.splice(h,1),v._addAssociatedAttachedTextToWaxDom(e,r,a)}}}))},_findAttachedTextForElementWithLocation:function(t,r,i,s){if(0==i.size)return null;let u,c=s?s.inputFieldType:a.getInputType(r),h=e.uiUtils.isPageRTL(r);if(u=h?[g.Center,g.RightCenter,g.FarRightCenter,g.CenterTop,g.RightTop,g.RightTop,g.FarLeftCenter]:[g.RightCenter,g.Center,g.LeftCenter,g.FarLeftCenter,g.CenterTop,g.LeftTop,g.Invalid],c!=d.RADIO&&(a.isInputElement(r)||s)){let e=r.getBoundingClientRect(),i="("+e.top+","+e.bottom+")",s=t.getHorizontalInputs().get(i);n(s)&&s>1&&(h?(u[2]=g.CenterTop,u[3]=g.FarRightCenter):(u[3]=g.CenterTop,u[4]=g.FarLeftCenter))}let p=1;c===d.RADIO||h?p=0:c===d.SELECT&&(p=2);let f=l.fieldType.UNKNOWN,m=v._lastFoundLocationMatch;if(0!=p&&m>1&&m<5&&!i.has(g.LeftCenter)&&!i.has(g.FarLeftCenter)){let e=u.splice(m,1);u.splice(1,0,e[0]),d.SELECT===c&&(p=1)}let y=u.length;d.SELECT!=c&&y--;let E;for(;p<y;++p){if(!i.has(u[p]))continue;let e=i.get(u[p]),t=e.innerText;0!==t.length||o(e.innerHTML)||(t=e.innerHTML);let r=""!==c&&c!==d.UNKNOWN&&c!==d.EVENT_OBJECT;if(f=v._stringToFieldTypeFromCollection(t,!0,r,s),f!=l.fieldType.UNKNOWN){E=e,v._lastFoundLocationMatch=p;break}}return E},_processInputsForHorizantalMapping:function(e,t){let n,i=new Map,s=1;for(let a of e){if(t.indexOf(a)>-1)continue;let e=a.getBoundingClientRect();if(r(n))i.set("("+e.top+","+e.bottom+")",s);else{let t=!1,r=n.getBoundingClientRect();if(this.isInHorGroupBound(r,e)){if(r.top!=e.top||r.bottom!=e.bottom){let e=i.get("("+r.top+","+r.bottom+")");i.set("("+r.top+","+r.bottom+")",e+1)}t=!0,i.set("("+e.top+","+e.bottom+")",++s)}1!=t&&(s=1,i.set("("+e.top+","+e.bottom+")",s))}n=a}return i},isInHorGroupBound:function(e,t){return t.top>=e.top-8&&t.bottom<=e.bottom+8},_addToDummyForm:function(e,i){for(var s,a=0;a<v._dummyFormList.length;a++){var o=v._dummyFormList[a],u=o.getNonInputFields();if(!r(u)&&0!==u.length){for(var l=0;l<u.length;l++){var c=u[l];if(v._isTextInProximityOfElement(e,c)){s=o;break}}if(n(s))break}}r(s)&&1===v._parseResults.length&&(s=v._parseResults[0]),r(s)&&(s=new t.WaxDom,v._dummyFormList.push(s),s.addToInputFields(e),s.addToNonInputFields(i)),v._addAssociatedAttachedTextToWaxDom(s,e,i)},_associateAttachedTextWithInputField:function(e){var i,s=v._parseResults,u={},p=[],f=[];if(s.forEach((function(e,t){v._mappedInputFields=new Set;var s=e.getHtmlForm();if(r(s))return void(i=e);var o=e.getInputFieldsForAttachedText();if(r(o)||0===o.length)return;var l=e.getNonInputFields();if(r(l)||0===l.length)return p.push(e),f.push(s),void(u[t]=s.getBoundingClientRect());var d=0;let g={},m=!1;l.forEach((function(t){if(t.tagName===c.LABEL){var i=t.getAttribute(h.FOR);if(r(i))return;var s=document.getElementById(i);if(r(s)){if(!1===m){for(let e of o){let t=e.getAttribute(h.NAME);n(t)&&r(g[t])&&(g[t]=e)}m=!0}s=g[i]}n(s)&&a.isElementVisible(s)&&v._addAssociatedAttachedTextToWaxDom(e,s,t)&&(d+=1)}})),o.length!==d&&(p.push(e),f.push(s),u[t]=s.getBoundingClientRect())})),n(i)){this._mappedInputFields=new Set;var d=i.getNonInputFields();if(n(d))for(let e=0;e<d.length;e++){let n=d[e];if(v._isAttachedTextCandidate(n)){if(n.tagName===c.LABEL)do{var g=n.getAttribute(h.FOR);if(r(g))break;var m=document.getElementById(g);if(r(m)&&(m=document.getElementsByName(g)[0],r(m)))break;if(!a.isElementVisible(m))break;if(r(m.form)&&!1===v._isIgnoreFormsEnabled){v._addToDummyForm(m,n);break}var E=f.indexOf(m.form);if(E>-1){var T=p[E];v._addAssociatedAttachedTextToWaxDom(T,m,n)}}while(0);var A=n.innerText;if(0!==A.length||o(n.innerHTML)||(A=n.innerHTML),y(u)){let t=a.getInputType(n)==l.inputType.EVENT_OBJECT;n.innerHTML.trim()==A.trim()||t||(d.splice(e,1),e--)}else for(var S in u){var _=u[S];t.utils.isElementInsideRectangle(n,_)&&(n.innerHTML.trim()===A.trim()||v._isCompositeLabel(n))&&s[S].addToNonInputFields(n)}}}y(u)&&p.push(i),delete v._mappedInputFields,p.forEach((function(t){v._associateAttachedTextWithProximity(t,e)})),v._parseResults=s.concat(v._dummyFormList)}},_isFilterConfigMatched:function(e,t){return!(!t||!t.fieldTypesToCheck.some((t=>t===e)))},_setFieldTypes:function(e){v._parseResults.forEach((function(t){var r=t.getFieldMapping(),n=[];let i=!1;(r.forEach((function(t){n.push(t.getElement()),e&&!i&&(i=v._isFilterConfigMatched(t.getFieldType(),e))})),t.getInputFieldsForAttachedText().forEach((function(s){if((!(n.indexOf(s)>-1)||e)&&(!e||!i))if(e){const n=v._createWaxField(t,s,!1,e);r.push(n),i=v._isFilterConfigMatched(n.getFieldType(),e)}else r.push(v._createWaxField(t,s,!1,e))})),e)||(t.getNonInputFields().forEach((function(e){n.indexOf(e)>-1||r.push(v._createWaxField(t,e,!0))})),t.setFieldMapping(r));var s=[];r.forEach((e=>{a.isEventObject(e)&&s.push(e)})),t.setEventObjectWaxFields(s)}))},_fieldFactory:{}};return v._fieldFactory[l.htmlTagName.SELECT]=t.WaxSelectField,v._fieldFactory[l.htmlTagName.INPUT]=t.WaxInputField,v.createWaxFieldObject=function(e){return!r(e)&&f(v._fieldFactory[e.tagName])?new v._fieldFactory[e.tagName]:new t.WaxField},v._createWaxField=function(e,t,r=!1,n){var i=n?n.inputFieldType:a.getInputType(t),s=v._getFieldTypeByAttachedText(e,t,n);s===l.fieldType.UNKNOWN&&!0===r&&(s=v._getFieldTypeByMatchProperties(e,t,n)),v._validateFieldType(s,i)||(s=l.fieldType.UNKNOWN);var o=v.createWaxFieldObject(t);return o.setInputType(i),o.setFieldType(s),o.setPreGroupFieldType(s),o.setElement(t),n&&(n.fieldTypesToCheck.some((e=>e===s))?(o.setInputType(a.getInputType(t)),o.setPreGroupFieldType(a.getInputType(t)),o.addCategory(n.inputFieldType)):(o.setInputType(a.getInputType(t)),o.setPreGroupFieldType(l.fieldType.UNKNOWN),o.setFieldType(l.fieldType.UNKNOWN))),o},v._performRegExSearch=function(e,t,r,n){let i=e[l.REGEX];if(!(t.length<l.MAX_STRING_LENGTH_FOR_REGEX))return l.fieldType.UNKNOWN;for(let e in i)try{if(i.hasOwnProperty(e)){if(new RegExp(e).test(t)){let t=r[i[e]];if(!n||n.fieldTypesToCheck.some((e=>e===t)))return t}}}catch(e){s.error(e)}return l.fieldType.UNKNOWN},v._stringToFieldType=function(e,t,i,o){var u=l.fieldType.UNKNOWN,c=a.getTrimmedString(e);if(r(c))return u;var h,p,f;v._formData;if(t){const e=v._dataCountries;for(let t=0;t<e.length;t++){const r=e[t];h=r[l.DATA],f=r[l.FIELD_TYPE],p=h[c];let n=!0;if(Number.isInteger(p)){if(u=f[p],n=!o||v._isFilterConfigMatched(u,o),n)break;o&&(u=l.fieldType.UNKNOWN)}if((i&&v._useRegEx||o)&&(u=v._performRegExSearch(r,c,f,o),n=!o||v._isFilterConfigMatched(u,o),u!==l.fieldType.UNKNOWN)){if(n)break;o&&(u=l.fieldType.UNKNOWN)}}}else{const t=v._dataAttributes;for(let i=0;i<t.length;i++){const d=t[i];if(h=d[l.DATA],f=d[l.FIELD_TYPE],p=h[c],r(p))try{let t=a.getTrimmedPropertyValue(e);n(t)&&(p=h[t])}catch(e){s.error(e)}if(r(p))try{let e=a.getTrimmedPropertyValue(c);n(e)&&(p=h[e])}catch(e){s.error(e)}if(Number.isInteger(p)&&(u=f[p],!o||o.fieldTypesToCheck.some((e=>e===u))))break}if((i&&v._useRegEx||o)&&u===l.fieldType.UNKNOWN){const e=v._dataCountries;for(let t=0;t<e.length;t++){const n=e[t];if(f=n[l.FIELD_TYPE],!r(f)&&(u=v._performRegExSearch(n,c,f,o))!==l.fieldType.UNKNOWN&&(!o||o.fieldTypesToCheck.some((e=>e===u))))break}}}return u},v._stringToFieldTypeFromCollection=function(e,t,r,n){let i=v._stringToFieldType(e,t,r,n);return i!==l.fieldType.UNKNOWN||t||(i=v._stringToFieldType(e,!t,r,n)),i},v._getFieldTypeByAttachedText=function(e,t,n){var i=l.fieldType.UNKNOWN;let s=n?n.inputFieldType:a.getInputType(t);if(r(e.attachedTextAssociation))return i;var o=Object.values(e.attachedTextAssociation);if(0===o.length)return i;var u=o.indexOf(t);if(-1===u)return i;var c=Object.keys(e.attachedTextAssociation)[u];let h=""!==s&&s!==d.UNKNOWN&&s!==d.EVENT_OBJECT;return i=v._stringToFieldTypeFromCollection(c,!0,h,n)},v._getFieldTypeByMatchProperties=function(e,t,n){var i=n?n.inputFieldType:a.getInputType(t),s=v._formData.getParsePreference().getMatchingProperties();(r(s)||n)&&(s=a.getMatchPropertiesByInputType(i));var o=l.fieldType.UNKNOWN;for(var u in s){var c=s[u];if(c!==l.matchProperties.ATTACHED_TEXT){{var h;if(h=c===l.matchProperties.INNER_TEXT?t.innerText:t.getAttribute(c),r(h)||0===h.length)continue;let e=""!==i&&i!==d.UNKNOWN&&i!==d.EVENT_OBJECT;switch(c){case l.matchProperties.INNER_TEXT:case l.matchProperties.PLACE_HOLDER:case l.matchProperties.VALUE:case l.matchProperties.ALTERNATIVE_TEXT:o=v._stringToFieldTypeFromCollection(h,!0,e,n);break;default:o=v._stringToFieldTypeFromCollection(h,!1,e,n)}}if(n){if(n.fieldTypesToCheck.some((e=>e===o)))return o;o=l.fieldType.UNKNOWN}else{if(v._validateFieldType(o,i))break;o=l.fieldType.UNKNOWN}}}return o},v._validateFieldType=function(e,t){return e!==l.fieldType.UNKNOWN&&((e!==l.fieldType.SIGNON_DESTINATION||t===l.inputType.SELECT||t===l.inputType.TEXT)&&((-1===e.toLowerCase().indexOf("button")&&e!=l.fieldType.AJAX_ACTION||!a.isInputTextElement(t))&&(e!==l.fieldType.SKIP_FIELD||!a.isInputTextElement(t))))},v._postMappingFieldTypeCorrection=function(){const e=!v._formData.getParsePreference().getParseCriterias().includes(l.parseCriterias.DONT_USE_PASSWORD_FIELD_CORRECTION);v._parseResults.forEach((function(r){var n=r.getFieldMapping();for(let r=0;r<n.length;r++){let i=n[r];if(i instanceof t.WaxInputField){let t=i._inputType,r=i._fieldType;a.isInputButtonElement(t)&&r===l.fieldType.LOGIN_NAME&&(i.setFieldType(l.fieldType.LOGIN_BUTTON),i.setPreGroupFieldType(l.fieldType.LOGIN_BUTTON)),e&&t===l.inputType.PASSWORD&&r===l.fieldType.UNKNOWN&&(i.setFieldType(l.fieldType.PASSWORD),i.setPreGroupFieldType(l.fieldType.PASSWORD))}}}))},v._associateInputTypeWithInputField=function(e){v._parseResults.forEach((function(t,i){let o=t.getInputFields();if(r(o)||0===o.length)return;let u=t.getFieldMapping(),c=[];o.forEach((function(r){let i=u.find((function(e){return e.getElement()===r}));if(n(i)&&!e)return;let s=a.getInputType(r),o=v._getFieldTypeByMatchProperties(t,r,e);if(e){const n=v.createWaxFieldObject(r);n.setFieldType(o),n.setPreGroupFieldType(o),n.setElement(r),e.fieldTypesToCheck.some((e=>e===o))?(n.setInputType(s),n.setPreGroupFieldType(a.getInputType(r)),n.addCategory(e.inputFieldType)):(n.setInputType(s),n.setFieldType(l.fieldType.UNKNOWN),n.setPreGroupFieldType(l.fieldType.UNKNOWN)),t.addToInputFieldsForAttachedText(r),c.push(n)}else if(o!==l.fieldType.UNKNOWN){const e=v.createWaxFieldObject(r);e.setFieldType(o),e.setPreGroupFieldType(o),e.setInputType(s),e.setElement(r),c.push(e)}else v._isIncludedForAttachedTextMapping(r,s)&&t.addToInputFieldsForAttachedText(r)}));try{c.length>0&&t.ConcatFieldMapping(c)}catch(e){s.error(e)}}))},v._isIncludedForAttachedTextMapping=function(e,t){const r=e.nodeName.toUpperCase(),n=r.length;let i=!1;return(3==n&&r==l.htmlTagName.IMG||6==n&&r==l.htmlTagName.BUTTON)&&(i=!0),!i&&t!==d.SUBMIT&&t!==d.BUTTON&&t!==d.IMAGE&&t!==d.EVENT_OBJECT},v}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.fieldGroupMapping=function(e,t){let r={},n=e.utils.isNil,i=e.logger,s=t.constants,a=t.utils,o=a.isFormData,u=e.utils.isArray,l=(e.extensionAdapter,e.performanceReporterFactoryProxy),c={_mapFields:function(){let t=this._resultPattern.split("-");i.debug("Start of FieldGroupMapping: Mapping is done for group type: "+r._groupType+"\n");let n=this._groupStart;for(let r=0;n<this._group.length;n++,r++){let s=this._group[n],a=t[r],o=this._patternTokenToFieldType(a);i.debug("Old FieldType:"+s.getFieldType()+" New FieldType: "+o+"\n"),e.utils.isntNil(o)&&s.setFieldType(o)}return i.debug("End of FieldGroupMapping: Mapping is done for group type "+r._groupType),n},_fieldTypeToPatternString:function(e){switch(e){case s.fieldType.PREFIX:return s.patternTokens.PREFIX;case s.fieldType.SUFFIX:return s.patternTokens.SUFFIX;case s.fieldType.FULL_NAME_PHONETIC:case s.fieldType.FIRST_NAME_ROMAN:case s.fieldType.FIRST_NAME:return s.patternTokens.FIRST_NAME;case s.fieldType.MIDDLE_NAME:case s.fieldType.MIDDLE_NAME_ROMAN:case s.fieldType.MIDDLE_NAME_PHONETIC:return s.patternTokens.MIDDLE_NAME;case s.fieldType.LAST_NAME:case s.fieldType.LAST_NAME_PHONETIC:case s.fieldType.LAST_NAME_ROMAN:return s.patternTokens.LAST_NAME;case s.fieldType.YEAR:case s.fieldType.BIRTH_YEAR:case s.fieldType.CREDIT_CARD_EXPIRATION_YEAR:case s.fieldType.CREDIT_CARD_START_YEAR:return s.patternTokens.YEAR;case s.fieldType.MONTH:case s.fieldType.BIRTH_MONTH:case s.fieldType.CREDIT_CARD_START_MONTH:case s.fieldType.CREDIT_CARD_EXPIRATION_MONTH:return s.patternTokens.MONTH;case s.fieldType.BIRTH_DAY:case s.fieldType.DAY:return s.patternTokens.DAY;case s.fieldType.ACCOUNT_NUMBER:case s.fieldType.CREDIT_CARD_NUMBER:return s.patternTokens.CARD_NUMBER;case s.fieldType.UNKNOWN:return s.patternTokens.UNKNOWN;default:return s.patternTokens.IGNORE}},matchPattern:function(e,t){this._group=e;let i=[];for(let t of e)i.push(c._fieldTypeToPatternString(t.getFieldType()));let a=r._formData.getL10nCountries(),o=null,u=r._genericMapping[t],l=i.join("-");for(let e of a){let t=e[s.FIELD_TYPE].indexOf(u);if(-1==t)continue;let r=e[s.PATTERN][t];if(!n(r))for(let e of r){o=Object.keys(e)[0];let t=e[o],r=new RegExp(t),n=l.search(r);if(-1==n)continue;let i=-1,s=-1;for(;s<n;i++,s=l.indexOf("-",s+1));return this._resultPattern=o,this._groupStart=i,!0}}return!1}},h=Object.create(c);h._patternTokenToFieldType=function(e){switch(e){case s.patternTokens.DAY:return s.fieldType.DAY;case s.patternTokens.MONTH:return s.fieldType.MONTH;case s.patternTokens.YEAR:return s.fieldType.YEAR;default:return null}};let p=Object.create(h);p._patternTokenToFieldType=function(e){switch(e){case s.patternTokens.DAY:return s.fieldType.BIRTH_DAY;case s.patternTokens.MONTH:return s.fieldType.BIRTH_MONTH;case s.patternTokens.YEAR:return s.fieldType.BIRTH_YEAR;default:return null}};let f=Object.create(h);f._patternTokenToFieldType=function(e){switch(e){case s.patternTokens.DAY:return null;case s.patternTokens.MONTH:return s.fieldType.CREDIT_CARD_EXPIRATION_MONTH;case s.patternTokens.YEAR:return s.fieldType.CREDIT_CARD_EXPIRATION_YEAR;default:return null}};let d=Object.create(c);return d._patternTokenToFieldType=function(e){switch(e){case s.patternTokens.PREFIX:return s.fieldType.PREFIX;case s.patternTokens.SUFFIX:return s.fieldType.SUFFIX;case s.patternTokens.FIRST_NAME:return s.fieldType.FIRST_NAME;case s.patternTokens.MIDDLE_NAME:return s.fieldType.MIDDLE_NAME;case s.patternTokens.LAST_NAME:return s.fieldType.LAST_NAME;default:return null}},r={},r._groupBoundary=null,r._groupType=null,r._lastDetectedgroupTypeIsSpecific=!1,r._genericMapping={[s.fieldType.DATE]:s.fieldType.DATE,[s.fieldType.CREDIT_CARD_EXPIRATION_DATE]:s.fieldType.DATE,[s.fieldType.CREDIT_CARD_START_YEAR]:s.fieldType.DATE},r._fieldGroupMapper={[s.fieldType.CREDIT_CARD_EXPIRATION_DATE]:f,[s.fieldType.BIRTH_DATE]:p,[s.fieldType.DATE]:h,[s.fieldType.NAME]:d},r._specificGroups=[s.fieldType.CREDIT_CARD_EXPIRATION_DATE,s.fieldType.CREDIT_CARD_START_YEAR],r._isPotentialGroupCandidate=function(e){if(e.getInputType()===s.inputType.UNKNOWN)return!1;if(e.getFieldType()===s.fieldType.UNKNOWN)return!!r._groupType&&!!r._isInGroupBounds(e.getElement());let t=r._fieldTypeToGroupType(e.getFieldType());if(t===s.fieldType.UNKNOWN)return!1;if(!r._isInGroupBounds(e.getElement()))return!1;let n=-1!==r._specificGroups.indexOf(t);if(r._lastDetectedgroupTypeIsSpecific=n,!r._groupType)return r._groupType=t,!0;if(n){if(r._lastDetectedgroupTypeIsSpecific&&t===r._groupType)return!0;if(r._groupType===r._genericMapping[t])return r._groupType=t,!0}return r._genericMapping[r._groupType]==t},r._mapToHorizontalGroup=function(e){let t=e.getFieldMapping(),n=t.length;for(let e=0;e<n;){r._groupBoundary=null,r._groupType=null;let i=t[e],s=e,a=[];if(!r._isPotentialGroupCandidate(i)){e++;continue}for(a.push(i),e++;e<n;){let n=t[e];if(!r._isPotentialGroupCandidate(n))break;a.push(n),e++}if(a.length<2)continue;let o=r._fieldGroupMapper[r._groupType];if(o&&o.matchPattern(a,r._groupType)){s+=o._mapFields(),e=s}else;}},r._isInGroupBounds=function(e){if(!r._groupBoundary)return r._groupBoundary=e.getBoundingClientRect(),!0;let t=e.getBoundingClientRect(),n=t.top>=r._groupBoundary.top-8&&t.bottom<=r._groupBoundary.bottom+8;if(!n){let e=(t.right-t.left)/2+t.left,i=(t.bottom-t.top)/2+t.top;a.isPtnInRect(e,i,r._groupBoundary)&&(n=!0)}return n},r.processPage=function(e,t){let n=s.performanceReporter.TYPE.FIELD_GROUP_MAPPING_PROCESS_PAGE+":"+Date.now();if(l.reportStart(s.performanceReporter.COMPONENT.WAX,n),!u(e))throw new Error("waxDoms must be an array");if(!o(t))throw new Error("formData must be an object of FormData");r._formData=t,e.forEach((function(e){r._mapToHorizontalGroup(e)})),l.reportEnd(s.performanceReporter.COMPONENT.WAX,n)},r._fieldTypeToGroupType=function(e){let t=s.groupType.UNKNOWN;switch(e){case s.fieldType.FULL_NAME:case s.fieldType.FIRST_NAME:case s.fieldType.LAST_NAME:case s.fieldType.MIDDLE_NAME:case s.fieldType.PREFIX:case s.fieldType.SUFFIX:t=s.fieldType.NAME;break;case s.fieldType.FULL_NAME_PHONETIC:case s.fieldType.FIRST_NAME_PHONETIC:case s.fieldType.LAST_NAME_PHONETIC:case s.fieldType.MIDDLE_NAME_PHONETIC:t=s.fieldType.NAME_PHONETIC;break;case s.fieldType.FULL_NAME_ROMAN:case s.fieldType.FIRST_NAME_ROMAN:case s.fieldType.LAST_NAME_ROMAN:case s.fieldType.MIDDLE_NAME_ROMAN:t=s.fieldType.NAME_ROMAN;break;case s.fieldType.BIRTH_DATE:case s.fieldType.BIRTH_YEAR:case s.fieldType.BIRTH_MONTH:case s.fieldType.BIRTH_DAY:t=s.fieldType.BIRTH_DATE;break;case s.fieldType.DATE:case s.fieldType.DAY:case s.fieldType.MONTH:case s.fieldType.YEAR:t=s.fieldType.DATE;break;case s.fieldType.CREDIT_CARD_EXPIRATION_DATE:case s.fieldType.CREDIT_CARD_EXPIRATION_MONTH:case s.fieldType.CREDIT_CARD_EXPIRATION_YEAR:t=s.fieldType.CREDIT_CARD_EXPIRATION_DATE;break;case s.fieldType.CREDIT_CARD_START_DATE:case s.fieldType.CREDIT_CARD_START_MONTH:case s.fieldType.CREDIT_CARD_START_YEAR:t=s.fieldType.CREDIT_CARD_START_YEAR;break;case s.fieldType.CREDIT_CARD_HOLDER_NAME:t=s.fieldType.CREDIT_CARD;break;case s.fieldType.PHONE_NUMBER_COUNTRY_CODE:case s.fieldType.PHONE_NUMBER_AREA_CODE:case s.fieldType.PHONE_NUMBER:t=s.fieldType.PHONE_NUMBER;break;case s.fieldType.PHONE_NUMBER_WORK:t=s.fieldType.PHONE_NUMBER_WORK;break;case s.fieldType.PHONE_NUMBER_HOME:t=s.fieldType.PHONE_NUMBER_HOME;break;case s.fieldType.PHONE_NUMBER_FAX:t=s.fieldType.PHONE_NUMBER_FAX;break;case s.fieldType.PHONE_NUMBER_WORK_FAX:t=s.fieldType.PHONE_NUMBER_WORK_FAX;break;case s.fieldType.PHONE_NUMBER_CELL:t=s.fieldType.PHONE_NUMBER_CELL;break;case s.fieldType.GENDER_FEMALE:case s.fieldType.GENDER_MALE:case s.fieldType.GENDER:t=s.fieldType.GENDER;break;case s.fieldType.SSN:t=s.fieldType.SSN;break;case s.fieldType.ZIP_CODE:t=s.fieldType.ZIP_CODE;break;case s.fieldType.EMAIL:case s.fieldType.ALTERNATE_EMAIL:case s.fieldType.VERIFY_EMAIL:case s.fieldType.WORK_EMAIL:t=s.fieldType.EMAIL_DOMAIN;break;case s.fieldType.LOGIN_NAME:t=s.fieldType.LOGIN_NAME;break;case s.fieldType.PASSWORD:t=s.fieldType.PASSWORD;break;case s.fieldType.ACCOUNT_NUMBER:t=s.fieldType.ACCOUNT_NUMBER;break;case s.fieldType.OTP:t=s.fieldType.OTP;break;default:t=s.fieldType.UNKNOWN}return t},r}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.groupCategorization=function(e,t){var r=e.utils.isArray,n=t.utils.isFormData,i=e.utils.isNil,s=e.utils.isntNil,a=t.constants,o=a.groupCategorization,u=t.utils,l=e.performanceReporterFactoryProxy;e.logger;let c=t.waxTelemetryListener;var h={processPage:function(e,t){var i=a.performanceReporter.TYPE.GROUP_CATEGORIZATION_PROCESS_PAGE+":"+Date.now();if(l.reportStart(a.performanceReporter.COMPONENT.WAX,i),!r(e))throw new Error("parseResults must be an array");if(!n(t))throw new Error("formData must be an object of FormData");return h._parseResults=e,h._formData=t,h._formData.getParsePreference().getParseCriterias().indexOf(a.parseCriterias.DONT_PERFORM_GROUP_CATEGORIZE)>-1||(h._setGroupTypes(),l.reportEnd(a.performanceReporter.COMPONENT.WAX,i)),h._parseResults},_setGroupTypes:function(){var e=h._parseResults,t=h._formData.getGlobal(),r=t[o.PAGE_CATEGORIZATIONS];r=r.concat(t[o.LOGIN_CATEGORIZATIONS]);for(var n=h._formData.getParsePreference().getParseCriterias().indexOf(a.parseCriterias.DONT_CATEGORIZE_AS_MULTIPLE_PAGE_LOGIN)>-1,u=0;u<e.length;u++){var l=e[u],p=l.getFormType();if(s(p)){for(var f=[],d=l.getFieldMapping(),g=0;g<d.length;g++){var m=d[g];m.getFieldType()!==a.fieldType.UNKNOWN&&f.push(m)}l.setCategorizedWaxFields(f),!0===n&&p===a.groupType.MULTI_PAGE_LOGIN&&l.removeFormType(a.groupType.MULTI_PAGE_LOGIN)}else{for(var y=0,E=null,v=null,T=[],A=0;A<r.length;A++){var S=r[A],_=h._hasPatternMatched(l,S);if(!i(_)){var b=_.categorizedFields;if(!i(b)){var C=b.length;C<y||C===S[o.MAPPING_FIELDS].length&&(y=C,T=_.matchedInputFields,E=S,v=b)}}}if(y>0){if(h._setFormType(l,E,y),!0===n&&l.getFormTypes().indexOf(a.groupType.MULTI_PAGE_LOGIN)>-1){l.removeFormType(a.groupType.MULTI_PAGE_LOGIN);continue}l.setCategorizedWaxFields(v),h._applyPattern(v,T)}l.determineFormTypes(),c.registerInputFieldObservers(l)}}},_setFormType:function(e,t,r){var n=t[o.GROUP_TYPE];t[o.MAPPING_FIELDS].length>r&&(n===a.groupType.LOGIN||n===a.groupType.PARTIAL_LOGIN?n=a.groupType.UNKNOWN:-1===n.indexOf(o.PARTIAL)&&(n=o.PARTIAL+n)),e.setFormType(n)},_hasPatternMatched:function(e,t){var n=t[o.MAPPING_FIELDS];if(!r(n))return null;var i=e.getFieldMapping();if(!r(i))return null;for(var s=[],l=0;l<i.length;l++){var c=i[l],h=c.getInputType(),p=c.getFieldType();h===a.inputType.UNKNOWN&&p===a.fieldType.UNKNOWN||s.push(c)}for(var f=[],d=[],g=0;g<n.length;g++)for(var m=n[g],y=0;y<s.length;y++){var E=s[y];if(-1===f.indexOf(E)&&(u.isFieldTypeMatched(E.getFieldType(),m[o.FIELD_TYPE])&&u.isInputTypeMatched(E.getInputType(),m[o.INPUT_TYPE]))){var v=t[o.INPUT_FIELDS][g];f.push(E),d.push(v);break}}return{categorizedFields:f,matchedInputFields:d}},_applyPattern:function(e,t){for(var r=t,n=0;n<e.length;n++){var i=e[n],a=r[n];s(a[o.INPUT_TYPE])&&i.setInputType(a[o.INPUT_TYPE]),s(a[o.LOGIN_TYPE])&&i.setLoginFieldType(a[o.LOGIN_TYPE])}}};return h}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";var t,r,n,i,s,a,o,u,l,c,h,p,f;e.SymWax.formFiller=(t=e.SymBfw,r=e.SymWax,(n=t.utils).isNil,i=n.isntNil,n.isString,n.isFunction,t.logger,s=r.utils,a=r.constants,s.isInputElement,o=s.isWaxForm,u=s.isWaxLoginForm,l=s.isWaxCardForm,c=s.isWaxChangePasswordForm,h=r.telemetryWrapper,p=r.formDataLoaderCS,f={_fillRecords:[],fillForm:function(e,t,r){if(!o(e))throw new Error("waxForm must be a wax form type");var n;return f._fillRecords=[],n=e.fillForm(t,(function(e){f._fillRecords.push(e)})),f._applyAfterFillRule(),f._sendFillTelemetry(e,r),n},getRule:function(){var e=p.getFormData().getRule();if(i(e))return new r.Rule(e)},applyOnFillRule:function(e,t){var n=!1;if(i(t)&&i(e)){var s=f.getRule();i(s)&&(n=r.rulesEngine.applyOnFillRule(s,e,t))}return n},_applyAfterFillRule:function(){var e=f.getRule();i(e)&&r.rulesEngine.applyAfterFillRule(e)},_sendFillTelemetry:function(e,t){setTimeout((function(){if(u(e)||c(e)){for(var r=f._fillRecords,n=!1,i=!1,s=0;s<r.length;s++){var a=r[s];if(!0===a.isElementChanged&&(i=!0),a.elementFilled.value!==a.filledValue&&(n=!0),!0===i&&!0===n)break}!0===i&&h.sendWaxFieldChanged(document.location.hostname),!0===n&&h.sendWaxFillFailure(e.formType+"-"+document.location.hostname)}else l(e)&&h.sendWaxFormFill(t.siteDomain,e.formType)}),a.telemetry.VALIDATION_TIMEOUT)}})}(window),function(e){e.SymWax.main=function(e,t){var r={},n=t.formDataLoaderCS,i=t.parser,s=t.fieldMapping,a=t.fieldGroupMapping,o=t.groupCategorization,u=e.utils.isNil,l=e.utils.isntNil,c=(e.utils.isString,e.utils.isBoolean),h=e.logger,p=e.utils.isFunction,f=t.utils,d=t.constants,g=d.messages,m=e.utils.isEmptyObject,y=e.utils.isArray,E=(t.telemetryWrapper,e.extensionAdapter),v=e.performanceReporterFactoryProxy;r._fieldMappingResults=null,r._groupCategorizationResults=null,r._formData={},r._parsePreference={},r._isBeingCalledInIntervals=!1,r._timerId=0,r._retryIteration=0,r._retryTimeOut=0,r._parsedWaxDoms=[],r._startTime=0,r._endTime=0,r._disableAjaxSupport=!1,r._rule=null,r._engineRule=null,r._analysisDone=!1,r._pageShowEventAdded=!1,r._addedMessageListener=!1,r._createLoginForm=function(e,r){return new t.WaxLoginForm(e,r)},r._createCardForm=function(e,r){return new t.WaxCardForm(e,r)},r._createPersonalInfoForm=function(e,r){return new t.WaxPersonalInfoForm(e,r)},r._createChangePasswordForm=function(e,r){return new t.WaxChangePasswordForm(e,r)},r._createInteractiveForm=function(e,r){return new t.WaxInteractionForm(e,r)},r._formFactory={},r._formFactory[d.groupType.PARTIAL_LOGIN]=r._createLoginForm,r._formFactory[d.groupType.LOGIN]=r._createLoginForm,r._formFactory[d.groupType.CARDS_PAGE]=r._createCardForm,r._formFactory[d.groupType.PERSONAL_INFO_PAGE]=r._createPersonalInfoForm,r._formFactory[d.groupType.CHANGE_PASSWORD_PAGE]=r._createChangePasswordForm,r._formFactory[d.groupType.LIMITED_CHANGE_PASSWORD_PAGE]=r._createChangePasswordForm,r._formFactory[d.groupType.PARTIAL_CHANGE_PASSWORD_PAGE]=r._createChangePasswordForm,r._formFactory[d.groupType.INTERACTION_PAGE]=r._createInteractiveForm,r.createFormObject=function(e,t){if(p(r._formFactory[t])){const n=r._formFactory[t](e,t);if(n)return n.init(),r._parsedWaxDoms.push(n),n}return null},r.getReadyState=function(){return document.readyState},r.getParsedWaxDoms=function(){return r._parsedWaxDoms},r._addMutationObserverForElement=function(e){if(!u(e)){var t=0;new MutationObserver((e=>{0!==t&&clearTimeout(t),t=setTimeout((function(){"complete"==r.getReadyState()&&r.analyzePage(),t=0}),500)})).observe(e,{attributes:!0,childList:!0,subtree:!0})}},r._addMutationObserverCC=function(e){e.map((e=>{let t=document.querySelectorAll(e)[0];r._addMutationObserverForElement(t)}))};let T=!1;return r.init=function(){r._addedMessageListener||E.addContentScriptMessageListener(r._handleMessage),r._addedMessageListener=!0,r._triggerAjaxRetry(),r._startTime=Date.now();var e=d.performanceReporter.TYPE.INIT+":"+Date.now();return v.reportStart(d.performanceReporter.COMPONENT.WAX,e),new Promise((function(i,s){var a=n.loadFormData();T=!1,a.then((function(){if(T=!0,r._formData=n.getFormData(),u(r._formData))return s(new Error("Invalid formData object returned"));var a=r._formData.getRule();if(l(a)&&(r._rule=new t.Rule(a)),r._parsePreference=r._formData.getParsePreference(),u(r._parsePreference)||!p(r._parsePreference.getParseCriterias))return s(new Error("Invalid parsepreference object returned"));var o=r._parsePreference.getParseCriterias();if(l(o)){if(o.indexOf(d.parseCriterias.DONT_PARSE)>-1)return i();-1===o.indexOf(d.parseCriterias.ENABLE_AJAX_SUPPORT)&&(r._disableAjaxSupport=!0)}var c=r._formData.getEngineRule();l(c)&&!m(c)&&(r._engineRule=new t.Rule(c));var f=r._parsePreference.getInitialParseDelay();if(u(f))return s(new Error("NULL initialParseDelay returned"));r._loadParseRetryInfo();var g=r._parsePreference.getMutationObserverTargetElement();l(g)&&g.length>0&&r._addMutationObserverCC(g),r._setAjaxParseRetryInfo(),setTimeout((function(){try{return r.analyzePage(),i()}catch(e){return h.info("Wax analyzePage failed: "+e),s(e)}}),f),v.reportEnd(d.performanceReporter.COMPONENT.WAX,e)}),(function(e){return h.info("Wax initialize failed: "+e),s(e)}))}))},r.handleBeforeUnload=function(){E.sendMessage({id:g.TOP_FRAME_UNLOAD_EVENT})},r.initWithThreshold=function(t){const n=d.performanceReporter.TYPE.INIT_WITH_THRESHOLD+":"+Date.now();v.reportStart(d.performanceReporter.COMPONENT.WAX,n),E.init();const i=function(e){p(t)&&t(e),!1!==e&&(r.init().catch((function(e){h.info(e)})),v.reportEnd(d.performanceReporter.COMPONENT.WAX,n))};if(!0===e.utils.isTopLevelWindow())return window.addEventListener("beforeunload",r.handleBeforeUnload,!0),void i(!0);E.sendMessage({id:g.CHECK_ANALYSIS_REQUIRED},i)},r._setAjaxParseRetryInfo=function(){if(!u(r._parsePreference)){var e=r._parsePreference.getAjaxParseRetryInfo();y(e)&&2===e.length&&(r._eventObjectRetryIteration=e[0],r._eventObjectRetryTimeout=e[1])}},r._callAnalyzePageInIntervals=function(){r._timerId=setInterval((function(){if(r._isBeingCalledInIntervals){if(r._retryIteration<=0)return clearInterval(r._timerId),void(r._timerId=0);r._retryIteration--}else r._isBeingCalledInIntervals=!0,r._retryIteration--;r.analyzePage()}),r._retryTimeOut)},r._eventObjectTimerId=0,r._isEventObjectBeingCalledInIntervals=!1,r._eventObjectRetryIteration=0,r._eventObjectRetryTimeout=0,r._callEventObjectAnalyzePageInIntervals=function(){!0!==r._disableAjaxSupport&&(0!==r._eventObjectTimerId&&(clearInterval(r._eventObjectTimerId),r._eventObjectTimerId=0),r._eventObjectTimerId=setInterval((function(){if(r._isEventObjectBeingCalledInIntervals){if(r._eventObjectRetryIteration<=0&&0!==r._eventObjectTimerId)return clearInterval(r._eventObjectTimerId),r._eventObjectTimerId=0,void r._setAjaxParseRetryInfo();r._eventObjectRetryIteration--}else r._isEventObjectBeingCalledInIntervals=!0,r._eventObjectRetryIteration--;r.analyzePage()}),r._eventObjectRetryTimeout))},r._triggerAjaxRetry=function(){var e={id:g.TRIGGER_AJAX_PARSE_RETRY};E.sendMessage(e)},r._handleMessage=function(e,t,n){if(!u(e)&&!u(e.id))switch(e.id){case g.TRIGGER_AJAX_PARSE_RETRY_RESPONSE:!0===r._analysisDone&&r._callEventObjectAnalyzePageInIntervals();break;case g.TRIGGER_FORCED_WAX_ANALYSIS:r._forceWAXAnalysis()}},r._forceWAXAnalysis=function(){(u(n.formDataPromise)||T)&&(n.formDataPromise=null,r.init().catch((function(e){h.info(e)})))},r._addEventObjectSubmitListener=function(e){e.forEach((function(e){e.removeEventObjectSubmitEvent(),e.addEventObjectSubmitListener(r._triggerAjaxRetry)}))},r._fieldsFoundCallback=null,r._fieldsFilter=null,r._categorizedFilterConfig=null,r.registerFieldsFoundCallback=function(e,t){if(!p(e))throw new Error("Invalid Callback function");r._fieldsFoundCallback=e,r._fieldsFilter=d.fieldFilter.type[t]||d.fieldFilter.type.ALL,t===d.fieldFilter.type.CATEGORIZED_EMAIL_FIELDS&&(r._categorizedFilterConfig={inputFieldType:d.fieldCategory.EMAIL,fieldTypesToCheck:d.emailFieldTypes})},r._processFieldsFoundCallback=function(e){if(u(e)||!p(r._fieldsFoundCallback))return;let n=[];e.forEach((function(e){if(m(e))return;let i=e.getFieldMapping();if(r._fieldsFilter===d.fieldFilter.type.CATEGORIZED_INPUT_FIELDS){let e=i.filter((e=>e instanceof t.WaxInputField||e instanceof t.WaxSelectField));n.push(...e)}else if(r._fieldsFilter===d.fieldFilter.type.CATEGORIZED_EMAIL_FIELDS){let e=i.filter((e=>{const t=e.getFieldType()===d.fieldType.EMAIL,n=e.getInputType()===d.inputType.TEXT,i=e.getInputType()===d.fieldCategory.EMAIL,s=e.getCategories()&&e.getCategories().some((e=>e===d.fieldCategory.EMAIL));return!n&&s&&r._addMutationObserverForElement(e.getElement()),i||n&&t||n&&s}));e.forEach((e=>{e.badgePositionData={},e.badgePositionData.getCurrentBadgePosition=t.utils.getBadgePositionAndSizeForField})),n.push(...e)}else if(r._fieldsFilter===d.fieldFilter.type.CATEGORIZED_INPUT_AND_NONINPUT_FIELDS){let t=e.getHtmlForm();if(l(t))n.push(...i);else{let e=i.filter((e=>e._fieldType!==d.fieldType.UNKNOWN));n.push(...e)}}else n.push(...i)})),r._fieldsFoundCallback(n)},r.analyzePage=function(){h.debug("WAX main analyzePage");var e=i.doParse(r._formData);if(u(e))return void h.info("We could not parse the page");l(r._rule)&&(t.rulesEngine.applyPostParseRule(r._rule,e),h.debug("[Postparse] Apply custom post parse rule for this page.")),r._categorizedFilterConfig&&l(r._engineRule)&&!m(r._engineRule)&&(t.rulesEngine.applyPostParseRule(r._engineRule,e,r.analyzePage),h.debug("[Postparse] Apply custom post parse engine rule for this page."));(r._parsePreference.getRegexEnabledFields()||[]).length>0&&r.useIntensePatternMatching(!0),r._fieldMappingResults=s.processPage(e,r._formData,r._useIntensePatternMatching,r._categorizedFilterConfig),a.processPage(r._fieldMappingResults,r._formData),r._processFieldsFoundCallback(r._fieldMappingResults),r._groupCategorizationResults=o.processPage(r._fieldMappingResults,r._formData),r._processGroupCategorizationResults(),r._analysisDone=!0,r._endTime=Date.now(),0===r._retryIteration||r._isBeingCalledInIntervals||r._callAnalyzePageInIntervals(),r._pageShowEventAdded||(r._pageShowEventAdded=!0,window.addEventListener("popstate",(function(e){r._setAjaxParseRetryInfo(),r._loadParseRetryInfo(),r.analyzePage()})))},r._loadParseRetryInfo=function(){var e=r._parsePreference.getParseRetryInfo();y(e)&&2===e.length&&(r._retryIteration=e[0],r._retryTimeOut=e[1])},r._processGroupCategorizationResults=function(){var e=d.performanceReporter.TYPE.PROCESS_GROUP_CATEGORIZATION_RESULTS+":"+Date.now();if(v.reportStart(d.performanceReporter.COMPONENT.WAX,e),u(r._groupCategorizationResults))throw new Error("Group categorizations results are Null");if(0===r._formsFoundCallbackArray.length)throw new Error("Should have at least one callback");r._parsedWaxDoms.length>0&&r._removeFormSubmitEventListeners();var t=r._groupCategorizationResults;r._parsedWaxDoms=[],r._addEventObjectSubmitListener(t);for(var n=0;n<t.length;n++){var i=t[n],s=i.getTopRankedFormType();r.createFormObject(i,s)}v.reportEnd(d.performanceReporter.COMPONENT.WAX,e),r._triggerFormsFound(r._parsedWaxDoms)},r._removeFormSubmitEventListeners=function(){r._parsedWaxDoms.forEach((function(e){e.unregisterFormSubmitEvent()}))},r._processSubmittedForm=function(e){f.isWaxForm(e)&&(e.captureData(),r._formSubmittedCallbackArray.forEach((function(t){try{t(e)}catch(e){h.info(e)}})))},r._formsFoundCallbackArray=[],r._triggerFormsFound=function(e){r._formsFoundCallbackArray.forEach((t=>{try{t(e)}catch(e){h.info(e)}}))},r.registerFormsFound=function(e){if(!p(e))throw new Error("Invalid Callback function");r._formsFoundCallbackArray.push(e)},r._formSubmittedCallbackArray=[],r.registerFormSubmitted=function(e){if(!p(e))throw new Error("Invalid Callback function");r._formSubmittedCallbackArray.push(e)},r._useIntensePatternMatching=!1,r.useIntensePatternMatching=function(e){if(!c(e))throw new Error("Invalid useIntensePatternMatching argument");r._useIntensePatternMatching=e},r}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.waxFormChangeHandler=function(e,t){const{utils:r,logger:n}=e,{WaxForm:i,constants:s,utils:a}=t,{isFunction:o,isNil:u,isArray:l,isString:c,isntNil:h}=r,{formEvents:{ALL_FORM_ELEMENTS_REMOVED:p}}=s,f={attributes:!1,subtree:!0,childList:!0},d=s.DATA_NLOCK_REF_GUID;return new class{constructor(){this.registerForChange=this.registerForChange.bind(this),this.doesFormExist=this.doesFormExist.bind(this)}_getCategorizedHTMLElements(e){const t=e.getCategorizedWaxFields();if(0!==t.length)return t.map((e=>e.getElement()))}doesFormExist(e){if(!(e instanceof i))throw new Error("waxForm has to be of type WaxForm");const t=this._getAllReferenceGuidsOnForm(e).map((e=>`[${d}='${e}']`)).join(",");return this._doesElementsExist(t)}_doesElementsExist(e){if(!c(e)||0===e.length)return n.error("refGuidsSelector should be a valid string"),!0;const t=document.querySelectorAll(e);return 0!==t.length&&!Array.from(t).every((e=>!a.isElementVisible(e)))}_setReferenceGuidsOnTargetElements(e){Array(e.length).fill(0).map(r.createNewGuid).forEach(((t,r)=>{e[r].setAttribute(d,t)}))}_getAllReferenceGuidsOnForm(e){const t=this._getCategorizedHTMLElements(e);return u(t)?[]:t.filter((e=>e.hasAttribute(d))).map((e=>e.getAttribute(d)))}registerForChange({waxForm:e,callback:t}){if(!(e instanceof i))throw new Error("waxForm has to be of type WaxForm");if(!o(t))throw new Error("callback has to be of type Function");const r=this._getCategorizedHTMLElements(e).filter((e=>!e.hasAttribute(d)));if(!l(r)||0==r.length)return void n.debug("WaxSLD:: Either already registred or doesnt require registration");this._setReferenceGuidsOnTargetElements(r);const s=this._getAllReferenceGuidsOnForm(e).map((e=>`[${d}='${e}']`)).join(","),a=e.getFormType();let u=0;const c=new MutationObserver((()=>{0!==u&&clearTimeout(u),u=setTimeout((()=>{this._onElementsChange.bind(this,{refGuidsSelector:s,callback:()=>{c.disconnect(),t({type:p,formType:a})}})(),u=0}),500)}));e.addObserverToForm(c,f)}_onElementsChange({refGuidsSelector:e,callback:t}){this._doesElementsExist(e)||t()}}}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.IFormSubmissionClient=(e.SymBfw,e.SymWax,class{onLoginFormSubmission(e,t){throw new Error("Should be implemented by derived object")}async processSubmissionPayload(e){throw new Error("Should be implemented by derived object")}getConfig(){throw new Error("Should be implemented by derived object")}})}(window),function(e){"use strict";e.SymWax.waxFormSubmissionHandlerCS=function(e,t){const{extensionAdapter:r,utils:n,logger:i}=e,{isString:s,isArray:a,isntNil:o,isNil:u,isObject:l}=n,{constants:c,utils:h,main:p,waxFormChangeHandler:f}=t,{messages:d,groupType:g,formEvents:{FORMS_FOUND:m,FORM_SUBMIT:y,ALL_FORM_ELEMENTS_REMOVED:E}}=c,{LOGIN:v,PARTIAL_LOGIN:T,INTERACTION_PAGE:A}=g,{isWaxLoginForm:S,isWaxForm:_}=h,b=[v,T],C=[...b,A],I=e=>s(e)&&e.trim().length>0;return new class{constructor(){this._formSubmissionClient=null,this._handleFormsFound=this._handleFormsFound.bind(this),this._handleFormSubmit=this._handleFormSubmit.bind(this),this._isAlreadyFoundForm=this._isAlreadyFoundForm.bind(this),this._handleMessage=this._handleMessage.bind(this),this._initListeners()}_getPrimaryLoginForm(e){const t=e.filter(S).reverse();if(0===t.length)return;if(1===t.length)return t[0];const r=t.filter((e=>e.isFormComplete()));return r.length>0?r[0]:t[0]}_isAlreadyFoundForm(e){const t=e.getCategorizedWaxFields();return 0!==t.length&&t.map((e=>e.getElement())).every((e=>e.hasAttribute(c.DATA_NLOCK_REF_GUID)))}_doesPasswordFieldExist(e){const t=e.getCategorizedWaxFields();return 0!==t.length&&t.map((e=>e.getFieldType())).includes(c.fieldType.PASSWORD)}_isCompletionStepPartialLoginForm(e){return!!this._doesPasswordFieldExist(e)}_handleLoginFormFound(e,t){const n=this._getPrimaryLoginForm(e);if(this._isAlreadyFoundForm(n))return void i.debug("WaxSLD:: Already found form");const s=t.includes(T),a={id:m,payload:{senderURL:document.URL,formTypes:t}};if(f.registerForChange({waxForm:n,callback:this._handleFormChange}),!s)return r.sendMessage(a),void i.debug("WaxSLD:: Complete Login form found");if(!this._isCompletionStepPartialLoginForm(n)){const e=t.indexOf(T);t.splice(e,1),i.debug("WaxSLD:: Filtering intermittent login form")}0!==t.length&&(r.sendMessage(a),i.debug("WaxSLD:: Discarding subscription form"))}_handleFormsFound(e){if(!a(e)||0===e.length)return;if(!e.every(_))return;const t=e.map((e=>e.getFormType()));if(!t.some((e=>C.includes(e))))return void i.debug("WaxSLD:: Potential form doesn't exist");const n={id:m,payload:{senderURL:document.URL,formTypes:t}};if(!t.some((e=>b.includes(e))))return r.sendMessage(n),void i.debug("WaxSLD:: Interactive form found");this._handleLoginFormFound(e,t)}_handleFormSubmit(e){S(e)&&this._handleLoginFormSubmit(e)}_handleLoginFormSubmitForIframe(e){}async _handleLoginFormSubmit(e){const t={username:e.getUsername(),password:e.getPassword()},n=I(t.username),s=I(t.password),{_formType:a}=e;if(!(a!==v||n&&s))return void i.debug("WaxSLD:: Not saving credentials as username or password field is empty");if(a===T&&!n&&!s)return void i.debug("WaxSLD:: Not saving credentials as both the fields are empty");let l={senderURL:document.URL,formType:a,loginInfo:t};o(this._formSubmissionClient)&&(l=await this._formSubmissionClient.processSubmissionPayload(l)),u(l)?i.error("Got nil payload from formSubmissionClient"):r.sendMessage({id:y,payload:l})}_handleFormChange(e){if(e.type===E){const t={id:E,payload:{senderURL:document.URL,formType:e.formType}};r.sendMessage(t)}}_doesCompletionStepLoginFormExist(){const e=p.getParsedWaxDoms();if(0===e.length)return!1;const t=this._getPrimaryLoginForm(e);if(u(t))return!1;return!!this._isCompletionStepPartialLoginForm(t)&&f.doesFormExist(t)}_handleFormExist(e,t){if(e!==v)t(!1);else{t(this._doesCompletionStepLoginFormExist())}}_handleMessage(e,t){if(!u(e)&&!u(e.id)&&l(e.payload))return e.id===d.DOES_FORM_EXIST?(this._handleFormExist(e.payload.formType,t),!0):void 0}registerFormSubmissionClient(e){if(!(e instanceof t.IFormSubmissionClient))throw new Error("formSubmissionClient has to be of type IFormSubmissionClient");this._formSubmissionClient=e}_initListeners(){p.registerFormsFound(this._handleFormsFound),p.registerFormSubmitted(this._handleFormSubmit),r.addContentScriptMessageListener(this._handleMessage)}}}(e.SymBfw,e.SymWax)}(window),function(e){"use strict";e.SymWax.WaxChangePasswordForm=function(e,t){const r=t.utils.isWaxField,n=e.utils.isntNil,i=t.constants,s=(t.utils.isInputElement,t.utils,e.logger),a=e.utils.isNil,o=e.utils.isString,u=e.utils.isFunction;var l=null,c=function(e,r){t.WaxForm.call(this,e,r),this._password=null,this._newPasswordWaxField=null,this._confirmPasswordWaxField=null,this._vaultItemID=null,this._formFiller=t.formFiller};return(c.prototype=Object.create(t.WaxForm.prototype)).init=function(){const e=this._waxDom.getCategorizedWaxFields();for(let t in e){let r=e[t];switch(r.getFieldType()){case i.fieldType.NEW_PASSWORD:case i.fieldType.PASSWORD:this.setNewPasswordWaxField(r);break;case i.fieldType.VERIFY_PASSWORD:this.setConfirmPasswordWaxField(r)}}this.registerFormSubmitEvent(e),this._setInputElementForPopup(),this._addFormSubmitListener(),n(this._newPasswordWaxField)&&s.debug("Field Type for Number : "+this._newPasswordWaxField.getFieldType()+"\n"),n(this._confirmPasswordWaxField)&&s.debug("Field Type for Name : "+this._confirmPasswordWaxField.getFieldType()+"\n")},c.prototype.getNewPasswordWaxField=function(){return this._newPasswordWaxField},c.prototype.setNewPasswordWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._newPasswordWaxField=e},c.prototype.getConfirmPasswordWaxField=function(){return this._confirmPasswordWaxField},c.prototype.setConfirmPasswordWaxField=function(e){if(!r(e))throw new Error("waxField must be a wax field");this._confirmPasswordWaxField=e},c.prototype.getPassword=function(){return this._password},c.prototype.setPassword=function(e){if(!o(e))throw new Error("Password must be a string");this._password=e},c.prototype.getVaultItemId=function(){return this._vaultItemID},c.prototype.setVaultItemID=function(e){if(!o(e))throw new Error("VaultItemId must be a string");this._vaultItemID=e},c.prototype._getInputElementsForPopup=function(){let e=[];if(n(this._newPasswordWaxField)){const t=this._newPasswordWaxField.getElement();n(t)&&e.push(this._newPasswordWaxField)}if(n(this._confirmPasswordWaxField)){const t=this._confirmPasswordWaxField.getElement();n(t)&&e.push(this._confirmPasswordWaxField)}return e},c.prototype.getFieldsForStyling=function(){let e=[this._newPasswordWaxField,this._confirmPasswordWaxField];return this.removeHiddenFields(e)},c.prototype.isFormComplete=function(){return!a(this._newPasswordWaxField)||!a(this._confirmPasswordWaxField)},c.prototype.fillForm=function(e,t){if(a(e)||a(e.result.password))return!1;if(!u(t))return!1;const r=n(this._newPasswordWaxField),i=n(this._confirmPasswordWaxField);if(!r&&!i)return!1;let s=!0;return r&&(this.setPassword(e.result.password),s=this._newPasswordWaxField.fill(this._password,t)),i&&(this.setPassword(e.result.password),s=s&&this._confirmPasswordWaxField.fill(this._password,t)),l=e.itemId,s},c.prototype.getFieldsVisibility=function(){var e=[this._newPasswordWaxField,this._confirmPasswordWaxField];return this._getFieldsVisibility(e)},c.prototype.captureData=function(){var e=this.getNewPasswordWaxField();if(!a(e)){var t=e.getElement();if(!a(t)){var r=t.value;o(r)&&this.setPassword(r),n(l)&&(this.setVaultItemID(l),l=null)}}},c}(e.SymBfw,e.SymWax)}(window),e.exports=SymWax})),i.register("4oiDb",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0})})),i.register("l8jEC",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MessageListener=void 0;var r=i("eTtHm"),n=function(){function e(){}return e.prototype.init=function(){r.browser.runtime.onMessage.addListener(this.messageHandler.bind(this))},e.prototype.messageHandler=function(e,t){var r=this.messageMap[null==e?void 0:e.id];return!!r&&r(e,t)},e}();e.exports.MessageListener=n})),i.register("eTtHm",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.browser=i("49Dt9")})),i.register("49Dt9",(function(e,t){var r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The message port closed before a response was received.",r="Returning a Promise is the preferred way to send a reply from an onMessage/onMessageExternal listener, as the sendResponse will be removed from the specs (See https://developer.mozilla.org/docs/Mozilla/Add-ons/WebExtensions/API/runtime/onMessage)",n=e=>{const n={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(n).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class i extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=(t,r)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},a=e=>1==e?"argument":"arguments",o=(e,t,r)=>new Proxy(t,{apply:(t,n,i)=>r.call(n,e,...i)});let u=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},r={})=>{let n=Object.create(null),i={has:(t,r)=>r in e||r in n,get(i,c,h){if(c in n)return n[c];if(!(c in e))return;let p=e[c];if("function"==typeof p)if("function"==typeof t[c])p=o(e,e[c],t[c]);else if(u(r,c)){let t=((e,t)=>function(r,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((i,a)=>{if(t.fallbackToNoCallback)try{r[e](...n,s({resolve:i,reject:a},t))}catch(s){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,s),r[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,i()}else t.noCallback?(r[e](...n),i()):r[e](...n,s({resolve:i,reject:a},t))}))})(c,r[c]);p=o(e,e[c],t)}else p=p.bind(e);else if("object"==typeof p&&null!==p&&(u(t,c)||u(r,c)))p=l(p,t[c],r[c]);else{if(!u(r,"*"))return Object.defineProperty(n,c,{configurable:!0,enumerable:!0,get:()=>e[c],set(t){e[c]=t}}),p;p=l(p,t[c],r["*"])}return n[c]=p,p},set:(t,r,i,s)=>(r in n?n[r]=i:e[r]=i,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(n,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},c=Object.create(e);return new Proxy(c,i)},c=e=>({addListener(t,r,...n){t.addListener(e.get(r),...n)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),h=new i((e=>"function"!=typeof e?e:function(t){const r=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}));let p=!1;const f=new i((e=>"function"!=typeof e?e:function(t,n,i){let s,a,o=!1,u=new Promise((e=>{s=function(t){p||(console.warn(r,(new Error).stack),p=!0),o=!0,e(t)}}));try{a=e(t,n,s)}catch(e){a=Promise.reject(e)}const l=!0!==a&&(c=a)&&"object"==typeof c&&"function"==typeof c.then;var c;if(!0!==a&&!l&&!o)return!1;const h=e=>{e.then((e=>{i(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",i({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return h(l?a:u),!0})),d=({reject:r,resolve:n},i)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():r(new Error(e.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?r(new Error(i.message)):n(i)},g=(e,t,r,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,t)=>{const i=d.bind(null,{resolve:e,reject:t});n.push(i),r.sendMessage(...n)}))},m={devtools:{network:{onRequestFinished:c(h)}},runtime:{onMessage:c(f),onMessageExternal:c(f),sendMessage:g.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:g.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return n.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},l(e,m,n)};if("object"!=typeof chrome||!chrome||!chrome.runtime||!chrome.runtime.id)throw new Error("This script should only be loaded in a browser extension.");e.exports=n(chrome)}else e.exports=browser},"function"==typeof define&&define.amd?define("webextension-polyfill",["module"],r):r(e)})),i.register("5GAFo",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DOCUMENT_CLICK=void 0,e.exports.DOCUMENT_CLICK="documentClick"})),i.register("g8bpu",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("cSIau"),e.exports),n(i("ibReP"),e.exports)})),i.register("cSIau",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.NORTON_PASSWORD_MANAGER_DIV_ID=e.exports.BADGE_POSITION_CALCULATION_DELAY_IN_MS=e.exports.Z_INDEX=e.exports.DIV_ID=void 0,e.exports.DIV_ID="badge-styling-divId",e.exports.Z_INDEX=2147483646,e.exports.BADGE_POSITION_CALCULATION_DELAY_IN_MS=100,e.exports.NORTON_PASSWORD_MANAGER_DIV_ID="norton-idsafe-field-styling-divId"})),i.register("ibReP",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MOUSE_DOWN_EVENT=e.exports.MOUSE_UP_EVENT=e.exports.KEY_DOWN_EVENT=e.exports.CLICK_EVENT=void 0,e.exports.CLICK_EVENT="click",e.exports.KEY_DOWN_EVENT="keydown",e.exports.MOUSE_UP_EVENT="mouseup",e.exports.MOUSE_DOWN_EVENT="mousedown"})),i.register("bKelf",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("hoHVz"),e.exports)})),i.register("hoHVz",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.badgeUI=void 0;var r=i("g8bpu"),n=i("cV11G"),s=function(){function e(){}return e.prototype.createImageAndAttachToDocument=function(e,t,i,s,a){if(t){this._removeFieldStylingElement(a);var o=document.createElement("div");o.setAttribute("id","".concat(r.DIV_ID,"-").concat(a));var u=(0,n.getStringFromObject)(t.position);u="".concat(u,";cursor: pointer;resize: both;z-index: ").concat(r.Z_INDEX,";"),o.setAttribute("style",u);var l=document.createElement("img");l.setAttribute("src",i);var c=(0,n.getStringFromObject)(t.size);l.setAttribute("style",c),o.appendChild(l),s&&o.addEventListener(r.CLICK_EVENT,(function(e){e.stopPropagation(),e.preventDefault(),s(e.currentTarget)})),e.parentElement.appendChild(o)}},e.prototype._removeFieldStylingElement=function(e){document.querySelectorAll("#".concat(r.DIV_ID,"-").concat(e)).forEach((function(e){e.remove()}))},e.prototype.showBadgeUI=function(e,t,r){var n=this;e.forEach((function(e){e.emailField&&n.createImageAndAttachToDocument(e.emailField,e.badgePositionData,t,r,e.guid)}))},e}();e.exports.badgeUI=new s})),i.register("cV11G",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("htVc4"),e.exports)})),i.register("htVc4",(function(e,t){"use strict";function r(e,t){e.dispatchEvent(new Event("keydown",{bubbles:!1,cancelable:!1})),e.dispatchEvent(new Event("keypress",{bubbles:!1,cancelable:!1})),e.value=t,e.dispatchEvent(new Event("input",{bubbles:!0})),e.dispatchEvent(new Event("keyup",{bubbles:!1,cancelable:!1})),e.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getSiblingElements=e.exports.setInputFieldValue=e.exports.simulateTyping=e.exports.debounce=e.exports.getStringFromObject=void 0,e.exports.getStringFromObject=function(e){return Object.entries(e).map((function(e){var t=e[0],r=e[1];return"".concat(t,":").concat(r)})).join(";")},e.exports.debounce=function(e,t){var r;return function(){clearTimeout(r),r=setTimeout(e,t)}},e.exports.simulateTyping=r,e.exports.setInputFieldValue=function(e,t){e.focus(),r(e,"");for(var n="",i=0,s=t;i<s.length;i++){r(e,n+=s[i])}},e.exports.getSiblingElements=function(e){if(!e.parentNode)return[];var t=e.parentNode.children;return Array.from(t).filter((function(t){return t!==e}))}})),i.register("i3xLZ",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("gHINn"),e.exports),n(i("5kN5Q"),e.exports)})),i.register("gHINn",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("9CLrm"),e.exports)})),i.register("9CLrm",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DASHBOARD_MESSAGES=e.exports.CONTENT_MESSAGES=e.exports.BG_MESSAGES=void 0,e.exports.BG_MESSAGES={emailFieldDetected:"PE_BG_EMAIL_FIELD_DETECTED",checkAlias:"PE_BG_CHECK_ALIAS",createAlias:"PE_BG_CREATE_ALIAS",getAlias:"PE_BG_GET_ALIAS",getLicense:"PE_BG_GET_LICENSE",getProtectedEmails:"PE_BG_GET_PROTECTED_EMAILS",getTenantMapping:"PE_BG_GET_TENANT_MAPPING",updateAlias:"PE_BG_UPDATE_ALIAS",updateProtectedEmail:"PE_BG_UPDATE_PROTECTED_EMAIL",verifyProtectedEmail:"PE_BG_VERIFY_PROTECTED_EMAIL",deleteProtectedEmail:"PE_BG_DELETE_PROTECTED_EMAIL",generateEmailAlias:"PE_BG_GENERATE_EMAIL_ALIAS",getAccountEmail:"PE_BG_GET_ACCOUNT_EMAIL",sendVerificationEmail:"PE_BG_SEND_VERIFICATION_EMAIL",setOnboardingComplete:"PE_BG_SET_ONBOARDING_COMPLETE",sendTelemetry:"PE_BG_SEND_TELEMETRY",canOpenDashboard:"PE_BG_CAN_OPEN_DASHBOARD"},e.exports.CONTENT_MESSAGES={helloWorld:"PE_CONTENT_HELLO_WORLD"},e.exports.DASHBOARD_MESSAGES={closeDashboard:"CLOSE_DASHBOARD"}})),i.register("5kN5Q",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("clLeO"),e.exports),n(i("4unxR"),e.exports),n(i("ispDR"),e.exports),n(i("l77Pc"),e.exports),n(i("7ixzt"),e.exports),n(i("cHjmU"),e.exports),n(i("3Ddzb"),e.exports),n(i("amAU4"),e.exports),n(i("2FFNy"),e.exports),n(i("cqn4I"),e.exports),n(i("8JwlT"),e.exports),n(i("bLl5M"),e.exports),n(i("gKBp7"),e.exports)})),i.register("clLeO",(function(e,t){"use strict";var r;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ActionType=void 0,(r=e.exports.ActionType||(e.exports.ActionType={})).LAUNCH_DASHBOARD_PAGE="LAUNCH_DASHBOARD_PAGE",r.SAVE_NEW_EMAIL_MASK="SAVE_NEW_EMAIL_MASK",r.CREATE_NEW_EMAIL_MASK="CREATE_NEW_EMAIL_MASK",r.GENERATE_NEW_EMAIL_MASK="GENERATE_NEW_EMAIL_MASK",r.FETCH_EMAIL_MASKS="FETCH_EMAIL_MASKS",r.CHECK_SDK_INIT_REQUIRED="CHECK_SDK_INIT_REQUIRED",r.FETCH_BADGE_UI_CONFIG="FETCH_BADGE_UI_CONFIG",r.FETCH_DROP_DOWN_UI_CONFIG="FETCH_DROP_DOWN_UI_CONFIG",r.ADD_RECENTLY_USED_ALIAS="ADD_RECENTLY_USED_ALIAS",r.GET_ONBOARDING_SHOWN_STATUS="GET_ONBOARDING_SHOWN_STATUS",r.SET_ONBOARDING_SHOWN_STATUS="SET_ONBOARDING_SHOWN_STATUS",r.SEND_TELEMETRY="SEND_TELEMETRY",r.FETCH_AUTOFILL_UI_CONFIG="FETCH_AUTOFILL_UI_CONFIG",r.FETCH_EMAIL_FIELD_CONFIG="FETCH_EMAIL_FIELD_CONFIG",r.GET_PROTECTED_EMAILS="GET_PROTECTED_EMAILS",r.GET_PRODUCT_FACTS="GET_PRODUCT_FACTS",r.INVOKE_LOGIN="INVOKE_LOGIN",r.OPEN_APP="OPEN_APP",r.SEND_FILL_MASK_TELEMETRY="SEND_FILL_MASK_TELEMETRY"})),i.register("4unxR",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AUTOFILL_UI_TYPES=void 0,e.exports.AUTOFILL_UI_TYPES={ONBOARDING_FLOW:"ONBOARDING_FLOW",GENERATE_NEW_POPUP:"generateNew"}})),i.register("ispDR",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0})})),i.register("l77Pc",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BadgeConfig=void 0;var r=function(){};e.exports.BadgeConfig=r})),i.register("7ixzt",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AUTOFILL_BG_MESSAGES=void 0,e.exports.AUTOFILL_BG_MESSAGES={AUTOFILL_ACTION_REQUEST:"AUTOFILL_ACTION_REQUEST",AUTOFILL_EVENT_TRIGGERED:"AUTOFILL_EVENT_TRIGGERED",FILL_EMAIL_MASK:"FILL_EMAIL_MASK",CREATE_EMAIL_MASK_CLICK:"CREATE_EMAIL_MASK_CLICK",UPDATE_IFRAME_SIZE:"UPDATE_IFRAME_SIZE",SHOW_POPUP:"SHOW_POPUP",CLOSE_AUTOFILL_POPUP:"CLOSE_AUTOFILL_POPUP",CLOSE_ICON_CLICKED:"CLOSE_ICON_CLICKED"}})),i.register("cHjmU",(function(e,t){"use strict";var r;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.OnboardingCompleteContext=void 0,(r=e.exports.OnboardingCompleteContext||(e.exports.OnboardingCompleteContext={})).DASHBOARD="DASHBOARD",r.FORMFIELD="FORMFIELD"})),i.register("3Ddzb",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.SPECIAL_CHARS_REGEX=e.exports.LABEL_MAX_LENGTH=e.exports.EMAIL_MAX_LENGTH=e.exports.ALIAS_MAX_LENGTH=void 0,e.exports.ALIAS_MAX_LENGTH=180,e.exports.EMAIL_MAX_LENGTH=254,e.exports.LABEL_MAX_LENGTH=100,e.exports.SPECIAL_CHARS_REGEX=/@|_/})),i.register("amAU4",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.DropDownConfig=void 0;var r=function(){};e.exports.DropDownConfig=r})),i.register("2FFNy",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0})})),i.register("cqn4I",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EmailMask=void 0;var r=function(){};e.exports.EmailMask=r})),i.register("8JwlT",(function(e,t){"use strict";var r;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ErrorCode=void 0,(r=e.exports.ErrorCode||(e.exports.ErrorCode={}))[r.USER_LOGGED_OUT=1]="USER_LOGGED_OUT",r[r.NO_ACTIVE_SUBSCRIPTION=2]="NO_ACTIVE_SUBSCRIPTION",r[r.INVALID_VERIFICATION_CODE=32]="INVALID_VERIFICATION_CODE"})),i.register("bLl5M",(function(e,t){"use strict";var r;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.EventType=void 0,(r=e.exports.EventType||(e.exports.EventType={})).EMAIL_FIELD_FOUND="EMAIL_FIELD_FOUND",r.ENTRY_FLOW_SHOWN="ENTRY_FLOW_SHOWN",r.EMAIL_MASK_CREATED="EMAIL_MASK_CREATED",r.EMAIL_MASK_SELECTED="EMAIL_MASK_SELECTED",r.CREATE_EMAIL_MASK_CLICK="CREATE_EMAIL_MASK_CLICK",r.UPDATE_IFRAME_SIZE="UPDATE_IFRAME_SIZE",r.SHOW_POPUP="SHOW_POPUP",r.CLOSE_AUTOFILL_POPUP="CLOSE_AUTOFILL_POPUP",r.SEND_NPW_TELEMETRY="SEND_NPW_TELEMETRY"})),i.register("gKBp7",(function(e,t){"use strict";var r,n;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.TelemetryCTAData=e.exports.TelemetryCTAName=e.exports.TelemetryEventName=void 0,e.exports.TelemetryEventName="ui_cta",(r=e.exports.TelemetryCTAName||(e.exports.TelemetryCTAName={})).aliasFilled="pe_af_alias_filled",r.aliasFillFailed="pe_af_alias_fill_fail",r.atIconClick="pe_af_infieldATicon",r.chooseAliasGenerate="pe_af_alias_choose_generate",r.chooseAliasRelevant="pe_af_alias_choose_relv",r.chooseAliasSeeAll="pe_af_alias_choose_seeall",r.chooseAliasShown="pe_af_alias_choose",r.commonErrorRetryClick="pe_af_common_error_retry",r.createAliasUICloseClicked="MOT_cancel_alias_creation",r.createEmailMaskShown="pe_af_ob_createmask_dd_UI",r.createMaskDescUpdate="pe_af_Onb_modal_desupdate",r.createMaskRegenerateClick="pe_af_Onb_modal_Regenerate",r.generateButtonClicked="MOT_create_random",r.generateMaskClicked="MOT_regenerate",r.generateNewChoose="pe_af_create_random_choose",r.generateNewOptionClick="pe_af_alias_choose_generate",r.generateNewOptionClicked="MOT_generate_new",r.generateNewUIShown="MOT_create_alias",r.npwExists="pe_af_npw_exists",r.onboardingCreateAliasCloseClicked="MOT_onboard_cancel_alias_creation",r.onboardingCreateEmailMaskClicked="MOT_onboard_create_random",r.onboardingPopupCreate="pe_af_ob_createmask_dd_UI_create",r.onboardingPopupClose="pe_af_ob_createmask_dd_UI_close",r.relevantAliasChoose="pe_af_relv_UI_choose",r.relevantAliasSeeAllClick="pe_af_relv_UI_seeall",r.relevantAliasUiShown="pe_af_relv_UI",r.relevantMasksOptionClick="pe_af_alias_choose_relv",r.seeAllAliasChoose="pe_af_seeall_alias_UI_choose",r.seeAllAliasSeeAllClick="pe_af_seeall_alias_UI_seeall",r.seeAllAliasUiShown="pe_af_seeall_alias_UI",r.setupAliasGenerate="pe_af_setup_alias_generate",r.setupAliasSeeAll="pe_af_setup_alias_seeall",r.setupAliasShown="pe_af_setup_alias",r.showOnboardingUIShown="MOT_onboard_create_alias",r.useMaskClicked="MOT_use_mask",r.commonErrorShown="pe_af_common_error",r.fetchUIConfigError="pe_af_fetchUIConfig_error",r.licenseError="pe_af_licenseerror",r.saveNewEmailMaskError="pe_af_saveNewEmailMask_error",r.signInError="pe_af_Signin_error",r.dashboardAliasModify="dashboard_alias_modify",r.dashboardAliasModifyDesc="dashboard_alias_modify_desc",r.dashboardAliasModifyEmail="dashboard_alias_modify_email",r.dashboardCancelAliasCreation="dashboard_cancel_alias_creation",r.dashboardChangeRealEmail="dashboard_change_real_email",r.dashboardChangeRealEmailCancel="dashboard_change_real_email_cancel",r.dashboardChangeRealEmailConfirm="dashboard_change_real_email_confirm",r.dashboardCreateAlias="dashboard_create_alias",r.dashboardCreateManual="dashboard_create_manual",r.dashboardCreateRandom="dashboard_create_random",r.dashboardDeleteMask="dashboard_delete_mask",r.dashboardDeleteMaskConfirm="dashboard_delete_mask_confirm",r.dashboardDeleteMaskNotNow="dashboard_delete_mask_notnow",r.dashboardDeleteMaskPauseForwarding="dashboard_delete_mask_pauseforwarding",r.dashboardDeleteRealEmail="dashboard_delete_real_email",r.dashboardDeleteRealEmailCancel="dashboard_delete_real_email_cancel",r.dashboardDeleteRealEmailConfirm="dashboard_delete_real_email_confirm",r.dashboardForwardOff="dashboard_forward_off",r.dashboardForwardOn="dashboard_forward_on",r.dashboardModifyCancel="dashboard_modify_cancel",r.dashboardModifyForwardOff="dashboard_modify_forward_off",r.dashboardModifyForwardOn="dashboard_modify_forward_on",r.dashboardModifySave="dashboard_modify_save",r.dashboardOnboardCreateAlias="dashboard_onboard_create_alias",r.dashboardOnboardCreateManual="dashboard_onboard_create_manual",r.dashboardOnboardCreateNext="dashboard_onboard1_next",r.dashboardOnboardCreateRandom="dashboard_onboard_create_random",r.dashboardOnboardCreateRegenerate="dashboard_onboard1_regenerate",r.dashboardOnboardGetStartedNoAlias="dashboard_onboard_get_started_no_alias",r.dashboardOnboardProtectBack="dashboard_onboard2_back",r.dashboardOnboardProtectNext="dashboard_onboard2_next",r.dashboardOnboardReadyBack="dashboard_onboard3_back",r.dashboardOnboardVerified="dashboard_onboard_verified",r.dashboardOnboardVerifyEmail="dashboard_onboard_verify_email",r.dashboardOnboardVerifyEmailClose="dashboard_onboard_verify_email_close",r.dashboardOnboardVerifyResend="dashboard_onboard_verify_resend",r.dashboardVerified="dashboard_verified",r.dashboardVerifyAddEmail="dashboard_verify_add_email",r.dashboardVerifyEmail="dashboard_verify_email",r.dashboardVerifyEmailClose="dashboard_verify_email_close",r.dashboardVerifyResend="dashboard_verify_resend",r.settingsClicked="settings_clicked",r.settingsPageView="settings_page_view",r.settingsAddRealEmail="settings_add_real_email",(n=e.exports.TelemetryCTAData||(e.exports.TelemetryCTAData={})).change="change",n.click="click",n.dismiss="dismiss",n.fill_url="fill_URL",n.present="yes",n.show="show"})),i.register("bdbwF",(function(e,t){"use strict";var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e.exports&&e.exports.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e.exports,"__esModule",{value:!0}),n(i("8Ajiu"),e.exports)})),i.register("8Ajiu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getDifferenceInDays=e.exports.getFormattedDate=e.exports.getEmailFieldRect=void 0,e.exports.getEmailFieldRect=function(e){return{x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,bottom:e.bottom,left:e.left,right:e.right}},e.exports.getFormattedDate=function(e,t){var r={mm:e.getMonth()+1,dd:e.getDate(),yyyy:e.getFullYear()};return t.replace(/mm|dd|yyyy/gi,(function(e){return r[e]}))},e.exports.getDifferenceInDays=function(e,t){return Math.trunc((e.getTime()-t.getTime())/864e5)}}));var s={},a=s&&s.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=s&&s.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(s,"__esModule",{value:!0}),o(i("eDPnM"),s),o(i("jKPaA"),s),o(i("g7GFY"),s);new(0,s.AutofillManagerCS)})();
//# sourceMappingURL=ContentIsolatedWorld.js.map
