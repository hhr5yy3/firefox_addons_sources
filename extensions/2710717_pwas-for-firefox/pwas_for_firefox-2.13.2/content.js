(()=>{let e=e=>e.getAttribute("rel").toLowerCase().includes("mask-icon"),t=document.querySelector("link[rel=manifest]"),n=t?new URL(t.getAttribute("href"),document.baseURI):null;browser.runtime.sendMessage({manifestUrl:n?.href,documentUrl:document.location.href,isSecureContext:isSecureContext}),browser.runtime.onMessage.addListener((t,n,r)=>{if("ObtainUrls"!==t)return;let o=document.querySelector("link[rel=manifest]"),i=o?new URL(o.getAttribute("href"),document.baseURI):null,u={name:document.querySelector("meta[name=application-name]")?.content||document.title,description:document.querySelector("meta[name=description]")?.content,icons:[...document.getElementsByTagName("link")].filter(e=>e.getAttribute("rel")?.toLowerCase().includes("icon")).map(t=>({src:new URL(t.getAttribute("href"),document.baseURI).href,type:function(t){let n=t.getAttribute("type");return n?n.includes("/")?n:`image/${n}`:e(t)?"image/svg+xml":null}(t),purpose:e(t)?"monochrome":"any",sizes:t.getAttribute("sizes")||""}))};r({manifestUrl:i?.href,documentUrl:document.location.href,pageInfo:u})})})();