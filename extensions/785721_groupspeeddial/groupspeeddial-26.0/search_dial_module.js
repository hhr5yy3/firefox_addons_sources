"use strict";(globalThis.webpackChunkgroup_speed_dial=globalThis.webpackChunkgroup_speed_dial||[]).push([[267],{1879:(t,e,i)=>{i.d(e,{e:()=>L});var a=i(4323),s=i(5076),r=i(8794),n=(i(6062),i(5048)),o=i(1962),l=i(2846),c=i(6382),d=i(2221),h=i(910),u=i(9574),p=i(7865),_=i(6419),m=i(9998),g=i(744),w=i(6777),f=i(4559),y=i(8698),v=i(2924),x=i(6037),b=i(3778);const R=(0,u.m)((t=>t.REMEMBER_GROUP_RUNTIME?new h.F("lastGroup",a.s6,{storageArea:"session"}):new h.F("lastGroup",a.s6,{storageArea:"local"}))),L=new class extends c.c{_id=-1;get id(){return this._id}set id(t){this._id=l.M.groupById(t)?.id,(0,v.J)(this._id)}initPromiseResolver=(0,a.NU)();promise=this.initPromiseResolver.promise;di;activateFromEventWithDelay=this.createDelayedActivationEventHandler(600);constructor(){super()}async initialize(t){this.di=t;const e=window.location.hash;await l.M.promise,l.M.isEmpty()&&await g.b,this.id=this.extractHashGroupId(e),e||(d.lw.REMEMBER_GROUP?(0,s.J)(await R(d.lw).get().catch(a.s6),(t=>this.id=t)):(0,s.J)(await r.ne.get(),(t=>this.id=t))),window.addEventListener("hashchange",(t=>this.onHashChange(t)),!1),window.addEventListener("change_active_group",(t=>this.activate(t.detail))),await p.W;const i=(0,f.O1)();if(d.lw.SCROLL_GROUPS&&(i.onwheel=(0,f.uT)().onwheel=async t=>{if(t.buttons!==w.w.RIGHT&&t.composedPath().find((t=>t instanceof HTMLElement&&["dials-container","groups"].includes(t.id)))){const e=d.lw.SCROLL_GROUPS_REVERSE?-1:1,i=((t.deltaY||t.deltaX||t.deltaZ)>0?1:-1)*e,a=L.getCurrentGroup(),s=await a.getNeighbouringGroup(i>0?"next":"prev",d.lw.SCROLL_GROUPS_CIRCLE?"loop":"stay");s&&L.activate(s.id)}}),d.lw.ACTIVATE_GROUP_HOVER){const t=(0,y.U)(d.lw.ACTIVATE_GROUP_HOVER_DELAY);i.addEventListener("mouseover",(e=>(0,s.J)((0,n.rm)(e),(e=>t((()=>this.activate(e))))))),i.addEventListener("mouseleave",(()=>t.cancel()))}super.notifyChange(this.id),this.initPromiseResolver.resolve()}async updateActiveGroupAndRedraw(t){this.id=t,d.lw.REMEMBER_GROUP&&R(d.lw).set(t),await this.di.redrawDials(),(0,x.R)(t),super.notifyChange(t)}async onHashChange(t){const e=this.extractHashGroupId(t.newURL);e!==this.id&&await this.updateActiveGroupAndRedraw(e)}async activate(t,e=!1){await this.promise;l.M.GROUPS.find((e=>e.id===t))&&(t!==this.id||e)&&(window.location.hash=(0,n._V)(t),await this.updateActiveGroupAndRedraw(t),(0,f.O1)().dispatchEvent(new CustomEvent("change",{detail:t})))}activateFromEvent(t){0===t.button&&(0,s.J)((0,n.rm)(t),(t=>this.activate(t)))}createDelayedActivationEventHandler(t){let e,i=null,a=!1,r=Date.now();return(o,l)=>{0===o.button&&(0,s.J)(l??(0,n.rm)(o),(s=>{const n=Date.now();i!==s||n-r>t?(a=!1,i=s,clearTimeout(e),e=self.setTimeout((()=>a=!0),t)):a&&this.activate(s),r=n}))}}getCurrentGroup(){return l.M.groupById(this.id)}dialById(t){const e=this.getCurrentGroup(),i=e.dials,a=(0,n.om)(t);if(e.topSites)return new _.O(a,e.id,{name:"",url:(0,o.$H)(t).href});const s=i[a];return s}extractHashGroupId(t){t=t||"";const e=(0,n.m4)(t);let i=l.M.groupById(e);return!m.Jk&&i.topSites&&(i=l.M.GROUPS.find((t=>!t.topSites))||i),d.lw.GROUP_ICON_IN_TITLE&&(0,b.i)(i.iconId||0),i.id}}},6119:(t,e,i)=>{i.d(e,{L:()=>p,c:()=>_});var a=i(6795),s=i(6690),r=i(2016),n=i(179),o=i(9439),l=i(2221),c=i(4559),d=i(6664),h=i(1410),u=i(6683);function p({id:t,dials:e,rows:i,cols:p,ratio:_,dynamic:m,list:g,grid:w,options:f},y=(0,c.uT)()){const v=w&&new d.J(w,t,y);v&&(i=v.rows,p=v.cols);const x=(0,o.i7)(f),b=l.lw.DIAL_BORDER_TYPE===u.NO.solid?1:0,R=!!_||!!w?.position;{const t=y.parentElement,e=t.classList;e.toggle("list",!!g),e.toggle("fixed",R),e.toggle("dynamic",!(!m&&!g)),e.toggle("grid",!!w);const a=t.style,r=t=>Math.floor(1e4/t)/100;a.setProperty("--dial-width",`${r(p)}%`),a.setProperty("--dial-height",`${r(i)}%`),a.setProperty("--group-cols",`${p}`),a.setProperty("--group-rows",`${i}`);const n=x-b;a.setProperty("--dial-padding",(0,s.px)(n)),a.setProperty("--small-dials-gap",(0,s.px)(2*n*l.lw.SPLIT_DIAL_GAP/100))}const L=y.style;["grid-template-columns","grid-template-rows","grid-auto-rows","width","height","max-width","max-height","margin","columns"].forEach((t=>L.removeProperty(t)));const[E,O,P]=_||[1,1,!1],A=P||w?.position===a.Cr.scroll;A&&(L.setProperty("margin","0"),L.setProperty("max-height","none"));const I=p*E,G=i*O;if((_||w?.position)&&(L.setProperty("height",100*G/I+"vw"),A||L.setProperty("max-width",100*I/G+"vh")),m){const[t,e]=[m.width,m.height].map((t=>(r.O&&!o.vt?t/2:t)+2*b));L.setProperty("grid-template-columns",`repeat(auto-fill, ${t}px)`),L.setProperty("grid-template-rows","initial"),L.setProperty("grid-auto-rows",`${e}px`),L.setProperty("max-width",(t+2*x)*p+2*x+"px")}else g?L.setProperty("columns",`${p} ${g.width}px`):w&&(0,h.oV)(t);if(!m&&(0,n.ik)()){const t=window.innerHeight>window.innerWidth,{height:e,width:i}=y.getBoundingClientRect(),a=(0,c.O1)().getBoundingClientRect().bottom,s=Array.from(y.children).slice(0,m||g||w?-1:void 0),r=()=>s.map((t=>t.getBoundingClientRect())),n=r().reduce(((t,{width:e})=>t+e),0)/(s.length||1),o=l.lw.ANDROID_MIN_DIAL_SIZE/n;o>1&&(["max-width","width"].forEach((e=>L.setProperty(e,i*(R||t?o:Math.max(1,o/2))+"px"))),["max-height","height"].forEach((i=>L.setProperty(i,e*(R?o:t?Math.max(1,o/2):o)+"px"))),r().some((({y:t})=>t<a))&&L.setProperty("margin-top","0"))}}function _(t,e,i){i&&t.classList.forEach((e=>e.startsWith("thumbnail_position_")&&t.classList.remove(e))),t.classList.add(`thumbnail_position_${e.position}`),e.background&&(t.style.background=e.background)}},555:(t,e,i)=>{i.d(e,{AU:()=>a,Ki:()=>r,oq:()=>s});const a=Object.freeze({container:"dial_container",head:"dial_head",body:"dial_body",icon:"dial_icon",name:"dial_name",thumbnail:"dial_thumbnail",textDial:"text_dial",dialNumber:"dial_number",tag:"dial_tag",reloadButtons:"dial_reload",is_online:"is_online"}),s=Object.freeze({is_empty_dial:"is_empty_dial",is_live_dial:"is_live_dial",is_url_dial:"is_url_dial",is_text_dial:"is_text_dial",has_list:"has_list",border_target:"border_target",is_search_dial:"is_search_dial",is_multi_dial:"is_multi_dial",is_session_dial:"is_session_dial",is_top_sites_dial:"is_top_sites_dial",is_timer_dial:"is_timer_dial",is_weather_dial:"is_weather_dial",is_group:"is_group",is_plus:"is_plus"}),r=Object.freeze({dial_list_container:"dial_list_container",dial_list_item:"multi_dial_item"})},9735:(t,e,i)=>{i.d(e,{v:()=>n});var a=i(1879),s=i(1962),r=i(4257);async function n(t,e,{animated:i,hideOthers:n,hideOtherPermanent:o,color:l,callbackFn:c}={}){await r.re;const d=i?"dial-highlight-animated":"search-dial-highlight",h=o?"opacity-05":n?"dial-highlight-opacity":"noop";await a.e.activate(t,!0),a.e.getCurrentGroup().dials.filter((t=>t.domId)).forEach((t=>{const i=(0,s.$H)(t.domId),a=i.getAttribute("id")===e;a&&i.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),i.classList.add(a?d:h),c?.(i)}))}},3650:(t,e,i)=>{i.d(e,{L5:()=>p,Tt:()=>m,cw:()=>w});var a=i(1962),s=i(4323),r=i(4590),n=i(8495),o=i(5772),l=i(5360),c=i(5048),d=i(6683),h=i(2846),u=i(2447);const p="AUTO_RELOAD_DIALS",_=(0,l.M)((t=>h.M.METADATA.tagById(t)?.name??""));async function m(t,e){const i=w.filter((t=>t.checked)),a=i.filter((t=>!t.isGroupSearch)),s=i.find((t=>t.isGroupSearch)),r=t.toLocaleLowerCase(),n=(await Promise.all(e.map((async e=>{const i=e.clone(),s=await i.getDialsToDraw();return i.dials=s.filter(((e,i)=>t===p?e.reload:!e.isEmptyDial()&&a.reduce(((t,i)=>{if(t)return t;const a=i.indexOfWord(r,e);return e._TMP_is_perfect_match=0===a,a>-1}),!1))).sort((0,o.s)("_TMP_is_perfect_match",!1)),i})))).filter((t=>t.dials.length)).sort(((t,e)=>e.dials[0]._TMP_is_perfect_match-t.dials[0]._TMP_is_perfect_match));return[...s?e.filter((t=>s.indexOfWordInGroup(r,t)>-1)).map((t=>{const e=t.clone();return e.dials=[],e})):[],...n]}class g{name;label;getField;_isPersistent;store;setPersistent(){this._isPersistent=!0}isGroupSearch;get checked(){return this.inputNode?.checked??(!this._isPersistent||this.store.get())}set checked(t){this.inputNode.checked=t,this._isPersistent&&this.store.set(t)}get inputNode(){return(0,a.$H)(this.id)}get id(){return`search_${this.name}`}constructor(t,e,i){this.name=t,this.label=e,this.getField=i,this._isPersistent=!1,this.store=new u.e(`_search_popup_${this.name}`,(()=>!this.isGroupSearch)),this.isGroupSearch=!1}indexOfWord(t,e){const i=this.getField(e);return(0,s.Kg)(i)?i.toLocaleLowerCase().indexOf(t):Array.isArray(i)?i.map((e=>e.toLocaleLowerCase().indexOf(t))).find((t=>t>=0))??-1:-1}indexOfWordInGroup(t,e){return-1}}const w=Object.freeze([new class extends g{indexOfWord(t,e){const i=this.getField(e);return i?(0,s.Kg)(i)?this.checkURL(t,i):i.map((e=>this.checkURL(t,e))).find((t=>t>-1))??-1:-1}checkURL(t,e){const i=(0,c.Ty)(e).indexOf(t);return i>-1?i:e.indexOf(t)}}("url",(0,r.tr)("msg_search_url"),(t=>t.url||t.multi?.links.map((t=>t.url)))),new g("name",(0,r.tr)("msg_search_name"),(t=>t.type===d.kh.MULTI?t.multi?.links.map((t=>t.name)).concat(t.name||""):t.name)),new g("note",(0,r.tr)("msg_search_note"),(t=>t.note)),new g("tags",(0,r.tr)("tag"),(t=>_(t.settings?.TAG_ID||-1))),new g("text",(0,n.e)("ed_text_dial",{column:!1}),(t=>t.text?.value)),new class extends g{isGroupSearch=!0;indexOfWord(t,e){return-1}indexOfWordInGroup(t,e){return e.name.toLocaleLowerCase().indexOf(t)}}("group",(0,r.tr)("msg_search_groups"),((t,e)=>e?.name))])},9684:(t,e,i)=>{i.r(e),i.d(e,{SearchDialModule:()=>D});var a=i(4323),s=i(5296),r=i(4590),n=i(6683),o=i(9510),l=i(6801),c=i(3074),d=i(7302),h=i(1962),u=i(9598),p=i(6004);var _=i(6777),m=i(8408),g=i(9735),w=i(7384),f=i(1470),y=i(555);var v=i(6119),x=i(4069),b=i(2846),R=i(2036),L=i(2221),E=i(7865),O=i(910),P=(i(4823),i(865)),A=i(4559),I=i(3650);const G="data-group-id",C="data-dial-url",T="data-search-icon",k="data-search-image",M=function(t,{arraySeparator:e="Ã´"}={}){const i=new Map;return async a=>{const s=Array.isArray(a)?a.join(e):a;if(i.has(s))return i.get(s);{const e=await t(a);return i.set(s,e),e}}}((([t,e])=>(0,o.Q)(t,e))),D=(()=>{return{onSearchCommand:async function(){const e=await P.d6;{if(location.hash)return t();const i=await browser.tabs.duplicate(e);await(0,w.p)(i.id),await(0,l.hC)(i.id,{type:"openSearch"}),await browser.tabs.remove(e)}},show:t};async function t(){await b.M.promise,await E.W,s.p.show((0,r.tr)("search_title"),(0,p.Y6)(await U()),{yesText:(0,r.tr)("search_search"),noText:(0,r.tr)("label_close"),onYes:o,onNo:l,onClose:l});const t=(0,h.$H)("search-input");var e;t.focus(),t.onkeydown=(e=o,t=>{"Enter"===t.key&&e(t)}),t.oninput=()=>{t.value.length>=2&&o()},I.cw.forEach((({inputNode:t})=>t.addEventListener("input",o)));const i=await b.M.getVisibleGroups(!0);async function o(){await(0,a.BK)(1);const e=function(){const t=new WeakSet;return new IntersectionObserver((e=>{e.filter((e=>e.isIntersecting&&!t.has(e.target))).map((t=>t.target)).forEach((async e=>{t.add(e);const[i,a]=[G,C].map((t=>e.getAttribute(t))),s=parseInt(i||"");if(isNaN(s)||!a)return;const r=await M([s,a]);if(r){const[t,i]=[T,k].map((t=>e.querySelector(`[${t}]`)));t&&(r.iconBlobURL||r.icon)&&(t.src=r.iconBlobURL||r.icon),i&&(r.imgBlobURL||r.img)&&(i.src=r.imgBlobURL||r.img)}}))}))}(),r=(0,A.uT)();r.classList.add("search_dials"),r.style.height="100%";const o=await(0,I.Tt)(t.value,i),l=o.flatMap((t=>[(0,u.z)("h2",{style:`margin-top: 20px; padding-left: ${L.lw.DIAL_PADDING}px`},[(0,u.z)("a",{class:"group_link",textContent:t.name,href:`${R.KL}#${t.id}`})]),...t.dials.map((i=>{const a=i.type===n.kh.SEARCH,r=i.type===n.kh.TEXT&&i.text,o=i.type===n.kh.GROUP,l=i.type===n.kh.MULTI,c=o?(0,d.Z)(L.lw.ICON):r?(0,d.Z)("svg/note (5).svg"):a?(0,d.Z)("svg/search (3).svg"):l?(0,d.Z)("svg/multi (1).svg"):h.RO,p=(0,u.z)("a",{[G]:t.id,[C]:i.url,class:"dial "+(l?y.oq.is_multi_dial:y.oq.is_url_dial),tabIndex:0,title:`Name:\t${i.name}\nURL:\t${i.url}${i.note?`\n\nNote:\t${i.note}`:""}`,draggable:"true",handlers:{onclick:async function(e){s.p.hide(),(0,A.uT)().classList.remove("search_dials"),await(0,g.v)(t.id,i.domId,{animated:!0,hideOthers:!0})},onmousedown:function(t){t.button===_.w.MIDDLE&&i.url&&(t.preventDefault(),(0,m.K)(i.url,{inNewTab:!0}))}}},[(0,u.z)("div",{class:`${y.AU.container} ${y.oq.border_target}`},[(0,u.z)("div",{class:y.AU.head},[(0,u.z)("img",{class:y.AU.icon,[T]:!0,src:c||h.RO}),(0,u.z)("span",{class:y.AU.name,textContent:i.name||""})]),(0,u.z)("div",{class:y.AU.body},[l?(0,u.z)("ul",{class:y.Ki.dial_list_container},i.multi?.links.map((e=>(0,u.z)("li",{class:"flex multi_dial_item",style:`height: ${100/i.multi.links.length}%`},[(0,u.z)("a",{href:e.url,[G]:t.id,[C]:e.url,class:"list_item_a flex-space-between"+(x.m0?"":"_10"),tabindex:-1,handlers:{onclick:t=>t.preventDefault()}},[(0,u.z)("img",{class:"list_item_icon",src:c||h.RO,[T]:!0}),(0,u.z)("span",{class:"list_item_name",textContent:e.name,style:"color: #000000"})])])))):(0,u.z)("img",{class:y.AU.thumbnail,[k]:!0,src:h.RO,draggable:"false"})])])]);return e.observe(p),l&&p.querySelectorAll("ul > li > a").forEach((t=>e.observe(t))),p}))]));return r.onwheel=t=>t.stopPropagation(),(0,v.L)({ratio:[16,12,!0],rows:4,cols:4,dials:[],id:-1}),r.replaceChildren((0,u.u)("h1",`Search result: ${l.length-o.length} found`),...l),!0}function l(){(0,c.$8)(),(0,A.uT)().classList.remove("search_dials")}}})();const S=new O.F("search_checkboxes",(()=>Object.fromEntries(I.cw.map((t=>[t.id,!t.isGroupSearch])))),{storageArea:"localStorage"}),U=async()=>{const t=await S.get(),e="height: 2rem; margin: 10px 0; border: 1px solid var(--primary); padding: 6px 8px;";return[["div",{class:"flex flex-column flex-column-space-between",style:"width: 100%"},[["div",{class:"flex flex-space-between",style:"width: 100%; flex-wrap: wrap;"},[["div",{textContent:(0,r.tr)("msg_search_by")}],...I.cw.map((({label:e,id:i})=>["label",{class:"flex"},[["input",{type:"checkbox",id:i,...t[i]?{checked:""}:{},handlers:{oninput:t=>{S.update((t=>(0,f.Ym)(t,i)))}}}],["span",{textContent:e,class:"nowrap"}]]]))]],["div",{class:"flex",style:"width: 100%;"},[["input",{type:"search",style:`${e} width: 100%;`,id:"search-input",placeholder:(0,r.tr)("msg_search_tip")}],["select",{style:`${e} width: 20px; position: absolute; right: 15px; font-size: 1rem;`,tabindex:-1,handlers:{onchange(t){const e=(0,h.$H)("search-input");e.value=t.currentTarget.value?I.L5:"",e.dispatchEvent(new InputEvent("input")),e.focus(),e.setSelectionRange(0,e.value.length)}}},[["option",{value:""}],["option",{value:"name",textContent:(0,r.tr)("label_find_all")+" ð "+(0,r.tr)("ed_auto_reload")}]]]]]]]]}},6037:(t,e,i)=>{i.d(e,{R:()=>n});var a=i(8794),s=i(5941),r=i(4069);async function n(t){if(r.m0)return;const e=(await a.SR.get()).filter((([e])=>e===t));e.length&&(await a.SR.update((e=>e.filter((([e])=>e!==t)))),await(await(0,s.w)()).parentReload(t,e.map((([,t])=>t))))}},4257:(t,e,i)=>{i.d(e,{EK:()=>n,RO:()=>o,re:()=>r});var a=i(4323),s=i(744);const[r,n]=(0,a.Mj)(),o=Promise.all([r,s.b])},9439:(t,e,i)=>{i.d(e,{CX:()=>c,i7:()=>h,vt:()=>d});var a=i(7302),s=i(1319),r=i(4069),n=i(2036),o=i(2221),l=i(1792);const c=(0,a.Z)("reload/reload.html"),d=(0,s.G)()&&n.Dg;function h(t){const e=t?.DIAL_PADDING??o.lw.DIAL_PADDING;return d&&r.m0?Math.max(32,5*e):l.b?e/2:e}},8495:(t,e,i)=>{i.d(e,{e:()=>s});var a=i(4590);const s=(t,e)=>{const{column:i,capitalize:s,substitutions:r}=e||{};let n=(0,a.tr)(t,r);return!0!==i&&!1!==i||(n.endsWith(":")?i||(n=n.slice(0,-1)):i&&(n+=":")),s&&(n=n[0].toLocaleUpperCase()+n.slice(1)),n}},2016:(t,e,i)=>{i.d(e,{O:()=>a});const a=self.matchMedia("only screen and (max-device-width: 1000px)").matches}}]);