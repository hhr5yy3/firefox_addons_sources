import{o as u,d as i,a as c,c as d,u as _,b as f,e as l,f as m,B as h,S as w}from"../../popupInitializer.bb4281b7.js";import{E as g,u as p,a as r,b as k,c as B,d as S}from"../../ExtensionWindow.ccecfe7d.js";import{s as y,o as C}from"../../pageInteraction.2f84ddce.js";import{t as E,i as I}from"../../close.fe628935.js";import"../../index.0a1d9bc1.js";import"../../loyaltyOfferService.5af7130a.js";function a(t,e){E({event:{category:"Popup",action:t,label:e!=null?e:"Browser Icon"}})}function v(){let t=!1;u(()=>{a("Shown")});function e(){t=!0,a("Hidden","Header Close Button"),window.close()}return window.addEventListener("blur",()=>{t||a("Hidden","Blur")}),{closeWindow:e}}const P=i({setup(t){const{closeWindow:e}=v();return(o,s)=>(c(),d(g,{onClose:_(e)},null,8,["onClose"]))}});async function x(){const t=await y("initPopup",null,"background"),{authInfo:e,trendingCashbackStores:o}=t;return p().authInfo=e,r().stores=o.stores,r().ctaLink=o.ctaLink,t}const W={class:"popup"},b=i({setup(t){const e=p();return C("authChanged",s=>{e.updateAuthInfo(s.data)}),u(async()=>{await x()}),k().push({name:"deals"}),(s,A)=>(c(),f("div",W,[l(P)]))}});const n=m(b);n.use(h);n.use(B());n.use(S());w.initVueIntegration(n);I(n);n.mount("#app");
