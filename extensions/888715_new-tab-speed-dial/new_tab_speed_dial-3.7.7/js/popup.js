(function(e){function t(t){for(var n,a,i=t[0],s=t[1],u=t[2],p=0,d=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);l&&l(t);while(d.length)d.shift()();return c.push.apply(c,u||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,i=1;i<r.length;i++){var s=r[i];0!==o[s]&&(n=!1)}n&&(c.splice(t--,1),e=a(a.s=r[0]))}return e}var n={},o={popup:0},c=[];function a(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=n,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=s;c.push([0,"chunk-vendors","chunk-common"]),r()})({0:function(e,t,r){e.exports=r("0a3d")},"0a3d":function(e,t,r){"use strict";r.r(t),function(e){r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2ca0");var t=r("7a23"),n=r("cc29"),o=(r("1f98"),r("59ce"),Object(t["createApp"])(n["a"]));o.config.globalProperties.$i18n=function(t){return e.i18n.getMessage(t)},o.config.compilerOptions.isCustomElement=function(e){return e.startsWith("sl-")},o.mount("#app")}.call(this,r("9845"))},"59ce":function(e,t,r){},cc29:function(e,t,r){"use strict";var n=r("7a23"),o={key:0,class:"flex flex-col h-screen"},c={class:"flex justify-between items-center py-2 px-4 border-b"},a={class:"text-base font-medium"},i={ref:"main",class:"overflow-y-auto flex-1"},s={key:0},u={key:0,class:"flex flex-col p-1.5"},l={ref:"groups"},p=["onClick","onKeyup"],d=Object(n["createElementVNode"])("hr",{class:"my-2"},null,-1),f={class:"p-1 mt-2 text-xs font-bold text-center text-primary"},b={key:1,class:"p-3"},v={class:"mb-2"},h={class:"flex space-x-2"},m={key:1,class:"flex flex-col justify-center items-center space-y-2 w-full h-full"},g={key:2,class:"p-4 text-sm text-center"};function w(e,t,r,w,O,j){var x=Object(n["resolveComponent"])("sl-button"),k=Object(n["resolveComponent"])("sl-input"),y=Object(n["resolveComponent"])("sl-icon");return O.groups.length?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("header",c,[Object(n["createElementVNode"])("h1",a,Object(n["toDisplayString"])(e.$i18n("save_page_to")),1)]),Object(n["createElementVNode"])("main",i,[O.success||O.error?O.success?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",m,[Object(n["createVNode"])(y,{class:"text-2xl text-primary",name:"check-circle"}),Object(n["createElementVNode"])("span",null,Object(n["toDisplayString"])(e.$i18n("newtab_dial_saved")),1)])):O.error?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",g,Object(n["toDisplayString"])(O.error),1)):Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",s,[O.newGroupDialog?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",b,[Object(n["createElementVNode"])("div",v,[Object(n["createVNode"])(k,{ref:"input",placeholder:e.$i18n("newtab_create_group"),type:"text",value:O.groupTitle,onInput:t[1]||(t[1]=function(e){return O.groupTitle=e.target.value}),onKeyup:Object(n["withKeys"])(j.createGroupAndSave,["enter"])},null,8,["placeholder","value","onKeyup"])]),Object(n["createElementVNode"])("div",h,[Object(n["createVNode"])(x,{class:"w-auto",onClick:j.hideNewGroupDialog},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$i18n("cancel")),1)]})),_:1},8,["onClick"]),Object(n["createVNode"])(x,{class:"w-full",disabled:!O.groupTitle,variant:"primary",onClick:j.createGroupAndSave},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$i18n("save")),1)]})),_:1},8,["disabled","onClick"])])])):(Object(n["openBlock"])(),Object(n["createElementBlock"])("nav",u,[Object(n["createElementVNode"])("div",l,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(O.groups,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("a",{key:e.id,class:"block py-2 px-3 text-base hover:text-white hover:bg-primary rounded focus:ring cursor-pointer focus:ouline-none Group",tabindex:"1",onClick:function(t){return j.save(e)},onKeyup:Object(n["withKeys"])((function(t){return j.save(e)}),["enter"])},Object(n["toDisplayString"])(e.title),41,p)})),128))],512),d,Object(n["createVNode"])(x,{ref:"saveToNewGroupButton",class:"w-full",size:"medium",variant:"default",onClick:j.showNewGroupDialog},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.$i18n("newtab_create_group")),1)]})),_:1},8,["onClick"]),Object(n["createElementVNode"])("div",f,[Object(n["createElementVNode"])("a",{class:"hover:underline",href:"#",onClick:t[0]||(t[0]=function(){return j.editShortcut&&j.editShortcut.apply(j,arguments)})},"Edit keyboard shortcut")])]))]))],512)])):Object(n["createCommentVNode"])("",!0)}var O=r("e781"),j=r("6b0d"),x=r.n(j);const k=x()(O["a"],[["render",w]]);t["a"]=k},e781:function(e,t,r){"use strict";(function(e){var n=r("2909"),o=r("1da1"),c=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("caad"),r("96cf"),r("bd36")),a=r("cc41"),i=r("617a"),s=r("a6f3");t["a"]={data:function(){return{activeGroup:0,groups:[],groupTitle:"",newGroupDialog:!1,success:!1,error:null,isChrome:Object(i["a"])(),isEdge:Object(i["b"])(),isFirefox:Object(i["c"])()}},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["a"].getGroups();case 2:e.groups=t.sent,e.$nextTick((function(){var t=e.$refs.main.scrollHeight+45,r=Math.max(t,140),n=Math.min(r,600);document.documentElement.style.minHeight="".concat(n,"px")})),window.addEventListener("keydown",e.keyboardListener);case 5:case"end":return t.stop()}}),t)})))()},unmounted:function(){window.removeEventListener("keydown",this.keyboardListener)},methods:{saveCurrentTab:function(){var t=arguments;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,o,i,u,l,p,d,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:0,r.next=3,e.tabs.query({windowId:e.windows.WINDOW_ID_CURRENT,active:!0});case 3:if(o=r.sent,o&&o[0]){r.next=6;break}throw new Error("No active tabs");case 6:return i=o[0],u=i.url,l=i.title,i.favIconUrl,new URL(u),r.next=10,c["a"].createBookmark({title:l,url:u,idgroup:n});case 10:return p=r.sent,a["a"].addBookmark(p),r.next=14,e.tabs.captureVisibleTab(e.windows.WINDOW_ID_CURRENT);case 14:return d=r.sent,r.next=17,Object(s["a"])(d);case 17:return f=r.sent,r.next=20,c["a"].addThumbnail({id:null===p||void 0===p?void 0:p.id,url:u,image:f});case 20:return r.abrupt("return",!0);case 21:case"end":return r.stop()}}),r)})))()},saveCurrentTabToNewGroup:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,c["a"].createGroup(e);case 2:return n=r.sent,a["a"].addGroup(n),r.abrupt("return",t.saveCurrentTab(n.id));case 5:case"end":return r.stop()}}),r)})))()},save:function(t){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r.isFirefox){n.next=8;break}return n.prev=1,n.next=4,e.permissions.request({origins:["<all_urls>"]});case 4:n.next=8;break;case 6:n.prev=6,n.t0=n["catch"](1);case 8:return n.prev=8,n.next=11,r.saveCurrentTab(t.id);case 11:r.success=n.sent,setTimeout((function(){window.close()}),1e3),n.next=18;break;case 15:n.prev=15,n.t1=n["catch"](8),r.error=n.t1.message;case 18:case"end":return n.stop()}}),n,null,[[1,6],[8,15]])})))()},createGroupAndSave:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.groupTitle){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,e.saveCurrentTabToNewGroup({title:e.groupTitle});case 5:e.success=t.sent,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](2),e.error=t.t0.message;case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()},showNewGroupDialog:function(){var e=this;this.newGroupDialog=!0,this.$nextTick((function(){e.$refs.input.focus()}))},hideNewGroupDialog:function(){this.newGroupDialog=!1},keyboardListener:function(e){if(e.target instanceof HTMLInputElement!==!0&&e.target instanceof HTMLSelectElement!==!0&&e.target instanceof HTMLTextAreaElement!==!0&&["ArrowUp","ArrowDown"].includes(e.key)){var t,r=window.document.activeElement;if(!r)return;if("ArrowDown"===e.key&&r instanceof HTMLBodyElement)return this.$refs.groups.children[0].focus(),void e.preventDefault();if(r==this.$refs.saveToNewGroupButton&&"ArrowUp"===e.key)return null===(t=this.$refs.groups.children[this.groups.length-1])||void 0===t||t.focus(),void e.preventDefault();if(r.className.indexOf("Group")>-1){var o,c,a=Object(n["a"])(this.$refs.groups.children).indexOf(r),i=this.$refs.groups.children.length-1;if(a==i&&"ArrowDown"===e.key)return this.$refs.saveToNewGroupButton.focus(),void e.preventDefault();if(a>-1&&a<=i)if("ArrowDown"===e.key&&(o=Math.min(this.groups.length-1,a+1)),"ArrowUp"===e.key&&(o=Math.max(0,a-1)),o>-1)return null===(c=this.$refs.groups.children[o])||void 0===c||c.focus(),void e.preventDefault()}}},editShortcut:function(){var t;t=this.isFirefox?"about:addons":this.isEdge?"edge://extensions/shortcuts":"chrome://extensions/shortcuts",t&&e.tabs.create({url:t})}}}}).call(this,r("9845"))}});
//# sourceMappingURL=popup.js.map