import{d,a as r}from"./cplx-CVsLL7Ku.js";const p="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let c=(a=21)=>{let t="",e=crypto.getRandomValues(new Uint8Array(a|=0));for(;a--;)t+=p[e[a]&63];return t};class y{async add(t){return await r.promptHistory.add({prompt:t,id:new Date().getTime().toString()+"-"+c(),createdAt:new Date().getTime()})}async deduplicateAdd(t){const e=await r.promptHistory.reverse().first();return(e==null?void 0:e.prompt)===t?(await r.promptHistory.update(e.id,{createdAt:new Date().getTime()}),e.id):await this.add(t)}async deleteAll(){await r.promptHistory.clear()}async get(t){return await r.promptHistory.get(t)}async getAll(){return await r.promptHistory.reverse().toArray()}async getPaginatedItems({searchTerm:t="",limit:e=10,offset:o=0}={}){const i=r.promptHistory.orderBy("createdAt").filter(n=>t?n.prompt.toLowerCase().includes(t.toLowerCase()):!0),s=await i.count();return{items:await i.reverse().offset(o).limit(e).toArray(),total:s}}async update(t){return await r.promptHistory.put(t),t.id}async delete(t){await r.promptHistory.delete(t)}}const[u,w]=d("PromptHistoryService",()=>new y);export{w as g,c as n,u as r};
