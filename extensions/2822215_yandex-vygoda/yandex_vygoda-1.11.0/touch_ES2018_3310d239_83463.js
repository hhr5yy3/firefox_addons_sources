"use strict";(self.webpackChunkv4fire_1=self.webpackChunkv4fire_1||[]).push([[83463],{83463:(t,e,o)=>{o.r(e),o.d(e,{$$:()=>h,ComponentInterface:()=>i.ComponentInterface,ComponentResetType:()=>i.ComponentResetType,ElementModEvent:()=>i.ElementModEvent,GlobalEnvironment:()=>i.GlobalEnvironment,HydrationStore:()=>i.HydrationStore,ModEvent:()=>i.ModEvent,ModEventName:()=>i.ModEventName,ModEventReason:()=>i.ModEventReason,ModEventType:()=>i.ModEventType,Module:()=>i.Module,PARENT:()=>i.PARENT,SetElementModEvent:()=>i.SetElementModEvent,SetModEvent:()=>i.SetModEvent,State:()=>i.State,app:()=>i.app,attrRgxp:()=>i.attrRgxp,bindRemoteWatchers:()=>i.bindRemoteWatchers,bindingRgxp:()=>i.bindingRgxp,callMethodFromComponent:()=>i.callMethodFromComponent,clientState:()=>i.clientState,component:()=>i.component,computed:()=>i.computed,customWatcherRgxp:()=>i.customWatcherRgxp,default:()=>u,defaultConfig:()=>r,destroyApp:()=>i.destroyApp,dsComponentsMods:()=>i.dsComponentsMods,extractWebappShortName:()=>i.extractWebappShortName,field:()=>i.field,getComponentMods:()=>i.getComponentMods,getComponentName:()=>i.getComponentName,getInfoFromConstructor:()=>i.getInfoFromConstructor,getPropertyInfo:()=>i.getPropertyInfo,globalEmitter:()=>i.globalEmitter,hasSeparator:()=>i.hasSeparator,hook:()=>i.hook,hydrationStore:()=>i.hydrationStore,init:()=>i.init,initEmitter:()=>i.initEmitter,isAbstractComponent:()=>i.isAbstractComponent,isComponent:()=>i.isComponent,isSmartComponent:()=>i.isSmartComponent,normalizeClass:()=>i.normalizeClass,normalizeStyle:()=>i.normalizeStyle,paramsFactory:()=>i.paramsFactory,prop:()=>i.prop,propRgxp:()=>i.propRgxp,remoteState:()=>i.remoteState,resetComponents:()=>i.resetComponents,rootComponents:()=>i.rootComponents,runHook:()=>i.runHook,statuses:()=>i.statuses,storeRgxp:()=>i.storeRgxp,system:()=>i.system,wait:()=>i.wait,watch:()=>i.watch});var n=o(52279),s=o(9509),i=o(47250),a=o(24251);const r={actionClose:!0,overlayLatency:1..second(),autoClose:3..second(),position:"bottom"};var l=o(29794);const c=(0,s.Z)();class ConfigManager extends l.Z{constructor(t){super(t),this.configs=[],this.ctx.on("afterOpenAttempt",((t,e)=>{null!=(null==e?void 0:e.resolve)&&e.resolve(t)}),{label:c.onToastOpened}),this.ctx.on("afterCloseAttempt",(()=>{const t=this.configs.shift();null!=t&&this.ctx.open(t)}),{label:c.onToastClosed})}push(t){const e={...t};return!0===e.toQueue?this.configs.push(e):(this.configs.unshift(e),this.ctx.close(!1)),new Promise((t=>{e.resolve=t}))}clear(){this.configs.length=0}}var p,m=function(t,e,o,n){var s,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(a=(i<3?s(a):i>3?s(e,o,a):s(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};const h=(0,s.Z)();let d=p=class bToast extends i.default{constructor(){super(...arguments),this.defaultConfig=r,this.config=void 0,this.lastClosedTimestamp=0}get openedConfigId(){var t;return null===(t=this.config)||void 0===t?void 0:t.id}callControlAction(t,...e){return Object.cast(a.Z.callControlAction(this,t,...e))}getControlEvent(t){return"click"}async open(t){const e=this.r.getFromStore(this.componentName);if(Object.forEach(e,((t,e)=>{this.isComponent(t,p)&&e!==this.componentId&&"true"===t.mods.opened&&t.close()})),null!=this.config)return Object.isTruly(this.config.autoClose)||(this.config.autoClose=r.autoClose,this.resetCloseTimeout()),this.configManager.push(t);const o={...this.defaultConfig,...t};void 0!==o.icon&&void 0!==o.button&&(this.log({logLevel:"warn",context:`${this.componentName}:open`},'Incorrect configuration: you can use only button or only icon. The field "icon" will be removed.'),delete o.icon),this.config=o,await this.async.clearAll({label:h.sleepOnOpen,group:"open"});const s=Date.now()-this.lastClosedTimestamp;let{overlayLatency:i}=this.config;null==i||s>i?i=0:i-=s,i>0&&await this.async.sleep(i,{label:h.sleepOnOpen,group:"open",join:!0}),Object.isDictionary(this.config.analyticsParams)&&this.analytics.sendEvent("appear",{...this.externalAnalyticsParams,...this.config.analyticsParams},"toast"),null!=this.config.onBeforeOpen&&await this.config.onBeforeOpen(this.$refs.rootWrapper),this.resetCloseTimeout();const a=await this.async.promise(n.Z.open(this),{label:h.open,group:"open"});return this.emit("afterOpenAttempt",a,this.config),a}async close(t=!0){this.async.clearAll({group:"open"}),t&&this.configManager.clear();const{config:e}=this,o=await n.Z.close(this);return this.config=void 0,this.lastClosedTimestamp=Date.now(),o&&Object.isDictionary(null==e?void 0:e.analyticsParams)&&this.analytics.sendEvent("close",{...this.externalAnalyticsParams,...null==e?void 0:e.analyticsParams},"toast"),null!=(null==e?void 0:e.onAfterClose)&&await e.onAfterClose(this.$refs.rootWrapper),this.emit("afterCloseAttempt",o,e),o}async onKeyClose(){}async onTouchClose(t){var e,o;if(null===(e=this.config)||void 0===e?void 0:e.actionClose){const e=t.target;if(!e)return;const n=null===(o=this.block)||void 0===o?void 0:o.getElementSelector("control");Object.isString(n)&&!e.closest(n)&&e.closest(`.${this.componentId}`)&&await this.close()}}resetCloseTimeout(){var t;Object.isNumber(null===(t=this.config)||void 0===t?void 0:t.autoClose)&&this.async.setTimeout(this.close.bind(this,!1),this.config.autoClose,{label:h.autoClose,group:"open"})}async onOpenedChange(){}initCloseHelpers(){n.Z.initCloseHelpers(this,{touch:"click touchmove"})}initModEvents(){n.Z.initModEvents(this)}insertNode(){const t=`${this.componentName}.${this.componentId}`,e={label:h.removeNode,join:!0},o=this.$el;document.body.insertAdjacentElement("afterbegin",o),this.r.setToStore(t,this.componentId),this.async.worker((()=>{var e;null===(e=this.$el)||void 0===e||e.remove(),this.r.setToStore(t,void 0)}),e)}async onVisibleHeightChanged(){await this.waitRef("rootWrapper",{label:h.navbarElement,join:"replace"}),this.async.requestAnimationFrame((()=>{const t=this.remoteState.visibleHeight,{clientHeight:e}=document.documentElement,o=e-t;this.$refs.rootWrapper.style.transform=o>=0?`translateY(-${o.px})`:"translateY(0px)"}),{label:h.changeVisibleHeight})}};d.mods={...n.Z.mods,opened:["true",["false"]],position:["top",["bottom"]],contentDirection:["column",["row"]],contentOffsets:["none"]},m([(0,i.system)((t=>new ConfigManager(t)))],d.prototype,"configManager",void 0),m([(0,i.prop)(Object)],d.prototype,"defaultConfig",void 0),m([(0,i.field)()],d.prototype,"config",void 0),m([(0,i.system)()],d.prototype,"lastClosedTimestamp",void 0),m([(0,i.wait)({label:h.toastOpening,defer:!0})],d.prototype,"open",null),m([(0,i.wait)({label:h.toastClosing,defer:!0})],d.prototype,"close",null),m([(0,i.hook)("beforeDataCreate")],d.prototype,"initCloseHelpers",null),m([(0,i.hook)("mounted")],d.prototype,"insertNode",null),m([(0,i.watch)(["!globalEmitter:native.ui.visibleHeightChanged","!window:resize"]),(0,i.hook)("mounted")],d.prototype,"onVisibleHeightChanged",null),d=p=m([(0,i.component)()],d);const u=d}}]);