(()=>{class e extends SitePlugin{isValidUrl(){return location.href.includes("midjourney.com")||location.href.includes("nijijourney.com")}getMeta(e){var i,r;return this.isValidUrl()&&(e=e?.closest("div:has(#lightboxPrompt)"))&&(i=e?.querySelector("#lightboxPrompt"))?(e=(e?.querySelector("a[href*='&user_id=']")||e?.querySelector("div span.block.truncate"))?.innerText||"",i=i?.querySelector("p")?.innerText||"",r=this.containsNonAsciiChars(i)?25:50,r={title:this.sliceAndCombinePrompt(i,r),annotation:i},e&&(r.title+=" @"+e),r):{}}containsNonAsciiChars(e){return null!==(e=e.match(/[\p{L}-]+/gu))&&0<e.length}sliceAndCombinePrompt(e,i=50){var r=e.split(/([, .;])/g);let t="";for(let e=0;e<r.length;e++)if(""!==r[e]){if((t+r[e]).length>i)break;t+=r[e]}return t.replace(/[ ,.;]+$/gm,"")}}var i=new e;eagle.plugin.register("nijijourney.com",i),eagle.plugin.register("midjourney.com",i)})();