import{A as Gi,j as ra,k as sa,G as oa,l as aa,L as Wi,m as la,n as ca,T as Xi,p as ua,O as Ji,V as Ue,q as oe,M as Ut,P as pa,C as Et,W as it,t as da,D as bn,R as ha,N as Zi,v as fa,U as wn,S as ht,x as ma,y as ga,z as Yi,B as Ki,E as va,H as ya,I as ba,J as wa,K as xa,Q as Sa,X as Ca,Y as ka,Z as Nt,_ as rt,$ as Ea,a0 as $i,a1 as ft,a2 as Qe,a3 as Ta,a4 as _a,a5 as Pa,a6 as Ma,a7 as Aa,a8 as xn,a9 as Oa,aa as Qi,ab as Sn,ac as mt,ad as Da,ae as er,af as Ft,ag as qt,ah as Tt,ai as La,aj as Ba,ak as Ia,al as Ra,am as ja,an as tr,ao as za,ap as Ua,e as W,o as j,c as N,a as _,f as ce,aq as ue,u as R,h as Le,g as le,ar as Z,as as de,F as ve,at as Ne,au as K,b as ae,av as nr,aw as Cn,ax as _t,w as Pt,ay as ir,az as rr,aA as kn,aB as Na,aC as En,aD as Fa,aE as sr,aF as Tn,aG as qa,i as Ha}from"./SkeletonUtils-K4FW0S_X.js";import{G as or,E as Va,T as ar,a as Ga,O as Wa}from"./OrbitControls-uXF5uNJi.js";function Xa(l,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in l)){const i=Object.getOwnPropertyDescriptor(n,r);i&&Object.defineProperty(l,r,i.get?i:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}var gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lr(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Ja(l){if(l.__esModule)return l;var e=l.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(l).forEach(function(n){var r=Object.getOwnPropertyDescriptor(l,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return l[n]}})}),t}var Ht={exports:{}};/*!
* matter-js 0.19.0 by @liabru
* http://brm.io/matter-js/
* License MIT
* 
* The MIT License (MIT)
* 
* Copyright (c) Liam Brummitt and contributors.
* 
* Permission is hereby granted, free of charge, to any person obtaining a copy
* of this software and associated documentation files (the "Software"), to deal
* in the Software without restriction, including without limitation the rights
* to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the Software is
* furnished to do so, subject to the following conditions:
* 
* The above copyright notice and this permission notice shall be included in
* all copies or substantial portions of the Software.
* 
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
* IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
* FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
* AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
* LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
* OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
* THE SOFTWARE.
*/var Za=Ht.exports,cr;function Ya(){return cr||(cr=1,function(l,e){(function(t,n){l.exports=n()})(Za,function(){return function(t){var n={};function r(i){if(n[i])return n[i].exports;var a=n[i]={i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=n,r.d=function(i,a,u){r.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:u})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,a){if(a&1&&(i=r(i)),a&8||a&4&&typeof i=="object"&&i&&i.__esModule)return i;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:i}),a&2&&typeof i!="string")for(var d in i)r.d(u,d,function(p){return i[p]}.bind(null,d));return u},r.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(a,"a",a),a},r.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},r.p="",r(r.s=20)}([function(t,n){var r={};t.exports=r,function(){r._baseDelta=1e3/60,r._nextId=0,r._seed=0,r._nowStartTime=+new Date,r._warnedOnce={},r._decomp=null,r.extend=function(a,u){var d,p,c;typeof u=="boolean"?(d=2,c=u):(d=1,c=!0);for(var m=d;m<arguments.length;m++){var o=arguments[m];if(o)for(var s in o)c&&o[s]&&o[s].constructor===Object&&(!a[s]||a[s].constructor===Object)?(a[s]=a[s]||{},r.extend(a[s],c,o[s])):a[s]=o[s]}return a},r.clone=function(a,u){return r.extend({},u,a)},r.keys=function(a){if(Object.keys)return Object.keys(a);var u=[];for(var d in a)u.push(d);return u},r.values=function(a){var u=[];if(Object.keys){for(var d=Object.keys(a),p=0;p<d.length;p++)u.push(a[d[p]]);return u}for(var c in a)u.push(a[c]);return u},r.get=function(a,u,d,p){u=u.split(".").slice(d,p);for(var c=0;c<u.length;c+=1)a=a[u[c]];return a},r.set=function(a,u,d,p,c){var m=u.split(".").slice(p,c);return r.get(a,u,0,-1)[m[m.length-1]]=d,d},r.shuffle=function(a){for(var u=a.length-1;u>0;u--){var d=Math.floor(r.random()*(u+1)),p=a[u];a[u]=a[d],a[d]=p}return a},r.choose=function(a){return a[Math.floor(r.random()*a.length)]},r.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},r.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},r.isFunction=function(a){return typeof a=="function"},r.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},r.isString=function(a){return toString.call(a)==="[object String]"},r.clamp=function(a,u,d){return a<u?u:a>d?d:a},r.sign=function(a){return a<0?-1:1},r.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-r._nowStartTime},r.random=function(a,u){return a=typeof a<"u"?a:0,u=typeof u<"u"?u:1,a+i()*(u-a)};var i=function(){return r._seed=(r._seed*9301+49297)%233280,r._seed/233280};r.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},r.logLevel=1,r.log=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.info=function(){console&&r.logLevel>0&&r.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warn=function(){console&&r.logLevel>0&&r.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},r.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");r._warnedOnce[a]||(r.warn(a),r._warnedOnce[a]=!0)},r.deprecated=function(a,u,d){a[u]=r.chain(function(){r.warnOnce("\u{1F505} deprecated \u{1F505}",d)},a[u])},r.nextId=function(){return r._nextId++},r.indexOf=function(a,u){if(a.indexOf)return a.indexOf(u);for(var d=0;d<a.length;d++)if(a[d]===u)return d;return-1},r.map=function(a,u){if(a.map)return a.map(u);for(var d=[],p=0;p<a.length;p+=1)d.push(u(a[p]));return d},r.topologicalSort=function(a){var u=[],d=[],p=[];for(var c in a)!d[c]&&!p[c]&&r._topologicalSort(c,d,p,a,u);return u},r._topologicalSort=function(a,u,d,p,c){var m=p[a]||[];d[a]=!0;for(var o=0;o<m.length;o+=1){var s=m[o];d[s]||u[s]||r._topologicalSort(s,u,d,p,c)}d[a]=!1,u[a]=!0,c.push(a)},r.chain=function(){for(var a=[],u=0;u<arguments.length;u+=1){var d=arguments[u];d._chained?a.push.apply(a,d._chained):a.push(d)}var p=function(){for(var c,m=new Array(arguments.length),o=0,s=arguments.length;o<s;o++)m[o]=arguments[o];for(o=0;o<a.length;o+=1){var h=a[o].apply(c,m);typeof h<"u"&&(c=h)}return c};return p._chained=a,p},r.chainPathBefore=function(a,u,d){return r.set(a,u,r.chain(d,r.get(a,u)))},r.chainPathAfter=function(a,u,d){return r.set(a,u,r.chain(r.get(a,u),d))},r.setDecomp=function(a){r._decomp=a},r.getDecomp=function(){var a=r._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof gt<"u"&&(a=gt.decomp)}catch{a=null}return a}}()},function(t,n){var r={};t.exports=r,function(){r.create=function(i){var a={min:{x:0,y:0},max:{x:0,y:0}};return i&&r.update(a,i),a},r.update=function(i,a,u){i.min.x=1/0,i.max.x=-1/0,i.min.y=1/0,i.max.y=-1/0;for(var d=0;d<a.length;d++){var p=a[d];p.x>i.max.x&&(i.max.x=p.x),p.x<i.min.x&&(i.min.x=p.x),p.y>i.max.y&&(i.max.y=p.y),p.y<i.min.y&&(i.min.y=p.y)}u&&(u.x>0?i.max.x+=u.x:i.min.x+=u.x,u.y>0?i.max.y+=u.y:i.min.y+=u.y)},r.contains=function(i,a){return a.x>=i.min.x&&a.x<=i.max.x&&a.y>=i.min.y&&a.y<=i.max.y},r.overlaps=function(i,a){return i.min.x<=a.max.x&&i.max.x>=a.min.x&&i.max.y>=a.min.y&&i.min.y<=a.max.y},r.translate=function(i,a){i.min.x+=a.x,i.max.x+=a.x,i.min.y+=a.y,i.max.y+=a.y},r.shift=function(i,a){var u=i.max.x-i.min.x,d=i.max.y-i.min.y;i.min.x=a.x,i.max.x=a.x+u,i.min.y=a.y,i.max.y=a.y+d}}()},function(t,n){var r={};t.exports=r,function(){r.create=function(i,a){return{x:i||0,y:a||0}},r.clone=function(i){return{x:i.x,y:i.y}},r.magnitude=function(i){return Math.sqrt(i.x*i.x+i.y*i.y)},r.magnitudeSquared=function(i){return i.x*i.x+i.y*i.y},r.rotate=function(i,a,u){var d=Math.cos(a),p=Math.sin(a);u||(u={});var c=i.x*d-i.y*p;return u.y=i.x*p+i.y*d,u.x=c,u},r.rotateAbout=function(i,a,u,d){var p=Math.cos(a),c=Math.sin(a);d||(d={});var m=u.x+((i.x-u.x)*p-(i.y-u.y)*c);return d.y=u.y+((i.x-u.x)*c+(i.y-u.y)*p),d.x=m,d},r.normalise=function(i){var a=r.magnitude(i);return a===0?{x:0,y:0}:{x:i.x/a,y:i.y/a}},r.dot=function(i,a){return i.x*a.x+i.y*a.y},r.cross=function(i,a){return i.x*a.y-i.y*a.x},r.cross3=function(i,a,u){return(a.x-i.x)*(u.y-i.y)-(a.y-i.y)*(u.x-i.x)},r.add=function(i,a,u){return u||(u={}),u.x=i.x+a.x,u.y=i.y+a.y,u},r.sub=function(i,a,u){return u||(u={}),u.x=i.x-a.x,u.y=i.y-a.y,u},r.mult=function(i,a){return{x:i.x*a,y:i.y*a}},r.div=function(i,a){return{x:i.x/a,y:i.y/a}},r.perp=function(i,a){return a=a===!0?-1:1,{x:a*-i.y,y:a*i.x}},r.neg=function(i){return{x:-i.x,y:-i.y}},r.angle=function(i,a){return Math.atan2(a.y-i.y,a.x-i.x)},r._temp=[r.create(),r.create(),r.create(),r.create(),r.create(),r.create()]}()},function(t,n,r){var i={};t.exports=i;var a=r(2),u=r(0);(function(){i.create=function(d,p){for(var c=[],m=0;m<d.length;m++){var o=d[m],s={x:o.x,y:o.y,index:m,body:p,isInternal:!1};c.push(s)}return c},i.fromPath=function(d,p){var c=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,m=[];return d.replace(c,function(o,s,h){m.push({x:parseFloat(s),y:parseFloat(h)})}),i.create(m,p)},i.centre=function(d){for(var p=i.area(d,!0),c={x:0,y:0},m,o,s,h=0;h<d.length;h++)s=(h+1)%d.length,m=a.cross(d[h],d[s]),o=a.mult(a.add(d[h],d[s]),m),c=a.add(c,o);return a.div(c,6*p)},i.mean=function(d){for(var p={x:0,y:0},c=0;c<d.length;c++)p.x+=d[c].x,p.y+=d[c].y;return a.div(p,d.length)},i.area=function(d,p){for(var c=0,m=d.length-1,o=0;o<d.length;o++)c+=(d[m].x-d[o].x)*(d[m].y+d[o].y),m=o;return p?c/2:Math.abs(c)/2},i.inertia=function(d,p){for(var c=0,m=0,o=d,s,h,f=0;f<o.length;f++)h=(f+1)%o.length,s=Math.abs(a.cross(o[h],o[f])),c+=s*(a.dot(o[h],o[h])+a.dot(o[h],o[f])+a.dot(o[f],o[f])),m+=s;return p/6*(c/m)},i.translate=function(d,p,c){c=typeof c<"u"?c:1;var m=d.length,o=p.x*c,s=p.y*c,h;for(h=0;h<m;h++)d[h].x+=o,d[h].y+=s;return d},i.rotate=function(d,p,c){if(p!==0){var m=Math.cos(p),o=Math.sin(p),s=c.x,h=c.y,f=d.length,g,v,x,w;for(w=0;w<f;w++)g=d[w],v=g.x-s,x=g.y-h,g.x=s+(v*m-x*o),g.y=h+(v*o+x*m);return d}},i.contains=function(d,p){for(var c=p.x,m=p.y,o=d.length,s=d[o-1],h,f=0;f<o;f++){if(h=d[f],(c-s.x)*(h.y-s.y)+(m-s.y)*(s.x-h.x)>0)return!1;s=h}return!0},i.scale=function(d,p,c,m){if(p===1&&c===1)return d;m=m||i.centre(d);for(var o,s,h=0;h<d.length;h++)o=d[h],s=a.sub(o,m),d[h].x=m.x+s.x*p,d[h].y=m.y+s.y*c;return d},i.chamfer=function(d,p,c,m,o){typeof p=="number"?p=[p]:p=p||[8],c=typeof c<"u"?c:-1,m=m||2,o=o||14;for(var s=[],h=0;h<d.length;h++){var f=d[h-1>=0?h-1:d.length-1],g=d[h],v=d[(h+1)%d.length],x=p[h<p.length?h:p.length-1];if(x===0){s.push(g);continue}var w=a.normalise({x:g.y-f.y,y:f.x-g.x}),S=a.normalise({x:v.y-g.y,y:g.x-v.x}),y=Math.sqrt(2*Math.pow(x,2)),b=a.mult(u.clone(w),x),C=a.normalise(a.mult(a.add(w,S),.5)),k=a.sub(g,a.mult(C,y)),T=c;c===-1&&(T=Math.pow(x,.32)*1.75),T=u.clamp(T,m,o),T%2===1&&(T+=1);for(var P=Math.acos(a.dot(w,S)),E=P/T,O=0;O<T;O++)s.push(a.add(a.rotate(b,E*O),k))}return s},i.clockwiseSort=function(d){var p=i.mean(d);return d.sort(function(c,m){return a.angle(p,c)-a.angle(p,m)}),d},i.isConvex=function(d){var p=0,c=d.length,m,o,s,h;if(c<3)return null;for(m=0;m<c;m++)if(o=(m+1)%c,s=(m+2)%c,h=(d[o].x-d[m].x)*(d[s].y-d[o].y),h-=(d[o].y-d[m].y)*(d[s].x-d[o].x),h<0?p|=1:h>0&&(p|=2),p===3)return!1;return p!==0?!0:null},i.hull=function(d){var p=[],c=[],m,o;for(d=d.slice(0),d.sort(function(s,h){var f=s.x-h.x;return f!==0?f:s.y-h.y}),o=0;o<d.length;o+=1){for(m=d[o];c.length>=2&&a.cross3(c[c.length-2],c[c.length-1],m)<=0;)c.pop();c.push(m)}for(o=d.length-1;o>=0;o-=1){for(m=d[o];p.length>=2&&a.cross3(p[p.length-2],p[p.length-1],m)<=0;)p.pop();p.push(m)}return p.pop(),c.pop(),p.concat(c)}})()},function(t,n,r){var i={};t.exports=i;var a=r(3),u=r(2),d=r(7),p=r(0),c=r(1),m=r(11);(function(){i._timeCorrection=!0,i._inertiaScale=4,i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,i._baseDelta=1e3/60,i.create=function(s){var h={id:p.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:a.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:16.666666666666668,_original:null},f=p.extend(h,s);return o(f,s),f},i.nextGroup=function(s){return s?i._nextNonCollidingGroupId--:i._nextCollidingGroupId++},i.nextCategory=function(){return i._nextCategory=i._nextCategory<<1,i._nextCategory};var o=function(s,h){h=h||{},i.set(s,{bounds:s.bounds||c.create(s.vertices),positionPrev:s.positionPrev||u.clone(s.position),anglePrev:s.anglePrev||s.angle,vertices:s.vertices,parts:s.parts||[s],isStatic:s.isStatic,isSleeping:s.isSleeping,parent:s.parent||s}),a.rotate(s.vertices,s.angle,s.position),m.rotate(s.axes,s.angle),c.update(s.bounds,s.vertices,s.velocity),i.set(s,{axes:h.axes||s.axes,area:h.area||s.area,mass:h.mass||s.mass,inertia:h.inertia||s.inertia});var f=s.isStatic?"#14151f":p.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=s.isStatic?"#555":"#ccc",v=s.isStatic&&s.render.fillStyle===null?1:0;s.render.fillStyle=s.render.fillStyle||f,s.render.strokeStyle=s.render.strokeStyle||g,s.render.lineWidth=s.render.lineWidth||v,s.render.sprite.xOffset+=-(s.bounds.min.x-s.position.x)/(s.bounds.max.x-s.bounds.min.x),s.render.sprite.yOffset+=-(s.bounds.min.y-s.position.y)/(s.bounds.max.y-s.bounds.min.y)};i.set=function(s,h,f){var g;typeof h=="string"&&(g=h,h={},h[g]=f);for(g in h)if(Object.prototype.hasOwnProperty.call(h,g))switch(f=h[g],g){case"isStatic":i.setStatic(s,f);break;case"isSleeping":d.set(s,f);break;case"mass":i.setMass(s,f);break;case"density":i.setDensity(s,f);break;case"inertia":i.setInertia(s,f);break;case"vertices":i.setVertices(s,f);break;case"position":i.setPosition(s,f);break;case"angle":i.setAngle(s,f);break;case"velocity":i.setVelocity(s,f);break;case"angularVelocity":i.setAngularVelocity(s,f);break;case"speed":i.setSpeed(s,f);break;case"angularSpeed":i.setAngularSpeed(s,f);break;case"parts":i.setParts(s,f);break;case"centre":i.setCentre(s,f);break;default:s[g]=f}},i.setStatic=function(s,h){for(var f=0;f<s.parts.length;f++){var g=s.parts[f];g.isStatic=h,h?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},i.setMass=function(s,h){var f=s.inertia/(s.mass/6);s.inertia=f*(h/6),s.inverseInertia=1/s.inertia,s.mass=h,s.inverseMass=1/s.mass,s.density=s.mass/s.area},i.setDensity=function(s,h){i.setMass(s,h*s.area),s.density=h},i.setInertia=function(s,h){s.inertia=h,s.inverseInertia=1/s.inertia},i.setVertices=function(s,h){h[0].body===s?s.vertices=h:s.vertices=a.create(h,s),s.axes=m.fromVertices(s.vertices),s.area=a.area(s.vertices),i.setMass(s,s.density*s.area);var f=a.centre(s.vertices);a.translate(s.vertices,f,-1),i.setInertia(s,i._inertiaScale*a.inertia(s.vertices,s.mass)),a.translate(s.vertices,s.position),c.update(s.bounds,s.vertices,s.velocity)},i.setParts=function(s,h,f){var g;for(h=h.slice(0),s.parts.length=0,s.parts.push(s),s.parent=s,g=0;g<h.length;g++){var v=h[g];v!==s&&(v.parent=s,s.parts.push(v))}if(s.parts.length!==1){if(f=typeof f<"u"?f:!0,f){var x=[];for(g=0;g<h.length;g++)x=x.concat(h[g].vertices);a.clockwiseSort(x);var w=a.hull(x),S=a.centre(w);i.setVertices(s,w),a.translate(s.vertices,S)}var y=i._totalProperties(s);s.area=y.area,s.parent=s,s.position.x=y.centre.x,s.position.y=y.centre.y,s.positionPrev.x=y.centre.x,s.positionPrev.y=y.centre.y,i.setMass(s,y.mass),i.setInertia(s,y.inertia),i.setPosition(s,y.centre)}},i.setCentre=function(s,h,f){f?(s.positionPrev.x+=h.x,s.positionPrev.y+=h.y,s.position.x+=h.x,s.position.y+=h.y):(s.positionPrev.x=h.x-(s.position.x-s.positionPrev.x),s.positionPrev.y=h.y-(s.position.y-s.positionPrev.y),s.position.x=h.x,s.position.y=h.y)},i.setPosition=function(s,h,f){var g=u.sub(h,s.position);f?(s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.velocity.x=g.x,s.velocity.y=g.y,s.speed=u.magnitude(g)):(s.positionPrev.x+=g.x,s.positionPrev.y+=g.y);for(var v=0;v<s.parts.length;v++){var x=s.parts[v];x.position.x+=g.x,x.position.y+=g.y,a.translate(x.vertices,g),c.update(x.bounds,x.vertices,s.velocity)}},i.setAngle=function(s,h,f){var g=h-s.angle;f?(s.anglePrev=s.angle,s.angularVelocity=g,s.angularSpeed=Math.abs(g)):s.anglePrev+=g;for(var v=0;v<s.parts.length;v++){var x=s.parts[v];x.angle+=g,a.rotate(x.vertices,g,s.position),m.rotate(x.axes,g),c.update(x.bounds,x.vertices,s.velocity),v>0&&u.rotateAbout(x.position,g,s.position,x.position)}},i.setVelocity=function(s,h){var f=s.deltaTime/i._baseDelta;s.positionPrev.x=s.position.x-h.x*f,s.positionPrev.y=s.position.y-h.y*f,s.velocity.x=(s.position.x-s.positionPrev.x)/f,s.velocity.y=(s.position.y-s.positionPrev.y)/f,s.speed=u.magnitude(s.velocity)},i.getVelocity=function(s){var h=i._baseDelta/s.deltaTime;return{x:(s.position.x-s.positionPrev.x)*h,y:(s.position.y-s.positionPrev.y)*h}},i.getSpeed=function(s){return u.magnitude(i.getVelocity(s))},i.setSpeed=function(s,h){i.setVelocity(s,u.mult(u.normalise(i.getVelocity(s)),h))},i.setAngularVelocity=function(s,h){var f=s.deltaTime/i._baseDelta;s.anglePrev=s.angle-h*f,s.angularVelocity=(s.angle-s.anglePrev)/f,s.angularSpeed=Math.abs(s.angularVelocity)},i.getAngularVelocity=function(s){return(s.angle-s.anglePrev)*i._baseDelta/s.deltaTime},i.getAngularSpeed=function(s){return Math.abs(i.getAngularVelocity(s))},i.setAngularSpeed=function(s,h){i.setAngularVelocity(s,p.sign(i.getAngularVelocity(s))*h)},i.translate=function(s,h,f){i.setPosition(s,u.add(s.position,h),f)},i.rotate=function(s,h,f,g){if(!f)i.setAngle(s,s.angle+h,g);else{var v=Math.cos(h),x=Math.sin(h),w=s.position.x-f.x,S=s.position.y-f.y;i.setPosition(s,{x:f.x+(w*v-S*x),y:f.y+(w*x+S*v)},g),i.setAngle(s,s.angle+h,g)}},i.scale=function(s,h,f,g){var v=0,x=0;g=g||s.position;for(var w=0;w<s.parts.length;w++){var S=s.parts[w];a.scale(S.vertices,h,f,g),S.axes=m.fromVertices(S.vertices),S.area=a.area(S.vertices),i.setMass(S,s.density*S.area),a.translate(S.vertices,{x:-S.position.x,y:-S.position.y}),i.setInertia(S,i._inertiaScale*a.inertia(S.vertices,S.mass)),a.translate(S.vertices,{x:S.position.x,y:S.position.y}),w>0&&(v+=S.area,x+=S.inertia),S.position.x=g.x+(S.position.x-g.x)*h,S.position.y=g.y+(S.position.y-g.y)*f,c.update(S.bounds,S.vertices,s.velocity)}s.parts.length>1&&(s.area=v,s.isStatic||(i.setMass(s,s.density*v),i.setInertia(s,x))),s.circleRadius&&(h===f?s.circleRadius*=h:s.circleRadius=null)},i.update=function(s,h){h=(typeof h<"u"?h:1e3/60)*s.timeScale;var f=h*h,g=i._timeCorrection?h/(s.deltaTime||h):1,v=1-s.frictionAir*(h/p._baseDelta),x=(s.position.x-s.positionPrev.x)*g,w=(s.position.y-s.positionPrev.y)*g;s.velocity.x=x*v+s.force.x/s.mass*f,s.velocity.y=w*v+s.force.y/s.mass*f,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.position.x+=s.velocity.x,s.position.y+=s.velocity.y,s.deltaTime=h,s.angularVelocity=(s.angle-s.anglePrev)*v*g+s.torque/s.inertia*f,s.anglePrev=s.angle,s.angle+=s.angularVelocity;for(var S=0;S<s.parts.length;S++){var y=s.parts[S];a.translate(y.vertices,s.velocity),S>0&&(y.position.x+=s.velocity.x,y.position.y+=s.velocity.y),s.angularVelocity!==0&&(a.rotate(y.vertices,s.angularVelocity,s.position),m.rotate(y.axes,s.angularVelocity),S>0&&u.rotateAbout(y.position,s.angularVelocity,s.position,y.position)),c.update(y.bounds,y.vertices,s.velocity)}},i.updateVelocities=function(s){var h=i._baseDelta/s.deltaTime,f=s.velocity;f.x=(s.position.x-s.positionPrev.x)*h,f.y=(s.position.y-s.positionPrev.y)*h,s.speed=Math.sqrt(f.x*f.x+f.y*f.y),s.angularVelocity=(s.angle-s.anglePrev)*h,s.angularSpeed=Math.abs(s.angularVelocity)},i.applyForce=function(s,h,f){var g={x:h.x-s.position.x,y:h.y-s.position.y};s.force.x+=f.x,s.force.y+=f.y,s.torque+=g.x*f.y-g.y*f.x},i._totalProperties=function(s){for(var h={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=s.parts.length===1?0:1;f<s.parts.length;f++){var g=s.parts[f],v=g.mass!==1/0?g.mass:1;h.mass+=v,h.area+=g.area,h.inertia+=g.inertia,h.centre=u.add(h.centre,u.mult(g.position,v))}return h.centre=u.div(h.centre,h.mass),h}})()},function(t,n,r){var i={};t.exports=i;var a=r(0);(function(){i.on=function(u,d,p){for(var c=d.split(" "),m,o=0;o<c.length;o++)m=c[o],u.events=u.events||{},u.events[m]=u.events[m]||[],u.events[m].push(p);return p},i.off=function(u,d,p){if(!d){u.events={};return}typeof d=="function"&&(p=d,d=a.keys(u.events).join(" "));for(var c=d.split(" "),m=0;m<c.length;m++){var o=u.events[c[m]],s=[];if(p&&o)for(var h=0;h<o.length;h++)o[h]!==p&&s.push(o[h]);u.events[c[m]]=s}},i.trigger=function(u,d,p){var c,m,o,s,h=u.events;if(h&&a.keys(h).length>0){p||(p={}),c=d.split(" ");for(var f=0;f<c.length;f++)if(m=c[f],o=h[m],o){s=a.clone(p,!1),s.name=m,s.source=u;for(var g=0;g<o.length;g++)o[g].apply(u,[s])}}}})()},function(t,n,r){var i={};t.exports=i;var a=r(5),u=r(0),d=r(1),p=r(4);(function(){i.create=function(c){return u.extend({id:u.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},c)},i.setModified=function(c,m,o,s){if(c.isModified=m,m&&c.cache&&(c.cache.allBodies=null,c.cache.allConstraints=null,c.cache.allComposites=null),o&&c.parent&&i.setModified(c.parent,m,o,s),s)for(var h=0;h<c.composites.length;h++){var f=c.composites[h];i.setModified(f,m,o,s)}},i.add=function(c,m){var o=[].concat(m);a.trigger(c,"beforeAdd",{object:m});for(var s=0;s<o.length;s++){var h=o[s];switch(h.type){case"body":if(h.parent!==h){u.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}i.addBody(c,h);break;case"constraint":i.addConstraint(c,h);break;case"composite":i.addComposite(c,h);break;case"mouseConstraint":i.addConstraint(c,h.constraint);break}}return a.trigger(c,"afterAdd",{object:m}),c},i.remove=function(c,m,o){var s=[].concat(m);a.trigger(c,"beforeRemove",{object:m});for(var h=0;h<s.length;h++){var f=s[h];switch(f.type){case"body":i.removeBody(c,f,o);break;case"constraint":i.removeConstraint(c,f,o);break;case"composite":i.removeComposite(c,f,o);break;case"mouseConstraint":i.removeConstraint(c,f.constraint);break}}return a.trigger(c,"afterRemove",{object:m}),c},i.addComposite=function(c,m){return c.composites.push(m),m.parent=c,i.setModified(c,!0,!0,!1),c},i.removeComposite=function(c,m,o){var s=u.indexOf(c.composites,m);if(s!==-1&&i.removeCompositeAt(c,s),o)for(var h=0;h<c.composites.length;h++)i.removeComposite(c.composites[h],m,!0);return c},i.removeCompositeAt=function(c,m){return c.composites.splice(m,1),i.setModified(c,!0,!0,!1),c},i.addBody=function(c,m){return c.bodies.push(m),i.setModified(c,!0,!0,!1),c},i.removeBody=function(c,m,o){var s=u.indexOf(c.bodies,m);if(s!==-1&&i.removeBodyAt(c,s),o)for(var h=0;h<c.composites.length;h++)i.removeBody(c.composites[h],m,!0);return c},i.removeBodyAt=function(c,m){return c.bodies.splice(m,1),i.setModified(c,!0,!0,!1),c},i.addConstraint=function(c,m){return c.constraints.push(m),i.setModified(c,!0,!0,!1),c},i.removeConstraint=function(c,m,o){var s=u.indexOf(c.constraints,m);if(s!==-1&&i.removeConstraintAt(c,s),o)for(var h=0;h<c.composites.length;h++)i.removeConstraint(c.composites[h],m,!0);return c},i.removeConstraintAt=function(c,m){return c.constraints.splice(m,1),i.setModified(c,!0,!0,!1),c},i.clear=function(c,m,o){if(o)for(var s=0;s<c.composites.length;s++)i.clear(c.composites[s],m,!0);return m?c.bodies=c.bodies.filter(function(h){return h.isStatic}):c.bodies.length=0,c.constraints.length=0,c.composites.length=0,i.setModified(c,!0,!0,!1),c},i.allBodies=function(c){if(c.cache&&c.cache.allBodies)return c.cache.allBodies;for(var m=[].concat(c.bodies),o=0;o<c.composites.length;o++)m=m.concat(i.allBodies(c.composites[o]));return c.cache&&(c.cache.allBodies=m),m},i.allConstraints=function(c){if(c.cache&&c.cache.allConstraints)return c.cache.allConstraints;for(var m=[].concat(c.constraints),o=0;o<c.composites.length;o++)m=m.concat(i.allConstraints(c.composites[o]));return c.cache&&(c.cache.allConstraints=m),m},i.allComposites=function(c){if(c.cache&&c.cache.allComposites)return c.cache.allComposites;for(var m=[].concat(c.composites),o=0;o<c.composites.length;o++)m=m.concat(i.allComposites(c.composites[o]));return c.cache&&(c.cache.allComposites=m),m},i.get=function(c,m,o){var s,h;switch(o){case"body":s=i.allBodies(c);break;case"constraint":s=i.allConstraints(c);break;case"composite":s=i.allComposites(c).concat(c);break}return s?(h=s.filter(function(f){return f.id.toString()===m.toString()}),h.length===0?null:h[0]):null},i.move=function(c,m,o){return i.remove(c,m),i.add(o,m),c},i.rebase=function(c){for(var m=i.allBodies(c).concat(i.allConstraints(c)).concat(i.allComposites(c)),o=0;o<m.length;o++)m[o].id=u.nextId();return c},i.translate=function(c,m,o){for(var s=o?i.allBodies(c):c.bodies,h=0;h<s.length;h++)p.translate(s[h],m);return c},i.rotate=function(c,m,o,s){for(var h=Math.cos(m),f=Math.sin(m),g=s?i.allBodies(c):c.bodies,v=0;v<g.length;v++){var x=g[v],w=x.position.x-o.x,S=x.position.y-o.y;p.setPosition(x,{x:o.x+(w*h-S*f),y:o.y+(w*f+S*h)}),p.rotate(x,m)}return c},i.scale=function(c,m,o,s,h){for(var f=h?i.allBodies(c):c.bodies,g=0;g<f.length;g++){var v=f[g],x=v.position.x-s.x,w=v.position.y-s.y;p.setPosition(v,{x:s.x+x*m,y:s.y+w*o}),p.scale(v,m,o)}return c},i.bounds=function(c){for(var m=i.allBodies(c),o=[],s=0;s<m.length;s+=1){var h=m[s];o.push(h.bounds.min,h.bounds.max)}return d.create(o)}})()},function(t,n,r){var i={};t.exports=i;var a=r(4),u=r(5),d=r(0);(function(){i._motionWakeThreshold=.18,i._motionSleepThreshold=.08,i._minBias=.9,i.update=function(p,c){for(var m=c/d._baseDelta,o=i._motionSleepThreshold,s=0;s<p.length;s++){var h=p[s],f=a.getSpeed(h),g=a.getAngularSpeed(h),v=f*f+g*g;if(h.force.x!==0||h.force.y!==0){i.set(h,!1);continue}var x=Math.min(h.motion,v),w=Math.max(h.motion,v);h.motion=i._minBias*x+(1-i._minBias)*w,h.sleepThreshold>0&&h.motion<o?(h.sleepCounter+=1,h.sleepCounter>=h.sleepThreshold/m&&i.set(h,!0)):h.sleepCounter>0&&(h.sleepCounter-=1)}},i.afterCollisions=function(p){for(var c=i._motionSleepThreshold,m=0;m<p.length;m++){var o=p[m];if(o.isActive){var s=o.collision,h=s.bodyA.parent,f=s.bodyB.parent;if(!(h.isSleeping&&f.isSleeping||h.isStatic||f.isStatic)&&(h.isSleeping||f.isSleeping)){var g=h.isSleeping&&!h.isStatic?h:f,v=g===h?f:h;!g.isStatic&&v.motion>c&&i.set(g,!1)}}}},i.set=function(p,c){var m=p.isSleeping;c?(p.isSleeping=!0,p.sleepCounter=p.sleepThreshold,p.positionImpulse.x=0,p.positionImpulse.y=0,p.positionPrev.x=p.position.x,p.positionPrev.y=p.position.y,p.anglePrev=p.angle,p.speed=0,p.angularSpeed=0,p.motion=0,m||u.trigger(p,"sleepStart")):(p.isSleeping=!1,p.sleepCounter=0,m&&u.trigger(p,"sleepEnd"))}})()},function(t,n,r){var i={};t.exports=i;var a=r(3),u=r(9);(function(){var d=[],p={overlap:0,axis:null},c={overlap:0,axis:null};i.create=function(m,o){return{pair:null,collided:!1,bodyA:m,bodyB:o,parentA:m.parent,parentB:o.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},i.collides=function(m,o,s){if(i._overlapAxes(p,m.vertices,o.vertices,m.axes),p.overlap<=0||(i._overlapAxes(c,o.vertices,m.vertices,o.axes),c.overlap<=0))return null;var h=s&&s.table[u.id(m,o)],f;h?f=h.collision:(f=i.create(m,o),f.collided=!0,f.bodyA=m.id<o.id?m:o,f.bodyB=m.id<o.id?o:m,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent),m=f.bodyA,o=f.bodyB;var g;p.overlap<c.overlap?g=p:g=c;var v=f.normal,x=f.supports,w=g.axis,S=w.x,y=w.y;S*(o.position.x-m.position.x)+y*(o.position.y-m.position.y)<0?(v.x=S,v.y=y):(v.x=-S,v.y=-y),f.tangent.x=-v.y,f.tangent.y=v.x,f.depth=g.overlap,f.penetration.x=v.x*f.depth,f.penetration.y=v.y*f.depth;var b=i._findSupports(m,o,v,1),C=0;if(a.contains(m.vertices,b[0])&&(x[C++]=b[0]),a.contains(m.vertices,b[1])&&(x[C++]=b[1]),C<2){var k=i._findSupports(o,m,v,-1);a.contains(o.vertices,k[0])&&(x[C++]=k[0]),C<2&&a.contains(o.vertices,k[1])&&(x[C++]=k[1])}return C===0&&(x[C++]=b[0]),x.length=C,f},i._overlapAxes=function(m,o,s,h){var f=o.length,g=s.length,v=o[0].x,x=o[0].y,w=s[0].x,S=s[0].y,y=h.length,b=Number.MAX_VALUE,C=0,k,T,P,E,O,A;for(O=0;O<y;O++){var D=h[O],B=D.x,L=D.y,M=v*B+x*L,I=w*B+S*L,H=M,J=I;for(A=1;A<f;A+=1)E=o[A].x*B+o[A].y*L,E>H?H=E:E<M&&(M=E);for(A=1;A<g;A+=1)E=s[A].x*B+s[A].y*L,E>J?J=E:E<I&&(I=E);if(T=H-I,P=J-M,k=T<P?T:P,k<b&&(b=k,C=O,k<=0))break}m.axis=h[C],m.overlap=b},i._projectToAxis=function(m,o,s){for(var h=o[0].x*s.x+o[0].y*s.y,f=h,g=1;g<o.length;g+=1){var v=o[g].x*s.x+o[g].y*s.y;v>f?f=v:v<h&&(h=v)}m.min=h,m.max=f},i._findSupports=function(m,o,s,h){var f=o.vertices,g=f.length,v=m.position.x,x=m.position.y,w=s.x*h,S=s.y*h,y=Number.MAX_VALUE,b,C,k,T,P;for(P=0;P<g;P+=1)C=f[P],T=w*(v-C.x)+S*(x-C.y),T<y&&(y=T,b=C);return k=f[(g+b.index-1)%g],y=w*(v-k.x)+S*(x-k.y),C=f[(b.index+1)%g],w*(v-C.x)+S*(x-C.y)<y?(d[0]=b,d[1]=C,d):(d[0]=b,d[1]=k,d)}})()},function(t,n,r){var i={};t.exports=i;var a=r(16);(function(){i.create=function(u,d){var p=u.bodyA,c=u.bodyB,m={id:i.id(p,c),bodyA:p,bodyB:c,collision:u,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:p.isSensor||c.isSensor,timeCreated:d,timeUpdated:d,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return i.update(m,u,d),m},i.update=function(u,d,p){var c=u.contacts,m=d.supports,o=u.activeContacts,s=d.parentA,h=d.parentB,f=s.vertices.length;u.isActive=!0,u.timeUpdated=p,u.collision=d,u.separation=d.depth,u.inverseMass=s.inverseMass+h.inverseMass,u.friction=s.friction<h.friction?s.friction:h.friction,u.frictionStatic=s.frictionStatic>h.frictionStatic?s.frictionStatic:h.frictionStatic,u.restitution=s.restitution>h.restitution?s.restitution:h.restitution,u.slop=s.slop>h.slop?s.slop:h.slop,d.pair=u,o.length=0;for(var g=0;g<m.length;g++){var v=m[g],x=v.body===s?v.index:f+v.index,w=c[x];w?o.push(w):o.push(c[x]=a.create(v))}},i.setActive=function(u,d,p){d?(u.isActive=!0,u.timeUpdated=p):(u.isActive=!1,u.activeContacts.length=0)},i.id=function(u,d){return u.id<d.id?"A"+u.id+"B"+d.id:"A"+d.id+"B"+u.id}})()},function(t,n,r){var i={};t.exports=i;var a=r(3),u=r(2),d=r(7),p=r(1),c=r(11),m=r(0);(function(){i._warming=.4,i._torqueDampen=1,i._minLength=1e-6,i.create=function(o){var s=o;s.bodyA&&!s.pointA&&(s.pointA={x:0,y:0}),s.bodyB&&!s.pointB&&(s.pointB={x:0,y:0});var h=s.bodyA?u.add(s.bodyA.position,s.pointA):s.pointA,f=s.bodyB?u.add(s.bodyB.position,s.pointB):s.pointB,g=u.magnitude(u.sub(h,f));s.length=typeof s.length<"u"?s.length:g,s.id=s.id||m.nextId(),s.label=s.label||"Constraint",s.type="constraint",s.stiffness=s.stiffness||(s.length>0?1:.7),s.damping=s.damping||0,s.angularStiffness=s.angularStiffness||0,s.angleA=s.bodyA?s.bodyA.angle:s.angleA,s.angleB=s.bodyB?s.bodyB.angle:s.angleB,s.plugin={};var v={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return s.length===0&&s.stiffness>.1?(v.type="pin",v.anchors=!1):s.stiffness<.9&&(v.type="spring"),s.render=m.extend(v,s.render),s},i.preSolveAll=function(o){for(var s=0;s<o.length;s+=1){var h=o[s],f=h.constraintImpulse;h.isStatic||f.x===0&&f.y===0&&f.angle===0||(h.position.x+=f.x,h.position.y+=f.y,h.angle+=f.angle)}},i.solveAll=function(o,s){for(var h=m.clamp(s/m._baseDelta,0,1),f=0;f<o.length;f+=1){var g=o[f],v=!g.bodyA||g.bodyA&&g.bodyA.isStatic,x=!g.bodyB||g.bodyB&&g.bodyB.isStatic;(v||x)&&i.solve(o[f],h)}for(f=0;f<o.length;f+=1)g=o[f],v=!g.bodyA||g.bodyA&&g.bodyA.isStatic,x=!g.bodyB||g.bodyB&&g.bodyB.isStatic,!v&&!x&&i.solve(o[f],h)},i.solve=function(o,s){var h=o.bodyA,f=o.bodyB,g=o.pointA,v=o.pointB;if(!(!h&&!f)){h&&!h.isStatic&&(u.rotate(g,h.angle-o.angleA,g),o.angleA=h.angle),f&&!f.isStatic&&(u.rotate(v,f.angle-o.angleB,v),o.angleB=f.angle);var x=g,w=v;if(h&&(x=u.add(h.position,g)),f&&(w=u.add(f.position,v)),!(!x||!w)){var S=u.sub(x,w),y=u.magnitude(S);y<i._minLength&&(y=i._minLength);var b=(y-o.length)/y,C=o.stiffness>=1||o.length===0,k=C?o.stiffness*s:o.stiffness*s*s,T=o.damping*s,P=u.mult(S,b*k),E=(h?h.inverseMass:0)+(f?f.inverseMass:0),O=(h?h.inverseInertia:0)+(f?f.inverseInertia:0),A=E+O,D,B,L,M,I;if(T>0){var H=u.create();L=u.div(S,y),I=u.sub(f&&u.sub(f.position,f.positionPrev)||H,h&&u.sub(h.position,h.positionPrev)||H),M=u.dot(L,I)}h&&!h.isStatic&&(B=h.inverseMass/E,h.constraintImpulse.x-=P.x*B,h.constraintImpulse.y-=P.y*B,h.position.x-=P.x*B,h.position.y-=P.y*B,T>0&&(h.positionPrev.x-=T*L.x*M*B,h.positionPrev.y-=T*L.y*M*B),D=u.cross(g,P)/A*i._torqueDampen*h.inverseInertia*(1-o.angularStiffness),h.constraintImpulse.angle-=D,h.angle-=D),f&&!f.isStatic&&(B=f.inverseMass/E,f.constraintImpulse.x+=P.x*B,f.constraintImpulse.y+=P.y*B,f.position.x+=P.x*B,f.position.y+=P.y*B,T>0&&(f.positionPrev.x+=T*L.x*M*B,f.positionPrev.y+=T*L.y*M*B),D=u.cross(v,P)/A*i._torqueDampen*f.inverseInertia*(1-o.angularStiffness),f.constraintImpulse.angle+=D,f.angle+=D)}}},i.postSolveAll=function(o){for(var s=0;s<o.length;s++){var h=o[s],f=h.constraintImpulse;if(!(h.isStatic||f.x===0&&f.y===0&&f.angle===0)){d.set(h,!1);for(var g=0;g<h.parts.length;g++){var v=h.parts[g];a.translate(v.vertices,f),g>0&&(v.position.x+=f.x,v.position.y+=f.y),f.angle!==0&&(a.rotate(v.vertices,f.angle,h.position),c.rotate(v.axes,f.angle),g>0&&u.rotateAbout(v.position,f.angle,h.position,v.position)),p.update(v.bounds,v.vertices,h.velocity)}f.angle*=i._warming,f.x*=i._warming,f.y*=i._warming}}},i.pointAWorld=function(o){return{x:(o.bodyA?o.bodyA.position.x:0)+(o.pointA?o.pointA.x:0),y:(o.bodyA?o.bodyA.position.y:0)+(o.pointA?o.pointA.y:0)}},i.pointBWorld=function(o){return{x:(o.bodyB?o.bodyB.position.x:0)+(o.pointB?o.pointB.x:0),y:(o.bodyB?o.bodyB.position.y:0)+(o.pointB?o.pointB.y:0)}}})()},function(t,n,r){var i={};t.exports=i;var a=r(2),u=r(0);(function(){i.fromVertices=function(d){for(var p={},c=0;c<d.length;c++){var m=(c+1)%d.length,o=a.normalise({x:d[m].y-d[c].y,y:d[c].x-d[m].x}),s=o.y===0?1/0:o.x/o.y;s=s.toFixed(3).toString(),p[s]=o}return u.values(p)},i.rotate=function(d,p){if(p!==0)for(var c=Math.cos(p),m=Math.sin(p),o=0;o<d.length;o++){var s=d[o],h;h=s.x*c-s.y*m,s.y=s.x*m+s.y*c,s.x=h}}})()},function(t,n,r){var i={};t.exports=i;var a=r(3),u=r(0),d=r(4),p=r(1),c=r(2);(function(){i.rectangle=function(m,o,s,h,f){f=f||{};var g={label:"Rectangle Body",position:{x:m,y:o},vertices:a.fromPath("L 0 0 L "+s+" 0 L "+s+" "+h+" L 0 "+h)};if(f.chamfer){var v=f.chamfer;g.vertices=a.chamfer(g.vertices,v.radius,v.quality,v.qualityMin,v.qualityMax),delete f.chamfer}return d.create(u.extend({},g,f))},i.trapezoid=function(m,o,s,h,f,g){g=g||{},f*=.5;var v=(1-f*2)*s,x=s*f,w=x+v,S=w+x,y;f<.5?y="L 0 0 L "+x+" "+-h+" L "+w+" "+-h+" L "+S+" 0":y="L 0 0 L "+w+" "+-h+" L "+S+" 0";var b={label:"Trapezoid Body",position:{x:m,y:o},vertices:a.fromPath(y)};if(g.chamfer){var C=g.chamfer;b.vertices=a.chamfer(b.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete g.chamfer}return d.create(u.extend({},b,g))},i.circle=function(m,o,s,h,f){h=h||{};var g={label:"Circle Body",circleRadius:s};f=f||25;var v=Math.ceil(Math.max(10,Math.min(f,s)));return v%2===1&&(v+=1),i.polygon(m,o,v,s,u.extend({},g,h))},i.polygon=function(m,o,s,h,f){if(f=f||{},s<3)return i.circle(m,o,h,f);for(var g=2*Math.PI/s,v="",x=g*.5,w=0;w<s;w+=1){var S=x+w*g,y=Math.cos(S)*h,b=Math.sin(S)*h;v+="L "+y.toFixed(3)+" "+b.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:m,y:o},vertices:a.fromPath(v)};if(f.chamfer){var k=f.chamfer;C.vertices=a.chamfer(C.vertices,k.radius,k.quality,k.qualityMin,k.qualityMax),delete f.chamfer}return d.create(u.extend({},C,f))},i.fromVertices=function(m,o,s,h,f,g,v,x){var w=u.getDecomp(),S,y,b,C,k,T,P,E,O,A,D;for(S=!!(w&&w.quickDecomp),h=h||{},b=[],f=typeof f<"u"?f:!1,g=typeof g<"u"?g:.01,v=typeof v<"u"?v:10,x=typeof x<"u"?x:.01,u.isArray(s[0])||(s=[s]),A=0;A<s.length;A+=1)if(T=s[A],C=a.isConvex(T),k=!C,k&&!S&&u.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),C||!S)C?T=a.clockwiseSort(T):T=a.hull(T),b.push({position:{x:m,y:o},vertices:T});else{var B=T.map(function(re){return[re.x,re.y]});w.makeCCW(B),g!==!1&&w.removeCollinearPoints(B,g),x!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(B,x);var L=w.quickDecomp(B);for(P=0;P<L.length;P++){var M=L[P],I=M.map(function(re){return{x:re[0],y:re[1]}});v>0&&a.area(I)<v||b.push({position:a.centre(I),vertices:I})}}for(P=0;P<b.length;P++)b[P]=d.create(u.extend(b[P],h));if(f){var H=5;for(P=0;P<b.length;P++){var J=b[P];for(E=P+1;E<b.length;E++){var ee=b[E];if(p.overlaps(J.bounds,ee.bounds)){var F=J.vertices,se=ee.vertices;for(O=0;O<J.vertices.length;O++)for(D=0;D<ee.vertices.length;D++){var $=c.magnitudeSquared(c.sub(F[(O+1)%F.length],se[D])),xe=c.magnitudeSquared(c.sub(F[O],se[(D+1)%se.length]));$<H&&xe<H&&(F[O].isInternal=!0,se[D].isInternal=!0)}}}}}return b.length>1?(y=d.create(u.extend({parts:b.slice(0)},h)),d.setPosition(y,{x:m,y:o}),y):b[0]}})()},function(t,n,r){var i={};t.exports=i;var a=r(0),u=r(8);(function(){i.create=function(d){var p={bodies:[],pairs:null};return a.extend(p,d)},i.setBodies=function(d,p){d.bodies=p.slice(0)},i.clear=function(d){d.bodies=[]},i.collisions=function(d){var p=[],c=d.pairs,m=d.bodies,o=m.length,s=i.canCollide,h=u.collides,f,g;for(m.sort(i._compareBoundsX),f=0;f<o;f++){var v=m[f],x=v.bounds,w=v.bounds.max.x,S=v.bounds.max.y,y=v.bounds.min.y,b=v.isStatic||v.isSleeping,C=v.parts.length,k=C===1;for(g=f+1;g<o;g++){var T=m[g],P=T.bounds;if(P.min.x>w)break;if(!(S<P.min.y||y>P.max.y)&&!(b&&(T.isStatic||T.isSleeping))&&s(v.collisionFilter,T.collisionFilter)){var E=T.parts.length;if(k&&E===1){var O=h(v,T,c);O&&p.push(O)}else for(var A=C>1?1:0,D=E>1?1:0,B=A;B<C;B++)for(var L=v.parts[B],x=L.bounds,M=D;M<E;M++){var I=T.parts[M],P=I.bounds;if(!(x.min.x>P.max.x||x.max.x<P.min.x||x.max.y<P.min.y||x.min.y>P.max.y)){var O=h(L,I,c);O&&p.push(O)}}}}}return p},i.canCollide=function(d,p){return d.group===p.group&&d.group!==0?d.group>0:(d.mask&p.category)!==0&&(p.mask&d.category)!==0},i._compareBoundsX=function(d,p){return d.bounds.min.x-p.bounds.min.x}})()},function(t,n,r){var i={};t.exports=i;var a=r(0);(function(){i.create=function(u){var d={};return u||a.log("Mouse.create: element was undefined, defaulting to document.body","warn"),d.element=u||document.body,d.absolute={x:0,y:0},d.position={x:0,y:0},d.mousedownPosition={x:0,y:0},d.mouseupPosition={x:0,y:0},d.offset={x:0,y:0},d.scale={x:1,y:1},d.wheelDelta=0,d.button=-1,d.pixelRatio=parseInt(d.element.getAttribute("data-pixel-ratio"),10)||1,d.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},d.mousemove=function(p){var c=i._getRelativeMousePosition(p,d.element,d.pixelRatio),m=p.changedTouches;m&&(d.button=0,p.preventDefault()),d.absolute.x=c.x,d.absolute.y=c.y,d.position.x=d.absolute.x*d.scale.x+d.offset.x,d.position.y=d.absolute.y*d.scale.y+d.offset.y,d.sourceEvents.mousemove=p},d.mousedown=function(p){var c=i._getRelativeMousePosition(p,d.element,d.pixelRatio),m=p.changedTouches;m?(d.button=0,p.preventDefault()):d.button=p.button,d.absolute.x=c.x,d.absolute.y=c.y,d.position.x=d.absolute.x*d.scale.x+d.offset.x,d.position.y=d.absolute.y*d.scale.y+d.offset.y,d.mousedownPosition.x=d.position.x,d.mousedownPosition.y=d.position.y,d.sourceEvents.mousedown=p},d.mouseup=function(p){var c=i._getRelativeMousePosition(p,d.element,d.pixelRatio),m=p.changedTouches;m&&p.preventDefault(),d.button=-1,d.absolute.x=c.x,d.absolute.y=c.y,d.position.x=d.absolute.x*d.scale.x+d.offset.x,d.position.y=d.absolute.y*d.scale.y+d.offset.y,d.mouseupPosition.x=d.position.x,d.mouseupPosition.y=d.position.y,d.sourceEvents.mouseup=p},d.mousewheel=function(p){d.wheelDelta=Math.max(-1,Math.min(1,p.wheelDelta||-p.detail)),p.preventDefault()},i.setElement(d,d.element),d},i.setElement=function(u,d){u.element=d,d.addEventListener("mousemove",u.mousemove),d.addEventListener("mousedown",u.mousedown),d.addEventListener("mouseup",u.mouseup),d.addEventListener("mousewheel",u.mousewheel),d.addEventListener("DOMMouseScroll",u.mousewheel),d.addEventListener("touchmove",u.mousemove),d.addEventListener("touchstart",u.mousedown),d.addEventListener("touchend",u.mouseup)},i.clearSourceEvents=function(u){u.sourceEvents.mousemove=null,u.sourceEvents.mousedown=null,u.sourceEvents.mouseup=null,u.sourceEvents.mousewheel=null,u.wheelDelta=0},i.setOffset=function(u,d){u.offset.x=d.x,u.offset.y=d.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y},i.setScale=function(u,d){u.scale.x=d.x,u.scale.y=d.y,u.position.x=u.absolute.x*u.scale.x+u.offset.x,u.position.y=u.absolute.y*u.scale.y+u.offset.y},i._getRelativeMousePosition=function(u,d,p){var c=d.getBoundingClientRect(),m=document.documentElement||document.body.parentNode||document.body,o=window.pageXOffset!==void 0?window.pageXOffset:m.scrollLeft,s=window.pageYOffset!==void 0?window.pageYOffset:m.scrollTop,h=u.changedTouches,f,g;return h?(f=h[0].pageX-c.left-o,g=h[0].pageY-c.top-s):(f=u.pageX-c.left-o,g=u.pageY-c.top-s),{x:f/(d.clientWidth/(d.width||d.clientWidth)*p),y:g/(d.clientHeight/(d.height||d.clientHeight)*p)}}})()},function(t,n,r){var i={};t.exports=i;var a=r(0);(function(){i._registry={},i.register=function(u){if(i.isPlugin(u)||a.warn("Plugin.register:",i.toString(u),"does not implement all required fields."),u.name in i._registry){var d=i._registry[u.name],p=i.versionParse(u.version).number,c=i.versionParse(d.version).number;p>c?(a.warn("Plugin.register:",i.toString(d),"was upgraded to",i.toString(u)),i._registry[u.name]=u):p<c?a.warn("Plugin.register:",i.toString(d),"can not be downgraded to",i.toString(u)):u!==d&&a.warn("Plugin.register:",i.toString(u),"is already registered to different plugin object")}else i._registry[u.name]=u;return u},i.resolve=function(u){return i._registry[i.dependencyParse(u).name]},i.toString=function(u){return typeof u=="string"?u:(u.name||"anonymous")+"@"+(u.version||u.range||"0.0.0")},i.isPlugin=function(u){return u&&u.name&&u.version&&u.install},i.isUsed=function(u,d){return u.used.indexOf(d)>-1},i.isFor=function(u,d){var p=u.for&&i.dependencyParse(u.for);return!u.for||d.name===p.name&&i.versionSatisfies(d.version,p.range)},i.use=function(u,d){if(u.uses=(u.uses||[]).concat(d||[]),u.uses.length===0){a.warn("Plugin.use:",i.toString(u),"does not specify any dependencies to install.");return}for(var p=i.dependencies(u),c=a.topologicalSort(p),m=[],o=0;o<c.length;o+=1)if(c[o]!==u.name){var s=i.resolve(c[o]);if(!s){m.push("\u274C "+c[o]);continue}i.isUsed(u,s.name)||(i.isFor(s,u)||(a.warn("Plugin.use:",i.toString(s),"is for",s.for,"but installed on",i.toString(u)+"."),s._warned=!0),s.install?s.install(u):(a.warn("Plugin.use:",i.toString(s),"does not specify an install function."),s._warned=!0),s._warned?(m.push("\u{1F536} "+i.toString(s)),delete s._warned):m.push("\u2705 "+i.toString(s)),u.used.push(s.name))}m.length>0&&a.info(m.join("  "))},i.dependencies=function(u,d){var p=i.dependencyParse(u),c=p.name;if(d=d||{},!(c in d)){u=i.resolve(u)||u,d[c]=a.map(u.uses||[],function(o){i.isPlugin(o)&&i.register(o);var s=i.dependencyParse(o),h=i.resolve(o);return h&&!i.versionSatisfies(h.version,s.range)?(a.warn("Plugin.dependencies:",i.toString(h),"does not satisfy",i.toString(s),"used by",i.toString(p)+"."),h._warned=!0,u._warned=!0):h||(a.warn("Plugin.dependencies:",i.toString(o),"used by",i.toString(p),"could not be resolved."),u._warned=!0),s.name});for(var m=0;m<d[c].length;m+=1)i.dependencies(d[c][m],d);return d}},i.dependencyParse=function(u){if(a.isString(u)){var d=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return d.test(u)||a.warn("Plugin.dependencyParse:",u,"is not a valid dependency string."),{name:u.split("@")[0],range:u.split("@")[1]||"*"}}return{name:u.name,range:u.range||u.version}},i.versionParse=function(u){var d=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;d.test(u)||a.warn("Plugin.versionParse:",u,"is not a valid version or range.");var p=d.exec(u),c=Number(p[4]),m=Number(p[5]),o=Number(p[6]);return{isRange:!!(p[1]||p[2]),version:p[3],range:u,operator:p[1]||p[2]||"",major:c,minor:m,patch:o,parts:[c,m,o],prerelease:p[7],number:c*1e8+m*1e4+o}},i.versionSatisfies=function(u,d){d=d||"*";var p=i.versionParse(d),c=i.versionParse(u);if(p.isRange){if(p.operator==="*"||u==="*")return!0;if(p.operator===">")return c.number>p.number;if(p.operator===">=")return c.number>=p.number;if(p.operator==="~")return c.major===p.major&&c.minor===p.minor&&c.patch>=p.patch;if(p.operator==="^")return p.major>0?c.major===p.major&&c.number>=p.number:p.minor>0?c.minor===p.minor&&c.patch>=p.patch:c.patch===p.patch}return u===d||u==="*"}})()},function(t,n){var r={};t.exports=r,function(){r.create=function(i){return{vertex:i,normalImpulse:0,tangentImpulse:0}}}()},function(t,n,r){var i={};t.exports=i;var a=r(7),u=r(18),d=r(13),p=r(19),c=r(5),m=r(6),o=r(10),s=r(0),h=r(4);(function(){i.create=function(f){f=f||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},v=s.extend(g,f);return v.world=f.world||m.create({label:"World"}),v.pairs=f.pairs||p.create(),v.detector=f.detector||d.create(),v.grid={buckets:[]},v.world.gravity=v.gravity,v.broadphase=v.grid,v.metrics={},v},i.update=function(f,g){var v=s.now(),x=f.world,w=f.detector,S=f.pairs,y=f.timing,b=y.timestamp,C;g=typeof g<"u"?g:s._baseDelta,g*=y.timeScale,y.timestamp+=g,y.lastDelta=g;var k={timestamp:y.timestamp,delta:g};c.trigger(f,"beforeUpdate",k);var T=m.allBodies(x),P=m.allConstraints(x);for(x.isModified&&(d.setBodies(w,T),m.setModified(x,!1,!1,!0)),f.enableSleeping&&a.update(T,g),i._bodiesApplyGravity(T,f.gravity),g>0&&i._bodiesUpdate(T,g),o.preSolveAll(T),C=0;C<f.constraintIterations;C++)o.solveAll(P,g);o.postSolveAll(T),w.pairs=f.pairs;var E=d.collisions(w);p.update(S,E,b),f.enableSleeping&&a.afterCollisions(S.list),S.collisionStart.length>0&&c.trigger(f,"collisionStart",{pairs:S.collisionStart});var O=s.clamp(20/f.positionIterations,0,1);for(u.preSolvePosition(S.list),C=0;C<f.positionIterations;C++)u.solvePosition(S.list,g,O);for(u.postSolvePosition(T),o.preSolveAll(T),C=0;C<f.constraintIterations;C++)o.solveAll(P,g);for(o.postSolveAll(T),u.preSolveVelocity(S.list),C=0;C<f.velocityIterations;C++)u.solveVelocity(S.list,g);return i._bodiesUpdateVelocities(T),S.collisionActive.length>0&&c.trigger(f,"collisionActive",{pairs:S.collisionActive}),S.collisionEnd.length>0&&c.trigger(f,"collisionEnd",{pairs:S.collisionEnd}),i._bodiesClearForces(T),c.trigger(f,"afterUpdate",k),f.timing.lastElapsed=s.now()-v,f},i.merge=function(f,g){if(s.extend(f,g),g.world){f.world=g.world,i.clear(f);for(var v=m.allBodies(f.world),x=0;x<v.length;x++){var w=v[x];a.set(w,!1),w.id=s.nextId()}}},i.clear=function(f){p.clear(f.pairs),d.clear(f.detector)},i._bodiesClearForces=function(f){for(var g=f.length,v=0;v<g;v++){var x=f[v];x.force.x=0,x.force.y=0,x.torque=0}},i._bodiesApplyGravity=function(f,g){var v=typeof g.scale<"u"?g.scale:.001,x=f.length;if(!(g.x===0&&g.y===0||v===0))for(var w=0;w<x;w++){var S=f[w];S.isStatic||S.isSleeping||(S.force.y+=S.mass*g.y*v,S.force.x+=S.mass*g.x*v)}},i._bodiesUpdate=function(f,g){for(var v=f.length,x=0;x<v;x++){var w=f[x];w.isStatic||w.isSleeping||h.update(w,g)}},i._bodiesUpdateVelocities=function(f){for(var g=f.length,v=0;v<g;v++)h.updateVelocities(f[v])}})()},function(t,n,r){var i={};t.exports=i;var a=r(3),u=r(0),d=r(1);(function(){i._restingThresh=2,i._restingThreshTangent=Math.sqrt(6),i._positionDampen=.9,i._positionWarming=.8,i._frictionNormalMultiplier=5,i._frictionMaxStatic=Number.MAX_VALUE,i.preSolvePosition=function(p){var c,m,o,s=p.length;for(c=0;c<s;c++)m=p[c],m.isActive&&(o=m.activeContacts.length,m.collision.parentA.totalContacts+=o,m.collision.parentB.totalContacts+=o)},i.solvePosition=function(p,c,m){var o,s,h,f,g,v,x,w,S=i._positionDampen*(m||1),y=u.clamp(c/u._baseDelta,0,1),b=p.length;for(o=0;o<b;o++)s=p[o],!(!s.isActive||s.isSensor)&&(h=s.collision,f=h.parentA,g=h.parentB,v=h.normal,s.separation=v.x*(g.positionImpulse.x+h.penetration.x-f.positionImpulse.x)+v.y*(g.positionImpulse.y+h.penetration.y-f.positionImpulse.y));for(o=0;o<b;o++)s=p[o],!(!s.isActive||s.isSensor)&&(h=s.collision,f=h.parentA,g=h.parentB,v=h.normal,w=s.separation-s.slop*y,(f.isStatic||g.isStatic)&&(w*=2),f.isStatic||f.isSleeping||(x=S/f.totalContacts,f.positionImpulse.x+=v.x*w*x,f.positionImpulse.y+=v.y*w*x),g.isStatic||g.isSleeping||(x=S/g.totalContacts,g.positionImpulse.x-=v.x*w*x,g.positionImpulse.y-=v.y*w*x))},i.postSolvePosition=function(p){for(var c=i._positionWarming,m=p.length,o=a.translate,s=d.update,h=0;h<m;h++){var f=p[h],g=f.positionImpulse,v=g.x,x=g.y,w=f.velocity;if(f.totalContacts=0,v!==0||x!==0){for(var S=0;S<f.parts.length;S++){var y=f.parts[S];o(y.vertices,g),s(y.bounds,y.vertices,w),y.position.x+=v,y.position.y+=x}f.positionPrev.x+=v,f.positionPrev.y+=x,v*w.x+x*w.y<0?(g.x=0,g.y=0):(g.x*=c,g.y*=c)}}},i.preSolveVelocity=function(p){var c=p.length,m,o;for(m=0;m<c;m++){var s=p[m];if(!(!s.isActive||s.isSensor)){var h=s.activeContacts,f=h.length,g=s.collision,v=g.parentA,x=g.parentB,w=g.normal,S=g.tangent;for(o=0;o<f;o++){var y=h[o],b=y.vertex,C=y.normalImpulse,k=y.tangentImpulse;if(C!==0||k!==0){var T=w.x*C+S.x*k,P=w.y*C+S.y*k;v.isStatic||v.isSleeping||(v.positionPrev.x+=T*v.inverseMass,v.positionPrev.y+=P*v.inverseMass,v.anglePrev+=v.inverseInertia*((b.x-v.position.x)*P-(b.y-v.position.y)*T)),x.isStatic||x.isSleeping||(x.positionPrev.x-=T*x.inverseMass,x.positionPrev.y-=P*x.inverseMass,x.anglePrev-=x.inverseInertia*((b.x-x.position.x)*P-(b.y-x.position.y)*T))}}}}},i.solveVelocity=function(p,c){var m=c/u._baseDelta,o=m*m,s=o*m,h=-i._restingThresh*m,f=i._restingThreshTangent,g=i._frictionNormalMultiplier*m,v=i._frictionMaxStatic,x=p.length,w,S,y,b;for(y=0;y<x;y++){var C=p[y];if(!(!C.isActive||C.isSensor)){var k=C.collision,T=k.parentA,P=k.parentB,E=T.velocity,O=P.velocity,A=k.normal.x,D=k.normal.y,B=k.tangent.x,L=k.tangent.y,M=C.activeContacts,I=M.length,H=1/I,J=T.inverseMass+P.inverseMass,ee=C.friction*C.frictionStatic*g;for(E.x=T.position.x-T.positionPrev.x,E.y=T.position.y-T.positionPrev.y,O.x=P.position.x-P.positionPrev.x,O.y=P.position.y-P.positionPrev.y,T.angularVelocity=T.angle-T.anglePrev,P.angularVelocity=P.angle-P.anglePrev,b=0;b<I;b++){var F=M[b],se=F.vertex,$=se.x-T.position.x,xe=se.y-T.position.y,re=se.x-P.position.x,Oe=se.y-P.position.y,Se=E.x-xe*T.angularVelocity,kt=E.y+$*T.angularVelocity,je=O.x-Oe*P.angularVelocity,z=O.y+re*P.angularVelocity,q=Se-je,U=kt-z,X=A*q+D*U,fe=B*q+L*U,me=C.separation+X,ie=Math.min(me,1);ie=me<0?0:ie;var Q=ie*ee;fe<-Q||fe>Q?(S=fe>0?fe:-fe,w=C.friction*(fe>0?1:-1)*s,w<-S?w=-S:w>S&&(w=S)):(w=fe,S=v);var pt=$*D-xe*A,te=re*D-Oe*A,ne=H/(J+T.inverseInertia*pt*pt+P.inverseInertia*te*te),Ie=(1+C.restitution)*X*ne;if(w*=ne,X<h)F.normalImpulse=0;else{var ze=F.normalImpulse;F.normalImpulse+=Ie,F.normalImpulse>0&&(F.normalImpulse=0),Ie=F.normalImpulse-ze}if(fe<-f||fe>f)F.tangentImpulse=0;else{var De=F.tangentImpulse;F.tangentImpulse+=w,F.tangentImpulse<-S&&(F.tangentImpulse=-S),F.tangentImpulse>S&&(F.tangentImpulse=S),w=F.tangentImpulse-De}var dt=A*Ie+B*w,nt=D*Ie+L*w;T.isStatic||T.isSleeping||(T.positionPrev.x+=dt*T.inverseMass,T.positionPrev.y+=nt*T.inverseMass,T.anglePrev+=($*nt-xe*dt)*T.inverseInertia),P.isStatic||P.isSleeping||(P.positionPrev.x-=dt*P.inverseMass,P.positionPrev.y-=nt*P.inverseMass,P.anglePrev-=(re*nt-Oe*dt)*P.inverseInertia)}}}}})()},function(t,n,r){var i={};t.exports=i;var a=r(9),u=r(0);(function(){i.create=function(d){return u.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},d)},i.update=function(d,p,c){var m=d.list,o=m.length,s=d.table,h=p.length,f=d.collisionStart,g=d.collisionEnd,v=d.collisionActive,x,w,S,y;for(f.length=0,g.length=0,v.length=0,y=0;y<o;y++)m[y].confirmedActive=!1;for(y=0;y<h;y++)x=p[y],S=x.pair,S?(S.isActive?v.push(S):f.push(S),a.update(S,x,c),S.confirmedActive=!0):(S=a.create(x,c),s[S.id]=S,f.push(S),m.push(S));var b=[];for(o=m.length,y=0;y<o;y++)S=m[y],S.confirmedActive||(a.setActive(S,!1,c),g.push(S),!S.collision.bodyA.isSleeping&&!S.collision.bodyB.isSleeping&&b.push(y));for(y=0;y<b.length;y++)w=b[y]-y,S=m[w],m.splice(w,1),delete s[S.id]},i.clear=function(d){return d.table={},d.list.length=0,d.collisionStart.length=0,d.collisionActive.length=0,d.collisionEnd.length=0,d}})()},function(t,n,r){var i=t.exports=r(21);i.Axes=r(11),i.Bodies=r(12),i.Body=r(4),i.Bounds=r(1),i.Collision=r(8),i.Common=r(0),i.Composite=r(6),i.Composites=r(22),i.Constraint=r(10),i.Contact=r(16),i.Detector=r(13),i.Engine=r(17),i.Events=r(5),i.Grid=r(23),i.Mouse=r(14),i.MouseConstraint=r(24),i.Pair=r(9),i.Pairs=r(19),i.Plugin=r(15),i.Query=r(25),i.Render=r(26),i.Resolver=r(18),i.Runner=r(27),i.SAT=r(28),i.Sleeping=r(7),i.Svg=r(29),i.Vector=r(2),i.Vertices=r(3),i.World=r(30),i.Engine.run=i.Runner.run,i.Common.deprecated(i.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(t,n,r){var i={};t.exports=i;var a=r(15),u=r(0);(function(){i.name="matter-js",i.version="0.19.0",i.uses=[],i.used=[],i.use=function(){a.use(i,Array.prototype.slice.call(arguments))},i.before=function(d,p){return d=d.replace(/^Matter./,""),u.chainPathBefore(i,d,p)},i.after=function(d,p){return d=d.replace(/^Matter./,""),u.chainPathAfter(i,d,p)}})()},function(t,n,r){var i={};t.exports=i;var a=r(6),u=r(10),d=r(0),p=r(4),c=r(12),m=d.deprecated;(function(){i.stack=function(o,s,h,f,g,v,x){for(var w=a.create({label:"Stack"}),S=o,y=s,b,C=0,k=0;k<f;k++){for(var T=0,P=0;P<h;P++){var E=x(S,y,P,k,b,C);if(E){var O=E.bounds.max.y-E.bounds.min.y,A=E.bounds.max.x-E.bounds.min.x;O>T&&(T=O),p.translate(E,{x:A*.5,y:O*.5}),S=E.bounds.max.x+g,a.addBody(w,E),b=E,C+=1}else S+=g}y+=T+v,S=o}return w},i.chain=function(o,s,h,f,g,v){for(var x=o.bodies,w=1;w<x.length;w++){var S=x[w-1],y=x[w],b=S.bounds.max.y-S.bounds.min.y,C=S.bounds.max.x-S.bounds.min.x,k=y.bounds.max.y-y.bounds.min.y,T=y.bounds.max.x-y.bounds.min.x,P={bodyA:S,pointA:{x:C*s,y:b*h},bodyB:y,pointB:{x:T*f,y:k*g}},E=d.extend(P,v);a.addConstraint(o,u.create(E))}return o.label+=" Chain",o},i.mesh=function(o,s,h,f,g){var v=o.bodies,x,w,S,y,b;for(x=0;x<h;x++){for(w=1;w<s;w++)S=v[w-1+x*s],y=v[w+x*s],a.addConstraint(o,u.create(d.extend({bodyA:S,bodyB:y},g)));if(x>0)for(w=0;w<s;w++)S=v[w+(x-1)*s],y=v[w+x*s],a.addConstraint(o,u.create(d.extend({bodyA:S,bodyB:y},g))),f&&w>0&&(b=v[w-1+(x-1)*s],a.addConstraint(o,u.create(d.extend({bodyA:b,bodyB:y},g)))),f&&w<s-1&&(b=v[w+1+(x-1)*s],a.addConstraint(o,u.create(d.extend({bodyA:b,bodyB:y},g))))}return o.label+=" Mesh",o},i.pyramid=function(o,s,h,f,g,v,x){return i.stack(o,s,h,f,g,v,function(w,S,y,b,C,k){var T=Math.min(f,Math.ceil(h/2)),P=C?C.bounds.max.x-C.bounds.min.x:0;if(!(b>T)){b=T-b;var E=b,O=h-1-b;if(!(y<E||y>O)){k===1&&p.translate(C,{x:(y+(h%2===1?1:-1))*P,y:0});var A=C?y*P:0;return x(o+A+y*g,S,y,b,C,k)}}})},i.newtonsCradle=function(o,s,h,f,g){for(var v=a.create({label:"Newtons Cradle"}),x=0;x<h;x++){var w=1.9,S=c.circle(o+x*(f*w),s+g,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=u.create({pointA:{x:o+x*(f*w),y:s},bodyB:S});a.addBody(v,S),a.addConstraint(v,y)}return v},m(i,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),i.car=function(o,s,h,f,g){var v=p.nextGroup(!0),x=20,w=-h*.5+x,S=h*.5-x,y=0,b=a.create({label:"Car"}),C=c.rectangle(o,s,h,f,{collisionFilter:{group:v},chamfer:{radius:f*.5},density:2e-4}),k=c.circle(o+w,s+y,g,{collisionFilter:{group:v},friction:.8}),T=c.circle(o+S,s+y,g,{collisionFilter:{group:v},friction:.8}),P=u.create({bodyB:C,pointB:{x:w,y},bodyA:k,stiffness:1,length:0}),E=u.create({bodyB:C,pointB:{x:S,y},bodyA:T,stiffness:1,length:0});return a.addBody(b,C),a.addBody(b,k),a.addBody(b,T),a.addConstraint(b,P),a.addConstraint(b,E),b},m(i,"car","Composites.car \u27A4 moved to car example"),i.softBody=function(o,s,h,f,g,v,x,w,S,y){S=d.extend({inertia:1/0},S),y=d.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var b=i.stack(o,s,h,f,g,v,function(C,k){return c.circle(C,k,w,S)});return i.mesh(b,h,f,x,y),b.label="Soft Body",b},m(i,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(t,n,r){var i={};t.exports=i;var a=r(9),u=r(0),d=u.deprecated;(function(){i.create=function(p){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return u.extend(c,p)},i.update=function(p,c,m,o){var s,h,f,g=m.world,v=p.buckets,x,w,S=!1;for(s=0;s<c.length;s++){var y=c[s];if(!(y.isSleeping&&!o)&&!(g.bounds&&(y.bounds.max.x<g.bounds.min.x||y.bounds.min.x>g.bounds.max.x||y.bounds.max.y<g.bounds.min.y||y.bounds.min.y>g.bounds.max.y))){var b=i._getRegion(p,y);if(!y.region||b.id!==y.region.id||o){(!y.region||o)&&(y.region=b);var C=i._regionUnion(b,y.region);for(h=C.startCol;h<=C.endCol;h++)for(f=C.startRow;f<=C.endRow;f++){w=i._getBucketId(h,f),x=v[w];var k=h>=b.startCol&&h<=b.endCol&&f>=b.startRow&&f<=b.endRow,T=h>=y.region.startCol&&h<=y.region.endCol&&f>=y.region.startRow&&f<=y.region.endRow;!k&&T&&T&&x&&i._bucketRemoveBody(p,x,y),(y.region===b||k&&!T||o)&&(x||(x=i._createBucket(v,w)),i._bucketAddBody(p,x,y))}y.region=b,S=!0}}}S&&(p.pairsList=i._createActivePairsList(p))},d(i,"update","Grid.update \u27A4 replaced by Matter.Detector"),i.clear=function(p){p.buckets={},p.pairs={},p.pairsList=[]},d(i,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),i._regionUnion=function(p,c){var m=Math.min(p.startCol,c.startCol),o=Math.max(p.endCol,c.endCol),s=Math.min(p.startRow,c.startRow),h=Math.max(p.endRow,c.endRow);return i._createRegion(m,o,s,h)},i._getRegion=function(p,c){var m=c.bounds,o=Math.floor(m.min.x/p.bucketWidth),s=Math.floor(m.max.x/p.bucketWidth),h=Math.floor(m.min.y/p.bucketHeight),f=Math.floor(m.max.y/p.bucketHeight);return i._createRegion(o,s,h,f)},i._createRegion=function(p,c,m,o){return{id:p+","+c+","+m+","+o,startCol:p,endCol:c,startRow:m,endRow:o}},i._getBucketId=function(p,c){return"C"+p+"R"+c},i._createBucket=function(p,c){var m=p[c]=[];return m},i._bucketAddBody=function(p,c,m){var o=p.pairs,s=a.id,h=c.length,f;for(f=0;f<h;f++){var g=c[f];if(!(m.id===g.id||m.isStatic&&g.isStatic)){var v=s(m,g),x=o[v];x?x[2]+=1:o[v]=[m,g,1]}}c.push(m)},i._bucketRemoveBody=function(p,c,m){var o=p.pairs,s=a.id,h;c.splice(u.indexOf(c,m),1);var f=c.length;for(h=0;h<f;h++){var g=o[s(m,c[h])];g&&(g[2]-=1)}},i._createActivePairsList=function(p){var c,m=p.pairs,o=u.keys(m),s=o.length,h=[],f;for(f=0;f<s;f++)c=m[o[f]],c[2]>0?h.push(c):delete m[o[f]];return h}})()},function(t,n,r){var i={};t.exports=i;var a=r(3),u=r(7),d=r(14),p=r(5),c=r(13),m=r(10),o=r(6),s=r(0),h=r(1);(function(){i.create=function(f,g){var v=(f?f.mouse:null)||(g?g.mouse:null);v||(f&&f.render&&f.render.canvas?v=d.create(f.render.canvas):g&&g.element?v=d.create(g.element):(v=d.create(),s.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var x=m.create({label:"Mouse Constraint",pointA:v.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:v,element:null,body:null,constraint:x,collisionFilter:{category:1,mask:4294967295,group:0}},S=s.extend(w,g);return p.on(f,"beforeUpdate",function(){var y=o.allBodies(f.world);i.update(S,y),i._triggerEvents(S)}),S},i.update=function(f,g){var v=f.mouse,x=f.constraint,w=f.body;if(v.button===0){if(x.bodyB)u.set(x.bodyB,!1),x.pointA=v.position;else for(var S=0;S<g.length;S++)if(w=g[S],h.contains(w.bounds,v.position)&&c.canCollide(w.collisionFilter,f.collisionFilter))for(var y=w.parts.length>1?1:0;y<w.parts.length;y++){var b=w.parts[y];if(a.contains(b.vertices,v.position)){x.pointA=v.position,x.bodyB=f.body=w,x.pointB={x:v.position.x-w.position.x,y:v.position.y-w.position.y},x.angleB=w.angle,u.set(w,!1),p.trigger(f,"startdrag",{mouse:v,body:w});break}}}else x.bodyB=f.body=null,x.pointB=null,w&&p.trigger(f,"enddrag",{mouse:v,body:w})},i._triggerEvents=function(f){var g=f.mouse,v=g.sourceEvents;v.mousemove&&p.trigger(f,"mousemove",{mouse:g}),v.mousedown&&p.trigger(f,"mousedown",{mouse:g}),v.mouseup&&p.trigger(f,"mouseup",{mouse:g}),d.clearSourceEvents(g)}})()},function(t,n,r){var i={};t.exports=i;var a=r(2),u=r(8),d=r(1),p=r(12),c=r(3);(function(){i.collides=function(m,o){for(var s=[],h=o.length,f=m.bounds,g=u.collides,v=d.overlaps,x=0;x<h;x++){var w=o[x],S=w.parts.length,y=S===1?0:1;if(v(w.bounds,f))for(var b=y;b<S;b++){var C=w.parts[b];if(v(C.bounds,f)){var k=g(C,m);if(k){s.push(k);break}}}}return s},i.ray=function(m,o,s,h){h=h||1e-100;for(var f=a.angle(o,s),g=a.magnitude(a.sub(o,s)),v=(s.x+o.x)*.5,x=(s.y+o.y)*.5,w=p.rectangle(v,x,g,h,{angle:f}),S=i.collides(w,m),y=0;y<S.length;y+=1){var b=S[y];b.body=b.bodyB=b.bodyA}return S},i.region=function(m,o,s){for(var h=[],f=0;f<m.length;f++){var g=m[f],v=d.overlaps(g.bounds,o);(v&&!s||!v&&s)&&h.push(g)}return h},i.point=function(m,o){for(var s=[],h=0;h<m.length;h++){var f=m[h];if(d.contains(f.bounds,o))for(var g=f.parts.length===1?0:1;g<f.parts.length;g++){var v=f.parts[g];if(d.contains(v.bounds,o)&&c.contains(v.vertices,o)){s.push(f);break}}}return s}})()},function(t,n,r){var i={};t.exports=i;var a=r(4),u=r(0),d=r(6),p=r(1),c=r(5),m=r(2),o=r(14);(function(){var s,h;typeof window<"u"&&(s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(y){window.setTimeout(function(){y(u.now())},1e3/60)},h=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),i._goodFps=30,i._goodDelta=1e3/60,i.create=function(y){var b={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!y.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},C=u.extend(b,y);return C.canvas&&(C.canvas.width=C.options.width||C.canvas.width,C.canvas.height=C.options.height||C.canvas.height),C.mouse=y.mouse,C.engine=y.engine,C.canvas=C.canvas||v(C.options.width,C.options.height),C.context=C.canvas.getContext("2d"),C.textures={},C.bounds=C.bounds||{min:{x:0,y:0},max:{x:C.canvas.width,y:C.canvas.height}},C.controller=i,C.options.showBroadphase=!1,C.options.pixelRatio!==1&&i.setPixelRatio(C,C.options.pixelRatio),u.isElement(C.element)&&C.element.appendChild(C.canvas),C},i.run=function(y){(function b(C){y.frameRequestId=s(b),f(y,C),i.world(y,C),(y.options.showStats||y.options.showDebug)&&i.stats(y,y.context,C),(y.options.showPerformance||y.options.showDebug)&&i.performance(y,y.context,C)})()},i.stop=function(y){h(y.frameRequestId)},i.setPixelRatio=function(y,b){var C=y.options,k=y.canvas;b==="auto"&&(b=x(k)),C.pixelRatio=b,k.setAttribute("data-pixel-ratio",b),k.width=C.width*b,k.height=C.height*b,k.style.width=C.width+"px",k.style.height=C.height+"px"},i.lookAt=function(y,b,C,k){k=typeof k<"u"?k:!0,b=u.isArray(b)?b:[b],C=C||{x:0,y:0};for(var T={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},P=0;P<b.length;P+=1){var E=b[P],O=E.bounds?E.bounds.min:E.min||E.position||E,A=E.bounds?E.bounds.max:E.max||E.position||E;O&&A&&(O.x<T.min.x&&(T.min.x=O.x),A.x>T.max.x&&(T.max.x=A.x),O.y<T.min.y&&(T.min.y=O.y),A.y>T.max.y&&(T.max.y=A.y))}var D=T.max.x-T.min.x+2*C.x,B=T.max.y-T.min.y+2*C.y,L=y.canvas.height,M=y.canvas.width,I=M/L,H=D/B,J=1,ee=1;H>I?ee=H/I:J=I/H,y.options.hasBounds=!0,y.bounds.min.x=T.min.x,y.bounds.max.x=T.min.x+D*J,y.bounds.min.y=T.min.y,y.bounds.max.y=T.min.y+B*ee,k&&(y.bounds.min.x+=D*.5-D*J*.5,y.bounds.max.x+=D*.5-D*J*.5,y.bounds.min.y+=B*.5-B*ee*.5,y.bounds.max.y+=B*.5-B*ee*.5),y.bounds.min.x-=C.x,y.bounds.max.x-=C.x,y.bounds.min.y-=C.y,y.bounds.max.y-=C.y,y.mouse&&(o.setScale(y.mouse,{x:(y.bounds.max.x-y.bounds.min.x)/y.canvas.width,y:(y.bounds.max.y-y.bounds.min.y)/y.canvas.height}),o.setOffset(y.mouse,y.bounds.min))},i.startViewTransform=function(y){var b=y.bounds.max.x-y.bounds.min.x,C=y.bounds.max.y-y.bounds.min.y,k=b/y.options.width,T=C/y.options.height;y.context.setTransform(y.options.pixelRatio/k,0,0,y.options.pixelRatio/T,0,0),y.context.translate(-y.bounds.min.x,-y.bounds.min.y)},i.endViewTransform=function(y){y.context.setTransform(y.options.pixelRatio,0,0,y.options.pixelRatio,0,0)},i.world=function(y,b){var C=u.now(),k=y.engine,T=k.world,P=y.canvas,E=y.context,O=y.options,A=y.timing,D=d.allBodies(T),B=d.allConstraints(T),L=O.wireframes?O.wireframeBackground:O.background,M=[],I=[],H,J={timestamp:k.timing.timestamp};if(c.trigger(y,"beforeRender",J),y.currentBackground!==L&&S(y,L),E.globalCompositeOperation="source-in",E.fillStyle="transparent",E.fillRect(0,0,P.width,P.height),E.globalCompositeOperation="source-over",O.hasBounds){for(H=0;H<D.length;H++){var ee=D[H];p.overlaps(ee.bounds,y.bounds)&&M.push(ee)}for(H=0;H<B.length;H++){var F=B[H],se=F.bodyA,$=F.bodyB,xe=F.pointA,re=F.pointB;se&&(xe=m.add(se.position,F.pointA)),$&&(re=m.add($.position,F.pointB)),!(!xe||!re)&&(p.contains(y.bounds,xe)||p.contains(y.bounds,re))&&I.push(F)}i.startViewTransform(y),y.mouse&&(o.setScale(y.mouse,{x:(y.bounds.max.x-y.bounds.min.x)/y.options.width,y:(y.bounds.max.y-y.bounds.min.y)/y.options.height}),o.setOffset(y.mouse,y.bounds.min))}else I=B,M=D,y.options.pixelRatio!==1&&y.context.setTransform(y.options.pixelRatio,0,0,y.options.pixelRatio,0,0);!O.wireframes||k.enableSleeping&&O.showSleeping?i.bodies(y,M,E):(O.showConvexHulls&&i.bodyConvexHulls(y,M,E),i.bodyWireframes(y,M,E)),O.showBounds&&i.bodyBounds(y,M,E),(O.showAxes||O.showAngleIndicator)&&i.bodyAxes(y,M,E),O.showPositions&&i.bodyPositions(y,M,E),O.showVelocity&&i.bodyVelocity(y,M,E),O.showIds&&i.bodyIds(y,M,E),O.showSeparations&&i.separations(y,k.pairs.list,E),O.showCollisions&&i.collisions(y,k.pairs.list,E),O.showVertexNumbers&&i.vertexNumbers(y,M,E),O.showMousePosition&&i.mousePosition(y,y.mouse,E),i.constraints(I,E),O.hasBounds&&i.endViewTransform(y),c.trigger(y,"afterRender",J),A.lastElapsed=u.now()-C},i.stats=function(y,b,C){for(var k=y.engine,T=k.world,P=d.allBodies(T),E=0,O=55,A=44,D=0,B=0,L=0;L<P.length;L+=1)E+=P[L].parts.length;var M={Part:E,Body:P.length,Cons:d.allConstraints(T).length,Comp:d.allComposites(T).length,Pair:k.pairs.list.length};b.fillStyle="#0e0f19",b.fillRect(D,B,O*5.5,A),b.font="12px Arial",b.textBaseline="top",b.textAlign="right";for(var I in M){var H=M[I];b.fillStyle="#aaa",b.fillText(I,D+O,B+8),b.fillStyle="#eee",b.fillText(H,D+O,B+26),D+=O}},i.performance=function(y,b){var C=y.engine,k=y.timing,T=k.deltaHistory,P=k.elapsedHistory,E=k.timestampElapsedHistory,O=k.engineDeltaHistory,A=k.engineElapsedHistory,D=C.timing.lastDelta,B=g(T),L=g(P),M=g(O),I=g(A),H=g(E),J=H/B||0,ee=1e3/B||0,F=4,se=12,$=60,xe=34,re=10,Oe=69;b.fillStyle="#0e0f19",b.fillRect(0,50,se*4+$*5+22,xe),i.status(b,re,Oe,$,F,T.length,Math.round(ee)+" fps",ee/i._goodFps,function(Se){return T[Se]/B-1}),i.status(b,re+se+$,Oe,$,F,O.length,D.toFixed(2)+" dt",i._goodDelta/D,function(Se){return O[Se]/M-1}),i.status(b,re+(se+$)*2,Oe,$,F,A.length,I.toFixed(2)+" ut",1-I/i._goodFps,function(Se){return A[Se]/I-1}),i.status(b,re+(se+$)*3,Oe,$,F,P.length,L.toFixed(2)+" rt",1-L/i._goodFps,function(Se){return P[Se]/L-1}),i.status(b,re+(se+$)*4,Oe,$,F,E.length,J.toFixed(2)+" x",J*J*J,function(Se){return(E[Se]/T[Se]/J||0)-1})},i.status=function(y,b,C,k,T,P,E,O,A){y.strokeStyle="#888",y.fillStyle="#444",y.lineWidth=1,y.fillRect(b,C+7,k,1),y.beginPath(),y.moveTo(b,C+7-T*u.clamp(.4*A(0),-2,2));for(var D=0;D<k;D+=1)y.lineTo(b+D,C+7-(D<P?T*u.clamp(.4*A(D),-2,2):0));y.stroke(),y.fillStyle="hsl("+u.clamp(25+95*O,0,120)+",100%,60%)",y.fillRect(b,C-7,4,4),y.font="12px Arial",y.textBaseline="middle",y.textAlign="right",y.fillStyle="#eee",y.fillText(E,b+k,C-5)},i.constraints=function(y,b){for(var C=b,k=0;k<y.length;k++){var T=y[k];if(!(!T.render.visible||!T.pointA||!T.pointB)){var P=T.bodyA,E=T.bodyB,O,A;if(P?O=m.add(P.position,T.pointA):O=T.pointA,T.render.type==="pin")C.beginPath(),C.arc(O.x,O.y,3,0,2*Math.PI),C.closePath();else{if(E?A=m.add(E.position,T.pointB):A=T.pointB,C.beginPath(),C.moveTo(O.x,O.y),T.render.type==="spring")for(var D=m.sub(A,O),B=m.perp(m.normalise(D)),L=Math.ceil(u.clamp(T.length/5,12,20)),M,I=1;I<L;I+=1)M=I%2===0?1:-1,C.lineTo(O.x+D.x*(I/L)+B.x*M*4,O.y+D.y*(I/L)+B.y*M*4);C.lineTo(A.x,A.y)}T.render.lineWidth&&(C.lineWidth=T.render.lineWidth,C.strokeStyle=T.render.strokeStyle,C.stroke()),T.render.anchors&&(C.fillStyle=T.render.strokeStyle,C.beginPath(),C.arc(O.x,O.y,3,0,2*Math.PI),C.arc(A.x,A.y,3,0,2*Math.PI),C.closePath(),C.fill())}}},i.bodies=function(y,b,C){var k=C,T=y.engine,P=y.options,E=P.showInternalEdges||!P.wireframes,O,A,D,B;for(D=0;D<b.length;D++)if(O=b[D],!!O.render.visible){for(B=O.parts.length>1?1:0;B<O.parts.length;B++)if(A=O.parts[B],!!A.render.visible){if(P.showSleeping&&O.isSleeping?k.globalAlpha=.5*A.render.opacity:A.render.opacity!==1&&(k.globalAlpha=A.render.opacity),A.render.sprite&&A.render.sprite.texture&&!P.wireframes){var L=A.render.sprite,M=w(y,L.texture);k.translate(A.position.x,A.position.y),k.rotate(A.angle),k.drawImage(M,M.width*-L.xOffset*L.xScale,M.height*-L.yOffset*L.yScale,M.width*L.xScale,M.height*L.yScale),k.rotate(-A.angle),k.translate(-A.position.x,-A.position.y)}else{if(A.circleRadius)k.beginPath(),k.arc(A.position.x,A.position.y,A.circleRadius,0,2*Math.PI);else{k.beginPath(),k.moveTo(A.vertices[0].x,A.vertices[0].y);for(var I=1;I<A.vertices.length;I++)!A.vertices[I-1].isInternal||E?k.lineTo(A.vertices[I].x,A.vertices[I].y):k.moveTo(A.vertices[I].x,A.vertices[I].y),A.vertices[I].isInternal&&!E&&k.moveTo(A.vertices[(I+1)%A.vertices.length].x,A.vertices[(I+1)%A.vertices.length].y);k.lineTo(A.vertices[0].x,A.vertices[0].y),k.closePath()}P.wireframes?(k.lineWidth=1,k.strokeStyle="#bbb",k.stroke()):(k.fillStyle=A.render.fillStyle,A.render.lineWidth&&(k.lineWidth=A.render.lineWidth,k.strokeStyle=A.render.strokeStyle,k.stroke()),k.fill())}k.globalAlpha=1}}},i.bodyWireframes=function(y,b,C){var k=C,T=y.options.showInternalEdges,P,E,O,A,D;for(k.beginPath(),O=0;O<b.length;O++)if(P=b[O],!!P.render.visible)for(D=P.parts.length>1?1:0;D<P.parts.length;D++){for(E=P.parts[D],k.moveTo(E.vertices[0].x,E.vertices[0].y),A=1;A<E.vertices.length;A++)!E.vertices[A-1].isInternal||T?k.lineTo(E.vertices[A].x,E.vertices[A].y):k.moveTo(E.vertices[A].x,E.vertices[A].y),E.vertices[A].isInternal&&!T&&k.moveTo(E.vertices[(A+1)%E.vertices.length].x,E.vertices[(A+1)%E.vertices.length].y);k.lineTo(E.vertices[0].x,E.vertices[0].y)}k.lineWidth=1,k.strokeStyle="#bbb",k.stroke()},i.bodyConvexHulls=function(y,b,C){var k=C,T,P,E,O,A;for(k.beginPath(),E=0;E<b.length;E++)if(T=b[E],!(!T.render.visible||T.parts.length===1)){for(k.moveTo(T.vertices[0].x,T.vertices[0].y),O=1;O<T.vertices.length;O++)k.lineTo(T.vertices[O].x,T.vertices[O].y);k.lineTo(T.vertices[0].x,T.vertices[0].y)}k.lineWidth=1,k.strokeStyle="rgba(255,255,255,0.2)",k.stroke()},i.vertexNumbers=function(y,b,C){var k=C,T,P,E;for(T=0;T<b.length;T++){var O=b[T].parts;for(E=O.length>1?1:0;E<O.length;E++){var A=O[E];for(P=0;P<A.vertices.length;P++)k.fillStyle="rgba(255,255,255,0.2)",k.fillText(T+"_"+P,A.position.x+(A.vertices[P].x-A.position.x)*.8,A.position.y+(A.vertices[P].y-A.position.y)*.8)}}},i.mousePosition=function(y,b,C){var k=C;k.fillStyle="rgba(255,255,255,0.8)",k.fillText(b.position.x+"  "+b.position.y,b.position.x+5,b.position.y-5)},i.bodyBounds=function(y,b,C){var k=C,T=y.engine,P=y.options;k.beginPath();for(var E=0;E<b.length;E++){var O=b[E];if(O.render.visible)for(var A=b[E].parts,D=A.length>1?1:0;D<A.length;D++){var B=A[D];k.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}P.wireframes?k.strokeStyle="rgba(255,255,255,0.08)":k.strokeStyle="rgba(0,0,0,0.1)",k.lineWidth=1,k.stroke()},i.bodyAxes=function(y,b,C){var k=C,T=y.engine,P=y.options,E,O,A,D;for(k.beginPath(),O=0;O<b.length;O++){var B=b[O],L=B.parts;if(B.render.visible)if(P.showAxes)for(A=L.length>1?1:0;A<L.length;A++)for(E=L[A],D=0;D<E.axes.length;D++){var M=E.axes[D];k.moveTo(E.position.x,E.position.y),k.lineTo(E.position.x+M.x*20,E.position.y+M.y*20)}else for(A=L.length>1?1:0;A<L.length;A++)for(E=L[A],D=0;D<E.axes.length;D++)k.moveTo(E.position.x,E.position.y),k.lineTo((E.vertices[0].x+E.vertices[E.vertices.length-1].x)/2,(E.vertices[0].y+E.vertices[E.vertices.length-1].y)/2)}P.wireframes?(k.strokeStyle="indianred",k.lineWidth=1):(k.strokeStyle="rgba(255, 255, 255, 0.4)",k.globalCompositeOperation="overlay",k.lineWidth=2),k.stroke(),k.globalCompositeOperation="source-over"},i.bodyPositions=function(y,b,C){var k=C,T=y.engine,P=y.options,E,O,A,D;for(k.beginPath(),A=0;A<b.length;A++)if(E=b[A],!!E.render.visible)for(D=0;D<E.parts.length;D++)O=E.parts[D],k.arc(O.position.x,O.position.y,3,0,2*Math.PI,!1),k.closePath();for(P.wireframes?k.fillStyle="indianred":k.fillStyle="rgba(0,0,0,0.5)",k.fill(),k.beginPath(),A=0;A<b.length;A++)E=b[A],E.render.visible&&(k.arc(E.positionPrev.x,E.positionPrev.y,2,0,2*Math.PI,!1),k.closePath());k.fillStyle="rgba(255,165,0,0.8)",k.fill()},i.bodyVelocity=function(y,b,C){var k=C;k.beginPath();for(var T=0;T<b.length;T++){var P=b[T];if(P.render.visible){var E=a.getVelocity(P);k.moveTo(P.position.x,P.position.y),k.lineTo(P.position.x+E.x,P.position.y+E.y)}}k.lineWidth=3,k.strokeStyle="cornflowerblue",k.stroke()},i.bodyIds=function(y,b,C){var k=C,T,P;for(T=0;T<b.length;T++)if(b[T].render.visible){var E=b[T].parts;for(P=E.length>1?1:0;P<E.length;P++){var O=E[P];k.font="12px Arial",k.fillStyle="rgba(255,255,255,0.5)",k.fillText(O.id,O.position.x+10,O.position.y-10)}}},i.collisions=function(y,b,C){var k=C,T=y.options,P,E,O,A,D,B,L;for(k.beginPath(),B=0;B<b.length;B++)if(P=b[B],!!P.isActive)for(E=P.collision,L=0;L<P.activeContacts.length;L++){var M=P.activeContacts[L],I=M.vertex;k.rect(I.x-1.5,I.y-1.5,3.5,3.5)}for(T.wireframes?k.fillStyle="rgba(255,255,255,0.7)":k.fillStyle="orange",k.fill(),k.beginPath(),B=0;B<b.length;B++)if(P=b[B],!!P.isActive&&(E=P.collision,P.activeContacts.length>0)){var H=P.activeContacts[0].vertex.x,J=P.activeContacts[0].vertex.y;P.activeContacts.length===2&&(H=(P.activeContacts[0].vertex.x+P.activeContacts[1].vertex.x)/2,J=(P.activeContacts[0].vertex.y+P.activeContacts[1].vertex.y)/2),E.bodyB===E.supports[0].body||E.bodyA.isStatic===!0?k.moveTo(H-E.normal.x*8,J-E.normal.y*8):k.moveTo(H+E.normal.x*8,J+E.normal.y*8),k.lineTo(H,J)}T.wireframes?k.strokeStyle="rgba(255,165,0,0.7)":k.strokeStyle="orange",k.lineWidth=1,k.stroke()},i.separations=function(y,b,C){var k=C,T=y.options,P,E,O,A,D,B,L;for(k.beginPath(),B=0;B<b.length;B++)if(P=b[B],!!P.isActive){E=P.collision,A=E.bodyA,D=E.bodyB;var M=1;!D.isStatic&&!A.isStatic&&(M=.5),D.isStatic&&(M=0),k.moveTo(D.position.x,D.position.y),k.lineTo(D.position.x-E.penetration.x*M,D.position.y-E.penetration.y*M),M=1,!D.isStatic&&!A.isStatic&&(M=.5),A.isStatic&&(M=0),k.moveTo(A.position.x,A.position.y),k.lineTo(A.position.x+E.penetration.x*M,A.position.y+E.penetration.y*M)}T.wireframes?k.strokeStyle="rgba(255,165,0,0.5)":k.strokeStyle="orange",k.stroke()},i.inspector=function(y,b){var C=y.engine,k=y.selected,T=y.render,P=T.options,E;if(P.hasBounds){var O=T.bounds.max.x-T.bounds.min.x,A=T.bounds.max.y-T.bounds.min.y,D=O/T.options.width,B=A/T.options.height;b.scale(1/D,1/B),b.translate(-T.bounds.min.x,-T.bounds.min.y)}for(var L=0;L<k.length;L++){var M=k[L].data;switch(b.translate(.5,.5),b.lineWidth=1,b.strokeStyle="rgba(255,165,0,0.9)",b.setLineDash([1,2]),M.type){case"body":E=M.bounds,b.beginPath(),b.rect(Math.floor(E.min.x-3),Math.floor(E.min.y-3),Math.floor(E.max.x-E.min.x+6),Math.floor(E.max.y-E.min.y+6)),b.closePath(),b.stroke();break;case"constraint":var I=M.pointA;M.bodyA&&(I=M.pointB),b.beginPath(),b.arc(I.x,I.y,10,0,2*Math.PI),b.closePath(),b.stroke();break}b.setLineDash([]),b.translate(-.5,-.5)}y.selectStart!==null&&(b.translate(.5,.5),b.lineWidth=1,b.strokeStyle="rgba(255,165,0,0.6)",b.fillStyle="rgba(255,165,0,0.1)",E=y.selectBounds,b.beginPath(),b.rect(Math.floor(E.min.x),Math.floor(E.min.y),Math.floor(E.max.x-E.min.x),Math.floor(E.max.y-E.min.y)),b.closePath(),b.stroke(),b.fill(),b.translate(-.5,-.5)),P.hasBounds&&b.setTransform(1,0,0,1,0,0)};var f=function(y,b){var C=y.engine,k=y.timing,T=k.historySize,P=C.timing.timestamp;k.delta=b-k.lastTime||i._goodDelta,k.lastTime=b,k.timestampElapsed=P-k.lastTimestamp||0,k.lastTimestamp=P,k.deltaHistory.unshift(k.delta),k.deltaHistory.length=Math.min(k.deltaHistory.length,T),k.engineDeltaHistory.unshift(C.timing.lastDelta),k.engineDeltaHistory.length=Math.min(k.engineDeltaHistory.length,T),k.timestampElapsedHistory.unshift(k.timestampElapsed),k.timestampElapsedHistory.length=Math.min(k.timestampElapsedHistory.length,T),k.engineElapsedHistory.unshift(C.timing.lastElapsed),k.engineElapsedHistory.length=Math.min(k.engineElapsedHistory.length,T),k.elapsedHistory.unshift(k.lastElapsed),k.elapsedHistory.length=Math.min(k.elapsedHistory.length,T)},g=function(y){for(var b=0,C=0;C<y.length;C+=1)b+=y[C];return b/y.length||0},v=function(y,b){var C=document.createElement("canvas");return C.width=y,C.height=b,C.oncontextmenu=function(){return!1},C.onselectstart=function(){return!1},C},x=function(y){var b=y.getContext("2d"),C=window.devicePixelRatio||1,k=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1;return C/k},w=function(y,b){var C=y.textures[b];return C||(C=y.textures[b]=new Image,C.src=b,C)},S=function(y,b){var C=b;/(jpg|gif|png)$/.test(b)&&(C="url("+b+")"),y.canvas.style.background=C,y.canvas.style.backgroundSize="contain",y.currentBackground=b}})()},function(t,n,r){var i={};t.exports=i;var a=r(5),u=r(17),d=r(0);(function(){var p,c;if(typeof window<"u"&&(p=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,c=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!p){var m;p=function(o){m=setTimeout(function(){o(d.now())},1e3/60)},c=function(){clearTimeout(m)}}i.create=function(o){var s={fps:60,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,frameRequestId:null,isFixed:!1,enabled:!0},h=d.extend(s,o);return h.delta=h.delta||1e3/h.fps,h.deltaMin=h.deltaMin||1e3/h.fps,h.deltaMax=h.deltaMax||1e3/(h.fps*.5),h.fps=1e3/h.delta,h},i.run=function(o,s){return typeof o.positionIterations<"u"&&(s=o,o=i.create()),function h(f){o.frameRequestId=p(h),f&&o.enabled&&i.tick(o,s,f)}(),o},i.tick=function(o,s,h){var f=s.timing,g;o.isFixed?g=o.delta:(g=h-o.timePrev||o.delta,o.timePrev=h,o.deltaHistory.push(g),o.deltaHistory=o.deltaHistory.slice(-o.deltaSampleSize),g=Math.min.apply(null,o.deltaHistory),g=g<o.deltaMin?o.deltaMin:g,g=g>o.deltaMax?o.deltaMax:g,o.delta=g);var v={timestamp:f.timestamp};a.trigger(o,"beforeTick",v),o.frameCounter+=1,h-o.counterTimestamp>=1e3&&(o.fps=o.frameCounter*((h-o.counterTimestamp)/1e3),o.counterTimestamp=h,o.frameCounter=0),a.trigger(o,"tick",v),a.trigger(o,"beforeUpdate",v),u.update(s,g),a.trigger(o,"afterUpdate",v),a.trigger(o,"afterTick",v)},i.stop=function(o){c(o.frameRequestId)},i.start=function(o,s){i.run(o,s)}})()},function(t,n,r){var i={};t.exports=i;var a=r(8),u=r(0),d=u.deprecated;(function(){i.collides=function(p,c){return a.collides(p,c)},d(i,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(t,n,r){var i={};t.exports=i;var a=r(1),u=r(0);(function(){i.pathToVertices=function(d,p){typeof window<"u"&&!("SVGPathSeg"in window)&&u.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,m,o,s,h,f,g,v,x,w,S=[],y,b,C=0,k=0,T=0;p=p||15;var P=function(O,A,D){var B=D%2===1&&D>1;if(!x||O!=x.x||A!=x.y){x&&B?(y=x.x,b=x.y):(y=0,b=0);var L={x:y+O,y:b+A};(B||!x)&&(x=L),S.push(L),k=y+O,T=b+A}},E=function(O){var A=O.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":k=O.x,T=O.y;break;case"H":k=O.x;break;case"V":T=O.y;break}P(k,T,O.pathSegType)}};for(i._svgPathToAbsolute(d),o=d.getTotalLength(),f=[],c=0;c<d.pathSegList.numberOfItems;c+=1)f.push(d.pathSegList.getItem(c));for(g=f.concat();C<o;){if(w=d.getPathSegAtLength(C),h=f[w],h!=v){for(;g.length&&g[0]!=h;)E(g.shift());v=h}switch(h.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":s=d.getPointAtLength(C),P(s.x,s.y,0);break}C+=p}for(c=0,m=g.length;c<m;++c)E(g[c]);return S},i._svgPathToAbsolute=function(d){for(var p,c,m,o,s,h,f=d.pathSegList,g=0,v=0,x=f.numberOfItems,w=0;w<x;++w){var S=f.getItem(w),y=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(y))"x"in S&&(g=S.x),"y"in S&&(v=S.y);else switch("x1"in S&&(m=g+S.x1),"x2"in S&&(s=g+S.x2),"y1"in S&&(o=v+S.y1),"y2"in S&&(h=v+S.y2),"x"in S&&(g+=S.x),"y"in S&&(v+=S.y),y){case"m":f.replaceItem(d.createSVGPathSegMovetoAbs(g,v),w);break;case"l":f.replaceItem(d.createSVGPathSegLinetoAbs(g,v),w);break;case"h":f.replaceItem(d.createSVGPathSegLinetoHorizontalAbs(g),w);break;case"v":f.replaceItem(d.createSVGPathSegLinetoVerticalAbs(v),w);break;case"c":f.replaceItem(d.createSVGPathSegCurvetoCubicAbs(g,v,m,o,s,h),w);break;case"s":f.replaceItem(d.createSVGPathSegCurvetoCubicSmoothAbs(g,v,s,h),w);break;case"q":f.replaceItem(d.createSVGPathSegCurvetoQuadraticAbs(g,v,m,o),w);break;case"t":f.replaceItem(d.createSVGPathSegCurvetoQuadraticSmoothAbs(g,v),w);break;case"a":f.replaceItem(d.createSVGPathSegArcAbs(g,v,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),w);break;case"z":case"Z":g=p,v=c;break}(y=="M"||y=="m")&&(p=g,c=v)}}})()},function(t,n,r){var i={};t.exports=i;var a=r(6),u=r(0);(function(){i.create=a.create,i.add=a.add,i.remove=a.remove,i.clear=a.clear,i.addComposite=a.addComposite,i.addBody=a.addBody,i.addConstraint=a.addConstraint})()}])})}(Ht,Ht.exports)),Ht.exports}var G=Ya();class Ka{constructor(){this.tweens=new or}update(e,t){this.tweens.update()}tween(e){e=Object.assign({duration:1e3,easing:Va.Quadratic.InOut},e);var t=new ar(e.object,this.tweens).to(e.to,e.duration).dynamic(e.dynamic).easing(e.easing).interpolation(e.interpolation).onStart(e.onStart).onUpdate(e.onUpdate).onComplete(e.onComplete);return t}}class ur{constructor(){}randomNumber(e,t){return Math.random()*(t-e)+e}getVectorFromAngle(e=0,r=1){var n=Math.PI,r=1e3,i=-e*(180/n),a=Math.round(Math.cos((90-i)*(n/180))*r)/r,u=Math.round(Math.sin((90-i)*(n/180))*r)/r;return{x:a,y:u}}getAngleFromVector(e){var t=Math.atan2(e.y,e.x),n=180*t/Math.PI;return this.degreesToRadians((360+Math.round(n))%360)}radiansToDegrees(e){return e*(180/Math.PI)}degreesToRadians(e){return e*(Math.PI/180)}isJSON(e){try{JSON.parse(e)}catch{return!1}return!0}}class $a{constructor(){this.reset()}start(){this.pauseTime<=this.startTime&&this.reset(),this.resume()}pause(){this.pauseTime=Date.now()}reset(){var e=Date.now();this.startTime=e,this.pauseTime=e,this.playTime=0}resume(){this.playTime+=Date.now()-this.pauseTime}getPlayTime(){var e=Date.now()-this.startTime-this.playTime;return e}toString(){var e=this.getPlayTime(),t=(e/1e3%1).toFixed(3).slice(-3),n=Math.floor(e/1e3);return n+"."+t}toHTML(e){return"<span>"+e.split("").join("</span><span>")+"</span>"}render(e){e==null&&(e=app.timer.toString());var t=app.document.getElementById("timer");t&&(t.innerHTML=app.timer.toHTML(e))}}const Qa={url:"../ogg/bounce.ogg",userData:{type:"effect",volume:1}},el={url:"../ogg/clap.ogg",userData:{type:"effect",volume:2}},tl={url:"../ogg/click.ogg",userData:{type:"effect",volume:1}},nl={url:"../ogg/glass.ogg",userData:{type:"effect",volume:1}},il={url:"../ogg/ice.ogg",userData:{type:"effect",volume:1}},rl={url:"../ogg/impact1.ogg",userData:{type:"effect",volume:2}},sl={url:"../ogg/impact2.ogg",userData:{type:"effect",volume:1}},ol={url:"../ogg/jump.ogg",userData:{type:"effect",volume:1}},al={url:"../ogg/kill.ogg",userData:{type:"effect",volume:1}},ll={url:"../ogg/pop1.ogg",userData:{type:"effect",volume:.25}},cl={url:"../ogg/pop2.ogg",userData:{type:"effect",volume:.5}},ul={url:"../ogg/resize.ogg",userData:{type:"effect",volume:2}},pl={url:"../ogg/success.ogg",userData:{type:"effect",volume:1}},dl={url:"../ogg/teleport.ogg",userData:{type:"effect",volume:.75}},hl={url:"../ogg/tip.ogg",userData:{type:"effect",volume:1}},fl={url:"../ogg/wood.ogg",userData:{type:"effect",volume:.5}},Vt={bounce:Qa,"boxel-3d-classic":{url:"../ogg/boxel-3d-classic.ogg",userData:{loop:!0,name:"Classic",type:"music",volume:1}},"boxel-3d-pro":{url:"../ogg/boxel-3d-pro.ogg",userData:{loop:!0,name:"Pro",type:"music",volume:1}},"boxel-rebound":{url:"../ogg/boxel-rebound.ogg",userData:{loop:!0,name:"Rebound",type:"music",volume:1}},clap:el,click:tl,glass:nl,ice:il,impact1:rl,impact2:sl,jump:ol,kill:al,pop1:ll,pop2:cl,resize:ul,success:pl,teleport:dl,tip:hl,wood:fl};class ml{constructor(e){this.cache={},this.muted=!1,this.listenerEffects=new Gi,this.listenerEffects.name="effects",this.listenerMusic=new Gi,this.listenerMusic.name="music",this.loader=new ra(e),this.volume=1,this.volumeMin=1e-6,this.queue=[]}load(){var e=this;for(const[t,n]of Object.entries(Vt))this.loader.load(n.url,function(r){var i,a;n?.userData?.type=="music"?i=e.listenerMusic:n?.userData?.type=="effect"&&(i=e.listenerEffects);var a=new sa(i);a.name=t,a.setBuffer(r),n.userData&&(a.userData=n.userData,a.userData.loop&&a.setLoop(a.userData.loop),a.userData.volume&&a.setVolume(a.userData.volume)),e.cache[t]=a});window.addEventListener("playAudio",function(t){e.play(t.detail.name,t.detail.queue)}),window.addEventListener("setVolume",function(t){e.setMasterVolume(t.detail)}),window.addEventListener("pointerup",function(t){e.playQueue(t.detail)})}play(e,t={}){if(t=Object.assign({detune:0,queue:!1},t),t.queue==!0)this.enqueue(e);else{const n=this.cache[e];n&&(this.volume>this.volumeMin||n.userData.loop==!0)&&n.isPlaying==!1&&(n.setDetune(t.detune),n.play())}}enqueue(e){this.queue.push(e)}playQueue(){for(var e=0;e<this.queue.length;e++)this.play(this.queue[e]);this.queue=[]}setMasterVolume(e=1,t="master"){let n;if(e==0&&(e=this.volumeMin),t=="effects"?n=this.listenerEffects:t=="music"?n=this.listenerMusic:t=="master"&&(this.volume=e),n){const r=n.context.currentTime;n.gain.gain.setTargetAtTime(e*this.volume,r,0)}}getMasterVolume(){return this.volume}}const gl={"background-city":{url:"../glb/background-city.glb"},"background-classic":{url:"../glb/background-classic.glb"},"background-desert":{url:"../glb/background-desert.glb"},"background-forest":{url:"../glb/background-forest.glb"},"background-hell":{url:"../glb/background-hell.glb"},"background-kargoh":{url:"../glb/background-kargoh.glb"},"background-tokyo":{url:"../glb/background-tokyo.glb"},"background-tropic":{url:"../glb/background-tropic.glb"},"cube-control":{url:"../glb/cube-control.glb"}};class vl{constructor(e){this.cache={},this.loader=new oa(e)}load(){var e=this;for(const[t,n]of Object.entries(gl))this.loader.load(n.url,function(r){var i=r.scene;i.name=t,i.animations=r.animations,i.userData={...n.userData},e.setShadows(i),e.applyUserData(i),e.cache[t]=i})}clone(e){var t;if(typeof e=="string"){if(this.cache[e])return this.clone(this.cache[e])}else e&&e&&(t=aa(e),t.animations=[...e.animations],this.applyUserData(t));return t}setShadows(e){e.traverse(function(t){t.isMesh&&(t.castShadow=!0)})}applyUserData(e){if(e.userData.position&&e.position.set(e.userData.position.x,e.userData.position.y,e.userData.position.z),e.userData.rotation&&e.rotation.set(e.userData.rotation.x,e.userData.rotation.y,e.userData.rotation.z),e.userData.scale&&e.scale.set(e.userData.scale.x,e.userData.scale.y,e.userData.scale.z),e.animations.length>0){var t=e.userData?.animation?.loop==!0?Wi:la;e.traverse(function(r){r.frustumCulled=!1}),e.mixer=new ca(e),e.clips=[];for(var n=0;n<e.animations.length;n++)e.clips.push(e.mixer.clipAction(e.animations[n])),e.clips[n].setLoop(t),e.clips[n].reset();e.animation={play:function(){for(var r=0;r<e.clips.length;r++)e.clips[r].play()},reset:function(){for(var r=0;r<e.clips.length;r++)e.clips[r].reset()},update:function(r=1/60){e.mixer.update(r)}},t==Wi&&e.animation.play()}}}const yl={};class bl{constructor(e){this.cache={},this.loader=new Xi(e)}load(){var e=this;for(const[t,n]of Object.entries(yl))this.loader.load(n.url,function(r){e.cache[t]=r,e.cache[t].name=t,e.cache[t].magFilter=n.magFilter||1006})}generateCheckered(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=new Texture(e);e.width=16,e.height=16,t.fillColor="rgba(0, 0, 0, 0.5)";for(var r=0;r<2;r++)for(var i=0;i<e.height/2;i++)for(var a=0;a<e.width/2;a++)t.rect(a*2+r,i*2+r,1,1);return t.fill(),n.needsUpdate=!0,n.wrapS=RepeatWrapping,n.wrapT=RepeatWrapping,n}}class wl{constructor(){this.manager=new ua,this.models=new vl(this.manager),this.textures=new bl(this.manager),this.audio=new ml(this.manager)}update(e){}load(e=function(){}){this.manager.onLoad=e,this.manager.onProgress=this.loadProgress,this.audio.load(),this.models.load(),this.textures.load()}loadProgress(e,t,n){var r=Math.ceil(t/n*100);window.dispatchEvent(new CustomEvent("updateLoading",{detail:{urls:e,index:t,max:n,percent:r}}))}}class xl{constructor(){this.actions=[],this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.speed=1,this.running=!1}add(e=()=>{},t=-1){this.actions.push({rate:1/t,sum:1/t,alpha:0,callback:e})}update(e){if(this.running==!0&&(requestAnimationFrame(e),this.actions.length>0))for(var t=this.getDelta(),n=this.actions[0].sum/this.actions[0].rate,r=this.actions.length-1;r>=0;r--)this.actions[r].sum+=t,(this.actions[r].sum>=this.actions[r].rate||this.actions[r].rate==-1)&&(this.actions[r].sum%=this.actions[r].rate,this.actions[r].callback({delta:this.actions[r].rate==-1?t:this.actions[r].rate,alpha:r==0?0:n}))}start(){this.startTime=this.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0;var e=function(){this.update(e)}.bind(this);e()}stop(){this.getElapsedTime(),this.running=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.running){const t=this.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e*this.speed}now(){return(typeof performance>"u"?Date:performance).now()}}class Sl extends Ji{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ue(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const vt=new oe,pr=new Ut,dr=new Ut,hr=new oe,fr=new oe;class Cl{constructor(e={}){const t=this;let n,r,i,a;const u={objects:new WeakMap},d=e.element!==void 0?e.element:document.createElement("div");d.style.overflow="hidden",this.domElement=d,this.getSize=function(){return{width:n,height:r}},this.render=function(h,f){h.matrixWorldAutoUpdate===!0&&h.updateMatrixWorld(),f.parent===null&&f.matrixWorldAutoUpdate===!0&&f.updateMatrixWorld(),pr.copy(f.matrixWorldInverse),dr.multiplyMatrices(f.projectionMatrix,pr),c(h,h,f),s(h)},this.setSize=function(h,f){n=h,r=f,i=n/2,a=r/2,d.style.width=h+"px",d.style.height=f+"px"};function p(h){h.isCSS2DObject&&(h.element.style.display="none");for(let f=0,g=h.children.length;f<g;f++)p(h.children[f])}function c(h,f,g){if(h.visible===!1){p(h);return}if(h.isCSS2DObject){vt.setFromMatrixPosition(h.matrixWorld),vt.applyMatrix4(dr);const v=vt.z>=-1&&vt.z<=1&&h.layers.test(g.layers)===!0,x=h.element;x.style.display=v===!0?"":"none",v===!0&&(h.onBeforeRender(t,f,g),x.style.transform="translate("+-100*h.center.x+"%,"+-100*h.center.y+"%)translate("+(vt.x*i+i)+"px,"+(-vt.y*a+a)+"px)",x.parentNode!==d&&d.appendChild(x),h.onAfterRender(t,f,g));const w={distanceToCameraSquared:m(g,h)};u.objects.set(h,w)}for(let v=0,x=h.children.length;v<x;v++)c(h.children[v],f,g)}function m(h,f){return hr.setFromMatrixPosition(h.matrixWorld),fr.setFromMatrixPosition(f.matrixWorld),hr.distanceToSquared(fr)}function o(h){const f=[];return h.traverseVisible(function(g){g.isCSS2DObject&&f.push(g)}),f}function s(h){const f=o(h).sort(function(v,x){if(v.renderOrder!==x.renderOrder)return x.renderOrder-v.renderOrder;const w=u.objects.get(v).distanceToCameraSquared,S=u.objects.get(x).distanceToCameraSquared;return w-S}),g=f.length;for(let v=0,x=f.length;v<x;v++)f[v].element.style.zIndex=g-v}}}class tt extends pa{constructor(e,t,n,r){super(),this.renderScene=t,this.renderCamera=n,this.selectedObjects=r!==void 0?r:[],this.visibleEdgeColor=new Et(1,1,1),this.hiddenEdgeColor=new Et(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new Ue(e.x,e.y):new Ue(256,256);const i=Math.round(this.resolution.x/this.downSampleRatio),a=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new it(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new da,this.depthMaterial.side=bn,this.depthMaterial.depthPacking=ha,this.depthMaterial.blending=Zi,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=bn,this.prepareMaskMaterial.fragmentShader=c(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new it(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new it(i,a),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new it(i,a),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new it(Math.round(i/2),Math.round(a/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new it(i,a),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new it(Math.round(i/2),Math.round(a/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const u=4,d=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(u),this.separableBlurMaterial1.uniforms.texSize.value.set(i,a),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(d),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(i/2),Math.round(a/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=d,this.overlayMaterial=this.getOverlayMaterial();const p=fa;this.copyUniforms=wn.clone(p.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ht({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:Zi,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Et,this.oldClearAlpha=1,this.fsQuad=new ma(null),this.tempPulseColor1=new Et,this.tempPulseColor2=new Et,this.textureMatrix=new Ut;function c(m,o){const s=o.isPerspectiveCamera?"perspective":"orthographic";return m.replace(/DEPTH_TO_VIEW_Z/g,s+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let n=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms.texSize.value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms.texSize.value.set(n,r)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function n(r){r.isMesh&&(e===!0?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(n)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,n=[];function r(a){a.isMesh&&n.push(a)}for(let a=0;a<this.selectedObjects.length;a++)this.selectedObjects[a].traverse(r);function i(a){if(a.isMesh||a.isSprite||a.isTransformControls){let u=!1;for(let d=0;d<n.length;d++)if(n[d].id===a.id){u=!0;break}if(u===!1){const d=a.visible;(e===!1||t.get(a)===!0)&&(a.visible=e),t.set(a,d)}}else(a.isPoints||a.isLine)&&(e===!0?a.visible=t.get(a):(t.set(a,a.visible),a.visible=e))}this.renderScene.traverse(i)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,n,r,i){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,i&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const u=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=u,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const d=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(d),this.tempPulseColor2.multiplyScalar(d)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=tt.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=tt.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=tt.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=tt.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new ht({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new Ue(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new ht({uniforms:{maskTexture:{value:null},texSize:{value:new Ue(.5,.5)},visibleEdgeColor:{value:new oe(1,1,1)},hiddenEdgeColor:{value:new oe(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new ht({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new Ue(.5,.5)},direction:{value:new Ue(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new ht({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:ga,depthTest:!1,depthWrite:!1,transparent:!0})}}tt.BlurDirectionX=new Ue(1,0),tt.BlurDirectionY=new Ue(0,1);class kl{constructor(e){this.camera=new Yi(75,window.innerWidth/window.innerHeight,.01,100),this.scene=new Ki,this.canvas=e,this.fog=new va("#ffffff",180,480),this.renderer=new ya({alpha:!0,canvas:e}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.shadowMap.enabled=!1,this.renderer.shadowMap.type=ba,this.rendererCSS=new Cl,this.rendererCSS.domElement.className="rendererCSS",this.rendererCSS.domElement.style.position="absolute",this.rendererCSS.domElement.style.pointerEvents="none",this.rendererCSS.domElement.style.top="0px",this.rendererCSS.domElement.style.left="0px",this.canvas.after(this.rendererCSS.domElement),this.renderPass=new wa(this.scene,this.camera),this.outputPass=new xa,this.outlinePass=new tt({x:window.innerWidth,y:window.innerHeight},this.scene,this.camera),this.outlinePass.edgeStrength=5,this.outlinePass.edgeGlow=0,this.outlinePass.edgeThickness=.1,this.outlinePass.enabled=!0,this.outlinePass.visibleEdgeColor.set("#ffffff"),this.outlinePass.hiddenEdgeColor.set("#000000"),this.outlinePass.overlayMaterial.blending=Sa,this.smaaPass=new Ca(window.innerWidth*window.devicePixelRatio,window.innerHeight*window.devicePixelRatio),this.outlinePass.enabled=!1,this.smaaPass.enabled=!1,this.composer=new ka(this.renderer),this.composer.addPass(this.renderPass),this.composer.addPass(this.outlinePass),this.composer.addPass(this.smaaPass),this.composer.addPass(this.outputPass),window.addEventListener("resize",function(t){this.resize(t)}.bind(this)),this.resize()}update(e){this.render()}render(){this.composer.render(),this.rendererCSS.render(this.scene,this.camera)}resize(){var e=window.innerWidth,t=window.innerHeight;this.setSize(e,t)}setSize(e,t){this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.renderer.setSize(e,t),this.rendererCSS.setSize(e,t),this.composer.setSize(e,t)}setCamera(e){this.camera=e,this.renderPass.camera=e,this.outlinePass.renderCamera=e}setScene(e){this.scene=e,this.renderPass.scene=e,this.outlinePass.renderScene=e}setShadows(e=!0){this.renderer.shadowMap.enabled=e,this.scene.traverse(function(t){t.material&&(t.castShadow=e,t.receiveShadow=e,t.material.needsUpdate=!0)})}setPixelRatio(e=1){this.renderer.setPixelRatio(e)}setSelectedObjects(e=[]){this.outlinePass.selectedObjects=e}}var Gt={exports:{}},El=Gt.exports,mr;function Tl(){return mr||(mr=1,function(l,e){(function(t,n){n()})(El,function(){"use strict";function t(p,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(p.type)?new Blob(["\uFEFF",p],{type:p.type}):p}function n(p,c,m){var o=new XMLHttpRequest;o.open("GET",p),o.responseType="blob",o.onload=function(){d(o.response,c,m)},o.onerror=function(){console.error("could not download file")},o.send()}function r(p){var c=new XMLHttpRequest;c.open("HEAD",p,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(p){try{p.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),p.dispatchEvent(c)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof gt=="object"&&gt.global===gt?gt:void 0,u=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(p,c,m){var o=a.URL||a.webkitURL,s=document.createElement("a");c=c||p.name||"download",s.download=c,s.rel="noopener",typeof p=="string"?(s.href=p,s.origin===location.origin?i(s):r(s.href)?n(p,c,m):i(s,s.target="_blank")):(s.href=o.createObjectURL(p),setTimeout(function(){o.revokeObjectURL(s.href)},4e4),setTimeout(function(){i(s)},0))}:"msSaveOrOpenBlob"in navigator?function(p,c,m){if(c=c||p.name||"download",typeof p!="string")navigator.msSaveOrOpenBlob(t(p,m),c);else if(r(p))n(p,c,m);else{var o=document.createElement("a");o.href=p,o.target="_blank",setTimeout(function(){i(o)})}}:function(p,c,m,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof p=="string")return n(p,c,m);var s=p.type==="application/octet-stream",h=/constructor/i.test(a.HTMLElement)||a.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||s&&h||u)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var w=g.result;w=f?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=w:location=w,o=null},g.readAsDataURL(p)}else{var v=a.URL||a.webkitURL,x=v.createObjectURL(p);o?o.location=x:location.href=x,o=null,setTimeout(function(){v.revokeObjectURL(x)},4e4)}});a.saveAs=d.saveAs=d,l.exports=d})}(Gt,Gt.exports)),Gt.exports}var gr=Tl();class _l{constructor(){this.levelPrefix="level_"}getAllLocalStorage(){for(var e={},t=0;t<localStorage.length;t++){var n=localStorage.key(t),r=localStorage.getItem(n);e[n]=r}return e}setAllLocalStorage(e){localStorage.clear(),Object.keys(e).forEach(function(t){localStorage.setItem(t,e[t])})}getListOfLevels(){for(var e=[],t=localStorage.length,n=0;n<t;n++){var r=localStorage.key(n);r.indexOf(this.levelPrefix)>=0&&e.push({key:r,level:JSON.parse(localStorage.getItem(r))})}return e.sort((i,a)=>i.level.name>a.level.name?1:a.level.name>i.level.name?-1:0),e}getLevelData(e){return JSON.parse(localStorage.getItem(e))}setLevelData(e,t){var n=1;if(e==null){for(;localStorage.getItem(this.levelPrefix+n)!=null;)n++;e="level_"+n}return localStorage.setItem(e,JSON.stringify(t)),e}removeLevelData(e){localStorage.removeItem(e)}updateLevelDataName(e,t){var n=this.getLevelData(e);n.name=t,this.setLevelData(e,n)}saveScore(e,t){var n=this.getScores(),r=999999,i=parseInt(t.replace(/[^\d]/g,"")),a=!1,u=n[e];return u!=null&&(u.indexOf(":")>=0&&(u+="0"),r=parseInt(u.replace(/[^\d]/g,""))),i<r&&(a=!0,n[e]=t,localStorage.setItem("scores",JSON.stringify(n))),a}getScores(){var e=localStorage.getItem("scores");return e==null&&(e="{}",localStorage.setItem("scores",e)),JSON.parse(e)}isExtension(){return window.chrome?.extension}setSettings(e){localStorage.setItem("settings",JSON.stringify(e))}getSettings(e=app){var t=localStorage.getItem("settings"),n={music:"boxel-3d-pro",volume:this.isExtension()?0:.5,volumeMusic:.5,volumeEffects:1,quality:10,theme:"bubble",snap:8,skin:{id:466,title:"Smile",url:"../png/smile.png"},motion:!0,stats:!1,debug:!1,peer:this.generateUUID(),connection:"",name:"Player",progress:1},r=n;t!=null&&(r=JSON.parse(t));for(var i in n)r[i]==null&&(r[i]=n[i]);return r}saveLevelToFile(){app.levelEditor.saveLevel();var e=app.level.exportToJSON(app),t=new Blob([JSON.stringify(e)],{type:"application/json"});gr.saveAs(t,e.name)}loadLevelFromFile(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","theFile"),e.addEventListener("change",n,!1);function t(){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!1),e.dispatchEvent(r)}function n(r){var i=r.target.files,a=i[0],u=new FileReader;u.onload=function(d){return function(p){var c=d.name.split(".").slice(0,-1).join("."),m=JSON.parse(p.target.result);m.name=c,app.level.clearLevel(app),app.level.importFromJSON(m,app)}}(a),u.readAsText(a)}t()}backupToFile(){var e=app.storage.getAllLocalStorage(),t=new Blob([JSON.stringify(e)],{type:"application/json"});gr.saveAs(t,"boxel_3d_backup")}restoreFromFile(){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Restore all data from a file?<br><em>(scores, levels, etc.)</em>",inputs:[{value:"Restore",type:"button",callback:function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("id","theFile"),e.addEventListener("change",n,!1);function t(){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!1),e.dispatchEvent(r)}function n(r){var i=r.target.files,a=i[0],u=new FileReader;u.onload=function(){return function(d){var p=JSON.parse(d.target.result);app.storage.setAllLocalStorage(p),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Data restored!",inputs:[{value:"Continue",type:"button"}]}}))}}(a),u.readAsText(a)}t()}},{value:"Cancel",type:"button"}]}}))}backupToChrome(e=!1){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Save all local data to the cloud?<br><em>(scores, levels, etc.)</em>",inputs:[{value:"Backup",type:"button",callback:function(){var t=0;e==!0&&chrome.storage.sync.clear();for(var n=0;n<localStorage.length;n++){var r=localStorage.key(n),i=localStorage.getItem(r),a={};a[r]=i,chrome.storage.sync.set(a,function(){t++,t==localStorage.length&&window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Success! Your data was backed up to your account.",inputs:[{value:"Continue",type:"button"}]}}))})}}},{value:"Cancel",type:"button"}]}}))}restoreFromChrome(e=!1){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Restore all data from the cloud?<br><em>(scores, levels, etc.)</em>",inputs:[{value:"Restore",type:"button",callback:function(){chrome.storage.sync.get(null,function(t){e==!0&&localStorage.clear();for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r],a=t[i];localStorage.setItem(i,a)}window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Success! Your data was restored from your account.",inputs:[{value:"Continue",type:"button"}]}}))})}},{value:"Cancel",type:"button"}]}}))}generateUUID(){return Nt.generateUUID()}}class Pl{constructor(){}checkPlayerCollision(e,t){for(var n=e.pairs,r=0;r<n.length;r++)for(var i=n[r],a=[i.bodyA,i.bodyB],u=0;u<a.length;u++){var d=a[(u+0)%2],p=a[(u+1)%2],c=t.level.getObjectByName(d.parent.name),m=t.level.getObjectByName(p.parent.name);if(c!=null&&m!=null&&(c.body.class=="player"&&(t.player.allowJump=!0),p.class!="sensor")){if(d.class=="sensor")if(c.body.class=="tip")m.body.class=="player"&&(app.level.showTip(c.text),c.hide(!0));else if(c.body.class=="bounce"){var o=c.scale.y/2;c.body.isStatic==!1&&c.setForce(o,m,!0),m.body.isStatic==!1&&m.setForce(o,c),m.body.class=="player"&&app.assets.audio.play("bounce")}else if(c.body.class=="checkpoint")m.body.class=="player"&&(app.player.saveCheckpoint(c.position),app.assets.audio.play("success"));else if(c.body.class=="spike")m.body.class=="player"&&app.player.kill();else if(c.body.class=="shrink")m.body.class=="player"&&(app.player.shrink(),c.hide(!0));else if(c.body.class=="grow")m.body.class=="player"&&(app.player.grow(),c.hide(!0));else if(c.body.class=="resize")m.isStatic()==!1&&(m.setScale(c.scale,!1),m.body.class=="player"&&app.assets.audio.play("resize"));else if(c.body.class=="direction"){var o=m.calculateForceDirection(c.body,m.body);m.setForceDirection(o,!1),m.body.class=="player"&&app.assets.audio.play("teleport")}else c.body.class=="gravity"?m.body.class=="player"&&(app.updateGravity(c.body.angle),app.assets.audio.play("teleport")):c.body.class=="grapple"?m.body.class=="player"&&(app.player.setMode("grapple",!1),app.assets.audio.play("teleport")):c.body.class=="finish"?m.body.class=="player"&&app.player.finish():c.body.class=="reset"?m.body.class=="player"&&app.player.reset():c.body.class=="control"&&m.body.class=="player"&&(app.player.setMode("control",!1),app.assets.audio.play("teleport"));else if(c.body.class=="cube"&&m.body.class=="player"){const s=Nt.randInt(-1200,1200);app.assets.audio.play("pop1",{detune:s})}}}}}class Ml extends rt{constructor(){super()}init(){this.setTheme("background-city")}update(e,t,n=!1){this.target&&(n==!0?this.position.copy(this.target.position):(this.position.y=this.target.position.y,this.position.x=this.target.position.x-this.target.position.x%this.scale.x))}setTarget(e){this.target=e}setTheme(e){if(this.theme!=e){var t=app.assets.models.clone(e);if(t){this.clear(),this.theme=e,this.scale.set(1280,1280,1280);var n=4,r=new Ji;t.traverse(function(i){if(i.isMesh){for(var a=new Ea(i.geometry,i.material,n),u=0;u<n;u++)r.position.set(u-n*.5+.5,0,0),r.updateMatrix(),a.setMatrixAt(u,r.matrix);this.add(a)}}.bind(this))}}}animateScale(e){app.animation.tween({object:this.scale,to:{x:1280*e,y:1280*e},duration:250}).start()}}const Mt=new oe;function Re(l,e,t,n,r,i){const a=2*Math.PI*r/4,u=Math.max(i-2*r,0),d=Math.PI/4;Mt.copy(e),Mt[n]=0,Mt.normalize();const p=.5*a/(a+u),c=1-Mt.angleTo(l)/d;return Math.sign(Mt[t])===1?c*p:u/(a+u)+p+p*(1-c)}class vr extends $i{constructor(e=1,t=1,n=1,r=2,i=.1){if(r=r*2+1,i=Math.min(e/2,t/2,n/2,i),super(1,1,1,r,r,r),r===1)return;const a=this.toNonIndexed();this.index=null,this.attributes.position=a.attributes.position,this.attributes.normal=a.attributes.normal,this.attributes.uv=a.attributes.uv;const u=new oe,d=new oe,p=new oe(e,t,n).divideScalar(2).subScalar(i),c=this.attributes.position.array,m=this.attributes.normal.array,o=this.attributes.uv.array,s=c.length/6,h=new oe,f=.5/r;for(let g=0,v=0;g<c.length;g+=3,v+=2)switch(u.fromArray(c,g),d.copy(u),d.x-=Math.sign(d.x)*f,d.y-=Math.sign(d.y)*f,d.z-=Math.sign(d.z)*f,d.normalize(),c[g+0]=p.x*Math.sign(u.x)+d.x*i,c[g+1]=p.y*Math.sign(u.y)+d.y*i,c[g+2]=p.z*Math.sign(u.z)+d.z*i,m[g+0]=d.x,m[g+1]=d.y,m[g+2]=d.z,Math.floor(g/s)){case 0:h.set(1,0,0),o[v+0]=Re(h,d,"z","y",i,n),o[v+1]=1-Re(h,d,"y","z",i,t);break;case 1:h.set(-1,0,0),o[v+0]=1-Re(h,d,"z","y",i,n),o[v+1]=1-Re(h,d,"y","z",i,t);break;case 2:h.set(0,1,0),o[v+0]=1-Re(h,d,"x","z",i,e),o[v+1]=Re(h,d,"z","x",i,n);break;case 3:h.set(0,-1,0),o[v+0]=1-Re(h,d,"x","z",i,e),o[v+1]=1-Re(h,d,"z","x",i,n);break;case 4:h.set(0,0,1),o[v+0]=1-Re(h,d,"x","y",i,e),o[v+1]=1-Re(h,d,"y","x",i,t);break;case 5:h.set(0,0,-1),o[v+0]=Re(h,d,"x","y",i,e),o[v+1]=1-Re(h,d,"y","x",i,t);break}}}class Al extends rt{constructor(){super()}addCube(e={}){e.x=e.x==null?0:e.x,e.y=e.y==null?0:e.y,e.z=e.z==null?0:e.z,e.scaleX=e.scaleX==null?1:e.scaleX,e.scaleY=e.scaleY==null?1:e.scaleY,e.scaleZ=e.scaleZ==null?1:e.scaleZ,e.segments=e.segments==null?1:e.segments,e.radius=e.radius==null?0:e.radius,e.color=e.color==null?"#620460":e.color,e.opacity=e.opacity==null?1:e.opacity;var t=new vr(e.scaleX,e.scaleY,e.scaleZ,e.segments,e.radius),n=new ft({color:e.color,transparent:!0}),r=new Qe(t,n);r.castShadow=!0,r.receiveShadow=!0,r.position.set(e.x,e.y,e.z),r.material.colorOrigin=e.color,r.material.opacity=e.opacity,this.add(r)}addCone(e={}){e.x=e.x==null?0:e.x,e.y=e.y==null?0:e.y,e.z=e.z==null?0:e.z,e.scaleX=e.scaleX==null?1:e.scaleX,e.scaleY=e.scaleY==null?1:e.scaleY,e.scaleZ=e.scaleZ==null?1:e.scaleZ,e.rotationX=e.rotationX==null?0:e.rotationX,e.rotationY=e.rotationY==null?0:e.rotationY,e.rotationZ=e.rotationZ==null?0:e.rotationZ,e.segments=e.segments==null?4:e.segments,e.color=e.color==null?"#620460":e.color,e.opacity=e.opacity==null?1:e.opacity;var t=new Ta(e.scaleX/2*1.5,e.scaleY,e.segments),n=new ft({color:e.color,flatShading:!0}),r=new Qe(t,n);r.castShadow=!0,r.receiveShadow=!0,r.position.set(e.x,e.y,e.z),r.material.colorOrigin=e.color,r.material.opacity=e.opacity,r.rotation.x=e.rotationX,r.rotation.y=e.rotationY+45*Math.PI/180,r.rotation.z=e.rotationZ,this.add(r)}addExtrusion(e={}){e.position=e.position==null?{x:0,y:0,z:0}:e.position,e.scale=e.scale==null?{x:1,y:1,z:1}:e.scale,e.rotation=e.rotation==null?{x:0,y:0,z:0}:e.rotation,e.points=e.points==null?[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:0,y:1}]:e.points,e.depth=e.depth==null?1:e.depth,e.color=e.color==null?"#620460":e.color;for(var t=new _a,n=0;n<e.points.length;n++){var r=e.points[n];n==0?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y)}var i={steps:1,depth:e.depth,bevelEnabled:!1},a=new Pa(t,i),u=new ft({color:e.color}),d=new Qe(a,u);d.position.set(e.position.x,e.position.y,e.position.z),d.scale.set(e.scale.x,e.scale.y,e.scale.z),d.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z),d.castShadow=!0,d.receiveShadow=!0,this.add(d)}setColors(e,t=!0){for(var n=this.children.length,r=0;r<n;r++){var i=this.children[r];i.material.color.set(e),t==!0&&(i.material.colorOrigin=e)}}setOpacities(e){for(var t=this.children.length,n=0;n<t;n++){var r=this.children[n];r.material.opacity=e}}resetColors(){for(var e=this.children.length,t=0;t<e;t++){var n=this.children[t],r=n.material.colorOrigin;n.material.color.set(r)}}removeAllShapes(){for(var e=this.children.length,t=0;t<e;t++){var n=this.children[0];this.remove(n)}}}class ke extends Qe{constructor(e={}){super(),e.x=e.x==null?0:e.x,e.y=e.y==null?0:e.y,e.z=e.z==null?0:e.z,e.scaleX=e.scaleX==null?1:e.scaleX,e.scaleY=e.scaleY==null?1:e.scaleY,e.scaleZ=e.scaleZ==null?1:e.scaleZ,e.segments=e.segments==null?1:e.segments,e.radius=e.radius==null?0:e.radius,e.angle=e.angle==null?0:e.angle,e.color=e.color==null?"#620460":e.color,e.debug=e.debug!=null,this.shapes=new Al,this.shapes.addCube(e),this.setColors(e.color),this.add(this.shapes),this.hitbox=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{class:"hitbox"}),this.body=G.Body.create({parts:[this.hitbox],friction:0,frictionAir:0,frictionStatic:0,restitution:0,slop:0,timeScale:1,name:this.uuid,class:"cube"}),this.helper=new rt,this.helper.visible=e.debug,this.addHelper(this.hitbox),this.name=this.uuid,this.isCube=!0,this.setPosition({x:e.x,y:e.y,z:e.z}),this.setRotation(e.angle),this.setScale({x:e.scaleX,y:e.scaleY,z:e.scaleZ}),this.setMode(),this.setForceDirection()}update(e,t){e&&(this.position.x=this.body.positionPrev.x+(this.body.position.x-this.body.positionPrev.x)*t,this.position.y=-(this.body.positionPrev.y+(this.body.position.y-this.body.positionPrev.y)*t),this.rotation.z=-(this.body.anglePrev+(this.body.angle-this.body.anglePrev)*t)),this.position.y<-1e3&&(this.getClass()=="player"&&this.isStatic()==!1?this.kill():app.level.removeObject(this,app)),this.updateHelper()}updateHelper(){this.helper&&this.helper.visible==!0&&(this.helper.position.x=this.body.position.x,this.helper.position.y=-this.body.position.y,this.helper.position.z=this.position.z,this.helper.rotation.z=-this.body.anglePrev,this.helper.scale.copy(this.scale).multiplyScalar(1))}addHelper(e,t){t==null&&(t={}),t.position==null&&(t.position={x:0,y:0}),t.color==null&&(t.color="#00ff00");var n=e.bounds.max.x-e.bounds.min.x,r=e.bounds.max.y-e.bounds.min.y,i=n,a=new $i(n,r,i),u=new Ma(a,new ft({color:t.color,wireframe:!0}));this.helper.add(u),a.translate(t.position.x,t.position.y,0)}setColors(e){this.color=e,this.shapes.setColors(e)}setPosition(e={},t=!0){e.x=e.x==null?this.position.x:e.x,e.y=e.y==null?this.position.y:e.y,e.z=e.z==null?this.position.z:e.z,this.position.set(e.x,e.y,e.z),G.Body.setPosition(this.body,{x:e.x,y:-e.y}),t==!0&&this.setPositionOrigin(e)}setPositionOrigin(e){this.positionOrigin==null&&(this.positionOrigin={}),this.positionOrigin.x=e.x,this.positionOrigin.y=e.y,this.positionOrigin.z=e.z}getPosition(){return this.position}setRotation(e,t=!0){this.rotation.z=e,G.Body.setAngle(this.body,-e),t==!0&&this.setRotationOrigin(e)}setRotationOrigin(e){this.rotationOrigin=e}getRotation(e="radians"){var t=this.rotation.z;return e=="degrees"&&(t=Math.round(this.rotation.z*(180/Math.PI))),t}getRotationOrigin(){return this.rotationOrigin}setScale(e={},t=!0){e.x=e.x==null?this.scale.x:e.x,e.y=e.y==null?this.scale.y:e.y,e.z=e.z==null?this.scale.z:e.z;var n=this.rotation.z;this.setRotation(0,!1),this.setBodyScale(e.x/this.scale.x,e.y/this.scale.y),this.scale.x=e.x,this.scale.y=e.y,this.scale.z=e.z,this.setRotation(n,!1),t==!0&&this.setScaleOrigin({x:e.x,y:e.y,z:e.z})}setBodyScale(e,t){G.Body.scale(this.body,e,t)}getScale(){return this.scale}getScaleOrigin(){return this.scaleOrigin}setScaleOrigin(e){this.scaleOrigin==null&&(this.scaleOrigin={}),this.scaleOrigin.x=e.x,this.scaleOrigin.y=e.y,this.scaleOrigin.z=e.z}setForceDirection(e={x:0,y:0},t=!0){this.force=e,t==!0&&this.setForceDirectionOrigin(e)}setForceDirectionOrigin(e){this.forceOrigin=e}getForce(){return this.force}calculateForceDirection(e,t){var n={x:25e-5*t.mass,y:0};return n=G.Vector.rotate(n,e.angle),n}resetToOrigin(){this.hide(!1),this.setPosition(this.positionOrigin,!1),this.setRotation(this.rotationOrigin,!1),this.setScale({x:this.scaleOrigin.x,y:this.scaleOrigin.y,z:this.scaleOrigin.z},!1),this.setForceDirection(this.forceOrigin,!1),this.setStatic(this.isStaticOrigin,!1),this.setFriction(this.frictionOrigin,!1),this.setMode(this.modeOrigin,!1),G.Body.setVelocity(this.body,{x:0,y:0}),G.Body.setAngularVelocity(this.body,0)}setStatic(e=!0,t=!0){G.Body.setStatic(this.body,e),t==!0&&this.setStaticOrigin(e)}setStaticOrigin(e){this.isStaticOrigin=e}toggleStatic(){var e=!this.body.isStatic;return this.setStatic(e),e}isStatic(){return this.body.isStatic}setFriction(e=.1,t=!0){this.body.friction=parseFloat(e),t==!0&&this.setFrictionOrigin(e)}setFrictionOrigin(e){this.frictionOrigin=parseFloat(e)}getFriction(){return this.body.friction}setMode(e,t=!0){e=e??"default",this.mode=e,t==!0&&this.setModeOrigin(e),window.dispatchEvent(new CustomEvent("setMode",{detail:e}))}setModeOrigin(e){this.modeOrigin=e}getClass(){return this.body.class}setText(e){e!=null&&(this.text=e)}getText(){return this.text}select(e=!0){this.selected=e,e==!0?(this.shapes.setColors("#ffffff",!1),this.shapes.setOpacities(.9),G.Body.setVelocity(this.body,{x:0,y:0}),G.Body.setAngularVelocity(this.body,0)):(this.shapes.resetColors(),this.shapes.setOpacities(1))}isSelected(){return this.selected}setForce(e,t,n=!1){var r=this.body.positionPrev.x,i=this.body.position.x,a=this.body.positionPrev.y,u=this.body.position.y,d=t.body.angle,p=Math.atan2(u-a,i-r);n==!0&&(d=this.body.angle,p=this.body.angle+Math.PI/2,e*=-1*app.loop.speed);var c=Math.cos(p),m=Math.sin(p),o=-Math.sin(d),s=Math.cos(d),h=c*o+m*s,f=c-2*h*o,g=m-2*h*s;return h<0&&(Math.abs(f)==1||Math.abs(g)==1)&&(e*=-1),G.Body.setVelocity(this.body,{x:f*e,y:g*e}),e}getVelocity(e=this){return{x:e.body.position.x-e.body.positionPrev.x,y:e.body.position.y-e.body.positionPrev.y}}freeze(e=!0){this.body.collisionFilter.category=e==!0?0:1,G.Sleeping.set(this.body,e)}hide(e=!0){this.visible=!e,this.freeze(e)}isFrozen(){return this.body.collisionFilter.category==0}addLight(e,t,n,r=!1){this.light==null&&(this.light=new Aa(e,t,n),this.light.position.set(0,0,0),this.light.castShadow=r,this.add(this.light))}toJSON(){var e={class:this.body.class,position:{x:this.position.x,y:this.position.y,z:this.position.z},rotation:{x:this.rotation.x,y:this.rotation.y,z:this.rotation.z},scale:{x:this.scale.x,y:this.scale.y,z:this.scale.z}};return this.body.isStatic==!1&&(e.isStatic=!1,e.friction=this.body.friction),this.body.class=="tip"&&this.text!=null&&(e.text=this.text),e}}const yr=new xn,Wt=new oe;class br extends Oa{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Qi(e,3)),this.setAttribute("uv",new Qi(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Sn(t,6,1);return this.setAttribute("instanceStart",new mt(n,3,0)),this.setAttribute("instanceEnd",new mt(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new Sn(t,6,1);return this.setAttribute("instanceColorStart",new mt(n,3,0)),this.setAttribute("instanceColorEnd",new mt(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new Da(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new xn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),yr.setFromBufferAttribute(t),this.boundingBox.union(yr))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new er),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,a=e.count;i<a;i++)Wt.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(Wt)),Wt.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(Wt));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}Ft.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ue(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},qt.line={uniforms:wn.merge([Ft.common,Ft.fog,Ft.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class _n extends ht{constructor(e){super({type:"LineMaterial",uniforms:wn.clone(qt.line.uniforms),vertexShader:qt.line.vertexShader,fragmentShader:qt.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const Pn=new Tt,wr=new oe,xr=new oe,ye=new Tt,be=new Tt,qe=new Tt,Mn=new oe,An=new Ut,we=new La,Sr=new oe,Xt=new xn,Jt=new er,He=new Tt;let Ve,st;function Cr(l,e,t){return He.set(0,0,-e,1).applyMatrix4(l.projectionMatrix),He.multiplyScalar(1/He.w),He.x=st/t.width,He.y=st/t.height,He.applyMatrix4(l.projectionMatrixInverse),He.multiplyScalar(1/He.w),Math.abs(Math.max(He.x,He.y))}function Ol(l,e){const t=l.matrixWorld,n=l.geometry,r=n.attributes.instanceStart,i=n.attributes.instanceEnd,a=Math.min(n.instanceCount,r.count);for(let u=0,d=a;u<d;u++){we.start.fromBufferAttribute(r,u),we.end.fromBufferAttribute(i,u),we.applyMatrix4(t);const p=new oe,c=new oe;Ve.distanceSqToSegment(we.start,we.end,c,p),c.distanceTo(p)<st*.5&&e.push({point:c,pointOnLine:p,distance:Ve.origin.distanceTo(c),object:l,face:null,faceIndex:u,uv:null,uv1:null})}}function Dl(l,e,t){const n=e.projectionMatrix,r=l.material.resolution,i=l.matrixWorld,a=l.geometry,u=a.attributes.instanceStart,d=a.attributes.instanceEnd,p=Math.min(a.instanceCount,u.count),c=-e.near;Ve.at(1,qe),qe.w=1,qe.applyMatrix4(e.matrixWorldInverse),qe.applyMatrix4(n),qe.multiplyScalar(1/qe.w),qe.x*=r.x/2,qe.y*=r.y/2,qe.z=0,Mn.copy(qe),An.multiplyMatrices(e.matrixWorldInverse,i);for(let m=0,o=p;m<o;m++){if(ye.fromBufferAttribute(u,m),be.fromBufferAttribute(d,m),ye.w=1,be.w=1,ye.applyMatrix4(An),be.applyMatrix4(An),ye.z>c&&be.z>c)continue;if(ye.z>c){const v=ye.z-be.z,x=(ye.z-c)/v;ye.lerp(be,x)}else if(be.z>c){const v=be.z-ye.z,x=(be.z-c)/v;be.lerp(ye,x)}ye.applyMatrix4(n),be.applyMatrix4(n),ye.multiplyScalar(1/ye.w),be.multiplyScalar(1/be.w),ye.x*=r.x/2,ye.y*=r.y/2,be.x*=r.x/2,be.y*=r.y/2,we.start.copy(ye),we.start.z=0,we.end.copy(be),we.end.z=0;const s=we.closestPointToPointParameter(Mn,!0);we.at(s,Sr);const h=Nt.lerp(ye.z,be.z,s),f=h>=-1&&h<=1,g=Mn.distanceTo(Sr)<st*.5;if(f&&g){we.start.fromBufferAttribute(u,m),we.end.fromBufferAttribute(d,m),we.start.applyMatrix4(i),we.end.applyMatrix4(i);const v=new oe,x=new oe;Ve.distanceSqToSegment(we.start,we.end,x,v),t.push({point:x,pointOnLine:v,distance:Ve.origin.distanceTo(x),object:l,face:null,faceIndex:m,uv:null,uv1:null})}}}class Ll extends Qe{constructor(e=new br,t=new _n({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let a=0,u=0,d=t.count;a<d;a++,u+=2)wr.fromBufferAttribute(t,a),xr.fromBufferAttribute(n,a),r[u]=u===0?0:r[u-1],r[u+1]=r[u]+wr.distanceTo(xr);const i=new Sn(r,2,1);return e.setAttribute("instanceDistanceStart",new mt(i,1,0)),e.setAttribute("instanceDistanceEnd",new mt(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Ve=e.ray;const a=this.matrixWorld,u=this.geometry,d=this.material;st=d.linewidth+i,u.boundingSphere===null&&u.computeBoundingSphere(),Jt.copy(u.boundingSphere).applyMatrix4(a);let p;if(n)p=st*.5;else{const m=Math.max(r.near,Jt.distanceToPoint(Ve.origin));p=Cr(r,m,d.resolution)}if(Jt.radius+=p,Ve.intersectsSphere(Jt)===!1)return;u.boundingBox===null&&u.computeBoundingBox(),Xt.copy(u.boundingBox).applyMatrix4(a);let c;if(n)c=st*.5;else{const m=Math.max(r.near,Xt.distanceToPoint(Ve.origin));c=Cr(r,m,d.resolution)}Xt.expandByScalar(c),Ve.intersectsBox(Xt)!==!1&&(n?Ol(this,t):Dl(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Pn),this.material.uniforms.resolution.value.set(Pn.z,Pn.w))}}class kr extends br{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let r=0;r<t;r++)n[6*r]=e[r].x,n[6*r+1]=e[r].y,n[6*r+2]=e[r].z||0,n[6*r+3]=e[r+1].x,n[6*r+4]=e[r+1].y,n[6*r+5]=e[r+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class Bl extends Ll{constructor(e=new kr,t=new _n({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class Il extends rt{constructor(){super(),this.radius=4}addJoints(e,t,n){for(var r=e.position,i=n,a=Math.sqrt(Math.pow(r.x-i.x,2)+Math.pow(r.y-i.y,2)),u=4,d=Math.ceil(a/(this.radius*2)/u),p=16/u,c=1/u,m=1;m<=u;m++){var o=m==u,s=m/u,h={x:r.x+(i.x-r.x)*s,y:r.y+(i.y-r.y)*s};m>1&&(e=this.children[this.children.length-1].body);var f={bodyA:e,bodyB:t,isLastJoint:o,minLength:p,position:h,radius:this.radius,spacing:d,speed:c,texture:this.texture},g=new Rl(f);this.add(g)}}removeJoints(){for(var e=this.children.length,t=e-1;t>=0;){var n=this.children[t];n.removeConstraint(),n.removeBody(),this.remove(n),t--}}resetToOrigin(){this.removeJoints()}updateJoints(){for(var e=0;e<this.children.length;e++){var t=[],n=this.children[e],r=n.constraint.bodyA.position,i=n.constraint.bodyB.position;n.shrink(),n.line2!=null&&(t.push(r.x,-r.y,0),t.push(i.x+n.offset.x,-(i.y+n.offset.y),0),n.line2Geometry.setPositions(t),n.line2.computeLineDistances()),n.circleMesh!=null&&n.circleMesh.position.set(i.x,-i.y,0)}}}class Rl extends rt{constructor(e){super(),this.addLineMesh(e),this.addBody(e),this.addConstraint(e)}addLineMesh(e){this.speed=e.speed,this.minLength=e.minLength,this.line2Geometry=new kr,this.line2Material=new _n({color:"#ffffff",dashed:!1,linewidth:4,dashScale:1,dashSize:8,gapSize:2,worldUnits:!0}),this.line2=new Bl(this.line2Geometry,this.line2Material),this.add(this.line2)}addCircleMesh(e){this.circle=new Ba(e.radius,12),this.circleMaterial=new Ia({color:"#ffffff",opacity:1,transparent:!0}),this.circleMesh=new Qe(this.circle,this.circleMaterial),this.add(this.circleMesh)}removeCircleMesh(){this.remove(this.circleMesh)}addBody(e){this.part=G.Bodies.circle(e.position.x,e.position.y,e.radius,{isSensor:!0}),this.body=G.Body.create({parts:[this.part],friction:0,frictionAir:0,frictionStatic:0,restitution:0}),G.World.add(app.engine.world,this.body)}removeBody(){G.World.remove(app.engine.world,this.body)}addConstraint(e){var t=this.body,n={x:0,y:0};e.isLastJoint==!0&&(this.removeBody(),this.removeCircleMesh(),t=e.bodyB,n={x:-(t.position.x-e.position.x),y:-(t.position.y-e.position.y)}),this.offset=n,this.constraint=G.Constraint.create({bodyA:e.bodyA,bodyB:t,mass:0,pointB:n,stiffness:1.5,shrink:!0}),G.World.add(app.engine.world,this.constraint)}removeConstraint(){G.World.remove(app.engine.world,this.constraint)}shrink(){this.constraint.shrink==!0&&(this.constraint.length>this.minLength?this.constraint.length-=this.speed:(this.constraint.length=this.minLength,this.constraint.shrink=!1))}}class On extends ke{constructor(e={}){super(e),this.body.class="player",this.setScale({x:16,y:16,z:16}),this.setStatic(!1),this.setColors("#dc265a"),this.setMode("jump"),this.util=new ur,this.mass=5,this.allowJump=!1,this.addLight("#dc265a",16e3,500,!1),this.controls={left:0,right:0,acceleration:.5,speed:4},this.rope=new Il,this.skin={url:""},this.plane=new Qe(new Ra(1e3,1e3),new ft({visible:!1,side:bn})),this.add(this.plane)}setScale(e={},t=!0){super.setScale(e,t)}jump(){if((this.mode=="jump"||this.mode=="control")&&this.allowJump==!0){this.allowJump=!1;var e=app.engine.world.gravity,t=Math.PI/2-G.Vector.angle({x:0,y:0},e),n=this.body.velocity,r=1,i=Math.PI/20,a=.025,u={x:-(e.x*a*this.body.mass),y:-(e.y*a*this.body.mass)};n=G.Vector.rotate(n,t),n.y=0,r=n.x>=0?1:-1,i*=r,n=G.Vector.rotate(n,-t),this.body.speed<this.controls.speed*.25&&(i=0),G.Body.setVelocity(this.body,n),G.Body.setAngularVelocity(this.body,i),G.Body.applyForce(this.body,this.body.position,u),app.assets.audio.play("pop2")}}setControls(e,t){this.controls[e]=t}updateControls(){if(this.mode=="control"){var e=app.engine.world.gravity,t=this.controls.left+this.controls.right,n={x:e.y*t,y:-e.x*t},r=this.body.velocity,i=G.Vector.dot(r,n),a=4,u=i+this.controls.acceleration,d=Math.max(i,Math.min(u,a)),p=d-i;r.x+=n.x*p,r.y+=n.y*p,G.Body.setVelocity(this.body,r)}}addRope(e){if(this.mode=="grapple"&&this.isFrozen()==!1){var t=4,n=400,r=e.x-this.position.x,i=e.y-this.position.y,a=Math.sqrt(r*r+i*i),u={x:this.position.x,y:-this.position.y},d={x:this.position.x+(e.x-this.position.x)*n/a,y:-(this.position.y+(e.y-this.position.y)*n/a)};this.removeRope();for(var p=0;p<n;p+=t){var c=p/n,m={x:u.x+(d.x-u.x)*c,y:u.y+(d.y-u.y)*c},o=G.Query.point(app.engine.world.bodies,m);if(o.length>0&&o[0].class!="player"){var s=app.level.getObjectByName(o[0].name);if(s.visible==!0&&s.position.z==0){app.level.add(this.rope),this.rope.addJoints(this.body,o[0],m),this.updateRope();break}}}app.assets.audio.play("ice")}}updateForce(){this.body.speed<this.controls.speed&&G.Body.applyForce(this.body,this.body.position,{x:this.force.x*app.loop.speed,y:this.force.y*app.loop.speed})}updateRope(){this.rope.updateJoints()}removeRope(){this.rope.removeJoints(),app.level.remove(this.rope)}kill(){if(this.isFrozen()==!1){this.freeze(!0),this.visible=!1,this.killTimeout=setTimeout(function(){this.restart()}.bind(this),1e3);for(var e=4,t=4,n=4,r={x:this.scale.x/t,y:this.scale.y/e,z:this.scale.z/n},i=-e/2;i<e/2;i++)for(var a=-t/2;a<t/2;a++){var u=this.util.randomNumber(0,360*(Math.PI/180)),d={color:this.color,position:{x:this.position.x+a*r.x+r.x/2,y:this.position.y+i*r.y+r.y/2,z:0},rotation:{x:0,y:0,z:u},scale:{x:r.x,y:r.y,z:r.z},isStatic:!1,friction:0},p=app.level.entityFactory.createObject("cube");app.level.setObjectProperties(p,d),app.level.addObject(p,app),p.isParticle=!0,p.setColors(this.color),G.Body.setVelocity(p.body,this.body.velocity)}}window.dispatchEvent(new CustomEvent("playerKill",{detail:{player:this}})),app.assets.audio.play("glass")}cancelRestart(){clearTimeout(this.killTimeout)}saveCheckpoint(e){this.checkpoint==null&&(this.checkpoint={}),this.checkpoint.x=e.x,this.checkpoint.y=e.y,this.checkpoint.z=e.z}removeCheckpoint(){this.checkpoint=null}setPositionToCheckpoint(){this.checkpoint!=null&&this.setPosition({x:this.position.x=this.checkpoint.x,y:this.position.y=this.checkpoint.y,z:this.position.z=this.checkpoint.z},!1)}respawn(e=!1){(this.isFrozen()==!0||e==!0)&&(app.level.removeParticles(app),this.resetToOrigin(),this.setPositionToCheckpoint(),window.dispatchEvent(new CustomEvent("playerRespawn",{detail:{player:this}})))}restart(){app.level.retryLevel(app,!0),window.dispatchEvent(new CustomEvent("playerRestart",{detail:{player:this}}))}finish(){if(app.play==!0){var e=app.level.name,t=app.timer.toString(),n=app.storage.saveScore(e,t),r="Finished!<br>Score: "+t;app.timer.render(t),n==!0&&(r+="<br><em>New record!</em>"),app.play=!1,window.dispatchEvent(new CustomEvent("levelFinish",{detail:{time:t,level:e}})),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:r,inputs:[{value:"Retry",type:"button",callback:function(){app.level.retryLevel(app),window.dispatchEvent(new CustomEvent("closePopup"))}},{value:"Continue",type:"button",callback:function(){app.level.exitLevel(app),window.dispatchEvent(new CustomEvent("closePopup"))}}]}})),app.assets.audio.play("clap"),app.assets.audio.play("success")}}shrink(){this.setScale({x:this.scale.x/2,y:this.scale.y/2,z:this.scale.z/2},!1)}grow(){this.setScale({x:this.scale.x*2,y:this.scale.y*2,z:this.scale.z*2},!1)}renderSpeed(e){var t=this.body.speed,n=10,r=0,i=r+"%;";t>n&&(t=n),r=t/n*100,i="width: calc("+r+"% - 8px)",e.document.getElementById("speed")&&e.document.getElementById("speed").setAttribute("style",i)}setSkin(e={},t=app){this.addTexture(e)}reset(){app.updateGravity(),this.setForceDirection(),this.setScale({x:this.scaleOrigin.x,y:this.scaleOrigin.y,z:this.scaleOrigin.z},!1),this.setMode(this.modeOrigin,!1),this.controls.left=this.controls.right=0,app.assets.audio.play("teleport")}addTexture(e){if(e.url){e.url=e.url.replace("img/png/skins/","../png/");var t=new Xi;t.load(e.url,function(n){n.colorSpace=ja,this.remove(this.skin),this.shapes.visible=!1;var r=new vr(1,1,1,1,.1),i=new ft({map:n,transparent:!0,opacity:1});this.shapes.setOpacities(0),this.skin=new Qe(r,i),this.skin.url=e.url,this.add(this.skin)}.bind(this),void 0,function(n){console.error("An error happened: ",n)}.bind(this))}}}const Bf=new Ue;class jl extends ke{constructor(e={}){super(e),this.body.class="tip",this.text="Do not touch the spikes!",this.hitbox.isSensor=!0,this.hitbox.class="sensor",this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.shapes.setOpacities(.5),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({color:"#0287ef",z:-(t*.5),scaleZ:t*4}),this.shapes.addCube({y:t*1,z:t*2,scaleX:t,scaleY:t*2,scaleZ:t,color:"#fff"}),this.shapes.addCube({y:-(t*1.5),z:t*2,scaleX:t,scaleY:t,scaleZ:t,color:"#fff"})}}class zl extends ke{constructor(e={}){super(e),this.body.class="bounce";var t={x:0,y:.6},n={x:e.scaleX*.6,y:e.scaleY*.2};this.sensor=G.Bodies.rectangle(t.x,-t.y,n.x,n.y,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.addHelper(this.sensor,{position:t,color:"#ffff00"}),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({y:t*2,scaleX:t*5,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({y:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({y:-(t*1),scaleY:t*3,scaleZ:t*5,color:"#0287ef"})}}class Ul extends ke{constructor(e={}){super(e),this.body.class="checkpoint",this.hitbox.isSensor=!0,this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({scaleX:t,scaleY:t,scaleZ:t,color:"#fff"}),this.shapes.addCube({x:t*0,y:-(t*2),z:t*2,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*0,y:-(t*2),z:-(t*2),scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*0,y:t*2,z:t*2,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*0,y:t*2,z:-(t*2),scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:t*2,z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:-(t*2),z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:t*2,z:0,scaleX:t*1,scaleY:t*1,scaleZ:t*5,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:0,z:t*2,scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:t*2,y:0,z:-(t*2),scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:0,z:t*2,scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:0,z:-(t*2),scaleX:t*1,scaleY:t*5,scaleZ:t*1,color:"#0287ef"})}}class Nl extends ke{constructor(e={}){super(e),this.body.class="spike";var t={x:0,y:.6},n={x:e.scaleX*.6,y:e.scaleY*.2};this.sensor=G.Bodies.rectangle(t.x,-t.y,n.x,n.y,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.addHelper(this.sensor,{position:t,color:"#ff0000"}),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e),this.setColors(e.color)}addShapes(e){var t=e.scaleZ*.25;this.shapes.addCone({x:-(t*1),y:t*0,z:t*1,scaleX:t*2,scaleY:t*4}),this.shapes.addCone({x:-(t*1),y:t*0,z:-(t*1),scaleX:t*2,scaleY:t*4}),this.shapes.addCone({x:t*1,y:t*0,z:t*1,scaleX:t*2,scaleY:t*4}),this.shapes.addCone({x:t*1,y:t*0,z:-(t*1),scaleX:t*2,scaleY:t*4})}}class Fl extends ke{constructor(e={}){super(e),this.body.class="shrink",this.hitbox.isSensor=!0,this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({x:-(t*1),y:t*1,z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:t*1,z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*1),y:-(t*1),z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:-(t*1),z:t*1,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*1),y:t*1,z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:t*1,z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*1),y:-(t*1),z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*1,y:-(t*1),z:-(t*1),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"})}}class ql extends ke{constructor(e={}){super(e),this.body.class="grow",this.hitbox.isSensor=!0,this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({scaleX:t*3,scaleY:t*3,scaleZ:t*3,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"}),this.shapes.addCube({x:t*2,y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#dc265a"})}}class Hl extends ke{constructor(e={}){super(e),this.body.class="resize",this.hitbox.isSensor=!0,this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({scaleX:t*3,scaleY:t*3,scaleZ:t*3,color:"#0287ef"}),this.shapes.addCube({x:-(t*2),y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:t*2,z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:-(t*2),z:t*2,scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:-(t*2),y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:t*2,z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:-(t*2),y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"}),this.shapes.addCube({x:t*2,y:-(t*2),z:-(t*2),scaleX:t*1,scaleY:t*1,scaleZ:t*1,color:"#ffffff"})}}class Vl extends ke{constructor(e={}){super(e),this.body.class="direction",this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ*.2;this.shapes.addCube({x:0,y:0,z:-(t*.5),scaleX:1,scaleY:1,scaleZ:t*4,color:"#0287ef"}),this.shapes.addExtrusion({position:{x:-.5,y:-.5,z:t*1.5},points:[{x:t,y:t},{x:t*4,y:.5},{x:t,y:t*4},{x:.4,y:.5}],depth:t,color:"#fff"})}}class Gl extends ke{constructor(e={}){super(e),this.body.class="gravity",this.hitbox.isSensor=!0,this.hitbox.class="sensor",this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.shapes.setOpacities(.5),this.addShapes(e)}addShapes(e){var t=e.scaleZ/9;this.shapes.addCube({x:0,y:0,z:-(t*.5),scaleX:1,scaleY:1,scaleZ:t*6,color:"#0287ef"}),this.shapes.addCube({x:0,y:-(t*3),z:t*3,scaleX:t*7,scaleY:t*1,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:0,y:t*3,z:t*3,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:0,y:-(t*1),z:t*3,scaleX:t*5,scaleY:t*1,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:-(t*2),y:t*1,z:t*3,scaleX:t*1,scaleY:t*3,scaleZ:t*1,color:"#fff"}),this.shapes.addCube({x:t*2,y:t*1,z:t*3,scaleX:t*1,scaleY:t*3,scaleZ:t*1,color:"#fff"})}}class Wl extends ke{constructor(e={}){super(e),this.body.class="grapple",this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){var t=e.scaleZ/8;this.shapes.addCube({x:0,y:0,z:-t,scaleX:1,scaleY:1,scaleZ:t*7,color:"#0287ef"}),this.shapes.addExtrusion({position:{x:0,y:0,z:t*3},points:[{x:0,y:0},{x:0,y:-(t*3)},{x:-(t*3),y:-(t*3)},{x:-(t*3),y:0}],depth:t,color:"#fff"}),this.shapes.addExtrusion({position:{x:0,y:0,z:t*3},points:[{x:-(t*1),y:0},{x:0,y:-(t*1)},{x:t*2,y:t*1},{x:t*1,y:t*2}],depth:t,color:"#fff"}),this.shapes.addExtrusion({position:{x:0,y:0,z:t*3},points:[{x:0,y:t*3},{x:t*3,y:t*3},{x:t*3,y:0}],depth:t,color:"#fff"})}}class Xl extends ke{constructor(e={}){super(e),this.body.class="finish",this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){for(var t=3,n=e.scaleZ*(1/t),r=-Math.floor(t/2),i=Math.ceil(t/2),a=0,u="#ffffff",d=r;d<i;d++)for(var p=r;p<i;p++)for(var c=r;c<i;c++)u=a%2==0?null:"#ffffff",this.shapes.addCube({x:n*c,y:n*p,z:n*d,scaleX:n*1,scaleY:n*1,scaleZ:n*1,color:u}),a++}}class Jl extends ke{constructor(e={}){super(e),this.body.class="reset",this.hitbox.isSensor=!0,this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.addShapes(e)}addShapes(e){for(var t=3,n=e.scaleZ*(1/t),r=-Math.floor(t/2),i=Math.ceil(t/2),a=0,u="#0287ef",d=r;d<i;d++)for(var p=r;p<i;p++)for(var c=r;c<i;c++)a%2!=0&&(d==0&&p==0?u="#ffffff":u="#0287ef",this.shapes.addCube({x:n*c,y:n*p,z:n*d,scaleX:n*1,scaleY:n*1,scaleZ:n*1,color:u})),a++}}class Zl extends ke{constructor(e={}){super(e),this.body.class="control",this.hitbox.isSensor=!0,this.sensor=G.Bodies.rectangle(0,0,e.scaleX,e.scaleY,{isSensor:!0,density:0,class:"sensor"}),G.Body.setParts(this.body,[this.hitbox,this.sensor]),this.setScale({x:16,y:16,z:16}),this.shapes.removeAllShapes(),this.add(e.model)}}class Yl{constructor(){this.color="#620460"}createObject(e,t){var n;switch(t==null&&(t={color:this.color}),e){case"player":n=new On(t);break;case"tip":n=new jl(t);break;case"bounce":n=new zl(t);break;case"checkpoint":n=new Ul(t);break;case"spike":n=new Nl(t);break;case"shrink":n=new Fl(t);break;case"grow":n=new ql(t);break;case"resize":n=new Hl(t);break;case"direction":n=new Vl(t);break;case"gravity":n=new Gl(t);break;case"grapple":n=new Wl(t);break;case"finish":n=new Xl(t);break;case"reset":n=new Jl(t);break;case"control":t.model=app.assets.models.clone("cube-control"),n=new Zl(t);break;default:n=new ke(t)}return n}}const Kl=[{title:"Easy Peasy",url:"../svg/button-pack-easy-peasy.svg",theme:"blue",levels:[{title:"Campaign Level 1",description:"Slip & Slide",label:"1-1"},{title:"Campaign Level 2",description:"Olympic Ramp",label:"1-2"},{title:"Campaign Level 3",description:"Easy Hop",label:"1-3"},{title:"Campaign Level 4",description:"Spike Hurdles",label:"1-4"},{title:"Campaign Level 5",description:"Air Jump",label:"1-5"}]},{title:"Lemon Difficult",url:"../svg/button-pack-lemon-difficult.svg",theme:"orange",levels:[{title:"Campaign Level 6",description:"Secret Agent",label:"2-1"},{title:"Campaign Level 7",description:"Long Boi",label:"2-2"},{title:"Campaign Level 8",description:"Bigger Boi",label:"2-3"},{title:"Campaign Level 9",description:"Spider Box",label:"2-4"},{title:"Campaign Level 10",description:"Rock Climber",label:"2-5"}]},{title:"Zack's Pack",url:"../svg/button-pack-zacks-levels.svg",theme:"green",levels:[{title:"Campaign Level 11",description:"Tippy Tap",label:"3-1"},{title:"Campaign Level 12",description:"Agility Jumps",label:"3-2"},{title:"Campaign Level 13",description:"Zack's Coaster",label:"3-3"},{title:"Campaign Level 14",description:"Simon Says",label:"3-4"},{title:"Campaign Level 15",description:"Wall of Finish",label:"3-5"}]},{title:"Kargoh's Pack",url:"../svg/button-pack-kargohs-levels.svg",theme:"purple",levels:[{title:"Campaign Level 16",description:"Kargoh's World",label:"4-1"},{title:"Campaign Level 17",description:"Kargoh's Bobsled",label:"4-2"},{title:"Campaign Level 18",description:"Kargoh's Plinko",label:"4-3"},{title:"Campaign Level 19",description:"Kargoh's Obstacles",label:"4-4"},{title:"Campaign Level 20",description:"Kargoh's Ramp",label:"4-5"}]},{title:"Gravity Hell",url:"../svg/button-pack-gravity-hell.svg",theme:"red",levels:[{title:"Campaign Level 21",description:"Gravity Loop",label:"5-1"},{title:"Campaign Level 22",description:"Gravity Sewer",label:"5-2"},{title:"Campaign Level 23",description:"Gravity Twist",label:"5-3"},{title:"Campaign Level 24",description:"Gravity Ramps",label:"5-4"},{title:"Campaign Level 25",description:"Gravity Spikes",label:"5-5"}]},{title:"Boxel Classics",url:"../svg/button-pack-boxel-classics.svg",theme:"classic",levels:[{title:"Campaign Level 26",description:"Stairway to Stairs",label:"6-1"},{title:"Campaign Level 27",description:"Extra Hops",label:"6-2"},{title:"Campaign Level 28",description:"Butterfly Knot",label:"6-3"},{title:"Campaign Level 29",description:"Jericho",label:"6-4"},{title:"Campaign Level 30",description:"Rock Climber 2",label:"6-5"}]},{title:"Spider Cube",url:"../svg/button-pack-spider-cube.svg",theme:"pink",levels:[{title:"Campaign Level 31",description:"Escape Room",label:"7-1"},{title:"Campaign Level 32",description:"Spider Room",label:"7-2"},{title:"Campaign Level 33",description:"Kargoh's Spider",label:"7-3"},{title:"Campaign Level 34",description:"Spider Tower",label:"7-4"},{title:"Campaign Level 35",description:"Spider Cave",label:"7-5"}]},{title:"Blue City",url:"../svg/button-pack-city.svg",theme:"blue",description:"I'm walking here!",levels:[{title:"Campaign Level 36",description:"Small Boi",label:"8-1"},{title:"Campaign Level 37",description:"Doppler's Plinko",label:"8-2"},{title:"Campaign Level 38",description:"Ping Pong",label:"8-3"},{title:"Campaign Level 39",description:"Boxel Nomad",label:"8-4"},{title:"Campaign Level 40",description:"Homework",label:"8-5"}]},{title:"Community Levels",url:"../svg/button-pack-boxel-classics.svg",theme:"classic",description:"Levels are made by the Boxel Community and are picked by the developer.",links:[{class:"discord",icon:"../svg/discord.svg",target:"_blank",text:"Join the Discord",url:"https://discord.gg/j8fvd4UvbE"}],levels:[{title:"Junsie",description:"Junsie"},{title:"Junsie 2",description:"Junsie 2"},{title:"Metal Machine",description:"Metal Machine"},{title:"0123xrulez",description:"0123xrulez"},{title:"Jack TVYT",description:"Jack TVYT"},{title:"16BitPlayer",description:"16BitPlayer"},{title:"uncoho3",description:"uncoho3"},{title:"Metal Machine 2",description:"Metal Machine 2"},{title:"Vyom",description:"Vyom"},{title:"0123xrulez 2",description:"0123xrulez 2"},{title:"16BitPlayer 2",description:"16BitPlayer 2"},{title:"0123xrulez 3",description:"0123xrulez 3"},{title:"Zozo",description:"Zozo"},{title:"Junsie 3",description:"Junsie 3"},{title:"! __kf",description:"! __kf"},{title:"Ice Dodo",description:"Ice Dodo"},{title:"Kllixto",description:"Kllixto"},{title:"Mountain Climb",description:"Mountain Climb"},{title:"The Arcadium",description:"The Arcadium"},{title:"The Box Escape",description:"The Box Escape"},{title:"Average level attempt",description:"Average level attempt"},{title:"Speed Spider",description:"Speed Spider"},{title:"Dancing on nothing",description:"Dancing on nothing"},{title:"Strawberry Jam",description:"Strawberry Jam"},{title:"Up, Down, and Through",description:"Up, Down, and Through"},{title:"The Bonce House",description:"The Bonce House"},{title:"Wallclimb Ascension",description:"Wallclimb Ascension"},{title:"Spider Number 1",description:"Spider Number 1"},{title:"Roller Coaster",description:"Roller Coaster"},{title:"Creation Roulette",description:"Creation Roulette"}]}],Ge={packs:Kl},$l={model:"background-city",color:"#ffffff"},Ql={model:"background-classic",color:"#620460"},ec={model:"background-forest",color:"#ffffff"},tc={model:"background-desert",color:"#c40c4b"},nc={model:"background-tokyo",color:"#C40C4B"},ic={model:"background-kargoh",color:"#ffffff"},rc={model:"background-hell",color:"#8C004A"},sc={blue:$l,classic:Ql,green:ec,orange:tc,pink:nc,purple:ic,red:rc};class oc extends rt{constructor(){super(),this.name=this.defaultName="My Level",this.entityFactory=new Yl}addObject(e,t){e.position.z==0&&(G.World.add(t.engine.world,e.body),this.parent.add(e.helper)),this.add(e)}removeObject(e,t,n=!1){(t.selectedObject!=null&&t.selectedObject.getClass()!="player"||n==!0)&&e!=null&&(G.World.remove(t.engine.world,e.body),this.parent.remove(e.helper),this.remove(e),t.level.deselectLevel(t))}clearLevel(e){var t=e.level.children.length;this.name=this.defaultName,e.player.removeRope();for(var n=0;n<t;n++){var r=e.level.children[0];this.removeObject(r,e,!0)}}removeParticles(e){for(var t=e.level.children.length,n=t-1;n>=0;){var r=e.level.children[n];r.isParticle!=null&&this.removeObject(r,e,!0),n--}}refreshLevel(e){var t=this.exportToJSON(e);this.clearLevel(e),this.importFromJSON(t,e)}refreshObject(e,t){this.removeObject(e,t);var n=this.duplicateObject(e,t);return n}changeObjectType(e,t,n){var r=e;return e.getClass()!="player"&&(e.body.class=t,r=this.refreshObject(e,n)),r}duplicateObject(e,t){var n=e.toJSON(),r=this.entityFactory.createObject(n.class);return this.setObjectProperties(r,n),this.addObject(r,t),r}createNewLevel(e){e.player.setPosition({x:0,y:0,z:0}),e.player.setScale({x:16,y:16,z:16}),e.player.setRotation(0),e.player.setFriction(0),this.clearLevel(e),this.add(e.player);var t=this.entityFactory.createObject("cube",{x:0,y:-64,z:0});t.setScale({x:64,y:16,z:16}),t.setStatic(!0),this.add(t)}deselectLevel(e){e.selectedObject=null;for(var t=0;t<e.level.children.length;t++){var n=e.level.children[t];n.body!=null&&n.select(!1)}}exportToJSON(e){var t={};t.name=this.name,t.children=[];for(var n=0;n<e.level.children.length;n++){var r=e.level.children[n];if(r.type=="Mesh"){var i=r.toJSON();t.children.push(i)}}return t}saveLevelData(e){e.storage.setLevelData(this.key,this.exportToJSON(e))}importFromJSON(e,t){this.name=e.name;for(var n=0;n<e.children.length;n++){var r=t.storage.getSettings(t),i=e.children[n],a=this.entityFactory.createObject(i.class);i.class=="player"&&(a=t.player),a.helper.visible=r.debug,this.setObjectProperties(a,i),this.addObject(a,t)}}resetLevel(){for(var e=0;e<this.children.length;e++){var t=this.children[e];t.resetToOrigin()}}retryLevel(e=app,t=!1){e.updateGravity(),e.play=!0,e.level.removeParticles(e),e.player.cancelRestart(),e.resetScene(e),window.dispatchEvent(new CustomEvent("closePopup")),t==!1||e.player.checkpoint==null?(e.timer.reset(),e.player.removeCheckpoint()):e.player.respawn(!0)}exitLevel(e){if(e.timer.reset(),e.player.removeCheckpoint(),e.state=="campaign"){var t=e.storage.getSettings(e),n=parseInt(t.progress);n++,t.progress=n,e.updateSettings(t,e),window.dispatchEvent(new CustomEvent("setPage",{detail:"level-picker"}))}else e.state=="level-editor"&&(e.updateGravity(),e.resetScene(e),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),app.background.visible=!1)}setObjectProperties(e,t){e.setPosition({x:t.position.x,y:t.position.y,z:t.position.z}),e.setScale({x:t.scale.x,y:t.scale.y,z:t.scale.z}),e.setRotation(t.rotation.z),e.setStatic(t.isStatic),e.setText(t.text),e.setFriction(t.friction)}showTip(e){app.play=!1,app.timer.pause(),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:e,inputs:[{type:"button",value:"Continue",callback:function(){app.playLevel(),window.dispatchEvent(new CustomEvent("closePopup"))}}]}})),app.assets.audio.play("tip")}showHelpers(e=!0){this.traverse(function(t){t.helper&&(t.helper.visible=e)})}updateHelpers(){this.children.forEach(function(e){e.helper&&e.updateHelper()})}getThemeByTitle(e){var t;return Ge.packs.forEach(function(n){n.levels.forEach(function(r){e==r.title&&(t=sc[n.theme])})}),t}getDescriptionByTitle(e){var t;return Ge.packs.forEach(function(n){n.levels.forEach(function(r){e==r.title&&(t=r.description)})}),t}}class ac{constructor(){this.clear()}save(e="Edited level",t){this.history.length=this.historyIndex+1,this.history.push({data:t.level.exportToJSON(t),description:e}),this.historyIndex++}clear(){this.history=[],this.historyIndex=0}undo(e){this.historyIndex>1&&(this.historyIndex--,e.level.clearLevel(e),e.level.importFromJSON(this.history[this.historyIndex].data,e))}redo(e){this.historyIndex<this.history.length-1&&(this.historyIndex++,e.level.clearLevel(e),e.level.importFromJSON(this.history[this.historyIndex].data,e))}}class lc{constructor(){this.down=new oe,this.move=new oe,this.offset=new oe,this.up=new oe,this.drag=!1,this.mode="draw",this.snap=1,this.prevMode=this.mode}mouseDown(e,t){if(this.setTolerance(),t.play==!1)t.levelEditor.mouseDown(e,t);else{var n=t.mouse.getPosition(e,t);t.player.jump(n),t.player.addRope(n)}}mouseMove(e,t){t.play==!1&&t.levelEditor.mouseMove(e,t)}mouseUp(e,t){t.play==!1&&app.state=="level-editor"&&t.levelEditor.mouseUp(e,t),t.player.removeRope()}getPosition(e,t){var n=new tr,r=new oe,i=[];return n.setFromCamera(t.mouse.getMouse(e,t),t.camera),i=n.intersectObject(t.player,!0),i.length>0&&r.copy(i[0].point),r}clickObject(e,t){var n=new tr,r=new oe,i,a=e.clientX/t.window.innerWidth*2-1,u=-(e.clientY/t.window.innerHeight)*2+1;r.set(a,u,0),n.setFromCamera(r,t.camera);for(var d=n.intersectObjects(t.scene.children,!0),p=0;p<d.length;p++){var c=d[p].object;if(c.isMesh&&c.material.visible&&c.traverseAncestors(function(m){i==null&&m.isCube&&(i=m)}),i)break}return i}wheel(e,t){e.preventDefault()}setTolerance(e=.05){this.tolerance=app.camera.position.z*e}setPosition(e,t){e=="down"?(this.down=t,this.move=t,this.drag=!0):e=="move"?this.drag==!0&&(this.move=t):e=="up"&&(this.up=t,this.drag=!1)}setOffset(e){this.offset.x=e.x-this.down.x,this.offset.y=e.y-this.down.y,this.offset.z=e.z-this.down.z}getDragDifference(){return{x:Math.round(this.down.x-this.move.x-this.offset.x),y:Math.round(this.down.y-this.move.y-this.offset.y),z:Math.round(this.down.z-this.move.z-this.offset.z)}}getTolerance(){var e=this.getDragDifference();return Math.abs(e.x+this.offset.x)+Math.abs(e.y+this.offset.y)>this.tolerance}snapToValue(e,t){return Math.round(e/t)*t}setSnap(e){this.snap=e}setMode(e){this.mode=this.prevMode=e}getMode(){return this.mode}getMouse(e,t){return{x:e.clientX/t.window.innerWidth*2-1,y:-(e.clientY/t.window.innerHeight)*2+1,z:.5}}}class cc{constructor(e,t){this.selectedObjectType="cube",this.controlsTransform=new Ga(e,t),this.controlsTransform.showZ=!0,this.controlsTransform.space="world",this.controlsOrbit=new Wa(e,t),this.controlsOrbit.enabled=!1,this.controlsOrbit.mouseButtons={LEFT:2,MIDDLE:2,RIGHT:0},this.controlsOrbit.zoomSpeed=3,this.controlsOrbit.minDistance=10,this.controlsOrbit.maxDistance=1e3;var n=this;this.controlsTransform.addEventListener("mouseDown",function(){n.controlsOrbit.enabled=!1,n.saveSelectedObject()}),this.controlsTransform.addEventListener("mouseUp",function(){n.controlsOrbit.enabled=!0,n.updateSelectedObject()}),this.controlsTransform.addEventListener("objectChange",function(){n.controlsTransform.moved=!0}),this.controlsOrbit.addEventListener("start",function(){n.controlsOrbit.moved=!1}),this.controlsOrbit.addEventListener("change",function(){n.controlsOrbit.moved=!0})}mouseDown(e,t){t.mouse.setPosition("down",t.mouse.getPosition(e,t)),this.controlsTransform.moved=!1,this.controlsTransform.setTranslationSnap(t.mouse.snap),this.controlsTransform.setScaleSnap(t.mouse.snap),this.controlsTransform.setRotationSnap(t.mouse.snap>1?Math.PI/12:null)}mouseMove(e,t){t.mouse.setPosition("move",t.mouse.getPosition(e,t))}mouseUp(e,t){var n=t.mouse.clickObject(e,t);if(t.mouse.setPosition("up",t.mouse.getPosition(e,t)),e.button==2&&(t.mouse.mode="erase"),t.mouse.mode=="draw")if(t.selectedObject==null||n){if(n)this.controlsTransform.moved==!1&&this.controlsOrbit.moved==!1&&(t.level.deselectLevel(t),t.selectedObject=n,t.selectedObject.select(!0),this.controlsTransform.attach(n),t.selectedObject.getClass()!="player"&&window.dispatchEvent(new CustomEvent("selectObjectType",{detail:{type:t.selectedObject.getClass(),checkNull:!1}})),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:t.selectedObject})));else if(this.controlsOrbit.moved==!1){var r=app.levelEditor.selectedObjectType,i={class:r,isStatic:!0,position:{x:t.mouse.snapToValue(t.mouse.down.x,t.mouse.snap),y:t.mouse.snapToValue(t.mouse.down.y,t.mouse.snap),z:0},rotation:{x:0,y:0,z:0},scale:{x:t.BOX_SIZE,y:t.BOX_SIZE,z:t.BOX_SIZE}};t.level.deselectLevel(t),t.selectedObject=t.level.entityFactory.createObject(r),t.level.setObjectProperties(t.selectedObject,i),t.level.addObject(t.selectedObject,t),t.levelHistory.save("Added "+r,t),t.selectedObject.select(!0),this.controlsTransform.attach(t.selectedObject),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:t.selectedObject}))}}else this.controlsTransform.moved==!1&&this.controlsOrbit.moved==!1&&(t.level.deselectLevel(app),this.controlsTransform.detach(),window.dispatchEvent(new CustomEvent("setSelectedObject")));else t.mouse.mode=="erase"&&(this.controlsOrbit.moved==!1&&(t.levelEditor.eraseTarget(e,t),t.level.deselectLevel(t),t.levelHistory.save("Erased object",t),this.controlsTransform.detach(),window.dispatchEvent(new CustomEvent("setSelectedObject"))),t.mouse.mode=t.mouse.prevMode)}eraseTarget(e,t){var n=t.mouse.clickObject(e,t);n!=null&&n.getClass()!="player"&&(n.select(!0),t.level.removeObject(n,t,!0))}duplicateSelectedObject(){app.selectedObject&&(app.selectedObject.select(!1),app.selectedObject=app.level.duplicateObject(app.selectedObject,app),app.selectedObject.position.y+=16,app.selectedObject.select(!0),app.levelEditor.controlsTransform.attach(app.selectedObject),app.levelEditor.setMode("translate"),app.levelHistory.save("Duplicated object",app))}deleteSelectedObject(){app.selectedObject&&(app.level.removeObject(app.selectedObject,app),app.levelEditor.controlsTransform.detach(),app.levelHistory.save("Deleted object",app),window.dispatchEvent(new CustomEvent("setSelectedObject")))}saveLevel(){app.levelEditor.controlsTransform.detach(),app.resetScene(app),app.level.deselectLevel(app),app.level.saveLevelData(app)}exitLevel(){app.levelHistory.history.length>2?window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Would you like to <em>save</em> your level?",inputs:[{value:"No",type:"button",callback:function(){app.levelEditor.saveAndExitLevelEditor(!1),window.dispatchEvent(new CustomEvent("closePopup"))}},{value:"Yes",type:"button",callback:function(){app.levelEditor.saveAndExitLevelEditor(!0),window.dispatchEvent(new CustomEvent("closePopup"))}}]}})):app.levelEditor.saveAndExitLevelEditor(!1)}saveAndExitLevelEditor(e){app.levelEditor.controlsOrbit.enabled=!1,app.levelEditor.controlsOrbit.reset(),app.levelEditor.controlsTransform.detach(),app.play=!1,e==!0&&app.levelEditor.saveLevel(),app.level.clearLevel(app),app.levelHistory.clear(),app.player.removeCheckpoint(),app.player.setPosition({x:0,y:0,z:0}),app.levelEditor.controlsOrbit.enabled=!1,window.dispatchEvent(new CustomEvent("setPage",{detail:"level-manager"}))}undo(){app.levelEditor.controlsTransform.detach(),app.levelHistory.undo(app),window.dispatchEvent(new CustomEvent("setSelectedObject"))}redo(){app.levelHistory.redo(app),window.dispatchEvent(new CustomEvent("setSelectedObject"))}rewind(){app.level.retryLevel(app),app.level.deselectLevel(app),app.pauseLevel(),window.dispatchEvent(new CustomEvent("setSelectedObject"))}saveSelectedObject(){var e=app.selectedObject;e&&(e.position0=e.position.clone(),e.scale0=e.scale.clone(),e.rotation0=e.rotation.clone())}resetZAxis(){app.selectedObject&&(app.selectedObject.position.z=0,this.updateSelectedObject())}updateSelectedObject(){var e=app.selectedObject;e.position.z==0?e.body.collisionFilter.mask=-1:e.body.collisionFilter.mask=0,e.setPosition(e.getPosition());var t=e.rotation.z;e.setRotation(0,!1),e.setBodyScale(e.scale.x/e.scale0.x,e.scale.y/e.scale0.y),e.setRotation(t,!1),e.setScale(e.getScale()),e.setRotation(e.getRotation()),app.levelHistory.save("Object updated",app)}setMode(e){this.controlsTransform.setMode(e),e=="translate"?(this.controlsTransform.showX=!0,this.controlsTransform.showY=!0,this.controlsTransform.showZ=!0):e=="scale"?(this.controlsTransform.showX=!0,this.controlsTransform.showY=!0,this.controlsTransform.showZ=!0):e=="rotate"&&(this.controlsTransform.showX=!1,this.controlsTransform.showY=!1,this.controlsTransform.showZ=!0)}selectObjectType(e,t=!0){app.selectedObject!=null&&t==!0&&(app.selectedObject=app.level.changeObjectType(app.selectedObject,e,app),app.selectedObject.select(!0),app.levelEditor.controlsTransform.attach(app.selectedObject),app.levelHistory.save("Changed object to "+e,app),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:app.selectedObject}))),app.levelEditor.selectedObjectType=e}toggleSelectedObjectStaticState(){app.selectedObject.toggleStatic(),app.selectedObject=app.level.refreshObject(app.selectedObject,app),app.selectedObject.select(!0),app.levelEditor.controlsTransform.attach(app.selectedObject),app.levelHistory.save("Updated object state",app),window.dispatchEvent(new CustomEvent("setSelectedObject",{detail:app.selectedObject}))}}class uc extends Sl{constructor(e){super(),e=Object.assign({type:"div",class:"CSS2DObject",text:"Hello, World!"},e),this.element=document.createElement(e.type),this.element.className=e.class,this.setText(e.text),this.addEventListener("added",function(t){t.target.parent.addEventListener("removed",this.removeFromParent.bind(this))}.bind(this))}setText(e){this.element.innerHTML=e}hideText(){this.visible=!1}showText(){this.visible=!0}}class pc{constructor(e){this.network=e,this.players=new rt,this.tweens=new or,this.smooth=!0,this.tick=10,this.network.on("peer_open",this.onPeerOpen.bind(this)),this.network.on("peer_close",this.onPeerClose.bind(this)),this.network.on("peer_disconnected",this.onPeerDisconnected.bind(this)),this.network.on("connection_open",this.onConnectionOpen.bind(this)),this.network.on("connection_close",this.onConnectionClose.bind(this)),this.network.on("connection_data",this.onConnectionData.bind(this))}update(e,t){this.isHost()&&this.sendHostDataToGuests(),this.checkHeartbeat()}render(e,t){this.tweens.update()}onPeerOpen(e){if(this.isHost()){var t=app.storage.getSettings();app.player.setText(t.name)}}onPeerClose(e){this.players.clear()}onPeerDisconnected(e){}onConnectionOpen(e){this.isHost()&&this.addPlayerFromConnection(e.connection)}onConnectionClose(e){this.isHost()?this.removePlayerFromConnection(e.connection):this.players.clear()}onConnectionData(e){e.connection.metadata.time=e.data.time,e.data.type=="players"&&(this.isHost()?this.updatePlayerFromGuest(e.data):this.updatePlayersFromHost(e.data))}checkHeartbeat(){this.network.connections.forEach(function(e){var t=this.getTime()-e.metadata.time;t>5e3&&e.close()}.bind(this))}updatePlayerFromGuest(e){var t=this.getPlayer(e.players[0]);this.updatePlayer(t,e.players[0])}updatePlayersFromHost(e){if(e.players.length-1!=this.players.children.length){var t=this.players.children.filter(function(i){return!e.players.some(function(a){return i.uuid===a.uuid})});t.forEach(function(i){i.removeFromParent()})}for(var n=e.players.length-1;n>=0;n--)if(e.players[n].uuid!=app.player.uuid){var r=this.getPlayer(e.players[n]);r==null&&(r=this.addPlayer(e.players[n])),this.updatePlayer(r,e.players[n]),this.sendGuestDataToHost()}}setHost(e){this.host=e}isHost(){return this.host!=null}sendHostDataToGuests(){this.updateLocalPlayer();for(var e={type:"players",players:[this.playerToJSON(app.player)],time:this.getTime()},t=this.players.children.length-1;t>=0;t--){var n=this.players.children[t];e.players.push(this.playerToJSON(n))}this.network.connections.forEach(function(r){r.send(e)})}sendGuestDataToHost(){this.updateLocalPlayer();var e={type:"players",players:[this.playerToJSON(app.player)],time:this.getTime()};this.network.connections.forEach(function(t){t.send(e)})}addPlayerFromConnection(e){return this.addPlayer(e.metadata)}removePlayerFromConnection(e){return this.removePlayer(e.metadata.uuid)}getPlayer(e){var t=this.players.getObjectByProperty("uuid",e.uuid);return t}addPlayer(e){var t=this.getPlayer(e);return t==null&&(t=new On,t.visible=!1,t.setText(e.name),t.add(new uc({text:t.text})),t.positionPrev=t.position.clone(),t.positionNext=t.position.clone(),t.rotationPrev=t.rotation.clone(),t.rotationNext=t.rotation.clone(),t.uuid=e.uuid,t.light.removeFromParent(),this.players.add(t)),t}updatePlayer(e,t){e&&(e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.rotationPrev.z=e.rotation.z,e.positionNext.x=t.position.x,e.positionNext.y=t.position.y,e.rotationNext.z=t.rotation.z,e.scale.x=t.scale.x,e.scale.y=t.scale.y,e.scale.z=t.scale.z,e.level=t.level,e.skin.url!=t.skin&&e.addTexture({url:t.skin}),e.visible=app.level.name==e.level,this.tween({object:{alpha:0},to:{alpha:1},duration:1e3/this.tick,onUpdate:function(n){e.position.x=e.positionPrev.x+(e.positionNext.x-e.positionPrev.x)*(this.smooth==!0?n.alpha:1),e.position.y=e.positionPrev.y+(e.positionNext.y-e.positionPrev.y)*(this.smooth==!0?n.alpha:1),e.rotation.z=e.rotationPrev.z+(e.rotationNext.z-e.rotationPrev.z)*(this.smooth==!0?n.alpha:1)}.bind(this)}).start())}tween(e){var t=new ar(e.object,this.tweens).to(e.to,e.duration).dynamic(e.dynamic).easing(e.easing).interpolation(e.interpolation).onStart(e.onStart).onUpdate(e.onUpdate).onComplete(e.onComplete);return t}updateLocalPlayer(){app.player.level=app.level.name,app.player.skin.url.startsWith("data:")&&(app.player.skin.url="png/custom.png")}removePlayer(e){var t=this.players.getObjectByProperty("uuid",e);return t&&t.removeFromParent(),t}setTick(e){this.tick=e}playerToJSON(e){return{uuid:e.uuid,position:{x:e.position.x,y:e.position.y,z:0},rotation:{x:0,y:0,z:e.rotation.z},scale:{x:e.scale.x,y:e.scale.y,z:e.scale.z},name:e.text,skin:e.skin.url,level:e.level}}getConnectionByUUID(e){var t;return app.network.connections.forEach(function(n){e==n.metadata.uuid&&(t=n)}),t}closeConnectionByUUID(e){if(this.isHost()){var t=this.getConnectionByUUID(e);t.close()}}getTime(){return new Date().getTime()}}class dc{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const t of this._parts)e.push(t);return hc(e).buffer}}function hc(l){let e=0;for(const r of l)e+=r.byteLength;const t=new Uint8Array(e);let n=0;for(const r of l){const i=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t.set(i,n),n+=r.byteLength}return t}function Er(l){return new fc(l).unpack()}function Tr(l){const e=new mc,t=e.pack(l);return t instanceof Promise?t.then(()=>e.getBuffer()):e.getBuffer()}class fc{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let t;if((t=e^160)<=15)return this.unpack_raw(t);if((t=e^176)<=15)return this.unpack_string(t);if((t=e^144)<=15)return this.unpack_array(t);if((t=e^128)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),t=(e[0]&255)*256+(e[1]&255);return this.index+=2,t}unpack_uint32(){const e=this.read(4),t=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,t}unpack_uint64(){const e=this.read(8),t=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,t}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t}unpack_string(e){const t=this.read(e);let n=0,r="",i,a;for(;n<e;)i=t[n],i<160?(a=i,n++):(i^192)<32?(a=(i&31)<<6|t[n+1]&63,n+=2):(i^224)<16?(a=(i&15)<<12|(t[n+1]&63)<<6|t[n+2]&63,n+=3):(a=(i&7)<<18|(t[n+1]&63)<<12|(t[n+2]&63)<<6|t[n+3]&63,n+=4),r+=String.fromCodePoint(a);return this.index+=e,r}unpack_array(e){const t=new Array(e);for(let n=0;n<e;n++)t[n]=this.unpack();return t}unpack_map(e){const t={};for(let n=0;n<e;n++){const r=this.unpack();t[r]=this.unpack()}return t}unpack_float(){const e=this.unpack_uint32(),t=e>>31,n=(e>>23&255)-127,r=e&8388607|8388608;return(t===0?1:-1)*r*2**(n-23)}unpack_double(){const e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,r=(e>>20&2047)-1023,i=(e&1048575|1048576)*2**(r-20)+t*2**(r-52);return(n===0?1:-1)*i}read(e){const t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")}}class mc{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const t=e.constructor;if(e instanceof Array){const n=this.pack_array(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const n=e;this.pack_bin(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(n=>{this.pack_bin(new Uint8Array(n)),this._bufferBuilder.flush()});if(t==Object||t.toString().startsWith("class")){const n=this.pack_object(e);if(n instanceof Promise)return n.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${t.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const t=e.length;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this._bufferBuilder.append(218),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(t);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const t=this._textEncoder.encode(e),n=t.length;if(n<=15)this.pack_uint8(176+n);else if(n<=65535)this._bufferBuilder.append(216),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(t)}pack_array(e){const t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this._bufferBuilder.append(220),this.pack_uint16(t);else if(t<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(t);else throw new Error("Invalid length");const n=r=>{if(r<t){const i=this.pack(e[r]);return i instanceof Promise?i.then(()=>n(r+1)):n(r+1)}};return n(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let t=0;e<0&&(t=1,e=-e);const n=Math.floor(Math.log(e)/Math.LN2),r=e/2**n-1,i=Math.floor(r*2**52),a=2**32,u=t<<31|n+1023<<20|i/a&1048575,d=i%a;this._bufferBuilder.append(203),this.pack_int32(u),this.pack_int32(d)}pack_object(e){const t=Object.keys(e),n=t.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this._bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<t.length){const a=t[i];if(e.hasOwnProperty(a)){this.pack(a);const u=this.pack(e[a]);if(u instanceof Promise)return u.then(()=>r(i+1))}return r(i+1)}};return r(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const t=e&4294967295;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255)}pack_uint64(e){const t=e/4294967296,n=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const t=Math.floor(e/4294967296),n=e%2**32;this._bufferBuilder.append((t&4278190080)>>>24),this._bufferBuilder.append((t&16711680)>>>16),this._bufferBuilder.append((t&65280)>>>8),this._bufferBuilder.append(t&255),this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}constructor(){this._bufferBuilder=new dc,this._textEncoder=new TextEncoder}}let _r=!0,Pr=!0;function Zt(l,e,t){const n=l.match(e);return n&&n.length>=t&&parseInt(n[t],10)}function ot(l,e,t){if(!l.RTCPeerConnection)return;const n=l.RTCPeerConnection.prototype,r=n.addEventListener;n.addEventListener=function(a,u){if(a!==e)return r.apply(this,arguments);const d=p=>{const c=t(p);c&&(u.handleEvent?u.handleEvent(c):u(c))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(u,d),r.apply(this,[a,d])};const i=n.removeEventListener;n.removeEventListener=function(a,u){if(a!==e||!this._eventMap||!this._eventMap[e])return i.apply(this,arguments);if(!this._eventMap[e].has(u))return i.apply(this,arguments);const d=this._eventMap[e].get(u);return this._eventMap[e].delete(u),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,i.apply(this,[a,d])},Object.defineProperty(n,"on"+e,{get(){return this["_on"+e]},set(a){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),a&&this.addEventListener(e,this["_on"+e]=a)},enumerable:!0,configurable:!0})}function gc(l){return typeof l!="boolean"?new Error("Argument type: "+typeof l+". Please use a boolean."):(_r=l,l?"adapter.js logging disabled":"adapter.js logging enabled")}function vc(l){return typeof l!="boolean"?new Error("Argument type: "+typeof l+". Please use a boolean."):(Pr=!l,"adapter.js deprecation warnings "+(l?"disabled":"enabled"))}function Mr(){if(typeof window=="object"){if(_r)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Dn(l,e){Pr&&console.warn(l+" is deprecated, please use "+e+" instead.")}function yc(l){const e={browser:null,version:null};if(typeof l>"u"||!l.navigator||!l.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:t}=l;if(t.userAgentData&&t.userAgentData.brands){const n=t.userAgentData.brands.find(r=>r.brand==="Chromium");if(n)return{browser:"chrome",version:parseInt(n.version,10)}}if(t.mozGetUserMedia)e.browser="firefox",e.version=Zt(t.userAgent,/Firefox\/(\d+)\./,1);else if(t.webkitGetUserMedia||l.isSecureContext===!1&&l.webkitRTCPeerConnection)e.browser="chrome",e.version=Zt(t.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(l.RTCPeerConnection&&t.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Zt(t.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=l.RTCRtpTransceiver&&"currentDirection"in l.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Ar(l){return Object.prototype.toString.call(l)==="[object Object]"}function Or(l){return Ar(l)?Object.keys(l).reduce(function(e,t){const n=Ar(l[t]),r=n?Or(l[t]):l[t],i=n&&!Object.keys(r).length;return r===void 0||i?e:Object.assign(e,{[t]:r})},{}):l}function Ln(l,e,t){!e||t.has(e.id)||(t.set(e.id,e),Object.keys(e).forEach(n=>{n.endsWith("Id")?Ln(l,l.get(e[n]),t):n.endsWith("Ids")&&e[n].forEach(r=>{Ln(l,l.get(r),t)})}))}function Dr(l,e,t){const n=t?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const i=[];return l.forEach(a=>{a.type==="track"&&a.trackIdentifier===e.id&&i.push(a)}),i.forEach(a=>{l.forEach(u=>{u.type===n&&u.trackId===a.id&&Ln(l,u,r)})}),r}const Lr=Mr;function Br(l,e){const t=l&&l.navigator;if(!t.mediaDevices)return;const n=function(u){if(typeof u!="object"||u.mandatory||u.optional)return u;const d={};return Object.keys(u).forEach(p=>{if(p==="require"||p==="advanced"||p==="mediaSource")return;const c=typeof u[p]=="object"?u[p]:{ideal:u[p]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const m=function(o,s){return o?o+s.charAt(0).toUpperCase()+s.slice(1):s==="deviceId"?"sourceId":s};if(c.ideal!==void 0){d.optional=d.optional||[];let o={};typeof c.ideal=="number"?(o[m("min",p)]=c.ideal,d.optional.push(o),o={},o[m("max",p)]=c.ideal,d.optional.push(o)):(o[m("",p)]=c.ideal,d.optional.push(o))}c.exact!==void 0&&typeof c.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[m("",p)]=c.exact):["min","max"].forEach(o=>{c[o]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[m(o,p)]=c[o])})}),u.advanced&&(d.optional=(d.optional||[]).concat(u.advanced)),d},r=function(u,d){if(e.version>=61)return d(u);if(u=JSON.parse(JSON.stringify(u)),u&&typeof u.audio=="object"){const p=function(c,m,o){m in c&&!(o in c)&&(c[o]=c[m],delete c[m])};u=JSON.parse(JSON.stringify(u)),p(u.audio,"autoGainControl","googAutoGainControl"),p(u.audio,"noiseSuppression","googNoiseSuppression"),u.audio=n(u.audio)}if(u&&typeof u.video=="object"){let p=u.video.facingMode;p=p&&(typeof p=="object"?p:{ideal:p});const c=e.version<66;if(p&&(p.exact==="user"||p.exact==="environment"||p.ideal==="user"||p.ideal==="environment")&&!(t.mediaDevices.getSupportedConstraints&&t.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete u.video.facingMode;let m;if(p.exact==="environment"||p.ideal==="environment"?m=["back","rear"]:(p.exact==="user"||p.ideal==="user")&&(m=["front"]),m)return t.mediaDevices.enumerateDevices().then(o=>{o=o.filter(h=>h.kind==="videoinput");let s=o.find(h=>m.some(f=>h.label.toLowerCase().includes(f)));return!s&&o.length&&m.includes("back")&&(s=o[o.length-1]),s&&(u.video.deviceId=p.exact?{exact:s.deviceId}:{ideal:s.deviceId}),u.video=n(u.video),Lr("chrome: "+JSON.stringify(u)),d(u)})}u.video=n(u.video)}return Lr("chrome: "+JSON.stringify(u)),d(u)},i=function(u){return e.version>=64?u:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[u.name]||u.name,message:u.message,constraint:u.constraint||u.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(u,d,p){r(u,c=>{t.webkitGetUserMedia(c,d,m=>{p&&p(i(m))})})};if(t.getUserMedia=a.bind(t),t.mediaDevices.getUserMedia){const u=t.mediaDevices.getUserMedia.bind(t.mediaDevices);t.mediaDevices.getUserMedia=function(d){return r(d,p=>u(p).then(c=>{if(p.audio&&!c.getAudioTracks().length||p.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(i(c))))}}}function Ir(l){l.MediaStream=l.MediaStream||l.webkitMediaStream}function Rr(l){if(typeof l=="object"&&l.RTCPeerConnection&&!("ontrack"in l.RTCPeerConnection.prototype)){Object.defineProperty(l.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(t){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=t)},enumerable:!0,configurable:!0});const e=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let r;l.RTCPeerConnection.prototype.getReceivers?r=this.getReceivers().find(a=>a.track&&a.track.id===n.track.id):r={track:n.track};const i=new Event("track");i.track=n.track,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)}),t.stream.getTracks().forEach(n=>{let r;l.RTCPeerConnection.prototype.getReceivers?r=this.getReceivers().find(a=>a.track&&a.track.id===n.id):r={track:n};const i=new Event("track");i.track=n,i.receiver=r,i.transceiver={receiver:r},i.streams=[t.stream],this.dispatchEvent(i)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else ot(l,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function jr(l){if(typeof l=="object"&&l.RTCPeerConnection&&!("getSenders"in l.RTCPeerConnection.prototype)&&"createDTMFSender"in l.RTCPeerConnection.prototype){const e=function(r,i){return{track:i,get dtmf(){return this._dtmf===void 0&&(i.kind==="audio"?this._dtmf=r.createDTMFSender(i):this._dtmf=null),this._dtmf},_pc:r}};if(!l.RTCPeerConnection.prototype.getSenders){l.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=l.RTCPeerConnection.prototype.addTrack;l.RTCPeerConnection.prototype.addTrack=function(a,u){let d=r.apply(this,arguments);return d||(d=e(this,a),this._senders.push(d)),d};const i=l.RTCPeerConnection.prototype.removeTrack;l.RTCPeerConnection.prototype.removeTrack=function(a){i.apply(this,arguments);const u=this._senders.indexOf(a);u!==-1&&this._senders.splice(u,1)}}const t=l.RTCPeerConnection.prototype.addStream;l.RTCPeerConnection.prototype.addStream=function(r){this._senders=this._senders||[],t.apply(this,[r]),r.getTracks().forEach(i=>{this._senders.push(e(this,i))})};const n=l.RTCPeerConnection.prototype.removeStream;l.RTCPeerConnection.prototype.removeStream=function(r){this._senders=this._senders||[],n.apply(this,[r]),r.getTracks().forEach(i=>{const a=this._senders.find(u=>u.track===i);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof l=="object"&&l.RTCPeerConnection&&"getSenders"in l.RTCPeerConnection.prototype&&"createDTMFSender"in l.RTCPeerConnection.prototype&&l.RTCRtpSender&&!("dtmf"in l.RTCRtpSender.prototype)){const e=l.RTCPeerConnection.prototype.getSenders;l.RTCPeerConnection.prototype.getSenders=function(){const t=e.apply(this,[]);return t.forEach(n=>n._pc=this),t},Object.defineProperty(l.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function zr(l){if(!(typeof l=="object"&&l.RTCPeerConnection&&l.RTCRtpSender&&l.RTCRtpReceiver))return;if(!("getStats"in l.RTCRtpSender.prototype)){const t=l.RTCPeerConnection.prototype.getSenders;t&&(l.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r});const n=l.RTCPeerConnection.prototype.addTrack;n&&(l.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),l.RTCRtpSender.prototype.getStats=function(){const r=this;return this._pc.getStats().then(i=>Dr(i,r.track,!0))}}if(!("getStats"in l.RTCRtpReceiver.prototype)){const t=l.RTCPeerConnection.prototype.getReceivers;t&&(l.RTCPeerConnection.prototype.getReceivers=function(){const n=t.apply(this,[]);return n.forEach(r=>r._pc=this),n}),ot(l,"track",n=>(n.receiver._pc=n.srcElement,n)),l.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(r=>Dr(r,n.track,!1))}}if(!("getStats"in l.RTCRtpSender.prototype&&"getStats"in l.RTCRtpReceiver.prototype))return;const e=l.RTCPeerConnection.prototype.getStats;l.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof l.MediaStreamTrack){const t=arguments[0];let n,r,i;return this.getSenders().forEach(a=>{a.track===t&&(n?i=!0:n=a)}),this.getReceivers().forEach(a=>(a.track===t&&(r?i=!0:r=a),a.track===t)),i||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Ur(l){l.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(i=>this._shimmedLocalStreams[i][0])};const e=l.RTCPeerConnection.prototype.addTrack;l.RTCPeerConnection.prototype.addTrack=function(i,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(u)===-1&&this._shimmedLocalStreams[a.id].push(u):this._shimmedLocalStreams[a.id]=[a,u],u};const t=l.RTCPeerConnection.prototype.addStream;l.RTCPeerConnection.prototype.addStream=function(i){this._shimmedLocalStreams=this._shimmedLocalStreams||{},i.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();t.apply(this,arguments);const u=this.getSenders().filter(d=>a.indexOf(d)===-1);this._shimmedLocalStreams[i.id]=[i].concat(u)};const n=l.RTCPeerConnection.prototype.removeStream;l.RTCPeerConnection.prototype.removeStream=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[i.id],n.apply(this,arguments)};const r=l.RTCPeerConnection.prototype.removeTrack;l.RTCPeerConnection.prototype.removeTrack=function(i){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},i&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const u=this._shimmedLocalStreams[a].indexOf(i);u!==-1&&this._shimmedLocalStreams[a].splice(u,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),r.apply(this,arguments)}}function Nr(l,e){if(!l.RTCPeerConnection)return;if(l.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Ur(l);const t=l.RTCPeerConnection.prototype.getLocalStreams;l.RTCPeerConnection.prototype.getLocalStreams=function(){const p=t.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(c=>this._reverseStreams[c.id])};const n=l.RTCPeerConnection.prototype.addStream;l.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(c=>{if(this.getSenders().find(m=>m.track===c))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const c=new l.MediaStream(p.getTracks());this._streams[p.id]=c,this._reverseStreams[c.id]=p,p=c}n.apply(this,[p])};const r=l.RTCPeerConnection.prototype.removeStream;l.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},l.RTCPeerConnection.prototype.addTrack=function(p,c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const m=[].slice.call(arguments,1);if(m.length!==1||!m[0].getTracks().find(s=>s===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(s=>s.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const o=this._streams[c.id];if(o)o.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const s=new l.MediaStream([p]);this._streams[c.id]=s,this._reverseStreams[s.id]=c,this.addStream(s)}return this.getSenders().find(s=>s.track===p)};function i(p,c){let m=c.sdp;return Object.keys(p._reverseStreams||[]).forEach(o=>{const s=p._reverseStreams[o],h=p._streams[s.id];m=m.replace(new RegExp(h.id,"g"),s.id)}),new RTCSessionDescription({type:c.type,sdp:m})}function a(p,c){let m=c.sdp;return Object.keys(p._reverseStreams||[]).forEach(o=>{const s=p._reverseStreams[o],h=p._streams[s.id];m=m.replace(new RegExp(s.id,"g"),h.id)}),new RTCSessionDescription({type:c.type,sdp:m})}["createOffer","createAnswer"].forEach(function(p){const c=l.RTCPeerConnection.prototype[p],m={[p](){const o=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[s=>{const h=i(this,s);o[0].apply(null,[h])},s=>{o[1]&&o[1].apply(null,s)},arguments[2]]):c.apply(this,arguments).then(s=>i(this,s))}};l.RTCPeerConnection.prototype[p]=m[p]});const u=l.RTCPeerConnection.prototype.setLocalDescription;l.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?u.apply(this,arguments):(arguments[0]=a(this,arguments[0]),u.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(l.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(l.RTCPeerConnection.prototype,"localDescription",{get(){const p=d.get.apply(this);return p.type===""?p:i(this,p)}}),l.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(p._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let c;Object.keys(this._streams).forEach(m=>{this._streams[m].getTracks().find(o=>p.track===o)&&(c=this._streams[m])}),c&&(c.getTracks().length===1?this.removeStream(this._reverseStreams[c.id]):c.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Bn(l,e){!l.RTCPeerConnection&&l.webkitRTCPeerConnection&&(l.RTCPeerConnection=l.webkitRTCPeerConnection),l.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(t){const n=l.RTCPeerConnection.prototype[t],r={[t](){return arguments[0]=new(t==="addIceCandidate"?l.RTCIceCandidate:l.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};l.RTCPeerConnection.prototype[t]=r[t]})}function Fr(l,e){ot(l,"negotiationneeded",t=>{const n=t.target;if(!((e.version<72||n.getConfiguration&&n.getConfiguration().sdpSemantics==="plan-b")&&n.signalingState!=="stable"))return t})}const qr=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Fr,shimAddTrackRemoveTrack:Nr,shimAddTrackRemoveTrackWithNative:Ur,shimGetSendersWithDtmf:jr,shimGetUserMedia:Br,shimMediaStream:Ir,shimOnTrack:Rr,shimPeerConnection:Bn,shimSenderReceiverGetStats:zr},Symbol.toStringTag,{value:"Module"}));function Hr(l,e){const t=l&&l.navigator,n=l&&l.MediaStreamTrack;if(t.getUserMedia=function(r,i,a){Dn("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),t.mediaDevices.getUserMedia(r).then(i,a)},!(e.version>55&&"autoGainControl"in t.mediaDevices.getSupportedConstraints())){const r=function(a,u,d){u in a&&!(d in a)&&(a[d]=a[u],delete a[u])},i=t.mediaDevices.getUserMedia.bind(t.mediaDevices);if(t.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),r(a.audio,"autoGainControl","mozAutoGainControl"),r(a.audio,"noiseSuppression","mozNoiseSuppression")),i(a)},n&&n.prototype.getSettings){const a=n.prototype.getSettings;n.prototype.getSettings=function(){const u=a.apply(this,arguments);return r(u,"mozAutoGainControl","autoGainControl"),r(u,"mozNoiseSuppression","noiseSuppression"),u}}if(n&&n.prototype.applyConstraints){const a=n.prototype.applyConstraints;n.prototype.applyConstraints=function(u){return this.kind==="audio"&&typeof u=="object"&&(u=JSON.parse(JSON.stringify(u)),r(u,"autoGainControl","mozAutoGainControl"),r(u,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[u])}}}}function bc(l,e){l.navigator.mediaDevices&&"getDisplayMedia"in l.navigator.mediaDevices||l.navigator.mediaDevices&&(l.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return t.video===!0?t.video={mediaSource:e}:t.video.mediaSource=e,l.navigator.mediaDevices.getUserMedia(t)})}function Vr(l){typeof l=="object"&&l.RTCTrackEvent&&"receiver"in l.RTCTrackEvent.prototype&&!("transceiver"in l.RTCTrackEvent.prototype)&&Object.defineProperty(l.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function In(l,e){if(typeof l!="object"||!(l.RTCPeerConnection||l.mozRTCPeerConnection))return;!l.RTCPeerConnection&&l.mozRTCPeerConnection&&(l.RTCPeerConnection=l.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const i=l.RTCPeerConnection.prototype[r],a={[r](){return arguments[0]=new(r==="addIceCandidate"?l.RTCIceCandidate:l.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};l.RTCPeerConnection.prototype[r]=a[r]});const t={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},n=l.RTCPeerConnection.prototype.getStats;l.RTCPeerConnection.prototype.getStats=function(){const[r,i,a]=arguments;return n.apply(this,[r||null]).then(u=>{if(e.version<53&&!i)try{u.forEach(d=>{d.type=t[d.type]||d.type})}catch(d){if(d.name!=="TypeError")throw d;u.forEach((p,c)=>{u.set(c,Object.assign({},p,{type:t[p.type]||p.type}))})}return u}).then(i,a)}}function Gr(l){if(!(typeof l=="object"&&l.RTCPeerConnection&&l.RTCRtpSender)||l.RTCRtpSender&&"getStats"in l.RTCRtpSender.prototype)return;const e=l.RTCPeerConnection.prototype.getSenders;e&&(l.RTCPeerConnection.prototype.getSenders=function(){const n=e.apply(this,[]);return n.forEach(r=>r._pc=this),n});const t=l.RTCPeerConnection.prototype.addTrack;t&&(l.RTCPeerConnection.prototype.addTrack=function(){const n=t.apply(this,arguments);return n._pc=this,n}),l.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Wr(l){if(!(typeof l=="object"&&l.RTCPeerConnection&&l.RTCRtpSender)||l.RTCRtpSender&&"getStats"in l.RTCRtpReceiver.prototype)return;const e=l.RTCPeerConnection.prototype.getReceivers;e&&(l.RTCPeerConnection.prototype.getReceivers=function(){const t=e.apply(this,[]);return t.forEach(n=>n._pc=this),t}),ot(l,"track",t=>(t.receiver._pc=t.srcElement,t)),l.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Xr(l){!l.RTCPeerConnection||"removeStream"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.removeStream=function(e){Dn("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)})})}function Jr(l){l.DataChannel&&!l.RTCDataChannel&&(l.RTCDataChannel=l.DataChannel)}function Zr(l){if(!(typeof l=="object"&&l.RTCPeerConnection))return;const e=l.RTCPeerConnection.prototype.addTransceiver;e&&(l.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];const n=t.length>0;n&&t.forEach(i=>{if("rid"in i&&!/^[a-z0-9]{0,16}$/i.test(i.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in i&&!(parseFloat(i.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in i&&!(parseFloat(i.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const r=e.apply(this,arguments);if(n){const{sender:i}=r,a=i.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=t,i.sendEncodings=t,this.setParametersPromises.push(i.setParameters(a).then(()=>{delete i.sendEncodings}).catch(()=>{delete i.sendEncodings})))}return r})}function Yr(l){if(!(typeof l=="object"&&l.RTCRtpSender))return;const e=l.RTCRtpSender.prototype.getParameters;e&&(l.RTCRtpSender.prototype.getParameters=function(){const t=e.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function Kr(l){if(!(typeof l=="object"&&l.RTCPeerConnection))return;const e=l.RTCPeerConnection.prototype.createOffer;l.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function $r(l){if(!(typeof l=="object"&&l.RTCPeerConnection))return;const e=l.RTCPeerConnection.prototype.createAnswer;l.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Qr=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Zr,shimCreateAnswer:$r,shimCreateOffer:Kr,shimGetDisplayMedia:bc,shimGetParameters:Yr,shimGetUserMedia:Hr,shimOnTrack:Vr,shimPeerConnection:In,shimRTCDataChannel:Jr,shimReceiverGetStats:Wr,shimRemoveStream:Xr,shimSenderGetStats:Gr},Symbol.toStringTag,{value:"Module"}));function es(l){if(!(typeof l!="object"||!l.RTCPeerConnection)){if("getLocalStreams"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in l.RTCPeerConnection.prototype)){const e=l.RTCPeerConnection.prototype.addTrack;l.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(n=>e.call(this,n,t)),t.getVideoTracks().forEach(n=>e.call(this,n,t))},l.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach(r=>{this._localStreams?this._localStreams.includes(r)||this._localStreams.push(r):this._localStreams=[r]}),e.apply(this,arguments)}}"removeStream"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(t===-1)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach(r=>{n.includes(r.track)&&this.removeTrack(r)})})}}function ts(l){if(!(typeof l!="object"||!l.RTCPeerConnection)&&("getRemoteStreams"in l.RTCPeerConnection.prototype||(l.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in l.RTCPeerConnection.prototype))){Object.defineProperty(l.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(t){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=t),this.addEventListener("track",this._onaddstreampoly=n=>{n.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const i=new Event("addstream");i.stream=r,this.dispatchEvent(i)})})}});const e=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(r=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(r)>=0)return;t._remoteStreams.push(r);const i=new Event("addstream");i.stream=r,t.dispatchEvent(i)})}),e.apply(t,arguments)}}}function ns(l){if(typeof l!="object"||!l.RTCPeerConnection)return;const e=l.RTCPeerConnection.prototype,t=e.createOffer,n=e.createAnswer,r=e.setLocalDescription,i=e.setRemoteDescription,a=e.addIceCandidate;e.createOffer=function(d,p){const c=arguments.length>=2?arguments[2]:arguments[0],m=t.apply(this,[c]);return p?(m.then(d,p),Promise.resolve()):m},e.createAnswer=function(d,p){const c=arguments.length>=2?arguments[2]:arguments[0],m=n.apply(this,[c]);return p?(m.then(d,p),Promise.resolve()):m};let u=function(d,p,c){const m=r.apply(this,[d]);return c?(m.then(p,c),Promise.resolve()):m};e.setLocalDescription=u,u=function(d,p,c){const m=i.apply(this,[d]);return c?(m.then(p,c),Promise.resolve()):m},e.setRemoteDescription=u,u=function(d,p,c){const m=a.apply(this,[d]);return c?(m.then(p,c),Promise.resolve()):m},e.addIceCandidate=u}function is(l){const e=l&&l.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const t=e.mediaDevices,n=t.getUserMedia.bind(t);e.mediaDevices.getUserMedia=r=>n(rs(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(t,n,r){e.mediaDevices.getUserMedia(t).then(n,r)}.bind(e))}function rs(l){return l&&l.video!==void 0?Object.assign({},l,{video:Or(l.video)}):l}function ss(l){if(!l.RTCPeerConnection)return;const e=l.RTCPeerConnection;l.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const r=[];for(let i=0;i<t.iceServers.length;i++){let a=t.iceServers[i];a.urls===void 0&&a.url?(Dn("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,r.push(a)):r.push(t.iceServers[i])}t.iceServers=r}return new e(t,n)},l.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(l.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function os(l){typeof l=="object"&&l.RTCTrackEvent&&"receiver"in l.RTCTrackEvent.prototype&&!("transceiver"in l.RTCTrackEvent.prototype)&&Object.defineProperty(l.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function as(l){const e=l.RTCPeerConnection.prototype.createOffer;l.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const n=this.getTransceivers().find(i=>i.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):t.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio",{direction:"recvonly"}),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const r=this.getTransceivers().find(i=>i.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):t.offerToReceiveVideo===!0&&!r&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function ls(l){typeof l!="object"||l.AudioContext||(l.AudioContext=l.webkitAudioContext)}const cs=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:ls,shimCallbacksAPI:ns,shimConstraints:rs,shimCreateOfferLegacy:as,shimGetUserMedia:is,shimLocalStreamsAPI:es,shimRTCIceServerUrls:ss,shimRemoteStreamsAPI:ts,shimTrackEventTransceiver:os},Symbol.toStringTag,{value:"Module"}));var Rn={exports:{}},If=Rn.exports,us;function wc(){return us||(us=1,function(l){"use strict";const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(t){return t.trim().split(`
`).map(n=>n.trim())},e.splitSections=function(t){return t.split(`
m=`).map((n,r)=>(r>0?"m="+n:n).trim()+`\r
`)},e.getDescription=function(t){const n=e.splitSections(t);return n&&n[0]},e.getMediaSections=function(t){const n=e.splitSections(t);return n.shift(),n},e.matchPrefix=function(t,n){return e.splitLines(t).filter(r=>r.indexOf(n)===0)},e.parseCandidate=function(t){let n;t.indexOf("a=candidate:")===0?n=t.substring(12).split(" "):n=t.substring(10).split(" ");const r={foundation:n[0],component:{1:"rtp",2:"rtcp"}[n[1]]||n[1],protocol:n[2].toLowerCase(),priority:parseInt(n[3],10),ip:n[4],address:n[4],port:parseInt(n[5],10),type:n[7]};for(let i=8;i<n.length;i+=2)switch(n[i]){case"raddr":r.relatedAddress=n[i+1];break;case"rport":r.relatedPort=parseInt(n[i+1],10);break;case"tcptype":r.tcpType=n[i+1];break;case"ufrag":r.ufrag=n[i+1],r.usernameFragment=n[i+1];break;default:r[n[i]]===void 0&&(r[n[i]]=n[i+1]);break}return r},e.writeCandidate=function(t){const n=[];n.push(t.foundation);const r=t.component;r==="rtp"?n.push(1):r==="rtcp"?n.push(2):n.push(r),n.push(t.protocol.toUpperCase()),n.push(t.priority),n.push(t.address||t.ip),n.push(t.port);const i=t.type;return n.push("typ"),n.push(i),i!=="host"&&t.relatedAddress&&t.relatedPort&&(n.push("raddr"),n.push(t.relatedAddress),n.push("rport"),n.push(t.relatedPort)),t.tcpType&&t.protocol.toLowerCase()==="tcp"&&(n.push("tcptype"),n.push(t.tcpType)),(t.usernameFragment||t.ufrag)&&(n.push("ufrag"),n.push(t.usernameFragment||t.ufrag)),"candidate:"+n.join(" ")},e.parseIceOptions=function(t){return t.substring(14).split(" ")},e.parseRtpMap=function(t){let n=t.substring(9).split(" ");const r={payloadType:parseInt(n.shift(),10)};return n=n[0].split("/"),r.name=n[0],r.clockRate=parseInt(n[1],10),r.channels=n.length===3?parseInt(n[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(t){let n=t.payloadType;t.preferredPayloadType!==void 0&&(n=t.preferredPayloadType);const r=t.channels||t.numChannels||1;return"a=rtpmap:"+n+" "+t.name+"/"+t.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(t){const n=t.substring(9).split(" ");return{id:parseInt(n[0],10),direction:n[0].indexOf("/")>0?n[0].split("/")[1]:"sendrecv",uri:n[1],attributes:n.slice(2).join(" ")}},e.writeExtmap=function(t){return"a=extmap:"+(t.id||t.preferredId)+(t.direction&&t.direction!=="sendrecv"?"/"+t.direction:"")+" "+t.uri+(t.attributes?" "+t.attributes:"")+`\r
`},e.parseFmtp=function(t){const n={};let r;const i=t.substring(t.indexOf(" ")+1).split(";");for(let a=0;a<i.length;a++)r=i[a].trim().split("="),n[r[0].trim()]=r[1];return n},e.writeFmtp=function(t){let n="",r=t.payloadType;if(t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType),t.parameters&&Object.keys(t.parameters).length){const i=[];Object.keys(t.parameters).forEach(a=>{t.parameters[a]!==void 0?i.push(a+"="+t.parameters[a]):i.push(a)}),n+="a=fmtp:"+r+" "+i.join(";")+`\r
`}return n},e.parseRtcpFb=function(t){const n=t.substring(t.indexOf(" ")+1).split(" ");return{type:n.shift(),parameter:n.join(" ")}},e.writeRtcpFb=function(t){let n="",r=t.payloadType;return t.preferredPayloadType!==void 0&&(r=t.preferredPayloadType),t.rtcpFeedback&&t.rtcpFeedback.length&&t.rtcpFeedback.forEach(i=>{n+="a=rtcp-fb:"+r+" "+i.type+(i.parameter&&i.parameter.length?" "+i.parameter:"")+`\r
`}),n},e.parseSsrcMedia=function(t){const n=t.indexOf(" "),r={ssrc:parseInt(t.substring(7,n),10)},i=t.indexOf(":",n);return i>-1?(r.attribute=t.substring(n+1,i),r.value=t.substring(i+1)):r.attribute=t.substring(n+1),r},e.parseSsrcGroup=function(t){const n=t.substring(13).split(" ");return{semantics:n.shift(),ssrcs:n.map(r=>parseInt(r,10))}},e.getMid=function(t){const n=e.matchPrefix(t,"a=mid:")[0];if(n)return n.substring(6)},e.parseFingerprint=function(t){const n=t.substring(14).split(" ");return{algorithm:n[0].toLowerCase(),value:n[1].toUpperCase()}},e.getDtlsParameters=function(t,n){return{role:"auto",fingerprints:e.matchPrefix(t+n,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(t,n){let r="a=setup:"+n+`\r
`;return t.fingerprints.forEach(i=>{r+="a=fingerprint:"+i.algorithm+" "+i.value+`\r
`}),r},e.parseCryptoLine=function(t){const n=t.substring(9).split(" ");return{tag:parseInt(n[0],10),cryptoSuite:n[1],keyParams:n[2],sessionParams:n.slice(3)}},e.writeCryptoLine=function(t){return"a=crypto:"+t.tag+" "+t.cryptoSuite+" "+(typeof t.keyParams=="object"?e.writeCryptoKeyParams(t.keyParams):t.keyParams)+(t.sessionParams?" "+t.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(t){if(t.indexOf("inline:")!==0)return null;const n=t.substring(7).split("|");return{keyMethod:"inline",keySalt:n[0],lifeTime:n[1],mkiValue:n[2]?n[2].split(":")[0]:void 0,mkiLength:n[2]?n[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(t){return t.keyMethod+":"+t.keySalt+(t.lifeTime?"|"+t.lifeTime:"")+(t.mkiValue&&t.mkiLength?"|"+t.mkiValue+":"+t.mkiLength:"")},e.getCryptoParameters=function(t,n){return e.matchPrefix(t+n,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(t,n){const r=e.matchPrefix(t+n,"a=ice-ufrag:")[0],i=e.matchPrefix(t+n,"a=ice-pwd:")[0];return r&&i?{usernameFragment:r.substring(12),password:i.substring(10)}:null},e.writeIceParameters=function(t){let n="a=ice-ufrag:"+t.usernameFragment+`\r
a=ice-pwd:`+t.password+`\r
`;return t.iceLite&&(n+=`a=ice-lite\r
`),n},e.parseRtpParameters=function(t){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},r=e.splitLines(t)[0].split(" ");n.profile=r[2];for(let a=3;a<r.length;a++){const u=r[a],d=e.matchPrefix(t,"a=rtpmap:"+u+" ")[0];if(d){const p=e.parseRtpMap(d),c=e.matchPrefix(t,"a=fmtp:"+u+" ");switch(p.parameters=c.length?e.parseFmtp(c[0]):{},p.rtcpFeedback=e.matchPrefix(t,"a=rtcp-fb:"+u+" ").map(e.parseRtcpFb),n.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(p.name.toUpperCase());break;default:break}}}e.matchPrefix(t,"a=extmap:").forEach(a=>{n.headerExtensions.push(e.parseExtmap(a))});const i=e.matchPrefix(t,"a=rtcp-fb:* ").map(e.parseRtcpFb);return n.codecs.forEach(a=>{i.forEach(u=>{a.rtcpFeedback.find(d=>d.type===u.type&&d.parameter===u.parameter)||a.rtcpFeedback.push(u)})}),n},e.writeRtpDescription=function(t,n){let r="";r+="m="+t+" ",r+=n.codecs.length>0?"9":"0",r+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=n.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,n.codecs.forEach(a=>{r+=e.writeRtpMap(a),r+=e.writeFmtp(a),r+=e.writeRtcpFb(a)});let i=0;return n.codecs.forEach(a=>{a.maxptime>i&&(i=a.maxptime)}),i>0&&(r+="a=maxptime:"+i+`\r
`),n.headerExtensions&&n.headerExtensions.forEach(a=>{r+=e.writeExtmap(a)}),r},e.parseRtpEncodingParameters=function(t){const n=[],r=e.parseRtpParameters(t),i=r.fecMechanisms.indexOf("RED")!==-1,a=r.fecMechanisms.indexOf("ULPFEC")!==-1,u=e.matchPrefix(t,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="cname"),d=u.length>0&&u[0].ssrc;let p;const c=e.matchPrefix(t,"a=ssrc-group:FID").map(o=>o.substring(17).split(" ").map(s=>parseInt(s,10)));c.length>0&&c[0].length>1&&c[0][0]===d&&(p=c[0][1]),r.codecs.forEach(o=>{if(o.name.toUpperCase()==="RTX"&&o.parameters.apt){let s={ssrc:d,codecPayloadType:parseInt(o.parameters.apt,10)};d&&p&&(s.rtx={ssrc:p}),n.push(s),i&&(s=JSON.parse(JSON.stringify(s)),s.fec={ssrc:d,mechanism:a?"red+ulpfec":"red"},n.push(s))}}),n.length===0&&d&&n.push({ssrc:d});let m=e.matchPrefix(t,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-50*40*8:m=void 0,n.forEach(o=>{o.maxBitrate=m})),n},e.parseRtcpParameters=function(t){const n={},r=e.matchPrefix(t,"a=ssrc:").map(u=>e.parseSsrcMedia(u)).filter(u=>u.attribute==="cname")[0];r&&(n.cname=r.value,n.ssrc=r.ssrc);const i=e.matchPrefix(t,"a=rtcp-rsize");n.reducedSize=i.length>0,n.compound=i.length===0;const a=e.matchPrefix(t,"a=rtcp-mux");return n.mux=a.length>0,n},e.writeRtcpParameters=function(t){let n="";return t.reducedSize&&(n+=`a=rtcp-rsize\r
`),t.mux&&(n+=`a=rtcp-mux\r
`),t.ssrc!==void 0&&t.cname&&(n+="a=ssrc:"+t.ssrc+" cname:"+t.cname+`\r
`),n},e.parseMsid=function(t){let n;const r=e.matchPrefix(t,"a=msid:");if(r.length===1)return n=r[0].substring(7).split(" "),{stream:n[0],track:n[1]};const i=e.matchPrefix(t,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(i.length>0)return n=i[0].value.split(" "),{stream:n[0],track:n[1]}},e.parseSctpDescription=function(t){const n=e.parseMLine(t),r=e.matchPrefix(t,"a=max-message-size:");let i;r.length>0&&(i=parseInt(r[0].substring(19),10)),isNaN(i)&&(i=65536);const a=e.matchPrefix(t,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:n.fmt,maxMessageSize:i};const u=e.matchPrefix(t,"a=sctpmap:");if(u.length>0){const d=u[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:i}}},e.writeSctpDescription=function(t,n){let r=[];return t.protocol!=="DTLS/SCTP"?r=["m="+t.kind+" 9 "+t.protocol+" "+n.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+n.port+`\r
`]:r=["m="+t.kind+" 9 "+t.protocol+" "+n.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+n.port+" "+n.protocol+` 65535\r
`],n.maxMessageSize!==void 0&&r.push("a=max-message-size:"+n.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(t,n,r){let i;const a=n!==void 0?n:2;return t?i=t:i=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+i+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(t,n){const r=e.splitLines(t);for(let i=0;i<r.length;i++)switch(r[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[i].substring(2);default:}return n?e.getDirection(n):"sendrecv"},e.getKind=function(t){return e.splitLines(t)[0].split(" ")[0].substring(2)},e.isRejected=function(t){return t.split(" ",2)[1]==="0"},e.parseMLine=function(t){const n=e.splitLines(t)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},e.parseOLine=function(t){const n=e.matchPrefix(t,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},e.isValidSDP=function(t){if(typeof t!="string"||t.length===0)return!1;const n=e.splitLines(t);for(let r=0;r<n.length;r++)if(n[r].length<2||n[r].charAt(1)!=="=")return!1;return!0},l.exports=e}(Rn)),Rn.exports}var ps=wc();const yt=lr(ps),xc=Xa({__proto__:null,default:yt},[ps]);function Yt(l){if(!l.RTCIceCandidate||l.RTCIceCandidate&&"foundation"in l.RTCIceCandidate.prototype)return;const e=l.RTCIceCandidate;l.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const n=new e(t),r=yt.parseCandidate(t.candidate);for(const i in r)i in n||Object.defineProperty(n,i,{value:r[i]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new e(t)},l.RTCIceCandidate.prototype=e.prototype,ot(l,"icecandidate",t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new l.RTCIceCandidate(t.candidate),writable:"false"}),t))}function jn(l){!l.RTCIceCandidate||l.RTCIceCandidate&&"relayProtocol"in l.RTCIceCandidate.prototype||ot(l,"icecandidate",e=>{if(e.candidate){const t=yt.parseCandidate(e.candidate.candidate);t.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e})}function Kt(l,e){if(!l.RTCPeerConnection)return;"sctp"in l.RTCPeerConnection.prototype||Object.defineProperty(l.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const t=function(u){if(!u||!u.sdp)return!1;const d=yt.splitSections(u.sdp);return d.shift(),d.some(p=>{const c=yt.parseMLine(p);return c&&c.kind==="application"&&c.protocol.indexOf("SCTP")!==-1})},n=function(u){const d=u.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const p=parseInt(d[1],10);return p!==p?-1:p},r=function(u){let d=65536;return e.browser==="firefox"&&(e.version<57?u===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},i=function(u,d){let p=65536;e.browser==="firefox"&&e.version===57&&(p=65535);const c=yt.matchPrefix(u.sdp,"a=max-message-size:");return c.length>0?p=parseInt(c[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(p=2147483637),p},a=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(t(arguments[0])){const u=n(arguments[0]),d=r(u),p=i(arguments[0],u);let c;d===0&&p===0?c=Number.POSITIVE_INFINITY:d===0||p===0?c=Math.max(d,p):c=Math.min(d,p);const m={};Object.defineProperty(m,"maxMessageSize",{get(){return c}}),this._sctp=m}return a.apply(this,arguments)}}function $t(l){if(!(l.RTCPeerConnection&&"createDataChannel"in l.RTCPeerConnection.prototype))return;function e(n,r){const i=n.send;n.send=function(){const a=arguments[0],u=a.length||a.size||a.byteLength;if(n.readyState==="open"&&r.sctp&&u>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return i.apply(n,arguments)}}const t=l.RTCPeerConnection.prototype.createDataChannel;l.RTCPeerConnection.prototype.createDataChannel=function(){const n=t.apply(this,arguments);return e(n,this),n},ot(l,"datachannel",n=>(e(n.channel,n.target),n))}function zn(l){if(!l.RTCPeerConnection||"connectionState"in l.RTCPeerConnection.prototype)return;const e=l.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(t){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),t&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=t)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(t=>{const n=e[t];e[t]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const i=r.target;if(i._lastConnectionState!==i.connectionState){i._lastConnectionState=i.connectionState;const a=new Event("connectionstatechange",r);i.dispatchEvent(a)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}})}function Un(l,e){if(!l.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const t=l.RTCPeerConnection.prototype.setRemoteDescription;l.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const r=n.sdp.split(`
`).filter(i=>i.trim()!=="a=extmap-allow-mixed").join(`
`);l.RTCSessionDescription&&n instanceof l.RTCSessionDescription?arguments[0]=new l.RTCSessionDescription({type:n.type,sdp:r}):n.sdp=r}return t.apply(this,arguments)}}function Qt(l,e){if(!(l.RTCPeerConnection&&l.RTCPeerConnection.prototype))return;const t=l.RTCPeerConnection.prototype.addIceCandidate;!t||t.length===0||(l.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():t.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function en(l,e){if(!(l.RTCPeerConnection&&l.RTCPeerConnection.prototype))return;const t=l.RTCPeerConnection.prototype.setLocalDescription;!t||t.length===0||(l.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return t.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer";break}return n.sdp||n.type!=="offer"&&n.type!=="answer"?t.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(r=>t.apply(this,[r]))})}const Sc=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Un,shimAddIceCandidateNullOrEmpty:Qt,shimConnectionState:zn,shimMaxMessageSize:Kt,shimParameterlessSetLocalDescription:en,shimRTCIceCandidate:Yt,shimRTCIceCandidateRelayProtocol:jn,shimSendThrowTypeError:$t},Symbol.toStringTag,{value:"Module"}));function Cc({window:l}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const t=Mr,n=yc(l),r={browserDetails:n,commonShim:Sc,extractVersion:Zt,disableLog:gc,disableWarnings:vc,sdp:xc};switch(n.browser){case"chrome":if(!qr||!Bn||!e.shimChrome)return t("Chrome shim is not included in this adapter release."),r;if(n.version===null)return t("Chrome shim can not determine version, not shimming."),r;t("adapter.js shimming chrome."),r.browserShim=qr,Qt(l,n),en(l,n),Br(l,n),Ir(l,n),Bn(l,n),Rr(l,n),Nr(l,n),jr(l,n),zr(l,n),Fr(l,n),Yt(l,n),jn(l,n),zn(l,n),Kt(l,n),$t(l,n),Un(l,n);break;case"firefox":if(!Qr||!In||!e.shimFirefox)return t("Firefox shim is not included in this adapter release."),r;t("adapter.js shimming firefox."),r.browserShim=Qr,Qt(l,n),en(l,n),Hr(l,n),In(l,n),Vr(l,n),Xr(l,n),Gr(l,n),Wr(l,n),Jr(l,n),Zr(l,n),Yr(l,n),Kr(l,n),$r(l,n),Yt(l,n),zn(l,n),Kt(l,n),$t(l,n);break;case"safari":if(!cs||!e.shimSafari)return t("Safari shim is not included in this adapter release."),r;t("adapter.js shimming safari."),r.browserShim=cs,Qt(l,n),en(l,n),ss(l,n),as(l,n),ns(l,n),es(l,n),ts(l,n),os(l,n),is(l,n),ls(l,n),Yt(l,n),jn(l,n),Kt(l,n),$t(l,n),Un(l,n);break;default:t("Unsupported browser!");break}return r}const ds=Cc({window:typeof window>"u"?void 0:window});var at=4294967295;function kc(l,e,t){var n=t/4294967296,r=t;l.setUint32(e,n),l.setUint32(e+4,r)}function hs(l,e,t){var n=Math.floor(t/4294967296),r=t;l.setUint32(e,n),l.setUint32(e+4,r)}function fs(l,e){var t=l.getInt32(e),n=l.getUint32(e+4);return t*4294967296+n}function Ec(l,e){var t=l.getUint32(e),n=l.getUint32(e+4);return t*4294967296+n}var Nn={},Fn,qn,Hn,tn=(typeof process>"u"||((Fn=process==null?void 0:Nn)===null||Fn===void 0?void 0:Fn.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function ms(l){for(var e=l.length,t=0,n=0;n<e;){var r=l.charCodeAt(n++);if(r&4294967168)if(!(r&4294965248))t+=2;else{if(r>=55296&&r<=56319&&n<e){var i=l.charCodeAt(n);(i&64512)===56320&&(++n,r=((r&1023)<<10)+(i&1023)+65536)}r&4294901760?t+=4:t+=3}else{t++;continue}}return t}function Tc(l,e,t){for(var n=l.length,r=t,i=0;i<n;){var a=l.charCodeAt(i++);if(a&4294967168)if(!(a&4294965248))e[r++]=a>>6&31|192;else{if(a>=55296&&a<=56319&&i<n){var u=l.charCodeAt(i);(u&64512)===56320&&(++i,a=((a&1023)<<10)+(u&1023)+65536)}a&4294901760?(e[r++]=a>>18&7|240,e[r++]=a>>12&63|128,e[r++]=a>>6&63|128):(e[r++]=a>>12&15|224,e[r++]=a>>6&63|128)}else{e[r++]=a;continue}e[r++]=a&63|128}}var Vn=tn?new TextEncoder:void 0,_c=tn?typeof process<"u"&&((qn=process==null?void 0:Nn)===null||qn===void 0?void 0:qn.TEXT_ENCODING)!=="force"?200:0:at;function Pc(l,e,t){e.set(Vn.encode(l),t)}function Mc(l,e,t){Vn.encodeInto(l,e.subarray(t))}var Ac=Vn?.encodeInto?Mc:Pc,Oc=4096;function gs(l,e,t){for(var n=e,r=n+t,i=[],a="";n<r;){var u=l[n++];if(!(u&128))i.push(u);else if((u&224)===192){var d=l[n++]&63;i.push((u&31)<<6|d)}else if((u&240)===224){var d=l[n++]&63,p=l[n++]&63;i.push((u&31)<<12|d<<6|p)}else if((u&248)===240){var d=l[n++]&63,p=l[n++]&63,c=l[n++]&63,m=(u&7)<<18|d<<12|p<<6|c;m>65535&&(m-=65536,i.push(m>>>10&1023|55296),m=56320|m&1023),i.push(m)}else i.push(u);i.length>=Oc&&(a+=String.fromCharCode.apply(String,i),i.length=0)}return i.length>0&&(a+=String.fromCharCode.apply(String,i)),a}var Dc=tn?new TextDecoder:null,Lc=tn?typeof process<"u"&&((Hn=process==null?void 0:Nn)===null||Hn===void 0?void 0:Hn.TEXT_DECODER)!=="force"?200:0:at;function Bc(l,e,t){var n=l.subarray(e,e+t);return Dc.decode(n)}var nn=function(){function l(e,t){this.type=e,this.data=t}return l}(),Ic=function(){var l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},l(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");l(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),We=function(l){Ic(e,l);function e(t){var n=l.call(this,t)||this,r=Object.create(e.prototype);return Object.setPrototypeOf(n,r),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:e.name}),n}return e}(Error),Rc=-1,jc=4294967296-1,zc=17179869184-1;function Uc(l){var e=l.sec,t=l.nsec;if(e>=0&&t>=0&&e<=zc)if(t===0&&e<=jc){var n=new Uint8Array(4),r=new DataView(n.buffer);return r.setUint32(0,e),n}else{var i=e/4294967296,a=e&4294967295,n=new Uint8Array(8),r=new DataView(n.buffer);return r.setUint32(0,t<<2|i&3),r.setUint32(4,a),n}else{var n=new Uint8Array(12),r=new DataView(n.buffer);return r.setUint32(0,t),hs(r,4,e),n}}function Nc(l){var e=l.getTime(),t=Math.floor(e/1e3),n=(e-t*1e3)*1e6,r=Math.floor(n/1e9);return{sec:t+r,nsec:n-r*1e9}}function Fc(l){if(l instanceof Date){var e=Nc(l);return Uc(e)}else return null}function qc(l){var e=new DataView(l.buffer,l.byteOffset,l.byteLength);switch(l.byteLength){case 4:{var t=e.getUint32(0),n=0;return{sec:t,nsec:n}}case 8:{var r=e.getUint32(0),i=e.getUint32(4),t=(r&3)*4294967296+i,n=r>>>2;return{sec:t,nsec:n}}case 12:{var t=fs(e,4),n=e.getUint32(0);return{sec:t,nsec:n}}default:throw new We("Unrecognized data size for timestamp (expected 4, 8, or 12): ".concat(l.length))}}function Hc(l){var e=qc(l);return new Date(e.sec*1e3+e.nsec/1e6)}var Vc={type:Rc,encode:Fc,decode:Hc},vs=function(){function l(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Vc)}return l.prototype.register=function(e){var t=e.type,n=e.encode,r=e.decode;if(t>=0)this.encoders[t]=n,this.decoders[t]=r;else{var i=1+t;this.builtInEncoders[i]=n,this.builtInDecoders[i]=r}},l.prototype.tryToEncode=function(e,t){for(var n=0;n<this.builtInEncoders.length;n++){var r=this.builtInEncoders[n];if(r!=null){var i=r(e,t);if(i!=null){var a=-1-n;return new nn(a,i)}}}for(var n=0;n<this.encoders.length;n++){var r=this.encoders[n];if(r!=null){var i=r(e,t);if(i!=null){var a=n;return new nn(a,i)}}}return e instanceof nn?e:null},l.prototype.decode=function(e,t,n){var r=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return r?r(e,t,n):new nn(t,e)},l.defaultCodec=new l,l}();function rn(l){return l instanceof Uint8Array?l:ArrayBuffer.isView(l)?new Uint8Array(l.buffer,l.byteOffset,l.byteLength):l instanceof ArrayBuffer?new Uint8Array(l):Uint8Array.from(l)}function Gc(l){if(l instanceof ArrayBuffer)return new DataView(l);var e=rn(l);return new DataView(e.buffer,e.byteOffset,e.byteLength)}var Wc=100,Xc=2048,Rf=function(){function l(e,t,n,r,i,a,u,d){e===void 0&&(e=vs.defaultCodec),t===void 0&&(t=void 0),n===void 0&&(n=Wc),r===void 0&&(r=Xc),i===void 0&&(i=!1),a===void 0&&(a=!1),u===void 0&&(u=!1),d===void 0&&(d=!1),this.extensionCodec=e,this.context=t,this.maxDepth=n,this.initialBufferSize=r,this.sortKeys=i,this.forceFloat32=a,this.ignoreUndefined=u,this.forceIntegerToFloat=d,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}return l.prototype.reinitializeState=function(){this.pos=0},l.prototype.encodeSharedRef=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)},l.prototype.encode=function(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)},l.prototype.doEncode=function(e,t){if(t>this.maxDepth)throw new Error("Too deep objects in depth ".concat(t));e==null?this.encodeNil():typeof e=="boolean"?this.encodeBoolean(e):typeof e=="number"?this.encodeNumber(e):typeof e=="string"?this.encodeString(e):this.encodeObject(e,t)},l.prototype.ensureBufferSizeToWrite=function(e){var t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(t*2)},l.prototype.resizeBuffer=function(e){var t=new ArrayBuffer(e),n=new Uint8Array(t),r=new DataView(t);n.set(this.bytes),this.view=r,this.bytes=n},l.prototype.encodeNil=function(){this.writeU8(192)},l.prototype.encodeBoolean=function(e){e===!1?this.writeU8(194):this.writeU8(195)},l.prototype.encodeNumber=function(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))},l.prototype.writeStringHeader=function(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw new Error("Too long string: ".concat(e," bytes in UTF-8"))},l.prototype.encodeString=function(e){var t=5,n=e.length;if(n>_c){var r=ms(e);this.ensureBufferSizeToWrite(t+r),this.writeStringHeader(r),Ac(e,this.bytes,this.pos),this.pos+=r}else{var r=ms(e);this.ensureBufferSizeToWrite(t+r),this.writeStringHeader(r),Tc(e,this.bytes,this.pos),this.pos+=r}},l.prototype.encodeObject=function(e,t){var n=this.extensionCodec.tryToEncode(e,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if(typeof e=="object")this.encodeMap(e,t);else throw new Error("Unrecognized object: ".concat(Object.prototype.toString.apply(e)))},l.prototype.encodeBinary=function(e){var t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error("Too large binary: ".concat(t));var n=rn(e);this.writeU8a(n)},l.prototype.encodeArray=function(e,t){var n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error("Too large array: ".concat(n));for(var r=0,i=e;r<i.length;r++){var a=i[r];this.doEncode(a,t+1)}},l.prototype.countWithoutUndefined=function(e,t){for(var n=0,r=0,i=t;r<i.length;r++){var a=i[r];e[a]!==void 0&&n++}return n},l.prototype.encodeMap=function(e,t){var n=Object.keys(e);this.sortKeys&&n.sort();var r=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(r<16)this.writeU8(128+r);else if(r<65536)this.writeU8(222),this.writeU16(r);else if(r<4294967296)this.writeU8(223),this.writeU32(r);else throw new Error("Too large map object: ".concat(r));for(var i=0,a=n;i<a.length;i++){var u=a[i],d=e[u];this.ignoreUndefined&&d===void 0||(this.encodeString(u),this.doEncode(d,t+1))}},l.prototype.encodeExtension=function(e){var t=e.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error("Too large extension object: ".concat(t));this.writeI8(e.type),this.writeU8a(e.data)},l.prototype.writeU8=function(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++},l.prototype.writeU8a=function(e){var t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t},l.prototype.writeI8=function(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++},l.prototype.writeU16=function(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2},l.prototype.writeI16=function(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2},l.prototype.writeU32=function(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4},l.prototype.writeI32=function(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4},l.prototype.writeF32=function(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4},l.prototype.writeF64=function(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8},l.prototype.writeU64=function(e){this.ensureBufferSizeToWrite(8),kc(this.view,this.pos,e),this.pos+=8},l.prototype.writeI64=function(e){this.ensureBufferSizeToWrite(8),hs(this.view,this.pos,e),this.pos+=8},l}();function Gn(l){return"".concat(l<0?"-":"","0x").concat(Math.abs(l).toString(16).padStart(2,"0"))}var Jc=16,Zc=16,Yc=function(){function l(e,t){e===void 0&&(e=Jc),t===void 0&&(t=Zc),this.maxKeyLength=e,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(var n=0;n<this.maxKeyLength;n++)this.caches.push([])}return l.prototype.canBeCached=function(e){return e>0&&e<=this.maxKeyLength},l.prototype.find=function(e,t,n){var r=this.caches[n-1];e:for(var i=0,a=r;i<a.length;i++){for(var u=a[i],d=u.bytes,p=0;p<n;p++)if(d[p]!==e[t+p])continue e;return u.str}return null},l.prototype.store=function(e,t){var n=this.caches[e.length-1],r={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=r:n.push(r)},l.prototype.decode=function(e,t,n){var r=this.find(e,t,n);if(r!=null)return this.hit++,r;this.miss++;var i=gs(e,t,n),a=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(a,i),i},l}(),Kc=function(l,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(c){try{p(n.next(c))}catch(m){a(m)}}function d(c){try{p(n.throw(c))}catch(m){a(m)}}function p(c){c.done?i(c.value):r(c.value).then(u,d)}p((n=n.apply(l,e||[])).next())})},Wn=function(l,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(p){return function(c){return d([p,c])}}function d(p){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(i=p[0]&2?r.return:p[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,p[1])).done)return i;switch(r=0,i&&(p=[p[0]&2,i.value]),p[0]){case 0:case 1:i=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,r=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!i||p[1]>i[0]&&p[1]<i[3])){t.label=p[1];break}if(p[0]===6&&t.label<i[1]){t.label=i[1],i=p;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(p);break}i[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(l,t)}catch(c){p=[6,c],r=0}finally{n=i=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},ys=function(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=l[Symbol.asyncIterator],t;return e?e.call(l):(l=typeof __values=="function"?__values(l):l[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=l[i]&&function(a){return new Promise(function(u,d){a=l[i](a),r(u,d,a.done,a.value)})}}function r(i,a,u,d){Promise.resolve(d).then(function(p){i({value:p,done:u})},a)}},bt=function(l){return this instanceof bt?(this.v=l,this):new bt(l)},$c=function(l,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(l,e||[]),r,i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(o){n[o]&&(r[o]=function(s){return new Promise(function(h,f){i.push([o,s,h,f])>1||u(o,s)})})}function u(o,s){try{d(n[o](s))}catch(h){m(i[0][3],h)}}function d(o){o.value instanceof bt?Promise.resolve(o.value.v).then(p,c):m(i[0][2],o)}function p(o){u("next",o)}function c(o){u("throw",o)}function m(o,s){o(s),i.shift(),i.length&&u(i[0][0],i[0][1])}},Qc=function(l){var e=typeof l;return e==="string"||e==="number"},At=-1,Xn=new DataView(new ArrayBuffer(0)),eu=new Uint8Array(Xn.buffer),Jn=function(){try{Xn.getInt8(0)}catch(l){return l.constructor}throw new Error("never reached")}(),bs=new Jn("Insufficient data"),tu=new Yc,jf=function(){function l(e,t,n,r,i,a,u,d){e===void 0&&(e=vs.defaultCodec),t===void 0&&(t=void 0),n===void 0&&(n=at),r===void 0&&(r=at),i===void 0&&(i=at),a===void 0&&(a=at),u===void 0&&(u=at),d===void 0&&(d=tu),this.extensionCodec=e,this.context=t,this.maxStrLength=n,this.maxBinLength=r,this.maxArrayLength=i,this.maxMapLength=a,this.maxExtLength=u,this.keyDecoder=d,this.totalPos=0,this.pos=0,this.view=Xn,this.bytes=eu,this.headByte=At,this.stack=[]}return l.prototype.reinitializeState=function(){this.totalPos=0,this.headByte=At,this.stack.length=0},l.prototype.setBuffer=function(e){this.bytes=rn(e),this.view=Gc(this.bytes),this.pos=0},l.prototype.appendBuffer=function(e){if(this.headByte===At&&!this.hasRemaining(1))this.setBuffer(e);else{var t=this.bytes.subarray(this.pos),n=rn(e),r=new Uint8Array(t.length+n.length);r.set(t),r.set(n,t.length),this.setBuffer(r)}},l.prototype.hasRemaining=function(e){return this.view.byteLength-this.pos>=e},l.prototype.createExtraByteError=function(e){var t=this,n=t.view,r=t.pos;return new RangeError("Extra ".concat(n.byteLength-r," of ").concat(n.byteLength," byte(s) found at buffer[").concat(e,"]"))},l.prototype.decode=function(e){this.reinitializeState(),this.setBuffer(e);var t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t},l.prototype.decodeMulti=function(e){return Wn(this,function(t){switch(t.label){case 0:this.reinitializeState(),this.setBuffer(e),t.label=1;case 1:return this.hasRemaining(1)?[4,this.doDecodeSync()]:[3,3];case 2:return t.sent(),[3,1];case 3:return[2]}})},l.prototype.decodeAsync=function(e){var t,n,r,i;return Kc(this,void 0,void 0,function(){var a,u,d,p,c,m,o,s;return Wn(this,function(h){switch(h.label){case 0:a=!1,h.label=1;case 1:h.trys.push([1,6,7,12]),t=ys(e),h.label=2;case 2:return[4,t.next()];case 3:if(n=h.sent(),!!n.done)return[3,5];if(d=n.value,a)throw this.createExtraByteError(this.totalPos);this.appendBuffer(d);try{u=this.doDecodeSync(),a=!0}catch(f){if(!(f instanceof Jn))throw f}this.totalPos+=this.pos,h.label=4;case 4:return[3,2];case 5:return[3,12];case 6:return p=h.sent(),r={error:p},[3,12];case 7:return h.trys.push([7,,10,11]),n&&!n.done&&(i=t.return)?[4,i.call(t)]:[3,9];case 8:h.sent(),h.label=9;case 9:return[3,11];case 10:if(r)throw r.error;return[7];case 11:return[7];case 12:if(a){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return[2,u]}throw c=this,m=c.headByte,o=c.pos,s=c.totalPos,new RangeError("Insufficient data in parsing ".concat(Gn(m)," at ").concat(s," (").concat(o," in the current buffer)"))}})})},l.prototype.decodeArrayStream=function(e){return this.decodeMultiAsync(e,!0)},l.prototype.decodeStream=function(e){return this.decodeMultiAsync(e,!1)},l.prototype.decodeMultiAsync=function(e,t){return $c(this,arguments,function(){var n,r,i,a,u,d,p,c,m;return Wn(this,function(o){switch(o.label){case 0:n=t,r=-1,o.label=1;case 1:o.trys.push([1,13,14,19]),i=ys(e),o.label=2;case 2:return[4,bt(i.next())];case 3:if(a=o.sent(),!!a.done)return[3,12];if(u=a.value,t&&r===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(u),n&&(r=this.readArraySize(),n=!1,this.complete()),o.label=4;case 4:o.trys.push([4,9,,10]),o.label=5;case 5:return[4,bt(this.doDecodeSync())];case 6:return[4,o.sent()];case 7:return o.sent(),--r===0?[3,8]:[3,5];case 8:return[3,10];case 9:if(d=o.sent(),!(d instanceof Jn))throw d;return[3,10];case 10:this.totalPos+=this.pos,o.label=11;case 11:return[3,2];case 12:return[3,19];case 13:return p=o.sent(),c={error:p},[3,19];case 14:return o.trys.push([14,,17,18]),a&&!a.done&&(m=i.return)?[4,bt(m.call(i))]:[3,16];case 15:o.sent(),o.label=16;case 16:return[3,18];case 17:if(c)throw c.error;return[7];case 18:return[7];case 19:return[2]}})})},l.prototype.doDecodeSync=function(){e:for(;;){var e=this.readHeadByte(),t=void 0;if(e>=224)t=e-256;else if(e<192)if(e<128)t=e;else if(e<144){var n=e-128;if(n!==0){this.pushMapState(n),this.complete();continue e}else t={}}else if(e<160){var n=e-144;if(n!==0){this.pushArrayState(n),this.complete();continue e}else t=[]}else{var r=e-160;t=this.decodeUtf8String(r,0)}else if(e===192)t=null;else if(e===194)t=!1;else if(e===195)t=!0;else if(e===202)t=this.readF32();else if(e===203)t=this.readF64();else if(e===204)t=this.readU8();else if(e===205)t=this.readU16();else if(e===206)t=this.readU32();else if(e===207)t=this.readU64();else if(e===208)t=this.readI8();else if(e===209)t=this.readI16();else if(e===210)t=this.readI32();else if(e===211)t=this.readI64();else if(e===217){var r=this.lookU8();t=this.decodeUtf8String(r,1)}else if(e===218){var r=this.lookU16();t=this.decodeUtf8String(r,2)}else if(e===219){var r=this.lookU32();t=this.decodeUtf8String(r,4)}else if(e===220){var n=this.readU16();if(n!==0){this.pushArrayState(n),this.complete();continue e}else t=[]}else if(e===221){var n=this.readU32();if(n!==0){this.pushArrayState(n),this.complete();continue e}else t=[]}else if(e===222){var n=this.readU16();if(n!==0){this.pushMapState(n),this.complete();continue e}else t={}}else if(e===223){var n=this.readU32();if(n!==0){this.pushMapState(n),this.complete();continue e}else t={}}else if(e===196){var n=this.lookU8();t=this.decodeBinary(n,1)}else if(e===197){var n=this.lookU16();t=this.decodeBinary(n,2)}else if(e===198){var n=this.lookU32();t=this.decodeBinary(n,4)}else if(e===212)t=this.decodeExtension(1,0);else if(e===213)t=this.decodeExtension(2,0);else if(e===214)t=this.decodeExtension(4,0);else if(e===215)t=this.decodeExtension(8,0);else if(e===216)t=this.decodeExtension(16,0);else if(e===199){var n=this.lookU8();t=this.decodeExtension(n,1)}else if(e===200){var n=this.lookU16();t=this.decodeExtension(n,2)}else if(e===201){var n=this.lookU32();t=this.decodeExtension(n,4)}else throw new We("Unrecognized type byte: ".concat(Gn(e)));this.complete();for(var i=this.stack;i.length>0;){var a=i[i.length-1];if(a.type===0)if(a.array[a.position]=t,a.position++,a.position===a.size)i.pop(),t=a.array;else continue e;else if(a.type===1){if(!Qc(t))throw new We("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new We("The key __proto__ is not allowed");a.key=t,a.type=2;continue e}else if(a.map[a.key]=t,a.readCount++,a.readCount===a.size)i.pop(),t=a.map;else{a.key=null,a.type=1;continue e}}return t}},l.prototype.readHeadByte=function(){return this.headByte===At&&(this.headByte=this.readU8()),this.headByte},l.prototype.complete=function(){this.headByte=At},l.prototype.readArraySize=function(){var e=this.readHeadByte();switch(e){case 220:return this.readU16();case 221:return this.readU32();default:{if(e<160)return e-144;throw new We("Unrecognized array type byte: ".concat(Gn(e)))}}},l.prototype.pushMapState=function(e){if(e>this.maxMapLength)throw new We("Max length exceeded: map length (".concat(e,") > maxMapLengthLength (").concat(this.maxMapLength,")"));this.stack.push({type:1,size:e,key:null,readCount:0,map:{}})},l.prototype.pushArrayState=function(e){if(e>this.maxArrayLength)throw new We("Max length exceeded: array length (".concat(e,") > maxArrayLength (").concat(this.maxArrayLength,")"));this.stack.push({type:0,size:e,array:new Array(e),position:0})},l.prototype.decodeUtf8String=function(e,t){var n;if(e>this.maxStrLength)throw new We("Max length exceeded: UTF-8 byte length (".concat(e,") > maxStrLength (").concat(this.maxStrLength,")"));if(this.bytes.byteLength<this.pos+t+e)throw bs;var r=this.pos+t,i;return this.stateIsMapKey()&&!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(e)?i=this.keyDecoder.decode(this.bytes,r,e):e>Lc?i=Bc(this.bytes,r,e):i=gs(this.bytes,r,e),this.pos+=t+e,i},l.prototype.stateIsMapKey=function(){if(this.stack.length>0){var e=this.stack[this.stack.length-1];return e.type===1}return!1},l.prototype.decodeBinary=function(e,t){if(e>this.maxBinLength)throw new We("Max length exceeded: bin length (".concat(e,") > maxBinLength (").concat(this.maxBinLength,")"));if(!this.hasRemaining(e+t))throw bs;var n=this.pos+t,r=this.bytes.subarray(n,n+e);return this.pos+=t+e,r},l.prototype.decodeExtension=function(e,t){if(e>this.maxExtLength)throw new We("Max length exceeded: ext length (".concat(e,") > maxExtLength (").concat(this.maxExtLength,")"));var n=this.view.getInt8(this.pos+t),r=this.decodeBinary(e,t+1);return this.extensionCodec.decode(r,n,this.context)},l.prototype.lookU8=function(){return this.view.getUint8(this.pos)},l.prototype.lookU16=function(){return this.view.getUint16(this.pos)},l.prototype.lookU32=function(){return this.view.getUint32(this.pos)},l.prototype.readU8=function(){var e=this.view.getUint8(this.pos);return this.pos++,e},l.prototype.readI8=function(){var e=this.view.getInt8(this.pos);return this.pos++,e},l.prototype.readU16=function(){var e=this.view.getUint16(this.pos);return this.pos+=2,e},l.prototype.readI16=function(){var e=this.view.getInt16(this.pos);return this.pos+=2,e},l.prototype.readU32=function(){var e=this.view.getUint32(this.pos);return this.pos+=4,e},l.prototype.readI32=function(){var e=this.view.getInt32(this.pos);return this.pos+=4,e},l.prototype.readU64=function(){var e=Ec(this.view,this.pos);return this.pos+=8,e},l.prototype.readI64=function(){var e=fs(this.view,this.pos);return this.pos+=8,e},l.prototype.readF32=function(){var e=this.view.getFloat32(this.pos);return this.pos+=4,e},l.prototype.readF64=function(){var e=this.view.getFloat64(this.pos);return this.pos+=8,e},l}();function lt(l,e,t,n){Object.defineProperty(l,e,{get:t,set:n,enumerable:!0,configurable:!0})}class ws{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const t=[],n=e.byteLength,r=Math.ceil(n/this.chunkedMTU);let i=0,a=0;for(;a<n;){const u=Math.min(n,a+this.chunkedMTU),d=e.slice(a,u),p={__peerData:this._dataCount,n:i,data:d,total:r};t.push(p),a=u,i++}return this._dataCount++,t}}}function nu(l){let e=0;for(const r of l)e+=r.byteLength;const t=new Uint8Array(e);let n=0;for(const r of l)t.set(r,n),n+=r.byteLength;return t}const Zn=ds.default||ds,Ot=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const l=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(l)?l==="chrome"?e>=this.minChromeVersion:l==="firefox"?e>=this.minFirefoxVersion:l==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Zn.browserDetails.browser}getVersion(){return Zn.browserDetails.version||0}isUnifiedPlanSupported(){const l=this.getBrowser(),e=Zn.browserDetails.version||0;if(l==="chrome"&&e<this.minChromeVersion)return!1;if(l==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let t,n=!1;try{t=new RTCPeerConnection,t.addTransceiver("audio"),n=!0}catch{}finally{t&&t.close()}return n}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},iu=l=>!l||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(l),xs=()=>Math.random().toString(36).slice(2),Ss={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class ru extends ws{noop(){}blobToArrayBuffer(e,t){const n=new FileReader;return n.onload=function(r){r.target&&t(r.target.result)},n.readAsArrayBuffer(e),n}binaryStringToArrayBuffer(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n)&255;return t.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Ss,this.browser=Ot.getBrowser(),this.browserVersion=Ot.getVersion(),this.pack=Tr,this.unpack=Er,this.supports=function(){const t={browser:Ot.isBrowserSupported(),webRTC:Ot.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!t.webRTC)return t;let n;try{n=new RTCPeerConnection(Ss),t.audioVideo=!0;let r;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),t.data=!0,t.reliable=!!r.ordered;try{r.binaryType="blob",t.binaryBlob=!Ot.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return t}(),this.validateId=iu,this.randomToken=xs}}const Me=new ru,su="PeerJS: ";var Cs;(function(l){l[l.Disabled=0]="Disabled",l[l.Errors=1]="Errors",l[l.Warnings=2]="Warnings",l[l.All=3]="All"})(Cs||(Cs={}));class ou{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...t){const n=[su,...t];for(const r in n)n[r]instanceof Error&&(n[r]="("+n[r].name+") "+n[r].message);e>=3?console.log(...n):e>=2?console.warn("WARNING",...n):e>=1&&console.error("ERROR",...n)}constructor(){this._logLevel=0}}var V=new ou,Yn={},au=Object.prototype.hasOwnProperty,Ee="~";function Dt(){}Object.create&&(Dt.prototype=Object.create(null),new Dt().__proto__||(Ee=!1));function lu(l,e,t){this.fn=l,this.context=e,this.once=t||!1}function ks(l,e,t,n,r){if(typeof t!="function")throw new TypeError("The listener must be a function");var i=new lu(t,n||l,r),a=Ee?Ee+e:e;return l._events[a]?l._events[a].fn?l._events[a]=[l._events[a],i]:l._events[a].push(i):(l._events[a]=i,l._eventsCount++),l}function sn(l,e){--l._eventsCount===0?l._events=new Dt:delete l._events[e]}function Ce(){this._events=new Dt,this._eventsCount=0}Ce.prototype.eventNames=function(){var l=[],e,t;if(this._eventsCount===0)return l;for(t in e=this._events)au.call(e,t)&&l.push(Ee?t.slice(1):t);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(e)):l},Ce.prototype.listeners=function(l){var e=Ee?Ee+l:l,t=this._events[e];if(!t)return[];if(t.fn)return[t.fn];for(var n=0,r=t.length,i=new Array(r);n<r;n++)i[n]=t[n].fn;return i},Ce.prototype.listenerCount=function(l){var e=Ee?Ee+l:l,t=this._events[e];return t?t.fn?1:t.length:0},Ce.prototype.emit=function(l,e,t,n,r,i){var a=Ee?Ee+l:l;if(!this._events[a])return!1;var u=this._events[a],d=arguments.length,p,c;if(u.fn){switch(u.once&&this.removeListener(l,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,t),!0;case 4:return u.fn.call(u.context,e,t,n),!0;case 5:return u.fn.call(u.context,e,t,n,r),!0;case 6:return u.fn.call(u.context,e,t,n,r,i),!0}for(c=1,p=new Array(d-1);c<d;c++)p[c-1]=arguments[c];u.fn.apply(u.context,p)}else{var m=u.length,o;for(c=0;c<m;c++)switch(u[c].once&&this.removeListener(l,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,t);break;case 4:u[c].fn.call(u[c].context,e,t,n);break;default:if(!p)for(o=1,p=new Array(d-1);o<d;o++)p[o-1]=arguments[o];u[c].fn.apply(u[c].context,p)}}return!0},Ce.prototype.on=function(l,e,t){return ks(this,l,e,t,!1)},Ce.prototype.once=function(l,e,t){return ks(this,l,e,t,!0)},Ce.prototype.removeListener=function(l,e,t,n){var r=Ee?Ee+l:l;if(!this._events[r])return this;if(!e)return sn(this,r),this;var i=this._events[r];if(i.fn)i.fn===e&&(!n||i.once)&&(!t||i.context===t)&&sn(this,r);else{for(var a=0,u=[],d=i.length;a<d;a++)(i[a].fn!==e||n&&!i[a].once||t&&i[a].context!==t)&&u.push(i[a]);u.length?this._events[r]=u.length===1?u[0]:u:sn(this,r)}return this},Ce.prototype.removeAllListeners=function(l){var e;return l?(e=Ee?Ee+l:l,this._events[e]&&sn(this,e)):(this._events=new Dt,this._eventsCount=0),this},Ce.prototype.off=Ce.prototype.removeListener,Ce.prototype.addListener=Ce.prototype.on,Ce.prefixed=Ee,Ce.EventEmitter=Ce,Yn=Ce;var ct={};lt(ct,"ConnectionType",()=>Xe),lt(ct,"PeerErrorType",()=>pe),lt(ct,"BaseConnectionErrorType",()=>Lt),lt(ct,"DataConnectionErrorType",()=>Bt),lt(ct,"SerializationType",()=>wt),lt(ct,"SocketEventType",()=>Je),lt(ct,"ServerMessageType",()=>ge);var Xe;(function(l){l.Data="data",l.Media="media"})(Xe||(Xe={}));var pe;(function(l){l.BrowserIncompatible="browser-incompatible",l.Disconnected="disconnected",l.InvalidID="invalid-id",l.InvalidKey="invalid-key",l.Network="network",l.PeerUnavailable="peer-unavailable",l.SslUnavailable="ssl-unavailable",l.ServerError="server-error",l.SocketError="socket-error",l.SocketClosed="socket-closed",l.UnavailableID="unavailable-id",l.WebRTC="webrtc"})(pe||(pe={}));var Lt;(function(l){l.NegotiationFailed="negotiation-failed",l.ConnectionClosed="connection-closed"})(Lt||(Lt={}));var Bt;(function(l){l.NotOpenYet="not-open-yet",l.MessageToBig="message-too-big"})(Bt||(Bt={}));var wt;(function(l){l.Binary="binary",l.BinaryUTF8="binary-utf8",l.JSON="json",l.None="raw"})(wt||(wt={}));var Je;(function(l){l.Message="message",l.Disconnected="disconnected",l.Error="error",l.Close="close"})(Je||(Je={}));var ge;(function(l){l.Heartbeat="HEARTBEAT",l.Candidate="CANDIDATE",l.Offer="OFFER",l.Answer="ANSWER",l.Open="OPEN",l.Error="ERROR",l.IdTaken="ID-TAKEN",l.InvalidKey="INVALID-KEY",l.Leave="LEAVE",l.Expire="EXPIRE"})(ge||(ge={}));var Kn={};Kn=JSON.parse('{"name":"peerjs","version":"1.5.4","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz St\xFCckler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","So\u0308ren Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","browser-minified-msgpack":"dist/serializer.msgpack.mjs","types":"dist/types.d.ts","engines":{"node":">= 14"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 80, safari >= 15"},"source":"lib/global.ts"},"browser-minified-msgpack":{"context":"browser","outputFormat":"esmodule","isLibrary":true,"optimize":true,"engines":{"browsers":"chrome >= 83, edge >= 83, firefox >= 102, safari >= 15"},"source":"lib/dataconnection/StreamConnection/MsgPack.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit && tsc -p e2e/tsconfig.json --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"jest","test:watch":"jest --watch","coverage":"jest --coverage --collectCoverageFrom=\\"./lib/**\\"","format":"prettier --write .","format:check":"prettier --check .","semantic-release":"semantic-release","e2e":"wdio run e2e/wdio.local.conf.ts","e2e:bstack":"wdio run e2e/wdio.bstack.conf.ts"},"devDependencies":{"@parcel/config-default":"^2.9.3","@parcel/packager-ts":"^2.9.3","@parcel/transformer-typescript-tsc":"^2.9.3","@parcel/transformer-typescript-types":"^2.9.3","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@swc/core":"^1.3.27","@swc/jest":"^0.2.24","@types/jasmine":"^4.3.4","@wdio/browserstack-service":"^8.11.2","@wdio/cli":"^8.11.2","@wdio/globals":"^8.11.2","@wdio/jasmine-framework":"^8.11.2","@wdio/local-runner":"^8.11.2","@wdio/spec-reporter":"^8.11.2","@wdio/types":"^8.10.4","http-server":"^14.1.1","jest":"^29.3.1","jest-environment-jsdom":"^29.3.1","mock-socket":"^9.0.0","parcel":"^2.9.3","prettier":"^3.0.0","semantic-release":"^21.0.0","ts-node":"^10.9.1","typescript":"^5.0.0","wdio-geckodriver-service":"^5.0.1"},"dependencies":{"@msgpack/msgpack":"^2.8.0","eventemitter3":"^4.0.7","peerjs-js-binarypack":"^2.1.0","webrtc-adapter":"^9.0.0"},"alias":{"process":false,"buffer":false}}');class cu extends Yn.EventEmitter{constructor(e,t,n,r,i,a=5e3){super(),this.pingInterval=a,this._disconnected=!0,this._messagesQueue=[];const u=e?"wss://":"ws://";this._baseUrl=u+t+":"+n+r+"peerjs?key="+i}start(e,t){this._id=e;const n=`${this._baseUrl}&id=${e}&token=${t}`;this._socket||!this._disconnected||(this._socket=new WebSocket(n+"&version="+Kn.version),this._disconnected=!1,this._socket.onmessage=r=>{let i;try{i=JSON.parse(r.data),V.log("Server message received:",i)}catch{V.log("Invalid server message",r.data);return}this.emit(Je.Message,i)},this._socket.onclose=r=>{this._disconnected||(V.log("Socket closed.",r),this._cleanup(),this._disconnected=!0,this.emit(Je.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),V.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){V.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:ge.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const t of e)this.send(t)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(Je.Error,"Invalid message");return}if(!this._wsOpen())return;const t=JSON.stringify(e);this._socket.send(t)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Es{constructor(e){this.connection=e}startConnection(e){const t=this._startPeerConnection();if(this.connection.peerConnection=t,this.connection.type===Xe.Media&&e._stream&&this._addTracksToConnection(e._stream,t),e.originator){const n=this.connection,r={ordered:!!e.reliable},i=t.createDataChannel(n.label,r);n._initializeDataChannel(i),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){V.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const t=this.connection.peer,n=this.connection.connectionId,r=this.connection.type,i=this.connection.provider;V.log("Listening for ICE candidates."),e.onicecandidate=a=>{!a.candidate||!a.candidate.candidate||(V.log(`Received ICE candidates for ${t}:`,a.candidate),i.socket.send({type:ge.Candidate,payload:{candidate:a.candidate,type:r,connectionId:n},dst:t}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":V.log("iceConnectionState is failed, closing connections to "+t),this.connection.emitError(Lt.NegotiationFailed,"Negotiation of connection to "+t+" failed."),this.connection.close();break;case"closed":V.log("iceConnectionState is closed, closing connections to "+t),this.connection.emitError(Lt.ConnectionClosed,"Connection to "+t+" closed."),this.connection.close();break;case"disconnected":V.log("iceConnectionState changed to disconnected on the connection with "+t);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},V.log("Listening for data channel"),e.ondatachannel=a=>{V.log("Received data channel");const u=a.channel;i.getConnection(t,n)._initializeDataChannel(u)},V.log("Listening for remote stream"),e.ontrack=a=>{V.log("Received remote stream");const u=a.streams[0],d=i.getConnection(t,n);if(d.type===Xe.Media){const p=d;this._addStreamToMediaConnection(u,p)}}}cleanup(){V.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const t=e.signalingState!=="closed";let n=!1;const r=this.connection.dataChannel;r&&(n=!!r.readyState&&r.readyState!=="closed"),(t||n)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const n=await e.createOffer(this.connection.options.constraints);V.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),V.log("Set localDescription:",n,`for:${this.connection.peer}`);let r={sdp:n,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===Xe.Data){const i=this.connection;r={...r,label:i.label,reliable:i.reliable,serialization:i.serialization}}t.socket.send({type:ge.Offer,payload:r,dst:this.connection.peer})}catch(r){r!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(t.emitError(pe.WebRTC,r),V.log("Failed to setLocalDescription, ",r))}}catch(n){t.emitError(pe.WebRTC,n),V.log("Failed to createOffer, ",n)}}async _makeAnswer(){const e=this.connection.peerConnection,t=this.connection.provider;try{const n=await e.createAnswer();V.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(n.sdp=this.connection.options.sdpTransform(n.sdp)||n.sdp);try{await e.setLocalDescription(n),V.log("Set localDescription:",n,`for:${this.connection.peer}`),t.socket.send({type:ge.Answer,payload:{sdp:n,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(r){t.emitError(pe.WebRTC,r),V.log("Failed to setLocalDescription, ",r)}}catch(n){t.emitError(pe.WebRTC,n),V.log("Failed to create answer, ",n)}}async handleSDP(e,t){t=new RTCSessionDescription(t);const n=this.connection.peerConnection,r=this.connection.provider;V.log("Setting remote description",t);const i=this;try{await n.setRemoteDescription(t),V.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await i._makeAnswer()}catch(a){r.emitError(pe.WebRTC,a),V.log("Failed to setRemoteDescription, ",a)}}async handleCandidate(e){V.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),V.log(`Added ICE candidate for:${this.connection.peer}`)}catch(t){this.connection.provider.emitError(pe.WebRTC,t),V.log("Failed to handleCandidate, ",t)}}_addTracksToConnection(e,t){if(V.log(`add tracks from stream ${e.id} to peer connection`),!t.addTrack)return V.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(n=>{t.addTrack(n,e)})}_addStreamToMediaConnection(e,t){V.log(`add stream ${e.id} to media connection ${t.connectionId}`),t.addStream(e)}}class Ts extends Yn.EventEmitter{emitError(e,t){V.error("Error:",t),this.emit("error",new uu(`${e}`,t))}}class uu extends Error{constructor(e,t){typeof t=="string"?super(t):(super(),Object.assign(this,t)),this.type=e}}class _s extends Ts{get open(){return this._open}constructor(e,t,n){super(),this.peer=e,this.provider=t,this.options=n,this._open=!1,this.metadata=n.metadata}}class vn extends _s{static#e=this.ID_PREFIX="mc_";get type(){return Xe.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,t,n){super(e,t,n),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||vn.ID_PREFIX+Me.randomToken(),this._negotiator=new Es(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{V.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{V.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){V.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const t=e.type,n=e.payload;switch(e.type){case ge.Answer:this._negotiator.handleSDP(t,n.sdp),this._open=!0;break;case ge.Candidate:this._negotiator.handleCandidate(n.candidate);break;default:V.warn(`Unrecognized message type:${t} from peer:${this.peer}`);break}}answer(e,t={}){if(this._localStream){V.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,t&&t.sdpTransform&&(this.options.sdpTransform=t.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const n=this.provider._getMessages(this.connectionId);for(const r of n)this.handleMessage(r);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}}class pu{constructor(e){this._options=e}_buildRequest(e){const t=this._options.secure?"https":"http",{host:n,port:r,path:i,key:a}=this._options,u=new URL(`${t}://${n}:${r}${i}${a}/${e}`);return u.searchParams.set("ts",`${Date.now()}${Math.random()}`),u.searchParams.set("version",Kn.version),fetch(u.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){V.error("Error retrieving ID",e);let t="";throw this._options.path==="/"&&this._options.host!==Me.CLOUD_HOST&&(t=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+t)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let t="";throw this._options.host===Me.CLOUD_HOST?t="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":t="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+t)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw V.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}class yn extends _s{static#e=this.ID_PREFIX="dc_";static#t=this.MAX_BUFFERED_AMOUNT=8388608;get type(){return Xe.Data}constructor(e,t,n){super(e,t,n),this.connectionId=this.options.connectionId||yn.ID_PREFIX+xs(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Es(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{V.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=t=>{V.log(`DC#${this.connectionId} dc onmessage:`,t.data)},this.dataChannel.onclose=()=>{V.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,t=!1){if(!this.open){this.emitError(Bt.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,t)}async handleMessage(e){const t=e.payload;switch(e.type){case ge.Answer:await this._negotiator.handleSDP(e.type,t.sdp);break;case ge.Candidate:await this._negotiator.handleCandidate(t.candidate);break;default:V.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}}class $n extends yn{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",t=>this._handleDataMessage(t))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>yn.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(t){return V.error(`DC#:${this.connectionId} Error when sending:`,t),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e?.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Qn extends $n{close(e){super.close(e),this._chunkedData={}}constructor(e,t,n){super(e,t,n),this.chunker=new ws,this.serialization=wt.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const t=Er(e),n=t.__peerData;if(n){if(n.type==="close"){this.close();return}this._handleChunk(t);return}this.emit("data",t)}_handleChunk(e){const t=e.__peerData,n=this._chunkedData[t]||{data:[],count:0,total:e.total};if(n.data[e.n]=new Uint8Array(e.data),n.count++,this._chunkedData[t]=n,n.total===n.count){delete this._chunkedData[t];const r=nu(n.data);this._handleDataMessage({data:r})}}_send(e,t){const n=Tr(e);if(n instanceof Promise)return this._send_blob(n);if(!t&&n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}async _send_blob(e){const t=await e;if(t.byteLength>this.chunker.chunkedMTU){this._sendChunks(t);return}this._bufferedSend(t)}_sendChunks(e){const t=this.chunker.chunk(e);V.log(`DC#${this.connectionId} Try to send ${t.length} chunks...`);for(const n of t)this.send(n,!0)}}class du extends $n{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,t){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=wt.None}}class hu extends $n{_handleDataMessage({data:e}){const t=this.parse(this.decoder.decode(e)),n=t.__peerData;if(n&&n.type==="close"){this.close();return}this.emit("data",t)}_send(e,t){const n=this.encoder.encode(this.stringify(e));if(n.byteLength>=Me.chunkedMTU){this.emitError(Bt.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(n)}constructor(...e){super(...e),this.serialization=wt.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}class Vi extends Ts{static#e=this.DEFAULT_KEY="peerjs";get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[t,n]of this._connections)e[t]=n;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,t){super(),this._serializers={raw:du,json:hu,binary:Qn,"binary-utf8":Qn,default:Qn},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let n;if(e&&e.constructor==Object?t=e:e&&(n=e.toString()),t={debug:0,host:Me.CLOUD_HOST,port:Me.CLOUD_PORT,path:"/",key:Vi.DEFAULT_KEY,token:Me.randomToken(),config:Me.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...t},this._options=t,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Me.CLOUD_HOST?this._options.secure=Me.isSecure():this._options.host==Me.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&V.setLogFunction(this._options.logFunction),V.logLevel=this._options.debug||0,this._api=new pu(t),this._socket=this._createServerConnection(),!Me.supports.audioVideo&&!Me.supports.data){this._delayedAbort(pe.BrowserIncompatible,"The current browser does not support WebRTC");return}if(n&&!Me.validateId(n)){this._delayedAbort(pe.InvalidID,`ID "${n}" is invalid`);return}n?this._initialize(n):this._api.retrieveId().then(r=>this._initialize(r)).catch(r=>this._abort(pe.ServerError,r))}_createServerConnection(){const e=new cu(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(Je.Message,t=>{this._handleMessage(t)}),e.on(Je.Error,t=>{this._abort(pe.SocketError,t)}),e.on(Je.Disconnected,()=>{this.disconnected||(this.emitError(pe.Network,"Lost connection to server."),this.disconnect())}),e.on(Je.Close,()=>{this.disconnected||this._abort(pe.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const t=e.type,n=e.payload,r=e.src;switch(t){case ge.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case ge.Error:this._abort(pe.ServerError,n.msg);break;case ge.IdTaken:this._abort(pe.UnavailableID,`ID "${this.id}" is taken`);break;case ge.InvalidKey:this._abort(pe.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case ge.Leave:V.log(`Received leave message from ${r}`),this._cleanupPeer(r),this._connections.delete(r);break;case ge.Expire:this.emitError(pe.PeerUnavailable,`Could not connect to peer ${r}`);break;case ge.Offer:{const i=n.connectionId;let a=this.getConnection(r,i);if(a&&(a.close(),V.warn(`Offer received for existing Connection ID:${i}`)),n.type===Xe.Media){const d=new vn(r,this,{connectionId:i,_payload:n,metadata:n.metadata});a=d,this._addConnection(r,a),this.emit("call",d)}else if(n.type===Xe.Data){const d=new this._serializers[n.serialization](r,this,{connectionId:i,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,reliable:n.reliable});a=d,this._addConnection(r,a),this.emit("connection",d)}else{V.warn(`Received malformed connection type:${n.type}`);return}const u=this._getMessages(i);for(const d of u)a.handleMessage(d);break}default:{if(!n){V.warn(`You received a malformed message from ${r} of type ${t}`);return}const i=n.connectionId,a=this.getConnection(r,i);a&&a.peerConnection?a.handleMessage(e):i?this._storeMessage(i,e):V.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,t){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(t)}_getMessages(e){const t=this._lostMessages.get(e);return t?(this._lostMessages.delete(e),t):[]}connect(e,t={}){if(t={serialization:"default",...t},this.disconnected){V.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(pe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const n=new this._serializers[t.serialization](e,this,t);return this._addConnection(e,n),n}call(e,t,n={}){if(this.disconnected){V.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(pe.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!t){V.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const r=new vn(e,this,{...n,_stream:t});return this._addConnection(e,r),r}_addConnection(e,t){V.log(`add connection ${t.type}:${t.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(t)}_removeConnection(e){const t=this._connections.get(e.peer);if(t){const n=t.indexOf(e);n!==-1&&t.splice(n,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,t){const n=this._connections.get(e);if(!n)return null;for(const r of n)if(r.connectionId===t)return r;return null}_delayedAbort(e,t){setTimeout(()=>{this._abort(e,t)},0)}_abort(e,t){V.error("Aborting!"),this.emitError(e,t),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(V.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const t=this._connections.get(e);if(t)for(const n of t)n.close()}disconnect(){if(this.disconnected)return;const e=this.id;V.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)V.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)V.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=t=>{}){this._api.listAllPeers().then(t=>e(t)).catch(t=>this._abort(pe.ServerError,t))}}class fu extends za{constructor(){super(),this.connections=new Map}open(e){e==null&&(e=Nt.generateUUID()),this.peer&&this.peer.destroy(),this.peer=new Vi(e),this.addPeerListeners(this.peer)}connect(e,t){var n=this.peer.connect(e,t);this.addConnectionListeners(n),this.dispatchEvent({type:"connection_start",connection:n}),this.connections.clear()}disconnect(){this.peer.disconnect()}destroy(){this.peer.destroy()}addPeerListeners(e){e.on("open",function(t){this.dispatchEvent({type:"peer_open",id:t})}.bind(this)),e.on("connection",function(t){this.addConnectionListeners(t),this.dispatchEvent({type:"peer_connection",connection:t})}.bind(this)),e.on("close",function(){this.connections.clear(),this.dispatchEvent({type:"peer_close",target:this})}.bind(this)),e.on("disconnected",function(){this.dispatchEvent({type:"peer_disconnected"})}.bind(this)),e.on("error",function(t){this.dispatchEvent({type:"peer_error",error:t})}.bind(this))}addConnectionListeners(e){e.on("open",function(){this.connections.set(e.peer,e),this.dispatchEvent({type:"connection_open",connection:e})}.bind(this)),e.on("close",function(){this.connections.delete(e.peer),this.dispatchEvent({type:"connection_close",connection:e})}.bind(this)),e.on("data",function(t){this.dispatchEvent({type:"connection_data",connection:e,data:t})}.bind(this)),e.on("error",function(t){this.dispatchEvent({type:"connection_error",connection:e,error:t})})}on(e,t){this.addEventListener(e,t)}off(e,t){this.removeEventListener(e,t)}isOnline(){return this.peer!=null&&this.peer.open==!0}}class mu{constructor(){this.window=window,this.document=document,this.BOX_SIZE=16,this.screenWidth=this.window.innerWidth,this.screenHeight=this.window.innerHeight,this.engine=G.Engine.create(),this.util=new ur,this.state="home",this.animation=new Ka,this.storage=new _l,this.collision=new Pl,this.player=new On({x:0,y:0,z:0}),this.play=!1,this.fov=75,this.scene=new Ki,this.mouse=new lc,this.window.Matter={Composite:G.Composite,Bodies:G.Bodies,Body:G.Body},this.timer=new $a,this.loop=new xl,this.then=new Date().getTime(),this.now=this.then,this.delta=0,this.assets=new wl,this.level=new oc,this.levelHistory=new ac,this.scene.add(this.level),this.camera=new Yi(this.fov,this.screenWidth/this.screenHeight,1,2e3),this.camera.tilt=0,this.camera.position.x=0,this.camera.position.y=0,this.camera.position.zDefault=180,this.camera.position.z=this.camera.position.zDefault,this.light=new Ua("#ffffff","#000000",1*Math.PI),this.light.position.set(.25,.5,1),this.scene.add(this.light),this.background=new Ml,this.scene.add(this.background),this.network=new fu,this.multiplayer=new pc(this.network),this.scene.add(this.multiplayer.players)}init(e,t=function(){}){this.graphics=new kl(e),this.graphics.setCamera(this.camera),this.graphics.setScene(this.scene),this.graphics.setSelectedObjects([this.level]),this.levelEditor=new cc(this.camera,e),this.scene.add(this.levelEditor.controlsTransform.getHelper()),this.canvas=e,this.canvas.classList.add("hidden"),this.canvas.addEventListener("contextmenu",function(n){n.preventDefault()},!1),this.canvas.addEventListener("pointerdown",function(n){this.mouse.mouseDown(n,this)}.bind(this),!1),this.canvas.addEventListener("pointermove",function(n){this.mouse.mouseMove(n,this)}.bind(this),!1),this.canvas.addEventListener("pointerup",function(n){this.mouse.mouseUp(n,this)}.bind(this),!1),this.canvas.addEventListener("wheel",function(n){this.mouse.wheel(n,this)}.bind(this),!1),this.window.addEventListener("resize",function(n){this.resizeWindow(n,this)}.bind(this)),G.Events.on(this.engine,"collisionStart",function(n){this.collision.checkPlayerCollision(n,this)}.bind(this)),this.assets.load(function(){this.load(t),this.updateSettings(null,this)}.bind(this))}load(e=function(){}){var t=app.storage.getSettings(app);this.assets.audio.play(t.music,{queue:!0}),this.background.setTarget(this.player),this.background.init(),this.resizeWindow(null,this),this.loop.add(function(n){this.updateEngine(n.delta,n.alpha)}.bind(this),60),this.loop.add(function(n){this.updateRender(n.delta,n.alpha)}.bind(this),-1),this.multiplayer.setTick(8),this.loop.add(function(n){this.updateNetwork(n.delta,n.alpha)}.bind(this),8),this.loop.start(),e()}updateEngine(e){this.play==!0&&(this.player.updateControls(),this.player.updateForce(),this.player.renderSpeed(this),this.player.updateRope(),G.Engine.update(this.engine,e*1e3))}updateRender(e,t){if(this.play==!0){for(var n=this.level.children.length-1;n>=0;){var r=this.level.children[n];r.body!=null&&r.isFrozen()==!1&&r.update(e,t),n--}this.updateCamera(this),this.timer.render(),this.background.update(e,t,app.motion==!1),app.animation.update(e,t)}this.multiplayer.render(e,t),this.graphics.update(e)}updateNetwork(e,t){this.multiplayer.update(e,t)}resizeWindow(e,t=app){var n=t.window.innerWidth,r=t.window.innerHeight;t.camera.aspect=n/r,t.camera.updateProjectionMatrix(),t.graphics.setSize(n,r)}resetScene(e=app){app.camera.position.z=app.camera.position.zDefault,e.level.removeParticles(e),e.level.resetLevel(),e.updateRender(null,0),window.dispatchEvent(new CustomEvent("setSelectedObject"))}updateCamera(e){e.camera.position.x=e.player.position.x,e.camera.position.y=e.player.position.y+e.camera.tilt}updateSettings(e,t=app){var n=t.storage.getSettings(t);e==null&&(e=n),Object.keys(n).forEach(function(r){e[r]==null&&(e[r]=n[r])}),t.assets.audio.setMasterVolume(e.volume,"master"),t.assets.audio.setMasterVolume(e.volumeEffects,"effects"),t.assets.audio.setMasterVolume(e.volumeMusic,"music"),t.updateQuality(e.quality,t),t.mouse.setSnap(e.snap),t.player.setSkin(e.skin,t),t.storage.setSettings(e),t.updateCameraMotion(e.motion,t),window.dispatchEvent(new CustomEvent("updateStatsVisibility"))}updateGravity(e){var t=this.util.getVectorFromAngle(e),n=app.engine.world.gravity,r=1;n.x=t.x,n.y=t.y,e!=null&&app.motion==!0?(e*=-1,e<0&&(app.camera.rotation.z=(app.camera.rotation.z-Math.PI*2)%(Math.PI*2)),r=Math.abs((e+Math.PI)%Math.PI)/(Math.PI/2)+1,app.animation.tween({object:app.camera.rotation,to:{z:e},duration:250}).start(),app.background.animateScale(r)):(app.camera.rotation.z=0,app.background.animateScale(1))}updateQuality(e,t=app){e<=0&&(e=1),t.graphics.setPixelRatio(t.window.devicePixelRatio/(10/e))}updateCameraMotion(e,t=app){t.motion=e}exitCampaign(){app.play=!1,app.resetScene(app),app.level.clearLevel(app),app.player.removeCheckpoint(),app.player.setPosition({x:0,y:0,z:0}),window.dispatchEvent(new CustomEvent("setPage",{detail:"level-picker"})),window.dispatchEvent(new CustomEvent("closePopup"))}playLevel(){app.play=!0,app.timer.start(),this.assets.audio.play("jump")}async playLevelByTitle(e,t){var n=!1;return await fetch("../json/"+e+".json").then(r=>{if(r.ok)return r.json();throw new Error("Something went wrong")}).then(r=>{var i=app.level.getDescriptionByTitle(e);t==null&&(t=app.level.getThemeByTitle(e)),app.level.entityFactory.color=t.color,t.fog?(app.graphics.fog.color.set(t.fog.color),app.graphics.fog.near=t.fog.near||.01,app.graphics.fog.far=t.fog.far||240):(app.graphics.fog.color.set("#ffffff"),app.graphics.fog.near=app.graphics.fog.far=9999),app.background.setTheme(t.model),app.updateGravity(),app.play=!0,app.timer.reset(),app.level.clearLevel(app),app.level.importFromJSON(r,app),app.background.visible=!0,app.playLevel(),app.resetScene(),n=!0,window.dispatchEvent(new CustomEvent("levelStart",{detail:{title:e,description:i}})),setTimeout(function(){r.author&&window.dispatchEvent(new CustomEvent("setCredit",{detail:{text:"Level by "+r.author}}))},500)}).catch(r=>!1),n}pauseLevel(){app.timer.pause(),app.play=!1}resumeLevel(){app.timer.start(),app.play=!0,window.dispatchEvent(new CustomEvent("closePopup"))}showCanvas(){app.canvas.classList.remove("hidden")}hideCanvas(){app.canvas.classList.add("hidden")}}const gu={key:0,src:"../svg/grow.svg"},vu={key:1,src:"../svg/shrink.svg"},yu={__name:"OriginButtonFullscreen",setup(l){const e=W(!1);document.addEventListener("fullscreenchange",function(){e.value=n()});function t(){return window.chrome?.extension}function n(){return document.fullscreenElement!=null}function r(a){chrome.tabs?chrome.tabs.create({url:a}):window.open(a,"_blank")}function i(){if(t()&&window.location.href.includes("?tab=true")==!1){r(window.location.href+"?tab=true");return}n()?document.exitFullscreen():document.body.requestFullscreen()}return(a,u)=>(j(),N("a",{class:"button top-right four",onClick:i,title:"Fullscreen (F11)"},[e.value==!1?(j(),N("img",gu)):(j(),N("img",vu))]))}},on={__name:"OriginButtonSettings",setup(l){function e(){var n=app.storage.getSettings(app),r=[{label:"Master Volume",name:"volume",type:"range",min:0,max:1,step:.1,value:n.volume,callback:function(i){t("volume",i.target.value)}},{label:"Graphic Quality",name:"quality",type:"range",min:2,max:10,value:n.quality,callback:function(i){t("quality",parseInt(i.target.value))}},{label:"Camera Motion",name:"motion",type:"range",min:0,max:1,value:n.motion==!0?1:0,callback:function(i){t("motion",i.target.value=="1")}},{label:"Show FPS",name:"stats",type:"range",min:0,max:1,value:n.stats==!0?1:0,callback:function(i){t("stats",i.target.value=="1")}},{label:"New UI",name:"theme",type:"range",min:0,max:1,value:n.theme=="bubble"?1:0,callback:function(i){t("theme",i.target.value=="1"?"bubble":"origin"),window.dispatchEvent(new CustomEvent("setTheme"))}}];app.state=="level-manager"||app.state=="level-editor"?r.push({label:"Editor Snap",name:"snap",type:"range",min:0,max:16,step:4,value:n.snap,callback:function(i){var a=Number(i.target.value);a==0&&(a=1),i.target.title=a,t("snap",a)}}):app.state=="campaign"&&(app.timer.pause(),app.play=!1),r.push({type:"button",value:"Close",callback:function(i){app.state=="campaign"&&app.resumeLevel(),window.dispatchEvent(new CustomEvent("closePopup"))}}),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<img src="../svg/gear.svg">',inputs:r}}))}function t(n,r){var i=app.storage.getSettings(app);i[n]=r,app.updateSettings(i)}return(n,r)=>(j(),N("a",{onClick:e,title:"Settings"},r[0]||(r[0]=[_("img",{src:"../svg/gear.svg"},null,-1)])))}},an=["Welcome!","Is it Christmas yet?","Maybe some day I'll add new levels","Aren't you suppose to be doing homework?","Tip: Drink lots of water!","Made by the creators of Boxel Rebound.","Terraria is a pretty cool game.","Good luck!","Kargoh is my favorite Youtuber.","Fact: I'm bad at Fortnite.","Don't get caught!","3D games are hard to make.","You should make a level during class.","Made with 20 coffee's a day.","Lower the graphics to speed up the game.","I hope you have a great day.","More addicting than TikTok!","I tried doing homework once, didn't like it.","I make levels during my day job.",'"I wish this game had more levels." -Everyone',"Don't share your friend code with strangers!","Nothing in life is free, except for this game.","My score is way better than your score.","Backup your data so you can play on other computers.","If you want to make games for a living, start by making levels.","Are cats better than dogs?","Shoutout to Stack Overflow for all the help!","Now available on the TI-84+ Silver Edition.","I think you are a pretty neat person.","I am glad you are alive today!","Happy Friday! (or whatever day it is)","Share kindness (or Boxel 3D) with someone today.","You might not feel special today, but you are special to me!","01101100 01101111 01101100","Have you tried turning it off and on again?","All bugs have been fixed (lol jk)","(\u256F\xB0\u25A1\xB0)\u256F\uFE35 \u25A0"],bu={class:"home dashboard"},wu={class:"wrapper fade-in"},xu={class:"message-bar"},Su={class:"message"},Cu=["innerHTML"],ku={class:"buttons"},Eu={__name:"OriginPageHome",setup(l){var e=W(),t=W(),n=W(i());async function r(){var f=await fetch("../manifest.json"),g=await f.json();e.value=g,t.value=g.version}function i(){return an[Math.floor(Math.random()*an.length)]}function a(f){chrome.tabs?chrome.tabs.create({url:f}):window.open(f,"_blank")}function u(){window.location.href="../index.html"}function d(){return location.href.indexOf("?fullscreen=true")>0}function p(){a(location.href+"?fullscreen=true")}function c(){var f="";navigator.userAgent.indexOf("Edg")!=-1?f="https://microsoftedge.microsoft.com/addons/detail/boxel-3d/gcklngphfijejfnnicbadhghhdifidek":navigator.userAgent.indexOf("Chrome")!=-1?f="https://chromewebstore.google.com/detail/boxel-3d/mjjgmlmpeaikcaajghilhnioimmaibon/reviews":navigator.userAgent.indexOf("Firefox")!=-1&&(f="https://addons.mozilla.org/en-US/firefox/addon/boxel-3d-game/"),a(f)}function m(){var f=[{value:"Backup to file",type:"button",style:"width: 100%",callback:app.storage.backupToFile},{value:"Restore from file",type:"button",style:"width: 100%",callback:app.storage.restoreFromFile},{value:"Close",type:"button"}];chrome.storage&&f.unshift({value:"Backup to Google",type:"button",style:"width: 100%",callback:app.storage.backupToChrome},{value:"Restore from Google",type:"button",style:"width: 100%",callback:app.storage.restoreFromChrome}),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<img src="svg/cloud-check.svg">',inputs:f}}))}async function o(){const f=await fetch("../json/changelog.json").then(function(w){if(w.ok)return w.json();throw new Error("Something went wrong")}).then(function(w){return w}.bind(this)).catch(function(w){console.error(w)});for(var g="",v=f.length-1;v>=0;v--){var x=f[v];g+="v"+x.version+`
`,x.revisions.forEach(function(w){g+="- "+w+`
`}),g+=`
`}window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<div style="text-align: left;">'+g+"</div>",inputs:[{type:"button",value:"Close"}]}}))}function s(f){var g=document.querySelector(f);g.focus()}function h(){return window.chrome?.extension}return ce(function(){r(),s(".focus")}),(f,g)=>(j(),N("div",bu,[g[12]||(g[12]=_("div",{class:"background-cubes"},null,-1)),_("a",{class:"version fade-in",onClick:o},"v"+ue(R(t)),1),_("div",wu,[g[10]||(g[10]=_("img",{src:"../svg/logo-white.svg",class:"logo"},null,-1)),_("div",xu,[_("div",Su,[g[3]||(g[3]=_("img",{class:"google-icon",src:"../svg/light.svg"},null,-1)),g[4]||(g[4]=Le()),_("span",{class:"message-text",innerHTML:R(n)},null,8,Cu)])]),_("div",ku,[le(yu,{class:"button top-right"}),_("a",{class:"button top-right three",onClick:u,title:"Go back"},g[5]||(g[5]=[_("img",{src:"../svg/back.svg"},null,-1)])),_("a",{class:"button top-right two",onClick:m,title:"Account"},g[6]||(g[6]=[_("img",{src:"../svg/cloud-check.svg"},null,-1)])),le(on,{class:"button top-right"}),_("a",{class:"button",onClick:g[0]||(g[0]=v=>f.$emit("setPage","level-manager")),tabindex:"0"},g[7]||(g[7]=[_("span",null,"Level Maker",-1),Le(),_("img",{src:"../svg/pencil.svg"},null,-1)])),_("a",{class:"button",onClick:g[1]||(g[1]=v=>f.$emit("setPage","skins")),tabindex:"0"},g[8]||(g[8]=[_("span",null,"Skins",-1),Le(),_("img",{src:"../svg/smile.svg"},null,-1)])),_("a",{class:"button focus",onClick:g[2]||(g[2]=v=>f.$emit("setPage","level-picker")),tabindex:"0"},g[9]||(g[9]=[_("span",null,"Play",-1),Le(),_("img",{src:"../svg/play.svg"},null,-1)]))])]),h()?(j(),N("a",{key:0,class:"review fade-in",onClick:c},g[11]||(g[11]=[_("img",{src:"../svg/heart.svg"},null,-1),Le("Write a review")]))):Z("",!0)]))}},Tu={class:"level-picker dashboard"},_u={class:"wrapper fade-in"},Pu={class:"levels"},Mu={class:"list"},Au={key:0},Ou={key:1,class:"buttons"},Du=["href","target"],Lu=["src"],Bu=["title","onClick"],Iu={key:0,class:"index"},Ru={key:1,class:"score"},ju={class:"title"},zu={__name:"OriginPageLevelPicker",emits:["setPage"],setup(l,{emit:e}){var t=app.storage.getScores(),n=app.storage.getSettings(),r=parseInt(n.progress),i=o(r-1),a=e;function u(){window.addEventListener("keydown",v)}function d(){window.removeEventListener("keydown",v)}async function p(x){await app.playLevelByTitle(x,{model:"background-classic",color:"#620460"}),a("setPage","campaign"),n.progress=m(x)+1,app.updateSettings(n)}function c(x){return t[x]}function m(x){var w=0,S=-1;return Ge.packs.forEach(function(y){y.levels.forEach(function(b){x==b.title&&(S=w),w++})}),S}function o(x){var w,S=0;return Ge.packs.forEach(function(y){y.levels.forEach(function(b){x==S&&(w=b.title),S++})}),w}function s(x){var w,S=0;return Ge.packs.forEach(function(y){y.levels.forEach(function(b){x==S&&(w=y.theme),S++})}),w}function h(){var x=document.querySelector("[title='"+i+"']");x&&(x.focus(),x.scrollIntoView({behavior:"smooth",block:"center"}))}function f(){a("setPage","home")}function g(x){i=x.target.getAttribute("title")}function v(x){var w=["Space","Enter","ArrowUp","KeyW"];if(w.indexOf(x.code)>-1){x.preventDefault();var S=document.querySelector("[title='"+i+"']");S==document.activeElement&&S.click()}x.code=="Escape"&&(x.preventDefault(),f())}return ce(function(){h(),u()}),de(function(){d()}),(x,w)=>(j(),N("div",Tu,[w[4]||(w[4]=_("div",{class:"background-cubes"},null,-1)),_("div",_u,[w[3]||(w[3]=_("h1",null,[Le("Level"),_("strong",null,"Packs")],-1)),_("div",{class:"buttons"},[_("a",{class:"button top-left",onClick:f,title:"Exit to home (ESC)"},w[1]||(w[1]=[_("img",{src:"../svg/home.svg"},null,-1)]))]),_("div",Pu,[_("div",Mu,[(j(!0),N(ve,null,Ne(R(Ge).packs,(S,y)=>(j(),N(ve,null,[_("h2",null,ue(S.title),1),S.description?(j(),N("p",Au,ue(S.description),1)):Z("",!0),S.links?(j(),N("div",Ou,[(j(!0),N(ve,null,Ne(S.links,b=>(j(),N("a",{class:K(["button",b.class]),href:b.url,target:b.target},[_("span",null,ue(b.text),1),w[2]||(w[2]=Le()),b.icon?(j(),N("img",{key:0,src:"./"+b.icon},null,8,Lu)):Z("",!0)],10,Du))),256))])):Z("",!0),(j(!0),N(ve,null,Ne(S.levels,(b,C)=>(j(),N("div",{class:K(["level",{completed:c(b.title)}]),title:b.title,onClick:k=>p(b.title),tabindex:"0",onFocus:w[0]||(w[0]=k=>g(k))},[b.label?(j(),N("span",Iu,ue(b.label),1)):Z("",!0),c(b.title)?(j(),N("span",Ru,ue(R(t)[b.title]),1)):Z("",!0),_("span",ju,ue(b.description),1)],42,Bu))),256))],64))),256))])])])]))}},Uu={key:0,class:"controls"},Nu={class:"wasd"},Fu={class:"row"},Ps={__name:"OriginControls",setup(l){var e=W({}),t=W(!1);function n(){window.addEventListener("keydown",i),window.addEventListener("keyup",a),window.addEventListener("setMode",d)}function r(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",a),window.removeEventListener("setMode",d)}function i(p){e.value[p.code]=!0}function a(p){e.value[p.code]=!1}function u(p,c){window.dispatchEvent(new KeyboardEvent(p,{code:c})),e.value[c]=p=="keydown"}function d(p){var c=p.detail;c=="control"?t.value=!0:t.value=!1}return ce(function(){n()}),de(function(){r()}),(p,c)=>R(t)?(j(),N("div",Uu,[_("div",Nu,[_("div",Fu,[_("div",{class:K(["key fade-in",{active:R(e).KeyA||R(e).ArrowLeft}]),onPointerdown:c[0]||(c[0]=m=>u("keydown","KeyA")),onPointerup:c[1]||(c[1]=m=>u("keyup","KeyA")),onPointerout:c[2]||(c[2]=m=>u("keyup","KeyA"))},c[9]||(c[9]=[_("span",{class:"material-symbols-rounded"},"arrow_back",-1)]),34),_("div",{class:K(["key fade-in",{active:R(e).KeyW||R(e).ArrowUp||R(e).Space}]),onPointerdown:c[3]||(c[3]=m=>u("keydown","KeyW")),onPointerup:c[4]||(c[4]=m=>u("keyup","KeyW")),onPointerout:c[5]||(c[5]=m=>u("keyup","KeyW"))},c[10]||(c[10]=[_("span",{class:"material-symbols-rounded"},"arrow_upward",-1)]),34),_("div",{class:K(["key fade-in",{active:R(e).KeyD||R(e).ArrowRight}]),onPointerdown:c[6]||(c[6]=m=>u("keydown","KeyD")),onPointerup:c[7]||(c[7]=m=>u("keyup","KeyD")),onPointerout:c[8]||(c[8]=m=>u("keyup","KeyD"))},c[11]||(c[11]=[_("span",{class:"material-symbols-rounded"},"arrow_forward",-1)]),34)])])])):Z("",!0)}},qu={key:0,class:"stats"},Hu={class:"fps"},Vu={__name:"OriginStats",setup(l){var e=W(!1),t=Date.now(),n=!1,r=0,i=W(0);function a(){window.addEventListener("updateStatsVisibility",m)}function u(){window.removeEventListener("updateStatsVisibility",m)}function d(){if(n==!0){requestAnimationFrame(function(){d()});var o=Date.now();r++,o>t+1e3&&(i.value=Math.round(r*1e3/(o-t)),t=o,r=0)}}function p(){n=!0,d()}function c(){n=!1}function m(){var o=app.storage.getSettings(app);e.value=o.stats}return ce(function(){p(),m(),a()}),de(function(){c(),u()}),(o,s)=>R(e)?(j(),N("div",qu,[_("span",Hu,ue(R(i))+" FPS",1)])):Z("",!0)}},Gu={class:"campaign dashboard"},Wu=["innerHTML"],Xu={class:"buttons"},Ju={__name:"OriginPageCampaign",setup(l){var e=W(""),t=W(!0);function n(){window.addEventListener("setCredit",i),window.addEventListener("popupOpened",u),window.addEventListener("popupClosed",d),window.addEventListener("keydown",p),window.addEventListener("keyup",c)}function r(){window.removeEventListener("setCredit",i),window.removeEventListener("popupOpened",u),window.removeEventListener("popupClosed",d),window.removeEventListener("keydown",p),window.removeEventListener("keyup",c)}function i(m){m.detail.text&&(e.value=m.detail.text)}function a(){app.pauseLevel(),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Paused",inputs:[{value:"Exit (E)",type:"button",callback:function(m){app.exitCampaign()}},{value:"Retry (R)",type:"button",callback:function(m){app.level.retryLevel()}},{value:"Play",type:"button",callback:function(m){setTimeout(function(){app.resumeLevel()},100)}}]}}))}function u(){t.value=!1}function d(){t.value=!0}function p(m){if(t.value==!0)if(m.code=="Escape")m.preventDefault(),a();else if(m.code=="KeyE")app.exitCampaign();else if(m.code=="KeyR")app.level.retryLevel();else if(m.code=="KeyC")app.player.restart();else if(m.code=="KeyA"||m.code=="ArrowLeft")app.play==!0&&app.player.setControls("left",-1);else if(m.code=="KeyD"||m.code=="ArrowRight")app.play==!0&&app.player.setControls("right",1);else{var o=["Space","Enter","ArrowUp","KeyW"];o.indexOf(m.code)>-1&&app.player.jump()}}function c(m){m.code=="KeyA"||m.code=="ArrowLeft"?app.player.setControls("left",0):(m.code=="KeyD"||m.code=="ArrowRight")&&app.player.setControls("right",0)}return ce(function(){app.showCanvas(),n()}),de(function(){app.hideCanvas(),r()}),(m,o)=>(j(),N("div",Gu,[(j(),ae(nr,{to:"body"},[o[0]||(o[0]=_("div",{class:"background-cubes"},null,-1))])),o[2]||(o[2]=_("div",{id:"timer"},null,-1)),R(e)?(j(),N("div",{key:0,id:"credit",class:"fade-in",innerHTML:R(e)},null,8,Wu)):Z("",!0),o[3]||(o[3]=_("div",{id:"speedometer"},[_("span",{id:"speed"})],-1)),_("div",Xu,[_("a",{class:"button top-left",onClick:a,title:"Pause (ESC)"},o[1]||(o[1]=[_("img",{src:"../svg/pause.svg"},null,-1)])),le(on,{class:"button top-right"})]),le(Vu),le(Ps)]))}},Zu={class:"level-manager"},Yu={class:"row top"},Ku={class:"col"},$u={class:"item",title:"Download level"},Qu={class:"row left"},ep={class:"col"},tp={class:"list-item"},np=["value","onInput"],ip=["onClick"],rp=["onClick"],sp=["onClick"],op={__name:"OriginPageLevelManager",emits:["setPage"],setup(l,{emit:e}){var t=W([]),n=e;function r(){window.addEventListener("keydown",h)}function i(){window.removeEventListener("keydown",h)}function a(){t.value=app.storage.getListOfLevels(),t.value.length<1&&u()}function u(){var f={},g=null;app.level.createNewLevel(app),f=app.level.exportToJSON(app),g=app.storage.setLevelData(null,f),t.value.push({key:g,level:f})}function d(f){var g=f.target.files[0];if(g){var v=new FileReader;v.onload=function(){var x=JSON.parse(v.result);app.level.clearLevel(app),app.level.key=null,app.background.visible=!1,app.level.entityFactory.color="#620460",app.background.setTheme("background-classic"),app.level.clearLevel(app),app.level.importFromJSON(x,app),app.levelHistory.save("Downloaded level",app),app.levelHistory.save("Loaded level",app),app.resetScene(app),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),n("setPage","level-editor")},v.readAsText(g)}}function p(f){var g=app.storage.getLevelData(f.key),v=app.storage.getSettings(app);g.name=f.level.name,app.level.entityFactory.color="#620460",app.background.setTheme("background-classic"),app.level.clearLevel(app),app.level.importFromJSON(g,app),app.level.key=f.key,app.level.updateHelpers(),app.updateSettings(v,app),app.background.visible=!1,app.levelHistory.save("Edited level",app),app.resetScene(app),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),n("setPage","level-editor")}function c(f,g){f.level.name=g.target.value,app.storage.updateLevelDataName(f.key,f.level.name)}function m(f){p(f),app.resetScene(app),app.storage.saveLevelToFile(),n("setPage","level-manager")}function o(f){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Are you sure you want to <em>delete</em> this level?",inputs:[{value:"Yes",type:"button",callback:function(){var g=t.value.indexOf(f);t.value.splice(g,1),app.storage.removeLevelData(f.key),window.dispatchEvent(new CustomEvent("closePopup"))}},{value:"No",type:"button"}]}}))}function s(){n("setPage","home"),window.dispatchEvent(new CustomEvent("setTheme"))}function h(f){if(f.code=="Escape"||f.code=="KeyE"){if(f.target.value)return;f.preventDefault(),s()}}return ce(function(){a(),r()}),de(function(){i()}),(f,g)=>(j(),N("div",Zu,[_("div",Yu,[_("div",Ku,[_("a",{class:"item",onClick:u,title:"Add level"},g[0]||(g[0]=[_("img",{src:"../svg/add.svg"},null,-1)])),_("label",$u,[_("input",{onChange:d,class:"hidden",type:"file",accept:"application/JSON"},null,32),g[1]||(g[1]=_("img",{src:"../svg/download.svg"},null,-1))]),_("a",{class:"item",onClick:s,title:"Exit level manager (ESC)"},g[2]||(g[2]=[_("img",{src:"../svg/home.svg"},null,-1)])),le(on,{class:"item last"})])]),_("div",Qu,[_("div",ep,[(j(!0),N(ve,null,Ne(R(t),(v,x)=>(j(),N("div",tp,[_("input",{type:"text",value:v.level.name,onInput:w=>c(v,w)},null,40,np),_("a",{onClick:w=>p(v),class:"item",title:"Edit level"},g[3]||(g[3]=[_("img",{src:"../svg/pencil.svg"},null,-1)]),8,ip),_("a",{onClick:w=>m(v),class:"item",title:"Share level"},g[4]||(g[4]=[_("img",{src:"../svg/upload.svg"},null,-1)]),8,rp),_("a",{onClick:w=>o(v),class:"item",title:"Delete level"},g[5]||(g[5]=[_("img",{src:"../svg/trash.svg"},null,-1)]),8,sp)]))),256))])])]))}},ei=[{id:1,title:"Pink",url:"../png/pink.png"},{id:2,title:"Blue",url:"../png/blue.png"},{id:377,title:"Kargoh Krate",url:"../png/krate.png"},{id:680,title:"Custom Skin",url:"../png/custom.png"},{id:563,title:"Monkey",url:"../png/monkey.png"},{id:668,title:"Puppy",url:"../png/puppy.png"},{id:565,title:"Kitty",url:"../png/kitty.png"},{id:466,title:"Smile",url:"../png/smile.png"},{id:476,title:"Love",url:"../png/love.png"},{id:486,title:"Grin",url:"../png/grin.png"},{id:488,title:"Sad Boi",url:"../png/sad.png"},{id:666,title:"Sick",url:"../png/sick.png"},{id:681,title:"Boxel",url:"../png/boxel.png"},{id:667,title:"Angry",url:"../png/mad.png"},{id:661,title:"Skull",url:"../png/skull.png"},{id:562,title:"Doppler",url:"../png/doppler.png"},{id:557,title:"Kargoh",url:"../png/kargoh.png"},{id:458,title:"USA",url:"../png/usa.png"},{id:462,title:"Australia",url:"../png/au.png"},{id:460,title:"UK",url:"../png/uk.png"},{id:490,title:"Canada",url:"../png/canada.png"},{id:465,title:"Japan",url:"../png/jp.png"},{id:152,title:"Golden Skin",url:"../png/gold.png"},{id:407,title:"Lucky Die",url:"../png/lucky.png"},{id:484,title:"Prism",url:"../png/prism.png"},{id:500,title:"Boxel Golf",url:"../png/boxel-golf.png"}],ap={class:"skins dashboard"},lp={class:"wrapper fade-in"},cp={class:"skin-group"},up=["id","onClick"],pp={class:"title"},dp={__name:"OriginPageSkins",emits:["setPage"],setup(l,{emit:e}){var t=e;function n(){window.addEventListener("keydown",m)}function r(){window.removeEventListener("keydown",m)}var i=W(app.storage.getSettings());function a(o,s){i.value.skin=o,o.id==680?window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Custom Skin",inputs:[{class:"button",type:"file",style:"width: 100%",accept:"image/png, image/jpeg",callback:u},{type:"button",value:"Close"}]}})):(app.player.setSkin({id:o.id,url:o.url}),app.updateSettings(i.value)),p(s.target)}function u(o){var s=o.target.files[0];if(s){var h=new FileReader;h.onloadend=function(){var f={id:680,title:s.name,url:h.result};i.value.skin=f,app.player.setSkin(f,app),app.updateSettings(i.value),window.dispatchEvent(new CustomEvent("closePopup"))},h.readAsDataURL(s)}}function d(o){return o.id==i.value.skin.id}function p(o){o==null&&(o=document.querySelector("[class*='selected']")),o.scrollIntoView({behavior:"smooth",block:"center"})}function c(){t("setPage","home")}function m(o){o.code=="Escape"&&(o.preventDefault(),c())}return ce(function(){p(),n()}),de(function(){r()}),(o,s)=>(j(),N("div",ap,[s[2]||(s[2]=_("div",{class:"background-cubes"},null,-1)),_("div",lp,[s[1]||(s[1]=_("h1",null,[Le("My"),_("strong",null,"Skins")],-1)),_("div",cp,[(j(!0),N(ve,null,Ne(R(ei),(h,f)=>(j(),N("div",{class:K(["skin",{selected:d(h)}]),id:h.id,onClick:g=>a(h,g)},[_("div",{class:"image",style:Cn({"background-image":"url("+(d(h)?R(i).skin.url:h.url)+")"})},null,4),_("div",pp,ue(h.title),1)],10,up))),256))]),_("div",{class:"buttons"},[_("a",{class:"button top-left",onClick:c,title:"Exit to home (ESC)"},s[0]||(s[0]=[_("img",{src:"../svg/home.svg"},null,-1)]))])])]))}},hp={key:0,class:"background-cubes"},fp={class:"level-editor"},mp={class:"row top"},gp={class:"col options-level"},vp={key:0,class:"row left"},yp={class:"col object-type"},bp={key:0,class:"col object-options"},wp={class:"slider"},xp=["value"],Sp={__name:"OriginPageLevelEditor",emits:["setPage"],setup(l,{emit:e}){var t=e,n=W("draw"),r=W(app.levelEditor.selectedObjectType||"cube"),i=W(!0),a=W(),u=W(app.levelEditor.controlsTransform),d=W(!0);function p(){window.addEventListener("setSelectedObject",b),window.addEventListener("selectObjectType",y),window.addEventListener("setTransformMode",k),window.addEventListener("popupOpened",m),window.addEventListener("popupClosed",o),window.addEventListener("keydown",D),window.addEventListener("keyup",B)}function c(){window.removeEventListener("setSelectedObject",b),window.removeEventListener("selectObjectType",y),window.removeEventListener("setTransformMode",k),window.removeEventListener("popupOpened",m),window.removeEventListener("popupClosed",o),window.removeEventListener("keydown",D),window.removeEventListener("keyup",B)}function m(){d.value=!1}function o(){d.value=!0}function s(L){n.value=L,app.mouse.setMode(L)}function h(){app.levelEditor.exitLevel()}function f(){app.levelEditor.saveLevel()}function g(){app.levelEditor.undo()}function v(){app.levelEditor.redo()}function x(){w(),app.levelEditor.rewind(),app.levelEditor.controlsOrbit.target.copy(app.player.position)}function w(){i.value=!0,app.pauseLevel(),app.level.deselectLevel(app),app.levelEditor.controlsOrbit.enabled=!0,app.levelEditor.controlsOrbit.reset(),app.levelEditor.controlsOrbit.target.copy(app.player.position),app.updateCamera(app),app.background.visible=!1,window.dispatchEvent(new CustomEvent("setSelectedObject"))}function S(){i.value=!1,app.level.deselectLevel(app),app.levelEditor.controlsOrbit.enabled=!1,app.levelEditor.controlsOrbit.reset(),app.levelEditor.controlsTransform.detach(),window.dispatchEvent(new CustomEvent("setSelectedObject")),app.playLevel()}function y(L){r.value=L.detail.type,app.levelEditor.selectObjectType(L.detail.type,L.detail.checkNull)}function b(L){a.value=L.detail}function C(){app.levelEditor.toggleSelectedObjectStaticState()}function k(L){u.value.mode=L.detail,app.levelEditor.setMode(L.detail)}function T(L){a.value.setFriction(L.target.value),app.levelHistory.save("Updated object properties",app)}function P(){window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Share a tip!",inputs:[{value:app.selectedObject.text,type:"text",callback:A},{value:"Cancel",type:"button"},{value:"Close",type:"button"}]}}))}function E(){app.levelEditor.duplicateSelectedObject(),b({detail:app.selectedObject})}function O(){app.levelEditor.deleteSelectedObject()}function A(L){app.selectedObject.text=L.target.value,app.levelHistory.save("Updated tip",app)}function D(L){if(d.value==!0){var M=["Space","Enter","ArrowUp","KeyW"];if(app.play==!0)if(L.code=="Escape"||L.code=="KeyE")L.preventDefault(),w();else if(L.code=="KeyA"||L.code=="ArrowLeft")app.player.setControls("left",-1);else if(L.code=="KeyD"||L.code=="ArrowRight")app.player.setControls("right",1);else if(L.code=="KeyR")app.level.retryLevel();else if(L.code=="KeyC")app.player.restart();else{var M=["Space","Enter","ArrowUp","KeyW"];M.indexOf(L.code)>-1&&app.player.jump()}else L.code=="Digit0"?app.levelEditor.resetZAxis():L.code=="Escape"||L.code=="KeyE"?(L.preventDefault(),h()):L.code=="KeyD"?E():L.code=="KeyG"?k({detail:"translate"}):L.code=="KeyR"?k({detail:"rotate"}):L.code=="KeyS"?L.ctrlKey==!0?(L.preventDefault(),app.levelEditor.saveLevel()):k({detail:"scale"}):L.code=="KeyT"?k({detail:"translate"}):L.code=="KeyX"?app.levelEditor.deleteSelectedObject():L.code=="KeyZ"&&(L.ctrlKey==!0&&L.shiftKey==!1&&app.levelEditor.undo(),L.ctrlKey==!0&&L.shiftKey==!0&&app.levelEditor.redo())}}function B(L){L.code=="KeyA"||L.code=="ArrowLeft"?app.player.setControls("left",0):(L.code=="KeyD"||L.code=="ArrowRight")&&app.player.setControls("right",0)}return ce(function(){app.canvas.classList.remove("hidden"),p()}),de(function(){app.canvas.classList.add("hidden"),c()}),(L,M)=>(j(),N(ve,null,[(j(),ae(nr,{to:"body"},[R(i)==!1?(j(),N("div",hp)):Z("",!0)])),_("div",fp,[_("div",mp,[_("div",gp,[_("a",{class:K(["item",{selected:R(n)=="draw"}]),onClick:M[0]||(M[0]=I=>s("draw")),action:"draw",title:"Draw cubes"},M[18]||(M[18]=[_("img",{src:"../svg/pencil.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(n)=="erase"}]),onClick:M[1]||(M[1]=I=>s("erase")),action:"erase",title:"Erase cubes"},M[19]||(M[19]=[_("img",{src:"../svg/eraser.svg"},null,-1)]),2),_("a",{class:"item",onClick:h,title:"Exit level editor (ESC)"},M[20]||(M[20]=[_("img",{src:"../svg/home.svg"},null,-1)])),_("a",{class:"item",onClick:f,title:"Save level (Ctrl + S)"},M[21]||(M[21]=[_("img",{src:"../svg/save.svg"},null,-1)])),_("a",{class:"item",onClick:g,title:"Undo edit (Ctrl + Z)"},M[22]||(M[22]=[_("img",{src:"../svg/undo.svg"},null,-1)])),_("a",{class:"item",onClick:v,title:"Redo edit (Ctrl + Shift + Z)"},M[23]||(M[23]=[_("img",{src:"../svg/redo.svg"},null,-1)])),_("a",{class:"item",onClick:x,title:"Restart level"},M[24]||(M[24]=[_("img",{src:"../svg/rewind.svg"},null,-1)])),_("a",{class:"item",onClick:w,title:"Pause level"},M[25]||(M[25]=[_("img",{src:"../svg/pause.svg"},null,-1)])),_("a",{class:"item",onClick:S,title:"Play level"},M[26]||(M[26]=[_("img",{src:"../svg/play.svg"},null,-1)])),le(on,{class:"item last"})])]),R(n)=="draw"&&R(i)==!0?(j(),N("div",vp,[_("div",yp,[_("a",{class:K(["item",{selected:R(r)=="cube"}]),onClick:M[2]||(M[2]=I=>y({detail:{type:"cube"}})),title:"Basic cube"},M[27]||(M[27]=[_("img",{src:"../svg/cube.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="tip"}]),onClick:M[3]||(M[3]=I=>y({detail:{type:"tip"}})),title:"Tip cube"},M[28]||(M[28]=[_("img",{src:"../svg/tip.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="bounce"}]),onClick:M[4]||(M[4]=I=>y({detail:{type:"bounce"}})),title:"Bounce cube"},M[29]||(M[29]=[_("img",{src:"../svg/bounce.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="checkpoint"}]),onClick:M[5]||(M[5]=I=>y({detail:{type:"checkpoint"}})),title:"Checkpoint cube"},M[30]||(M[30]=[_("img",{src:"../svg/checkpoint.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="spike"}]),onClick:M[6]||(M[6]=I=>y({detail:{type:"spike"}})),title:"Spike cube"},M[31]||(M[31]=[_("img",{src:"../svg/spike.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="resize"}]),onClick:M[7]||(M[7]=I=>y({detail:{type:"resize"}})),title:"Resize cube"},M[32]||(M[32]=[_("img",{src:"../svg/grow.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="direction"}]),onClick:M[8]||(M[8]=I=>y({detail:{type:"direction"}})),title:"Direction cube"},M[33]||(M[33]=[_("img",{src:"../svg/direction.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="gravity"}]),onClick:M[9]||(M[9]=I=>y({detail:{type:"gravity"}})),title:"Gravity cube"},M[34]||(M[34]=[_("img",{src:"../svg/gravity.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="grapple"}]),onClick:M[10]||(M[10]=I=>y({detail:{type:"grapple"}})),title:"Grapple cube"},M[35]||(M[35]=[_("img",{src:"../svg/grapple.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="finish"}]),onClick:M[11]||(M[11]=I=>y({detail:{type:"finish"}})),title:"Finish cube"},M[36]||(M[36]=[_("img",{src:"../svg/finish.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="reset"}]),onClick:M[12]||(M[12]=I=>y({detail:{type:"reset"}})),title:"Reset cube"},M[37]||(M[37]=[_("img",{src:"../svg/reset.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(r)=="control"}]),onClick:M[13]||(M[13]=I=>y({detail:{type:"control"}})),title:"Control cube"},M[38]||(M[38]=[_("img",{src:"../svg/control.svg"},null,-1)]),2)]),R(a)!=null?(j(),N("div",bp,[_("a",{class:K(["item",{selected:R(u).mode=="translate"}]),onClick:M[14]||(M[14]=I=>k({detail:"translate"})),title:"Move (T or G)"},M[39]||(M[39]=[_("img",{src:"../svg/move.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(u).mode=="scale"}]),onClick:M[15]||(M[15]=I=>k({detail:"scale"})),title:"Scale (S)"},M[40]||(M[40]=[_("img",{src:"../svg/scale-out-x.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(u).mode=="rotate"}]),onClick:M[16]||(M[16]=I=>k({detail:"rotate"})),title:"Rotate (R)"},M[41]||(M[41]=[_("img",{src:"../svg/rotate-clockwise.svg"},null,-1)]),2),_("a",{class:K(["item",{selected:R(a).isStatic()}]),onClick:C,title:"Pin"},M[42]||(M[42]=[_("img",{src:"../svg/pin.svg"},null,-1)]),2),_("div",{class:K(["item",{disabled:R(a).isStatic()}])},[M[43]||(M[43]=_("a",{action:"friction",title:"Friction"},[_("img",{src:"../svg/friction.svg"})],-1)),_("div",wp,[_("input",{name:"friction",type:"range",min:"0",max:"1",step:"0.25",value:R(a).body.friction,onChange:M[17]||(M[17]=I=>T(I))},null,40,xp)])],2),_("a",{class:K(["item",{disabled:R(a).text==null}]),onClick:P,title:"Text"},M[44]||(M[44]=[_("img",{src:"../svg/type.svg"},null,-1)]),2),_("a",{class:"item",onClick:E,title:"Duplicate (D)"},M[45]||(M[45]=[_("img",{src:"../svg/duplicate.svg"},null,-1)])),_("a",{class:"item",onClick:O,title:"Delete (X)"},M[46]||(M[46]=[_("img",{src:"../svg/trash.svg"},null,-1)]))])):Z("",!0)])):Z("",!0),le(Ps)])],64))}},Cp={key:0,class:"dialog"},kp={class:"wrapper"},Ep=["innerHTML"],Tp={class:"inputs"},_p=["for"],Pp=["id","type","value","min","max","step","accept","title"],Mp={__name:"OriginPopup",setup(l){var e=W(""),t=W([]),n=W(!1);function r(){window.addEventListener("openPopup",a),window.addEventListener("closePopup",u),window.addEventListener("keydown",m)}function i(){window.removeEventListener("openPopup",a),window.removeEventListener("closePopup",u),window.removeEventListener("keydown",m)}function a(o){n.value=!0,o.detail&&(o.detail.text&&(e.value=o.detail.text),o.detail.inputs&&(t.value=o.detail.inputs,t.value.forEach(function(s){s.type=="file"||s.type=="range"||s.type=="text"?s.event="change":s.event="click"}))),setTimeout(function(){window.dispatchEvent(new CustomEvent("popupOpened"))},100)}function u(){n.value=!1,setTimeout(function(){window.dispatchEvent(new CustomEvent("popupClosed"))},100)}function d(o,s){o==null&&(o=u),o(s)}function p(o){var s=t.value[0];s&&d(s.callback,o)}function c(o){var s=t.value[t.value.length-1];s&&d(s.callback,o)}function m(o){if(n.value==!0&&o.target.type!="text"){var s=["Space","Enter","Escape"];s.indexOf(o.code)>-1&&(o.preventDefault(),c(o)),o.code=="KeyR"&&(o.preventDefault(),p(o))}}return ce(function(){r()}),de(function(){i()}),(o,s)=>(j(),ae(_t,{name:"fade-origin-popup"},{default:Pt(()=>[R(n)==!0?(j(),N("div",Cp,[_("div",{class:"background",onClick:c}),_("div",kp,[_("p",{innerHTML:R(e)},null,8,Ep),_("div",Tp,[(j(!0),N(ve,null,Ne(R(t),(h,f)=>(j(),N(ve,null,[h.label?(j(),N("label",{key:0,for:"popup-"+h.type+"-"+f},ue(h.label),9,_p)):Z("",!0),_("input",ir({class:h.class,id:"popup-"+h.type+"-"+f,type:h.type,value:h.value,min:h.min,max:h.max,step:h.step,accept:h.accept,style:h.style,title:h.title||h.value},{[rr(h.event)]:g=>d(h.callback,g)}),null,16,Pp)],64))),256))])])])):Z("",!0)]),_:1}))}},Ap={class:"ui-origin"},Op={__name:"Origin",setup(l){var e=W("home");function t(){window.addEventListener("setPage",r)}function n(){window.removeEventListener("setPage",r)}function r(a){a.detail&&i(a.detail)}function i(a){e.value=a,app.state=a}return ce(function(){t()}),de(function(){n()}),(a,u)=>(j(),N("div",Ap,[R(e)=="home"?(j(),ae(Eu,{key:0,onSetPage:i})):Z("",!0),R(e)=="level-picker"?(j(),ae(zu,{key:1,onSetPage:i})):Z("",!0),R(e)=="campaign"?(j(),ae(Ju,{key:2,onSetPage:i})):Z("",!0),R(e)=="level-manager"?(j(),ae(op,{key:3,onSetPage:i})):Z("",!0),R(e)=="skins"?(j(),ae(dp,{key:4,onSetPage:i})):Z("",!0),R(e)=="level-editor"?(j(),ae(Sp,{key:5,onSetPage:i})):Z("",!0),le(Mp)]))}},ln={__name:"BubbleButtonSettings",setup(l){function e(){window.dispatchEvent(new CustomEvent("openSettings"))}return(t,n)=>(j(),N("a",{onClick:e,title:"Settings"},n[0]||(n[0]=[_("span",{class:"material-symbols-rounded"},"settings",-1)])))}},Dp={key:0,class:"material-symbols-rounded"},Lp={key:1,class:"material-symbols-rounded"},Bp={__name:"BubbleButtonFullscreen",setup(l){const e=W(!1);document.addEventListener("fullscreenchange",function(){e.value=n()});function t(){return window.chrome?.extension}function n(){return document.fullscreenElement!=null}function r(a){chrome.tabs?chrome.tabs.create({url:a}):window.open(a,"_blank")}function i(){if(t()&&window.location.href.includes("?tab=true")==!1){r(window.location.href+"?tab=true");return}n()?document.exitFullscreen():document.body.requestFullscreen()}return(a,u)=>(j(),N("a",{onClick:i,title:"Fullscreen (F11)"},[e.value==!0?(j(),N("span",Dp,"fullscreen_exit")):(j(),N("span",Lp,"fullscreen"))]))}},Ip=["onClick"],Rp=["src"],jp=["innerHTML"],zp=["innerHTML"],Up=["innerHTML"],ti={__name:"BubbleCarousel",props:["items","selected"],setup(l){var e=l,t=W();function n(){window.addEventListener("keydown",h)}function r(){window.removeEventListener("keydown",h)}function i(f,g){var v=d(g.target),x=g.isTrusted?"smooth":"instant";m(v,x),t.value=f,window.dispatchEvent(new CustomEvent("itemSelected",{detail:f})),app.assets.audio.play("click")}function a(){var f=document.querySelector(".item[class*='selected']");f&&f.nextElementSibling&&f.nextElementSibling.click()}function u(){var f=document.querySelector(".item[class*='selected']");f&&f.previousElementSibling&&f.previousElementSibling.click()}function d(f){return f==null?null:f.classList.contains("item")?f:d(f.parentNode)}function p(f){var g=c(f.target);g&&(g.scrollLeft+=f.deltaX+f.deltaY)}function c(f){return f==null?null:f.scrollWidth>f.clientWidth?f:c(f.parentNode)}function m(f,g="smooth"){f==null&&(f=document.querySelector("[class*='selected']")),f&&f.scrollIntoView({behavior:g,block:"nearest",inline:"center"})}function o(f){return f.title==null||t.value==null?!1:t.value.title==f.title}function s(){e.selected&&(t.value=e.selected)}function h(f){f.target.value==null&&(f.code=="KeyA"||f.code=="ArrowLeft"?u():(f.code=="KeyD"||f.code=="ArrowRight")&&a())}return kn(function(){s()}),ce(function(){m(null,"instant"),n()}),de(function(){r()}),(f,g)=>(j(),N("div",{class:"carousel",onWheelPassive:g[0]||(g[0]=v=>p(v))},[(j(!0),N(ve,null,Ne(l.items,(v,x)=>(j(),N("div",{class:K(["item",{selected:o(v)}]),onClick:w=>i(v,w)},[_("img",{src:v.url},null,8,Rp),v.label?(j(),N("p",{key:0,class:"label",innerHTML:v.label},null,8,jp)):Z("",!0),_("p",{class:"title",innerHTML:v.description||v.title},null,8,zp),v.tag?(j(),N("p",{key:1,class:"tag",innerHTML:v.tag},null,8,Up)):Z("",!0)],10,Ip))),256))],32))}},Np={class:"page"},Fp={class:"nav"},qp={class:"content fade-in"},Hp=["innerHTML"],Vp={class:"footer"},Gp={__name:"BubblePageHome",emits:["setPage"],setup(l,{emit:e}){var t=e,n=W(),r=W(),i=W(m()),a=[{title:"Skins",url:"../svg/button-skins.svg",callback:function(){t("setPage","skins")}},{title:"Level Editor",url:"../svg/button-level-editor.svg",callback:function(){window.dispatchEvent(new CustomEvent("setTheme",{detail:"origin"})),setTimeout(function(){window.dispatchEvent(new CustomEvent("setPage",{detail:"level-manager"}))},0)}},{title:"Multi-player",url:"../svg/button-multiplayer.svg",callback:function(){window.dispatchEvent(new CustomEvent("openSettings",{detail:"multiplayer"}))}},{title:"Play",url:"../svg/button-play.svg",callback:function(){t("setPage","level-picker")}}];function u(){window.addEventListener("itemSelected",p)}function d(){window.removeEventListener("itemSelected",p)}function p(x){var w=x.detail;w.callback&&w.callback()}async function c(){var x=await fetch("../manifest.json"),w=await x.json();n.value=w,r.value="v"+w.version}function m(){return an[Math.floor(Math.random()*an.length)]}async function o(){const x=await fetch("../json/changelog.json").then(function(b){if(b.ok)return b.json();throw new Error("Something went wrong")}).then(function(b){return b}.bind(this)).catch(function(b){console.error(b)});for(var w="",S=x.length-1;S>=0;S--){var y=x[S];w+="v"+y.version+`
`,y.revisions.forEach(function(b){w+="- "+b+`
`}),w+=`
`}window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:'<div style="font-size: 0.75em; padding-right: 1em; text-align: left;">'+w+"</div>",inputs:[{type:"button",value:"Close"}]}}))}function s(){var x="";navigator.userAgent.indexOf("Edg")!=-1?x="https://microsoftedge.microsoft.com/addons/detail/boxel-3d/gcklngphfijejfnnicbadhghhdifidek":navigator.userAgent.indexOf("Chrome")!=-1?x="https://chromewebstore.google.com/detail/boxel-3d/mjjgmlmpeaikcaajghilhnioimmaibon/reviews":navigator.userAgent.indexOf("Firefox")!=-1&&(x="https://addons.mozilla.org/en-US/firefox/addon/boxel-3d-game/"),f(x)}function h(x){x.preventDefault(x),x.target.href&&f(x.target.href)}function f(x,w="_blank"){chrome.tabs?chrome.tabs.create({url:x}):window.open(x,w)}function g(){window.location.href="../index.html"}function v(){return window.chrome?.extension}return ce(function(){c(),u()}),de(function(){d()}),(x,w)=>(j(),N("div",Np,[w[5]||(w[5]=_("div",{class:"background"},[_("img",{src:"../svg/background-purple.svg"})],-1)),_("div",Fp,[_("a",{class:"button left fade-in",onClick:g},w[1]||(w[1]=[_("span",{class:"material-symbols-rounded"},"undo",-1)])),le(Bp,{class:"button fade-in"}),le(ln,{class:"button fade-in"})]),_("div",qp,[w[2]||(w[2]=_("h1",null,"BOXEL3D",-1)),_("p",{innerHTML:R(i),onClick:w[0]||(w[0]=S=>h(S))},null,8,Hp),le(ti,{items:R(a),scrolling:"no"},null,8,["items"])]),_("div",Vp,[_("a",{class:K(["button fade-in",{hidden:R(r)==""}]),onClick:o},[w[3]||(w[3]=_("span",{class:"material-symbols-rounded"},"ink_pen",-1)),Le(" "+ue(R(r)),1)],2),v()?(j(),N("a",{key:0,class:"button right fade-in",onClick:s},w[4]||(w[4]=[_("span",{class:"material-symbols-rounded"},"favorite",-1),Le(" Write a review ")]))):Z("",!0)])]))}},Wp={class:"page"},Xp={class:"nav"},Jp={class:"content fade-in"},Zp={__name:"BubblePageSkins",emits:["setPage"],setup(l,{emit:e}){var t=e,n=W();function r(){window.addEventListener("keydown",c),window.addEventListener("itemSelected",u)}function i(){window.removeEventListener("keydown",c),window.removeEventListener("itemSelected",u)}var a=W(app.storage.getSettings());function u(o){var s=o.detail;a.value.skin=s,s.id==680?window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Custom Skin",inputs:[{type:"file",label:"Upload",class:"button",style:"width: 100%",accept:"image/png, image/jpeg",callback:d},{type:"button",value:"Close"}]}})):(app.player.setSkin({id:s.id,url:s.url}),app.updateSettings(a.value))}function d(o){var s=o.target.files[0];if(s){var h=new FileReader;h.onloadend=function(){var f={id:680,title:s.name,url:h.result};a.value.skin=f,app.player.setSkin(f,app),app.updateSettings(a.value),window.dispatchEvent(new CustomEvent("closePopup"))},h.readAsDataURL(s)}}function p(){t("setPage","home")}function c(o){if(o.target.value==null){var s=["Space","Enter","ArrowUp","KeyW"];s.indexOf(o.code)>-1&&(o.preventDefault(),p()),(o.code=="Escape"||o.code=="KeyE")&&(o.preventDefault(),p())}}function m(){var o=a.value.skin.id;ei.forEach(function(s){s.id==o&&(n.value=s)})}return kn(function(){m()}),ce(function(){r()}),de(function(){i()}),(o,s)=>(j(),N("div",Wp,[s[4]||(s[4]=_("div",{class:"background"},[_("img",{src:"../svg/background-purple.svg"})],-1)),_("div",Xp,[_("a",{class:"button fade-in",onClick:p,title:"Exit to home (ESC)"},s[0]||(s[0]=[_("span",{class:"material-symbols-rounded"},"undo",-1)])),le(ln,{class:"button right fade-in"})]),_("div",Jp,[s[1]||(s[1]=_("h1",null,"Skins",-1)),s[2]||(s[2]=_("p",null,"Select your player skin",-1)),le(ti,{items:R(ei),selected:R(n),class:"hide-titles"},null,8,["items","selected"])]),_("div",{class:"footer"},[_("a",{class:"button center fade-in",onClick:p},s[3]||(s[3]=[_("span",{class:"material-symbols-rounded"},"check_box",-1),Le(" Select ")]))])]))}},Yp={class:"page"},Kp={class:"nav"},$p={class:"content fade-in"},Qp=["innerHTML"],ed={__name:"BubblePageLevelPicker",emits:["setPage"],setup(l,{emit:e}){var t=W("Select a level"),n=W([]),r=W(0),i=W(),a=app.storage.getScores(),u=app.storage.getSettings(),d=parseInt(u.progress),p=e;function c(){window.addEventListener("keydown",y),window.addEventListener("itemSelected",f)}function m(){window.removeEventListener("keydown",y),window.removeEventListener("itemSelected",f)}async function o(b){await app.playLevelByTitle(b),p("setPage","campaign"),u=app.storage.getSettings(),u.progress=h(b)+1,app.updateSettings(u)}function s(b){return a[b]}function h(b){var C=0,k=-1;return Ge.packs.forEach(function(T){T.levels.forEach(function(P){b==P.title&&(k=C),C++})}),k}function f(b){i.value==b.detail&&v(),i.value=b.detail,g()}function g(){var b=h(i.value.title),C=0;Ge.packs.forEach(function(k){k.levels.forEach(function(T){b==C&&(t.value=k.title,k.links&&k.links.forEach(function(P){t.value+=' <a class="'+P.class+'" href="'+P.url+'" target="'+P.target+'"><img src="'+P.icon+'"> '+P.text+"</a>"})),C++})})}function v(){o(i.value.title)}function x(){var b=d-1,C=0;Ge.packs.forEach(function(k){k.levels.forEach(function(T){(b==C||b==C+1)&&(i.value=T),C++})})}function w(){p("setPage","home")}function S(){n.value=[],Ge.packs.forEach(function(b,C){var k=b.url;b.levels.forEach(function(T,P){var E=s(T.title);E&&(T.tag='<span class="material-symbols-rounded">star</span>'+s(T.title)),T.url=k,T.theme=b.theme,n.value.push(T)})})}function y(b){if(b.target.value==null){var C=["Space","Enter","ArrowUp","KeyW"];C.indexOf(b.code)>-1&&(b.preventDefault(),v()),(b.code=="Escape"||b.code=="KeyE")&&(b.preventDefault(),w())}}return kn(function(){S(),x(),g()}),ce(function(){c()}),de(function(){m()}),(b,C)=>(j(),N("div",Yp,[C[3]||(C[3]=_("div",{class:"background"},[_("img",{src:"../svg/background-purple.svg"})],-1)),_("div",Kp,[_("a",{class:"button fade-in",onClick:w,title:"Exit to home (ESC)"},C[0]||(C[0]=[_("span",{class:"material-symbols-rounded"},"undo",-1)])),le(ln,{class:"button right fade-in"})]),_("div",$p,[C[1]||(C[1]=_("h1",null,"Play",-1)),_("p",{innerHTML:R(t)},null,8,Qp),(j(),ae(ti,{items:R(n),selected:R(i),key:R(r)},null,8,["items","selected"]))]),_("div",{class:"footer"},[_("a",{class:"button center fade-in",onClick:v},C[2]||(C[2]=[_("span",{class:"material-symbols-rounded"},"slideshow",-1),Le(" Play ")]))])]))}},td={key:0,class:"controls"},nd={class:"wasd"},id={class:"row"},rd={__name:"BubbleControls",setup(l){var e=W({}),t=W(!1);function n(){window.addEventListener("keydown",i),window.addEventListener("keyup",a),window.addEventListener("setMode",d)}function r(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",a),window.removeEventListener("setMode",d)}function i(p){p.target.value==null&&(e.value[p.code]=!0)}function a(p){e.value[p.code]=!1}function u(p,c){window.dispatchEvent(new KeyboardEvent(p,{code:c})),e.value[c]=p=="keydown"}function d(p){var c=p.detail;c=="control"?t.value=!0:t.value=!1}return ce(function(){n()}),de(function(){r()}),(p,c)=>R(t)?(j(),N("div",td,[_("div",nd,[_("div",id,[_("div",{class:K(["key fade-in",{active:R(e).KeyA||R(e).ArrowLeft}]),onPointerdown:c[0]||(c[0]=m=>u("keydown","KeyA")),onPointerup:c[1]||(c[1]=m=>u("keyup","KeyA")),onPointerout:c[2]||(c[2]=m=>u("keyup","KeyA"))},c[9]||(c[9]=[_("span",{class:"material-symbols-rounded"},"arrow_back",-1)]),34),_("div",{class:K(["key fade-in",{active:R(e).KeyW||R(e).ArrowUp||R(e).Space}]),onPointerdown:c[3]||(c[3]=m=>u("keydown","KeyW")),onPointerup:c[4]||(c[4]=m=>u("keyup","KeyW")),onPointerout:c[5]||(c[5]=m=>u("keyup","KeyW"))},c[10]||(c[10]=[_("span",{class:"material-symbols-rounded"},"arrow_upward",-1)]),34),_("div",{class:K(["key fade-in",{active:R(e).KeyD||R(e).ArrowRight}]),onPointerdown:c[6]||(c[6]=m=>u("keydown","KeyD")),onPointerup:c[7]||(c[7]=m=>u("keyup","KeyD")),onPointerout:c[8]||(c[8]=m=>u("keyup","KeyD"))},c[11]||(c[11]=[_("span",{class:"material-symbols-rounded"},"arrow_forward",-1)]),34)])])])):Z("",!0)}},sd={key:0,class:"stats button left fade-in disabled"},od={class:"fps"},ad={__name:"BubbleStats",setup(l){var e=W(!1),t=Date.now(),n=!1,r=0,i=W(0);function a(){window.addEventListener("updateStatsVisibility",m)}function u(){window.removeEventListener("updateStatsVisibility",m)}function d(){if(n==!0){requestAnimationFrame(function(){d()});var o=Date.now();r++,o>t+1e3&&(i.value=Math.round(r*1e3/(o-t)),t=o,r=0)}}function p(){n=!0,d()}function c(){n=!1}function m(){var o=app.storage.getSettings(app);e.value=o.stats}return ce(function(){p(),m(),a()}),de(function(){c(),u()}),(o,s)=>R(e)?(j(),N("a",sd,[s[0]||(s[0]=_("span",{class:"material-symbols-rounded"},"speed",-1)),_("span",od,ue(R(i))+" FPS",1)])):Z("",!0)}},ld={class:"page"},cd={class:"nav"},ud={key:0,class:"record"},pd=["innerHTML"],dd={class:"footer"},hd=["innerHTML"],fd={__name:"BubblePageCampaign",setup(l){var e=W(""),t=W(!0),n=W();function r(){window.addEventListener("setCredit",a),window.addEventListener("popupOpened",d),window.addEventListener("popupClosed",p),window.addEventListener("beforeSettingsOpened",c),window.addEventListener("beforeSettingsClosed",m),window.addEventListener("keydown",o),window.addEventListener("keyup",s)}function i(){window.removeEventListener("setCredit",a),window.removeEventListener("popupOpened",d),window.removeEventListener("popupClosed",p),window.removeEventListener("beforeSettingsOpened",c),window.removeEventListener("beforeSettingsClosed",m),window.removeEventListener("keydown",o),window.removeEventListener("keyup",s)}function a(f){f.detail.text&&(e.value=f.detail.text)}function u(){app.pauseLevel(),window.dispatchEvent(new CustomEvent("openPopup",{detail:{text:"Paused",inputs:[{value:"Exit (E)",type:"button",callback:function(f){app.exitCampaign()}},{value:"Retry (R)",type:"button",callback:function(f){app.level.retryLevel()}},{value:"Play",type:"button",callback:function(f){setTimeout(function(){app.resumeLevel()},100)}}]}}))}function d(){t.value=!1}function p(){t.value=!0,h()}function c(){app.pauseLevel()}function m(){app.resumeLevel()}function o(f){if(t.value==!0&&f.target.value==null)if(f.code=="Escape")f.preventDefault(),u();else if(f.code=="KeyE")app.exitCampaign();else if(f.code=="KeyR")app.level.retryLevel();else if(f.code=="KeyC")app.player.restart();else if(f.code=="KeyA"||f.code=="ArrowLeft")app.play==!0&&app.player.setControls("left",-1);else if(f.code=="KeyD"||f.code=="ArrowRight")app.play==!0&&app.player.setControls("right",1);else{var g=["Space","Enter","ArrowUp","KeyW"];g.indexOf(f.code)>-1&&app.player.jump()}}function s(f){f.code=="KeyA"||f.code=="ArrowLeft"?app.player.setControls("left",0):(f.code=="KeyD"||f.code=="ArrowRight")&&app.player.setControls("right",0)}function h(){var f=app.level.name,g=app.storage.getScores()[f];g&&(n.value=app.timer.toHTML(g))}return ce(function(){app.showCanvas(),h(),r()}),de(function(){app.hideCanvas(),i()}),(f,g)=>(j(),N("div",ld,[_("div",cd,[_("div",{class:"score fade-in",onClick:g[0]||(g[0]=v=>u())},[g[2]||(g[2]=_("div",{class:"current"},[_("span",{class:"material-symbols-rounded"},"pause_circle"),_("div",{id:"timer"})],-1)),R(n)?(j(),N("div",ud,[g[1]||(g[1]=_("span",{class:"material-symbols-rounded"},"star",-1)),_("div",{innerHTML:R(n)},null,8,pd)])):Z("",!0)]),le(ln,{class:"button right fade-in"})]),_("div",dd,[le(ad),R(e)?(j(),N("div",{key:0,id:"credit",class:"credit button fade-in disabled",innerHTML:R(e)},null,8,hd)):Z("",!0),le(rd)])]))}};var Ze={},Fe={},Ms={},Ye={},ni={},As;function md(){return As||(As=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.default=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(function(l){return l.charCodeAt(0)}))),ni}var ii={},Os;function gd(){return Os||(Os=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.default=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(function(l){return l.charCodeAt(0)}))),ii}var Ds={},Ls;function Bs(){return Ls||(Ls=1,function(l){"use strict";var e;Object.defineProperty(l,"__esModule",{value:!0}),l.replaceCodePoint=l.fromCodePoint=void 0;var t=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);l.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(i){var a="";return i>65535&&(i-=65536,a+=String.fromCharCode(i>>>10&1023|55296),i=56320|i&1023),a+=String.fromCharCode(i),a};function n(i){var a;return i>=55296&&i<=57343||i>1114111?65533:(a=t.get(i))!==null&&a!==void 0?a:i}l.replaceCodePoint=n;function r(i){return(0,l.fromCodePoint)(n(i))}l.default=r}(Ds)),Ds}var Is;function cn(){return Is||(Is=1,function(l){"use strict";var e=Ye&&Ye.__createBinding||(Object.create?function(E,O,A,D){D===void 0&&(D=A);var B=Object.getOwnPropertyDescriptor(O,A);(!B||("get"in B?!O.__esModule:B.writable||B.configurable))&&(B={enumerable:!0,get:function(){return O[A]}}),Object.defineProperty(E,D,B)}:function(E,O,A,D){D===void 0&&(D=A),E[D]=O[A]}),t=Ye&&Ye.__setModuleDefault||(Object.create?function(E,O){Object.defineProperty(E,"default",{enumerable:!0,value:O})}:function(E,O){E.default=O}),n=Ye&&Ye.__importStar||function(E){if(E&&E.__esModule)return E;var O={};if(E!=null)for(var A in E)A!=="default"&&Object.prototype.hasOwnProperty.call(E,A)&&e(O,E,A);return t(O,E),O},r=Ye&&Ye.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(l,"__esModule",{value:!0}),l.decodeXML=l.decodeHTMLStrict=l.decodeHTMLAttribute=l.decodeHTML=l.determineBranch=l.EntityDecoder=l.DecodingMode=l.BinTrieFlags=l.fromCodePoint=l.replaceCodePoint=l.decodeCodePoint=l.xmlDecodeTree=l.htmlDecodeTree=void 0;var i=r(md());l.htmlDecodeTree=i.default;var a=r(gd());l.xmlDecodeTree=a.default;var u=n(Bs());l.decodeCodePoint=u.default;var d=Bs();Object.defineProperty(l,"replaceCodePoint",{enumerable:!0,get:function(){return d.replaceCodePoint}}),Object.defineProperty(l,"fromCodePoint",{enumerable:!0,get:function(){return d.fromCodePoint}});var p;(function(E){E[E.NUM=35]="NUM",E[E.SEMI=59]="SEMI",E[E.EQUALS=61]="EQUALS",E[E.ZERO=48]="ZERO",E[E.NINE=57]="NINE",E[E.LOWER_A=97]="LOWER_A",E[E.LOWER_F=102]="LOWER_F",E[E.LOWER_X=120]="LOWER_X",E[E.LOWER_Z=122]="LOWER_Z",E[E.UPPER_A=65]="UPPER_A",E[E.UPPER_F=70]="UPPER_F",E[E.UPPER_Z=90]="UPPER_Z"})(p||(p={}));var c=32,m;(function(E){E[E.VALUE_LENGTH=49152]="VALUE_LENGTH",E[E.BRANCH_LENGTH=16256]="BRANCH_LENGTH",E[E.JUMP_TABLE=127]="JUMP_TABLE"})(m=l.BinTrieFlags||(l.BinTrieFlags={}));function o(E){return E>=p.ZERO&&E<=p.NINE}function s(E){return E>=p.UPPER_A&&E<=p.UPPER_F||E>=p.LOWER_A&&E<=p.LOWER_F}function h(E){return E>=p.UPPER_A&&E<=p.UPPER_Z||E>=p.LOWER_A&&E<=p.LOWER_Z||o(E)}function f(E){return E===p.EQUALS||h(E)}var g;(function(E){E[E.EntityStart=0]="EntityStart",E[E.NumericStart=1]="NumericStart",E[E.NumericDecimal=2]="NumericDecimal",E[E.NumericHex=3]="NumericHex",E[E.NamedEntity=4]="NamedEntity"})(g||(g={}));var v;(function(E){E[E.Legacy=0]="Legacy",E[E.Strict=1]="Strict",E[E.Attribute=2]="Attribute"})(v=l.DecodingMode||(l.DecodingMode={}));var x=function(){function E(O,A,D){this.decodeTree=O,this.emitCodePoint=A,this.errors=D,this.state=g.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=v.Strict}return E.prototype.startEntity=function(O){this.decodeMode=O,this.state=g.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},E.prototype.write=function(O,A){switch(this.state){case g.EntityStart:return O.charCodeAt(A)===p.NUM?(this.state=g.NumericStart,this.consumed+=1,this.stateNumericStart(O,A+1)):(this.state=g.NamedEntity,this.stateNamedEntity(O,A));case g.NumericStart:return this.stateNumericStart(O,A);case g.NumericDecimal:return this.stateNumericDecimal(O,A);case g.NumericHex:return this.stateNumericHex(O,A);case g.NamedEntity:return this.stateNamedEntity(O,A)}},E.prototype.stateNumericStart=function(O,A){return A>=O.length?-1:(O.charCodeAt(A)|c)===p.LOWER_X?(this.state=g.NumericHex,this.consumed+=1,this.stateNumericHex(O,A+1)):(this.state=g.NumericDecimal,this.stateNumericDecimal(O,A))},E.prototype.addToNumericResult=function(O,A,D,B){if(A!==D){var L=D-A;this.result=this.result*Math.pow(B,L)+parseInt(O.substr(A,L),B),this.consumed+=L}},E.prototype.stateNumericHex=function(O,A){for(var D=A;A<O.length;){var B=O.charCodeAt(A);if(o(B)||s(B))A+=1;else return this.addToNumericResult(O,D,A,16),this.emitNumericEntity(B,3)}return this.addToNumericResult(O,D,A,16),-1},E.prototype.stateNumericDecimal=function(O,A){for(var D=A;A<O.length;){var B=O.charCodeAt(A);if(o(B))A+=1;else return this.addToNumericResult(O,D,A,10),this.emitNumericEntity(B,2)}return this.addToNumericResult(O,D,A,10),-1},E.prototype.emitNumericEntity=function(O,A){var D;if(this.consumed<=A)return(D=this.errors)===null||D===void 0||D.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(O===p.SEMI)this.consumed+=1;else if(this.decodeMode===v.Strict)return 0;return this.emitCodePoint((0,u.replaceCodePoint)(this.result),this.consumed),this.errors&&(O!==p.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},E.prototype.stateNamedEntity=function(O,A){for(var D=this.decodeTree,B=D[this.treeIndex],L=(B&m.VALUE_LENGTH)>>14;A<O.length;A++,this.excess++){var M=O.charCodeAt(A);if(this.treeIndex=S(D,B,this.treeIndex+Math.max(1,L),M),this.treeIndex<0)return this.result===0||this.decodeMode===v.Attribute&&(L===0||f(M))?0:this.emitNotTerminatedNamedEntity();if(B=D[this.treeIndex],L=(B&m.VALUE_LENGTH)>>14,L!==0){if(M===p.SEMI)return this.emitNamedEntityData(this.treeIndex,L,this.consumed+this.excess);this.decodeMode!==v.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},E.prototype.emitNotTerminatedNamedEntity=function(){var O,A=this,D=A.result,B=A.decodeTree,L=(B[D]&m.VALUE_LENGTH)>>14;return this.emitNamedEntityData(D,L,this.consumed),(O=this.errors)===null||O===void 0||O.missingSemicolonAfterCharacterReference(),this.consumed},E.prototype.emitNamedEntityData=function(O,A,D){var B=this.decodeTree;return this.emitCodePoint(A===1?B[O]&~m.VALUE_LENGTH:B[O+1],D),A===3&&this.emitCodePoint(B[O+2],D),D},E.prototype.end=function(){var O;switch(this.state){case g.NamedEntity:return this.result!==0&&(this.decodeMode!==v.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case g.NumericDecimal:return this.emitNumericEntity(0,2);case g.NumericHex:return this.emitNumericEntity(0,3);case g.NumericStart:return(O=this.errors)===null||O===void 0||O.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case g.EntityStart:return 0}},E}();l.EntityDecoder=x;function w(E){var O="",A=new x(E,function(D){return O+=(0,u.fromCodePoint)(D)});return function(D,B){for(var L=0,M=0;(M=D.indexOf("&",M))>=0;){O+=D.slice(L,M),A.startEntity(B);var I=A.write(D,M+1);if(I<0){L=M+A.end();break}L=M+I,M=I===0?L+1:L}var H=O+D.slice(L);return O="",H}}function S(E,O,A,D){var B=(O&m.BRANCH_LENGTH)>>7,L=O&m.JUMP_TABLE;if(B===0)return L!==0&&D===L?A:-1;if(L){var M=D-L;return M<0||M>=B?-1:E[A+M]-1}for(var I=A,H=I+B-1;I<=H;){var J=I+H>>>1,ee=E[J];if(ee<D)I=J+1;else if(ee>D)H=J-1;else return E[J+B]}return-1}l.determineBranch=S;var y=w(i.default),b=w(a.default);function C(E,O){return O===void 0&&(O=v.Legacy),y(E,O)}l.decodeHTML=C;function k(E){return y(E,v.Attribute)}l.decodeHTMLAttribute=k;function T(E){return y(E,v.Strict)}l.decodeHTMLStrict=T;function P(E){return b(E,v.Strict)}l.decodeXML=P}(Ye)),Ye}var Rs;function js(){return Rs||(Rs=1,function(l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.QuoteType=void 0;var e=cn(),t;(function(o){o[o.Tab=9]="Tab",o[o.NewLine=10]="NewLine",o[o.FormFeed=12]="FormFeed",o[o.CarriageReturn=13]="CarriageReturn",o[o.Space=32]="Space",o[o.ExclamationMark=33]="ExclamationMark",o[o.Number=35]="Number",o[o.Amp=38]="Amp",o[o.SingleQuote=39]="SingleQuote",o[o.DoubleQuote=34]="DoubleQuote",o[o.Dash=45]="Dash",o[o.Slash=47]="Slash",o[o.Zero=48]="Zero",o[o.Nine=57]="Nine",o[o.Semi=59]="Semi",o[o.Lt=60]="Lt",o[o.Eq=61]="Eq",o[o.Gt=62]="Gt",o[o.Questionmark=63]="Questionmark",o[o.UpperA=65]="UpperA",o[o.LowerA=97]="LowerA",o[o.UpperF=70]="UpperF",o[o.LowerF=102]="LowerF",o[o.UpperZ=90]="UpperZ",o[o.LowerZ=122]="LowerZ",o[o.LowerX=120]="LowerX",o[o.OpeningSquareBracket=91]="OpeningSquareBracket"})(t||(t={}));var n;(function(o){o[o.Text=1]="Text",o[o.BeforeTagName=2]="BeforeTagName",o[o.InTagName=3]="InTagName",o[o.InSelfClosingTag=4]="InSelfClosingTag",o[o.BeforeClosingTagName=5]="BeforeClosingTagName",o[o.InClosingTagName=6]="InClosingTagName",o[o.AfterClosingTagName=7]="AfterClosingTagName",o[o.BeforeAttributeName=8]="BeforeAttributeName",o[o.InAttributeName=9]="InAttributeName",o[o.AfterAttributeName=10]="AfterAttributeName",o[o.BeforeAttributeValue=11]="BeforeAttributeValue",o[o.InAttributeValueDq=12]="InAttributeValueDq",o[o.InAttributeValueSq=13]="InAttributeValueSq",o[o.InAttributeValueNq=14]="InAttributeValueNq",o[o.BeforeDeclaration=15]="BeforeDeclaration",o[o.InDeclaration=16]="InDeclaration",o[o.InProcessingInstruction=17]="InProcessingInstruction",o[o.BeforeComment=18]="BeforeComment",o[o.CDATASequence=19]="CDATASequence",o[o.InSpecialComment=20]="InSpecialComment",o[o.InCommentLike=21]="InCommentLike",o[o.BeforeSpecialS=22]="BeforeSpecialS",o[o.SpecialStartSequence=23]="SpecialStartSequence",o[o.InSpecialTag=24]="InSpecialTag",o[o.BeforeEntity=25]="BeforeEntity",o[o.BeforeNumericEntity=26]="BeforeNumericEntity",o[o.InNamedEntity=27]="InNamedEntity",o[o.InNumericEntity=28]="InNumericEntity",o[o.InHexEntity=29]="InHexEntity"})(n||(n={}));function r(o){return o===t.Space||o===t.NewLine||o===t.Tab||o===t.FormFeed||o===t.CarriageReturn}function i(o){return o===t.Slash||o===t.Gt||r(o)}function a(o){return o>=t.Zero&&o<=t.Nine}function u(o){return o>=t.LowerA&&o<=t.LowerZ||o>=t.UpperA&&o<=t.UpperZ}function d(o){return o>=t.UpperA&&o<=t.UpperF||o>=t.LowerA&&o<=t.LowerF}var p;(function(o){o[o.NoValue=0]="NoValue",o[o.Unquoted=1]="Unquoted",o[o.Single=2]="Single",o[o.Double=3]="Double"})(p=l.QuoteType||(l.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},m=function(){function o(s,h){var f=s.xmlMode,g=f===void 0?!1:f,v=s.decodeEntities,x=v===void 0?!0:v;this.cbs=h,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=x,this.entityTrie=g?e.xmlDecodeTree:e.htmlDecodeTree}return o.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},o.prototype.write=function(s){this.offset+=this.buffer.length,this.buffer=s,this.parse()},o.prototype.end=function(){this.running&&this.finish()},o.prototype.pause=function(){this.running=!1},o.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},o.prototype.getIndex=function(){return this.index},o.prototype.getSectionStart=function(){return this.sectionStart},o.prototype.stateText=function(s){s===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&s===t.Amp&&(this.state=n.BeforeEntity)},o.prototype.stateSpecialStartSequence=function(s){var h=this.sequenceIndex===this.currentSequence.length,f=h?i(s):(s|32)===this.currentSequence[this.sequenceIndex];if(!f)this.isSpecial=!1;else if(!h){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(s)},o.prototype.stateInSpecialTag=function(s){if(this.sequenceIndex===this.currentSequence.length){if(s===t.Gt||r(s)){var h=this.index-this.currentSequence.length;if(this.sectionStart<h){var f=this.index;this.index=h,this.cbs.ontext(this.sectionStart,h),this.index=f}this.isSpecial=!1,this.sectionStart=h+2,this.stateInClosingTagName(s);return}this.sequenceIndex=0}(s|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===c.TitleEnd?this.decodeEntities&&s===t.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(s===t.Lt)},o.prototype.stateCDATASequence=function(s){s===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(s))},o.prototype.fastForwardTo=function(s){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===s)return!0;return this.index=this.buffer.length+this.offset-1,!1},o.prototype.stateInCommentLike=function(s){s===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):s!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},o.prototype.isTagStartChar=function(s){return this.xmlMode?!i(s):u(s)},o.prototype.startSpecial=function(s,h){this.isSpecial=!0,this.currentSequence=s,this.sequenceIndex=h,this.state=n.SpecialStartSequence},o.prototype.stateBeforeTagName=function(s){if(s===t.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(s===t.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(s)){var h=s|32;this.sectionStart=this.index,!this.xmlMode&&h===c.TitleEnd[2]?this.startSpecial(c.TitleEnd,3):this.state=!this.xmlMode&&h===c.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else s===t.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(s))},o.prototype.stateInTagName=function(s){i(s)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(s))},o.prototype.stateBeforeClosingTagName=function(s){r(s)||(s===t.Gt?this.state=n.Text:(this.state=this.isTagStartChar(s)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},o.prototype.stateInClosingTagName=function(s){(s===t.Gt||r(s))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(s))},o.prototype.stateAfterClosingTagName=function(s){(s===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},o.prototype.stateBeforeAttributeName=function(s){s===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):s===t.Slash?this.state=n.InSelfClosingTag:r(s)||(this.state=n.InAttributeName,this.sectionStart=this.index)},o.prototype.stateInSelfClosingTag=function(s){s===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):r(s)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(s))},o.prototype.stateInAttributeName=function(s){(s===t.Eq||i(s))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(s))},o.prototype.stateAfterAttributeName=function(s){s===t.Eq?this.state=n.BeforeAttributeValue:s===t.Slash||s===t.Gt?(this.cbs.onattribend(p.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(s)):r(s)||(this.cbs.onattribend(p.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},o.prototype.stateBeforeAttributeValue=function(s){s===t.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):s===t.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):r(s)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(s))},o.prototype.handleInAttributeValue=function(s,h){s===h||!this.decodeEntities&&this.fastForwardTo(h)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(h===t.DoubleQuote?p.Double:p.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&s===t.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},o.prototype.stateInAttributeValueDoubleQuotes=function(s){this.handleInAttributeValue(s,t.DoubleQuote)},o.prototype.stateInAttributeValueSingleQuotes=function(s){this.handleInAttributeValue(s,t.SingleQuote)},o.prototype.stateInAttributeValueNoQuotes=function(s){r(s)||s===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(s)):this.decodeEntities&&s===t.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},o.prototype.stateBeforeDeclaration=function(s){s===t.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=s===t.Dash?n.BeforeComment:n.InDeclaration},o.prototype.stateInDeclaration=function(s){(s===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},o.prototype.stateInProcessingInstruction=function(s){(s===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},o.prototype.stateBeforeComment=function(s){s===t.Dash?(this.state=n.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},o.prototype.stateInSpecialComment=function(s){(s===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},o.prototype.stateBeforeSpecialS=function(s){var h=s|32;h===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):h===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(s))},o.prototype.stateBeforeEntity=function(s){this.entityExcess=1,this.entityResult=0,s===t.Number?this.state=n.BeforeNumericEntity:s===t.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(s))},o.prototype.stateInNamedEntity=function(s){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,s),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var h=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(h){var f=(h>>14)-1;if(!this.allowLegacyEntity()&&s!==t.Semi)this.trieIndex+=f;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=f,this.entityExcess=0,this.sectionStart=this.index+1,f===0&&this.emitNamedEntity()}}},o.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var s=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(s){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},o.prototype.stateBeforeNumericEntity=function(s){(s|32)===t.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(s))},o.prototype.emitNumericEntity=function(s){var h=this.index-this.entityExcess-1,f=h+2+ +(this.state===n.InHexEntity);f!==this.index&&(h>this.sectionStart&&this.emitPartial(this.sectionStart,h),this.sectionStart=this.index+Number(s),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},o.prototype.stateInNumericEntity=function(s){s===t.Semi?this.emitNumericEntity(!0):a(s)?(this.entityResult=this.entityResult*10+(s-t.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},o.prototype.stateInHexEntity=function(s){s===t.Semi?this.emitNumericEntity(!0):a(s)?(this.entityResult=this.entityResult*16+(s-t.Zero),this.entityExcess++):d(s)?(this.entityResult=this.entityResult*16+((s|32)-t.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},o.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},o.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},o.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},o.prototype.parse=function(){for(;this.shouldContinue();){var s=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(s);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(s);break}case n.InSpecialTag:{this.stateInSpecialTag(s);break}case n.CDATASequence:{this.stateCDATASequence(s);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(s);break}case n.InAttributeName:{this.stateInAttributeName(s);break}case n.InCommentLike:{this.stateInCommentLike(s);break}case n.InSpecialComment:{this.stateInSpecialComment(s);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(s);break}case n.InTagName:{this.stateInTagName(s);break}case n.InClosingTagName:{this.stateInClosingTagName(s);break}case n.BeforeTagName:{this.stateBeforeTagName(s);break}case n.AfterAttributeName:{this.stateAfterAttributeName(s);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(s);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(s);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(s);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(s);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(s);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(s);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(s);break}case n.InDeclaration:{this.stateInDeclaration(s);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(s);break}case n.BeforeComment:{this.stateBeforeComment(s);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(s);break}case n.InNamedEntity:{this.stateInNamedEntity(s);break}case n.BeforeEntity:{this.stateBeforeEntity(s);break}case n.InHexEntity:{this.stateInHexEntity(s);break}case n.InNumericEntity:{this.stateInNumericEntity(s);break}default:this.stateBeforeNumericEntity(s)}this.index++}this.cleanup()},o.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},o.prototype.handleTrailingData=function(){var s=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,s,0):this.cbs.oncomment(this.sectionStart,s,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,s)},o.prototype.emitPartial=function(s,h){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(s,h):this.cbs.ontext(s,h)},o.prototype.emitCodePoint=function(s){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(s):this.cbs.ontextentity(s)},o}();l.default=m}(Ms)),Ms}var zs;function Us(){if(zs)return Fe;zs=1;var l=Fe&&Fe.__createBinding||(Object.create?function(g,v,x,w){w===void 0&&(w=x);var S=Object.getOwnPropertyDescriptor(v,x);(!S||("get"in S?!v.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return v[x]}}),Object.defineProperty(g,w,S)}:function(g,v,x,w){w===void 0&&(w=x),g[w]=v[x]}),e=Fe&&Fe.__setModuleDefault||(Object.create?function(g,v){Object.defineProperty(g,"default",{enumerable:!0,value:v})}:function(g,v){g.default=v}),t=Fe&&Fe.__importStar||function(g){if(g&&g.__esModule)return g;var v={};if(g!=null)for(var x in g)x!=="default"&&Object.prototype.hasOwnProperty.call(g,x)&&l(v,g,x);return e(v,g),v};Object.defineProperty(Fe,"__esModule",{value:!0}),Fe.Parser=void 0;var n=t(js()),r=cn(),i=new Set(["input","option","optgroup","select","button","datalist","textarea"]),a=new Set(["p"]),u=new Set(["thead","tbody"]),d=new Set(["dd","dt"]),p=new Set(["rt","rp"]),c=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",a],["h1",a],["h2",a],["h3",a],["h4",a],["h5",a],["h6",a],["select",i],["input",i],["output",i],["button",i],["datalist",i],["textarea",i],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",d],["dt",d],["address",a],["article",a],["aside",a],["blockquote",a],["details",a],["div",a],["dl",a],["fieldset",a],["figcaption",a],["figure",a],["footer",a],["form",a],["header",a],["hr",a],["main",a],["nav",a],["ol",a],["pre",a],["section",a],["table",a],["ul",a],["rt",p],["rp",p],["tbody",u],["tfoot",u]]),m=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),o=new Set(["math","svg"]),s=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),h=/\s|\//,f=function(){function g(v,x){x===void 0&&(x={});var w,S,y,b,C;this.options=x,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=v??{},this.lowerCaseTagNames=(w=x.lowerCaseTags)!==null&&w!==void 0?w:!x.xmlMode,this.lowerCaseAttributeNames=(S=x.lowerCaseAttributeNames)!==null&&S!==void 0?S:!x.xmlMode,this.tokenizer=new((y=x.Tokenizer)!==null&&y!==void 0?y:n.default)(this.options,this),(C=(b=this.cbs).onparserinit)===null||C===void 0||C.call(b,this)}return g.prototype.ontext=function(v,x){var w,S,y=this.getSlice(v,x);this.endIndex=x-1,(S=(w=this.cbs).ontext)===null||S===void 0||S.call(w,y),this.startIndex=x},g.prototype.ontextentity=function(v){var x,w,S=this.tokenizer.getSectionStart();this.endIndex=S-1,(w=(x=this.cbs).ontext)===null||w===void 0||w.call(x,(0,r.fromCodePoint)(v)),this.startIndex=S},g.prototype.isVoidElement=function(v){return!this.options.xmlMode&&m.has(v)},g.prototype.onopentagname=function(v,x){this.endIndex=x;var w=this.getSlice(v,x);this.lowerCaseTagNames&&(w=w.toLowerCase()),this.emitOpenTag(w)},g.prototype.emitOpenTag=function(v){var x,w,S,y;this.openTagStart=this.startIndex,this.tagname=v;var b=!this.options.xmlMode&&c.get(v);if(b)for(;this.stack.length>0&&b.has(this.stack[this.stack.length-1]);){var C=this.stack.pop();(w=(x=this.cbs).onclosetag)===null||w===void 0||w.call(x,C,!0)}this.isVoidElement(v)||(this.stack.push(v),o.has(v)?this.foreignContext.push(!0):s.has(v)&&this.foreignContext.push(!1)),(y=(S=this.cbs).onopentagname)===null||y===void 0||y.call(S,v),this.cbs.onopentag&&(this.attribs={})},g.prototype.endOpenTag=function(v){var x,w;this.startIndex=this.openTagStart,this.attribs&&((w=(x=this.cbs).onopentag)===null||w===void 0||w.call(x,this.tagname,this.attribs,v),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},g.prototype.onopentagend=function(v){this.endIndex=v,this.endOpenTag(!1),this.startIndex=v+1},g.prototype.onclosetag=function(v,x){var w,S,y,b,C,k;this.endIndex=x;var T=this.getSlice(v,x);if(this.lowerCaseTagNames&&(T=T.toLowerCase()),(o.has(T)||s.has(T))&&this.foreignContext.pop(),this.isVoidElement(T))!this.options.xmlMode&&T==="br"&&((S=(w=this.cbs).onopentagname)===null||S===void 0||S.call(w,"br"),(b=(y=this.cbs).onopentag)===null||b===void 0||b.call(y,"br",{},!0),(k=(C=this.cbs).onclosetag)===null||k===void 0||k.call(C,"br",!1));else{var P=this.stack.lastIndexOf(T);if(P!==-1)if(this.cbs.onclosetag)for(var E=this.stack.length-P;E--;)this.cbs.onclosetag(this.stack.pop(),E!==0);else this.stack.length=P;else!this.options.xmlMode&&T==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=x+1},g.prototype.onselfclosingtag=function(v){this.endIndex=v,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=v+1):this.onopentagend(v)},g.prototype.closeCurrentTag=function(v){var x,w,S=this.tagname;this.endOpenTag(v),this.stack[this.stack.length-1]===S&&((w=(x=this.cbs).onclosetag)===null||w===void 0||w.call(x,S,!v),this.stack.pop())},g.prototype.onattribname=function(v,x){this.startIndex=v;var w=this.getSlice(v,x);this.attribname=this.lowerCaseAttributeNames?w.toLowerCase():w},g.prototype.onattribdata=function(v,x){this.attribvalue+=this.getSlice(v,x)},g.prototype.onattribentity=function(v){this.attribvalue+=(0,r.fromCodePoint)(v)},g.prototype.onattribend=function(v,x){var w,S;this.endIndex=x,(S=(w=this.cbs).onattribute)===null||S===void 0||S.call(w,this.attribname,this.attribvalue,v===n.QuoteType.Double?'"':v===n.QuoteType.Single?"'":v===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},g.prototype.getInstructionName=function(v){var x=v.search(h),w=x<0?v:v.substr(0,x);return this.lowerCaseTagNames&&(w=w.toLowerCase()),w},g.prototype.ondeclaration=function(v,x){this.endIndex=x;var w=this.getSlice(v,x);if(this.cbs.onprocessinginstruction){var S=this.getInstructionName(w);this.cbs.onprocessinginstruction("!".concat(S),"!".concat(w))}this.startIndex=x+1},g.prototype.onprocessinginstruction=function(v,x){this.endIndex=x;var w=this.getSlice(v,x);if(this.cbs.onprocessinginstruction){var S=this.getInstructionName(w);this.cbs.onprocessinginstruction("?".concat(S),"?".concat(w))}this.startIndex=x+1},g.prototype.oncomment=function(v,x,w){var S,y,b,C;this.endIndex=x,(y=(S=this.cbs).oncomment)===null||y===void 0||y.call(S,this.getSlice(v,x-w)),(C=(b=this.cbs).oncommentend)===null||C===void 0||C.call(b),this.startIndex=x+1},g.prototype.oncdata=function(v,x,w){var S,y,b,C,k,T,P,E,O,A;this.endIndex=x;var D=this.getSlice(v,x-w);this.options.xmlMode||this.options.recognizeCDATA?((y=(S=this.cbs).oncdatastart)===null||y===void 0||y.call(S),(C=(b=this.cbs).ontext)===null||C===void 0||C.call(b,D),(T=(k=this.cbs).oncdataend)===null||T===void 0||T.call(k)):((E=(P=this.cbs).oncomment)===null||E===void 0||E.call(P,"[CDATA[".concat(D,"]]")),(A=(O=this.cbs).oncommentend)===null||A===void 0||A.call(O)),this.startIndex=x+1},g.prototype.onend=function(){var v,x;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var w=this.stack.length;w>0;this.cbs.onclosetag(this.stack[--w],!0));}(x=(v=this.cbs).onend)===null||x===void 0||x.call(v)},g.prototype.reset=function(){var v,x,w,S;(x=(v=this.cbs).onreset)===null||x===void 0||x.call(v),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(S=(w=this.cbs).onparserinit)===null||S===void 0||S.call(w,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},g.prototype.parseComplete=function(v){this.reset(),this.end(v)},g.prototype.getSlice=function(v,x){for(;v-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var w=this.buffers[0].slice(v-this.bufferOffset,x-this.bufferOffset);x-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),w+=this.buffers[0].slice(0,x-this.bufferOffset);return w},g.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},g.prototype.write=function(v){var x,w;if(this.ended){(w=(x=this.cbs).onerror)===null||w===void 0||w.call(x,new Error(".write() after done!"));return}this.buffers.push(v),this.tokenizer.running&&(this.tokenizer.write(v),this.writeIndex++)},g.prototype.end=function(v){var x,w;if(this.ended){(w=(x=this.cbs).onerror)===null||w===void 0||w.call(x,new Error(".end() after done!"));return}v&&this.write(v),this.ended=!0,this.tokenizer.end()},g.prototype.pause=function(){this.tokenizer.pause()},g.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},g.prototype.parseChunk=function(v){this.write(v)},g.prototype.done=function(v){this.end(v)},g}();return Fe.Parser=f,Fe}var xt={},Ns={},Fs;function It(){return Fs||(Fs=1,function(l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.Doctype=l.CDATA=l.Tag=l.Style=l.Script=l.Comment=l.Directive=l.Text=l.Root=l.isTag=l.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=l.ElementType||(l.ElementType={}));function t(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}l.isTag=t,l.Root=e.Root,l.Text=e.Text,l.Directive=e.Directive,l.Comment=e.Comment,l.Script=e.Script,l.Style=e.Style,l.Tag=e.Tag,l.CDATA=e.CDATA,l.Doctype=e.Doctype}(Ns)),Ns}var Y={},qs;function Hs(){if(qs)return Y;qs=1;var l=Y&&Y.__extends||function(){var y=function(b,C){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,T){k.__proto__=T}||function(k,T){for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(k[P]=T[P])},y(b,C)};return function(b,C){if(typeof C!="function"&&C!==null)throw new TypeError("Class extends value "+String(C)+" is not a constructor or null");y(b,C);function k(){this.constructor=b}b.prototype=C===null?Object.create(C):(k.prototype=C.prototype,new k)}}(),e=Y&&Y.__assign||function(){return e=Object.assign||function(y){for(var b,C=1,k=arguments.length;C<k;C++){b=arguments[C];for(var T in b)Object.prototype.hasOwnProperty.call(b,T)&&(y[T]=b[T])}return y},e.apply(this,arguments)};Object.defineProperty(Y,"__esModule",{value:!0}),Y.cloneNode=Y.hasChildren=Y.isDocument=Y.isDirective=Y.isComment=Y.isText=Y.isCDATA=Y.isTag=Y.Element=Y.Document=Y.CDATA=Y.NodeWithChildren=Y.ProcessingInstruction=Y.Comment=Y.Text=Y.DataNode=Y.Node=void 0;var t=It(),n=function(){function y(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(y.prototype,"parentNode",{get:function(){return this.parent},set:function(b){this.parent=b},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"previousSibling",{get:function(){return this.prev},set:function(b){this.prev=b},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"nextSibling",{get:function(){return this.next},set:function(b){this.next=b},enumerable:!1,configurable:!0}),y.prototype.cloneNode=function(b){return b===void 0&&(b=!1),w(this,b)},y}();Y.Node=n;var r=function(y){l(b,y);function b(C){var k=y.call(this)||this;return k.data=C,k}return Object.defineProperty(b.prototype,"nodeValue",{get:function(){return this.data},set:function(C){this.data=C},enumerable:!1,configurable:!0}),b}(n);Y.DataNode=r;var i=function(y){l(b,y);function b(){var C=y!==null&&y.apply(this,arguments)||this;return C.type=t.ElementType.Text,C}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),b}(r);Y.Text=i;var a=function(y){l(b,y);function b(){var C=y!==null&&y.apply(this,arguments)||this;return C.type=t.ElementType.Comment,C}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),b}(r);Y.Comment=a;var u=function(y){l(b,y);function b(C,k){var T=y.call(this,k)||this;return T.name=C,T.type=t.ElementType.Directive,T}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),b}(r);Y.ProcessingInstruction=u;var d=function(y){l(b,y);function b(C){var k=y.call(this)||this;return k.children=C,k}return Object.defineProperty(b.prototype,"firstChild",{get:function(){var C;return(C=this.children[0])!==null&&C!==void 0?C:null},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"childNodes",{get:function(){return this.children},set:function(C){this.children=C},enumerable:!1,configurable:!0}),b}(n);Y.NodeWithChildren=d;var p=function(y){l(b,y);function b(){var C=y!==null&&y.apply(this,arguments)||this;return C.type=t.ElementType.CDATA,C}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),b}(d);Y.CDATA=p;var c=function(y){l(b,y);function b(){var C=y!==null&&y.apply(this,arguments)||this;return C.type=t.ElementType.Root,C}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),b}(d);Y.Document=c;var m=function(y){l(b,y);function b(C,k,T,P){T===void 0&&(T=[]),P===void 0&&(P=C==="script"?t.ElementType.Script:C==="style"?t.ElementType.Style:t.ElementType.Tag);var E=y.call(this,T)||this;return E.name=C,E.attribs=k,E.type=P,E}return Object.defineProperty(b.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tagName",{get:function(){return this.name},set:function(C){this.name=C},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"attributes",{get:function(){var C=this;return Object.keys(this.attribs).map(function(k){var T,P;return{name:k,value:C.attribs[k],namespace:(T=C["x-attribsNamespace"])===null||T===void 0?void 0:T[k],prefix:(P=C["x-attribsPrefix"])===null||P===void 0?void 0:P[k]}})},enumerable:!1,configurable:!0}),b}(d);Y.Element=m;function o(y){return(0,t.isTag)(y)}Y.isTag=o;function s(y){return y.type===t.ElementType.CDATA}Y.isCDATA=s;function h(y){return y.type===t.ElementType.Text}Y.isText=h;function f(y){return y.type===t.ElementType.Comment}Y.isComment=f;function g(y){return y.type===t.ElementType.Directive}Y.isDirective=g;function v(y){return y.type===t.ElementType.Root}Y.isDocument=v;function x(y){return Object.prototype.hasOwnProperty.call(y,"children")}Y.hasChildren=x;function w(y,b){b===void 0&&(b=!1);var C;if(h(y))C=new i(y.data);else if(f(y))C=new a(y.data);else if(o(y)){var k=b?S(y.children):[],T=new m(y.name,e({},y.attribs),k);k.forEach(function(A){return A.parent=T}),y.namespace!=null&&(T.namespace=y.namespace),y["x-attribsNamespace"]&&(T["x-attribsNamespace"]=e({},y["x-attribsNamespace"])),y["x-attribsPrefix"]&&(T["x-attribsPrefix"]=e({},y["x-attribsPrefix"])),C=T}else if(s(y)){var k=b?S(y.children):[],P=new p(k);k.forEach(function(D){return D.parent=P}),C=P}else if(v(y)){var k=b?S(y.children):[],E=new c(k);k.forEach(function(D){return D.parent=E}),y["x-mode"]&&(E["x-mode"]=y["x-mode"]),C=E}else if(g(y)){var O=new u(y.name,y.data);y["x-name"]!=null&&(O["x-name"]=y["x-name"],O["x-publicId"]=y["x-publicId"],O["x-systemId"]=y["x-systemId"]),C=O}else throw new Error("Not implemented yet: ".concat(y.type));return C.startIndex=y.startIndex,C.endIndex=y.endIndex,y.sourceCodeLocation!=null&&(C.sourceCodeLocation=y.sourceCodeLocation),C}Y.cloneNode=w;function S(y){for(var b=y.map(function(k){return w(k,!0)}),C=1;C<b.length;C++)b[C].prev=b[C-1],b[C-1].next=b[C];return b}return Y}var Vs;function et(){return Vs||(Vs=1,function(l){"use strict";var e=xt&&xt.__createBinding||(Object.create?function(u,d,p,c){c===void 0&&(c=p);var m=Object.getOwnPropertyDescriptor(d,p);(!m||("get"in m?!d.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return d[p]}}),Object.defineProperty(u,c,m)}:function(u,d,p,c){c===void 0&&(c=p),u[c]=d[p]}),t=xt&&xt.__exportStar||function(u,d){for(var p in u)p!=="default"&&!Object.prototype.hasOwnProperty.call(d,p)&&e(d,u,p)};Object.defineProperty(l,"__esModule",{value:!0}),l.DomHandler=void 0;var n=It(),r=Hs();t(Hs(),l);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},a=function(){function u(d,p,c){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof p=="function"&&(c=p,p=i),typeof d=="object"&&(p=d,d=void 0),this.callback=d??null,this.options=p??i,this.elementCB=c??null}return u.prototype.onparserinit=function(d){this.parser=d},u.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},u.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},u.prototype.onerror=function(d){this.handleCallback(d)},u.prototype.onclosetag=function(){this.lastNode=null;var d=this.tagStack.pop();this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(d)},u.prototype.onopentag=function(d,p){var c=this.options.xmlMode?n.ElementType.Tag:void 0,m=new r.Element(d,p,void 0,c);this.addNode(m),this.tagStack.push(m)},u.prototype.ontext=function(d){var p=this.lastNode;if(p&&p.type===n.ElementType.Text)p.data+=d,this.options.withEndIndices&&(p.endIndex=this.parser.endIndex);else{var c=new r.Text(d);this.addNode(c),this.lastNode=c}},u.prototype.oncomment=function(d){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=d;return}var p=new r.Comment(d);this.addNode(p),this.lastNode=p},u.prototype.oncommentend=function(){this.lastNode=null},u.prototype.oncdatastart=function(){var d=new r.Text(""),p=new r.CDATA([d]);this.addNode(p),d.parent=p,this.lastNode=d},u.prototype.oncdataend=function(){this.lastNode=null},u.prototype.onprocessinginstruction=function(d,p){var c=new r.ProcessingInstruction(d,p);this.addNode(c)},u.prototype.handleCallback=function(d){if(typeof this.callback=="function")this.callback(d,this.dom);else if(d)throw d},u.prototype.addNode=function(d){var p=this.tagStack[this.tagStack.length-1],c=p.children[p.children.length-1];this.options.withStartIndices&&(d.startIndex=this.parser.startIndex),this.options.withEndIndices&&(d.endIndex=this.parser.endIndex),p.children.push(d),c&&(d.prev=c,c.next=d),d.parent=p,this.lastNode=null},u}();l.DomHandler=a,l.default=a}(xt)),xt}var St={},Te={},Ae={},Gs={},Ke={},un={},Ws;function vd(){if(Ws)return un;Ws=1,Object.defineProperty(un,"__esModule",{value:!0});function l(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}return un.default=new Map(l([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(l([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(l([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(l([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),un}var Xs={},Js;function ri(){return Js||(Js=1,function(l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.escapeText=l.escapeAttribute=l.escapeUTF8=l.escape=l.encodeXML=l.getCodePoint=l.xmlReplacer=void 0,l.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);l.getCodePoint=String.prototype.codePointAt!=null?function(r,i){return r.codePointAt(i)}:function(r,i){return(r.charCodeAt(i)&64512)===55296?(r.charCodeAt(i)-55296)*1024+r.charCodeAt(i+1)-56320+65536:r.charCodeAt(i)};function t(r){for(var i="",a=0,u;(u=l.xmlReplacer.exec(r))!==null;){var d=u.index,p=r.charCodeAt(d),c=e.get(p);c!==void 0?(i+=r.substring(a,d)+c,a=d+1):(i+="".concat(r.substring(a,d),"&#x").concat((0,l.getCodePoint)(r,d).toString(16),";"),a=l.xmlReplacer.lastIndex+=+((p&64512)===55296))}return i+r.substr(a)}l.encodeXML=t,l.escape=t;function n(r,i){return function(a){for(var u,d=0,p="";u=r.exec(a);)d!==u.index&&(p+=a.substring(d,u.index)),p+=i.get(u[0].charCodeAt(0)),d=u.index+1;return p+a.substring(d)}}l.escapeUTF8=n(/[&<>'"]/g,e),l.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),l.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}(Xs)),Xs}var Zs;function Ys(){if(Zs)return Ke;Zs=1;var l=Ke&&Ke.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.encodeNonAsciiHTML=Ke.encodeHTML=void 0;var e=l(vd()),t=ri(),n=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function r(u){return a(n,u)}Ke.encodeHTML=r;function i(u){return a(t.xmlReplacer,u)}Ke.encodeNonAsciiHTML=i;function a(u,d){for(var p="",c=0,m;(m=u.exec(d))!==null;){var o=m.index;p+=d.substring(c,o);var s=d.charCodeAt(o),h=e.default.get(s);if(typeof h=="object"){if(o+1<d.length){var f=d.charCodeAt(o+1),g=typeof h.n=="number"?h.n===f?h.o:void 0:h.n.get(f);if(g!==void 0){p+=g,c=u.lastIndex+=1;continue}}h=h.v}if(h!==void 0)p+=h,c=o+1;else{var v=(0,t.getCodePoint)(d,o);p+="&#x".concat(v.toString(16),";"),c=u.lastIndex+=+(v!==s)}}return p+d.substr(c)}return Ke}var Ks;function yd(){return Ks||(Ks=1,function(l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.decodeXMLStrict=l.decodeHTML5Strict=l.decodeHTML4Strict=l.decodeHTML5=l.decodeHTML4=l.decodeHTMLAttribute=l.decodeHTMLStrict=l.decodeHTML=l.decodeXML=l.DecodingMode=l.EntityDecoder=l.encodeHTML5=l.encodeHTML4=l.encodeNonAsciiHTML=l.encodeHTML=l.escapeText=l.escapeAttribute=l.escapeUTF8=l.escape=l.encodeXML=l.encode=l.decodeStrict=l.decode=l.EncodingMode=l.EntityLevel=void 0;var e=cn(),t=Ys(),n=ri(),r;(function(o){o[o.XML=0]="XML",o[o.HTML=1]="HTML"})(r=l.EntityLevel||(l.EntityLevel={}));var i;(function(o){o[o.UTF8=0]="UTF8",o[o.ASCII=1]="ASCII",o[o.Extensive=2]="Extensive",o[o.Attribute=3]="Attribute",o[o.Text=4]="Text"})(i=l.EncodingMode||(l.EncodingMode={}));function a(o,s){s===void 0&&(s=r.XML);var h=typeof s=="number"?s:s.level;if(h===r.HTML){var f=typeof s=="object"?s.mode:void 0;return(0,e.decodeHTML)(o,f)}return(0,e.decodeXML)(o)}l.decode=a;function u(o,s){var h;s===void 0&&(s=r.XML);var f=typeof s=="number"?{level:s}:s;return(h=f.mode)!==null&&h!==void 0||(f.mode=e.DecodingMode.Strict),a(o,f)}l.decodeStrict=u;function d(o,s){s===void 0&&(s=r.XML);var h=typeof s=="number"?{level:s}:s;return h.mode===i.UTF8?(0,n.escapeUTF8)(o):h.mode===i.Attribute?(0,n.escapeAttribute)(o):h.mode===i.Text?(0,n.escapeText)(o):h.level===r.HTML?h.mode===i.ASCII?(0,t.encodeNonAsciiHTML)(o):(0,t.encodeHTML)(o):(0,n.encodeXML)(o)}l.encode=d;var p=ri();Object.defineProperty(l,"encodeXML",{enumerable:!0,get:function(){return p.encodeXML}}),Object.defineProperty(l,"escape",{enumerable:!0,get:function(){return p.escape}}),Object.defineProperty(l,"escapeUTF8",{enumerable:!0,get:function(){return p.escapeUTF8}}),Object.defineProperty(l,"escapeAttribute",{enumerable:!0,get:function(){return p.escapeAttribute}}),Object.defineProperty(l,"escapeText",{enumerable:!0,get:function(){return p.escapeText}});var c=Ys();Object.defineProperty(l,"encodeHTML",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(l,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return c.encodeNonAsciiHTML}}),Object.defineProperty(l,"encodeHTML4",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(l,"encodeHTML5",{enumerable:!0,get:function(){return c.encodeHTML}});var m=cn();Object.defineProperty(l,"EntityDecoder",{enumerable:!0,get:function(){return m.EntityDecoder}}),Object.defineProperty(l,"DecodingMode",{enumerable:!0,get:function(){return m.DecodingMode}}),Object.defineProperty(l,"decodeXML",{enumerable:!0,get:function(){return m.decodeXML}}),Object.defineProperty(l,"decodeHTML",{enumerable:!0,get:function(){return m.decodeHTML}}),Object.defineProperty(l,"decodeHTMLStrict",{enumerable:!0,get:function(){return m.decodeHTMLStrict}}),Object.defineProperty(l,"decodeHTMLAttribute",{enumerable:!0,get:function(){return m.decodeHTMLAttribute}}),Object.defineProperty(l,"decodeHTML4",{enumerable:!0,get:function(){return m.decodeHTML}}),Object.defineProperty(l,"decodeHTML5",{enumerable:!0,get:function(){return m.decodeHTML}}),Object.defineProperty(l,"decodeHTML4Strict",{enumerable:!0,get:function(){return m.decodeHTMLStrict}}),Object.defineProperty(l,"decodeHTML5Strict",{enumerable:!0,get:function(){return m.decodeHTMLStrict}}),Object.defineProperty(l,"decodeXMLStrict",{enumerable:!0,get:function(){return m.decodeXML}})}(Gs)),Gs}var Ct={},$s;function bd(){return $s||($s=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.attributeNames=Ct.elementNames=void 0,Ct.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(l){return[l.toLowerCase(),l]})),Ct.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(l){return[l.toLowerCase(),l]}))),Ct}var Qs;function wd(){if(Qs)return Ae;Qs=1;var l=Ae&&Ae.__assign||function(){return l=Object.assign||function(S){for(var y,b=1,C=arguments.length;b<C;b++){y=arguments[b];for(var k in y)Object.prototype.hasOwnProperty.call(y,k)&&(S[k]=y[k])}return S},l.apply(this,arguments)},e=Ae&&Ae.__createBinding||(Object.create?function(S,y,b,C){C===void 0&&(C=b);var k=Object.getOwnPropertyDescriptor(y,b);(!k||("get"in k?!y.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return y[b]}}),Object.defineProperty(S,C,k)}:function(S,y,b,C){C===void 0&&(C=b),S[C]=y[b]}),t=Ae&&Ae.__setModuleDefault||(Object.create?function(S,y){Object.defineProperty(S,"default",{enumerable:!0,value:y})}:function(S,y){S.default=y}),n=Ae&&Ae.__importStar||function(S){if(S&&S.__esModule)return S;var y={};if(S!=null)for(var b in S)b!=="default"&&Object.prototype.hasOwnProperty.call(S,b)&&e(y,S,b);return t(y,S),y};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.render=void 0;var r=n(It()),i=yd(),a=bd(),u=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function d(S){return S.replace(/"/g,"&quot;")}function p(S,y){var b;if(S){var C=((b=y.encodeEntities)!==null&&b!==void 0?b:y.decodeEntities)===!1?d:y.xmlMode||y.encodeEntities!=="utf8"?i.encodeXML:i.escapeAttribute;return Object.keys(S).map(function(k){var T,P,E=(T=S[k])!==null&&T!==void 0?T:"";return y.xmlMode==="foreign"&&(k=(P=a.attributeNames.get(k))!==null&&P!==void 0?P:k),!y.emptyAttrs&&!y.xmlMode&&E===""?k:"".concat(k,'="').concat(C(E),'"')}).join(" ")}}var c=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function m(S,y){y===void 0&&(y={});for(var b=("length"in S)?S:[S],C="",k=0;k<b.length;k++)C+=o(b[k],y);return C}Ae.render=m,Ae.default=m;function o(S,y){switch(S.type){case r.Root:return m(S.children,y);case r.Doctype:case r.Directive:return g(S);case r.Comment:return w(S);case r.CDATA:return x(S);case r.Script:case r.Style:case r.Tag:return f(S,y);case r.Text:return v(S,y)}}var s=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),h=new Set(["svg","math"]);function f(S,y){var b;y.xmlMode==="foreign"&&(S.name=(b=a.elementNames.get(S.name))!==null&&b!==void 0?b:S.name,S.parent&&s.has(S.parent.name)&&(y=l(l({},y),{xmlMode:!1}))),!y.xmlMode&&h.has(S.name)&&(y=l(l({},y),{xmlMode:"foreign"}));var C="<".concat(S.name),k=p(S.attribs,y);return k&&(C+=" ".concat(k)),S.children.length===0&&(y.xmlMode?y.selfClosingTags!==!1:y.selfClosingTags&&c.has(S.name))?(y.xmlMode||(C+=" "),C+="/>"):(C+=">",S.children.length>0&&(C+=m(S.children,y)),(y.xmlMode||!c.has(S.name))&&(C+="</".concat(S.name,">"))),C}function g(S){return"<".concat(S.data,">")}function v(S,y){var b,C=S.data||"";return((b=y.encodeEntities)!==null&&b!==void 0?b:y.decodeEntities)!==!1&&!(!y.xmlMode&&S.parent&&u.has(S.parent.name))&&(C=y.xmlMode||y.encodeEntities!=="utf8"?(0,i.encodeXML)(C):(0,i.escapeText)(C)),C}function x(S){return"<![CDATA[".concat(S.children[0].data,"]]>")}function w(S){return"<!--".concat(S.data,"-->")}return Ae}var eo;function to(){if(eo)return Te;eo=1;var l=Te&&Te.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Te,"__esModule",{value:!0}),Te.innerText=Te.textContent=Te.getText=Te.getInnerHTML=Te.getOuterHTML=void 0;var e=et(),t=l(wd()),n=It();function r(p,c){return(0,t.default)(p,c)}Te.getOuterHTML=r;function i(p,c){return(0,e.hasChildren)(p)?p.children.map(function(m){return r(m,c)}).join(""):""}Te.getInnerHTML=i;function a(p){return Array.isArray(p)?p.map(a).join(""):(0,e.isTag)(p)?p.name==="br"?`
`:a(p.children):(0,e.isCDATA)(p)?a(p.children):(0,e.isText)(p)?p.data:""}Te.getText=a;function u(p){return Array.isArray(p)?p.map(u).join(""):(0,e.hasChildren)(p)&&!(0,e.isComment)(p)?u(p.children):(0,e.isText)(p)?p.data:""}Te.textContent=u;function d(p){return Array.isArray(p)?p.map(d).join(""):(0,e.hasChildren)(p)&&(p.type===n.ElementType.Tag||(0,e.isCDATA)(p))?d(p.children):(0,e.isText)(p)?p.data:""}return Te.innerText=d,Te}var he={},no;function xd(){if(no)return he;no=1,Object.defineProperty(he,"__esModule",{value:!0}),he.prevElementSibling=he.nextElementSibling=he.getName=he.hasAttrib=he.getAttributeValue=he.getSiblings=he.getParent=he.getChildren=void 0;var l=et();function e(p){return(0,l.hasChildren)(p)?p.children:[]}he.getChildren=e;function t(p){return p.parent||null}he.getParent=t;function n(p){var c,m,o=t(p);if(o!=null)return e(o);for(var s=[p],h=p.prev,f=p.next;h!=null;)s.unshift(h),c=h,h=c.prev;for(;f!=null;)s.push(f),m=f,f=m.next;return s}he.getSiblings=n;function r(p,c){var m;return(m=p.attribs)===null||m===void 0?void 0:m[c]}he.getAttributeValue=r;function i(p,c){return p.attribs!=null&&Object.prototype.hasOwnProperty.call(p.attribs,c)&&p.attribs[c]!=null}he.hasAttrib=i;function a(p){return p.name}he.getName=a;function u(p){for(var c,m=p.next;m!==null&&!(0,l.isTag)(m);)c=m,m=c.next;return m}he.nextElementSibling=u;function d(p){for(var c,m=p.prev;m!==null&&!(0,l.isTag)(m);)c=m,m=c.prev;return m}return he.prevElementSibling=d,he}var _e={},io;function Sd(){if(io)return _e;io=1,Object.defineProperty(_e,"__esModule",{value:!0}),_e.prepend=_e.prependChild=_e.append=_e.appendChild=_e.replaceElement=_e.removeElement=void 0;function l(a){if(a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),a.parent){var u=a.parent.children,d=u.lastIndexOf(a);d>=0&&u.splice(d,1)}a.next=null,a.prev=null,a.parent=null}_e.removeElement=l;function e(a,u){var d=u.prev=a.prev;d&&(d.next=u);var p=u.next=a.next;p&&(p.prev=u);var c=u.parent=a.parent;if(c){var m=c.children;m[m.lastIndexOf(a)]=u,a.parent=null}}_e.replaceElement=e;function t(a,u){if(l(u),u.next=null,u.parent=a,a.children.push(u)>1){var d=a.children[a.children.length-2];d.next=u,u.prev=d}else u.prev=null}_e.appendChild=t;function n(a,u){l(u);var d=a.parent,p=a.next;if(u.next=p,u.prev=a,a.next=u,u.parent=d,p){if(p.prev=u,d){var c=d.children;c.splice(c.lastIndexOf(p),0,u)}}else d&&d.children.push(u)}_e.append=n;function r(a,u){if(l(u),u.parent=a,u.prev=null,a.children.unshift(u)!==1){var d=a.children[1];d.prev=u,u.next=d}else u.next=null}_e.prependChild=r;function i(a,u){l(u);var d=a.parent;if(d){var p=d.children;p.splice(p.indexOf(a),0,u)}a.prev&&(a.prev.next=u),u.parent=d,u.prev=a.prev,u.next=a,a.prev=u}return _e.prepend=i,_e}var Pe={},ro;function so(){if(ro)return Pe;ro=1,Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.findAll=Pe.existsOne=Pe.findOne=Pe.findOneChild=Pe.find=Pe.filter=void 0;var l=et();function e(u,d,p,c){return p===void 0&&(p=!0),c===void 0&&(c=1/0),t(u,Array.isArray(d)?d:[d],p,c)}Pe.filter=e;function t(u,d,p,c){for(var m=[],o=[d],s=[0];;){if(s[0]>=o[0].length){if(s.length===1)return m;o.shift(),s.shift();continue}var h=o[0][s[0]++];if(u(h)&&(m.push(h),--c<=0))return m;p&&(0,l.hasChildren)(h)&&h.children.length>0&&(s.unshift(0),o.unshift(h.children))}}Pe.find=t;function n(u,d){return d.find(u)}Pe.findOneChild=n;function r(u,d,p){p===void 0&&(p=!0);for(var c=null,m=0;m<d.length&&!c;m++){var o=d[m];if((0,l.isTag)(o))u(o)?c=o:p&&o.children.length>0&&(c=r(u,o.children,!0));else continue}return c}Pe.findOne=r;function i(u,d){return d.some(function(p){return(0,l.isTag)(p)&&(u(p)||i(u,p.children))})}Pe.existsOne=i;function a(u,d){for(var p=[],c=[d],m=[0];;){if(m[0]>=c[0].length){if(c.length===1)return p;c.shift(),m.shift();continue}var o=c[0][m[0]++];(0,l.isTag)(o)&&(u(o)&&p.push(o),o.children.length>0&&(m.unshift(0),c.unshift(o.children)))}}return Pe.findAll=a,Pe}var Be={},oo;function ao(){if(oo)return Be;oo=1,Object.defineProperty(Be,"__esModule",{value:!0}),Be.getElementsByTagType=Be.getElementsByTagName=Be.getElementById=Be.getElements=Be.testElement=void 0;var l=et(),e=so(),t={tag_name:function(m){return typeof m=="function"?function(o){return(0,l.isTag)(o)&&m(o.name)}:m==="*"?l.isTag:function(o){return(0,l.isTag)(o)&&o.name===m}},tag_type:function(m){return typeof m=="function"?function(o){return m(o.type)}:function(o){return o.type===m}},tag_contains:function(m){return typeof m=="function"?function(o){return(0,l.isText)(o)&&m(o.data)}:function(o){return(0,l.isText)(o)&&o.data===m}}};function n(m,o){return typeof o=="function"?function(s){return(0,l.isTag)(s)&&o(s.attribs[m])}:function(s){return(0,l.isTag)(s)&&s.attribs[m]===o}}function r(m,o){return function(s){return m(s)||o(s)}}function i(m){var o=Object.keys(m).map(function(s){var h=m[s];return Object.prototype.hasOwnProperty.call(t,s)?t[s](h):n(s,h)});return o.length===0?null:o.reduce(r)}function a(m,o){var s=i(m);return s?s(o):!0}Be.testElement=a;function u(m,o,s,h){h===void 0&&(h=1/0);var f=i(m);return f?(0,e.filter)(f,o,s,h):[]}Be.getElements=u;function d(m,o,s){return s===void 0&&(s=!0),Array.isArray(o)||(o=[o]),(0,e.findOne)(n("id",m),o,s)}Be.getElementById=d;function p(m,o,s,h){return s===void 0&&(s=!0),h===void 0&&(h=1/0),(0,e.filter)(t.tag_name(m),o,s,h)}Be.getElementsByTagName=p;function c(m,o,s,h){return s===void 0&&(s=!0),h===void 0&&(h=1/0),(0,e.filter)(t.tag_type(m),o,s,h)}return Be.getElementsByTagType=c,Be}var lo={},co;function Cd(){return co||(co=1,function(l){"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.uniqueSort=l.compareDocumentPosition=l.DocumentPosition=l.removeSubsets=void 0;var e=et();function t(a){for(var u=a.length;--u>=0;){var d=a[u];if(u>0&&a.lastIndexOf(d,u-1)>=0){a.splice(u,1);continue}for(var p=d.parent;p;p=p.parent)if(a.includes(p)){a.splice(u,1);break}}return a}l.removeSubsets=t;var n;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(n=l.DocumentPosition||(l.DocumentPosition={}));function r(a,u){var d=[],p=[];if(a===u)return 0;for(var c=(0,e.hasChildren)(a)?a:a.parent;c;)d.unshift(c),c=c.parent;for(c=(0,e.hasChildren)(u)?u:u.parent;c;)p.unshift(c),c=c.parent;for(var m=Math.min(d.length,p.length),o=0;o<m&&d[o]===p[o];)o++;if(o===0)return n.DISCONNECTED;var s=d[o-1],h=s.children,f=d[o],g=p[o];return h.indexOf(f)>h.indexOf(g)?s===u?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:s===a?n.PRECEDING|n.CONTAINS:n.PRECEDING}l.compareDocumentPosition=r;function i(a){return a=a.filter(function(u,d,p){return!p.includes(u,d+1)}),a.sort(function(u,d){var p=r(u,d);return p&n.PRECEDING?-1:p&n.FOLLOWING?1:0}),a}l.uniqueSort=i}(lo)),lo}var Rt={},uo;function kd(){if(uo)return Rt;uo=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.getFeed=void 0;var l=to(),e=ao();function t(o){var s=d(m,o);return s?s.name==="feed"?n(s):r(s):null}Rt.getFeed=t;function n(o){var s,h=o.children,f={type:"atom",items:(0,e.getElementsByTagName)("entry",h).map(function(x){var w,S=x.children,y={media:u(S)};c(y,"id","id",S),c(y,"title","title",S);var b=(w=d("link",S))===null||w===void 0?void 0:w.attribs.href;b&&(y.link=b);var C=p("summary",S)||p("content",S);C&&(y.description=C);var k=p("updated",S);return k&&(y.pubDate=new Date(k)),y})};c(f,"id","id",h),c(f,"title","title",h);var g=(s=d("link",h))===null||s===void 0?void 0:s.attribs.href;g&&(f.link=g),c(f,"description","subtitle",h);var v=p("updated",h);return v&&(f.updated=new Date(v)),c(f,"author","email",h,!0),f}function r(o){var s,h,f=(h=(s=d("channel",o.children))===null||s===void 0?void 0:s.children)!==null&&h!==void 0?h:[],g={type:o.name.substr(0,3),id:"",items:(0,e.getElementsByTagName)("item",o.children).map(function(x){var w=x.children,S={media:u(w)};c(S,"id","guid",w),c(S,"title","title",w),c(S,"link","link",w),c(S,"description","description",w);var y=p("pubDate",w)||p("dc:date",w);return y&&(S.pubDate=new Date(y)),S})};c(g,"title","title",f),c(g,"link","link",f),c(g,"description","description",f);var v=p("lastBuildDate",f);return v&&(g.updated=new Date(v)),c(g,"author","managingEditor",f,!0),g}var i=["url","type","lang"],a=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function u(o){return(0,e.getElementsByTagName)("media:content",o).map(function(s){for(var h=s.attribs,f={medium:h.medium,isDefault:!!h.isDefault},g=0,v=i;g<v.length;g++){var x=v[g];h[x]&&(f[x]=h[x])}for(var w=0,S=a;w<S.length;w++){var x=S[w];h[x]&&(f[x]=parseInt(h[x],10))}return h.expression&&(f.expression=h.expression),f})}function d(o,s){return(0,e.getElementsByTagName)(o,s,!0,1)[0]}function p(o,s,h){return h===void 0&&(h=!1),(0,l.textContent)((0,e.getElementsByTagName)(o,s,h,1)).trim()}function c(o,s,h,f,g){g===void 0&&(g=!1);var v=p(h,f,g);v&&(o[s]=v)}function m(o){return o==="rss"||o==="feed"||o==="rdf:RDF"}return Rt}var po;function si(){return po||(po=1,function(l){"use strict";var e=St&&St.__createBinding||(Object.create?function(r,i,a,u){u===void 0&&(u=a);var d=Object.getOwnPropertyDescriptor(i,a);(!d||("get"in d?!i.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return i[a]}}),Object.defineProperty(r,u,d)}:function(r,i,a,u){u===void 0&&(u=a),r[u]=i[a]}),t=St&&St.__exportStar||function(r,i){for(var a in r)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&e(i,r,a)};Object.defineProperty(l,"__esModule",{value:!0}),l.hasChildren=l.isDocument=l.isComment=l.isText=l.isCDATA=l.isTag=void 0,t(to(),l),t(xd(),l),t(Sd(),l),t(so(),l),t(ao(),l),t(Cd(),l),t(kd(),l);var n=et();Object.defineProperty(l,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(l,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(l,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(l,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(l,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(l,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})}(St)),St}var ho;function Ed(){return ho||(ho=1,function(l){"use strict";var e=Ze&&Ze.__createBinding||(Object.create?function(v,x,w,S){S===void 0&&(S=w);var y=Object.getOwnPropertyDescriptor(x,w);(!y||("get"in y?!x.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return x[w]}}),Object.defineProperty(v,S,y)}:function(v,x,w,S){S===void 0&&(S=w),v[S]=x[w]}),t=Ze&&Ze.__setModuleDefault||(Object.create?function(v,x){Object.defineProperty(v,"default",{enumerable:!0,value:x})}:function(v,x){v.default=x}),n=Ze&&Ze.__importStar||function(v){if(v&&v.__esModule)return v;var x={};if(v!=null)for(var w in v)w!=="default"&&Object.prototype.hasOwnProperty.call(v,w)&&e(x,v,w);return t(x,v),x},r=Ze&&Ze.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0}),l.DomUtils=l.parseFeed=l.getFeed=l.ElementType=l.Tokenizer=l.createDomStream=l.parseDOM=l.parseDocument=l.DefaultHandler=l.DomHandler=l.Parser=void 0;var i=Us(),a=Us();Object.defineProperty(l,"Parser",{enumerable:!0,get:function(){return a.Parser}});var u=et(),d=et();Object.defineProperty(l,"DomHandler",{enumerable:!0,get:function(){return d.DomHandler}}),Object.defineProperty(l,"DefaultHandler",{enumerable:!0,get:function(){return d.DomHandler}});function p(v,x){var w=new u.DomHandler(void 0,x);return new i.Parser(w,x).end(v),w.root}l.parseDocument=p;function c(v,x){return p(v,x).children}l.parseDOM=c;function m(v,x,w){var S=new u.DomHandler(v,x,w);return new i.Parser(S,x)}l.createDomStream=m;var o=js();Object.defineProperty(l,"Tokenizer",{enumerable:!0,get:function(){return r(o).default}}),l.ElementType=n(It());var s=si(),h=si();Object.defineProperty(l,"getFeed",{enumerable:!0,get:function(){return h.getFeed}});var f={xmlMode:!0};function g(v,x){return x===void 0&&(x=f),(0,s.getFeed)(c(v,x))}l.parseFeed=g,l.DomUtils=n(si())}(Ze)),Ze}var fo,mo;function Td(){return mo||(mo=1,fo=l=>{if(typeof l!="string")throw new TypeError("Expected a string");return l.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}),fo}var pn={},go;function _d(){if(go)return pn;go=1,Object.defineProperty(pn,"__esModule",{value:!0});/*!
* is-plain-object <https://github.com/jonschlinkert/is-plain-object>
*
* Copyright (c) 2014-2017, Jon Schlinkert.
* Released under the MIT License.
*/function l(t){return Object.prototype.toString.call(t)==="[object Object]"}function e(t){var n,r;return l(t)===!1?!1:(n=t.constructor,n===void 0?!0:(r=n.prototype,!(l(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}return pn.isPlainObject=e,pn}var oi,vo;function Pd(){if(vo)return oi;vo=1;var l=function(v){return e(v)&&!t(v)};function e(v){return!!v&&typeof v=="object"}function t(v){var x=Object.prototype.toString.call(v);return x==="[object RegExp]"||x==="[object Date]"||i(v)}var n=typeof Symbol=="function"&&Symbol.for,r=n?Symbol.for("react.element"):60103;function i(v){return v.$$typeof===r}function a(v){return Array.isArray(v)?[]:{}}function u(v,x){return x.clone!==!1&&x.isMergeableObject(v)?f(a(v),v,x):v}function d(v,x,w){return v.concat(x).map(function(S){return u(S,w)})}function p(v,x){if(!x.customMerge)return f;var w=x.customMerge(v);return typeof w=="function"?w:f}function c(v){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(v).filter(function(x){return Object.propertyIsEnumerable.call(v,x)}):[]}function m(v){return Object.keys(v).concat(c(v))}function o(v,x){try{return x in v}catch{return!1}}function s(v,x){return o(v,x)&&!(Object.hasOwnProperty.call(v,x)&&Object.propertyIsEnumerable.call(v,x))}function h(v,x,w){var S={};return w.isMergeableObject(v)&&m(v).forEach(function(y){S[y]=u(v[y],w)}),m(x).forEach(function(y){s(v,y)||(o(v,y)&&w.isMergeableObject(x[y])?S[y]=p(y,w)(v[y],x[y],w):S[y]=u(x[y],w))}),S}function f(v,x,w){w=w||{},w.arrayMerge=w.arrayMerge||d,w.isMergeableObject=w.isMergeableObject||l,w.cloneUnlessOtherwiseSpecified=u;var S=Array.isArray(x),y=Array.isArray(v),b=S===y;return b?S?w.arrayMerge(v,x,w):h(v,x,w):u(x,w)}f.all=function(v,x){if(!Array.isArray(v))throw new Error("first argument should be an array");return v.reduce(function(w,S){return f(w,S,x)},{})};var g=f;return oi=g,oi}var ai={exports:{}},Md=ai.exports,yo;function Ad(){return yo||(yo=1,function(l){(function(e,t){l.exports?l.exports=t():e.parseSrcset=t()})(Md,function(){return function(e){function t(S){return S===" "||S==="	"||S===`
`||S==="\f"||S==="\r"}function n(S){var y,b=S.exec(e.substring(g));if(b)return y=b[0],g+=y.length,y}for(var r=e.length,i=/^[ \t\n\r\u000c]+/,a=/^[, \t\n\r\u000c]+/,u=/^[^ \t\n\r\u000c]+/,d=/[,]+$/,p=/^\d+$/,c=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m,o,s,h,f,g=0,v=[];;){if(n(a),g>=r)return v;m=n(u),o=[],m.slice(-1)===","?(m=m.replace(d,""),w()):x()}function x(){for(n(i),s="",h="in descriptor";;){if(f=e.charAt(g),h==="in descriptor")if(t(f))s&&(o.push(s),s="",h="after descriptor");else if(f===","){g+=1,s&&o.push(s),w();return}else if(f==="(")s=s+f,h="in parens";else if(f===""){s&&o.push(s),w();return}else s=s+f;else if(h==="in parens")if(f===")")s=s+f,h="in descriptor";else if(f===""){o.push(s),w();return}else s=s+f;else if(h==="after descriptor"&&!t(f))if(f===""){w();return}else h="in descriptor",g-=1;g+=1}}function w(){var S=!1,y,b,C,k,T={},P,E,O,A,D;for(k=0;k<o.length;k++)P=o[k],E=P[P.length-1],O=P.substring(0,P.length-1),A=parseInt(O,10),D=parseFloat(O),p.test(O)&&E==="w"?((y||b)&&(S=!0),A===0?S=!0:y=A):c.test(O)&&E==="x"?((y||b||C)&&(S=!0),D<0?S=!0:b=D):p.test(O)&&E==="h"?((C||b)&&(S=!0),A===0?S=!0:C=A):S=!0;S?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+P+"'."):(T.url=m,y&&(T.w=y),b&&(T.d=b),C&&(T.h=C),v.push(T))}}})}(ai)),ai.exports}var jt={exports:{}},zf=jt.exports,bo;function Od(){if(bo)return jt.exports;bo=1;var l=String,e=function(){return{isColorSupported:!1,reset:l,bold:l,dim:l,italic:l,underline:l,inverse:l,hidden:l,strikethrough:l,black:l,red:l,green:l,yellow:l,blue:l,magenta:l,cyan:l,white:l,gray:l,bgBlack:l,bgRed:l,bgGreen:l,bgYellow:l,bgBlue:l,bgMagenta:l,bgCyan:l,bgWhite:l,blackBright:l,redBright:l,greenBright:l,yellowBright:l,blueBright:l,magentaBright:l,cyanBright:l,whiteBright:l,bgBlackBright:l,bgRedBright:l,bgGreenBright:l,bgYellowBright:l,bgBlueBright:l,bgMagentaBright:l,bgCyanBright:l,bgWhiteBright:l}};return jt.exports=e(),jt.exports.createColors=e,jt.exports}const Dd={},Ld=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),wo=Ja(Ld);var li,xo;function ci(){if(xo)return li;xo=1;let l=Od(),e=wo;class t extends Error{constructor(r,i,a,u,d,p){super(r),this.name="CssSyntaxError",this.reason=r,d&&(this.file=d),u&&(this.source=u),p&&(this.plugin=p),typeof i<"u"&&typeof a<"u"&&(typeof i=="number"?(this.line=i,this.column=a):(this.line=i.line,this.column=i.column,this.endLine=a.line,this.endColumn=a.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,t)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(r){if(!this.source)return"";let i=this.source;r==null&&(r=l.isColorSupported);let a=s=>s,u=s=>s,d=s=>s;if(r){let{bold:s,gray:h,red:f}=l.createColors(!0);u=g=>s(f(g)),a=g=>h(g),e&&(d=g=>e(g))}let p=i.split(/\r?\n/),c=Math.max(this.line-3,0),m=Math.min(this.line+2,p.length),o=String(m).length;return p.slice(c,m).map((s,h)=>{let f=c+1+h,g=" "+(" "+f).slice(-o)+" | ";if(f===this.line){if(s.length>160){let x=20,w=Math.max(0,this.column-x),S=Math.max(this.column+x,this.endColumn+x),y=s.slice(w,S),b=a(g.replace(/\d/g," "))+s.slice(0,Math.min(this.column-1,x-1)).replace(/[^\t]/g," ");return u(">")+a(g)+d(y)+`
 `+b+u("^")}let v=a(g.replace(/\d/g," "))+s.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+a(g)+d(s)+`
 `+v+u("^")}return" "+a(g)+d(s)}).join(`
`)}toString(){let r=this.showSourceCode();return r&&(r=`

`+r+`
`),this.name+": "+this.message+r}}return li=t,t.default=t,li}var ui,So;function Co(){if(So)return ui;So=1;const l={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function e(n){return n[0].toUpperCase()+n.slice(1)}class t{constructor(r){this.builder=r}atrule(r,i){let a="@"+r.name,u=r.params?this.rawValue(r,"params"):"";if(typeof r.raws.afterName<"u"?a+=r.raws.afterName:u&&(a+=" "),r.nodes)this.block(r,a+u);else{let d=(r.raws.between||"")+(i?";":"");this.builder(a+u+d,r)}}beforeAfter(r,i){let a;r.type==="decl"?a=this.raw(r,null,"beforeDecl"):r.type==="comment"?a=this.raw(r,null,"beforeComment"):i==="before"?a=this.raw(r,null,"beforeRule"):a=this.raw(r,null,"beforeClose");let u=r.parent,d=0;for(;u&&u.type!=="root";)d+=1,u=u.parent;if(a.includes(`
`)){let p=this.raw(r,null,"indent");if(p.length)for(let c=0;c<d;c++)a+=p}return a}block(r,i){let a=this.raw(r,"between","beforeOpen");this.builder(i+a+"{",r,"start");let u;r.nodes&&r.nodes.length?(this.body(r),u=this.raw(r,"after")):u=this.raw(r,"after","emptyBody"),u&&this.builder(u),this.builder("}",r,"end")}body(r){let i=r.nodes.length-1;for(;i>0&&r.nodes[i].type==="comment";)i-=1;let a=this.raw(r,"semicolon");for(let u=0;u<r.nodes.length;u++){let d=r.nodes[u],p=this.raw(d,"before");p&&this.builder(p),this.stringify(d,i!==u||a)}}comment(r){let i=this.raw(r,"left","commentLeft"),a=this.raw(r,"right","commentRight");this.builder("/*"+i+r.text+a+"*/",r)}decl(r,i){let a=this.raw(r,"between","colon"),u=r.prop+a+this.rawValue(r,"value");r.important&&(u+=r.raws.important||" !important"),i&&(u+=";"),this.builder(u,r)}document(r){this.body(r)}raw(r,i,a){let u;if(a||(a=i),i&&(u=r.raws[i],typeof u<"u"))return u;let d=r.parent;if(a==="before"&&(!d||d.type==="root"&&d.first===r||d&&d.type==="document"))return"";if(!d)return l[a];let p=r.root();if(p.rawCache||(p.rawCache={}),typeof p.rawCache[a]<"u")return p.rawCache[a];if(a==="before"||a==="after")return this.beforeAfter(r,a);{let c="raw"+e(a);this[c]?u=this[c](p,r):p.walk(m=>{if(u=m.raws[i],typeof u<"u")return!1})}return typeof u>"u"&&(u=l[a]),p.rawCache[a]=u,u}rawBeforeClose(r){let i;return r.walk(a=>{if(a.nodes&&a.nodes.length>0&&typeof a.raws.after<"u")return i=a.raws.after,i.includes(`
`)&&(i=i.replace(/[^\n]+$/,"")),!1}),i&&(i=i.replace(/\S/g,"")),i}rawBeforeComment(r,i){let a;return r.walkComments(u=>{if(typeof u.raws.before<"u")return a=u.raws.before,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),typeof a>"u"?a=this.raw(i,null,"beforeDecl"):a&&(a=a.replace(/\S/g,"")),a}rawBeforeDecl(r,i){let a;return r.walkDecls(u=>{if(typeof u.raws.before<"u")return a=u.raws.before,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),typeof a>"u"?a=this.raw(i,null,"beforeRule"):a&&(a=a.replace(/\S/g,"")),a}rawBeforeOpen(r){let i;return r.walk(a=>{if(a.type!=="decl"&&(i=a.raws.between,typeof i<"u"))return!1}),i}rawBeforeRule(r){let i;return r.walk(a=>{if(a.nodes&&(a.parent!==r||r.first!==a)&&typeof a.raws.before<"u")return i=a.raws.before,i.includes(`
`)&&(i=i.replace(/[^\n]+$/,"")),!1}),i&&(i=i.replace(/\S/g,"")),i}rawColon(r){let i;return r.walkDecls(a=>{if(typeof a.raws.between<"u")return i=a.raws.between.replace(/[^\s:]/g,""),!1}),i}rawEmptyBody(r){let i;return r.walk(a=>{if(a.nodes&&a.nodes.length===0&&(i=a.raws.after,typeof i<"u"))return!1}),i}rawIndent(r){if(r.raws.indent)return r.raws.indent;let i;return r.walk(a=>{let u=a.parent;if(u&&u!==r&&u.parent&&u.parent===r&&typeof a.raws.before<"u"){let d=a.raws.before.split(`
`);return i=d[d.length-1],i=i.replace(/\S/g,""),!1}}),i}rawSemicolon(r){let i;return r.walk(a=>{if(a.nodes&&a.nodes.length&&a.last.type==="decl"&&(i=a.raws.semicolon,typeof i<"u"))return!1}),i}rawValue(r,i){let a=r[i],u=r.raws[i];return u&&u.value===a?u.raw:a}root(r){this.body(r),r.raws.after&&this.builder(r.raws.after)}rule(r){this.block(r,this.rawValue(r,"selector")),r.raws.ownSemicolon&&this.builder(r.raws.ownSemicolon,r,"end")}stringify(r,i){if(!this[r.type])throw new Error("Unknown AST node type "+r.type+". Maybe you need to change PostCSS stringifier.");this[r.type](r,i)}}return ui=t,t.default=t,ui}var pi,ko;function dn(){if(ko)return pi;ko=1;let l=Co();function e(t,n){new l(n).stringify(t)}return pi=e,e.default=e,pi}var di={},Eo;function hi(){return Eo||(Eo=1,di.isClean=Symbol("isClean"),di.my=Symbol("my")),di}var fi,To;function hn(){if(To)return fi;To=1;let l=ci(),e=Co(),t=dn(),{isClean:n,my:r}=hi();function i(d,p){let c=new d.constructor;for(let m in d){if(!Object.prototype.hasOwnProperty.call(d,m)||m==="proxyCache")continue;let o=d[m],s=typeof o;m==="parent"&&s==="object"?p&&(c[m]=p):m==="source"?c[m]=o:Array.isArray(o)?c[m]=o.map(h=>i(h,c)):(s==="object"&&o!==null&&(o=i(o)),c[m]=o)}return c}function a(d,p){if(p&&typeof p.offset<"u")return p.offset;let c=1,m=1,o=0;for(let s=0;s<d.length;s++){if(m===p.line&&c===p.column){o=s;break}d[s]===`
`?(c=1,m+=1):c+=1}return o}class u{constructor(p={}){this.raws={},this[n]=!1,this[r]=!0;for(let c in p)if(c==="nodes"){this.nodes=[];for(let m of p[c])typeof m.clone=="function"?this.append(m.clone()):this.append(m)}else this[c]=p[c]}addToError(p){if(p.postcssNode=this,p.stack&&this.source&&/\n\s{4}at /.test(p.stack)){let c=this.source;p.stack=p.stack.replace(/\n\s{4}at /,`$&${c.input.from}:${c.start.line}:${c.start.column}$&`)}return p}after(p){return this.parent.insertAfter(this,p),this}assign(p={}){for(let c in p)this[c]=p[c];return this}before(p){return this.parent.insertBefore(this,p),this}cleanRaws(p){delete this.raws.before,delete this.raws.after,p||delete this.raws.between}clone(p={}){let c=i(this);for(let m in p)c[m]=p[m];return c}cloneAfter(p={}){let c=this.clone(p);return this.parent.insertAfter(this,c),c}cloneBefore(p={}){let c=this.clone(p);return this.parent.insertBefore(this,c),c}error(p,c={}){if(this.source){let{end:m,start:o}=this.rangeBy(c);return this.source.input.error(p,{column:o.column,line:o.line},{column:m.column,line:m.line},c)}return new l(p)}getProxyProcessor(){return{get(p,c){return c==="proxyOf"?p:c==="root"?()=>p.root().toProxy():p[c]},set(p,c,m){return p[c]===m||(p[c]=m,(c==="prop"||c==="value"||c==="name"||c==="params"||c==="important"||c==="text")&&p.markDirty()),!0}}}markClean(){this[n]=!0}markDirty(){if(this[n]){this[n]=!1;let p=this;for(;p=p.parent;)p[n]=!1}}next(){if(!this.parent)return;let p=this.parent.index(this);return this.parent.nodes[p+1]}positionBy(p){let c=this.source.start;if(p.index)c=this.positionInside(p.index);else if(p.word){let m=this.source.input.css.slice(a(this.source.input.css,this.source.start),a(this.source.input.css,this.source.end)).indexOf(p.word);m!==-1&&(c=this.positionInside(m))}return c}positionInside(p){let c=this.source.start.column,m=this.source.start.line,o=a(this.source.input.css,this.source.start),s=o+p;for(let h=o;h<s;h++)this.source.input.css[h]===`
`?(c=1,m+=1):c+=1;return{column:c,line:m}}prev(){if(!this.parent)return;let p=this.parent.index(this);return this.parent.nodes[p-1]}rangeBy(p){let c={column:this.source.start.column,line:this.source.start.line},m=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:c.column+1,line:c.line};if(p.word){let o=this.source.input.css.slice(a(this.source.input.css,this.source.start),a(this.source.input.css,this.source.end)).indexOf(p.word);o!==-1&&(c=this.positionInside(o),m=this.positionInside(o+p.word.length))}else p.start?c={column:p.start.column,line:p.start.line}:p.index&&(c=this.positionInside(p.index)),p.end?m={column:p.end.column,line:p.end.line}:typeof p.endIndex=="number"?m=this.positionInside(p.endIndex):p.index&&(m=this.positionInside(p.index+1));return(m.line<c.line||m.line===c.line&&m.column<=c.column)&&(m={column:c.column+1,line:c.line}),{end:m,start:c}}raw(p,c){return new e().raw(this,p,c)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...p){if(this.parent){let c=this,m=!1;for(let o of p)o===this?m=!0:m?(this.parent.insertAfter(c,o),c=o):this.parent.insertBefore(c,o);m||this.remove()}return this}root(){let p=this;for(;p.parent&&p.parent.type!=="document";)p=p.parent;return p}toJSON(p,c){let m={},o=c==null;c=c||new Map;let s=0;for(let h in this){if(!Object.prototype.hasOwnProperty.call(this,h)||h==="parent"||h==="proxyCache")continue;let f=this[h];if(Array.isArray(f))m[h]=f.map(g=>typeof g=="object"&&g.toJSON?g.toJSON(null,c):g);else if(typeof f=="object"&&f.toJSON)m[h]=f.toJSON(null,c);else if(h==="source"){let g=c.get(f.input);g==null&&(g=s,c.set(f.input,s),s++),m[h]={end:f.end,inputId:g,start:f.start}}else m[h]=f}return o&&(m.inputs=[...c.keys()].map(h=>h.toJSON())),m}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(p=t){p.stringify&&(p=p.stringify);let c="";return p(this,m=>{c+=m}),c}warn(p,c,m){let o={node:this};for(let s in m)o[s]=m[s];return p.warn(c,o)}get proxyOf(){return this}}return fi=u,u.default=u,fi}var mi,_o;function fn(){if(_o)return mi;_o=1;let l=hn();class e extends l{constructor(n){super(n),this.type="comment"}}return mi=e,e.default=e,mi}var gi,Po;function mn(){if(Po)return gi;Po=1;let l=hn();class e extends l{constructor(n){n&&typeof n.value<"u"&&typeof n.value!="string"&&(n={...n,value:String(n.value)}),super(n),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}}return gi=e,e.default=e,gi}var vi,Mo;function ut(){if(Mo)return vi;Mo=1;let l=fn(),e=mn(),t=hn(),{isClean:n,my:r}=hi(),i,a,u,d;function p(o){return o.map(s=>(s.nodes&&(s.nodes=p(s.nodes)),delete s.source,s))}function c(o){if(o[n]=!1,o.proxyOf.nodes)for(let s of o.proxyOf.nodes)c(s)}class m extends t{append(...s){for(let h of s){let f=this.normalize(h,this.last);for(let g of f)this.proxyOf.nodes.push(g)}return this.markDirty(),this}cleanRaws(s){if(super.cleanRaws(s),this.nodes)for(let h of this.nodes)h.cleanRaws(s)}each(s){if(!this.proxyOf.nodes)return;let h=this.getIterator(),f,g;for(;this.indexes[h]<this.proxyOf.nodes.length&&(f=this.indexes[h],g=s(this.proxyOf.nodes[f],f),g!==!1);)this.indexes[h]+=1;return delete this.indexes[h],g}every(s){return this.nodes.every(s)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let s=this.lastEach;return this.indexes[s]=0,s}getProxyProcessor(){return{get(s,h){return h==="proxyOf"?s:s[h]?h==="each"||typeof h=="string"&&h.startsWith("walk")?(...f)=>s[h](...f.map(g=>typeof g=="function"?(v,x)=>g(v.toProxy(),x):g)):h==="every"||h==="some"?f=>s[h]((g,...v)=>f(g.toProxy(),...v)):h==="root"?()=>s.root().toProxy():h==="nodes"?s.nodes.map(f=>f.toProxy()):h==="first"||h==="last"?s[h].toProxy():s[h]:s[h]},set(s,h,f){return s[h]===f||(s[h]=f,(h==="name"||h==="params"||h==="selector")&&s.markDirty()),!0}}}index(s){return typeof s=="number"?s:(s.proxyOf&&(s=s.proxyOf),this.proxyOf.nodes.indexOf(s))}insertAfter(s,h){let f=this.index(s),g=this.normalize(h,this.proxyOf.nodes[f]).reverse();f=this.index(s);for(let x of g)this.proxyOf.nodes.splice(f+1,0,x);let v;for(let x in this.indexes)v=this.indexes[x],f<v&&(this.indexes[x]=v+g.length);return this.markDirty(),this}insertBefore(s,h){let f=this.index(s),g=f===0?"prepend":!1,v=this.normalize(h,this.proxyOf.nodes[f],g).reverse();f=this.index(s);for(let w of v)this.proxyOf.nodes.splice(f,0,w);let x;for(let w in this.indexes)x=this.indexes[w],f<=x&&(this.indexes[w]=x+v.length);return this.markDirty(),this}normalize(s,h){if(typeof s=="string")s=p(a(s).nodes);else if(typeof s>"u")s=[];else if(Array.isArray(s)){s=s.slice(0);for(let f of s)f.parent&&f.parent.removeChild(f,"ignore")}else if(s.type==="root"&&this.type!=="document"){s=s.nodes.slice(0);for(let f of s)f.parent&&f.parent.removeChild(f,"ignore")}else if(s.type)s=[s];else if(s.prop){if(typeof s.value>"u")throw new Error("Value field is missed in node creation");typeof s.value!="string"&&(s.value=String(s.value)),s=[new e(s)]}else if(s.selector||s.selectors)s=[new d(s)];else if(s.name)s=[new i(s)];else if(s.text)s=[new l(s)];else throw new Error("Unknown node type in node creation");return s.map(f=>(f[r]||m.rebuild(f),f=f.proxyOf,f.parent&&f.parent.removeChild(f),f[n]&&c(f),f.raws||(f.raws={}),typeof f.raws.before>"u"&&h&&typeof h.raws.before<"u"&&(f.raws.before=h.raws.before.replace(/\S/g,"")),f.parent=this.proxyOf,f))}prepend(...s){s=s.reverse();for(let h of s){let f=this.normalize(h,this.first,"prepend").reverse();for(let g of f)this.proxyOf.nodes.unshift(g);for(let g in this.indexes)this.indexes[g]=this.indexes[g]+f.length}return this.markDirty(),this}push(s){return s.parent=this,this.proxyOf.nodes.push(s),this}removeAll(){for(let s of this.proxyOf.nodes)s.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(s){s=this.index(s),this.proxyOf.nodes[s].parent=void 0,this.proxyOf.nodes.splice(s,1);let h;for(let f in this.indexes)h=this.indexes[f],h>=s&&(this.indexes[f]=h-1);return this.markDirty(),this}replaceValues(s,h,f){return f||(f=h,h={}),this.walkDecls(g=>{h.props&&!h.props.includes(g.prop)||h.fast&&!g.value.includes(h.fast)||(g.value=g.value.replace(s,f))}),this.markDirty(),this}some(s){return this.nodes.some(s)}walk(s){return this.each((h,f)=>{let g;try{g=s(h,f)}catch(v){throw h.addToError(v)}return g!==!1&&h.walk&&(g=h.walk(s)),g})}walkAtRules(s,h){return h?s instanceof RegExp?this.walk((f,g)=>{if(f.type==="atrule"&&s.test(f.name))return h(f,g)}):this.walk((f,g)=>{if(f.type==="atrule"&&f.name===s)return h(f,g)}):(h=s,this.walk((f,g)=>{if(f.type==="atrule")return h(f,g)}))}walkComments(s){return this.walk((h,f)=>{if(h.type==="comment")return s(h,f)})}walkDecls(s,h){return h?s instanceof RegExp?this.walk((f,g)=>{if(f.type==="decl"&&s.test(f.prop))return h(f,g)}):this.walk((f,g)=>{if(f.type==="decl"&&f.prop===s)return h(f,g)}):(h=s,this.walk((f,g)=>{if(f.type==="decl")return h(f,g)}))}walkRules(s,h){return h?s instanceof RegExp?this.walk((f,g)=>{if(f.type==="rule"&&s.test(f.selector))return h(f,g)}):this.walk((f,g)=>{if(f.type==="rule"&&f.selector===s)return h(f,g)}):(h=s,this.walk((f,g)=>{if(f.type==="rule")return h(f,g)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}return m.registerParse=o=>{a=o},m.registerRule=o=>{d=o},m.registerAtRule=o=>{i=o},m.registerRoot=o=>{u=o},vi=m,m.default=m,m.rebuild=o=>{o.type==="atrule"?Object.setPrototypeOf(o,i.prototype):o.type==="rule"?Object.setPrototypeOf(o,d.prototype):o.type==="decl"?Object.setPrototypeOf(o,e.prototype):o.type==="comment"?Object.setPrototypeOf(o,l.prototype):o.type==="root"&&Object.setPrototypeOf(o,u.prototype),o[r]=!0,o.nodes&&o.nodes.forEach(s=>{m.rebuild(s)})},vi}var yi,Ao;function bi(){if(Ao)return yi;Ao=1;let l=ut();class e extends l{constructor(n){super(n),this.type="atrule"}append(...n){return this.proxyOf.nodes||(this.nodes=[]),super.append(...n)}prepend(...n){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...n)}}return yi=e,e.default=e,l.registerAtRule(e),yi}var wi,Oo;function xi(){if(Oo)return wi;Oo=1;let l=ut(),e,t;class n extends l{constructor(i){super({type:"document",...i}),this.nodes||(this.nodes=[])}toResult(i={}){return new e(new t,this,i).stringify()}}return n.registerLazyResult=r=>{e=r},n.registerProcessor=r=>{t=r},wi=n,n.default=n,wi}var Si,Do;function Bd(){if(Do)return Si;Do=1;let l="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return Si={nanoid:(e=21)=>{let t="",n=e;for(;n--;)t+=l[Math.random()*64|0];return t},customAlphabet:(e,t=21)=>(n=t)=>{let r="",i=n;for(;i--;)r+=e[Math.random()*e.length|0];return r}},Si}const Id={paths:{"@/*":["./*"]}},$e={compilerOptions:Id};var Ci,Lo;function Bo(){if(Lo)return Ci;Lo=1;let{existsSync:l,readFileSync:e}=$e,{dirname:t,join:n}=$e,{SourceMapConsumer:r,SourceMapGenerator:i}=$e;function a(d){return Buffer?Buffer.from(d,"base64").toString():window.atob(d)}class u{constructor(p,c){if(c.map===!1)return;this.loadAnnotation(p),this.inline=this.startWith(this.annotation,"data:");let m=c.map?c.map.prev:void 0,o=this.loadMap(c.from,m);!this.mapFile&&c.from&&(this.mapFile=c.from),this.mapFile&&(this.root=t(this.mapFile)),o&&(this.text=o)}consumer(){return this.consumerCache||(this.consumerCache=new r(this.text)),this.consumerCache}decodeInline(p){let c=/^data:application\/json;charset=utf-?8;base64,/,m=/^data:application\/json;base64,/,o=/^data:application\/json;charset=utf-?8,/,s=/^data:application\/json,/,h=p.match(o)||p.match(s);if(h)return decodeURIComponent(p.substr(h[0].length));let f=p.match(c)||p.match(m);if(f)return a(p.substr(f[0].length));let g=p.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+g)}getAnnotationURL(p){return p.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(p){return typeof p!="object"?!1:typeof p.mappings=="string"||typeof p._mappings=="string"||Array.isArray(p.sections)}loadAnnotation(p){let c=p.match(/\/\*\s*# sourceMappingURL=/g);if(!c)return;let m=p.lastIndexOf(c.pop()),o=p.indexOf("*/",m);m>-1&&o>-1&&(this.annotation=this.getAnnotationURL(p.substring(m,o)))}loadFile(p){if(this.root=t(p),l(p))return this.mapFile=p,e(p,"utf-8").toString().trim()}loadMap(p,c){if(c===!1)return!1;if(c){if(typeof c=="string")return c;if(typeof c=="function"){let m=c(p);if(m){let o=this.loadFile(m);if(!o)throw new Error("Unable to load previous source map: "+m.toString());return o}}else{if(c instanceof r)return i.fromSourceMap(c).toString();if(c instanceof i)return c.toString();if(this.isMap(c))return JSON.stringify(c);throw new Error("Unsupported previous source map format: "+c.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let m=this.annotation;return p&&(m=n(t(p),m)),this.loadFile(m)}}}startWith(p,c){return p?p.substr(0,c.length)===c:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return Ci=u,u.default=u,Ci}var ki,Io;function gn(){if(Io)return ki;Io=1;let{nanoid:l}=Bd(),{isAbsolute:e,resolve:t}=$e,{SourceMapConsumer:n,SourceMapGenerator:r}=$e,{fileURLToPath:i,pathToFileURL:a}=$e,u=ci(),d=Bo(),p=wo,c=Symbol("fromOffsetCache"),m=!!(n&&r),o=!!(t&&e);class s{constructor(f,g={}){if(f===null||typeof f>"u"||typeof f=="object"&&!f.toString)throw new Error(`PostCSS received ${f} instead of CSS string`);if(this.css=f.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,g.from&&(!o||/^\w+:\/\//.test(g.from)||e(g.from)?this.file=g.from:this.file=t(g.from)),o&&m){let v=new d(this.css,g);if(v.text){this.map=v;let x=v.consumer().file;!this.file&&x&&(this.file=this.mapResolve(x))}}this.file||(this.id="<input css "+l(6)+">"),this.map&&(this.map.file=this.from)}error(f,g,v,x={}){let w,S,y;if(g&&typeof g=="object"){let C=g,k=v;if(typeof C.offset=="number"){let T=this.fromOffset(C.offset);g=T.line,v=T.col}else g=C.line,v=C.column;if(typeof k.offset=="number"){let T=this.fromOffset(k.offset);S=T.line,w=T.col}else S=k.line,w=k.column}else if(!v){let C=this.fromOffset(g);g=C.line,v=C.col}let b=this.origin(g,v,S,w);return b?y=new u(f,b.endLine===void 0?b.line:{column:b.column,line:b.line},b.endLine===void 0?b.column:{column:b.endColumn,line:b.endLine},b.source,b.file,x.plugin):y=new u(f,S===void 0?g:{column:v,line:g},S===void 0?v:{column:w,line:S},this.css,this.file,x.plugin),y.input={column:v,endColumn:w,endLine:S,line:g,source:this.css},this.file&&(a&&(y.input.url=a(this.file).toString()),y.input.file=this.file),y}fromOffset(f){let g,v;if(this[c])v=this[c];else{let w=this.css.split(`
`);v=new Array(w.length);let S=0;for(let y=0,b=w.length;y<b;y++)v[y]=S,S+=w[y].length+1;this[c]=v}g=v[v.length-1];let x=0;if(f>=g)x=v.length-1;else{let w=v.length-2,S;for(;x<w;)if(S=x+(w-x>>1),f<v[S])w=S-1;else if(f>=v[S+1])x=S+1;else{x=S;break}}return{col:f-v[x]+1,line:x+1}}mapResolve(f){return/^\w+:\/\//.test(f)?f:t(this.map.consumer().sourceRoot||this.map.root||".",f)}origin(f,g,v,x){if(!this.map)return!1;let w=this.map.consumer(),S=w.originalPositionFor({column:g,line:f});if(!S.source)return!1;let y;typeof v=="number"&&(y=w.originalPositionFor({column:x,line:v}));let b;e(S.source)?b=a(S.source):b=new URL(S.source,this.map.consumer().sourceRoot||a(this.map.mapFile));let C={column:S.column,endColumn:y&&y.column,endLine:y&&y.line,line:S.line,url:b.toString()};if(b.protocol==="file:")if(i)C.file=i(b);else throw new Error("file: protocol is not available in this PostCSS build");let k=w.sourceContentFor(S.source);return k&&(C.source=k),C}toJSON(){let f={};for(let g of["hasBOM","css","file","id"])this[g]!=null&&(f[g]=this[g]);return this.map&&(f.map={...this.map},f.map.consumerCache&&(f.map.consumerCache=void 0)),f}get from(){return this.file||this.id}}return ki=s,s.default=s,p&&p.registerInput&&p.registerInput(s),ki}var Ei,Ro;function zt(){if(Ro)return Ei;Ro=1;let l=ut(),e,t;class n extends l{constructor(i){super(i),this.type="root",this.nodes||(this.nodes=[])}normalize(i,a,u){let d=super.normalize(i);if(a){if(u==="prepend")this.nodes.length>1?a.raws.before=this.nodes[1].raws.before:delete a.raws.before;else if(this.first!==a)for(let p of d)p.raws.before=a.raws.before}return d}removeChild(i,a){let u=this.index(i);return!a&&u===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[u].raws.before),super.removeChild(i)}toResult(i={}){return new e(new t,this,i).stringify()}}return n.registerLazyResult=r=>{e=r},n.registerProcessor=r=>{t=r},Ei=n,n.default=n,l.registerRoot(n),Ei}var Ti,jo;function zo(){if(jo)return Ti;jo=1;let l={comma(e){return l.split(e,[","],!0)},space(e){let t=[" ",`
`,"	"];return l.split(e,t)},split(e,t,n){let r=[],i="",a=!1,u=0,d=!1,p="",c=!1;for(let m of e)c?c=!1:m==="\\"?c=!0:d?m===p&&(d=!1):m==='"'||m==="'"?(d=!0,p=m):m==="("?u+=1:m===")"?u>0&&(u-=1):u===0&&t.includes(m)&&(a=!0),a?(i!==""&&r.push(i.trim()),i="",a=!1):i+=m;return(n||i!=="")&&r.push(i.trim()),r}};return Ti=l,l.default=l,Ti}var _i,Uo;function Pi(){if(Uo)return _i;Uo=1;let l=ut(),e=zo();class t extends l{constructor(r){super(r),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return e.comma(this.selector)}set selectors(r){let i=this.selector?this.selector.match(/,\s*/):null,a=i?i[0]:","+this.raw("between","beforeOpen");this.selector=r.join(a)}}return _i=t,t.default=t,l.registerRule(t),_i}var Mi,No;function Rd(){if(No)return Mi;No=1;let l=bi(),e=fn(),t=mn(),n=gn(),r=Bo(),i=zt(),a=Pi();function u(d,p){if(Array.isArray(d))return d.map(o=>u(o));let{inputs:c,...m}=d;if(c){p=[];for(let o of c){let s={...o,__proto__:n.prototype};s.map&&(s.map={...s.map,__proto__:r.prototype}),p.push(s)}}if(m.nodes&&(m.nodes=d.nodes.map(o=>u(o,p))),m.source){let{inputId:o,...s}=m.source;m.source=s,o!=null&&(m.source.input=p[o])}if(m.type==="root")return new i(m);if(m.type==="decl")return new t(m);if(m.type==="rule")return new a(m);if(m.type==="comment")return new e(m);if(m.type==="atrule")return new l(m);throw new Error("Unknown node type: "+d.type)}return Mi=u,u.default=u,Mi}var Ai,Fo;function qo(){if(Fo)return Ai;Fo=1;let{dirname:l,relative:e,resolve:t,sep:n}=$e,{SourceMapConsumer:r,SourceMapGenerator:i}=$e,{pathToFileURL:a}=$e,u=gn(),d=!!(r&&i),p=!!(l&&t&&e&&n);class c{constructor(o,s,h,f){this.stringify=o,this.mapOpts=h.map||{},this.root=s,this.opts=h,this.css=f,this.originalCSS=f,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let o;this.isInline()?o="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?o=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?o=this.mapOpts.annotation(this.opts.to,this.root):o=this.outputFile()+".map";let s=`
`;this.css.includes(`\r
`)&&(s=`\r
`),this.css+=s+"/*# sourceMappingURL="+o+" */"}applyPrevMaps(){for(let o of this.previous()){let s=this.toUrl(this.path(o.file)),h=o.root||l(o.file),f;this.mapOpts.sourcesContent===!1?(f=new r(o.text),f.sourcesContent&&(f.sourcesContent=null)):f=o.consumer(),this.map.applySourceMap(f,s,this.toUrl(this.path(h)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let o;for(let s=this.root.nodes.length-1;s>=0;s--)o=this.root.nodes[s],o.type==="comment"&&o.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(s)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),p&&d&&this.isMap())return this.generateMap();{let o="";return this.stringify(this.root,s=>{o+=s}),[o]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let o=this.previous()[0].consumer();o.file=this.outputFile(),this.map=i.fromSourceMap(o,{ignoreInvalidMapping:!0})}else this.map=new i({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new i({file:this.outputFile(),ignoreInvalidMapping:!0});let o=1,s=1,h="<no source>",f={generated:{column:0,line:0},original:{column:0,line:0},source:""},g,v;this.stringify(this.root,(x,w,S)=>{if(this.css+=x,w&&S!=="end"&&(f.generated.line=o,f.generated.column=s-1,w.source&&w.source.start?(f.source=this.sourcePath(w),f.original.line=w.source.start.line,f.original.column=w.source.start.column-1,this.map.addMapping(f)):(f.source=h,f.original.line=1,f.original.column=0,this.map.addMapping(f))),v=x.match(/\n/g),v?(o+=v.length,g=x.lastIndexOf(`
`),s=x.length-g):s+=x.length,w&&S!=="start"){let y=w.parent||{raws:{}};(!(w.type==="decl"||w.type==="atrule"&&!w.nodes)||w!==y.last||y.raws.semicolon)&&(w.source&&w.source.end?(f.source=this.sourcePath(w),f.original.line=w.source.end.line,f.original.column=w.source.end.column-1,f.generated.line=o,f.generated.column=s-2,this.map.addMapping(f)):(f.source=h,f.original.line=1,f.original.column=0,f.generated.line=o,f.generated.column=s-1,this.map.addMapping(f)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(o=>o.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let o=this.mapOpts.annotation;return typeof o<"u"&&o!==!0?!1:this.previous().length?this.previous().some(s=>s.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(o=>o.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(o){if(this.mapOpts.absolute||o.charCodeAt(0)===60||/^\w+:\/\//.test(o))return o;let s=this.memoizedPaths.get(o);if(s)return s;let h=this.opts.to?l(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(h=l(t(h,this.mapOpts.annotation)));let f=e(h,o);return this.memoizedPaths.set(o,f),f}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(o=>{if(o.source&&o.source.input.map){let s=o.source.input.map;this.previousMaps.includes(s)||this.previousMaps.push(s)}});else{let o=new u(this.originalCSS,this.opts);o.map&&this.previousMaps.push(o.map)}return this.previousMaps}setSourcesContent(){let o={};if(this.root)this.root.walk(s=>{if(s.source){let h=s.source.input.from;if(h&&!o[h]){o[h]=!0;let f=this.usesFileUrls?this.toFileUrl(h):this.toUrl(this.path(h));this.map.setSourceContent(f,s.source.input.css)}}});else if(this.css){let s=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(s,this.css)}}sourcePath(o){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(o.source.input.from):this.toUrl(this.path(o.source.input.from))}toBase64(o){return Buffer?Buffer.from(o).toString("base64"):window.btoa(unescape(encodeURIComponent(o)))}toFileUrl(o){let s=this.memoizedFileURLs.get(o);if(s)return s;if(a){let h=a(o).toString();return this.memoizedFileURLs.set(o,h),h}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(o){let s=this.memoizedURLs.get(o);if(s)return s;n==="\\"&&(o=o.replace(/\\/g,"/"));let h=encodeURI(o).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(o,h),h}}return Ai=c,Ai}var Oi,Ho;function jd(){if(Ho)return Oi;Ho=1;const l=39,e=34,t=92,n=47,r=10,i=32,a=12,u=9,d=13,p=91,c=93,m=40,o=41,s=123,h=125,f=59,g=42,v=58,x=64,w=/[\t\n\f\r "#'()/;[\\\]{}]/g,S=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,y=/.[\r\n"'(/\\]/,b=/[\da-f]/i;return Oi=function(C,k={}){let T=C.css.valueOf(),P=k.ignoreErrors,E,O,A,D,B,L,M,I,H,J,ee=T.length,F=0,se=[],$=[];function xe(){return F}function re(je){throw C.error("Unclosed "+je,F)}function Oe(){return $.length===0&&F>=ee}function Se(je){if($.length)return $.pop();if(F>=ee)return;let z=je?je.ignoreUnclosed:!1;switch(E=T.charCodeAt(F),E){case r:case i:case u:case d:case a:{D=F;do D+=1,E=T.charCodeAt(D);while(E===i||E===r||E===u||E===d||E===a);L=["space",T.slice(F,D)],F=D-1;break}case p:case c:case s:case h:case v:case f:case o:{let q=String.fromCharCode(E);L=[q,q,F];break}case m:{if(J=se.length?se.pop()[1]:"",H=T.charCodeAt(F+1),J==="url"&&H!==l&&H!==e&&H!==i&&H!==r&&H!==u&&H!==a&&H!==d){D=F;do{if(M=!1,D=T.indexOf(")",D+1),D===-1)if(P||z){D=F;break}else re("bracket");for(I=D;T.charCodeAt(I-1)===t;)I-=1,M=!M}while(M);L=["brackets",T.slice(F,D+1),F,D],F=D}else D=T.indexOf(")",F+1),O=T.slice(F,D+1),D===-1||y.test(O)?L=["(","(",F]:(L=["brackets",O,F,D],F=D);break}case l:case e:{B=E===l?"'":'"',D=F;do{if(M=!1,D=T.indexOf(B,D+1),D===-1)if(P||z){D=F+1;break}else re("string");for(I=D;T.charCodeAt(I-1)===t;)I-=1,M=!M}while(M);L=["string",T.slice(F,D+1),F,D],F=D;break}case x:{w.lastIndex=F+1,w.test(T),w.lastIndex===0?D=T.length-1:D=w.lastIndex-2,L=["at-word",T.slice(F,D+1),F,D],F=D;break}case t:{for(D=F,A=!0;T.charCodeAt(D+1)===t;)D+=1,A=!A;if(E=T.charCodeAt(D+1),A&&E!==n&&E!==i&&E!==r&&E!==u&&E!==d&&E!==a&&(D+=1,b.test(T.charAt(D)))){for(;b.test(T.charAt(D+1));)D+=1;T.charCodeAt(D+1)===i&&(D+=1)}L=["word",T.slice(F,D+1),F,D],F=D;break}default:{E===n&&T.charCodeAt(F+1)===g?(D=T.indexOf("*/",F+2)+1,D===0&&(P||z?D=T.length:re("comment")),L=["comment",T.slice(F,D+1),F,D],F=D):(S.lastIndex=F+1,S.test(T),S.lastIndex===0?D=T.length-1:D=S.lastIndex-2,L=["word",T.slice(F,D+1),F,D],se.push(L),F=D);break}}return F++,L}function kt(je){$.push(je)}return{back:kt,endOfFile:Oe,nextToken:Se,position:xe}},Oi}var Di,Vo;function zd(){if(Vo)return Di;Vo=1;let l=bi(),e=fn(),t=mn(),n=zt(),r=Pi(),i=jd();const a={empty:!0,space:!0};function u(p){for(let c=p.length-1;c>=0;c--){let m=p[c],o=m[3]||m[2];if(o)return o}}class d{constructor(c){this.input=c,this.root=new n,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:c,start:{column:1,line:1,offset:0}}}atrule(c){let m=new l;m.name=c[1].slice(1),m.name===""&&this.unnamedAtrule(m,c),this.init(m,c[2]);let o,s,h,f=!1,g=!1,v=[],x=[];for(;!this.tokenizer.endOfFile();){if(c=this.tokenizer.nextToken(),o=c[0],o==="("||o==="["?x.push(o==="("?")":"]"):o==="{"&&x.length>0?x.push("}"):o===x[x.length-1]&&x.pop(),x.length===0)if(o===";"){m.source.end=this.getPosition(c[2]),m.source.end.offset++,this.semicolon=!0;break}else if(o==="{"){g=!0;break}else if(o==="}"){if(v.length>0){for(h=v.length-1,s=v[h];s&&s[0]==="space";)s=v[--h];s&&(m.source.end=this.getPosition(s[3]||s[2]),m.source.end.offset++)}this.end(c);break}else v.push(c);else v.push(c);if(this.tokenizer.endOfFile()){f=!0;break}}m.raws.between=this.spacesAndCommentsFromEnd(v),v.length?(m.raws.afterName=this.spacesAndCommentsFromStart(v),this.raw(m,"params",v),f&&(c=v[v.length-1],m.source.end=this.getPosition(c[3]||c[2]),m.source.end.offset++,this.spaces=m.raws.between,m.raws.between="")):(m.raws.afterName="",m.params=""),g&&(m.nodes=[],this.current=m)}checkMissedSemicolon(c){let m=this.colon(c);if(m===!1)return;let o=0,s;for(let h=m-1;h>=0&&(s=c[h],!(s[0]!=="space"&&(o+=1,o===2)));h--);throw this.input.error("Missed semicolon",s[0]==="word"?s[3]+1:s[2])}colon(c){let m=0,o,s,h;for(let[f,g]of c.entries()){if(s=g,h=s[0],h==="("&&(m+=1),h===")"&&(m-=1),m===0&&h===":")if(!o)this.doubleColon(s);else{if(o[0]==="word"&&o[1]==="progid")continue;return f}o=s}return!1}comment(c){let m=new e;this.init(m,c[2]),m.source.end=this.getPosition(c[3]||c[2]),m.source.end.offset++;let o=c[1].slice(2,-2);if(/^\s*$/.test(o))m.text="",m.raws.left=o,m.raws.right="";else{let s=o.match(/^(\s*)([^]*\S)(\s*)$/);m.text=s[2],m.raws.left=s[1],m.raws.right=s[3]}}createTokenizer(){this.tokenizer=i(this.input)}decl(c,m){let o=new t;this.init(o,c[0][2]);let s=c[c.length-1];for(s[0]===";"&&(this.semicolon=!0,c.pop()),o.source.end=this.getPosition(s[3]||s[2]||u(c)),o.source.end.offset++;c[0][0]!=="word";)c.length===1&&this.unknownWord(c),o.raws.before+=c.shift()[1];for(o.source.start=this.getPosition(c[0][2]),o.prop="";c.length;){let v=c[0][0];if(v===":"||v==="space"||v==="comment")break;o.prop+=c.shift()[1]}o.raws.between="";let h;for(;c.length;)if(h=c.shift(),h[0]===":"){o.raws.between+=h[1];break}else h[0]==="word"&&/\w/.test(h[1])&&this.unknownWord([h]),o.raws.between+=h[1];(o.prop[0]==="_"||o.prop[0]==="*")&&(o.raws.before+=o.prop[0],o.prop=o.prop.slice(1));let f=[],g;for(;c.length&&(g=c[0][0],!(g!=="space"&&g!=="comment"));)f.push(c.shift());this.precheckMissedSemicolon(c);for(let v=c.length-1;v>=0;v--){if(h=c[v],h[1].toLowerCase()==="!important"){o.important=!0;let x=this.stringFrom(c,v);x=this.spacesFromEnd(c)+x,x!==" !important"&&(o.raws.important=x);break}else if(h[1].toLowerCase()==="important"){let x=c.slice(0),w="";for(let S=v;S>0;S--){let y=x[S][0];if(w.trim().startsWith("!")&&y!=="space")break;w=x.pop()[1]+w}w.trim().startsWith("!")&&(o.important=!0,o.raws.important=w,c=x)}if(h[0]!=="space"&&h[0]!=="comment")break}c.some(v=>v[0]!=="space"&&v[0]!=="comment")&&(o.raws.between+=f.map(v=>v[1]).join(""),f=[]),this.raw(o,"value",f.concat(c),m),o.value.includes(":")&&!m&&this.checkMissedSemicolon(c)}doubleColon(c){throw this.input.error("Double colon",{offset:c[2]},{offset:c[2]+c[1].length})}emptyRule(c){let m=new r;this.init(m,c[2]),m.selector="",m.raws.between="",this.current=m}end(c){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(c[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(c)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(c){if(this.spaces+=c[1],this.current.nodes){let m=this.current.nodes[this.current.nodes.length-1];m&&m.type==="rule"&&!m.raws.ownSemicolon&&(m.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(c){let m=this.input.fromOffset(c);return{column:m.col,line:m.line,offset:c}}init(c,m){this.current.push(c),c.source={input:this.input,start:this.getPosition(m)},c.raws.before=this.spaces,this.spaces="",c.type!=="comment"&&(this.semicolon=!1)}other(c){let m=!1,o=null,s=!1,h=null,f=[],g=c[1].startsWith("--"),v=[],x=c;for(;x;){if(o=x[0],v.push(x),o==="("||o==="[")h||(h=x),f.push(o==="("?")":"]");else if(g&&s&&o==="{")h||(h=x),f.push("}");else if(f.length===0)if(o===";")if(s){this.decl(v,g);return}else break;else if(o==="{"){this.rule(v);return}else if(o==="}"){this.tokenizer.back(v.pop()),m=!0;break}else o===":"&&(s=!0);else o===f[f.length-1]&&(f.pop(),f.length===0&&(h=null));x=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(m=!0),f.length>0&&this.unclosedBracket(h),m&&s){if(!g)for(;v.length&&(x=v[v.length-1][0],!(x!=="space"&&x!=="comment"));)this.tokenizer.back(v.pop());this.decl(v,g)}else this.unknownWord(v)}parse(){let c;for(;!this.tokenizer.endOfFile();)switch(c=this.tokenizer.nextToken(),c[0]){case"space":this.spaces+=c[1];break;case";":this.freeSemicolon(c);break;case"}":this.end(c);break;case"comment":this.comment(c);break;case"at-word":this.atrule(c);break;case"{":this.emptyRule(c);break;default:this.other(c);break}this.endFile()}precheckMissedSemicolon(){}raw(c,m,o,s){let h,f,g=o.length,v="",x=!0,w,S;for(let y=0;y<g;y+=1)h=o[y],f=h[0],f==="space"&&y===g-1&&!s?x=!1:f==="comment"?(S=o[y-1]?o[y-1][0]:"empty",w=o[y+1]?o[y+1][0]:"empty",!a[S]&&!a[w]?v.slice(-1)===","?x=!1:v+=h[1]:x=!1):v+=h[1];if(!x){let y=o.reduce((b,C)=>b+C[1],"");c.raws[m]={raw:y,value:v}}c[m]=v}rule(c){c.pop();let m=new r;this.init(m,c[0][2]),m.raws.between=this.spacesAndCommentsFromEnd(c),this.raw(m,"selector",c),this.current=m}spacesAndCommentsFromEnd(c){let m,o="";for(;c.length&&(m=c[c.length-1][0],!(m!=="space"&&m!=="comment"));)o=c.pop()[1]+o;return o}spacesAndCommentsFromStart(c){let m,o="";for(;c.length&&(m=c[0][0],!(m!=="space"&&m!=="comment"));)o+=c.shift()[1];return o}spacesFromEnd(c){let m,o="";for(;c.length&&(m=c[c.length-1][0],m==="space");)o=c.pop()[1]+o;return o}stringFrom(c,m){let o="";for(let s=m;s<c.length;s++)o+=c[s][1];return c.splice(m,c.length-m),o}unclosedBlock(){let c=this.current.source.start;throw this.input.error("Unclosed block",c.line,c.column)}unclosedBracket(c){throw this.input.error("Unclosed bracket",{offset:c[2]},{offset:c[2]+1})}unexpectedClose(c){throw this.input.error("Unexpected }",{offset:c[2]},{offset:c[2]+1})}unknownWord(c){throw this.input.error("Unknown word",{offset:c[0][2]},{offset:c[0][2]+c[0][1].length})}unnamedAtrule(c,m){throw this.input.error("At-rule without name",{offset:m[2]},{offset:m[2]+m[1].length})}}return Di=d,Di}var Li,Go;function Bi(){if(Go)return Li;Go=1;let l=ut(),e=gn(),t=zd();function n(r,i){let a=new e(r,i),u=new t(a);try{u.parse()}catch(d){throw d}return u.root}return Li=n,n.default=n,l.registerParse(n),Li}var Ii,Wo;function Xo(){if(Wo)return Ii;Wo=1;class l{constructor(t,n={}){if(this.type="warning",this.text=t,n.node&&n.node.source){let r=n.node.rangeBy(n);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in n)this[r]=n[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return Ii=l,l.default=l,Ii}var Ri,Jo;function ji(){if(Jo)return Ri;Jo=1;let l=Xo();class e{constructor(n,r,i){this.processor=n,this.messages=[],this.root=r,this.opts=i,this.css=void 0,this.map=void 0}toString(){return this.css}warn(n,r={}){r.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(r.plugin=this.lastPlugin.postcssPlugin);let i=new l(n,r);return this.messages.push(i),i}warnings(){return this.messages.filter(n=>n.type==="warning")}get content(){return this.css}}return Ri=e,e.default=e,Ri}var zi,Zo;function Yo(){if(Zo)return zi;Zo=1;let l={};return zi=function(e){l[e]||(l[e]=!0,typeof console<"u"&&console.warn&&console.warn(e))},zi}var Ui,Ko;function $o(){if(Ko)return Ui;Ko=1;let l=ut(),e=xi(),t=qo(),n=Bi(),r=ji(),i=zt(),a=dn(),{isClean:u,my:d}=hi(),p=Yo();const c={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},m={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},o={Once:!0,postcssPlugin:!0,prepare:!0},s=0;function h(S){return typeof S=="object"&&typeof S.then=="function"}function f(S){let y=!1,b=c[S.type];return S.type==="decl"?y=S.prop.toLowerCase():S.type==="atrule"&&(y=S.name.toLowerCase()),y&&S.append?[b,b+"-"+y,s,b+"Exit",b+"Exit-"+y]:y?[b,b+"-"+y,b+"Exit",b+"Exit-"+y]:S.append?[b,s,b+"Exit"]:[b,b+"Exit"]}function g(S){let y;return S.type==="document"?y=["Document",s,"DocumentExit"]:S.type==="root"?y=["Root",s,"RootExit"]:y=f(S),{eventIndex:0,events:y,iterator:0,node:S,visitorIndex:0,visitors:[]}}function v(S){return S[u]=!1,S.nodes&&S.nodes.forEach(y=>v(y)),S}let x={};class w{constructor(y,b,C){this.stringified=!1,this.processed=!1;let k;if(typeof b=="object"&&b!==null&&(b.type==="root"||b.type==="document"))k=v(b);else if(b instanceof w||b instanceof r)k=v(b.root),b.map&&(typeof C.map>"u"&&(C.map={}),C.map.inline||(C.map.inline=!1),C.map.prev=b.map);else{let T=n;C.syntax&&(T=C.syntax.parse),C.parser&&(T=C.parser),T.parse&&(T=T.parse);try{k=T(b,C)}catch(P){this.processed=!0,this.error=P}k&&!k[d]&&l.rebuild(k)}this.result=new r(y,k,C),this.helpers={...x,postcss:x,result:this.result},this.plugins=this.processor.plugins.map(T=>typeof T=="object"&&T.prepare?{...T,...T.prepare(this.result)}:T)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(y){return this.async().catch(y)}finally(y){return this.async().then(y,y)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(y,b){let C=this.result.lastPlugin;try{b&&b.addToError(y),this.error=y,y.name==="CssSyntaxError"&&!y.plugin?(y.plugin=C.postcssPlugin,y.setMessage()):C.postcssVersion}catch(k){console&&console.error&&console.error(k)}return y}prepareVisitors(){this.listeners={};let y=(b,C,k)=>{this.listeners[C]||(this.listeners[C]=[]),this.listeners[C].push([b,k])};for(let b of this.plugins)if(typeof b=="object")for(let C in b){if(!m[C]&&/^[A-Z]/.test(C))throw new Error(`Unknown event ${C} in ${b.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!o[C])if(typeof b[C]=="object")for(let k in b[C])k==="*"?y(b,C,b[C][k]):y(b,C+"-"+k.toLowerCase(),b[C][k]);else typeof b[C]=="function"&&y(b,C,b[C])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let y=0;y<this.plugins.length;y++){let b=this.plugins[y],C=this.runOnRoot(b);if(h(C))try{await C}catch(k){throw this.handleError(k)}}if(this.prepareVisitors(),this.hasListener){let y=this.result.root;for(;!y[u];){y[u]=!0;let b=[g(y)];for(;b.length>0;){let C=this.visitTick(b);if(h(C))try{await C}catch(k){let T=b[b.length-1].node;throw this.handleError(k,T)}}}if(this.listeners.OnceExit)for(let[b,C]of this.listeners.OnceExit){this.result.lastPlugin=b;try{if(y.type==="document"){let k=y.nodes.map(T=>C(T,this.helpers));await Promise.all(k)}else await C(y,this.helpers)}catch(k){throw this.handleError(k)}}}return this.processed=!0,this.stringify()}runOnRoot(y){this.result.lastPlugin=y;try{if(typeof y=="object"&&y.Once){if(this.result.root.type==="document"){let b=this.result.root.nodes.map(C=>y.Once(C,this.helpers));return h(b[0])?Promise.all(b):b}return y.Once(this.result.root,this.helpers)}else if(typeof y=="function")return y(this.result.root,this.result)}catch(b){throw this.handleError(b)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let y=this.result.opts,b=a;y.syntax&&(b=y.syntax.stringify),y.stringifier&&(b=y.stringifier),b.stringify&&(b=b.stringify);let C=new t(b,this.result.root,this.result.opts).generate();return this.result.css=C[0],this.result.map=C[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let y of this.plugins){let b=this.runOnRoot(y);if(h(b))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let y=this.result.root;for(;!y[u];)y[u]=!0,this.walkSync(y);if(this.listeners.OnceExit)if(y.type==="document")for(let b of y.nodes)this.visitSync(this.listeners.OnceExit,b);else this.visitSync(this.listeners.OnceExit,y)}return this.result}then(y,b){return this.async().then(y,b)}toString(){return this.css}visitSync(y,b){for(let[C,k]of y){this.result.lastPlugin=C;let T;try{T=k(b,this.helpers)}catch(P){throw this.handleError(P,b.proxyOf)}if(b.type!=="root"&&b.type!=="document"&&!b.parent)return!0;if(h(T))throw this.getAsyncError()}}visitTick(y){let b=y[y.length-1],{node:C,visitors:k}=b;if(C.type!=="root"&&C.type!=="document"&&!C.parent){y.pop();return}if(k.length>0&&b.visitorIndex<k.length){let[P,E]=k[b.visitorIndex];b.visitorIndex+=1,b.visitorIndex===k.length&&(b.visitors=[],b.visitorIndex=0),this.result.lastPlugin=P;try{return E(C.toProxy(),this.helpers)}catch(O){throw this.handleError(O,C)}}if(b.iterator!==0){let P=b.iterator,E;for(;E=C.nodes[C.indexes[P]];)if(C.indexes[P]+=1,!E[u]){E[u]=!0,y.push(g(E));return}b.iterator=0,delete C.indexes[P]}let T=b.events;for(;b.eventIndex<T.length;){let P=T[b.eventIndex];if(b.eventIndex+=1,P===s){C.nodes&&C.nodes.length&&(C[u]=!0,b.iterator=C.getIterator());return}else if(this.listeners[P]){b.visitors=this.listeners[P];return}}y.pop()}walkSync(y){y[u]=!0;let b=f(y);for(let C of b)if(C===s)y.nodes&&y.each(k=>{k[u]||this.walkSync(k)});else{let k=this.listeners[C];if(k&&this.visitSync(k,y.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}return w.registerPostcss=S=>{x=S},Ui=w,w.default=w,i.registerLazyResult(w),e.registerLazyResult(w),Ui}var Ni,Qo;function Ud(){if(Qo)return Ni;Qo=1;let l=qo(),e=Bi();const t=ji();let n=dn(),r=Yo();class i{constructor(u,d,p){d=d.toString(),this.stringified=!1,this._processor=u,this._css=d,this._opts=p,this._map=void 0;let c,m=n;this.result=new t(this._processor,c,this._opts),this.result.css=d;let o=this;Object.defineProperty(this.result,"root",{get(){return o.root}});let s=new l(m,c,this._opts,d);if(s.isMap()){let[h,f]=s.generate();h&&(this.result.css=h),f&&(this.result.map=f)}else s.clearAnnotation(),this.result.css=s.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(u){return this.async().catch(u)}finally(u){return this.async().then(u,u)}sync(){if(this.error)throw this.error;return this.result}then(u,d){return this.async().then(u,d)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let u,d=e;try{u=d(this._css,this._opts)}catch(p){this.error=p}if(this.error)throw this.error;return this._root=u,u}get[Symbol.toStringTag](){return"NoWorkResult"}}return Ni=i,i.default=i,Ni}var Fi,ea;function Nd(){if(ea)return Fi;ea=1;let l=xi(),e=$o(),t=Ud(),n=zt();class r{constructor(a=[]){this.version="8.4.49",this.plugins=this.normalize(a)}normalize(a){let u=[];for(let d of a)if(d.postcss===!0?d=d():d.postcss&&(d=d.postcss),typeof d=="object"&&Array.isArray(d.plugins))u=u.concat(d.plugins);else if(typeof d=="object"&&d.postcssPlugin)u.push(d);else if(typeof d=="function")u.push(d);else if(!(typeof d=="object"&&(d.parse||d.stringify)))throw new Error(d+" is not a PostCSS plugin");return u}process(a,u={}){return!this.plugins.length&&!u.parser&&!u.stringifier&&!u.syntax?new t(this,a,u):new e(this,a,u)}use(a){return this.plugins=this.plugins.concat(this.normalize([a])),this}}return Fi=r,r.default=r,n.registerProcessor(r),l.registerProcessor(r),Fi}var qi,ta;function Fd(){if(ta)return qi;ta=1;var l={};let e=bi(),t=fn(),n=ut(),r=ci(),i=mn(),a=xi(),u=Rd(),d=gn(),p=$o(),c=zo(),m=hn(),o=Bi(),s=Nd(),h=ji(),f=zt(),g=Pi(),v=dn(),x=Xo();function w(...S){return S.length===1&&Array.isArray(S[0])&&(S=S[0]),new s(S)}return w.plugin=function(S,y){let b=!1;function C(...T){console&&console.warn&&!b&&(b=!0,console.warn(S+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),l.LANG&&l.LANG.startsWith("cn")&&console.warn(S+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let P=y(...T);return P.postcssPlugin=S,P.postcssVersion=new s().version,P}let k;return Object.defineProperty(C,"postcss",{get(){return k||(k=C()),k}}),C.process=function(T,P,E){return w([C(E)]).process(T,P)},C},w.stringify=v,w.parse=o,w.fromJSON=u,w.list=c,w.comment=S=>new t(S),w.atRule=S=>new e(S),w.decl=S=>new i(S),w.rule=S=>new g(S),w.root=S=>new f(S),w.document=S=>new a(S),w.CssSyntaxError=r,w.Declaration=i,w.Container=n,w.Processor=s,w.Document=a,w.Comment=t,w.Warning=x,w.AtRule=e,w.Result=h,w.Input=d,w.Rule=g,w.Root=f,w.Node=m,p.registerPostcss(w),qi=w,w.default=w,qi}var Hi,na;function qd(){if(na)return Hi;na=1;const l=Ed(),e=Td(),{isPlainObject:t}=_d(),n=Pd(),r=Ad(),{parse:i}=Fd(),a=["img","audio","video","picture","svg","object","map","iframe","embed"],u=["script","style"];function d(g,v){g&&Object.keys(g).forEach(function(x){v(g[x],x)})}function p(g,v){return{}.hasOwnProperty.call(g,v)}function c(g,v){const x=[];return d(g,function(w){v(w)&&x.push(w)}),x}function m(g){for(const v in g)if(p(g,v))return!1;return!0}function o(g){return g.map(function(v){if(!v.url)throw new Error("URL missing");return v.url+(v.w?` ${v.w}w`:"")+(v.h?` ${v.h}h`:"")+(v.d?` ${v.d}x`:"")}).join(", ")}Hi=h;const s=/^[^\0\t\n\f\r /<=>]+$/;function h(g,v,x){if(g==null)return"";typeof g=="number"&&(g=g.toString());let w="",S="";function y(z,q){const U=this;this.tag=z,this.attribs=q||{},this.tagPosition=w.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(L.length){const X=L[L.length-1];X.text+=U.text}},this.updateParentNodeMediaChildren=function(){L.length&&a.includes(this.tag)&&L[L.length-1].mediaChildren.push(this.tag)}}v=Object.assign({},h.defaults,v),v.parser=Object.assign({},f,v.parser);const b=function(z){return v.allowedTags===!1||(v.allowedTags||[]).indexOf(z)>-1};u.forEach(function(z){b(z)&&!v.allowVulnerableTags&&console.warn(`

\u26A0\uFE0F Your \`allowedTags\` option includes, \`${z}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const C=v.nonTextTags||["script","style","textarea","option"];let k,T;v.allowedAttributes&&(k={},T={},d(v.allowedAttributes,function(z,q){k[q]=[];const U=[];z.forEach(function(X){typeof X=="string"&&X.indexOf("*")>=0?U.push(e(X).replace(/\\\*/g,".*")):k[q].push(X)}),U.length&&(T[q]=new RegExp("^("+U.join("|")+")$"))}));const P={},E={},O={};d(v.allowedClasses,function(z,q){if(k&&(p(k,q)||(k[q]=[]),k[q].push("class")),P[q]=z,Array.isArray(z)){const U=[];P[q]=[],O[q]=[],z.forEach(function(X){typeof X=="string"&&X.indexOf("*")>=0?U.push(e(X).replace(/\\\*/g,".*")):X instanceof RegExp?O[q].push(X):P[q].push(X)}),U.length&&(E[q]=new RegExp("^("+U.join("|")+")$"))}});const A={};let D;d(v.transformTags,function(z,q){let U;typeof z=="function"?U=z:typeof z=="string"&&(U=h.simpleTransform(z)),q==="*"?D=U:A[q]=U});let B,L,M,I,H,J,ee=!1;se();const F=new l.Parser({onopentag:function(z,q){if(v.enforceHtmlBoundary&&z==="html"&&se(),H){J++;return}const U=new y(z,q);L.push(U);let X=!1;const fe=!!U.text;let me;if(p(A,z)&&(me=A[z](z,q),U.attribs=q=me.attribs,me.text!==void 0&&(U.innerText=me.text),z!==me.tagName&&(U.name=z=me.tagName,I[B]=me.tagName)),D&&(me=D(z,q),U.attribs=q=me.attribs,z!==me.tagName&&(U.name=z=me.tagName,I[B]=me.tagName)),(!b(z)||v.disallowedTagsMode==="recursiveEscape"&&!m(M)||v.nestingLimit!=null&&B>=v.nestingLimit)&&(X=!0,M[B]=!0,(v.disallowedTagsMode==="discard"||v.disallowedTagsMode==="completelyDiscard")&&C.indexOf(z)!==-1&&(H=!0,J=1),M[B]=!0),B++,X){if(v.disallowedTagsMode==="discard"||v.disallowedTagsMode==="completelyDiscard"){if(U.innerText&&!fe){const ie=$(U.innerText);v.textFilter?w+=v.textFilter(ie,z):w+=$(U.innerText),ee=!0}return}S=w,w=""}w+="<"+z,z==="script"&&(v.allowedScriptHostnames||v.allowedScriptDomains)&&(U.innerText=""),(!k||p(k,z)||k["*"])&&d(q,function(ie,Q){if(!s.test(Q)){delete U.attribs[Q];return}if(ie===""&&!v.allowedEmptyAttributes.includes(Q)&&(v.nonBooleanAttributes.includes(Q)||v.nonBooleanAttributes.includes("*"))){delete U.attribs[Q];return}let pt=!1;if(!k||p(k,z)&&k[z].indexOf(Q)!==-1||k["*"]&&k["*"].indexOf(Q)!==-1||p(T,z)&&T[z].test(Q)||T["*"]&&T["*"].test(Q))pt=!0;else if(k&&k[z]){for(const te of k[z])if(t(te)&&te.name&&te.name===Q){pt=!0;let ne="";if(te.multiple===!0){const Ie=ie.split(" ");for(const ze of Ie)te.values.indexOf(ze)!==-1&&(ne===""?ne=ze:ne+=" "+ze)}else te.values.indexOf(ie)>=0&&(ne=ie);ie=ne}}if(pt){if(v.allowedSchemesAppliedToAttributes.indexOf(Q)!==-1&&xe(z,ie)){delete U.attribs[Q];return}if(z==="script"&&Q==="src"){let te=!0;try{const ne=re(ie);if(v.allowedScriptHostnames||v.allowedScriptDomains){const Ie=(v.allowedScriptHostnames||[]).find(function(De){return De===ne.url.hostname}),ze=(v.allowedScriptDomains||[]).find(function(De){return ne.url.hostname===De||ne.url.hostname.endsWith(`.${De}`)});te=Ie||ze}}catch{te=!1}if(!te){delete U.attribs[Q];return}}if(z==="iframe"&&Q==="src"){let te=!0;try{const ne=re(ie);if(ne.isRelativeUrl)te=p(v,"allowIframeRelativeUrls")?v.allowIframeRelativeUrls:!v.allowedIframeHostnames&&!v.allowedIframeDomains;else if(v.allowedIframeHostnames||v.allowedIframeDomains){const Ie=(v.allowedIframeHostnames||[]).find(function(De){return De===ne.url.hostname}),ze=(v.allowedIframeDomains||[]).find(function(De){return ne.url.hostname===De||ne.url.hostname.endsWith(`.${De}`)});te=Ie||ze}}catch{te=!1}if(!te){delete U.attribs[Q];return}}if(Q==="srcset")try{let te=r(ie);if(te.forEach(function(ne){xe("srcset",ne.url)&&(ne.evil=!0)}),te=c(te,function(ne){return!ne.evil}),te.length)ie=o(c(te,function(ne){return!ne.evil})),U.attribs[Q]=ie;else{delete U.attribs[Q];return}}catch{delete U.attribs[Q];return}if(Q==="class"){const te=P[z],ne=P["*"],Ie=E[z],ze=O[z],De=O["*"],dt=E["*"],nt=[Ie,dt].concat(ze,De).filter(function(ia){return ia});if(te&&ne?ie=je(ie,n(te,ne),nt):ie=je(ie,te||ne,nt),!ie.length){delete U.attribs[Q];return}}if(Q==="style"){if(v.parseStyleAttributes)try{const te=i(z+" {"+ie+"}",{map:!1}),ne=Oe(te,v.allowedStyles);if(ie=Se(ne),ie.length===0){delete U.attribs[Q];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+z+" {"+ie+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete U.attribs[Q];return}else if(v.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}w+=" "+Q,ie&&ie.length?w+='="'+$(ie,!0)+'"':v.allowedEmptyAttributes.includes(Q)&&(w+='=""')}else delete U.attribs[Q]}),v.selfClosing.indexOf(z)!==-1?w+=" />":(w+=">",U.innerText&&!fe&&!v.textFilter&&(w+=$(U.innerText),ee=!0)),X&&(w=S+$(w),S="")},ontext:function(z){if(H)return;const q=L[L.length-1];let U;if(q&&(U=q.tag,z=q.innerText!==void 0?q.innerText:z),v.disallowedTagsMode==="completelyDiscard"&&!b(U))z="";else if((v.disallowedTagsMode==="discard"||v.disallowedTagsMode==="completelyDiscard")&&(U==="script"||U==="style"))w+=z;else{const X=$(z,!1);v.textFilter&&!ee?w+=v.textFilter(X,U):ee||(w+=X)}if(L.length){const X=L[L.length-1];X.text+=z}},onclosetag:function(z,q){if(H)if(J--,!J)H=!1;else return;const U=L.pop();if(!U)return;if(U.tag!==z){L.push(U);return}H=v.enforceHtmlBoundary?z==="html":!1,B--;const X=M[B];if(X){if(delete M[B],v.disallowedTagsMode==="discard"||v.disallowedTagsMode==="completelyDiscard"){U.updateParentNodeText();return}S=w,w=""}if(I[B]&&(z=I[B],delete I[B]),v.exclusiveFilter&&v.exclusiveFilter(U)){w=w.substr(0,U.tagPosition);return}if(U.updateParentNodeMediaChildren(),U.updateParentNodeText(),v.selfClosing.indexOf(z)!==-1||q&&!b(z)&&["escape","recursiveEscape"].indexOf(v.disallowedTagsMode)>=0){X&&(w=S,S="");return}w+="</"+z+">",X&&(w=S+$(w),S=""),ee=!1}},v.parser);return F.write(g),F.end(),w;function se(){w="",B=0,L=[],M={},I={},H=!1,J=0}function $(z,q){return typeof z!="string"&&(z=z+""),v.parser.decodeEntities&&(z=z.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q&&(z=z.replace(/"/g,"&quot;"))),z=z.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),q&&(z=z.replace(/"/g,"&quot;")),z}function xe(z,q){for(q=q.replace(/[\x00-\x20]+/g,"");;){const fe=q.indexOf("<!--");if(fe===-1)break;const me=q.indexOf("-->",fe+4);if(me===-1)break;q=q.substring(0,fe)+q.substring(me+3)}const U=q.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!U)return q.match(/^[/\\]{2}/)?!v.allowProtocolRelative:!1;const X=U[1].toLowerCase();return p(v.allowedSchemesByTag,z)?v.allowedSchemesByTag[z].indexOf(X)===-1:!v.allowedSchemes||v.allowedSchemes.indexOf(X)===-1}function re(z){if(z=z.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),z.startsWith("relative:"))throw new Error("relative: exploit attempt");let q="relative://relative-site";for(let X=0;X<100;X++)q+=`/${X}`;const U=new URL(z,q);return{isRelativeUrl:U&&U.hostname==="relative-site"&&U.protocol==="relative:",url:U}}function Oe(z,q){if(!q)return z;const U=z.nodes[0];let X;return q[U.selector]&&q["*"]?X=n(q[U.selector],q["*"]):X=q[U.selector]||q["*"],X&&(z.nodes[0].nodes=U.nodes.reduce(kt(X),[])),z}function Se(z){return z.nodes[0].nodes.reduce(function(q,U){return q.push(`${U.prop}:${U.value}${U.important?" !important":""}`),q},[]).join(";")}function kt(z){return function(q,U){return p(z,U.prop)&&z[U.prop].some(function(X){return X.test(U.value)})&&q.push(U),q}}function je(z,q,U){return q?(z=z.split(/\s+/),z.filter(function(X){return q.indexOf(X)!==-1||U.some(function(fe){return fe.test(X)})}).join(" ")):z}}const f={decodeEntities:!0};return h.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},h.simpleTransform=function(g,v,x){return x=x===void 0?!0:x,v=v||{},function(w,S){let y;if(x)for(y in v)S[y]=v[y];else S=v;return{tagName:g,attribs:S}}},Hi}var Hd=qd();const Vd=lr(Hd),Gd={key:0,class:"multiplayer"},Wd={class:"container"},Xd={class:"tabs"},Jd={key:0,class:"notifications"},Zd={class:"panel"},Yd=["title"],Kd=["innerHTML"],$d={key:1,class:"text"},Qd={class:"message-input"},eh={class:"panel"},th={class:"lobby"},nh={class:"player"},ih={class:"name"},rh=["onDblclick","title"],sh=["onClick","title"],oh={__name:"BubbleMultiplayer",setup(l){var e=W("chat"),t=W(!1),n=W(!1),r=W(0),i=W(""),a=W([]),u=W(),d=W([]),p;function c(){app.network.on("peer_open",o),app.network.on("peer_close",s),app.network.on("peer_disconnected",h),app.network.on("connection_start",f),app.network.on("connection_open",g),app.network.on("connection_close",v),app.network.on("connection_data",x),window.addEventListener("levelStart",w),window.addEventListener("levelFinish",S)}function m(){app.network.off("peer_open",o),app.network.off("peer_close",s),app.network.off("peer_disconnected",h),app.network.off("connection_start",f),app.network.off("connection_open",g),app.network.off("connection_close",v),app.network.off("connection_data",x),window.removeEventListener("levelStart",w),window.removeEventListener("levelFinish",S)}function o(L){t.value=!0,k()&&b({name:"Server",text:"Server is ready! \u{1F60A}",time:D(),color:"#4ca9ff"})}function s(L){t.value=!1,k()&&b({name:"Server",text:"Server closed! \u{1F614}",time:D(),color:"#ff674c"})}function h(L){b({name:"Server",text:"Weak connection... \u{1F6DC}",time:D(),color:"#4ca9ff"})}function f(L){k()||(b({name:"Server",text:"Searching... \u{1F50D}",time:D(),color:"#4ca9ff"}),p=setTimeout(function(){b({name:"Error",text:"Host not found. Your connection may be blocked on this network. \u{1F614}",time:D(),color:"#ff674c"})},5e3))}function g(L){if(clearTimeout(p),k()){var M={type:"message",name:"Server",text:L.connection.metadata.name+" has connected! \u{1F44B}",time:D(),color:"#4ca9ff"};y(M)}}function v(L){var M={type:"message",name:"Server",text:L.connection.metadata.name+" has disconnected! \u{1F44B}",time:D(),color:"#4ca9ff"};k()?y(M):(M.name="Server",M.text="The host has disconnected! \u{1F614}",M.color="#4ca9ff",b(M)),d.value=app.multiplayer.players.children.slice(0)}function x(L){L.data.type=="message"?(b(L.data),k()&&(L.data.name=L.connection.metadata.name,app.network.connections.forEach(function(M){M.send(L.data)}))):L.data.type=="players"&&d.value.length!=app.multiplayer.players.children.length&&(d.value=app.multiplayer.players.children.slice(0))}function w(L){var M=app.storage.getSettings(),I=L.detail.title,H=L.detail.description,J={type:"message",name:M.name,text:'Is now playing <a href="'+I+'">'+H+"</a> \u25B6\uFE0F",time:D(),color:"#4cff64",raw:!0};app.network.isOnline()&&y(J)}function S(L){var M=L.detail.time,I=L.detail.level,H=app.level.getDescriptionByTitle(I),J=app.storage.getSettings(),ee={type:"message",name:J.name,text:'Finished <a href="'+I+'">'+H+"</a> in \u{1F552}<strong>"+M+"s</strong>",time:D(),color:"#4cff64",raw:!0};app.network.isOnline()&&y(ee)}function y(L){var M=app.storage.getSettings();if(L==null){if(i.value.value=="")return;L={type:"message",name:M.name+(k()?" [host]":""),text:i.value.value,time:D(),color:"#ffcc4d",raw:!0},i.value.value=""}k()?b(L):app.network.connections.size==0&&(L.name="Error",L.text="Host not found! \u{1F614}",L.color="#ff674c",b(L)),app.network.connections.forEach(function(I){I.send(L)})}function b(L){var M=Vd(L.text,{allowedTags:["a","em","h1","h2","h3","h4","h5","h6","img"],allowedAttributes:{a:["href"],img:["src","width","height"]}});L.text=M,a.value.push(L),(e.value!="chat"||P())&&r.value++,C()}async function C(L=!1){if(u.value){var M=u.value,I=M.scrollTop+1>M.scrollHeight-M.clientHeight;await Na(),(I||L==!0)&&(M.scrollTop=M.scrollHeight+1)}}function k(){return app.multiplayer.isHost()}function T(){return t.value}function P(){return n.value}function E(L){app.multiplayer.closeConnectionByUUID(L.uuid)}async function O(L){if(L.level!="My Level"){var M=await app.playLevelByTitle(L.level);if(M){window.dispatchEvent(new CustomEvent("setPage",{detail:"campaign"}));var I=app.multiplayer.getPlayer({uuid:L.uuid});I&&app.player.setPosition(I.position,!1)}else b({name:"Server",text:L.text+" is not playing an official level! \u{1F614}",time:D(),color:"#4ca9ff"})}else b({name:"Server",text:L.text+" is currently picking a level... \u23F3",time:D(),color:"#4ca9ff"})}function A(L){L==e.value?n.value=!n.value:n.value=!1,L=="chat"&&(r.value=0),e.value=L}function D(){return new Date().getTime()}async function B(L){L.preventDefault();var M=L.target;if(M.nodeName=="A"){var I=M.getAttribute("href"),H=await app.playLevelByTitle(I);H?window.dispatchEvent(new CustomEvent("setPage",{detail:"campaign"})):b({name:"Server",text:"Level does not exist! \u{1F614}",time:D(),color:"#4ca9ff"})}}return ce(function(){c()}),de(function(){m()}),(L,M)=>(j(),ae(_t,{name:"fade-multiplayer"},{default:Pt(()=>[T()?(j(),N("div",Gd,[_("div",Wd,[_("div",Xd,[_("div",{class:K(["tab",{selected:R(e)=="chat"}]),onClick:M[0]||(M[0]=I=>A("chat")),title:"Chat"},[M[5]||(M[5]=_("span",{class:"material-symbols-rounded"},"chat",-1)),R(r)>0?(j(),N("span",Jd,ue(R(r)),1)):Z("",!0)],2),_("div",{class:K(["tab",{selected:R(e)=="lobby"}]),onClick:M[1]||(M[1]=I=>A("lobby")),title:"Lobby"},M[6]||(M[6]=[_("span",{class:"material-symbols-rounded"},"group",-1)]),2)]),_("div",{class:K(["content",{collapsed:P()}])},[En(_("div",Zd,[_("ul",{class:"messages",ref_key:"messageBox",ref:u,onClick:B},[(j(!0),N(ve,null,Ne(R(a),I=>(j(),N("li",{class:"message",title:I.name},[_("span",{class:"name",style:Cn({color:I.color||"#ffffff"})},ue(I.name),5),M[7]||(M[7]=_("span",null,": ",-1)),I.raw?(j(),N("span",{key:0,class:"text",innerHTML:I.text},null,8,Kd)):(j(),N("span",$d,ue(I.text),1))],8,Yd))),256))],512),_("div",Qd,[_("input",{type:"text",ref_key:"message",ref:i,placeholder:"Message",onKeydown:M[2]||(M[2]=Fa(I=>{y(null)},["enter"])),onFocus:M[3]||(M[3]=I=>{sr(n)?n.value=!1:n=!1,sr(r)?r.value=0:r=0}),maxlength:"128"},null,544),_("button",{onClick:M[4]||(M[4]=I=>y(null))},M[8]||(M[8]=[_("span",{class:"material-symbols-rounded"},"send",-1)]))])],512),[[Tn,R(e)=="chat"]]),En(_("div",eh,[_("ul",th,[(j(!0),N(ve,null,Ne(R(d),I=>(j(),N("li",nh,[_("span",ih,ue(I.text),1),k()?(j(),N("span",{key:0,class:"action material-symbols-rounded",onDblclick:H=>E(I),title:"Double-click to kick "+I.text},"close",40,rh)):Z("",!0),_("span",{class:"action material-symbols-rounded",onClick:H=>O(I),title:"Teleport to "+I.text},"play_arrow",8,sh)]))),256))])],512),[[Tn,R(e)=="lobby"]])],2)])])):Z("",!0)]),_:1}))}},ah={class:"tabs"},lh={__name:"BubbleSettingsTabs",props:["tab"],setup(l){var e=l;return(t,n)=>(j(),N("div",ah,[_("div",{class:K(["tab",{selected:l.tab=="audio"}]),onClick:n[0]||(n[0]=r=>{t.$emit("changeTab","audio")})},n[5]||(n[5]=[_("label",null,"Audio",-1),_("span",{class:"material-symbols-rounded"},"volume_up",-1)]),2),_("div",{class:K(["tab",{selected:l.tab=="graphics"}]),onClick:n[1]||(n[1]=r=>{t.$emit("changeTab","graphics")})},n[6]||(n[6]=[_("label",null,"Graphics",-1),_("span",{class:"material-symbols-rounded"},"visibility",-1)]),2),_("div",{class:K(["tab",{selected:l.tab=="multiplayer"}]),onClick:n[2]||(n[2]=r=>{t.$emit("changeTab","multiplayer")})},n[7]||(n[7]=[_("label",null,"Multiplayer",-1),_("span",{class:"material-symbols-rounded"},"group",-1)]),2),_("div",{class:K(["tab",{selected:l.tab=="mods"}]),onClick:n[3]||(n[3]=r=>{t.$emit("changeTab","mods")})},n[8]||(n[8]=[_("label",null,"Mods",-1),_("span",{class:"material-symbols-rounded"},"power",-1)]),2),_("div",{class:K(["tab",{selected:l.tab=="data"}]),onClick:n[4]||(n[4]=r=>{t.$emit("changeTab","data")})},n[9]||(n[9]=[_("label",null,"Data",-1),_("span",{class:"material-symbols-rounded"},"save",-1)]),2)]))}},ch={class:"panel"},uh={class:"group"},ph={class:"option"},dh=["value"],hh={for:"quality"},fh={class:"option"},mh=["checked"],gh={class:"group"},vh={class:"option"},yh=["checked"],bh={class:"option"},wh=["checked"],xh={class:"option"},Sh=["checked"],Ch={__name:"BubbleSettingsPanelGraphics",props:["settings"],setup(l){var e=l;function t(){window.dispatchEvent(new CustomEvent("setTheme"))}function n(){app.level.showHelpers(e.settings.debug)}return(r,i)=>(j(),N("div",ch,[i[12]||(i[12]=_("p",null,"Graphics",-1)),_("div",uh,[i[6]||(i[6]=_("div",{class:"option"},[_("label",{for:"quality"},"Quality")],-1)),_("div",ph,[_("input",{type:"range",id:"quality",min:"1",max:"10",step:"1",value:l.settings.quality,onChange:i[0]||(i[0]=a=>r.$emit("updateSettings",a))},null,40,dh),_("label",hh,ue(l.settings.quality*10)+"%",1)]),i[7]||(i[7]=_("div",{class:"option"},[_("label",{for:"motion"},"Camera")],-1)),_("div",fh,[_("input",{type:"checkbox",id:"motion",checked:l.settings.motion==!0,onChange:i[1]||(i[1]=a=>r.$emit("updateSettings",a))},null,40,mh),i[5]||(i[5]=_("label",{for:"motion"},"Auto Rotate",-1))])]),_("div",gh,[i[11]||(i[11]=_("div",{class:"option"},[_("label",null,"Developer Tools")],-1)),_("div",vh,[_("input",{type:"checkbox",id:"theme",checked:l.settings.theme=="origin",onChange:i[2]||(i[2]=a=>r.$emit("updateSettings",a,{true:"origin",false:"bubble"},t))},null,40,yh),i[8]||(i[8]=_("label",{for:"theme"},"Old UI",-1))]),_("div",bh,[_("input",{type:"checkbox",id:"stats",checked:l.settings.stats==!0,onChange:i[3]||(i[3]=a=>r.$emit("updateSettings",a))},null,40,wh),i[9]||(i[9]=_("label",{for:"stats"},"Show FPS",-1))]),_("div",xh,[_("input",{type:"checkbox",id:"debug",checked:l.settings.debug==!0,onChange:i[4]||(i[4]=a=>r.$emit("updateSettings",a,null,n))},null,40,Sh),i[10]||(i[10]=_("label",{for:"debug"},"Debug Mode",-1))])])]))}},kh={class:"panel"},Eh={class:"group"},Th={class:"option"},_h=["value"],Ph={class:"group"},Mh={class:"option"},Ah=["value"],Oh={class:"option"},Dh=["checked"],Lh={class:"group"},Bh={class:"option"},Ih=["value"],Rh={class:"option"},jh=["checked"],zh={__name:"BubbleSettingsPanelMultiplayer",props:["settings"],setup(l){var e=l;function t(u){if(app.network.off("peer_open",t),app.multiplayer.setHost(null),u.target.checked==!1){app.network.destroy();return}n()?app.network.connect(e.settings.connection,{metadata:{name:e.settings.name,uuid:app.player.uuid,time:app.multiplayer.getTime()}}):(app.network.on("peer_open",t),app.network.open(e.settings.peer))}function n(){return app.network.isOnline()}function r(){return app.multiplayer.isHost()}function i(){r()?(app.network.destroy(),app.multiplayer.setHost(null)):(app.network.open(e.settings.peer),app.multiplayer.setHost(e.settings.peer))}function a(u){var d=u.target,p=d.value;d.value="Copied!",d.disabled=!0,navigator.clipboard.writeText(p),setTimeout(function(){d.value=p,d.disabled=!1},1e3)}return(u,d)=>(j(),N("div",kh,[d[10]||(d[10]=_("p",null,"Multiplayer",-1)),_("div",Eh,[_("div",Th,[d[5]||(d[5]=_("label",{for:"name"},"Your name",-1)),_("input",{type:"text",id:"name",value:l.settings.name,onChange:d[0]||(d[0]=p=>u.$emit("updateSettings",p))},null,40,_h)])]),_("div",Ph,[_("div",Mh,[d[6]||(d[6]=_("label",{for:"connection"},"Paste friend code",-1)),_("input",{type:"text",id:"connection",value:l.settings.connection,onChange:d[1]||(d[1]=p=>u.$emit("updateSettings",p)),placeholder:"ex: 4630cba6-b969-46f3-8d32-e77324054612"},null,40,Ah)]),_("div",Oh,[_("input",{type:"checkbox",id:"join-multiplayer",checked:n()&&r()==!1,onChange:d[2]||(d[2]=p=>t(p))},null,40,Dh),d[7]||(d[7]=_("label",{for:"join-multiplayer"},"Join Server",-1))])]),_("div",Lh,[_("div",Bh,[d[8]||(d[8]=_("label",{for:"peer-id"},"Share friend code",-1)),_("input",{type:"text",id:"peer-id",value:l.settings.peer,onClick:d[3]||(d[3]=p=>a(p)),readonly:""},null,8,Ih)]),_("div",Rh,[_("input",{type:"checkbox",id:"host-multiplayer",checked:r(),onChange:d[4]||(d[4]=p=>i(p))},null,40,jh),d[9]||(d[9]=_("label",{for:"host-multiplayer"},"Host Server",-1))])])]))}},Uh={class:"panel"},Nh={class:"group"},Fh={class:"option"},qh=["value"],Hh={__name:"BubbleSettingsPanelMods",props:["settings"],setup(l){var e=l;function t(){var r=localStorage.getItem("mods");return(r==null||r=="")&&(r="app.loop.speed = 2;"),r}function n(r){var i=r.target.value;localStorage.setItem("mods",i)}return(r,i)=>(j(),N("div",Uh,[i[1]||(i[1]=_("p",null,"Mods",-1)),_("div",Nh,[_("div",Fh,[i[0]||(i[0]=_("label",{for:"mods"},[_("span",{class:"material-symbols-rounded"},"assignment"),Le(" Clipboard")],-1)),_("textarea",{value:t(),id:"mods",onChange:n,spellcheck:"false"},null,40,qh)])]),i[2]||(i[2]=qa('<div class="group"><div class="option"><label><span class="material-symbols-rounded">security</span> For your security, mods must be manually loaded each time the game is launched.</label></div></div><div class="group"><div class="option"><label><span class="material-symbols-rounded">content_copy</span> Copy mods from trusted websites and paste them in the clipboard for later.<br><br>Trusted mods: <a href="https://github.com/Charlieee1/Boxel-3d-Mods/" target="_blank">github.com/Charlieee1</a></label></div></div><div class="group"><div class="option"><label><span class="material-symbols-rounded">arrow_selector_tool</span> Right-click this game and select <em>Inspect</em>.</label></div></div><div class="group"><div class="option"><label><span class="material-symbols-rounded">slideshow</span> Select the <em>Console</em> tab, paste mods from the clipboard, then press the <em>enter</em> key to load mods.</label></div></div>',4))]))}},Vh={class:"panel"},Gh={class:"group"},Wh={class:"option"},Xh=["value"],Jh=["value","selected"],Zh={class:"group"},Yh={class:"option"},Kh=["value"],$h={for:"volume"},Qh={class:"option"},ef=["value"],tf={for:"volumeMusic"},nf={class:"option"},rf=["value"],sf={for:"volumeEffects"},of={__name:"BubbleSettingsPanelAudio",props:["settings"],emits:["updateSettings"],setup(l,{emit:e}){const t=l,n=e;var r=Object.keys(Vt).filter(a=>Vt[a].userData.type=="music").map(a=>({text:Vt[a].userData.name,value:a}));function i(a){r.forEach(u=>{app.assets.audio.cache[u.value].stop()}),app.assets.audio.cache[a.target.value].play(),n("updateSettings",a)}return(a,u)=>(j(),N("div",Vh,[u[8]||(u[8]=_("p",null,"Audio",-1)),_("div",Gh,[u[4]||(u[4]=_("div",{class:"option"},[_("label",{for:"music"},"Music")],-1)),_("div",Wh,[_("select",{id:"music",value:l.settings.music,onChange:u[0]||(u[0]=d=>i(d))},[(j(!0),N(ve,null,Ne(R(r),(d,p)=>(j(),N("option",{value:d.value,key:d.value,selected:l.settings.music==d.value},ue(d.text),9,Jh))),128))],40,Xh)])]),_("div",Zh,[u[5]||(u[5]=_("div",{class:"option"},[_("label",{for:"volume"},"Main Volume")],-1)),_("div",Yh,[_("input",{type:"range",id:"volume",min:"0",max:"1",step:"0.1",value:l.settings.volume,onChange:u[1]||(u[1]=d=>a.$emit("updateSettings",d))},null,40,Kh),_("label",$h,ue(l.settings.volume*100)+"%",1)]),u[6]||(u[6]=_("div",{class:"option"},[_("label",{for:"volumeMusic"},"Music Volume")],-1)),_("div",Qh,[_("input",{type:"range",id:"volumeMusic",min:"0",max:"1",step:"0.1",value:l.settings.volumeMusic,onChange:u[2]||(u[2]=d=>a.$emit("updateSettings",d))},null,40,ef),_("label",tf,ue(l.settings.volumeMusic*100)+"%",1)]),u[7]||(u[7]=_("div",{class:"option"},[_("label",{for:"volumeEffects"},"Sound Effects")],-1)),_("div",nf,[_("input",{type:"range",id:"volumeEffects",min:"0",max:"1",step:"0.1",value:l.settings.volumeEffects,onChange:u[3]||(u[3]=d=>a.$emit("updateSettings",d))},null,40,rf),_("label",sf,ue(l.settings.volumeEffects*100)+"%",1)])])]))}},af={class:"panel"},lf={class:"group"},cf={class:"option"},uf={class:"group"},pf={class:"option"},df={__name:"BubbleSettingsPanelData",props:["settings"],setup(l){var e=l;function t(){return chrome.storage!=null}function n(){app.storage.backupToFile()}function r(){app.storage.backupToChrome()}function i(){app.storage.restoreFromFile()}function a(){app.storage.restoreFromChrome()}return(u,d)=>(j(),N("div",af,[d[2]||(d[2]=_("p",null,"Data",-1)),_("div",lf,[d[0]||(d[0]=_("div",{class:"option"},[_("label",null,"Backup to...")],-1)),_("div",cf,[_("input",{type:"button",value:"File",onClick:n}),t()?(j(),N("input",{key:0,type:"button",value:"Google",onClick:r})):Z("",!0)])]),_("div",uf,[d[1]||(d[1]=_("div",{class:"option"},[_("label",null,"Restore from...")],-1)),_("div",pf,[_("input",{type:"button",value:"File",onClick:i}),t()?(j(),N("input",{key:0,type:"button",value:"Google",onClick:a})):Z("",!0)])])]))}},hf={key:0,class:"popup settings"},ff={class:"container"},mf={class:"content compact"},gf={__name:"BubbleSettings",setup(l){var e=W(""),t=W([]),n=W(!1),r=W();function i(){window.addEventListener("openSettings",u),window.addEventListener("closeSettings",d),window.addEventListener("keydown",o)}function a(){window.removeEventListener("openSettings",u),window.removeEventListener("closeSettings",d),window.removeEventListener("keydown",o)}function u(h){n.value=!0,r.value=app.storage.getSettings(),e.value=h.detail||"audio",window.dispatchEvent(new CustomEvent("beforeSettingsOpened")),setTimeout(function(){window.dispatchEvent(new CustomEvent("settingsOpened"))},100)}function d(){n.value=!1,window.dispatchEvent(new CustomEvent("beforeSettingsClosed")),setTimeout(function(){window.dispatchEvent(new CustomEvent("settingsClosed"))},100)}function p(h){e.value=h}function c(h,f){h==null&&(h=d),h(f)}function m(h){var f=t.value[t.value.length-1];f?c(f.callback,h):d()}function o(h){if(n.value==!0){var f=["Escape"];f.indexOf(h.code)>-1&&(h.preventDefault(),m(h))}}function s(h,f,g=function(){}){var v=h.target,x=v.id,w=v.value,S=h.target.type;S=="range"&&(w=parseFloat(w)),S=="checkbox"&&(w=v.checked),f&&(w=f[w]),r.value[x]=w,app.updateSettings(r.value),g()}return ce(function(){i()}),de(function(){a()}),(h,f)=>(j(),ae(_t,{name:"fade-settings"},{default:Pt(()=>[R(n)==!0?(j(),N("div",hf,[_("div",{class:"background",onClick:m}),_("div",ff,[le(lh,{tab:R(e),onChangeTab:p},null,8,["tab"]),_("div",mf,[R(e)=="audio"?(j(),ae(of,{key:0,settings:R(r),onUpdateSettings:s},null,8,["settings"])):Z("",!0),R(e)=="graphics"?(j(),ae(Ch,{key:1,settings:R(r),onUpdateSettings:s},null,8,["settings"])):Z("",!0),R(e)=="multiplayer"?(j(),ae(zh,{key:2,settings:R(r),onUpdateSettings:s},null,8,["settings"])):Z("",!0),R(e)=="mods"?(j(),ae(Hh,{key:3,settings:R(r),onUpdateSettings:s},null,8,["settings"])):Z("",!0),R(e)=="data"?(j(),ae(df,{key:4,settings:R(r),onUpdateSettings:s},null,8,["settings"])):Z("",!0),_("a",{class:"close",onClick:m},f[0]||(f[0]=[_("span",{class:"material-symbols-rounded"},"close",-1)]))])])])):Z("",!0)]),_:1}))}},vf={key:0,class:"popup"},yf={class:"container"},bf={class:"content"},wf=["innerHTML"],xf={class:"inputs"},Sf=["for"],Cf=["id","type","value","min","max","step","accept"],kf={__name:"BubblePopup",setup(l){var e=W(""),t=W([]),n=W(!1);function r(){window.addEventListener("openPopup",a),window.addEventListener("closePopup",u),window.addEventListener("keydown",m)}function i(){window.removeEventListener("openPopup",a),window.removeEventListener("closePopup",u),window.removeEventListener("keydown",m)}function a(o){n.value=!0,o.detail&&(o.detail.text&&(e.value=o.detail.text),o.detail.inputs&&(t.value=o.detail.inputs,t.value.forEach(function(s){s.type=="file"||s.type=="range"||s.type=="text"?s.event="change":s.event="click"}))),setTimeout(function(){window.dispatchEvent(new CustomEvent("popupOpened"))},100)}function u(){n.value=!1,setTimeout(function(){window.dispatchEvent(new CustomEvent("popupClosed"))},100)}function d(o,s){o==null&&(o=u),o(s)}function p(o){var s=t.value[0];s&&d(s.callback,o)}function c(o){var s=t.value[t.value.length-1];s&&d(s.callback,o)}function m(o){if(n.value==!0){var s=["Space","Enter","Escape"];s.indexOf(o.code)>-1&&(o.preventDefault(),c(o)),o.code=="KeyR"&&(o.preventDefault(),p(o))}}return ce(function(){r()}),de(function(){i()}),(o,s)=>(j(),ae(_t,{name:"fade-bubble-popup"},{default:Pt(()=>[R(n)==!0?(j(),N("div",vf,[_("div",{class:"background",onClick:c}),_("div",yf,[_("div",bf,[_("p",{class:"text",innerHTML:R(e)},null,8,wf),_("div",xf,[(j(!0),N(ve,null,Ne(R(t),(h,f)=>(j(),N(ve,null,[h.label?(j(),N("label",{key:0,for:"popup-"+h.type+"-"+f},ue(h.label),9,Sf)):Z("",!0),_("input",ir({class:h.class,id:"popup-"+h.type+"-"+f,type:h.type,value:h.value,min:h.min,max:h.max,step:h.step,accept:h.accept,style:h.style},{[rr(h.event)]:g=>d(h.callback,g)}),null,16,Cf)],64))),256))]),_("a",{class:"close",onClick:c},s[0]||(s[0]=[_("span",{class:"material-symbols-rounded"},"close",-1)]))])])])):Z("",!0)]),_:1}))}},Ef={class:"ui-bubble"},Tf={__name:"Bubble",setup(l){var e=W("home");function t(){window.addEventListener("setPage",r)}function n(){window.removeEventListener("setPage",r)}function r(a){a.detail&&i(a.detail)}function i(a){e.value=a,app.state=a}return ce(function(){t()}),de(function(){n()}),(a,u)=>(j(),N("div",Ef,[R(e)=="home"?(j(),ae(Gp,{key:0,onSetPage:i})):Z("",!0),R(e)=="skins"?(j(),ae(Zp,{key:1,onSetPage:i})):Z("",!0),R(e)=="level-picker"?(j(),ae(ed,{key:2,onSetPage:i})):Z("",!0),R(e)=="campaign"?(j(),ae(fd,{key:3,onSetPage:i})):Z("",!0),le(oh),le(gf),le(kf)]))}},_f={class:"loading"},Pf={class:"bar"},Mf={__name:"Loading",setup(l){var e=W({urls:"",index:0,max:1,percent:0});function t(r){e.value=r}function n(){return e.value.percent==100}return window.addEventListener("updateLoading",function(r){t(r.detail)}),(r,i)=>(j(),ae(_t,{name:"fade-loading"},{default:Pt(()=>[En(_("div",_f,[_("div",Pf,[_("div",{class:"progress",style:Cn({width:R(e).percent+"%"})},null,4)]),_("label",null,"Loading: "+ue(R(e).percent)+"%",1)],512),[[Tn,n()==!1]])]),_:1}))}},Af={__name:"UI",setup(l){var e=W("bubble"),t=["origin","bubble"];function n(){window.addEventListener("setTheme",i)}function r(){window.removeEventListener("setTheme",i)}function i(u){if(u&&u.detail)a(u.detail);else{var d=JSON.parse(localStorage.getItem("settings"));d&&d.theme!=null&&(t.includes(d.theme)?a(d.theme):(d.theme=e.value,localStorage.setItem("settings",JSON.stringify(d))))}}function a(u){e.value=u}return ce(function(){i(),n()}),de(function(){r()}),(u,d)=>(j(),N(ve,null,[R(e)=="origin"?(j(),ae(Op,{key:0})):Z("",!0),R(e)=="bubble"?(j(),ae(Tf,{key:1})):Z("",!0),le(Mf)],64))}},Of={__name:"App",setup(l){var e=W(),t=window.app=new mu;return ce(function(){t.init(e.value)}),(n,r)=>(j(),N(ve,null,[_("canvas",{ref_key:"canvas",ref:e},null,512),le(Af)],64))}};Ha(Of).mount("#app");
