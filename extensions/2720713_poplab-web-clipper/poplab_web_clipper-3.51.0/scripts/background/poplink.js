(()=>{"use strict";var e={7280:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.transformMediaIntoFile=void 0,t.transformMediaIntoFile=function(e,t){const o=e.split(";")[0].split(":")[1],n=atob(e.split(",")[1]),i=[];for(let e=0;e<n.length;e+=512){const t=n.slice(e,e+512),o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t.charCodeAt(e);const r=new Uint8Array(o);i.push(r)}const r=new Blob(i,{type:o});return new File([r],`${t}.${o.split("/")[1]}`,{type:o})}},1227:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.searchArborescenceWithSelectionnable=t.searchArborescence=t.getMostRecentConsultedHierarchiesWithSelectionnable=t.getMostRecentConsultedHierarchies=t.getDocuments=t.logoutFromKeycloak=t.est_connecte=t.update_menus=t.uploadFile=t.createDocument=t.createElement=t.loginToBackend=t.login=void 0;const i=o(4056),r=o(4393),s=o(853),a=o(8033),c=o(2688),u=o(351),l=o(5541),d=o(7970),p=o(9246),h=o(7280);let f;const _="poplab-webclipper";function b(e=!0,t=""){return n(this,void 0,void 0,(function*(){const o=i.base_url_front;f=i.url_auth;let r,s,a=f+"/auth?";""!==t&&(a+=`kc_idp_hint=${t}&`),a+=`client_id=${_}`,a+="&response_type=code",a+="&state=default",a+=`&redirect_uri=${encodeURIComponent(o)}`,a+=`&scope=${encodeURIComponent("openid")}`,a+="&prompt=select_account";try{let t={state:"normal",focused:!0};if("TEST"!==i.VERSION){const e=yield browser.windows.getCurrent(),o=500,n=e.left+e.width-o;t=Object.assign(Object.assign({},t),{height:e.height-16,width:o,left:n,top:e.top})}r=yield(0,l.launchWebAuthFlow)({interactive:e,url:a,redirect_uri:o,alwaysUseTab:!1,windowOptions:t})}catch(e){throw console.error(r+"Erreur rencontrée. ",e),yield(0,d.cleanLocalSessionsData)(),yield v(!1),new Error(chrome.i18n.getMessage("erreur_reseau"))}if(null==r&&!e)throw yield(0,d.cleanLocalSessionsData)(),yield v(!1),new Error("Need user interaction for connection, but asked for passive connection");const c={code:"",session_state:"",state:""},u=r.slice(r.indexOf("?")+1).split("&");for(const e of u)s=e.split("="),c[s[0]]=s[1];const p=c.code,h={redirect_uri:o,client_id:_,grant_type:"authorization_code",code:p,scope:"openid"},b=[];for(const e in h){const t=encodeURIComponent(e),o=encodeURIComponent(h[e]);b.push(t+"="+o)}const E=b.join("&");let y={};return y=yield fetch(f+"/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:E}).then((e=>e.json())).then((e=>((0,d.extractTokenFields)(y,e),y))).catch((e=>n(this,void 0,void 0,(function*(){throw yield(0,d.cleanLocalSessionsData)(),yield v(!1),new Error("Error when fetching/processing token",e)})))),yield(0,d.saveTokenDataToSession)(y),yield v(!0),y}))}function E(){return n(this,void 0,void 0,(function*(){const e={"content-type":"application/json",Accept:"application/json",authorization:""},t=yield m();return e.authorization="Bearer "+t,e}))}function y(e,t,o,r,s){return n(this,void 0,void 0,(function*(){const n=new FormData;n.append("file",r),n.append("uuid",e),n.append("objectType",t.toLowerCase()),n.append("mediaType",o.type_fichier.toLowerCase()),o.editeur&&n.append("editeur",o.editeur),"label"in o&&o.label&&n.append("label",o.label),s!==(yield browser.storage.local.get("frigoRootId")).frigoRootId&&n.append("documentId",s.toLowerCase());const a={authorization:"Bearer "+(yield m())},c=yield fetch(i.url_api+"/v1/medias/upload",{method:"POST",headers:a,body:n});if(!c.ok)throw new Error(`${chrome.i18n.getMessage("erreur_upload_media")} : `+(yield c.json()).status);return yield c.json()}))}function v(e){return n(this,void 0,void 0,(function*(){yield browser.contextMenus.update(a.BrowserContextMenusId.SE_DECONNECTER,{enabled:e}),yield browser.contextMenus.update(a.BrowserContextMenusId.VOIR_FRIGO,{enabled:e}),yield browser.contextMenus.update(a.BrowserContextMenusId.ENVOYER_LIEN,{enabled:e}),yield browser.contextMenus.update(a.BrowserContextMenusId.ENVOYER_IMAGE,{enabled:e}),yield browser.contextMenus.update(a.BrowserContextMenusId.ENVOYER_VIDEO,{enabled:e}),e?browser.action.setPopup({popup:""}):browser.action.setPopup({popup:browser.runtime.getURL("./pages/popup.html")})}))}function m(e=!0){return n(this,void 0,void 0,(function*(){const t=new Date;let o={};const r=new Date((yield browser.storage.local.get("expiration_date")).expiration_date);if((0,d.isTokenExpired)(r,t)){const r=new Date((yield browser.storage.local.get("refresh_expiration_date")).refresh_expiration_date);if((0,d.isTokenExpired)(r,t))o=yield b(e);else{const t=i.url_auth+"/token",r=(yield browser.storage.local.get("refresh_token")).refresh_token;yield fetch(t,{method:"POST",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:`grant_type=refresh_token&client_id=${_}&refresh_token=${r}`}).then((t=>n(this,void 0,void 0,(function*(){if(t.ok)return(0,d.extractTokenFields)(o,yield t.json());o=yield b(e)})))).catch((e=>console.warn(e))),yield(0,d.saveTokenDataToSession)(o)}return o.access_token}return(yield browser.storage.local.get("access_token")).access_token}))}function g(e){return n(this,void 0,void 0,(function*(){const t=`${i.url_api}/documents/_search-documents`,o=yield E(),n={documentUuids:e},r=yield fetch(t,{method:"POST",headers:o,body:JSON.stringify(n)});return yield r.json()}))}function w(){return n(this,void 0,void 0,(function*(){const e=`${i.url_api}/arborescence/recents`,t=yield E(),o=yield fetch(e,{method:"POST",headers:t});return yield o.json()}))}function O(e){return n(this,void 0,void 0,(function*(){const t=`${i.url_api}/documents/_search`,o=yield E(),n=yield fetch(t,{method:"POST",headers:o,body:JSON.stringify({format:"mini",depuis:[],recherche:e})});return(yield n.json()).resultats}))}function R(e){return n(this,void 0,void 0,(function*(){(yield g(e.map((e=>e.id)))).forEach((t=>{t.infosPartages.filter((e=>e.access===u.DocumentAccessType.PUBLIC)).length>0&&(e.find((e=>e.id===t.id)).selectionnable=!1)}))}))}t.login=b,t.loginToBackend=function(e){return n(this,void 0,void 0,(function*(){const t=i.url_api+"/auth/login";return fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}).then((e=>e.json())).then((e=>e)).catch((e=>console.warn(e)))}))},t.createElement=function(e,t,o){return n(this,void 0,void 0,(function*(){const n=yield E();let a="elements";({endpoint:a,parentId:o}=yield(0,p.handleRoot)(a,o));const u=new r.PoplabElementCreationRequest(e,o),l=yield fetch(`${i.url_api}/${a}`,{method:"POST",headers:n,body:JSON.stringify(u)});if(!l.ok){const e=yield l.json(),t=chrome.i18n.getMessage(e.localizedMessage.replace(/\./g,"_"));throw new Error(`${chrome.i18n.getMessage("erreur_creation_element")} : `+t||e.errorCode)}const d=yield l.json();if(t==c.CaptureType.UPLOAD){const t=[];for(const n of e.getMedias())if(n.file){const e=(0,h.transformMediaIntoFile)(n.file,n.id);t.push(y(d.id,s.PoplabObjectType.ELEMENT,n,e,o))}yield Promise.all(t)}return d}))},t.createDocument=function(e,t){return n(this,void 0,void 0,(function*(){const o=yield E();let n="documents";({endpoint:n,parentId:t}=yield(0,p.handleRoot)(n,t));const r=new u.PoplabDocumentCreationRequest(e,t),s=yield fetch(`${i.url_api}/${n}`,{method:"POST",headers:o,body:JSON.stringify(r)});if(!s.ok)throw new Error(`${chrome.i18n.getMessage("erreur_creation_document")} : `+(yield s.json()).status);return yield s.json()}))},t.uploadFile=y,t.update_menus=v,t.est_connecte=function(){return n(this,void 0,void 0,(function*(){try{const e=new Date,t=new Date((yield browser.storage.local.get("expiration_date")).expiration_date);if((0,d.isTokenExpired)(t,e))return!1}catch(e){return!1}return!0}))},t.logoutFromKeycloak=function(){return n(this,void 0,void 0,(function*(){const e=(yield browser.storage.local.get("id_token")).id_token,t=i.url_auth+`/logout?post_logout_redirect_uri=${encodeURIComponent(i.base_url_front)}&id_token_hint=${encodeURIComponent(e)}`;try{yield(0,l.launchWebAuthFlow)({interactive:!0,url:t,redirect_uri:i.base_url_front})}finally{yield(0,d.cleanLocalSessionsData)(),yield v(!1)}}))},t.getDocuments=g,t.getMostRecentConsultedHierarchies=w,t.getMostRecentConsultedHierarchiesWithSelectionnable=function(){return n(this,void 0,void 0,(function*(){const e=yield w();return yield R(e),e}))},t.searchArborescence=O,t.searchArborescenceWithSelectionnable=function(e){return n(this,void 0,void 0,(function*(){const t=yield O(e);return yield R(t),t}))}},9246:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.handleRoot=void 0,t.handleRoot=function(e,t){return o(this,void 0,void 0,(function*(){return"frigo"===t?{endpoint:"frigo",parentId:(yield browser.storage.local.get("frigoRootId")).frigoRootId}:"labo"===t?{endpoint:e,parentId:(yield browser.storage.local.get("laboRootId")).laboRootId}:{endpoint:e,parentId:t}}))}},7970:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.extractTokenFields=t.cleanLocalSessionsData=t.saveTokenDataToSession=t.isTokenExpired=void 0,t.isTokenExpired=function(e,t){return null==e||isNaN(e.getTime())||t.getTime()>=e.getTime()},t.saveTokenDataToSession=function(e){return o(this,void 0,void 0,(function*(){yield browser.storage.local.set({refresh_token:e.refresh_token,access_token:e.access_token,id_token:e.id_token,expiration_date:e.expiration_date,refresh_expiration_date:e.refresh_expiration_date,first_name:e.first_name,provenance:e.provenance})}))},t.cleanLocalSessionsData=function(){return o(this,void 0,void 0,(function*(){yield browser.storage.local.remove(["refresh_token","access_token","expiration_date","refresh_expiration_date","first_name","provenance","use_clipper"])}))},t.extractTokenFields=function(e,t){e.refresh_token=t.refresh_token,e.access_token=t.access_token,e.id_token=t.id_token;const o=new Date,n=new Date;o.setSeconds(o.getSeconds()+t.expires_in),e.expiration_date=o.getTime(),n.setSeconds(n.getSeconds()+t.refresh_expires_in),e.refresh_expiration_date=n.getTime();try{const o=JSON.parse(atob(t.access_token.split(".")[1])),n=o.given_name;e.first_name=decodeURIComponent(escape(n)),e.provenance=o.poplab.provenance}catch(e){console.error("cannot parse JWT token, unable to fetch user firstname",e)}}},5541:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function s(e){try{c(n.next(e))}catch(e){r(e)}}function a(e){try{c(n.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function n(e,t,o,n,i,r,s){var a,c;try{c=(a=e[r](s)).value}catch(e){return void o(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function i(e){return function(){let t=this,o=arguments;return new Promise((function(i,r){var s=e.apply(t,o);function a(e){n(s,i,r,a,c,"next",e)}function c(e){n(s,i,r,a,c,"throw",e)}a(void 0)}))}}function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){let n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((t=>Object.getOwnPropertyDescriptor(e,t).enumerable))),o.push.apply(o,n)}return o}function a(e,t){return c.apply(this,arguments)}function c(){return i((function*(e,t){if(browser.windows&&!t)return yield browser.windows.create(e);const o={active:"minimized"!==e.state,url:e.url};return{tabs:[yield browser.tabs.update(browser.tabs.getCurrent().id,o)]}})).apply(this,arguments)}function u(e,t,o){return l.apply(this,arguments)}function l(){return i((function*(e,t,o){return e?yield browser.windows.update(e,o):yield browser.tabs.update(t,{active:o.focused})})).apply(this,arguments)}function d(e,t){return p.apply(this,arguments)}function p(){return i((function*(e,t){return e?yield browser.windows.remove(e):yield browser.tabs.remove(t)})).apply(this,arguments)}function h(){var e=i((function*({url:e,redirect_uri:t,interactive:n=!1,alwaysUseTab:i=!1,windowOptions:c}){const l=yield a(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({type:"popup",url:e,state:"minimized"},c),i),p=l.id,h=l.tabs[0].id,f=function(){const e={};return e.promise=new Promise(((t,o)=>{e.resolve=t,e.reject=o})),e}(),_=f.promise,b=f.resolve,E=f.reject;browser.tabs.onUpdated.addListener(y),browser.webNavigation.onDOMContentLoaded.addListener(v),browser.tabs.onRemoved.addListener(m);try{return yield _}finally{browser.tabs.onUpdated.removeListener(y),browser.webNavigation.onDOMContentLoaded.removeListener(v),browser.tabs.onRemoved.removeListener(m),d(p,h).catch((e=>console.warn(JSON.stringify(e))))}function y(e,n,i){return o(this,void 0,void 0,(function*(){if(e===h&&null!=i.url&&i.url.startsWith(t))return b(i.url),{cancel:!0}}))}function v(e){e.frameId||e.tabId!==h||(n?u(p,h,{focused:!0,state:"normal"}).catch((e=>console.error(e))):b(null),browser.webNavigation.onDOMContentLoaded.removeListener(v))}function m(e){e===h&&E()}}));return e.apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.launchWebAuthFlow=void 0,t.launchWebAuthFlow=function(e){return h.apply(this,arguments)}},4056:(e,t,o)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.maxResolution=t.handledVideosPlatform=t.url_belin_api_resources=t.url_belin_api=t.url_belin_resources=t.url_belin=t.url_labo=t.url_frigo=t.url_auth=t.url_keycloack=t.url_api=t.base_url_front=t.VERSION=void 0,o(7505),o(872),o(7466),o(3848);const i=o(7260);let r;o(3734),r=i.config,t.VERSION=null!==(n=r.VERSION)&&void 0!==n?n:"3.50.1",t.base_url_front=r.base_url_front,t.url_api=r.url_api,t.url_keycloack=r.url_keycloack,t.url_auth=t.url_keycloack+"/realms/lde-poplab/protocol/openid-connect",t.url_frigo=t.base_url_front+"/frigo",t.url_labo=t.base_url_front+"/labo/mes-documents",t.url_belin="https://manuelnumeriquemax.belin.education/",t.url_belin_resources="https://resources.manuelnumeriquemax.belin.education/",t.url_belin_api="https://api.manuelnumeriquemax.belin.education/main/v1/nodes/",t.url_belin_api_resources="https://api.manuelnumeriquemax.belin.education/main/v1/resources",t.handledVideosPlatform=["youtube.com/watch","youtube.com/embed","youtu.be/","vimeo.com/","dailymotion.com/"],t.maxResolution=49e6},7466:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={base_url_front:"https://app.integration-its.poplab.education",url_api:"https://app.integration-its.poplab.education/api",url_keycloack:"https://id.integration-its.poplab.education"}},7505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={base_url_front:"http://localhost:8000",url_api:"http://localhost:8082/api",url_keycloack:"http://auth.poplab.local"}},3848:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={base_url_front:"https://app.preprod-its.poplab.education",url_api:"https://app.preprod-its.poplab.education/api",url_keycloack:"https://id.preprod-its.poplab.education"}},7260:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={base_url_front:"https://app.poplab.education",url_api:"https://app.poplab.education/api",url_keycloack:"https://auth.poplab.education"}},872:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={base_url_front:"https://app.sandbox.poplab.education",url_api:"https://app.sandbox.poplab.education/api",url_keycloack:"https://id.sandbox.poplab.education"}},3734:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={VERSION:"TEST",base_url_front:"https://app.sandbox.poplab.education",url_api:"https://app.sandbox.poplab.education/api",url_keycloack:"https://id.sandbox.poplab.education"}},2688:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentCaptureData=t.ElementCaptureData=t.CaptureData=t.FichierMediaObject=t.ExerciseurMediaObject=t.UrlMediaObject=t.AudioMediaObject=t.VideoMediaObject=t.ImageMediaObject=t.MediaObject=t.TypeFichier=t.CaptureType=void 0;const n=o(4393);var i,r;!function(e){e.BASIQUE="BASIQUE",e.UPLOAD="UPLOAD"}(i||(t.CaptureType=i={})),function(e){e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.FICHIER="FICHIER",e.LIEN="LIEN",e.EXERCISEUR="EXERCISEUR"}(r||(t.TypeFichier=r={}));class s{constructor(e,t,o,n,i,r,s){this.id=e,this.url=t,this.type_fichier=o,this.copyright=n,this.file=i,this.editeur=r,this.subTypeFichier=s}}t.MediaObject=s,t.ImageMediaObject=class extends s{constructor(e,t,o,n,i){super(e,t,r.IMAGE,o,n,i)}},t.VideoMediaObject=class extends s{constructor(e,t,o,n,i){super(e,t,r.VIDEO,o,n,i)}},t.AudioMediaObject=class extends s{constructor(e,t,o,n,i){super(e,t,r.AUDIO,o,n,i)}},t.UrlMediaObject=class extends s{constructor(e,t,o,n){super(e,t,r.LIEN,o),this.displayPreview=!1,this.bigPreview=!1,this.label=n}},t.ExerciseurMediaObject=class extends s{constructor(e,t,o){super(e,t,r.EXERCISEUR),this.typeExerciseur=o}},t.FichierMediaObject=class extends s{constructor(e,t,o,n,i){super(e,t,r.FICHIER,void 0,o,void 0,n),this.label=i}};class a{constructor(e,t,o){this.titre=e,this.description=t,this.auteurInitial=o}}t.CaptureData=a;class c extends a{constructor(e){var t,o,i,r,s,a,c;super(null==e?void 0:e.titre,null==e?void 0:e.description,null==e?void 0:e.auteurInitial),this.type=n.ElementType.ELEMENT,this.images=[],this.videos=[],this.audios=[],this.urls=[],this.exerciseurs=[],this.fichiers=[],this.credit=null==e?void 0:e.credit,this.images=null!==(t=null==e?void 0:e.images)&&void 0!==t?t:[],this.videos=null!==(o=null==e?void 0:e.videos)&&void 0!==o?o:[],this.audios=null!==(i=null==e?void 0:e.audios)&&void 0!==i?i:[],this.urls=null!==(r=null==e?void 0:e.urls)&&void 0!==r?r:[],this.exerciseurs=null!==(s=null==e?void 0:e.exerciseurs)&&void 0!==s?s:[],this.fichiers=null!==(a=null==e?void 0:e.fichiers)&&void 0!==a?a:[],this.type=null!==(c=null==e?void 0:e.type)&&void 0!==c?c:n.ElementType.ELEMENT,this.options=null==e?void 0:e.options,this.meta=null==e?void 0:e.meta}setTitre(e){return this.titre=e,this}setDescription(e){return this.description=e,this}setCredit(e){return this.credit=e,this}setImages(e){return this.images=e,this}setVideos(e){return this.videos=e,this}setAudios(e){return this.audios=e,this}setUrls(e){return this.urls=e,this}setExerciseurs(e){return this.exerciseurs=e,this}setType(e){return this.type=e,this}getMedias(){return this.images.concat(this.videos.concat(this.audios.concat(this.fichiers)))}getAllEmbeds(){return this.getMedias().concat(this.urls).concat(this.exerciseurs)}}t.ElementCaptureData=c,t.DocumentCaptureData=class extends a{constructor(e){super(null==e?void 0:e.titre,null==e?void 0:e.description,null==e?void 0:e.auteurInitial),this.elements=[],null==e||e.elements.forEach((e=>this.elements.push(new c(e)))),this.meta=null==e?void 0:e.meta}setTitre(e){return this.titre=e,this}setDescription(e){return this.description=e,this}setElements(e){return this.elements=e,this}}},8033:(e,t)=>{var o,n,i,r,s;Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserContextMenusId=t.MessageOngletDone=t.MessageOnglet=t.MessageOngletType=t.BrowserRuntimeResponse=t.BrowserRuntimeMessageSearchArborescenceWithSelectionnable=t.BrowserRuntimeMessageSearchArborescence=t.BrowserRuntimeMessageGetRecentArborescenceWithSelectionnable=t.BrowserRuntimeMessageGetRecentArborescence=t.BrowserRuntimeMessageForPoplab=t.BrowserRuntimeMessage=t.BrowserRuntimeMessageEventSubType=t.BrowserRuntimeMessageEventType=void 0,function(e){e.STATUS="status",e.CONNECT="connect",e.ENVOYER_SUR_POPLAB="envoyer_sur_poplab",e.CAPTURE_TAB="captureTab",e.GET_RECENT_ARBORESCENCE="getRecentHierarchies",e.SEARCH_ARBORESCENCE="searchArborescence"}(o||(t.BrowserRuntimeMessageEventType=o={})),function(e){e.WITH_SELECTIONNABLE="WithSelectionnable"}(n||(t.BrowserRuntimeMessageEventSubType=n={}));class a{constructor(e,t,o){this.type=e,this.subType=t,this.idp=o}}t.BrowserRuntimeMessage=a,t.BrowserRuntimeMessageForPoplab=class extends a{constructor(e,t,n,i){super(o.ENVOYER_SUR_POPLAB),this.type_item_poplab=e,this.type_capture=t,this.data=n,this.destination=i}},t.BrowserRuntimeMessageGetRecentArborescence=class extends a{constructor(){super(o.GET_RECENT_ARBORESCENCE)}},t.BrowserRuntimeMessageGetRecentArborescenceWithSelectionnable=class extends a{constructor(){super(o.GET_RECENT_ARBORESCENCE,n.WITH_SELECTIONNABLE)}};class c extends a{constructor(e,t,o){super(t,o),this.value=e}}t.BrowserRuntimeMessageSearchArborescence=class extends c{constructor(e){super(e,o.SEARCH_ARBORESCENCE)}},t.BrowserRuntimeMessageSearchArborescenceWithSelectionnable=class extends c{constructor(e){super(e,o.SEARCH_ARBORESCENCE,n.WITH_SELECTIONNABLE)}},function(e){e.INTERDIT="interdit",e.DECONNECTE="déconnecté",e.CONNECTE="connecté",e.ENVOYE="envoyé"}(i||(t.BrowserRuntimeResponse=i={})),function(e){e.STOP_CAPTURE="stopCapture",e.CAPTURER_LIEN="capturerLien",e.CAPTURER_IMAGE="capturerImage",e.CAPTURER_VIDEO="capturerVideo",e.TOGGLE_CAPTURE="toggleCapture",e.START_CAPTURE="startCapture",e.UPLOAD_FRIGO_DONE="uploadFrigoDone",e.CANCEL_UPLOAD="cancelUpload",e.REFRESH_CAPTURE="refreshCapture"}(r||(t.MessageOngletType=r={}));class u{constructor(e,t,o){this.first_name=void 0,this.provenance=void 0,this.type=e,this.first_name=t,this.provenance=o}}t.MessageOnglet=u,t.MessageOngletDone=class extends u{constructor(e,t){super(e),this.documentId=t}},function(e){e.SE_DECONNECTER="se-deconnecter",e.VOIR_FRIGO="voir-frigo",e.ENVOYER_LIEN="envoyer-lien",e.ENVOYER_IMAGE="envoyer-image",e.ENVOYER_VIDEO="envoyer-video"}(s||(t.BrowserContextMenusId=s={}))},351:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentAccessType=t.PoplabDocumentCreationRequest=void 0,t.PoplabDocumentCreationRequest=class{constructor(e,t){var o;this.type="document",this.ordreFlux=[],this.options={isnew:!1},this.titre=e.titre,this.description=null!==(o=e.description)&&void 0!==o?o:"",this.webAuteurInitial=e.auteurInitial,this.meta=e.meta,this.parent=t}},function(e){e.PUBLIC="PUBLIC",e.REGISTERED="REGISTERED",e.EXPLICIT="EXPLICIT",e.OWNER="OWNER",e.NONE="NONE"}(o||(t.DocumentAccessType=o={}))},4393:(e,t)=>{var o,n,i,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Editeur=t.ElementType=t.ExerciseurType=t.PoplabElementCreationRequest=void 0,t.PoplabElementCreationRequest=class{constructor(e,t){var n,r,s;this.titre=null!==(n=e.titre)&&void 0!==n?n:"",this.description=null!==(r=e.description)&&void 0!==r?r:"",this.type=e.type,this.options={isnew:!0,separator:!1},this.type!==i.SECTION||this.titre||(this.options.separator=!0),this.credits=null!==(s=e.credit)&&void 0!==s?s:"",this.webAuteurInitial=e.auteurInitial,this.imageEmbed=e.images[0]?{url:e.images[0].url,type:o.IMAGE}:void 0,this.videoEmbed=e.videos[0]?{url:e.videos[0].url,type:o.VIDEO}:void 0,this.audioEmbed=e.audios[0]?{url:e.audios[0].url,type:o.AUDIO}:void 0,this.lienEmbed=e.urls[0]?{url:e.urls[0].url,label:e.urls[0].label,displayPreview:e.urls[0].displayPreview,bigPreview:e.urls[0].bigPreview,type:o.LIEN}:void 0,this.exerciseur=e.exerciseurs[0]?{url:e.exerciseurs[0].url,exerciseurType:e.exerciseurs[0].typeExerciseur,type:o.EXERCISEUR}:void 0,t&&(this.document=t),this.meta=e.meta}},function(e){e.LIEN="LIEN",e.IMAGE="IMAGE",e.VIDEO="VIDEO",e.AUDIO="AUDIO",e.FICHIER="FICHIER",e.EXERCISEUR="EXERCISEUR"}(o||(o={})),function(e){e.QUIZLET="QUIZLET",e.LEARNINGAPPS="LEARNINGAPPS",e.GENIALLY="GENIALLY",e.BOOKWIDGETS="BOOKWIDGETS",e.EDUPOOL="EDUPOOL",e.BELIN="BELIN"}(n||(t.ExerciseurType=n={})),function(e){e.ELEMENT="element",e.SECTION="section"}(i||(t.ElementType=i={})),function(e){e.BELIN="https://www.belin-education.com/"}(r||(t.Editeur=r={}))},853:(e,t)=>{var o;Object.defineProperty(t,"__esModule",{value:!0}),t.PoplabObjectType=void 0,function(e){e.ELEMENT="ELEMENT",e.DOCUMENT="DOCUMENT"}(o||(t.PoplabObjectType=o={}))}},t={};!function o(n){var i=t[n];if(void 0!==i)return i.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,o),r.exports}(1227)})();