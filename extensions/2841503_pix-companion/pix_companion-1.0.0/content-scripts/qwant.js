var qwant=function(){"use strict";var We=Object.defineProperty;var be=x=>{throw TypeError(x)};var Be=(x,v,I)=>v in x?We(x,v,{enumerable:!0,configurable:!0,writable:!0,value:I}):x[v]=I;var le=(x,v,I)=>Be(x,typeof v!="symbol"?v+"":v,I),ce=(x,v,I)=>v.has(x)||be("Cannot "+I);var K=(x,v,I)=>(ce(x,v,"read from private field"),I?I.call(x):v.get(x)),W=(x,v,I)=>v.has(x)?be("Cannot add the same private member more than once"):v instanceof WeakSet?v.add(x):v.set(x,I),we=(x,v,I,O)=>(ce(x,v,"write to private field"),O?O.call(x,I):v.set(x,I),I),J=(x,v,I)=>(ce(x,v,"access private method"),I);var Z,L,Q,P,xe,me;function x(t){return t}var v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function I(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O={exports:{}};(function(t,e){(function(r,s){s(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:v,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",u=m=>{const b={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(b).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class E extends WeakMap{constructor(o,d=void 0){super(d),this.createItem=o}get(o){return this.has(o)||this.set(o,this.createItem(o)),super.get(o)}}const $=c=>c&&typeof c=="object"&&typeof c.then=="function",M=(c,o)=>(...d)=>{m.runtime.lastError?c.reject(new Error(m.runtime.lastError.message)):o.singleCallbackArg||d.length<=1&&o.singleCallbackArg!==!1?c.resolve(d[0]):c.resolve(d)},p=c=>c==1?"argument":"arguments",R=(c,o)=>function(g,...w){if(w.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${p(o.minArgs)} for ${c}(), got ${w.length}`);if(w.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${p(o.maxArgs)} for ${c}(), got ${w.length}`);return new Promise((_,T)=>{if(o.fallbackToNoCallback)try{g[c](...w,M({resolve:_,reject:T},o))}catch(A){console.warn(`${c} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,A),g[c](...w),o.fallbackToNoCallback=!1,o.noCallback=!0,_()}else o.noCallback?(g[c](...w),_()):g[c](...w,M({resolve:_,reject:T},o))})},j=(c,o,d)=>new Proxy(o,{apply(g,w,_){return d.call(w,c,..._)}});let U=Function.call.bind(Object.prototype.hasOwnProperty);const a=(c,o={},d={})=>{let g=Object.create(null),w={has(T,A){return A in c||A in g},get(T,A,k){if(A in g)return g[A];if(!(A in c))return;let D=c[A];if(typeof D=="function")if(typeof o[A]=="function")D=j(c,c[A],o[A]);else if(U(d,A)){let q=R(A,d[A]);D=j(c,c[A],q)}else D=D.bind(c);else if(typeof D=="object"&&D!==null&&(U(o,A)||U(d,A)))D=a(D,o[A],d[A]);else if(U(d,"*"))D=a(D,o[A],d["*"]);else return Object.defineProperty(g,A,{configurable:!0,enumerable:!0,get(){return c[A]},set(q){c[A]=q}}),D;return g[A]=D,D},set(T,A,k,D){return A in g?g[A]=k:c[A]=k,!0},defineProperty(T,A,k){return Reflect.defineProperty(g,A,k)},deleteProperty(T,A){return Reflect.deleteProperty(g,A)}},_=Object.create(c);return new Proxy(_,w)},n=c=>({addListener(o,d,...g){o.addListener(c.get(d),...g)},hasListener(o,d){return o.hasListener(c.get(d))},removeListener(o,d){o.removeListener(c.get(d))}}),i=new E(c=>typeof c!="function"?c:function(d){const g=a(d,{},{getContent:{minArgs:0,maxArgs:0}});c(g)}),l=new E(c=>typeof c!="function"?c:function(d,g,w){let _=!1,T,A=new Promise(F=>{T=function(C){_=!0,F(C)}}),k;try{k=c(d,g,T)}catch(F){k=Promise.reject(F)}const D=k!==!0&&$(k);if(k!==!0&&!D&&!_)return!1;const q=F=>{F.then(C=>{w(C)},C=>{let oe;C&&(C instanceof Error||typeof C.message=="string")?oe=C.message:oe="An unexpected error occurred",w({__mozWebExtensionPolyfillReject__:!0,message:oe})}).catch(C=>{console.error("Failed to send onMessage rejected reply",C)})};return q(D?k:A),!0}),f=({reject:c,resolve:o},d)=>{m.runtime.lastError?m.runtime.lastError.message===s?o():c(new Error(m.runtime.lastError.message)):d&&d.__mozWebExtensionPolyfillReject__?c(new Error(d.message)):o(d)},h=(c,o,d,...g)=>{if(g.length<o.minArgs)throw new Error(`Expected at least ${o.minArgs} ${p(o.minArgs)} for ${c}(), got ${g.length}`);if(g.length>o.maxArgs)throw new Error(`Expected at most ${o.maxArgs} ${p(o.maxArgs)} for ${c}(), got ${g.length}`);return new Promise((w,_)=>{const T=f.bind(null,{resolve:w,reject:_});g.push(T),d.sendMessage(...g)})},S={devtools:{network:{onRequestFinished:n(i)}},runtime:{onMessage:n(l),onMessageExternal:n(l),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},y={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return b.privacy={network:{"*":y},services:{"*":y},websites:{"*":y}},a(m,S,b)};r.exports=u(chrome)}})})(O);var ve=O.exports;const N=I(ve);var ge=Object.prototype.hasOwnProperty;function X(t,e){var r,s;if(t===e)return!0;if(t&&e&&(r=t.constructor)===e.constructor){if(r===Date)return t.getTime()===e.getTime();if(r===RegExp)return t.toString()===e.toString();if(r===Array){if((s=t.length)===e.length)for(;s--&&X(t[s],e[s]););return s===-1}if(!r||typeof t=="object"){s=0;for(r in t)if(ge.call(t,r)&&++s&&!ge.call(e,r)||!(r in e)||!X(t[r],e[r]))return!1;return Object.keys(e).length===s}}return t!==t&&e!==e}function B(t,...e){}const z={debug:(...t)=>B(console.debug,...t),log:(...t)=>B(console.log,...t),warn:(...t)=>B(console.warn,...t),error:(...t)=>B(console.error,...t)};function ye(t){return Array.isArray(t)?t:[t]}const pe=new Error("request for lock canceled");var Ee=function(t,e,r,s){function u(m){return m instanceof r?m:new r(function(b){b(m)})}return new(r||(r=Promise))(function(m,b){function E(p){try{M(s.next(p))}catch(R){b(R)}}function $(p){try{M(s.throw(p))}catch(R){b(R)}}function M(p){p.done?m(p.value):u(p.value).then(E,$)}M((s=s.apply(t,e||[])).next())})};class De{constructor(e,r=pe){this._value=e,this._cancelError=r,this._queue=[],this._weightedWaiters=[]}acquire(e=1,r=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return new Promise((s,u)=>{const m={resolve:s,reject:u,weight:e,priority:r},b=ue(this._queue,E=>r<=E.priority);b===-1&&e<=this._value?this._dispatchItem(m):this._queue.splice(b+1,0,m)})}runExclusive(e){return Ee(this,arguments,void 0,function*(r,s=1,u=0){const[m,b]=yield this.acquire(s,u);try{return yield r(m)}finally{b()}})}waitForUnlock(e=1,r=0){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);return this._couldLockImmediately(e,r)?Promise.resolve():new Promise(s=>{this._weightedWaiters[e-1]||(this._weightedWaiters[e-1]=[]),_e(this._weightedWaiters[e-1],{resolve:s,priority:r})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(e){this._value=e,this._dispatchQueue()}release(e=1){if(e<=0)throw new Error(`invalid weight ${e}: must be positive`);this._value+=e,this._dispatchQueue()}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(e){const r=this._value;this._value-=e.weight,e.resolve([r,this._newReleaser(e.weight)])}_newReleaser(e){let r=!1;return()=>{r||(r=!0,this.release(e))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let e=this._value;e>0;e--){const r=this._weightedWaiters[e-1];r&&(r.forEach(s=>s.resolve()),this._weightedWaiters[e-1]=[])}else{const e=this._queue[0].priority;for(let r=this._value;r>0;r--){const s=this._weightedWaiters[r-1];if(!s)continue;const u=s.findIndex(m=>m.priority<=e);(u===-1?s:s.splice(0,u)).forEach(m=>m.resolve())}}}_couldLockImmediately(e,r){return(this._queue.length===0||this._queue[0].priority<r)&&e<=this._value}}function _e(t,e){const r=ue(t,s=>e.priority<=s.priority);t.splice(r+1,0,e)}function ue(t,e){for(let r=t.length-1;r>=0;r--)if(e(t[r]))return r;return-1}var Ie=function(t,e,r,s){function u(m){return m instanceof r?m:new r(function(b){b(m)})}return new(r||(r=Promise))(function(m,b){function E(p){try{M(s.next(p))}catch(R){b(R)}}function $(p){try{M(s.throw(p))}catch(R){b(R)}}function M(p){p.done?m(p.value):u(p.value).then(E,$)}M((s=s.apply(t,e||[])).next())})};class Te{constructor(e){this._semaphore=new De(1,e)}acquire(){return Ie(this,arguments,void 0,function*(e=0){const[,r]=yield this._semaphore.acquire(1,e);return r})}runExclusive(e,r=0){return this._semaphore.runExclusive(()=>e(),1,r)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(e=0){return this._semaphore.waitForUnlock(1,e)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const ee=ke();function ke(){const t={local:G("local"),session:G("session"),sync:G("sync"),managed:G("managed")},e=a=>{const n=t[a];if(n==null){const i=Object.keys(t).join(", ");throw Error(`Invalid area "${a}". Options: ${i}`)}return n},r=a=>{const n=a.indexOf(":"),i=a.substring(0,n),l=a.substring(n+1);if(l==null)throw Error(`Storage key should be in the form of "area:key", but received "${a}"`);return{driverArea:i,driverKey:l,driver:e(i)}},s=a=>a+"$",u=(a,n)=>a??n??null,m=a=>typeof a=="object"&&!Array.isArray(a)?a:{},b=async(a,n,i)=>{const l=await a.getItem(n);return u(l,(i==null?void 0:i.fallback)??(i==null?void 0:i.defaultValue))},E=async(a,n)=>{const i=s(n),l=await a.getItem(i);return m(l)},$=async(a,n,i)=>{await a.setItem(n,i??null)},M=async(a,n,i)=>{const l=s(n),h={...m(await a.getItem(l))};Object.entries(i).forEach(([S,y])=>{y==null?delete h[S]:h[S]=y}),await a.setItem(l,h)},p=async(a,n,i)=>{if(await a.removeItem(n),i!=null&&i.removeMeta){const l=s(n);await a.removeItem(l)}},R=async(a,n,i)=>{const l=s(n);if(i==null)await a.removeItem(l);else{const f=m(await a.getItem(l));ye(i).forEach(h=>delete f[h]),await a.setItem(l,f)}},j=(a,n,i)=>a.watch(n,i);return{getItem:async(a,n)=>{const{driver:i,driverKey:l}=r(a);return await b(i,l,n)},getItems:async a=>{const n=new Map,i=new Map;return a.forEach(f=>{let h,S;typeof f=="string"?h=f:(h=f.key,S=f.options);const{driverArea:y,driverKey:c}=r(h),o=n.get(y)??[];n.set(y,o.concat(c)),i.set(h,S)}),(await Promise.all(Array.from(n.entries()).map(async([f,h])=>(await t[f].getItems(h)).map(y=>{const c=`${f}:${y.key}`,o=i.get(c),d=u(y.value,(o==null?void 0:o.fallback)??(o==null?void 0:o.defaultValue));return{key:c,value:d}})))).flat()},getMeta:async a=>{const{driver:n,driverKey:i}=r(a);return await E(n,i)},setItem:async(a,n)=>{const{driver:i,driverKey:l}=r(a);await $(i,l,n)},setItems:async a=>{const n=new Map;a.forEach(({key:i,value:l})=>{const{driverArea:f,driverKey:h}=r(i),S=n.get(f)??[];n.set(f,S.concat({key:h,value:l}))}),await Promise.all(Array.from(n.entries()).map(async([i,l])=>{await e(i).setItems(l)}))},setMeta:async(a,n)=>{const{driver:i,driverKey:l}=r(a);await M(i,l,n)},removeItem:async(a,n)=>{const{driver:i,driverKey:l}=r(a);await p(i,l,n)},removeItems:async a=>{const n=new Map;a.forEach(i=>{let l,f;typeof i=="string"?l=i:(l=i.key,f=i.options);const{driverArea:h,driverKey:S}=r(l),y=n.get(h)??[];y.push(S),f!=null&&f.removeMeta&&y.push(s(S)),n.set(h,y)}),await Promise.all(Array.from(n.entries()).map(async([i,l])=>{await e(i).removeItems(l)}))},removeMeta:async(a,n)=>{const{driver:i,driverKey:l}=r(a);await R(i,l,n)},snapshot:async(a,n)=>{var f;const l=await e(a).snapshot();return(f=n==null?void 0:n.excludeKeys)==null||f.forEach(h=>{delete l[h],delete l[s(h)]}),l},restoreSnapshot:async(a,n)=>{await e(a).restoreSnapshot(n)},watch:(a,n)=>{const{driver:i,driverKey:l}=r(a);return j(i,l,n)},unwatch(){Object.values(t).forEach(a=>{a.unwatch()})},defineItem:(a,n)=>{const{driver:i,driverKey:l}=r(a),{version:f=1,migrations:h={}}=n??{};if(f<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const S=async()=>{var D;const g=s(l),[{value:w},{value:_}]=await i.getItems([l,g]);if(w==null)return;const T=(_==null?void 0:_.v)??1;if(T>f)throw Error(`Version downgrade detected (v${T} -> v${f}) for "${a}"`);z.debug(`Running storage migration for ${a}: v${T} -> v${f}`);const A=Array.from({length:f-T},(q,F)=>T+F+1);let k=w;for(const q of A)k=await((D=h==null?void 0:h[q])==null?void 0:D.call(h,k))??k;await i.setItems([{key:l,value:k},{key:g,value:{..._,v:f}}]),z.debug(`Storage migration completed for ${a} v${f}`,{migratedValue:k})},y=(n==null?void 0:n.migrations)==null?Promise.resolve():S().catch(g=>{z.error(`Migration failed for ${a}`,g)}),c=new Te,o=()=>(n==null?void 0:n.fallback)??(n==null?void 0:n.defaultValue)??null,d=()=>c.runExclusive(async()=>{const g=await i.getItem(l);if(g!=null||(n==null?void 0:n.init)==null)return g;const w=await n.init();return await i.setItem(l,w),w});return y.then(d),{get defaultValue(){return o()},get fallback(){return o()},getValue:async()=>(await y,n!=null&&n.init?await d():await b(i,l,n)),getMeta:async()=>(await y,await E(i,l)),setValue:async g=>(await y,await $(i,l,g)),setMeta:async g=>(await y,await M(i,l,g)),removeValue:async g=>(await y,await p(i,l,g)),removeMeta:async g=>(await y,await R(i,l,g)),watch:g=>j(i,l,(w,_)=>g(w??o(),_??o())),migrate:S}}}}function G(t){const e=()=>{if(N.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(N.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const s=N.storage[t];if(s==null)throw Error(`"browser.storage.${t}" is undefined`);return s},r=new Set;return{getItem:async s=>(await e().get(s))[s],getItems:async s=>{const u=await e().get(s);return s.map(m=>({key:m,value:u[m]??null}))},setItem:async(s,u)=>{u==null?await e().remove(s):await e().set({[s]:u})},setItems:async s=>{const u=s.reduce((m,{key:b,value:E})=>(m[b]=E,m),{});await e().set(u)},removeItem:async s=>{await e().remove(s)},removeItems:async s=>{await e().remove(s)},snapshot:async()=>await e().get(),restoreSnapshot:async s=>{await e().set(s)},watch(s,u){const m=b=>{const E=b[s];E!=null&&(X(E.newValue,E.oldValue)||u(E.newValue??null,E.oldValue??null))};return e().onChanged.addListener(m),r.add(m),()=>{e().onChanged.removeListener(m),r.delete(m)}},unwatch(){r.forEach(s=>{e().onChanged.removeListener(s)}),r.clear()}}}let re;function Se(t,e){re={debug:(...r)=>{e(t,"DEBUG",r)},info:(...r)=>{e(t,"INFO",r)},warn:(...r)=>{e(t,"WARN",r)},error:(...r)=>{e(t,"ERROR",r)}}}function Me(t,e,r){N.runtime.sendMessage(void 0,{event:"pix:log",context:t,level:e,args:r}).catch(console.error)}function Re(t){Se(t,Me)}function Ce(t){const e=new MutationObserver(r=>{r.forEach(s=>{s.addedNodes.forEach(u=>{u instanceof Element&&t(u)})})});return Object.assign(e,{observeChildren:r=>{e.observe(r,{childList:!0,subtree:!0})}})}function qe(t,e){let r=t.closest(e);if(!r)for(let s=de(t);s!==void 0&&(r=s.closest(e),!r);s=de(s));r??(r=t),r.style.pointerEvents="none",r.style.userSelect="none",r.style.filter="blur(0.5rem)"}function de(t){for(;t.parentNode;)t=t.parentNode;return t instanceof ShadowRoot?t.host:void 0}const Ne=[{baseDomain:"128mots.com"},{baseDomain:"besse.perso.univ-pau.fr"},{baseDomain:"brainly.in"},{baseDomain:"brainly.ro"},{baseDomain:"commentouvrir.com"},{baseDomain:"dictionary.tn"},{baseDomain:"diogn.fr"},{baseDomain:"docplayer.fr"},{baseDomain:"ecs.softec.com.py"},{baseDomain:"ekladata.com"},{baseDomain:"elibrary.tips"},{baseDomain:"eliteanswers.in"},{baseDomain:"es.educaplay.com"},{baseDomain:"evalquiz.com"},{baseDomain:"exocorriges.com"},{baseDomain:"fdj.home.blog"},{baseDomain:"fdjhome.files.wordpress.com"},{baseDomain:"foforum.fr"},{baseDomain:"forum.mathforu.com"},{baseDomain:"forums.commentcamarche.net"},{baseDomain:"fr.alamal-news.com"},{baseDomain:"frederic-junier.org"},{baseDomain:"fr.franceasks.com"},{baseDomain:"fr.quora.com"},{baseDomain:"fr.scribd.com"},{baseDomain:"labs.inquest.net"},{baseDomain:"la-pix.fr"},{baseDomain:"leblogduwebmaster.fr"},{baseDomain:"lecoindusenior.fr"},{baseDomain:"lesoutrali.com"},{baseDomain:"lewebpedagogique.com"},{baseDomain:"new.hi7ob.com"},{baseDomain:"nosdevoirs.fr"},{baseDomain:"quizizz.com"},{baseDomain:"quiz-let.com"},{baseDomain:"quizlet.com"},{baseDomain:"reso-avenirs.onisep.fr"},{baseDomain:"sciences-ingenieur.genevoix-signoret-vinci.fr"},{baseDomain:"socialgrep.com"},{baseDomain:"troyprep.uncommonschools.org"},{baseDomain:"truyenhinhcapsongthu.net"},{baseDomain:"view.genial.ly"},{baseDomain:"arue.pf"},{baseDomain:"askabox.fr"},{baseDomain:"brainscape.com"},{baseDomain:"calameo.com"},{baseDomain:"cjoint.com"},{baseDomain:"coin-des-animateurs.com"},{baseDomain:"commentformaterunpc.com"},{baseDomain:"e-bahut.com"},{baseDomain:"gauthmath.com"},{baseDomain:"jeuxvideo.com"},{baseDomain:"jz0ralalm.com"},{baseDomain:"marocpolis.net"},{baseDomain:"maths-forum.com"},{baseDomain:"onlinecv.fr"},{baseDomain:"pix-data.com"},{baseDomain:"presentation-cv-simple.com"},{baseDomain:"prof-tc.fr"},{baseDomain:"reddit.com"},{baseDomain:"reponserapide.com"},{baseDomain:"secu-ordi.com"},{baseDomain:"studocu.com"},{baseDomain:"technozerrifi.com"},{baseDomain:"xn--pixrponse-e4a.com"},{baseDomain:"ystor.org"},{baseDomain:"chatgpt.com"},{baseDomain:"copilot.microsoft.com"},{baseDomain:"gemini.google.com"},{baseDomain:"you.com"},{baseDomain:"huggingface.co"},{hostname:"mail.google.com"},{hostname:"messagerie.orange.fr"},{hostname:"webmail.free.fr"},{baseDomain:"discord.com"},{baseDomain:"instagram.com"},{hostname:"messenger.com"},{baseDomain:"whatsapp.com"},{baseDomain:"web.telegram.org"},{baseDomain:"snapchat.com"},{baseDomain:"chatbotgpt.fr"},{baseDomain:"chatbotgpt.fr"},{baseDomain:"openai.com"}];let te;function $e(t){try{const e=new URL(t);return te.some(r=>r(e))}catch{return!1}}async function Pe({storage:t,onChange:e}){te=(await t.getItem("local:forbiddenUrls")??Ne).map(s=>Ae(s)),t.watch("local:forbiddenUrls",s=>{s&&(te=s.map(u=>Ae(u)),e==null||e())})}function Ae(t){if("baseDomain"in t){const e=new RegExp(`^(.*\\.)?${t.baseDomain.replace(/\./g,"\\.")}`);return r=>e.test(r.hostname)}if("hostname"in t)return e=>e.hostname===t.hostname;throw new TypeError("unknown forbidden URL type")}async function Fe(){return ee.getItem("local:activated")}function Le(t){return ee.watch("local:activated",t)}const Oe=['[data-testid="webResult"]'].join(", ");let se;const Ve={matches:["https://*.qwant.com/*","https://*.qwantjunior.com/*"],main(){Re("qwant.content"),se=Ce(ne),(async()=>{await Pe({storage:ee,onChange:()=>{ne(document.body)}}),fe(await Fe())})().catch(t=>{re.error("Erreur d’initialisation",t)}),Le(fe)}};function fe(t){t?(ne(document.body),se.observeChildren(document.body)):se.disconnect()}function ne(t){Array.from(t.querySelectorAll("a")).filter(r=>$e(r.href)).forEach(r=>{re.info(`Floutage d’un élément contenant un lien vers ${r.href}`),qe(r,Oe)})}const je={BASE_URL:"/",BROWSER:"firefox",CHROME:!1,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"qwant",FIREFOX:!0,MANIFEST_VERSION:2,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true",VITE_REVISION:"3a23e6465af3ad22426cfa4c7e04907477a45c36"},H=class H extends Event{constructor(e,r){super(H.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}};le(H,"EVENT_NAME",he("wxt:locationchange"));let ae=H;function he(t){var r;const e=typeof je>"u"?"build":"qwant";return`${(r=N==null?void 0:N.runtime)==null?void 0:r.id}:${e}:${t}`}function Ue(t){let e,r;return{run(){e==null&&(r=new URL(location.href),e=t.setInterval(()=>{let s=new URL(location.href);s.href!==r.href&&(window.dispatchEvent(new ae(s,r)),r=s)},1e3))}}}const V=class V{constructor(e,r){W(this,P);W(this,Z,window.self===window.top);W(this,L);W(this,Q,Ue(this));this.contentScriptName=e,this.options=r,we(this,L,new AbortController),K(this,Z)?(J(this,P,me).call(this,{ignoreFirstEvent:!0}),J(this,P,xe).call(this)):J(this,P,me).call(this)}get signal(){return K(this,L).signal}abort(e){return K(this,L).abort(e)}get isInvalid(){return N.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const s=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(e,r){const s=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(e){const r=requestAnimationFrame((...s)=>{this.isValid&&e(...s)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const s=requestIdleCallback((...u)=>{this.signal.aborted||e(...u)},r);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(e,r,s,u){var m;r==="wxt:locationchange"&&this.isValid&&K(this,Q).run(),(m=e.addEventListener)==null||m.call(e,r.startsWith("wxt:")?he(r):r,s,{...u,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),z.debug(`Content script "${this.contentScriptName}" context invalidated`)}};Z=new WeakMap,L=new WeakMap,Q=new WeakMap,P=new WeakSet,xe=function(){window.postMessage({type:V.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},me=function(e){let r=!0;const s=u=>{var m,b;if(((m=u.data)==null?void 0:m.type)===V.SCRIPT_STARTED_MESSAGE_TYPE&&((b=u.data)==null?void 0:b.contentScriptName)===this.contentScriptName){const E=r;if(r=!1,E&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))},le(V,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started");let ie=V;function Ye(){}function Y(t,...e){}const Ke={debug:(...t)=>Y(console.debug,...t),log:(...t)=>Y(console.log,...t),warn:(...t)=>Y(console.warn,...t),error:(...t)=>Y(console.error,...t)};return(async()=>{try{const{main:t,...e}=Ve,r=new ie("qwant",e);return await t(r)}catch(t){throw Ke.error('The content script "qwant" crashed on startup!',t),t}})()}();
qwant;
