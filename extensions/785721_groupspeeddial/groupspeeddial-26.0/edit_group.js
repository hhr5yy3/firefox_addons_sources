"use strict";(globalThis.webpackChunkgroup_speed_dial=globalThis.webpackChunkgroup_speed_dial||[]).push([[711],{4487:(e,t,i)=>{var o,a;i.d(t,{b:()=>a,z:()=>o}),(e=>{e[e.metric=1]="metric",e[e.imperial=2]="imperial",e[e.standard=0]="standard"})(o||(o={})),(e=>{e[e.default=0]="default"})(a||(a={}))},1879:(e,t,i)=>{i.d(t,{e:()=>k});var o=i(4323),a=i(5076),n=i(8794),s=(i(6062),i(5048)),r=i(1962),l=i(2846),c=i(6382),d=i(2221),u=i(910),p=i(9574),h=i(7865),g=i(6419),m=i(9998),_=i(744),w=i(6777),f=i(4559),y=i(8698),v=i(2924),b=i(6037),E=i(3778);const A=(0,p.m)((e=>e.REMEMBER_GROUP_RUNTIME?new u.F("lastGroup",o.s6,{storageArea:"session"}):new u.F("lastGroup",o.s6,{storageArea:"local"}))),k=new class extends c.c{_id=-1;get id(){return this._id}set id(e){this._id=l.M.groupById(e)?.id,(0,v.J)(this._id)}initPromiseResolver=(0,o.NU)();promise=this.initPromiseResolver.promise;di;activateFromEventWithDelay=this.createDelayedActivationEventHandler(600);constructor(){super()}async initialize(e){this.di=e;const t=window.location.hash;await l.M.promise,l.M.isEmpty()&&await _.b,this.id=this.extractHashGroupId(t),t||(d.lw.REMEMBER_GROUP?(0,a.J)(await A(d.lw).get().catch(o.s6),(e=>this.id=e)):(0,a.J)(await n.ne.get(),(e=>this.id=e))),window.addEventListener("hashchange",(e=>this.onHashChange(e)),!1),window.addEventListener("change_active_group",(e=>this.activate(e.detail))),await h.W;const i=(0,f.O1)();if(d.lw.SCROLL_GROUPS&&(i.onwheel=(0,f.uT)().onwheel=async e=>{if(e.buttons!==w.w.RIGHT&&e.composedPath().find((e=>e instanceof HTMLElement&&["dials-container","groups"].includes(e.id)))){const t=d.lw.SCROLL_GROUPS_REVERSE?-1:1,i=((e.deltaY||e.deltaX||e.deltaZ)>0?1:-1)*t,o=k.getCurrentGroup(),a=await o.getNeighbouringGroup(i>0?"next":"prev",d.lw.SCROLL_GROUPS_CIRCLE?"loop":"stay");a&&k.activate(a.id)}}),d.lw.ACTIVATE_GROUP_HOVER){const e=(0,y.U)(d.lw.ACTIVATE_GROUP_HOVER_DELAY);i.addEventListener("mouseover",(t=>(0,a.J)((0,s.rm)(t),(t=>e((()=>this.activate(t))))))),i.addEventListener("mouseleave",(()=>e.cancel()))}super.notifyChange(this.id),this.initPromiseResolver.resolve()}async updateActiveGroupAndRedraw(e){this.id=e,d.lw.REMEMBER_GROUP&&A(d.lw).set(e),await this.di.redrawDials(),(0,b.R)(e),super.notifyChange(e)}async onHashChange(e){const t=this.extractHashGroupId(e.newURL);t!==this.id&&await this.updateActiveGroupAndRedraw(t)}async activate(e,t=!1){await this.promise;l.M.GROUPS.find((t=>t.id===e))&&(e!==this.id||t)&&(window.location.hash=(0,s._V)(e),await this.updateActiveGroupAndRedraw(e),(0,f.O1)().dispatchEvent(new CustomEvent("change",{detail:e})))}activateFromEvent(e){0===e.button&&(0,a.J)((0,s.rm)(e),(e=>this.activate(e)))}createDelayedActivationEventHandler(e){let t,i=null,o=!1,n=Date.now();return(r,l)=>{0===r.button&&(0,a.J)(l??(0,s.rm)(r),(a=>{const s=Date.now();i!==a||s-n>e?(o=!1,i=a,clearTimeout(t),t=self.setTimeout((()=>o=!0),e)):o&&this.activate(a),n=s}))}}getCurrentGroup(){return l.M.groupById(this.id)}dialById(e){const t=this.getCurrentGroup(),i=t.dials,o=(0,s.om)(e);if(t.topSites)return new g.O(o,t.id,{name:"",url:(0,r.$H)(e).href});const a=i[o];return a}extractHashGroupId(e){e=e||"";const t=(0,s.m4)(e);let i=l.M.groupById(t);return!m.Jk&&i.topSites&&(i=l.M.GROUPS.find((e=>!e.topSites))||i),d.lw.GROUP_ICON_IN_TITLE&&(0,E.i)(i.iconId||0),i.id}}},5022:(e,t,i)=>{i.d(t,{$:()=>a});var o=i(4823);const a=new class{_isActive=o.Y.has("add_pages");_addImageActive=o.Y.has("add_image");promise=this.init();isActive(){return this._isActive}setActive(e){this._isActive=e,Promise.all([i.e(274),i.e(181)]).then(i.bind(i,9681)),document.documentElement.classList.toggle("add_current_mode",e),e||o.Y.clearParamsWithoutReload()}isImageActive(){return this._addImageActive}setImageActive(e){this._addImageActive=e,i.e(741).then(i.bind(i,2992))}async init(){switch(!0){case this.isImageActive():return this.setImageActive(!0);case this.isActive():return this.setActive(!0)}}}},5294:(e,t,i)=>{i.d(t,{O:()=>b,J:()=>v});var o=i(179),a=i(6683),n=i(1962),s=i(9598),r=i(8847),l=i(6004),c=i(2221),d=i(4662),u=i(235),p=i(9180),h=i(4323);const g=self.caches?.open("background_image").catch(h.s6);var m=i(5574),_=i(6202),w=i(865),f=i(9439);let y=d.I.get();async function v(e){if(f.vt)document.documentElement.style.background=document.body.style.background="transparent";else switch(e.BACKGROUND){case a.cG.COLOR:document.body.setAttribute("style",`background: ${e.BACKGROUND_COLOR||"#005B9CFF"}`);break;case a.cG.GRADIENT:document.body.setAttribute("style",e.GRADIENT_CACHE||"");break;case a.cG.URL:t(e.BACKGROUND_URL,!0);break;case a.cG.FILE:t(e.BACKGROUND_DATA,!1);break;case a.cG.BING:y.then((e=>t(e?.current,!1)));break;case a.cG.PAGE:await(0,_.w)(await w.d6);const i="iframe_as_background",o=(0,n.$H)(i)||(0,s.z)("iframe",{src:e.BACKGROUND_PAGE_URL,sandbox:(0,r.jM)(e.BACKGROUND_PAGE_URL),style:"width: 100%; height: 100%; position: absolute; z-index: auto; visibility: hidden;",handlers:{onload:()=>{(0,l.Xm)(o)}}});o.remove(),document.body.insertAdjacentElement("afterbegin",o);break;default:document.body.removeAttribute("style")}async function t(e,t){e&&(t&&(e=await b(e)),document.body.setAttribute("style",`background: url("${e}") no-repeat center center fixed; background-size: cover;`))}}async function b(e){if(!e.startsWith("http"))return e;try{const t=await g;if(!t)return e;let i=await t.match(e);if(i?.ok||(i=await fetch(e,{signal:(0,u.n)((0,p.n)(30))}),t.put(e,i.clone())),await o.YG&&1===(0,m.R)(100)&&async function(){const e=await g;if(e)Promise.all(Array.from(await e.keys()).map((t=>e.delete(t))))}(),i.ok)return URL.createObjectURL(await i.blob())}catch(e){}return e}c.j_.then((e=>{e.BACKGROUND===a.cG.BING&&(v(e),d.I.addOnChangeListener((e=>{e.newValue&&(y=Promise.resolve(e.newValue)),v(c.lw)})))}))},8198:(e,t,i)=>{i.d(t,{B:()=>K});var o=i(5048),a=i(4323),n=i(6799);var s=i(6004),r=i(4590),l=i(7302),c=i(7813),d=i(8303),u=i(9574),p=i(1962),h=i(9598),g=i(6690),m=i(555),_=i(7865),w=i(8698),f=i(3672),y=i(1181),v=i(6830),b=i(2100),E=i(5451),A=i(1879),k=i(6278),C=i(6898),D=i(1470),I=i(1361);class L{node;index;rect;scrollX;scrollY;isLast;constructor(e,t,i,o,a,n){this.node=e,this.index=t,this.rect=i,this.scrollX=o,this.scrollY=a,this.isLast=n}moveToNeighbor(e,t){const i=e[this.index+(t?1:-1)];i&&this.moveTo(i)}moveTo(e){this.node.style.setProperty("transform",`translate(${e.rect.x-this.rect.x}px, ${e.rect.y-this.rect.y}px)`)}static resetAll(e){e.forEach((e=>e.node.style.removeProperty("transform")))}}class T{coolDownPeriodMS;callback;lastCall;_isCool;get isCool(){return this._isCool}constructor(e,t){this.coolDownPeriodMS=e,this.callback=t,this.lastCall=0,this._isCool=!0}execute(e){if(this.checkNow())return this.callback(e)}checkNow(){const e=Date.now();return this._isCool=e-this.lastCall>this.coolDownPeriodMS,!!this._isCool&&(this.lastCall=e,!0)}}var O=i(2846),N=i(5717),x=i(4559),R=i(3074);const S=new I.G;var G=i(6801),U=i(7700),P=i(3457),$=i(6683),M=i(1410);async function B(e){e.preventDefault();const t=(0,o.oR)(e),i=e.dataTransfer;if(!i||!t||M.a5.isDropLocked(i))return;const a=(0,E.l)(e);if(a)await O.M.action("swapDials",{srcGroupId:a.group.id,destGroupId:A.e.id,srcDialIndex:a.dial.index,destDialIndex:(0,o.om)(t),operation:e.shiftKey?"cut":e.ctrlKey?"copy":"swap",gridPlacement:e});else{const e=i.getData("text/uri-list");if(e)return z(t,e);const o=i.getData("text/x-moz-url");if(o){const[e,i]=o.split("\n");return z(t,e,i)}const a=i.files[0];if(a?.type.startsWith("image/")){const e=A.e.dialById(t);if(e?.url)return await(0,G._z)({type:"save_db_image",notify:!0,groupId:A.e.id,url:e.url,img:await(0,U.G)(a)}),e.thumbnail=Object.assign(e.thumbnail||{},{type:$.O8.FILE,value:a.name,background:e.thumbnail?.background,position:$.X.CENTER}),e.visual={...e.visual,padding:P.rM.get()},void await O.M.action("replaceDial",{groupId:A.e.id,dial:e})}if(a&&a.size<10240){const e=await(0,U.T)(a,"readAsText"),i=(0,f.u)(e,"URL=","\n");if(i)return z(t,i)}}}function z(e,t,i){return(0,n.t1)({id:e,dragAndDropUrl:t,dragAndDropTitle:i})}var W=i(2221),H=i(6481),F=i(6664);const q=e=>e.target.closest("a[id]"),K=(()=>{const e=()=>document.documentElement.classList.add("drag_and_drop"),t=()=>document.documentElement.classList.remove("drag_and_drop");let i,I,G,U=!1;return _.W.then((function(){const e=(0,x.O1)(),t=(0,w.U)(800,V);e.ondragenter=()=>{Y(),t.cancel()},e.ondragleave=e=>{t()}})),{onGroupMouseDown:function(r){const l=q(r);if(0!==r.button||!l)return;const c=(0,o.rm)(r)??(0,a.qb)("group not found");I=c,U=!0,i=void 0;const d=O.M.groupById(c);r.preventDefault();const{left:p,top:h}=l.getBoundingClientRect(),m=r.pageX-p,_=r.pageY-h;let w;const f=(0,u.m)((()=>{Y(),e(),w=function(){const e=l.cloneNode(!0);return e.removeAttribute("id"),(0,s.LF)(l,e),Object.assign(e.style,{top:(0,g.px)(h),left:(0,g.px)(p),position:"absolute",pointerEvents:"none"}),e}(),document.body.appendChild(w),w.style.zIndex="1",l.style.opacity="0.5"}));document.addEventListener("mouseup",(e=>{if(!U)return;const t=q(e);if(!t||t.isSameNode(l))return v();const i=(0,o.rm)(e),s=(0,o.oR)(e);s?(0,n.t1)({id:s,dragAndDropUrl:(0,o._V)(c),isGroupDrop:!0,dragAndDropTitle:d.name}):(0,a.qS)(i)&&P(e,c),v()}),{capture:!0,once:!0});const y=function(e,t){const i=Date.now();let o=!1;return(...a)=>{if(o||Date.now()-i>t)return o=!0,e(...a)}}((function(e){f();const t=e.pageX-m,i=e.pageY-_;w.style.left=(0,g.px)(t),w.style.top=(0,g.px)(i)}),200);function v(){U=!1,document.removeEventListener("mousemove",y),t(),l.style.removeProperty("opacity"),w&&w.remove(),j()}document.addEventListener("mousemove",y),document.addEventListener("keydown",(e=>{"Escape"===e.key&&v()}),{once:!0})},onGroupAllowDrop:e=>e.preventDefault(),onDragGroupEnd:j,onGroupDrop:P,isGroupDrag:()=>U,onDialAllowDrop:e=>e.preventDefault(),onDragDialStart:async function(t){const a=t.dataTransfer;if(!a)return;if(I=A.e.id,M.a5.isLocked||(0,M.t3)(I)&&!M.a5.isTempEnabled)return M.a5.lockDrop(a);a.dropEffect="move";const n=(0,o.oR)(t),s=A.e.dialById(n);i=n;const l=O.M.groupById(I);if(l.topSites)return void t.preventDefault();a.setData("text/uri-list",s.url||""),a.setData("text/plain",`${n}#${A.e.id}`),b._C.register($),$(),e(),l.grid?G.startDrag(t):l.hasDynamicLayout()&&function(e){e.dataTransfer.setDragImage(new Image,0,0);let t,i=!1;S.addListener((0,x.O1)(),"change",(e=>i=!0));const o=(0,x.B)();o.classList.remove("stopped_moving"),S.addListener(o,"drop",(e=>{i||(0,y.jo)(e)}),{capture:!0,once:!0}),S.addListener(document.documentElement,"dragend",(async e=>{if(S.clearAll(),"none"===e.dataTransfer?.dropEffect)return(0,R.$8)();if(!i&&t){const e=A.e.getCurrentGroup(),i=N.M6.dialsToClusters(e.dials),[o]=i.splice(l,1);if(o){i.splice(t.index,0,o);const n=e.dials=N.M6.clustersToDials(i);a.forEach((e=>e.node.style.setProperty("pointer-events","none"))),await O.M.action("updateGroup",{groupId:e.id,update:{dials:n}},(0,r.tr)("save_dial_moved",`${e.name} / ${o.dial?.name}`))}}}),{capture:!0,once:!0});const a=Array.from(document.querySelectorAll("#dials > a")).map(((e,t,i)=>new L(e,t,(0,k.Nf)(e),o.scrollLeft,o.scrollTop,t===i.length-1))),n=e.target.closest("#dials > a"),s=a.find((e=>e.node===n)),l=a.indexOf(s);{const e=new T(40,(e=>{if(i||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return i=!0,L.resetAll(a),void o.classList.add("stopped_moving");const n=o.scrollLeft,r=o.scrollTop;if(t=a.find((t=>(0,C.U)((0,D.FP)(t.rect,{x:n-t.scrollX,left:n-t.scrollX,right:n-t.scrollX,y:r-t.scrollY,top:r-t.scrollY,bottom:r-t.scrollY,width:0,height:0}),{left:e.x,top:e.y,right:e.x,bottom:e.y}))),!t||t.isLast)return;const c=t.index<l,d=a.slice(...c?[t.index,l]:[l+1,t.index+1]);L.resetAll(a),d.forEach((e=>e.moveToNeighbor(a,c))),s.moveTo(t)}));S.addListener((0,x.uT)(),"dragover",(t=>e.execute(t)))}}(t)},onDragDialEnd:j,onDialDrop:B,setupGridDragAndDrop:e=>G=e,onContainerDragOver:function(e){e.preventDefault();const t=A.e.getCurrentGroup(),i=t.getLastEmptyDial();if(t.grid&&G&&i){let o=!1;if(e.target===e.currentTarget||e.target.closest(".is_empty_dial")){G.placeItem(i,e)&&(o=!0)}const a=I!==t.id;F.J.showEmptyDial(o&&a)}}};async function P(e,t){e.preventDefault();const i=(0,o.U0)((0,o.nE)(e.composedPath()));if(e instanceof DragEvent){const t=(0,E.l)(e);t&&await(0,H.s)(t.dial.index,t.group.id,i)}else(0,a.Et)(t)&&(0,a.Et)(i)&&t!==i&&O.M.action("moveGroup",{groupId:t,targetGroupId:i})}function $(e=A.e.getCurrentGroup()){z();const t=e.dials.filter((e=>e.isNotEmptyDial()&&(e.domId!==i||I!==A.e.id)));t.forEach((e=>{(0,p.$H)(e.domId).querySelector(`.${m.AU.container}`).insertAdjacentElement("afterbegin",(0,h.z)("img",{class:"dial_float_label drag_drop_advanced",src:(0,l.Z)("svg/multi (1).svg"),handlers:{...(0,c.lU)("transform: scale(1.2, 1.2);",c.O$.DRAG),ondrop:async e=>{(0,y.jo)(e),(0,d.E)(e),(0,d.O)(e);const{AdvancedDropMenu:t}=await(0,v.V)();await t.show(e)}},textContent:(0,r.tr)("drag_group_hover_open")}))})),t.filter((e=>e.isGroupDial())).forEach((e=>{const t=(0,p.$H)(e.domId).querySelector(`.${m.AU.container}`),i=(0,h.z)("img",{class:"dial_float_label drag_group_hover",handlers:{...(0,c.lU)("transform: scale(1.2, 1.2);",c.O$.DRAG),ondragover:t=>{const i=(e=>e.isGroupDial()?parseInt((0,f.u)(e.url,"#","",!0)):void 0)(e);U||A.e.activateFromEventWithDelay(t,i)}},title:(0,r.tr)("drag_group_hover_open"),src:(0,l.Z)("svg/inside.svg")});t.insertAdjacentElement("afterbegin",i)}))}function z(){(0,x.uT)().querySelectorAll(".drag_group_hover,.drag_drop_advanced").forEach(p.bf)}function K(e){document.querySelectorAll("#groups > a:not([href]), #groups > a.topSites").forEach((t=>{e?t.removeAttribute("style"):t.setAttribute("style","pointer-events: none")}))}function Y(){if(K(!1),!W.lw.DISABLE_AUTO_SHOW_GROUPS){const e=(0,x.O1)().style;e.height="auto",e.zIndex="1",e.backgroundColor=W.lw.TEMPLATE_COLOR||"black"}}function j(){F.J.showEmptyDial(!1),K(!0),b._C.unregister($),z(),t(),V()}function V(){if(!W.lw.DISABLE_AUTO_SHOW_GROUPS){const e=(0,x.O1)().style;e.removeProperty("height"),e.removeProperty("z-index"),e.backgroundColor=""}}})()},5451:(e,t,i)=>{i.d(t,{l:()=>s});var o=i(5048),a=i(4323),n=i(2846);function s(e){const[t,i]=e.dataTransfer?.getData("text/plain").split("#")||[],s=parseInt(i);if((0,o.Mo)(t)&&(0,a.Et)(s)){const e=n.M.groupById(s);return{dial:e.dials[(0,o.om)(t)],group:e}}}},6119:(e,t,i)=>{i.d(t,{L:()=>h,c:()=>g});var o=i(6795),a=i(6690),n=i(2016),s=i(179),r=i(9439),l=i(2221),c=i(4559),d=i(6664),u=i(1410),p=i(6683);function h({id:e,dials:t,rows:i,cols:h,ratio:g,dynamic:m,list:_,grid:w,options:f},y=(0,c.uT)()){const v=w&&new d.J(w,e,y);v&&(i=v.rows,h=v.cols);const b=(0,r.i7)(f),E=l.lw.DIAL_BORDER_TYPE===p.NO.solid?1:0,A=!!g||!!w?.position;{const e=y.parentElement,t=e.classList;t.toggle("list",!!_),t.toggle("fixed",A),t.toggle("dynamic",!(!m&&!_)),t.toggle("grid",!!w);const o=e.style,n=e=>Math.floor(1e4/e)/100;o.setProperty("--dial-width",`${n(h)}%`),o.setProperty("--dial-height",`${n(i)}%`),o.setProperty("--group-cols",`${h}`),o.setProperty("--group-rows",`${i}`);const s=b-E;o.setProperty("--dial-padding",(0,a.px)(s)),o.setProperty("--small-dials-gap",(0,a.px)(2*s*l.lw.SPLIT_DIAL_GAP/100))}const k=y.style;["grid-template-columns","grid-template-rows","grid-auto-rows","width","height","max-width","max-height","margin","columns"].forEach((e=>k.removeProperty(e)));const[C,D,I]=g||[1,1,!1],L=I||w?.position===o.Cr.scroll;L&&(k.setProperty("margin","0"),k.setProperty("max-height","none"));const T=h*C,O=i*D;if((g||w?.position)&&(k.setProperty("height",100*O/T+"vw"),L||k.setProperty("max-width",100*T/O+"vh")),m){const[e,t]=[m.width,m.height].map((e=>(n.O&&!r.vt?e/2:e)+2*E));k.setProperty("grid-template-columns",`repeat(auto-fill, ${e}px)`),k.setProperty("grid-template-rows","initial"),k.setProperty("grid-auto-rows",`${t}px`),k.setProperty("max-width",(e+2*b)*h+2*b+"px")}else _?k.setProperty("columns",`${h} ${_.width}px`):w&&(0,u.oV)(e);if(!m&&(0,s.ik)()){const e=window.innerHeight>window.innerWidth,{height:t,width:i}=y.getBoundingClientRect(),o=(0,c.O1)().getBoundingClientRect().bottom,a=Array.from(y.children).slice(0,m||_||w?-1:void 0),n=()=>a.map((e=>e.getBoundingClientRect())),s=n().reduce(((e,{width:t})=>e+t),0)/(a.length||1),r=l.lw.ANDROID_MIN_DIAL_SIZE/s;r>1&&(["max-width","width"].forEach((t=>k.setProperty(t,i*(A||e?r:Math.max(1,r/2))+"px"))),["max-height","height"].forEach((i=>k.setProperty(i,t*(A?r:e?Math.max(1,r/2):r)+"px"))),n().some((({y:e})=>e<o))&&k.setProperty("margin-top","0"))}}function g(e,t,i){i&&e.classList.forEach((t=>t.startsWith("thumbnail_position_")&&e.classList.remove(t))),e.classList.add(`thumbnail_position_${t.position}`),t.background&&(e.style.background=t.background)}},1641:(e,t,i)=>{i.d(t,{Wx:()=>Fe,Pz:()=>Me,NW:()=>$e});var o=i(1879),a=i(9510),n=i(4323),s=i(6683),r=i(6799),l=i(4590),c=i(1285),d=i(2100),u=i(8198),p=i(8794),h=i(9114),g=i(8671),m=i(7302),_=i(2346),w=i(7080),f=i(1471),y=i(8408),v=i(6672),b=i(2542),E=i(364),A=i(7253),k=i(4424),C=i(1484),D=i(3331),I=i(6810),L=i(6202),T=i(865),O=i(1962),N=i(9598),x=i(1181);function R(e,t){if(!e)return;const i=t.split(".");if(1===i.length)return e[t];for(let t=0;t<i.length;++t){if(!e)return;e=e[i[t]]}return e}var S=i(6004),G=i(2466),U=i(555),P=i(6777),$=i(6258),M=i(3694),B=i(6119),z=i(5048);function W(e){const t=(0,z.C9)(e.composedPath());if(t){const i=(0,z.om)(t);if("Enter"===e.key)return(0,r.t1)({id:t});const a=o.e.getCurrentGroup(),n=a.dials.length,s=function(e,t,i,o){switch(e.key){case"ArrowRight":++t===o&&(t=0);break;case"ArrowLeft":--t<0&&(t=o-1);break;case"ArrowDown":(t+=i)>=o&&(t=++t%i)===o&&(t=0);break;case"ArrowUp":t?t-=i:t=o-1,t<0&&(t+=o-1)}return t}(e,i,a.cols,n);(0,O.$H)((0,z.k6)(s)).focus()}}var H=i(5022);var F=i(2221),q=i(3074),K=i(5076),Y=i(9439);const j=new Set,V=e=>!!e&&j.has((0,z.Ty)(e));function X(){Y.vt||((0,O.if)(document.getElementsByClassName(U.AU.is_online)),j.forEach((e=>{const t=$e.get(e);if(t){(t.getElementsByClassName(U.AU.head).item(0)||t).appendChild((0,N.z)("div",{class:U.AU.is_online}))}})))}F.j_.then(Q),browser.webNavigation.onCompleted.addListener((({url:e,frameId:t})=>0===t&&e.startsWith("http")&&Z())),browser.tabs.onRemoved.addListener((()=>(0,n.BK)(100).then(Z)));let J=0;async function Z(){if(J++>100)throw"infinite loop?";await Q(),X()}async function Q(){if(F.lw.ACTIVE_PAGE_DETECTION){const e=(await browser.tabs.query({})).filter((e=>!e.hidden));j.clear(),e.forEach((e=>e.url&&j.add((0,z.Ty)(e.url))))}}var ee=i(4069);async function te(e){const t="auxclick"===e.type&&e.button===P.w.MIDDLE,i="click"===e.type,a=e.target,l=a.closest(z.l8),c=a.closest(".dials-container");if("mousedown"===e.type)return void(e.button===P.w.MIDDLE&&!1===l?.classList.contains(U.oq.is_empty_dial)&&e.preventDefault());if(!c||!l)return;const d=l.classList;if(d.contains(U.oq.is_empty_dial))return void(i&&(d.contains(U.oq.is_plus)?(0,r.t1)({id:l.id}):F.lw.DISABLE_QUICK_EDIT&&!ee.m0||(d.add(U.oq.is_plus),l.addEventListener("mouseleave",(async()=>d.remove(U.oq.is_plus)),{once:!0}))));const u=[];let p=!1;const h=o.e.dialById(l.id);if(!h)return;const g=h.settings||{},m=g.OPEN_IN_CONTAINER||o.e.getCurrentGroup().container||"",_=g.OPEN_DIAL_IN;if(H.$.isActive());else if(h.isSingleLinkDial())u.push(h.url);else if(h.isMultiDial()){const e=a.closest(".list_item_a");if(e)switch(h.multi.linkAction){case s.Q0.openLink:u.push(e.href);break;case s.Q0.openAll:p=!0,u.push(...h.multi.links.map((e=>e.url)))}else switch(h.multi.titleAction){case s.C2.openAll:u.push(...h.multi.links.map((e=>e.url))),p=!0;case s.C2.nothing:}}else if(h.isTopSitesDial())(0,K.J)(a.closest(".list_item_a"),(e=>u.push(e.href)));else if(h.isSessionDial()){if(t||i){if(!t)return(0,x.jo)(e),void await(0,K.J)(a.closest("li[data-session-id]")?.dataset.sessionId,(async e=>{await h.restoreSession(e).catch(n.lQ),(0,q.jE)()}));(0,K.J)(a.closest(".list_item_a"),(e=>u.push(e.href)))}}else d.contains(U.oq.is_search_dial);F.lw.ACTIVE_PAGE_DETECTION&&1===u.length&&V(u[0])&&i?((0,x.jo)(e),async function(e){try{const t=(0,z.Ty)(e),i=(await browser.tabs.query({})).find((e=>(0,z.Ty)(e.url)===t));await Promise.all([browser.windows.update(i.windowId,{focused:!0}),browser.tabs.update(i.id,{active:!0})]),await browser.tabs.remove(T.aU)}catch(t){browser.tabs.update({url:e})}}(u[0])):(t||i)&&u.length&&(m||p||[s.TI.NEW_TAB,s.TI.NEW_FOCUSED_TAB,s.TI.NEW_WINDOW,s.TI.NEW_PRIVATE_WINDOW].includes(_)||F.lw.OPEN_ALWAYS_NEW_WINDOW||F.lw.OPEN_ALWAYS_NEW_TAB&&(!h.isGroupDial()||F.lw.OPEN_ALWAYS_INCLUDE_GROUP_DIALS))&&((0,x.jo)(e),(0,$.y)({links:u,containerName:m,active:!t&&(_===s.TI.NEW_FOCUSED_TAB||F.lw.OPEN_ALWAYS_FOCUSED),inNewTab:t||F.lw.OPEN_ALWAYS_NEW_TAB||_===s.TI.NEW_FOCUSED_TAB||_===s.TI.NEW_TAB,nextToCurrent:!!F.lw.OPEN_ALWAYS_NEXT_TO_CURRENT,stopOpenerTabId:F.lw.OPEN_ALWAYS_STOP_OPENER_ID,inNewWindow:F.lw.OPEN_ALWAYS_NEW_WINDOW||_===s.TI.NEW_WINDOW,inIncognitoWindow:_===s.TI.NEW_PRIVATE_WINDOW}))}var ie=i(8303),oe=i(8847),ae=i(2846),ne=i(5524),se=i(8641),re=i(6317),le=i(4252),ce=i(7283),de=i(6690),ue=i(6684),pe=i(8032),he=i(489),ge=i(2806),me=i(9574),_e=i(1650),we=i(519),fe=i(8168);function ye(e="",t=""){return[t,e]=[t,e].map((e=>(0,fe.WL)(e.toLowerCase()))),e.includes(t)}var ve=i(4487),be=i(5628);class Ee{weather;constructor(e){this.weather=e}buildWeatherControls(e,{backgroundColor:t,textColor:i}){const o=this,a=e[this.getWeatherUUID()],s=[function(e){if(!e||!o.weather.current)return;const{minTemp:t,maxTemp:i}=o.extractMinMaxTemp(e.forecast,1e3*e.current.dt,{min:e.current.main.temp_min,max:e.current.main.temp_max});return u(!1,e?.current,{minTemp:t,maxTemp:i})}(a),...Array.from({length:this.weather.forecastDays},((e,t)=>function(e,t){if(!e?.forecast)return;const i=new Date;i.setDate(i.getDate()+t+1);const a=e.forecast.list.filter((e=>new Date(1e3*e.dt).getDate()===i.getDate())),n=a.find((e=>new Date(1e3*e.dt).getHours()>=12))||a.at(-1);if(!n)return;return u(!0,n,o.extractMinMaxTemp(e.forecast,1e3*n.dt))}(a,t)))].filter(n.zz),r=(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${t};`},s);{const e=()=>{r.scrollWidth>r.clientWidth&&(r.classList.add("small_layout"),window.removeEventListener("resize",e))};window.addEventListener("resize",e),d.RT.then(e)}return r;function c(e){const t=new Date(1e3*e);return`${(0,fe.CF)(t.getHours())}:${(0,fe.CF)(t.getMinutes())}`}function u(e,t,{minTemp:a,maxTemp:n}){return(0,N.z)("li",{class:"flex multi_dial_item",title:`\n${e?o.getWeekDayName(1e3*t.dt):`\n${(0,l.tr)("w_update_date")}:\t${c(t.dt)}\n${(0,l.tr)("w_current_temp")}:\t${o.printTemp(t.main.temp)}\n`}\n${(0,l.tr)("w_max_temp")}:\t${o.printTemp(n)}\n${(0,l.tr)("w_min_temp")}:\t${o.printTemp(a)}\n\n${(0,l.tr)("w_clouds")}:\t${t.clouds.all}%\n${(0,l.tr)("w_wind_speed")}:\t${o.printSpeed(t.wind.speed)}\n\n${(0,l.tr)("w_humidity")}:\t${t.main.humidity}%\n${(0,l.tr)("w_pressure")}:\t${t.main.pressure} hPa\n\n${e?"":`\n${(0,l.tr)("w_sunrise")}:\t${c(t.sys.sunrise)}\n${(0,l.tr)("w_sunset")}:\t${c(t.sys.sunset)}\n`.trim()}\n`.trim(),style:`color: ${i};`},[(0,N.z)("div",{class:"w_basic"+(e?" w_forecast":"")},[(0,N.z)("div",{class:"w_day",textContent:`${e?o.getShortWeekDayName(1e3*t.dt):""}`}),(0,N.z)("div",{class:"w_icon"},[(0,N.z)(be.C.tagName,{class:"w_clouds_progress",progress:t.clouds.all,dark:(0,le.g)(),stroke:"2",strokeDark:"#777",strokeLight:"#aaa",strokeBackgroundDark:"#7774",strokeBackgroundLight:"#aaa4",diameter:2.7*parseFloat(getComputedStyle(document.documentElement).fontSize),style:""}),(0,N.z)("img",{class:"w_weather_icon",src:`/icons/weather/${t.weather[0].icon}@2x.png`})]),(0,N.z)("div",{class:"w_temp",textContent:o.printTemp(t.main.temp)}),(0,N.z)("div",{class:"w_detail w_temp_max"},[(0,N.z)("img",{class:"w_s_icon",src:"/icons/weather/max.svg"}),(0,N.u)("span",o.printTemp(n))]),(0,N.z)("div",{class:"w_detail w_temp_min"},[(0,N.z)("img",{class:"w_s_icon",src:"/icons/weather/min.svg"}),(0,N.u)("span",o.printTemp(a))]),(0,N.z)("div",{class:"w_detail w_wind"},[(0,N.z)("img",{class:"w_s_icon",src:"/icons/weather/wind.svg"}),(0,N.u)("span",o.printSpeed(t.wind.speed).slice(0,-4)),(0,N.z)("img",{class:"w_s_icon w_ms",src:o.weather.units===ve.z.imperial?"/icons/weather/mh.svg":"/icons/weather/ms.svg"})]),(0,N.z)("div",{class:"w_detail w_clouds"},[(0,N.z)("img",{class:"w_s_icon",src:"/icons/weather/cloud.svg"}),(0,N.u)("span",`${t.clouds.all}%`)])])])}}extractMinMaxTemp(e,t,i){const o=new Date(t),a=new Date(o.getFullYear(),o.getMonth(),o.getDate()+1,0,0,0,0).getTime(),n=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0).getTime(),s=e.list.filter((e=>1e3*e.dt>=n&&1e3*e.dt<a));return{minTemp:Math.min(...i?[i.min]:[],...s.map((e=>e.main.temp_min))),maxTemp:Math.max(...i?[i.max]:[],...s.map((e=>e.main.temp_max)))}}getShortWeekDayName(e){return new Date(e).toLocaleString(browser.i18n.getUILanguage(),{weekday:"short"}).slice(0,3)}getWeekDayName(e){return new Date(e).toLocaleString(browser.i18n.getUILanguage(),{weekday:"long"})}printTemp(e){return`${Math.round(e)}${this.getUnits()}`}printSpeed(e){return`${e.toFixed(1)} ${this.getSpeedUnits()}`}getUnits(){switch(this.weather.units){case ve.z.imperial:return"°F";case ve.z.standard:return"K";default:return"°C"}}getSpeedUnits(){return this.weather.units===ve.z.imperial?"m/h":"m/s"}getWeatherUUID(){return`${this.weather.units}_${this.weather.lat}_${this.weather.lon}`}}var Ae=i(2780),ke=i(6830),Ce=i(2036),De=i(3210),Ie=i(2541),Le=i(4559),Te=i(1481),Oe=i(6664),Ne=i(539);const xe="#F7F7F7",Re="#333333",Se=new Ae.v("one_by_last_one"),Ge=()=>Fe(ze);window.addEventListener("__drawDials",(e=>Fe(e.detail))),window.addEventListener("__redrawDials",Me),window.addEventListener("__redrawLastDials",Ge);const Ue=(0,me.m)((()=>browser.sessions?.onChanged.addListener((()=>{o.e.getCurrentGroup().dials.find((e=>e.isSessionDial()))&&Ge()})))),Pe=(0,N.z)("div",{class:"empty_grid_help",textContent:`${(0,l.tr)("label_right_click")} / ${(0,l.tr)("cm_create_dial")}`}),$e=new Map;function Me(){return Se.addWork(Be)}async function Be(){await o.e.promise;const e=p.ci.get(),t=o.e.getCurrentGroup();if(!await t.onBeforeOpen())return await(0,c.N)(ae.M.GROUPS),void await Fe(t,{imagesHash:{}});F.lw.GROUP_NAME_AS_TITLE&&Ie.s.set(t.name+""),(0,re.s)(t),await(0,a.$)(t.id).then((async i=>{await(0,c.N)(ae.M.GROUPS),await Fe(t,{imagesHash:i,weatherData:await e})}),(async e=>{(0,ne.vV)("getImages failed",e),(0,se.H)().then((t=>t.ErrorHandler.showCriticalErrorMessage("Error getting thumbnails:","get_images_failed",`${(0,n.Gv)(e)&&[R(e,"target.error.name"),R(e,"target.error.message")]}`))),await(0,c.N)(ae.M.GROUPS),await Fe(o.e.getCurrentGroup(),{noImages:!0})})),(0,d.GZ)()}let ze,We={},He={};async function Fe(e,{weatherData:t=We,imagesHash:i=He,noImages:o=!1,overrideImagesHash:a={}}={}){He=i,We=t,ze=e;const c=Object.entries(a);if(c.length){i={...i};for(const[t,o]of c){const a=i[t]||{url:t,group:e.id,version:0};i[t]=Object.assign({},a,o)}}const R=(0,K.J)(document.activeElement instanceof HTMLInputElement&&document.activeElement||null,(e=>({value:e.value,selectionStart:e.selectionStart,selectionEnd:e.selectionEnd,placeholder:e.placeholder,dialId:e.closest(".dial")?.id})));De.lc&&((e=e.clone()).list={width:360,direction:s.PX.row},e.dynamic=void 0,e.ratio=void 0,e.rows=4);const P=e.id,$=(0,M.Sy)(),H=(0,le.g)()?Re:xe,q=F.lw.DIAL_HEADER_STYLE===s.xk.transparent,j=!!e.list,V=!!e.topSites,J=e.hasDynamicLayout(),Z=!!e.grid,Q=e.colColor,ne=e.rowColor,se=ae.M.METADATA.getUserTags(),re=[Promise.resolve()],me=F.lw.DIAL_NUMBERS?(0,D.d)(P):0,fe=(e.rows,e.cols),[ve,be]=await Promise.all([e.getDialsToDraw(),(0,Ce.FJ)(),T.d6]);$e.clear();const Ae=[],Ie=e=>{Ae.push(e)},Se=ve.length;let Me,Be=0,Fe=0;const Ke=document.createDocumentFragment();for(let a=0;a<Se;a++){const c=ve[a],d=a===Se-1,D=c.size||0,I=c.url||"",R=i[I]||{},P=c.type===s.kh.URL,W=c.type===s.kh.GROUP,X=c.thumbnail||p.fX,te=X.background||H,ae=c.settings||{},Ae=c.visual||{},Ce=ae.OPEN_IN_CONTAINER||"",De=Ce||e.container||"",Le=R.iconBlobURL||R.icon,Oe=X.type===s.O8.URL?X.value:X.type===s.O8.BLANK?O.RO:R.imgBlobURL||R.img,Pe=!1,ze=document.createElement("a");ze.tabIndex=0,ze.id=c.domId,ze.className="dial",Z&&ze.style.setProperty("grid-area",c.gridAreaName),P&&(ze.classList.add(U.oq.is_url_dial),I&&$e.set((0,z.Ty)(I),ze));let We=null;if(D===s.ZU.NORMAL||j||Z?We=Ke.appendChild(ze):(Be?Be--:(Be=(0,C.Q)(D)-1,Me=document.createElement("a"),Me.className=`dial dials small_dials small_ds_${D}`,We=Ke.appendChild(Me)),Me.appendChild(ze)),We){const e=Fe++;if(!J&&!Z){const t=e=>{We.classList.add("with_color");const t=We.style;t.position="relative",t.backgroundColor=e};Q&&(0,K.J)(Q[(0,k.W)(e,fe)],t),ne&&(0,K.J)(ne[(0,k.q)(e,fe)],t)}}const He=document.createElement("div");He.className=U.AU.container;const Ye=document.createElement("div");Ye.className=U.AU.head;const je=document.createElement("div");if(je.className=U.AU.body,He.appendChild(Ye),He.appendChild(je),ze.appendChild(He),(j?He:q?je:He).classList.add(U.oq.border_target),Ae.titleBackground&&(Ye.style.background=Ae.titleBackground),Ae.titleColor?Ye.style.color=Ae.titleColor:Ae.titleBackground&&(Ye.style.color=(0,E.U)({hexColor:Ae.titleBackground},{white:xe,black:Re})),c.isEmptyDial())ze.classList.add(U.oq.is_empty_dial),J&&d&&ze.classList.add(U.oq.is_plus);else{if(ze.draggable=!V,I?ze.href=I:ze.removeAttribute("href"),(F.lw.ON_HOVER_SHOW_URL||c.note||Ae.noTitle)&&(ze.title=[Ae.noTitle&&c.name,(F.lw.ON_HOVER_SHOW_URL||Ae.noTitle)&&c.url,c.note].filter(n.zz).join("\n")),c.distraction&&ze.classList.add("distraction"),Ae.noTitle&&!j)ze.classList.add("no_dial_title");else{if(Ye.title=c.name,!Ae.noIcon){const e=document.createElement("img");e.src=O.RO,c instanceof he.z&&c.styleIcon(e,V?c.thumbnail?.value:Le),e.className=U.AU.icon,Ye.appendChild(e)}const e=document.createElement("span");if(Ye.appendChild(e),e.textContent=c.name||"",c.name||(e.style.margin="0"),e.className=U.AU.name,Ce&&(0,A.U6)(e,Ce),ae.TAG_ID){const e=se.find((e=>e.id===ae.TAG_ID));if(e){const t=document.createElement("img");t.className=U.AU.tag,t.title=e.name,t.src=O.RO,t.setAttribute("style",e.getIconStyle()),Ye.appendChild(t)}}if(F.lw.DIAL_NUMBERS){const e=document.createElement("i");e.className=U.AU.dialNumber,e.textContent=`#${me+a+1}`,Ye.appendChild(e)}}if(c.type===s.kh.LIVE&&be&&!Y.vt){ze.classList.add(U.oq.is_live_dial);const{hideScrollbars:t,noInteraction:i}=c.live||{};(0,L.w)(T.aU);const o=(0,N.z)("iframe",{draggable:!1,src:I,name:`live_dial_${a}`,handlers:{onclick:e=>e.stopPropagation()}});c.settings?.NO_SCRIPT&&o.setAttribute("sandbox",""),t&&o.addEventListener("load",(()=>(0,G.K)(T.aU,W,{frameName:o.name}))),je.appendChild(o),je.style.setProperty("display","block"),je.style.setProperty("overflow","hidden");const n=t=>{if(t&&!o.isConnected)return window.removeEventListener("resize",n);const{width:a,height:s}=(0,_.L)(e,c,(0,Ne.c)(),window.innerWidth,window.innerHeight,1);j&&je.style.setProperty("height",(0,de.px)(s));const r=c.crop||(0,oe.fd)(F.lw,a,s),l=r.scale*a/(1e6*window.devicePixelRatio);o.setAttribute("style",`\n${(0,oe.v0)(r,a/window.devicePixelRatio)}\nmin-width: ${100/l}%;\nmin-height: ${100/l}%;\n${i?"pointer-events: none;":""}`)};n(),window.addEventListener("resize",n)}else if(c.type===s.kh.TEXT&&c.text){ze.classList.add(U.oq.is_text_dial);const e=(0,E.U)({hexColor:te}),t=document.createElement("textarea");t.className=U.AU.textDial,t.value=c.text.value,t.readOnly=!0,t.style.backgroundColor=te,t.style.color=e,c.text.CLICK_TO_CLIPBOARD&&(ze.onclick=e=>{(0,g.l)(c.text.value);const t=(0,N.z)("span",{class:"dial_float_label text_dial_copied",textContent:(0,l.tr)("label_copied")});je.appendChild(t),(0,S.mj)(t,{animate:!0,time:800,removeAfter:!0})}),je.ondblclick=()=>(0,r.t1)({id:c.domId}),je.appendChild(t)}else if(c.type===s.kh.SEARCH){ze.classList.add(U.oq.is_search_dial,U.oq.has_list);const e=(0,E.U)({hexColor:te},{white:xe,black:Re}),t=(c.providers||[]).slice(...be?[]:[0,2]),o=[];let a="";const s=e=>{a=e.value,o.forEach((({input:t,arrow:i,getSearchURL:o})=>{const a=t===e,n=!t.value;i.style.removeProperty("display"),i.firstElementChild.style.opacity=a||!n?"0.7":"0.2",(a||n)&&(i.href=o(e))}))},r=(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${te};`,handlers:{onclick:x.dG,onauxclick:x.dG}},t.map((e=>(0,b.Z)(e)?e:Object.assign({name:(0,l.tr)(`s_${e.type.toLowerCase()}`)},w.c3[e.type]))).map((t=>{const r=(e=u)=>{const i=e.value||a;return t.url.replace(/%s/g,t.raw?i:window.encodeURIComponent(i))},c=(0,v.bZ)(t.url);let d,u;Promise.resolve().then((()=>o.push({input:u,arrow:d,getSearchURL:r})));const p=t.icon||i[t.url]?.iconBlobURL||i[t.url]?.icon;return(0,N.z)("li",{class:"flex"},[qe(De,c,ae.OPEN_DIAL_IN,(0,N.z)("a",{href:c,tabindex:-1},[(0,N.z)("img",{class:"list_item_icon",src:p||O.RO,style:p?"":(0,ce.H)(we.mv)})])),u=(0,N.z)("input",{style:`color: ${e}`,tabindex:0,placeholder:t.name,draggable:!1,handlers:{oncontextmenu:x.dG,onmouseenter:()=>ze.draggable=!1,onmouseleave:()=>ze.draggable=!0,ondragstart:(0,x.do)(n.lQ),onkeydown:(0,f.MO)({stopPropagation:!0,onEnter:e=>(0,y.K)(r(),{inNewTab:e.ctrlKey,active:!e.ctrlKey,nextToCurrent:!0,cookieStoreId:(0,A.Jz)(De)})}),oninput:()=>s(u)}}),d=qe(De,r,ae.OPEN_DIAL_IN,(0,N.z)("a",{href:c,tabindex:-1,style:"display: none",title:(0,l.tr)("search_provider_tip")},[(0,N.z)("img",{src:(0,m.Z)("svg/right(1).svg"),style:"opacity: 0.5",class:"open_search_icon "+(e===xe?"invert":"")})]))])})));ze.onclick=e=>{e.composedPath().every((e=>e!==r))&&(0,S.iT)("input",r,(e=>e.focus()))},je.appendChild(r)}else if(c.type===s.kh.MULTI&&c.multi&&c instanceof ge.U){ze.classList.add(U.oq.is_multi_dial,U.oq.has_list);const e=(0,E.U)({hexColor:te},{white:xe,black:Re}),t=c.getLinksAsDials(),o=(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${te};`},t.map(((t,o)=>{const a=i[t.url]||{},n=a.iconBlobURL||a.icon;let s;const r=(0,N.z)("li",{"data-index":o,class:"flex multi_dial_item",title:`${t.name}\n${t.url}`},[s=(0,N.z)("a",{href:t.url,class:"list_item_a flex-space-between"+(ee.m0?"":"_10"),tabindex:-1},[t.styleIcon((0,N.z)("img",{class:"list_item_icon",src:O.RO}),n),(0,N.z)("span",{class:"list_item_name",textContent:t.name,style:`color: ${e}`})])]);return $e.set((0,z.Ty)(t.url),s),r})));je.appendChild(o)}else if(c.type===s.kh.TOP_SITES){browser.topSites||(ze.onclick=()=>pe.O.askForPermission().then(Ge)),ze.classList.add(U.oq.is_top_sites_dial,U.oq.has_list);const e=(0,E.U)({hexColor:te},{white:xe,black:Re});re.push((async()=>{const t=await c.getTopSites(),i=(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${te};`},t.map(((t,i)=>(0,N.z)("li",{"data-index":i,class:"flex multi_dial_item",title:`${t.name}\n${t.url}`},[(0,N.z)("a",{href:t.url,class:"list_item_a flex-space-between"+(ee.m0?"":"_10"),tabindex:-1},[(0,N.z)("img",{class:"list_item_icon",src:t.icon||we.rH}),(0,N.z)("span",{class:"list_item_name",textContent:t.name,style:`color: ${e}`})])]))));je.appendChild(i)})())}else if(c.type===s.kh.SESSION){_e.v&&Ue(),browser.sessions||(ze.onclick=()=>ue.F.askForPermission().then(Ge)),Ye.addEventListener("click",(e=>{const t=Ye.getElementsByClassName(U.AU.name).item(0);t.textContent="";const i=()=>je.querySelectorAll("li").forEach((e=>{const t=[e.textContent,e.querySelector("a")?.href].find((e=>e&&ye(e,o.value)));return e.classList.toggle("hidden",!t)})),o=(0,N.z)("input",{type:"text",placeholder:(0,l.tr)("search_search"),style:"color: var(--text-white-theme); background: transparent; border: none; width: 100%",handlers:{onkeydown:x.dG,oncontextmenu:x.dG,onkeyup:(0,f.MO)({onEsc(){o.value="",i()},onKey:i})}});t.appendChild(o),o.focus()}),{once:!0}),ze.classList.add(U.oq.is_session_dial,U.oq.has_list);const e=(0,E.U)({hexColor:te},{white:xe,black:Re});re.push((async()=>{const t=await c.getRecentlyClosed(),i=(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${te};`},t.map(((t,i)=>{const{tab:o,window:a,lastModified:n}=t,s=t=>{const o=t.favIconUrl?.startsWith("chrome://mozapps/skin/extensions/")?"icons/tags/tag (25).svg":t.favIconUrl?.startsWith("chrome://devtools/skin/images/")?"/svg/speed (2).svg":t.favIconUrl;return(0,N.z)("li",{"data-index":i,class:"flex multi_dial_item",title:`${t.title}\n${t.url}\n\n${(0,M.Ib)(n)}`,"data-session-id":t.sessionId},[(0,N.z)("a",{href:t.url,class:"list_item_a flex-space-between"+(ee.m0?"":"_10"),tabindex:-1},[(0,N.z)("img",{class:"list_item_icon",src:o||O.RO,style:o?"":(0,ce.H)((0,Te.f)(t.url||""))}),(0,N.z)("span",{class:"list_item_name",textContent:t.title,style:`color: ${e}`})])])};return o?s(o):a?.tabs?.length?(0,N.z)("li",{class:"list_item_container","data-session-id":a.sessionId,title:(0,M.Ib)(n)},[(0,N.z)("div",{class:"list_item_container_name flex flex-space-between"},[(0,N.z)("img",{src:O.RO,height:15,width:15,style:(0,ce.H)("svg/window.svg")}),(0,N.u)("span",(0,l.tr)("recently_closed_window"))]),(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${te};`},a.tabs.map(s))]):void 0})).filter(n.zz));je.appendChild(i)})())}else if(c.isTimerDial()){ze.classList.add(U.oq.is_timer_dial,U.oq.has_list);{const e=c.getTimerControls();re.push((async()=>{const t=await Promise.all(e.map((e=>e.buildDOM(Ie)))),i=(0,N.z)("ul",{class:U.Ki.dial_list_container,style:`background: ${te};`},t);je.appendChild(i)})())}}else if(c.isWeatherDial()){ze.classList.add(U.oq.is_weather_dial,U.oq.has_list);const e=X.background||((0,le.g)()?"#222222":"#FFFFFF"),i=(0,E.U)({hexColor:e},{white:xe,black:Re});try{const o=new Ee(c.weather).buildWeatherControls(t,{textColor:i,backgroundColor:e});je.appendChild(o)}catch(e){}}else if(Oe||Pe){const e=document.createElement("img");if(e.className=U.AU.thumbnail,e.draggable=!1,e.src=Oe||Le||O.RO,Ae.padding&&e.style.setProperty("padding",(0,de.KN)(Ae.padding)),(0,B.c)(e,Pe?Object.assign({},X,{position:s.X.CENTER}):X,!1),!F.lw.NO_DIAL_REFLECTION&&X.position===s.X.FULL_WIDTH&&!Pe){const t=e.cloneNode(!1);e.classList.add("reflection"),je.appendChild(t),Ae.padding&&(e.style.paddingBottom=t.style.paddingBottom="0")}je.appendChild(e)}else h.N?o||je.appendChild((0,N.z)("img",{src:O.RO})):o||$-(c.created||0)<5&&X.type===s.O8.AUTO_GENERATED||je.appendChild((0,N.z)("p",{class:`${U.AU.reloadButtons} flex-column flex-column-space-between`},[(0,N.z)("button",{class:"btn btn-default create-thumbnail-btn flex flex-space-between",title:(0,l.tr)("label_create_thumbnail"),handlers:{onclick:(0,x.do)((e=>{(0,ie.E)(e),(0,ke.V)().then((({ReloadMenu:t})=>{t.isVisible()?t.close():(0,n.BK)(0).then((()=>t.show(e)))}))}))}},[(0,N.z)("img",{src:O.RO,style:(0,ce.H)("svg/image (2).svg"),width:20,height:20}),(0,N.u)("span",(0,l.tr)("label_create_thumbnail"))])]));W&&ze.classList.add(U.oq.is_group),ze.ondragstart=u.B.onDragDialStart,ze.ondragend=u.B.onDragDialEnd}ze.ondrop=u.B.onDialDrop,ze.ondragover=u.B.onDialAllowDrop}const Ye=(0,Le.uT)();Ye.onclick=te,Ye.onauxclick=te,Ye.onmousedown=te,Ye.ondragover=u.B.onContainerDragOver,await Promise.allSettled(re),Ye.replaceChildren(Ke),Z&&1===ve.length?document.body.appendChild(Pe):Pe.isConnected&&Pe.remove(),e.grid&&u.B.setupGridDragAndDrop(new Oe.J(e.grid,P,Ye)),X(),R?.dialId&&(0,K.J)(document.querySelector(`#${R.dialId} input[placeholder="${R.placeholder}"]`),(e=>{e.focus(),e.value=R.value,e.setSelectionRange(R.selectionStart,R.selectionEnd)})),(0,B.L)(e,Ye),Ye.onkeydown=W,d._C.notifyAll(e),(0,I.O)(e),Ae.forEach(n.g7)}function qe(e,t,i,o){return e&&t&&(o.onclick=o=>{o.preventDefault(),(0,$.y)({links:(0,n.Tn)(t)?t():t,containerName:e,active:i===s.TI.NEW_FOCUSED_TAB||F.lw.OPEN_ALWAYS_FOCUSED,inNewTab:i===s.TI.NEW_FOCUSED_TAB||i===s.TI.NEW_TAB})},o.onauxclick=i=>{i.button===P.w.MIDDLE&&(i.preventDefault(),(0,$.y)({links:(0,n.Tn)(t)?t():t,containerName:e,inNewTab:!0}))}),o}},555:(e,t,i)=>{i.d(t,{AU:()=>o,Ki:()=>n,oq:()=>a});const o=Object.freeze({container:"dial_container",head:"dial_head",body:"dial_body",icon:"dial_icon",name:"dial_name",thumbnail:"dial_thumbnail",textDial:"text_dial",dialNumber:"dial_number",tag:"dial_tag",reloadButtons:"dial_reload",is_online:"is_online"}),a=Object.freeze({is_empty_dial:"is_empty_dial",is_live_dial:"is_live_dial",is_url_dial:"is_url_dial",is_text_dial:"is_text_dial",has_list:"has_list",border_target:"border_target",is_search_dial:"is_search_dial",is_multi_dial:"is_multi_dial",is_session_dial:"is_session_dial",is_top_sites_dial:"is_top_sites_dial",is_timer_dial:"is_timer_dial",is_weather_dial:"is_weather_dial",is_group:"is_group",is_plus:"is_plus"}),n=Object.freeze({dial_list_container:"dial_list_container",dial_list_item:"multi_dial_item"})},6317:(e,t,i)=>{i.d(t,{s:()=>s});var o=i(6683),a=i(9510),n=i(5294);function s(e){const t=e.background&&!e.background.onlyName?e.background:{type:o.sf.COLOR,value:""},i=document.getElementsByClassName("color_background").item(0).style;if(t)switch(t.type){case o.sf.GRADIENT:case o.sf.COLOR:i.background=t.value;break;case o.sf.URL:s(t.value,!0);break;case o.sf.FILE:(0,a.Q)(e.id,e.createBackgroundFileURL()).then((e=>s(e?.imgBlobURL,!1)))}async function s(e,t){e&&(t&&(e=await(0,n.O)(e)),i.background=`url(${e}) center center / cover no-repeat padding-box border-box`)}}},1285:(e,t,i)=>{i.d(t,{N:()=>I});var o=i(1879),a=i(4590),n=i(2497),s=i(8198),r=i(2009),l=i(7302),c=i(1962),d=i(9598),u=i(8289),p=i(5048),h=i(2221),g=i(9998),m=i(6795),_=i(8032),w=i(3074),f=i(6683),y=i(364),v=i(4323),b=i(4252),E=i(7253),A=i(3210),k=i(6830),C=i(4559);const D=e=>new Set(e.flatMap((e=>e.dials.map((e=>e.url)).filter(u.Z).map((e=>parseInt(e.substring(1)))))));async function I(e){const t=document.createDocumentFragment(),i=!!h.lw.ROOT_GROUPS_ONLY&&D(e);if(r.mX){const e=(0,d.z)("a",{class:"groups_prefix_box"},[(0,d.z)("img",{src:(0,l.Z)("utils/svg/arrow-circle-left.svg")}),(0,d.u)("span",`${(0,a.tr)("archive")}:`)]);e.onclick=r.ZQ,e.title=(0,a.tr)("archive_close_title"),t.appendChild(e)}if(A.lc){const e=(0,d.z)("a",{id:"shared_groups_menu_btn",class:"groups_prefix_box"},[(0,d.z)("img",{src:(0,l.Z)("svg/menu(2).svg")}),(0,d.u)("span",`${(0,a.tr)("shared_groups")}:`)]);e.onclick=()=>(0,k.V)().then((e=>e.SharedGroupsMenu.toggle())),t.appendChild(e)}for(let a=0;a<e.length;a++){const n=e[a];if(i&&i.has(n.id)||!g.Jk&&n.topSites||r.mX!==!!n.archived)continue;const l=document.createElement("a");let u=n.color;if(n.background?.type===f.sf.COLOR&&n.background.value&&!u&&(u=(0,y.U)({hexColor:n.background.value},{})),(0,v.Kg)(u)&&(l.style.color=u),n.background)switch(n.background.type){case f.sf.GRADIENT:case f.sf.COLOR:l.style.background=n.background.value}n.distraction&&l.classList.add("distraction"),n.topSites&&(l.classList.add("group_icon","topSites"),browser.topSites||l.addEventListener("click",(()=>_.O.askForPermission().then(w.jE)),{once:!0}));const A=!n.lock||await n.isUnlocked();if(n.lock)if(l.classList.add("group_icon","lockedGroup"),A)l.classList.add("unlocked");else if(n.lock.visibility===m.Gj.HIDDEN)continue;if(n.iconId){const e=n.styleIcon(void 0,u||((0,b.g)()?"#ffffff":"#000000"));e.src=c.RO,e.draggable=!1,l.appendChild(e)}l.tabIndex=0,l.id=(0,p.Tf)(n.id),l.draggable=!1,l.href=(0,p._V)(n.id);const k=document.createElement("div");k.className="group_name",k.textContent=n.name,k.draggable=!1,n.container&&((0,E.U6)(k,n.container),l.classList.add("ff_c")),l.appendChild(k),h.lw.SHOW_DIALS_COUNT&&A&&l.appendChild((0,d.z)("div",{textContent:`(${n.dials.filter((e=>e.isNotEmptyDial())).length})`,class:"dials_count"})),l.onclick=e=>o.e.activateFromEvent(e),l.ondragover=e=>{o.e.activateFromEventWithDelay(e),s.B.onGroupAllowDrop(e)},l.ondragend=s.B.onDragGroupEnd,l.ondrop=s.B.onGroupDrop,t.appendChild(l)}if(!h.lw.HIDE_ADD_GROUP){const e=document.createElement("a");e.onclick=()=>(0,n.addNewGroup)({archived:r.mX,sourceGroup:o.e.getCurrentGroup()}),e.textContent="+",e.title=(0,a.tr)("cm_create_new_group"),t.appendChild(e)}const u=(0,C.O1)();u.replaceChildren(t),u.onmousedown=s.B.onGroupMouseDown;const I=(0,c.$H)("group_"+o.e.id);I&&(I.classList.add("selected"),I.scrollIntoView())}},3457:(e,t,i)=>{i.d(t,{Cw:()=>s,rM:()=>l,xe:()=>r});var o=i(910),a=i(4323),n=i(2447);const s=new o.F("last_dial_title_color",a.s6,{storageArea:"localStorage",localStorageTextOnly:!0}),r=new o.F("last_dial_title_background",a.s6,{storageArea:"localStorage",localStorageTextOnly:!0}),l=new n.e("last_dial_padding",(()=>8))},2497:(e,t,i)=>{i.r(t),i.d(t,{addNewGroup:()=>D,cloneGroup:()=>I,editGroupRowColColor:()=>T,removeGroup:()=>L});var o=i(1879),a=i(4590),n=i(5296),s=i(6808),r=i(4323),l=i(6004),c=i(51),d=i(1471),u=i(7302),p=i(984),h=i(303),g=i(6278),m=i(1962),_=i(9598);const w=()=>{const e=(0,c.y)((0,u.Z)("utils/css/color_picker.css")),t=[];return window.addEventListener("click",o),{promise:e,create:function(e,n,s="",c=r.lQ,u=r.lQ,p=r.lQ){let m=s;const w=e=>c(f=e);m=m||"";let f="";const y=(0,l.Zl)(e);return function(){v(m),y.onclick=e=>{o(),e.stopPropagation(),t.push((()=>w(y.style.backgroundColor=m)));const i=b(e.pageX,e.pageY);document.body.insertAdjacentElement("afterbegin",i),(0,g.$x)(i),t.push(p),u(m)}}(),{id:y.id,node:y,getHoverColor:()=>f,set:v,get:()=>m,getColor:()=>m};function v(e){m=e||s||"",setTimeout((()=>w(e)),1),y.style.backgroundColor=e,E(e)}function b(e,t){const a=(0,_.z)("div",{class:"color_picker_body",style:`top:${t}px;left:${e}px`},[i()]),n=a.querySelector("#color_rgb_preview"),s=a.querySelector("#color_rgb_input"),l=(c=y,((self.getComputedStyle(c).backgroundColor||"").match(/[0-9]+/g)||["0","0","0","0"]).slice(0,3).map((e=>parseInt(e).toString(16).padStart(2,"0"))).join(""));var c;n.style.background="#"+l,s.value=l;a.querySelector(".custom_rgb").onclick=e=>e.stopPropagation(),s.onkeydown=(0,d.ak)(r.lQ,o),s.oninput=e=>{const t=e.target;t.value=t.value.trim().replace("#","").slice(0,6),m=n.style.background="#"+t.value,w(m)};const u=e=>(0,h.H)(e.style.backgroundColor);return a.addEventListener("mouseover",(e=>w(u(e.target)))),n.onclick=a.onclick=e=>{m=u(e.target),E(m),e.stopPropagation(),o()},a}function E(e){y.className="color_picker "+("#00000000"===e?"color_picker_transparent":e?"":"color_picker_remove_color"),y.title=`${n}: ${e||(0,a.tr)("color_no_color")}`}},hide:o};function i(){const e=e=>(0,_.z)("div",{style:`background-color: ${e}`}),t=[(0,_.z)("div",{class:"color_picker_remove_color",title:(0,a.tr)("color_remove_color")}),(0,_.z)("div",{class:"color_picker_transparent",style:"background-color: #00000000",title:(0,a.tr)("color_transparent")})].concat(["#ffff00","#ffa500","#00ff00","#ff0000","#00ffff","#d3d3d3","#0000ff","#808080","#ff00ff","#000000","#ffffff"].map(e)).concat((0,_.z)("div",{class:"color_separator"}));for(let i=1;i<8;i++){const o=8-i;for(let i=0;i<12;i++){const a=(0,p.S)(Math.round(30*i),100,Math.round(12.5*o));t.push(e(a))}t.push(e((0,p.S)(0,0,Math.ceil(12.5*o)))),t.push(document.createElement("br"))}return t.push((0,l.Y6)(["div",{class:"custom_rgb"},[["label",{for:"color_rgb_input",textContent:(0,a.tr)("color_rgb")+": #"}],["input",{id:"color_rgb_input",type:"text",name:"color_custom_rgb",maxlength:"7"}],["div",{id:"color_rgb_preview"}]]])),(0,l.nl)(t)}function o(){document.querySelectorAll(".color_picker_body").forEach(m.bf),(0,r.XB)(t)}};var f=i(4424),y=i(1374);var v=i(1470),b=i(1641),E=i(2846),A=i(5717),k=i(7743),C=i(1305);async function D({position:e,archived:t,sourceGroup:i}){const o=(0,s.v3)(E.M.getNewGroupId(),{archived:t,sourceGroup:i});await E.M.action("addGroup",{position:e,newGroup:o}),await(0,k.c)(o.id,{isNewGroup:!0})}async function I(e){const t=e.getPosition()+1,i=(0,s.v3)(E.M.getNewGroupId(),{sourceGroup:e,archived:e.archived});i.dials=e.dials.map((e=>e.clone())),await E.M.action("addGroup",{position:t,newGroup:i}),await C.i.withDB((async t=>{const o=await t.getThumbnails(e.id);for(const e of Object.values(o))await t.updateDial(i.id,e.url,(t=>Object.assign(t,e,{group:i.id})))})),await(0,k.c)(i.id,{isNewGroup:!0})}function L(e){async function t(){const t=e.id;await E.M.action("deleteGroup",{groupId:t});const i=await E.M.getVisibleGroups();o.e.id===t&&o.e.activate(i.find((e=>e.id!==t))?.id||0)}e.dials.some((e=>e.isNotEmptyDial()))?n.p.show((0,a.tr)("group_delete_title",e.name),(0,a.tr)("group_delete_body"),{yesText:(0,a.tr)("group_delete_yes"),noText:(0,a.tr)("group_delete_no"),onYes:t}):t()}async function T(e,t,i){const a=w();await a.promise;const n=e.target,s=(0,_.z)("div",{style:"display: none"});n.appendChild(s);const l=(await o.e.getCurrentGroup()).clone(),c=A.M6.dialsToClusters(l.dials),d=("col"===i?f.W:f.q)((0,y.SL)(c,(e=>e.dial?.domId===t.domId||!!e.dials?.find((e=>e.domId===t.domId)))),l.cols);async function u(e,t,o){switch(i){case"row":o.rowColor=(0,v.KQ)(o.rowColor||{},t,e);break;case"col":o.colColor=(0,v.KQ)(o.colColor||{},t,e)}return(0,b.Wx)(o),o}await new Promise((t=>{const c=l["row"===i?"rowColor":"colColor"]?.[d]||"",p=a.create(s,"color",c,(e=>u(e,d,l)),r.lQ,(async function(){const e=await o.e.getCurrentGroup(),{rowColor:i,colColor:a}=await u(p.getColor(),d,e);await E.M.action("updateGroup",{groupId:e.id,update:{rowColor:i,colColor:a}}),t()}));p.node.onclick(e),function(e,{parentContainer:t=document.body,subtree:i=!0}={}){return new Promise((o=>{new MutationObserver(((t,i)=>{t.find((e=>"childList"===e.type&&e.removedNodes.length))&&(e.isConnected||(i.disconnect(),o()))})).observe(t,{childList:!0,subtree:i})}))}(n,{parentContainer:document.documentElement}).then(a.hide)}))}},3331:(e,t,i)=>{i.d(t,{d:()=>n});var o=i(2846),a=i(2221);function n(e){if(a.lw.DIAL_ONLY_CURRENT_GROUP)return 0;for(let t=0,i=0;t<o.M.GROUPS.length;t++){const a=o.M.GROUPS[t];if(a.id===e)return i;i+=a.dials.length}return 0}},8847:(e,t,i)=>{i.d(t,{Ny:()=>o,fd:()=>n,jM:()=>s,v0:()=>a});const o=1e3;function a({scale:e,vrX:t,vrY:i,posX:a,posY:n},s){const r=s/o;return`\nleft: ${a*r}px;\ntop: ${n*r}px;\nwidth: ${t}px;\nheight: ${i}px;\ntransform: scale(${e*s/1e6});`}function n(e,t,i){const o=e.VR_DEFAULT_WIDTH||1280;return{scale:Math.ceil(1e6/o),vrX:o,vrY:Math.round(o*i/t),posX:0,posY:0}}function s(e=""){return!e||["facebook.com","paypal.com","google.com","vk.com"].some((t=>e.includes(t)))?"":"allow-scripts allow-same-origin"}},6830:(e,t,i)=>{i.d(t,{V:()=>o});const o=()=>Promise.all([i.e(550),i.e(72)]).then(i.bind(i,3311))},6810:(e,t,i)=>{i.d(t,{O:()=>d,g:()=>u});var o=i(6801),a=i(1879),n=i(4323),s=i(4214),r=i(3700),l=i(9439);const c=new r.j;async function d(e){if(l.vt)return;const t=await(0,o._z)({type:"reload_get_running_for_group",groupId:a.e.id}).catch(n.s6)||[],i=(0,s.W)(t,"url"),r=c.get(e.id);e.dials.forEach(((e,t)=>{const o=e.url||"",a=i[o],n=a?.isVisibleSpin&&!e.isLiveDial();n&&r.delete(o),e.setSpinner(n||r.has(o))}))}function u(e){l.vt||(c.add(e.groupId,e.url),(0,n.BK)(1e3).then((()=>{c.remove(e.groupId,e.url),e.groupId===a.e.id&&d(a.e.getCurrentGroup())})),e.setSpinner())}},4252:(e,t,i)=>{i.d(t,{g:()=>n});var o=i(3943),a=i(2221);const n=()=>a.lw.TEMPLATE_COLOR!==o.z.light},6037:(e,t,i)=>{i.d(t,{R:()=>s});var o=i(8794),a=i(5941),n=i(4069);async function s(e){if(n.m0)return;const t=(await o.SR.get()).filter((([t])=>t===e));t.length&&(await o.SR.update((t=>t.filter((([t])=>t!==e)))),await(await(0,a.w)()).parentReload(e,t.map((([,e])=>e))))}},8154:(e,t,i)=>{i.d(t,{K:()=>r});var o=i(4323),a=i(5772),n=i(6801),s=i(9676);async function r(){const e=(await browser.windows.getAll({populate:!0,windowTypes:["normal"]})).flatMap((e=>e.tabs.filter((e=>!e.discarded&&e.url.startsWith("http"))).slice(-2))),t=(await Promise.all(e.map((e=>{return t=e.id,(0,s.w)(900,void 0,(async()=>await browser.scripting.executeScript({target:{tabId:t,allFrames:!1},func:()=>({innerWidth:window.innerWidth,innerHeight:window.innerHeight,availWidth:window.screen.availWidth,availHeight:window.screen.availHeight,outerWidth:window.outerWidth,outerHeight:window.outerHeight,pixelRatio:window.devicePixelRatio})}).then((([e])=>e.result)).catch(o.s6)));var t})))).filter(o.zz).sort((0,a.s)(1,!1)),{availWidth:i,availHeight:r}=t[0]||{};return i&&r?{width:i,height:r}:await(0,n._z)({type:"getScreenInfo"}).then((e=>({width:e?.availWidth||1920,height:e?.availHeight||1080})))}},2346:(e,t,i)=>{i.d(t,{I:()=>w,L:()=>f});var o=i(6795),a=i(8154),n=i(6801),s=i(6683),r=i(1484),l=i(6062),c=i(2221),d=i(8794),u=i(4069),p=i(5904),h=i(8289),g=i(9439);const m=180,_=76;async function w(e,t,i,o,r){r||={devicePixelRatio:await d.T6.get()};const[p,w]=c.lw.AR_SCREEN_RESOLUTION===s.d0.CUSTOM?[c.lw.AR_SCREEN_WIDTH||1280,c.lw.AR_SCREEN_HEIGHT||720]:await async function(){const e=l.Dy?await(0,a.K)():await(0,n._z)({type:"findBiggestScreenSize"}).catch((()=>({width:window.screen.availWidth,height:window.screen.availHeight}))),{width:t,height:i}=e||{width:1920,height:1080},o=t/i,s=g.vt||c.lw.HIDE_TOP_BAR?0:c.lw.GROUPS_HEIGHT,r=i-_-s;return o>2.7?[t,2*r]:[t,r]}(),y=f(e,t,r,p,w,o);let v=t.thumbnail&&t.thumbnail.position!==s.X.FULL_WIDTH||(0,h.Z)(t.url)||!e.isFlexibleLayout()?0:m;return i&&u.m0&&y.height>y.width&&(y.height=y.width,v=0),{...y,extraHeight:y.height+v}}function f(e,t,{devicePixelRatio:i},a,n,l){const d=a/n,u=c.lw.NO_TITLE||t.visual?.noTitle?0:1.5*c.lw.DIAL_FONT_SIZE,h=2*(0,g.i7)(e.options),m=h+u;let _=i*(a/e.cols-h),w=i*(n/e.rows-m);if(e.ratio){const[t,i,o]=e.ratio,a=t/i;t*e.cols/(i*e.rows)>d||o?w=_/a-u-1.5*(t-i):_=w*a}else if(e.grid){const s=new p.x(e.grid.areas),{width:r,height:l}=s.getCoordinates(t.created)||{width:2,height:2};if(_=i*(a*(r/s.width)-h),w=i*(n*(l/s.height)-m),e.grid.position!==o.Cr.fillSpace){s.width/s.height>d||e.grid.position===o.Cr.scroll?w=l*_/r-u:_=r*w/l}}else if(e.dynamic){const{width:t,height:i}=e.dynamic;_=t,w=i-u}else if(e.list)return{width:e.list.width,height:.8*e.list.width};const[f,y]=(0,r.M)(t.size||s.ZU.NORMAL);return{width:_*l/f,height:w*l/y}}},539:(e,t,i)=>{function o(){return{devicePixelRatio:window.devicePixelRatio}}i.d(t,{c:()=>o}),(0,i(2031).g)("non-background")},6202:(e,t,i)=>{i.d(t,{w:()=>a});const o=new Set;async function a(e){if(o.has(e))return;o.add(e);const t=e;await browser.declarativeNetRequest.updateSessionRules({removeRuleIds:[t],addRules:[{id:t,condition:{tabIds:[e],resourceTypes:["sub_frame"]},action:{type:"modifyHeaders",responseHeaders:[{header:"x-frame-options",operation:"remove"},{header:"content-security-policy",operation:"remove"},{header:"permissions-policy",operation:"remove"}],requestHeaders:[{header:"sec-fetch-dest",operation:"remove"}]}}]})}},9439:(e,t,i)=>{i.d(t,{CX:()=>c,i7:()=>u,vt:()=>d});var o=i(7302),a=i(1319),n=i(4069),s=i(2036),r=i(2221),l=i(1792);const c=(0,o.Z)("reload/reload.html"),d=(0,a.G)()&&s.Dg;function u(e){const t=e?.DIAL_PADDING??r.lw.DIAL_PADDING;return d&&n.m0?Math.max(32,5*t):l.b?t/2:t}},2466:(e,t,i)=>{i.d(t,{K:()=>c});var o=i(4323),a=i(3660),n=i(6801),s=i(2462),r=i(9676),l=i(5524);function c(e,t,i={}){return(0,r.w)(2e3,(()=>(0,l.vV)(`hideScrollbars timeout: ${e}, ${t}`)),(()=>async function(e,t,{frameId:i,frameName:r,scaleDown:l}={}){const c=((0,o.Et)(i)?i:r?await(0,a.F)(r,e):void 0)||0;{const t=c?[c]:(await browser.webNavigation.getAllFrames({tabId:e}).catch((()=>[{frameId:0}]))).map((e=>e.frameId));await Promise.all(t.map((t=>browser.scripting.executeScript({injectImmediately:!0,target:{tabId:e,frameIds:[t]},files:[...(0,s.K_)(),"/content_scripts/cs_prepare_shooting.js"]}).catch(o.lQ))))}l&&await(0,n.hC)(e,{type:"cs_scale_down",scaleDown:l},{frameId:i}).catch(o.lQ)}(e,0,i)))}},7080:(e,t,i)=>{i.d(t,{HV:()=>n,Lo:()=>s,c3:()=>r,f$:()=>o});var o,a=i(7302);(e=>{e[e.CUSTOM=0]="CUSTOM",e[e.WEB_SEARCH=1]="WEB_SEARCH",e[e.TRANSLATE=2]="TRANSLATE",e[e.VIDEO=3]="VIDEO",e[e.SOCIAL_MEDIA=4]="SOCIAL_MEDIA",e[e.MAPS=5]="MAPS",e[e.MUSIC=6]="MUSIC",e[e.MOVIES=7]="MOVIES",e[e.OTHERS=8]="OTHERS"})(o||(o={}));const n=[{id:0,icon:""},{id:1,icon:""},{id:2,icon:""},{id:3,icon:""},{id:4,icon:""},{id:5,icon:""},{id:6,icon:""},{id:7,icon:""},{id:8,icon:""}];var s;(e=>{e.DUCK_DUCK_GO="DUCK_DUCK_GO",e.GOOGLE="GOOGLE",e.GMAIL="GMAIL",e.BING="BING",e.YANDEX="YANDEX",e.BRAVE="BRAVE",e.YAHOO="YAHOO",e.BAIDU="BAIDU",e.QWANT="QWANT",e.ECOSIA="ECOSIA",e.SEZNAM="SEZNAM",e.TRANSLATE_EN="TRANSLATE_EN",e.TRANSLATE_MICROSOFT_EN="TRANSLATE_MICROSOFT_EN",e.TRANSLATE_DEEPL_EN="TRANSLATE_DEEPL_EN",e.TRANSLATE_YANDEX_EN="TRANSLATE_YANDEX_EN",e.TRANSLATE_BAIDU_EN="TRANSLATE_BAIDU_EN",e.WIKIPEDIA="WIKIPEDIA",e.YOUTUBE="YOUTUBE",e.GOOGLE_MAPS="GOOGLE_MAPS",e.TWITTER="TWITTER",e.FACEBOOK="FACEBOOK"})(s||(s={}));const r={GOOGLE:{url:"https://www.google.com/search?q=%s",icon:"google",category:1},GMAIL:{url:"https://mail.google.com/mail/u/0/#search/%s",icon:"gmail",category:8},QWANT:{url:"https://www.qwant.com/?q=%s",icon:"qwant",category:1},BRAVE:{url:"https://search.brave.com/search?q=%s",icon:"brave",category:1},BING:{url:"https://www.bing.com/search?q=%s",icon:"bing(2)",category:1},YAHOO:{url:"https://search.yahoo.com/search?p=%s",icon:"yahoo",category:1},YANDEX:{url:"https://yandex.com/search/?text=%s",icon:"yandex",category:1},BAIDU:{url:"https://www.baidu.com/s?wd=%s",icon:"baidu(1)",category:1},SEZNAM:{url:"https://search.seznam.cz/?q=%s",icon:"seznam",category:1},DUCK_DUCK_GO:{url:"https://duckduckgo.com/?q=%s",icon:"duckduckgo",category:1},TRANSLATE_EN:{url:"https://translate.google.com/#auto/en/%s",icon:"translate(1)",category:2},TRANSLATE_MICROSOFT_EN:{url:"https://www.bing.com/translator?text=%s",icon:"bing(3)",category:2},TRANSLATE_BAIDU_EN:{url:"https://fanyi.baidu.com/#auto/en/%s",icon:"baidu_translate",category:2},TRANSLATE_DEEPL_EN:{url:"https://www.deepl.com/translator#?/en/%s",icon:"deepl_v2",category:2},TRANSLATE_YANDEX_EN:{url:"https://translate.yandex.com/?text=%s",icon:"yandex",category:2},YOUTUBE:{url:"https://www.youtube.com/results?search_query=%s",icon:"youtube-symbol",category:3},GOOGLE_MAPS:{url:"https://www.google.com/maps/search/%s",icon:"google_maps",category:5},WIKIPEDIA:{url:"https://en.wikipedia.org/wiki/Special:Search?search=%s",icon:"wikipedia(1)",category:8},TWITTER:{url:"https://twitter.com/search?q=%s",icon:"twitter",category:4},FACEBOOK:{url:"https://www.facebook.com/search/top/?q=%s",icon:"facebook",category:4},ECOSIA:{url:"https://www.ecosia.org/search?q=%s",icon:"ecosia-icon",category:1}};Object.values(r).forEach((e=>{e.icon=(0,a.Z)(`svg/search_providers/${e.icon}.svg`)})),Object.freeze(r)},364:(e,t,i)=>{i.d(t,{U:()=>a});var o=i(7852);function a({hexColor:e,rgb:t},{white:i="#ffffff",black:a="#000000"}={}){const[n,s,r]=e?(0,o.E)(e):t;return(299*n+587*s+114*r)/1e3>=128?a:i}},7852:(e,t,i)=>{function o(e){const t=parseInt(e.replace("#",""),16);return[t>>16&255,t>>8&255,255&t]}i.d(t,{E:()=>o})},51:(e,t,i)=>{i.d(t,{y:()=>a});var o=i(7526);async function a(e,t){const i=`id_file_${t?(0,o.V)():e}`;if(document.getElementById(i))return;const a=document.createElement("link");return a.href=t?`data:text/css;base64,${btoa(e)}`:e,a.id=i,a.type="text/css",a.rel="stylesheet",new Promise(((e,t)=>{a.onload=e,a.onerror=t,document.head.appendChild(a)}))}},3660:(e,t,i)=>{i.d(t,{F:()=>s});var o=i(4323),a=i(9676),n=i(9180);async function s(e,t,{timeout:i=(0,n.n)(10)}={}){return(await Promise.all((await browser.webNavigation.getAllFrames({tabId:t})).map((o=>(0,a.w)(i,void 0,(()=>browser.scripting.executeScript({target:{tabId:t,frameIds:[o.frameId]},func:()=>window.name}).then((([e])=>e.result)).catch((()=>"")).then((t=>t===e?o.frameId:void 0)))))))).find(o.qS)}},2541:(e,t,i)=>{i.d(t,{s:()=>o});const o=new class{#e=0;set(e,t=0){t<this.#e||(this.#e=t,document.title=e)}}},8303:(e,t,i)=>{function o(e){const t=e.composedPath();return e.composedPath=()=>t,e}function a(e){const t=e.dataTransfer;return Object.defineProperty(e,"dataTransfer",{writable:!1,value:t}),e}i.d(t,{E:()=>o,O:()=>a})},3700:(e,t,i)=>{i.d(t,{j:()=>o});class o extends Map{options;constructor(e={}){super(e.entries||e.iterable),this.options=e}get(e){const t=super.get(e),i=t||new Set;return t||super.set(e,i),i}add(e,t){const i=this.get(e);return i.add(t),super.set(e,i)}remove(e,t){const i=this.get(e);return i.delete(t),super.set(e,i)}map(e){const t=new o;for(const[i,o]of this){const a=new Set;let n=0;for(const t of o)a.add(e(t,n++,i));t.set(i,a)}return t}}},2016:(e,t,i)=>{i.d(t,{O:()=>o});const o=self.matchMedia("only screen and (max-device-width: 1000px)").matches},6898:(e,t,i)=>{function o(e,t){return!(e.right<=t.left||e.left>=t.right||e.bottom<=t.top||e.top>=t.bottom)}i.d(t,{U:()=>o})},6278:(e,t,i)=>{i.d(t,{$x:()=>n,Nf:()=>a});var o=i(6690);i(1470);const a=e=>e.getBoundingClientRect().toJSON();function n(e,{}={}){const{width:t,height:i,x:a,y:n}=e.getBoundingClientRect(),s=a+t<window.innerWidth,r=n+i<window.innerHeight;s||(e.style.left=(0,o.px)(window.innerWidth-t)),r||(e.style.top=(0,o.px)(window.innerHeight-i))}},5628:(e,t,i)=>{i.d(t,{C:()=>r});var o=i(9598),a=i(6004),n=i(9100);const s={dark:[!1,"boolean"],label:["","string"],strokeDark:["","string"],strokeLight:["","string"],strokeBackgroundDark:["","string"],strokeBackgroundLight:["","string"],backgroundDark:["transparent","string"],backgroundLight:["transparent","string"],baseline:["central","string"],stroke:[0,"number"],diameter:[0,"number"],progress:[0,"number"]};class r extends HTMLElement{static tagName="progress-ring";static pauseIcon="<pause>";_circleNode;_circleBackground;_svgNode;_textNode;_pauseNode;white="#fff";black="#444";backgroundDark="#88888877";backgroundLight="#88888822";strokeBackgroundDark="#A7A7A7AA";strokeBackgroundLight="#87878764";constructor(){super(),this.attachShadow({mode:"open"}),this._svgNode=(0,o.z)("svg",{},[this._circleBackground=(0,o.z)("circle",{stroke:this.backgroundDark,fill:"transparent"}),this._circleNode=(0,o.z)("circle",{stroke:this.white,fill:"#88888877"}),this._textNode=(0,o.z)("text",{textContent:"a",x:"50%",y:"50%","dominant-baseline":"central","text-anchor":"middle"}),this._pauseNode=(0,o.z)("path",{d:"M 0,1 L 0,9 L 2,9 L 2,1 L 0,1 M 4,1 L 4,9 L 6,9 L 6,1 L 4,1",transform:"translate(9, 7)"})]),this.shadowRoot.appendChild((0,a.nl)([this._svgNode,(0,o.z)("style",{textContent:l})])),this.updateAttributes()}updateAttributes(){const{dark:e,baseline:t,label:i,stroke:o,diameter:a,progress:s,backgroundDark:l,backgroundLight:c,strokeDark:d,strokeLight:u,strokeBackgroundDark:p,strokeBackgroundLight:h}=this.getAttributes(),g=a/2,m=Math.max(0,g-o),_=2*m*Math.PI,w=_-(0,n.n)(0,100,s)/100*_,f=i===r.pauseIcon;this.setAttributes(this._svgNode,[["height",`${a}`],["width",`${a}`]]),this.setAttributes(this._textNode,[["textContent",i],["dominant-baseline",t],["style",`fill: ${f?"transparent":e?this.white:this.black}`]]),this.setAttributes(this._pauseNode,[["style",`fill: ${f?e?this.white:this.black:"transparent"}`]]);const y=[["stroke-dasharray",`${_} ${_}`],["stroke-width",`${o}`],["style",`stroke-dashoffset:${w}`],["r",`${m}`],["cx",`${g}`],["cy",`${g}`],["fill",`${e?l||this.backgroundDark:c||this.backgroundLight}`]];this.setAttributes(this._circleNode,y),this.setAttributes(this._circleBackground,y.concat([["style","stroke-dashoffset: 0"]])),this._circleBackground.style.stroke=e?p||this.strokeBackgroundDark:h||this.strokeBackgroundLight,this._circleNode.style.stroke=e?d||this.white:u||this.black}setAttributes(e,t){t.forEach((([t,i])=>"textContent"===t?e.textContent=i:e.setAttribute(t,i)))}getAttributes(){const e=Object.entries(s).map((([e,[t,i]])=>{const o=this.getAttribute(e);return[e,null===o?t:"number"===i?parseFloat(o):"string"===i?o:"boolean"===i?"false"!==o:t]}));return Object.fromEntries(e)}static get observedAttributes(){return Object.keys(s)}setAttribute(e,t){return super.setAttribute(e,t)}attributeChangedCallback(e,t,i){this.updateAttributes()}}const l="\ntext {\n  fill: lightgray;\n  font-family: sans-serif;\n}\ncircle {\n  transition: stroke-dashoffset 0.35s;\n  transform: rotate(-90deg);\n  transform-origin: 50% 50%;\n}\n";window.customElements.define("progress-ring",r)}}]);