import{c as e,g as t,b as r}from"./browser-polyfill-BfqLb55p.js";import{B as s,V as a,d as n,a1 as i,v as o,c as u,u as l,o as c,b as d,h as f,l as h,e as p,r as m,i as g,f as v,g as b,p as $,m as y,t as w,F as x,q as _,Y as D,a2 as S,C as M,a3 as k,k as T,T as O,U as C}from"./FontAwesome-CCo8GKtM.js";import{_ as j,a as A}from"./push-icon-CwDCXXFi.js";import{u as Y}from"./useSettings-BaLXaLNb.js";import{_ as z}from"./Button.vue_vue_type_script_setup_true_lang-DDaL3Au8.js";import{aS as F,ah as I,aT as H}from"./enrolment-DD7Q7GNl.js";import{k as L,t as E,r as W}from"./settings-CkiztfCI.js";const[P,U]=function(e){const t=Symbol(e);return[r=>{const a=s(t,r);if(a)return a;if(null===a)return a;throw new Error(`Component must be wrapped with <${e}> to provide the \`${e}\` context.`)},e=>(a(t,e),e)]}("TabsRoot"),V=n({__name:"TabsRoot",props:{activeTab:{}},setup(e){const t=i("tab-id",e.activeTab);return U({activeTab:t,setActiveTab:e=>{t.value=e}}),(e,t)=>o(e.$slots,"default")}}),N={key:0,class:"h-full overflow-hidden"},J=n({__name:"TabsContent",props:{tabId:{}},setup(e){const t=e,r=P(),s=u((()=>t.tabId===r.activeTab.value));return(e,t)=>l(s)?(c(),d("div",N,[o(e.$slots,"default")])):f("",!0)}}),Z={class:"flex rounded-[20px] bg-[#E6E8F0] p-[3px] shadow-[inset_0_0_2px_0_rgba(0,0,0,0.15)]"};const B=j({},[["render",function(e,t){return c(),d("div",Z,[o(e.$slots,"default")])}]]),q=n({__name:"TabsTrigger",props:{tabId:{}},setup(e){const t=e,r=P(),s=u((()=>t.tabId===r.activeTab.value));return(e,a)=>(c(),d("button",{class:h(["flex shrink-0 grow basis-0 items-center justify-center rounded-[36px] px-5 py-1 text-xs font-medium",{"bg-white shadow-[0_0.2px_3.6px_0_rgba(0,0,0,0.11),0_0.6px_1.8px_0_rgba(0,0,0,0.11)]":l(s)}]),onMousedown:a[0]||(a[0]=p((()=>l(r).setActiveTab(t.tabId)),["left"]))},[o(e.$slots,"default")],34))}}),R={class:"flex h-full flex-col gap-5"},K={class:"flex gap-2"},Q=n({__name:"SettingsDebug",async setup(e){let t,r;const s=m(null),{settings:a}=Y(),n=u((()=>{var e,t;return!1===(null==(t=null==(e=a.value)?void 0:e.debug_access)?void 0:t.full_debug_info)})),i=([t,r]=g((()=>F())),t=await t,r(),t),o=u((()=>{var e,t,r;const s={...i};if(delete s.storage.localStorage.clonedLoginPageFingerprint,null==(t=null==(e=s.storage.localStorage.settings)?void 0:e.stolen_credentials)||delete t.credentials,n.value&&(delete s.permissions,delete s.storage.localStorage,s.browser.userLoggedIn=void 0!==s.browser.userProfile,delete s.browser.userProfile,null==(r=s.storage.managedStorage)?void 0:r.token)){const e=s.storage.managedStorage.token;s.storage.managedStorage.token=`${e.substring(0,2)}...<masked>...${e.substring(e.length-2)}`}return JSON.stringify(s,null,2)}));function f(){var e;navigator.clipboard.writeText((null==(e=s.value)?void 0:e.textContent)||"")}function h(){var e;const t=window.open("","_blank");t&&(t.document.write("<html><head><title>Push Security - Debug Info</title></head><body>"),t.document.write(`<pre>${null==(e=s.value)?void 0:e.textContent}</pre>`),t.document.write("</body></html>"),t.print(),t.close())}return(e,t)=>{const r=z;return c(),d("div",R,[v("div",K,[b(r,{color:"white",size:"xs",icon:["fas","copy"],onClick:p(f,["left"])},{default:$((()=>t[0]||(t[0]=[y(" Copy to clipboard ")]))),_:1}),b(r,{color:"white",size:"xs",icon:["fas","arrow-down-to-line"],onClick:p(h,["left"])},{default:$((()=>t[1]||(t[1]=[y(" Save as PDF ")]))),_:1})]),v("pre",{ref_key:"pre",ref:s,class:"overflow-auto whitespace-pre-wrap text-xs"},w(l(o)),513)])}}}),G={class:"rounded-[3px] border-[0.8px] border-[#DADADA] bg-[#F6F6F6] px-2 py-[2px] font-code font-medium text-sunny-orange-darker"};const X=j({},[["render",function(e,t){return c(),d("span",G,[o(e.$slots,"default")])}]]),ee={class:"flex items-center gap-1 text-sm font-normal text-red-on-white"},te=n({__name:"ErrorFeedback",setup:e=>(e,t)=>(c(),d("div",ee,[b(l(x),{icon:["fas","exclamation-triangle"]}),o(e.$slots,"default")]))});var re={exports:{}};const se=t(re.exports=function(){var e=1e3,t=6e4,r=36e5,s="millisecond",a="second",n="minute",i="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},v=function(e,t,r){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(r)+e},b={s:v,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),s=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+v(s,2,"0")+":"+v(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var s=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(s,l),n=r-a<0,i=t.clone().add(s+(n?-1:1),l);return+(-(s+(r-a)/(n?a-i:i-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:d,w:u,d:o,D:f,h:i,m:n,s:a,ms:s,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},$="en",y={};y[$]=g;var w="$isDayjsObject",x=function(e){return e instanceof M||!(!e||!e[w])},_=function e(t,r,s){var a;if(!t)return $;if("string"==typeof t){var n=t.toLowerCase();y[n]&&(a=n),r&&(y[n]=r,a=n);var i=t.split("-");if(!a&&i.length>1)return e(i[0])}else{var o=t.name;y[o]=t,a=o}return!s&&a&&($=a),a||!s&&$},D=function(e,t){if(x(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new M(r)},S=b;S.l=_,S.i=x,S.w=function(e,t){return D(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var M=function(){function g(e){this.$L=_(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[w]=!0}var v=g.prototype;return v.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(p);if(s){var a=s[2]-1||0,n=(s[7]||"0").substring(0,3);return r?new Date(Date.UTC(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)):new Date(s[1],a,s[3]||1,s[4]||0,s[5]||0,s[6]||0,n)}}return new Date(t)}(e),this.init()},v.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},v.$utils=function(){return S},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(e,t){var r=D(e);return this.startOf(t)<=r&&r<=this.endOf(t)},v.isAfter=function(e,t){return D(e)<this.startOf(t)},v.isBefore=function(e,t){return this.endOf(t)<D(e)},v.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(e,t){var r=this,s=!!S.u(t)||t,c=S.p(e),h=function(e,t){var a=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return s?a:a.endOf(o)},p=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},m=this.$W,g=this.$M,v=this.$D,b="set"+(this.$u?"UTC":"");switch(c){case d:return s?h(1,0):h(31,11);case l:return s?h(1,g):h(0,g+1);case u:var $=this.$locale().weekStart||0,y=(m<$?m+7:m)-$;return h(s?v-y:v+(6-y),g);case o:case f:return p(b+"Hours",0);case i:return p(b+"Minutes",1);case n:return p(b+"Seconds",2);case a:return p(b+"Milliseconds",3);default:return this.clone()}},v.endOf=function(e){return this.startOf(e,!1)},v.$set=function(e,t){var r,u=S.p(e),c="set"+(this.$u?"UTC":""),h=(r={},r[o]=c+"Date",r[f]=c+"Date",r[l]=c+"Month",r[d]=c+"FullYear",r[i]=c+"Hours",r[n]=c+"Minutes",r[a]=c+"Seconds",r[s]=c+"Milliseconds",r)[u],p=u===o?this.$D+(t-this.$W):t;if(u===l||u===d){var m=this.clone().set(f,1);m.$d[h](p),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else h&&this.$d[h](p);return this.init(),this},v.set=function(e,t){return this.clone().$set(e,t)},v.get=function(e){return this[S.p(e)]()},v.add=function(s,c){var f,h=this;s=Number(s);var p=S.p(c),m=function(e){var t=D(h);return S.w(t.date(t.date()+Math.round(e*s)),h)};if(p===l)return this.set(l,this.$M+s);if(p===d)return this.set(d,this.$y+s);if(p===o)return m(1);if(p===u)return m(7);var g=(f={},f[n]=t,f[i]=r,f[a]=e,f)[p]||1,v=this.$d.getTime()+s*g;return S.w(v,this)},v.subtract=function(e,t){return this.add(-1*e,t)},v.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var s=e||"YYYY-MM-DDTHH:mm:ssZ",a=S.z(this),n=this.$H,i=this.$m,o=this.$M,u=r.weekdays,l=r.months,c=r.meridiem,d=function(e,r,a,n){return e&&(e[r]||e(t,s))||a[r].slice(0,n)},f=function(e){return S.s(n%12||12,e,"0")},p=c||function(e,t,r){var s=e<12?"AM":"PM";return r?s.toLowerCase():s};return s.replace(m,(function(e,s){return s||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return o+1;case"MM":return S.s(o+1,2,"0");case"MMM":return d(r.monthsShort,o,l,3);case"MMMM":return d(l,o);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(r.weekdaysMin,t.$W,u,2);case"ddd":return d(r.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(n);case"HH":return S.s(n,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(n,i,!0);case"A":return p(n,i,!1);case"m":return String(i);case"mm":return S.s(i,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(s,f,h){var p,m=this,g=S.p(f),v=D(s),b=(v.utcOffset()-this.utcOffset())*t,$=this-v,y=function(){return S.m(m,v)};switch(g){case d:p=y()/12;break;case l:p=y();break;case c:p=y()/3;break;case u:p=($-b)/6048e5;break;case o:p=($-b)/864e5;break;case i:p=$/r;break;case n:p=$/t;break;case a:p=$/e;break;default:p=$}return h?p:S.a(p)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return y[this.$L]},v.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),s=_(e,t,!0);return s&&(r.$L=s),r},v.clone=function(){return S.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},g}(),k=M.prototype;return D.prototype=k,[["$ms",s],["$s",a],["$m",n],["$H",i],["$W",o],["$M",l],["$y",d],["$D",f]].forEach((function(e){k[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),D.extend=function(e,t){return e.$i||(e(t,M,D),e.$i=!0),D},D.locale=_,D.isDayjs=x,D.unix=function(e){return D(1e3*e)},D.en=y[$],D.Ls=y,D.p={},D}()),ae={class:"flex w-[732px] flex-col gap-11"},ne={class:"flex w-[658px] flex-col gap-1"},ie={class:"flex gap-1 self-stretch"},oe={id:"site",type:"text",class:"h-10 grow cursor-default rounded border border-grey-lighter bg-grey-lightest px-4 py-2 text-lg shadow-sm outline-none"},ue={class:"flex h-full items-center gap-1"},le={class:"text-sm slashed-zero tabular-nums text-dusty-pink-darkest"},ce={key:1,class:"py-2 text-sm font-normal"},de=n({__name:"SettingsDisabledSite",async setup(e){let t,s;const a=([t,s]=g((()=>L("tempDisabledSite","tempDisabledSiteExpiry"))),t=await t,s(),t),n=m(a.tempDisabledSite.value||""),i=m(a.tempDisabledSiteExpiry.value||0),o=m(""),x=u((()=>""===n.value)),O=u((()=>i.value>0)),C=u((()=>{var e;return(null==(e=n.value)?void 0:e.split(/:\/\/|\//).at(1))||""})),j=u((()=>se(i.value).format("h:mm A")));async function A(){const e=(t=n.value,{isValid:/^\*$|^(?:\*\.)?(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]$/i.test(t),error:"That's not a valid domain"});var t;e.isValid?(o.value="",i.value=Date.now()+36e5,n.value=`*://${n.value}/*`,await r.alarms.create("clearTempDisabledSite",{when:i.value}),await E({tempDisabledSite:n.value,tempDisabledSiteExpiry:i.value}),await I(),await H(n.value,i.value)):o.value=e.error}async function Y(){await W("tempDisabledSite","tempDisabledSiteExpiry"),await r.alarms.clear("clearDisabledSite"),await I(),n.value="",i.value=0,o.value=""}return(e,t)=>{const r=z,s=te,a=X;return c(),d("div",ae,[t[10]||(t[10]=v("div",{class:"flex flex-col gap-1"},[v("h1",{class:"text-xl font-medium"}," Temporarily disable site "),v("p",{class:"text-sm font-normal"}," The Push browser extension is disabled on the following site. This will temporarily remove all content scripts from the site for 1 hour. ")],-1)),v("div",ne,[t[9]||(t[9]=v("label",{for:"site",class:"text-sm font-medium"},"Disable site",-1)),v("div",ie,[l(O)?(c(),d(_,{key:0},[v("div",oe,[v("div",ue,[v("span",null,w(l(C)),1),v("span",le," - disabled until "+w(l(j)),1)])]),b(r,{color:"dusty-pink",size:"base",class:"font-medium",icon:["far","trash"],onClick:p(Y,["left"])})],64)):(c(),d(_,{key:1},[D(v("input",{id:"site","onUpdate:modelValue":t[0]||(t[0]=e=>M(n)?n.value=e:null),type:"text",class:h(["h-10 grow rounded border border-grey-lighter px-4 py-2 text-lg shadow-sm outline-none",{"border-red-on-white":l(o)}]),placeholder:"example.com",onKeyup:k(A,["enter"])},null,34),[[S,l(n)]]),b(r,{color:"dusty-orange",size:"base",class:"font-medium",disabled:l(x),onClick:p(A,["left"])},{default:$((()=>t[1]||(t[1]=[y(" Disable ")]))),_:1},8,["disabled"])],64))]),l(o)?(c(),T(s,{key:0},{default:$((()=>[y(w(l(o)),1)])),_:1})):f("",!0),l(O)?f("",!0):(c(),d("div",ce,[t[5]||(t[5]=y(" You can use a wildcard ")),b(a,null,{default:$((()=>t[2]||(t[2]=[y("*")]))),_:1}),t[6]||(t[6]=y(" to partially match website domains. As an example, ")),b(a,null,{default:$((()=>t[3]||(t[3]=[y("*.example.com")]))),_:1}),t[7]||(t[7]=y(" will catch any subdomains or just a ")),b(a,null,{default:$((()=>t[4]||(t[4]=[y("*")]))),_:1}),t[8]||(t[8]=y(" will exclude monitoring on all sites. "))]))])])}}}),fe={class:"flex flex-1 justify-center"};C(n({__name:"Settings",setup(e){const{settings:t}=Y(),r=u((()=>{var e,r;return!1===(null==(r=null==(e=t.value)?void 0:e.debug_access)?void 0:r.temporary_disable)}));return(e,t)=>{const s=A,a=q,n=B,i=J,o=V;return c(),T(o,{"active-tab":"debug"},{default:$((()=>[v("div",{class:h([[l(r)?"py-[18px]":"py-[10px]"],"flex items-center justify-center border-b border-grey-lighter"])},[b(s,{width:"33px",height:"16px",class:"text-deep-orange"}),v("div",fe,[l(r)?f("",!0):(c(),T(n,{key:0,class:"w-[510px]"},{default:$((()=>[b(a,{"tab-id":"debug"},{default:$((()=>t[0]||(t[0]=[y(" Debug page ")]))),_:1}),b(a,{"tab-id":"disabled-site"},{default:$((()=>t[1]||(t[1]=[y(" Disabled site ")]))),_:1})])),_:1}))])],2),b(i,{"tab-id":"debug"},{default:$((()=>[(c(),T(O,{"!suspensible":""},{default:$((()=>[b(Q)])),_:1}))])),_:1}),l(r)?f("",!0):(c(),T(i,{key:0,"tab-id":"disabled-site"},{default:$((()=>[(c(),T(O,{"!suspendible":""},{default:$((()=>[b(de)])),_:1}))])),_:1}))])),_:1})}}})).mount("#app");
