!function(){var e=[function(e,t){var s,r,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=[e],s=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(t,s)=>(...r)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):s.singleCallbackArg||r.length<=1&&!1!==s.singleCallbackArg?t.resolve(r[0]):t.resolve(r)},a=e=>1==e?"argument":"arguments",i=(e,t)=>function(s,...r){if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((n,a)=>{if(t.fallbackToNoCallback)try{s[e](...r,o({resolve:n,reject:a},t))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),s[e](...r),t.fallbackToNoCallback=!1,t.noCallback=!0,n()}else t.noCallback?(s[e](...r),n()):s[e](...r,o({resolve:n,reject:a},t))}))},c=(e,t,s)=>new Proxy(t,{apply(t,r,n){return s.call(r,e,...n)}});let g=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},s={})=>{let r=Object.create(null),n={has(t,s){return s in e||s in r},get(n,o,a){if(o in r)return r[o];if(!(o in e))return;let u=e[o];if("function"==typeof u)if("function"==typeof t[o])u=c(e,e[o],t[o]);else if(g(s,o)){let t=i(o,s[o]);u=c(e,e[o],t)}else u=u.bind(e);else if("object"==typeof u&&null!==u&&(g(t,o)||g(s,o)))u=l(u,t[o],s[o]);else{if(!g(s,"*"))return Object.defineProperty(r,o,{configurable:!0,enumerable:!0,get(){return e[o]},set(t){e[o]=t}}),u;u=l(u,t[o],s["*"])}return r[o]=u,u},set(t,s,n,o){return s in r?r[s]=n:e[s]=n,!0},defineProperty(e,t,s){return Reflect.defineProperty(r,t,s)},deleteProperty(e,t){return Reflect.deleteProperty(r,t)}},o=Object.create(e);return new Proxy(o,n)},u=e=>({addListener(t,s,...r){t.addListener(e.get(s),...r)},hasListener(t,s){return t.hasListener(e.get(s))},removeListener(t,s){t.removeListener(e.get(s))}}),m=new r((e=>"function"!=typeof e?e:function(t){const s=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(s)})),d=new r((e=>"function"!=typeof e?e:function(t,s,r){let o,a,i=!1,c=new Promise((e=>{o=function(t){i=!0,e(t)}}));try{a=e(t,s,o)}catch(e){a=Promise.reject(e)}const g=!0!==a&&n(a);if(!0!==a&&!g&&!i)return!1;const l=e=>{e.then((e=>{r(e)}),(e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",r({__mozWebExtensionPolyfillReject__:!0,message:t})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(g?a:c),!0})),f=({reject:s,resolve:r},n)=>{e.runtime.lastError?e.runtime.lastError.message===t?r():s(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?s(new Error(n.message)):r(n)},p=(e,t,s,...r)=>{if(r.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${r.length}`);if(r.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${r.length}`);return new Promise(((e,t)=>{const n=f.bind(null,{resolve:e,reject:t});r.push(n),s.sendMessage(...r)}))},x={devtools:{network:{onRequestFinished:u(m)}},runtime:{onMessage:u(d),onMessageExternal:u(d),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},l(e,x,s)};e.exports=s(chrome)}},void 0===(n="function"==typeof s?s.apply(t,r):s)||(e.exports=n)},function(e,t,s){"use strict";const{loadFromLocalStorage:r,saveToLocalStorage:n}=s(5),o=s(2),a=s(6),i=e=>e.replaceAll("http","h**p").replaceAll("://",":**").replaceAll("www","w*w").replaceAll(".","*");e.exports=async function(e){let t,s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,c=2<arguments.length?arguments[2]:void 0,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",l="Unknown Error",u={logID:s};switch(console.error(s,g),console.dir(c),!0){case c instanceof Event:l="EventError",u.errorInfo={currentTargetURL:c?.currentTarget?.url||"",path:c?.path||[],type:c?.type||""};break;case c instanceof Error:case c instanceof SyntaxError:case c instanceof ReferenceError:case c instanceof TypeError:l=c.name||"Error",u.errorInfo={message:c?.message||"",stack:c?.stack||"",toString:c?.toString()||"",cause:c?.cause||""};break;default:l=c?.message||"Unknown Error",u.errorInfo=c}try{t=await r(["logging","extensionID","browserInfo"])}catch(e){console.error(e)}if("logging"in t||(t=await n({logging:!1},t)),!t.logging)return!1;if("Firefox"===t?.browserInfo?.browser_name&&"105.0"===t?.browserInfo?.browser_version&&14===s||"Chrome"===t?.browserInfo?.browser_name&&"107"===t?.browserInfo?.browser_version&&14===s||"Chrome"===t?.browserInfo?.browser_name&&"107.0.0.0"===t?.browserInfo?.browser_version&&14===s||u?.errorInfo?.message?.includes("FILE_ERROR_NO_SPACE")||407===u?.errorInfo.status||u?.errorInfo?.message?.includes("An unexpected error occurred")||u?.errorInfo?.message?.includes("Refused to run the JavaScript URL")||u?.errorInfo?.message?.includes("QuotaExceededError: storage.local API call exceeded its quota limitations")||u?.errorInfo?.statusText?.includes("Proxy Authentication Required"))return!1;if(u.errorType=c?.constructor?.name||"",u.extensionVersion=o.ExtensionVersion,u.browserInfo=t.browserInfo,u.url=i(g),!g.includes("http")&&"undefined"!=typeof window&&window?.location?.href)try{u.frontUrl=i(window?.location?.href)}catch(e){}return(new a).storeLog(t.extensionID,e,l,u).then((()=>{t=null,l=null,u=null}))}},function(e,t,s){"use strict";const r=s(0),n=s(68),o={WebSocketTimeout:3,ResendPushTimeout:10,ExtensionVersion:"1.7.3",Texts:{Error:{General:{Title:r.i18n.getMessage("errorGeneralTitle")||n.errorGeneralTitle,Message:r.i18n.getMessage("errorGeneralMessage")||n.errorGeneralMessage},UndefinedError:{Title:r.i18n.getMessage("errorUndefinedErrorTitle")||n.errorUndefinedErrorTitle,Message:r.i18n.getMessage("errorUndefinedErrorMessage")||n.errorUndefinedErrorMessage},Timeout:{Title:r.i18n.getMessage("errorTimeoutTitle")||n.errorTimeoutTitle,Message:r.i18n.getMessage("errorTimeoutMessage")||n.errorTimeoutMessage},PushExpired:e=>({Title:(r.i18n.getMessage("errorPushExpiredTitle")||n.errorPushExpiredTitle).replace("DOMAIN",e),Message:r.i18n.getMessage("errorPushExpiredMessage")||n.errorPushExpiredMessage}),WebSocket:{Title:r.i18n.getMessage("errorWebSocketTitle")||n.errorWebSocketTitle,Message:r.i18n.getMessage("errorWebSocketMessage")||n.errorWebSocketMessage},OnInstallError:{Title:r.i18n.getMessage("errorOnInstallErrorTitle")||n.errorOnInstallErrorTitle,Message:r.i18n.getMessage("errorOnInstallErrorMessage")||n.errorOnInstallErrorMessage},ExtNameRequired:{Title:r.i18n.getMessage("errorExtNameRequiredTitle")||n.errorExtNameRequiredTitle,Message:r.i18n.getMessage("errorExtNameRequiredMessage")||n.errorExtNameRequiredMessage},ExtNameMinLength:{Title:r.i18n.getMessage("errorExtNameMinLengthTitle")||n.errorExtNameMinLengthTitle,Message:r.i18n.getMessage("errorExtNameMinLengthMessage")||n.errorExtNameMinLengthMessage},ExtNameMaxLength:{Title:r.i18n.getMessage("errorExtNameMaxLengthTitle")||n.errorExtNameMaxLengthTitle,Message:r.i18n.getMessage("errorExtNameMaxLengthMessage")||n.errorExtNameMaxLengthMessage},ConfigFirst:{Title:r.i18n.getMessage("errorConfigFirstTitle")||n.errorConfigFirstTitle,Message:r.i18n.getMessage("errorConfigFirstMessage")||n.errorConfigFirstMessage},RemoveDeviceBadData:{Title:r.i18n.getMessage("errorRemoveDeviceBadDataTitle")||n.errorRemoveDeviceBadDataTitle,Message:r.i18n.getMessage("errorRemoveDeviceBadDataMessage")||n.errorRemoveDeviceBadDataMessage},RemoveDomainBadData:{Title:r.i18n.getMessage("errorRemoveDomainBadDataTitle")||n.errorRemoveDomainBadDataTitle,Message:r.i18n.getMessage("errorRemoveDomainBadDataMessage")||n.errorRemoveDomainBadDataMessage},StorageCorrupted:{Title:r.i18n.getMessage("errorStorageCorruptedTitle")||n.errorStorageCorruptedTitle,Message:r.i18n.getMessage("errorStorageCorruptedMessage")||n.errorStorageCorruptedMessage},InactiveTab:{Title:r.i18n.getMessage("errorInactiveTabTitle")||n.errorInactiveTabTitle,Message:r.i18n.getMessage("errorInactiveTabMessage")||n.errorInactiveTabMessage},LackOfTab:{Title:r.i18n.getMessage("errorLackOfTabTitle")||n.errorLackOfTabTitle,Message:r.i18n.getMessage("errorLackOfTabMessage")||n.errorLackOfTabMessage},InputNotExist:{Title:r.i18n.getMessage("errorInputNotExistTitle")||n.errorInputNotExistTitle,Message:r.i18n.getMessage("errorInputNotExistMessage")||n.errorInputNotExistMessage},StorageIntegrity:{Title:r.i18n.getMessage("errorStorageIntegrityTitle")||n.errorStorageIntegrityTitle,Message:r.i18n.getMessage("errorStorageIntegrityMessage")||n.errorStorageIntegrityMessage}},Warning:{TooSoon:e=>({Title:r.i18n.getMessage("warningTooSoonTitle")||n.warningTooSoonTitle,Message:(r.i18n.getMessage("warningTooSoonMessage")||n.warningTooSoonMessage).replace("DIFF",10-Math.round(e))})},Success:{PushSent:{Title:r.i18n.getMessage("successPushSentTitle")||n.successPushSentTitle,Message:r.i18n.getMessage("successPushSentMessage")||n.successPushSentMessage},PushSentClipboard:{Title:r.i18n.getMessage("successPushSentClipboardTitle")||n.successPushSentClipboardTitle,Message:r.i18n.getMessage("successPushSentClipboardMessage")||n.successPushSentClipboardMessage},ExtNameUpdated:{Title:r.i18n.getMessage("successExtNameUpdatedTitle")||n.successExtNameUpdatedTitle,Message:r.i18n.getMessage("successExtNameUpdatedMessage")||n.successExtNameUpdatedMessage},DeviceDisconnected:{Title:r.i18n.getMessage("successDeviceDisconnectedTitle")||n.successDeviceDisconnectedTitle,Message:r.i18n.getMessage("successDeviceDisconnectedMessage")||n.successDeviceDisconnectedMessage},SafariReset:{Title:r.i18n.getMessage("successSafariResetTitle")||n.successSafariResetTitle,Message:r.i18n.getMessage("successSafariResetMessage")||n.successSafariResetMessage},DomainExcluded:{Title:r.i18n.getMessage("successDomainExcludedTitle")||n.successDomainExcludedTitle,Message:r.i18n.getMessage("successDomainExcludedMessage")||n.successDomainExcludedMessage},DomainExcludedRemoved:{Title:r.i18n.getMessage("successDomainExcludedRemovedTitle")||n.successDomainExcludedRemovedTitle,Message:r.i18n.getMessage("successDomainExcludedRemovedMessage")||n.successDomainExcludedRemovedMessage}},Info:{NativeNotifications:{Title:r.i18n.getMessage("infoNativeNotificationsTitle")||n.infoNativeNotificationsTitle,Message:r.i18n.getMessage("infoNativeNotificationsMessage")||n.infoNativeNotificationsMessage},EnabledNativeNotifications:r.i18n.getMessage("infoEnabledNativeNotifications")||n.infoEnabledNativeNotifications,UnsupportedProtocol:{Title:r.i18n.getMessage("infoUnsupportedProtocolTitle")||n.infoUnsupportedProtocolTitle,Message:r.i18n.getMessage("infoUnsupportedProtocolMessage")||n.infoUnsupportedProtocolMessage},BrowserActionWithoutTab:{Title:r.i18n.getMessage("infoBrowserActionWithoutTabTitle")||n.infoBrowserActionWithoutTabTitle,Message:r.i18n.getMessage("infoBrowserActionWithoutTabMessage")||n.infoBrowserActionWithoutTabMessage},CopiedToClipboard:{Title:r.i18n.getMessage("infoCopiedToClipboardTitle")||n.infoCopiedToClipboardTitle,Message:r.i18n.getMessage("infoCopiedToClipboardMessage")||n.infoCopiedToClipboardMessage},Test:{Title:r.i18n.getMessage("infoTestTitle")||n.infoTestTitle,Message:r.i18n.getMessage("infoTestMessage")||n.infoTestMessage}},Token:{Header:r.i18n.getMessage("tokenHeader")||n.tokenHeader,Copy:r.i18n.getMessage("tokenCopy")||n.tokenCopy,Copied:r.i18n.getMessage("tokenCopied")||n.tokenCopied,Description:r.i18n.getMessage("tokenDescription")||n.tokenDescription}}};e.exports=o},function(e,t,s){"use strict";const{sendFrontEndPushAction:r,showFrontEndPush:n,showNativePush:o,showNativePushWithoutTimeout:a}=s(69),i=s(4),c=s(13);e.exports=class{static show(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,s=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];return i(["nativePush"]).then((a=>a.nativePush?o(e,s):t?r(e,t,!0):n(e,!0)))}static showWithoutTimeout(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return i(["nativePush"]).then((s=>s.nativePush?a(e):t?r(e,t,!1):n(e,!1)))}static clearAll(){const e=document.querySelector(c.notification.container).querySelectorAll(c.notification.notification);if(e)return Array.from(e).forEach((e=>{e.classList.remove("visible"),setTimeout((()=>{e.classList.add("hidden")}),300)}))}}},function(e,t,s){"use strict";const r=s(0);e.exports=e=>r.storage.local.get(e).catch((e=>{throw console.error({err:e}),new Error(e)}))},function(e,t,s){"use strict";t.loadFromLocalStorage=s(4),t.saveToLocalStorage=s(9),t.clearLocalStorage=s(50),t.removeFromLocalStorage=s(51)},function(e){"use strict";e.exports=class{REST_API_URL="https://api2.2fas.com";onSuccess(e){if(200<=e.status&&400>e.status)try{return e.json()}catch(e){return Promise.reject(e)}return Promise.reject(e)}async onError(e){const t={status:e.status,statusText:e.statusText};if(400<=e.status&&500>e.status)try{t.content=await e.json()}catch(s){t.content=e}else t.content=e;return Promise.reject(t)}ignoreError(){return Promise.resolve()}createExtensionInstance(e){return fetch(`${this.REST_API_URL}/browser_extensions`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(this.onSuccess).catch(this.onError)}updateBrowserExtension(e,t){return fetch(`${this.REST_API_URL}/browser_extensions/${e}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)}).then(this.onSuccess).catch(this.onError)}getAllPairedDevices(e){return fetch(`${this.REST_API_URL}/browser_extensions/${e}/devices`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then(this.onSuccess).catch(this.onError)}removePairedDevice(e,t){return fetch(`${this.REST_API_URL}/browser_extensions/${e}/devices/${t}`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"DELETE"}).then(this.onSuccess).catch(this.onError)}request2FAToken(e,t){return fetch(`${this.REST_API_URL}/browser_extensions/${e}/commands/request_2fa_token`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({domain:t})}).then(this.onSuccess).catch(this.onError)}close2FARequest(e,t){const s={status:!(2<arguments.length&&void 0!==arguments[2])||arguments[2]?"completed":"terminated"};return fetch(`${this.REST_API_URL}/browser_extensions/${e}/2fa_requests/${t}/commands/close_2fa_request`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(s)}).then(this.onSuccess).catch(this.ignoreError)}storeLog(e,t,s,r){return t&&["info","warning","error","debug"].includes(t)?fetch(`${this.REST_API_URL}/browser_extensions/${e}/commands/store_log`,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({level:t,message:s,context:JSON.stringify(r)})}).then(this.onSuccess).catch(this.ignoreError):Promise.reject(new Error("Invalid log level"))}generateQRLink(e){return`twofas_c://${e}`}}},function(e,t,s){"use strict";const r=s(2),n=s(0),{clearLocalStorage:o,loadFromLocalStorage:a,saveToLocalStorage:i}=s(5),c=s(6),g=s(15),l=s(1),u=s(53);e.exports=e=>{const t=new g;let s=0;return a("attempt").then((e=>(e?.attempt&&Number.isInteger(e?.attempt)&&(s=e.attempt),o()))).then((()=>t.generateKeys())).then((e=>Promise.all([t.exportKey("spki",e.publicKey),t.exportKey("pkcs8",e.privateKey)]))).then((n=>{const o={publicKey:t.ArrayBufferToString(n[0]),privateKey:t.ArrayBufferToString(n[1])};return i({configured:!1,browserInfo:e,keys:o,contextMenu:!0,logging:!1,notifications:!1,incognito:!1,nativePush:!0,pinInfo:!1,extensionVersion:r.ExtensionVersion,autoSubmitEnabled:!1,autoSubmitExcludedDomains:u,attempt:s+1,extIcon:0})})).then((t=>{const s=structuredClone(e);return s.public_key=t.keys.publicKey,(new c).createExtensionInstance(s)})).then((e=>i({extensionID:e.id}))).then((e=>n.runtime.setUninstallURL(`https://2fas.com/byebye/${e.extensionID}/`))).catch((e=>l("error",28,e,"generateDefaultStorage")))}},function(e,t,s){"use strict";const r=s(0);e.exports=()=>r.tabs.create({url:"installPage/installPage.html"})},function(e,t,s){"use strict";const r=s(0);e.exports=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return r.storage.local.set(e).then((()=>Object.assign(t,e))).catch((e=>{throw console.error({err:e}),new Error(e)}))}},function(e){"use strict";e.exports=e=>{1===e.ws.readyState&&e.ws.close()}},function(e,t,s){"use strict";const r=s(0),n=s(32),o=s(33);e.exports=async e=>{let t;if(await new Promise((e=>setTimeout(e,100))),await o(),!e)return;try{t=await r.tabs.get(e)}catch(e){return}const s=t?.url?t.url:t?.pendingUrl?t.pendingUrl:"",a=r.runtime.getURL("");let i;if(s.includes(a))await n(e,!1,!1);else{try{i=new URL(s)}catch(t){return void await n(e,!1,!1)}if("http:"===i.protocol||"https:"===i.protocol)try{await r.tabs.sendMessage(e,{action:"contentScript"}),await n(e)}catch(t){await n(e,!1,!0)}else await n(e,!1,!1)}}},function(e,t,s){"use strict";const r=s(2),n=s(0),o=s(4),a=s(8),i=s(20),c=s(1),g=s(3);e.exports=e=>e&&e?.url?o(null).then((t=>{if(!t.configured){const t=n.runtime.getURL("/installPage/installPage.html");return e.url===t?(console.warn(r.Texts.Error.ConfigFirst.Message),g.show(r.Texts.Error.ConfigFirst,e?.id)):a()}return i(e,t)})).catch((t=>c("error",4,t,e?.url||"browserAction"))):(console.warn(r.Texts.Info.BrowserActionWithoutTab.Message),g.show(r.Texts.Info.BrowserActionWithoutTab,e?.id))},function(e){"use strict";e.exports={installPage:{configured:".twofas-install-page-configured",newDevice:".twofas-install-page-new-device",welcomeHeader:"h1.twofas-js-welcome-header",container:{app:".twofas-install-page-container-blocks-app",qr:".twofas-install-page-container-blocks-qr",handler:".js-twofas-install-handler"},qr:{timeout:".twofas-qr-container-timeout",regenerate:".js-twofas-regenerate-qr",imgs:"img.twofas-js-qrcode",manual:".twofas-js-qr-manual p"}},optionsPage:{confirmModal:{element:".js-twofas-confirm-modal",cancel:".js-twofas-confirm-modal-cancel",confirm:".js-twofas-confirm-modal-confirm",header:".js-twofas-confirm-modal-header",text:".js-twofas-confirm-modal-text"},domainModal:{element:".js-twofas-domain-modal",cancel:".js-twofas-domain-modal-cancel",form:".js-twofas-domain-modal-form",input:".js-twofas-domain-modal-input",validation:".js-twofas-domain-modal-validation"},shortcut:{edit:".js-twofas-shortcut-edit",editText:".js-twofas-shortcut-edit-text",editBox:".js-twofas-shortcut-edit-box",editBoxBtn:".twofas-shortcut-edit-box-btn",editBoxPlus:".twofas-shortcut-edit-box-plus",info:".js-twofas-shortcut-info",tooltip:".js-twofas-shortcut-tooltip",close:".js-twofas-shortcut-close",description:".js-twofas-shortcut-description"},advanced:{header:".js-twofas-advance-header",content:".js-twofas-advance-content"},pin:{gotIt:".js-twofas-pin-info-got-it",prev:".js-twofas-pin-info-prev",next:".js-twofas-pin-info-next",info:".twofas-options-page-pin-info",slider:".js-twofas-pin-info-slider"},hamburger:{element:".js-twofas-options-menu-hamburger",content:".js-twofas-options-menu-content"},autoSubmit:{toggle:"input#twofas-auto-submit-switch",list:".js-twofas-auto-submit-excluded-domain-list",exclude:".js-twofas-auto-submit-excluded-domain-exclude",add:".js-twofas-auto-submit-excluded-domain-add",importDefault:".js-twofas-auto-submit-excluded-domain-import-default"},menuLink:".js-twofas-menu-link",extVersion:"span.twofas-ext-version",contextMenuInput:"input#twofas-context-menu",logsInput:"input#twofas-logs",testNotification:".js-twofas-send-test-notification",devicesList:".js-twofas-device-list",content:".js-twofas-options-content",toggle:".twofas-toggle",safariReset:".js-twofas-safari-reset",integrityError:".js-twofas-integrity-error"},notification:{container:"div.twofas-be-notifications",notification:"div.twofas-be-notification",visible:"div.twofas-be-notification.visible"},extName:{input:"input.js-twofas-extension-name",updateForm:".js-twofas-extension-name-update",updateBtn:".js-twofas-extension-name-update button",error:".js-twofas-extension-name-error"},preload:".preload"}},function(e,t,s){"use strict";const r=s(6),{loadFromLocalStorage:n,saveToLocalStorage:o}=s(5),a=s(1);e.exports=async(e,t)=>{let s;try{s=await n([`tabData-${e}`,"extensionID"])}catch(e){return a("error",30,e)}return!(!s||!s[`tabData-${e}`]?.requestID||t!==s[`tabData-${e}`]?.requestID)&&(new r).close2FARequest(s.extensionID,s[`tabData-${e}`].requestID,!0).then((()=>{const t=structuredClone(s[`tabData-${e}`]);return delete t.requestID,o({[`tabData-${e}`]:t})})).then((()=>{s=null})).catch((t=>a("error",30,t,s[`tabData-${e}`]?.url)))}},function(e,t,s){"use strict";const r=s(18),n=s(19);e.exports=class{constructor(){this.encoder=new TextEncoder,this.decoder=new TextDecoder("utf-8")}generateKeys(){return crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-512"}},!0,["encrypt","decrypt"])}importKey(e,t,s){return crypto.subtle.importKey(t,e,{name:"RSA-OAEP",hash:{name:"SHA-512"}},!1,s)}exportKey(e,t){return crypto.subtle.exportKey(e,t)}ArrayBufferToString(e){const t=new Uint8Array(e);return r(t)}stringToArrayBuffer(e){return n(e)}encodeText(e){return this.encoder.encode(e)}decodeText(e){const t=new DataView(e);return this.decoder.decode(t)}encrypt(e,t){return crypto.subtle.encrypt({name:"RSA-OAEP"},e,t)}decrypt(e,t){return crypto.subtle.decrypt({name:"RSA-OAEP"},e,t)}}},function(e,t,s){"use strict";const r=s(0),n=s(36);e.exports=()=>{let e=navigator?.userAgentData?.brands.filter((e=>!(!e||!e?.brand)&&e?.brand?.includes("Chromium")));if(e&&0<e.length)e=e[0].version;else{const t=navigator?.userAgent?.match(/Firefox\/([0-9.]+)/);e=null==t||2!==t.length?r.i18n.getMessage("unknown"):t[1]}return{name:`Firefox ${r.i18n.getMessage("browserOnOs")} ${n()}`,browser_name:"Firefox",browser_version:e}}},function(e,t,s){"use strict";const r=s(0);e.exports=e=>r.tabs.create({url:e})},function(e){"use strict";e.exports=e=>btoa(String.fromCharCode.apply(null,new Uint8Array(e)))},function(e){"use strict";e.exports=e=>Uint8Array.from(atob(e),(e=>e.charCodeAt(0)))},function(e,t,s){"use strict";const r=s(2),n=s(0),o=s(3),a=s(22),i=s(9),c=s(29),g=s(30);e.exports=async(e,t)=>{const s=new URL(e?.url),l=(new Date).getTime();let u,m,d=t;return d.globalLastAction?(u=(l-d.globalLastAction)/1e3,m=1<Math.round(u)):m=!0,d=await i({globalLastAction:l},d),!!m&&(m=await g(e?.id),!!m)&&("https:"!==s.protocol&&"http:"!==s.protocol&&(console.warn(`${s.protocol} ${n.i18n.getMessage("isNotSupportedByExt")}`),o.show(r.Texts.Info.UnsupportedProtocol,e?.id),m=!1),!!m&&("notifications"in d&&d.notifications||c(e),a(s.origin,e,d)))}},function(e,t,s){"use strict";const r=s(0);e.exports=(e,t)=>{const s={title:e.Title,message:e.Message,iconUrl:"../images/icons/icon128.png",silent:!t,requireInteraction:!1,type:"basic",priority:t?1:0};return delete s.silent,delete s.requireInteraction,r.notifications.create("",s)}},function(e,t,s){"use strict";const r=s(2),n=s(9),o=s(23),a=s(3),i=s(6),c=s(1),g=s(27),l=s(28);e.exports=(e,t,s)=>{const u=(new Date).getTime();let m,d=s,f=!1;d[`tabData-${t?.id}`]||(d[`tabData-${t.id}`]={});const p=d[`tabData-${t.id}`];return d[`tabData-${t?.id}`]?.lastAction?(m=(u-d[`tabData-${t.id}`].lastAction)/1e3,f=Math.round(m)>=r.ResendPushTimeout):f=!0,f?(p.lastAction=u,n({[`tabData-${t?.id}`]:p},d).then((()=>(new i).request2FAToken(d.extensionID,e))).then((e=>(p.requestID=e.token_request_id,n({[`tabData-${t?.id}`]:p},d)))).then((s=>(d=s,o(d,t?.id,{action:!0,timeout:!0,login:!0,requestID:d[`tabData-${t?.id}`].requestID,notifications:{timeout:r.Texts.Error.PushExpired(e),error:r.Texts.Error.General}})))).then((e=>e.connect())).then((()=>g(t?.id,{action:"getActiveElement"}))).then((e=>l(e,t?.id,d))).catch((async e=>(await c("error",5,e,p?.url),a.show(r.Texts.Error.UndefinedError,t?.id))))):1<m?a.show(r.Texts.Warning.TooSoon(m),t?.id):void 0}},function(e,t,s){"use strict";const r=s(2),n=s(0),{handleConfigurationRequest:o,handleLoginRequest:a}=s(71),i=s(3),c=s(14),g=s(10),l=s(25),u=s(26),m=s(1);e.exports=function(e,t){let s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{action:!0,timeout:!0,login:!0,requestID:null,notifications:{timeout:r.Texts.Error.Timeout,error:r.Texts.Error.General}};return new Promise(((d,f)=>{let p;const x={},h=(e,s)=>l(e,s,t,x,p),A=e=>u(e,t,x,p);return x.connect=()=>(x.ws={},x.ws=s.login?new WebSocket(`wss://ws.2fas.com/browser_extensions/${e.extensionID}/2fa_requests/${s.requestID}`):new WebSocket(`wss://ws.2fas.com/browser_extensions/${e.extensionID}`),x.ws.onopen=()=>(p=setTimeout((()=>(g(x),console.warn("WebSocket Timeout"),s.timeout?i.show(s.notifications.timeout,t):i.showWithoutTimeout(s.notifications.timeout,t),s.login&&c(t,s.requestID),f(new Error("timeout")))),6e4*r.WebSocketTimeout-100),n.tabs.onRemoved.addListener(A),n.tabs.onUpdated.addListener(h),!0),x.ws.onerror=async e=>(n.tabs.onRemoved.removeListener(A),n.tabs.onUpdated.removeListener(h),clearTimeout(p),await m("error",11,e,"WebSocket channel error"),f(e)),x.ws.onclose=()=>{n.tabs.onRemoved.removeListener(A),n.tabs.onUpdated.removeListener(h),clearTimeout(p)},x.ws.onmessage=async e=>{const s=JSON.parse(e.data);switch(s.event){case"browser_extensions.pairing.success":return o(t,s),g(x),n.tabs.onRemoved.removeListener(A),n.tabs.onUpdated.removeListener(h),clearTimeout(p),!0;case"browser_extensions.device.2fa_response":return a(t,s),g(x),n.tabs.onRemoved.removeListener(A),n.tabs.onUpdated.removeListener(h),clearTimeout(p),!0;case"browser_extensions.pairing.failure":return await m("error",12,s,"browser_extensions.pairing.failure"),i.show(r.Texts.Error.WebSocket,t),g(x),n.tabs.onRemoved.removeListener(A),n.tabs.onUpdated.removeListener(h),clearTimeout(p),!0;default:throw n.tabs.onRemoved.removeListener(A),n.tabs.onUpdated.removeListener(h),await m("error",13,s,"subscribeChannel event default"),new Error("Unknown message")}},x),d(x)}))}},function(e,t,s){"use strict";const r=s(0),n=s(2),o=s(3);e.exports=(e,t)=>r.tabs.sendMessage(e,t).then((t=>!!t&&("notification"===t?.status&&o.show({Title:t.title,Message:t.message},e)))).catch((t=>{if(t.toString().includes("Receiving end does not exist"))return o.show(n.Texts.Error.LackOfTab,e)}))},function(e,t,s){"use strict";const r=s(10);e.exports=(e,t,s,n,o)=>!(!t.url||"complete"===!t.status||"loading"===!t.status)&&void(e===s&&(clearTimeout(o),r(n)))},function(e,t,s){"use strict";const r=s(10);e.exports=(e,t,s,n)=>{e===t&&(clearTimeout(n),r(s))}},function(e,t,s){"use strict";const r=s(0);e.exports=async(e,t)=>{const s=await r.webNavigation.getAllFrames({tabId:e});return Promise.all(s.map((s=>r.tabs.sendMessage(e,t,{frameId:s.frameId}).catch((()=>Promise.resolve(!1)))))).then((e=>e.map((e=>!!e&&("activeElement"===e?.status&&e))))).catch((()=>!1))}},function(e,t,s){"use strict";const r=s(2),n=s(3),o=s(9);e.exports=async(e,t,s)=>{let a=[];if(e&&0<e.length&&(a=e.filter((e=>e.id&&("input"===e.nodeName||"textarea"===e.nodeName)))),0<a.length){const e=s[`tabData-${t}`]||{};return e.lastFocusedInput=a[0].id,await o({[`tabData-${t}`]:e},s),n.show(r.Texts.Success.PushSent,t)}return n.show(r.Texts.Success.PushSentClipboard,t)}},function(e,t,s){"use strict";const r=s(2),n=s(1),o=s(4),a=s(3),i=s(24);e.exports=e=>o(["nativePush"]).then((t=>t.nativePush?i(e?.id,{action:"notificationInfo"}):Promise.resolve())).catch((async t=>(await n("error",10,t,e?.url),a.show(r.Texts.Error.UndefinedError,e?.id))))},function(e,t,s){"use strict";const r=s(0),n=s(21),o=s(2);e.exports=async e=>{if(!e||0>parseInt(e,10))return!0;let t;return t=await r.browserAction.getTitle({tabId:e}),t!==r.i18n.getMessage("inActiveTabInfo")||(n(o.Texts.Error.InactiveTab,!0),!1)}},function(e,t,s){"use strict";const r=s(4),n=s(7),o=s(8),a=s(1);e.exports=e=>r(null).then((t=>!(t.browserInfo&&t.keys&&t?.keys?.publicKey&&t?.keys?.privateKey&&t?.extensionID)&&n(e).then((()=>o())).catch((e=>a("error",9,e,"onInstalled"))))).catch((e=>a("error",35,e,"checkSafariStorage")))},function(e,t,s){"use strict";const r=s(0),n=s(4);e.exports=async function(e){let t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],s=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];const o=await(async(e,t)=>{let s=0,o="",a="";{const e=await n(["extIcon"]);e&&e?.extIcon&&!isNaN(e.extIcon)&&(s=parseInt(e.extIcon,10),s>2&&(s=0)),0!==s&&(o=`_${s}`),a=t?o:`${o}gray`}const i={path:{16:r.runtime.getURL(`images/icons/icon16${a}.png`),32:r.runtime.getURL(`images/icons/icon32${a}.png`),48:r.runtime.getURL(`images/icons/icon48${a}.png`),96:r.runtime.getURL(`images/icons/icon96${a}.png`),128:r.runtime.getURL(`images/icons/icon128${a}.png`)}};return e&&(i.tabId=e),i})(e,t),a=t?"2FAS - Two Factor Authentication":r.i18n.getMessage("inActiveTabInfo");r.browserAction.setIcon(o),(t||!t&&s)&&await r.browserAction.setTitle({tabId:e,title:a})}},function(e,t,s){"use strict";const r=s(4);e.exports=()=>r("extensionID").then((()=>{}))},function(e,t,s){"use strict";const r=s(0),{loadFromLocalStorage:n,saveToLocalStorage:o}=s(5),a=s(35);e.exports=()=>n(["contextMenu"]).then((e=>"contextMenu"in e?e:o({contextMenu:!0},e))).then((e=>{if(e.contextMenu){const e={title:r.i18n.getMessage("shortcutDesc"),id:"twofas-context-menu",contexts:["page","editable"],enabled:!0,type:"normal",visible:!0,icons:{16:"/images/icons/icon16.png",32:"/images/icons/icon32.png"}};r.contextMenus.removeAll(),r.contextMenus.create(e)}a()})).catch((()=>{}))},function(e,t,s){"use strict";const r=s(0);e.exports=()=>{r.contextMenus.create({title:r.i18n.getMessage("options"),id:"twofas-firefox-options-menu",contexts:["browser_action"],enabled:!0,type:"normal",visible:!0})}},function(e,t,s){"use strict";const r=s(0);e.exports=()=>{let e=r.i18n.getMessage("unknownOS");return navigator.userAgentData?e=navigator.userAgentData.platform:(-1!==navigator.userAgent.indexOf("Windows")&&(e="Windows"),-1!==navigator.userAgent.indexOf("Mac")&&(e="macOS"),-1!==navigator.userAgent.indexOf("X11")&&(e="UNIX"),-1!==navigator.userAgent.indexOf("Linux")&&(e="Linux")),e}},function(e,t,s){"use strict";const r=s(1),{updateBrowserExtension:n,updateIncognitoAccess:o,verifyStorageIntegrity:a}=s(72);e.exports=e=>a(e).then((()=>n(e))).then(o).catch((e=>r("error",6,e,"updateBrowserInfo")))},function(e,t,s){"use strict";const r=s(0);e.exports=(e,t,s)=>r.tabs.sendMessage(t,{action:"notification",title:e.Title,message:e.Message,timeout:s})},function(e,t,s){"use strict";const r=s(40);e.exports=(e,t)=>{const s={title:e.Title,message:e.Message,timeout:t};return r(s)}},function(e,t,s){"use strict";const r=s(41),{createElement:n,createSVGElement:o,createTextElement:a}=s(70),i=s(46),c=s(13);e.exports=e=>{if(r())return!1;let t={container:document.querySelector(c.notification.container),notification:null,firstCol:null,logo:null,secondCol:null,header:null,h3:null,notificationText:null,p:null};t.container||(t.container=n("div","twofas-be-notifications"),window.top.document.body.appendChild(t.container)),t.notification=n("div","twofas-be-notification"),t.firstCol=n("div","twofas-be-col"),t.logo=o(i),t.firstCol.appendChild(t.logo),t.notification.appendChild(t.firstCol),t.secondCol=n("div","twofas-be-col"),t.header=n("div","twofas-be-notification-header"),t.h3=a("h3",e.title),t.header.appendChild(t.h3),t.secondCol.appendChild(t.header),t.notificationText=n("div","twofas-be-notification-text"),t.p=a("p",e.message),t.notificationText.appendChild(t.p),t.secondCol.appendChild(t.notificationText),t.notification.appendChild(t.secondCol),t.container.appendChild(t.notification),setTimeout((()=>t.notification.classList.add("visible")),300),window.addEventListener("beforeunload",(()=>{t&&t.notification&&t.notification.classList.remove("visible"),setTimeout((()=>{t&&t.notification&&(t.notification.classList.add("hidden"),t=null)}),300)})),e.timeout&&(setTimeout((()=>{t&&t.notification&&t.notification.classList.remove("visible")}),5300),setTimeout((()=>{t&&t.notification&&(t.notification.classList.add("hidden"),t=null)}),5600))}},function(e){"use strict";e.exports=()=>window.location!==window.parent.location},function(e){"use strict";e.exports=function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";const s=document.createElement(e);return s.className=t,s}},function(e){"use strict";e.exports=(e,t)=>{const s=document.createElement("img");return s.src=e,s.alt=t,s}},function(e){"use strict";e.exports=e=>{const t=document.createElement("svg");return t.innerHTML=e.trim(),t.firstChild}},function(e){"use strict";e.exports=function(e,t){let s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";const r=document.createElement(e);r.className=s;const n=document.createTextNode(t);return r.appendChild(n),r}},function(e){e.exports='<svg fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.064 28.05 15.179 33.3a1.873 1.873 0 0 1-2.068.01L5.036 28.04C1.89 25.983 0 22.512 0 18.783V6.015c0-1.67 1.14-3.135 2.768-3.57L10.153.497a15.14 15.14 0 0 1 7.694 0l7.385 1.948A3.699 3.699 0 0 1 28 6.015v12.837c.01 3.69-1.849 7.13-4.936 9.198Z" fill="#E20613"></path><path d="M20.535 11.256H7.465c-1.03 0-1.869-.83-1.869-1.85 0-1.018.84-1.849 1.869-1.849h13.07c1.03 0 1.87.83 1.87 1.85a1.85 1.85 0 0 1-1.87 1.849ZM14 14.955c0-1.019-.84-1.85-1.868-1.85H7.465c-1.03 0-1.869.831-1.869 1.85 0 1.018.84 1.849 1.869 1.849h4.667c1.039 0 1.868-.83 1.868-1.85Zm-4.666 5.548c0-1.019-.84-1.85-1.87-1.85-1.028 0-1.868.831-1.868 1.85 0 1.018.84 1.85 1.869 1.85 1.04 0 1.869-.832 1.869-1.85Z" fill="#fff"></path></svg>'},function(e,t,s){"use strict";const r=s(0);e.exports=e=>{const t={title:e.Title,message:e.Message,iconUrl:"../images/icons/icon128.png",silent:!1,requireInteraction:!0,type:"basic",priority:2};return delete t.silent,delete t.requireInteraction,r.notifications.create("",t)}},function(e,t,s){"use strict";const r=s(2),n=s(49),o=s(3),{loadFromLocalStorage:a,saveToLocalStorage:i}=s(5),c=s(1);e.exports=(e,t)=>a(["configured","devices"]).then((e=>e.configured?e:i({configured:!0},e))).then((e=>{let s=[],r=!1;const{device_id:n,device_public_key:o}=t;return e.devices&&(s=e.devices),s.map((e=>(e.device_id===n&&(r=!0),e))),r?e:(s.push({device_id:n,device_public_key:o}),i({devices:s},e))})).then(n).catch((async t=>(await c("error",7,t,"configurationRequest"),o.show(r.Texts.Error.UndefinedError,e))))},function(e,t,s){"use strict";const r=s(13);e.exports=()=>{document.querySelector(r.installPage.newDevice).classList.add("hidden"),document.querySelector(r.installPage.configured).classList.remove("hidden"),"undefined"!=typeof window&&window.scrollTo(0,0)}},function(e,t,s){"use strict";const r=s(0);e.exports=()=>r.storage.local.clear().catch((e=>{throw console.error({err:e}),new Error(e)}))},function(e,t,s){"use strict";const r=s(0);e.exports=e=>r.storage.local.remove(e.toString()).then((e=>e)).catch((e=>{throw console.error({err:e}),new Error(e)}))},function(e,t,s){"use strict";const r=s(0),n=s(2),o=s(14),a=s(3),i=s(15),c=s(4),g=s(1),l=s(24);e.exports=(e,t)=>{const s=new i;return r.tabs.get(e).then((()=>c(["keys"]))).then((e=>{const t=s.stringToArrayBuffer(e.keys.privateKey);return s.importKey(t,"pkcs8",["decrypt"])})).then((e=>s.decrypt(e,s.stringToArrayBuffer(t.token)))).then((e=>s.decodeText(e))).then((s=>{const r=t;return r.token=s,l(e,{action:"inputToken",...r})})).then((()=>o(e,t.token_request_id))).catch((async s=>s.toString().includes("No tab with id")||s.toString().includes("Invalid tab ID")?o(e,t.token_request_id).then((()=>a.show(n.Texts.Error.LackOfTab,e))):(await g("error",8,s,"handleLoginRequest"),a.show(n.Texts.Error.UndefinedError,e))))}},function(e){"use strict";e.exports=[]},function(e,t,s){"use strict";const r=s(0),n=s(12);e.exports=e=>"tokenRequest"===e&&r.tabs.query({active:!0,currentWindow:!0}).then((e=>n(e[0])))},function(e,t,s){"use strict";const r=s(17);e.exports=e=>{if("2FAS"!==e.name)return!1;const t=e=>{e.onMessage.removeListener(s),e.onDisconnect.removeListener(t),e._timer&&clearTimeout(e._timer),e=void 0},s=(e,t)=>"openBrowserPage"===e.action&&e.url?r(e.url):setTimeout((()=>{try{return t.postMessage({msg:"pong"})}catch(e){}}),1e4);e.onMessage.addListener(s),e.onDisconnect.addListener(t),e._timer=setTimeout((e=>{e.onDisconnect.removeListener(t),e.onMessage.removeListener(s),e._timer&&clearTimeout(e._timer),e.disconnect(),e=void 0}),25e4,e)}},function(e,t,s){"use strict";const r=s(0),n=s(12),o=s(17);e.exports=(e,t)=>"twofas-firefox-options-menu"===e?.menuItemId?o(r.runtime.getURL("/optionsPage/optionsPage.html")):"twofas-context-menu"===e?.menuItemId?n(t):void 0},function(e,t,s){"use strict";const r=s(8),n=s(1),o=s(37),a=(s(34),s(7));s(31);e.exports=(e,t)=>"install"===e?.reason?a(t).then((()=>r())).catch((e=>n("error",9,e,"onInstalled"))):o(t)},function(e,t,s){"use strict";const r=s(2),{loadFromLocalStorage:n,saveToLocalStorage:o}=s(5),a=s(6),i=s(1),c=s(16);e.exports=async e=>{let t;try{t=await n(["extensionID","extensionVersion","browserInfo"])}catch(e){return i("error",27,e,"updateBrowserExtension - storage load")}if(t?.extensionVersion!==r.ExtensionVersion||!t?.browserInfo||t?.browserInfo?.browser_version!==e.browser_version||t?.browserInfo?.name!==e.name){let s=e;const n=c();return s.name=t?.browserInfo?.name||s.name||n.name,(new a).updateBrowserExtension(t.extensionID,s).then((()=>o({browserInfo:s,extensionVersion:r.ExtensionVersion}))).then((()=>{t=null,s=null})).catch((e=>i("error",27,e,"updateBrowserExtension - API call")))}t=null}},function(e,t,s){"use strict";const r=s(0),{loadFromLocalStorage:n,saveToLocalStorage:o}=s(5),a=s(1),i=s(11);e.exports=async()=>{let e=null,t=await r.extension.isAllowedIncognitoAccess();try{e=await n(["incognito"])}catch(e){return a("error",26,e,"updateIncognitoAccess")}if(e.incognito!==t)return o({incognito:t},e).then((()=>{e=null,t=null})).then((()=>r.tabs.query({active:!0}))).then((e=>e.map((e=>i(e.id))))).catch((e=>a("error",26,e,"updateIncognitoAccess")))}},function(e,t,s){"use strict";const r=s(4),n=s(7),o=s(1);e.exports=e=>r(["keys","extensionID"]).then((t=>!!(t.keys&&t?.keys?.publicKey&&t?.keys?.privateKey&&t?.extensionID)||n(e))).catch((e=>o("error",29,e,"verifyStorageIntegrity")))},function(e,t,s){"use strict";const r=s(16),n=s(7),o=s(1),a=s(3);e.exports=(e,t)=>new Promise((s=>{switch(e.action){case"getTabData":{if(!t?.tab?.id)return s({status:"No tabID"});const e=t?.tab?.url||t.url;let r;try{r=new URL(e),r=`${r.protocol}//${r.host}${r.pathname}`}catch(t){r=e}return s({id:t?.tab?.id,url:t?.tab?.url,urlPath:r,status:t?.tab?.status})}case"storageReset":{const e=r();return n(e).then((()=>s(!0))).catch((async e=>await o("error",37,e,"storageReset")))}case"notificationOnBackground":return e.data?a.show(e.data,e.tabID):s({status:"No data"});default:return s({status:"Empty action"})}}))},function(e,t,s){"use strict";const{loadFromLocalStorage:r,removeFromLocalStorage:n}=s(5),o=s(1);e.exports=()=>r(null).then((e=>Object.keys(e).map((t=>{if("tabData"===t||"tabData-"===t.substring(0,8)){return 15<parseInt(Math.abs(new Date(e[t].timestamp).getTime()-(new Date).getTime())/6e4%60)?n(t):null}return null})))).catch((e=>o("error",1,e,"onStartup")))},function(e,t,s){"use strict";const r=s(11);e.exports=e=>{let{tabId:t}=e;return r(t)}},function(e,t,s){"use strict";const{loadFromLocalStorage:r,removeFromLocalStorage:n}=s(5),o=s(1),a=s(6);e.exports=async e=>{let t;try{t=await r([`tabData-${e}`,"extensionID"])}catch(s){return o("error",2,s,t[`tabData-${e}`]?.url)}if(t[`tabData-${e}`]&&t[`tabData-${e}`]?.requestID&&await(new a).close2FARequest(t.extensionID,t[`tabData-${e}`].requestID,!1),t[`tabData-${e}`])return n(`tabData-${e}`).then((()=>{t=null})).catch((s=>o("error",2,s,t[`tabData-${e}`]?.url)))}},function(e,t,s){"use strict";const r=s(0),{loadFromLocalStorage:n,saveToLocalStorage:o}=s(5),a=s(1),i=s(6),c=s(11);e.exports=async(e,t)=>{if(!t)return!1;if(e&&("complete"===t?.status||t?.favIconUrl||t?.isArticle)&&await c(e),"complete"!==t?.status)return!1;let s;try{s=await n([`tabData-${e}`,"extensionID"])}catch(t){await a("error",3,t,s[`tabData-${e}`]?.url)}if(s[`tabData-${e}`]&&s[`tabData-${e}`].requestID&&await(new i).close2FARequest(s.extensionID,s[`tabData-${e}`].requestID,!1),s[`tabData-${e}`])try{await o({[`tabData-${e}`]:{}}),s=null}catch(t){await a("error",3,t,s[`tabData-${e}`]?.url)}return r.tabs.sendMessage(e,{action:"pageLoadComplete"}).catch((()=>{}))}},,function(e,t,s){"use strict";t.ab2b64=s(18),t.b642ab=s(19),t.browserAction=s(12),t.browserActionConfigured=s(20),t.checkIconTitleText=s(30),t.checkSafariStorage=s(31),t.checkTabCS=s(11),t.closeRequest=s(14),t.closeWSChannel=s(10),t.createContextMenus=s(34),t.createFirefoxOptionsMenu=s(35),t.Crypt=s(15),t.dummyGetLocalStorage=s(33),t.generateDefaultStorage=s(7),t.getBrowserInfo=s(16),t.getOSName=s(36),t.handleFrontElement=s(28),t.initBEAction=s(22),t.onCommand=s(54),t.onConnect=s(55),t.onContextMenuClick=s(56),t.onInstalled=s(57),t.onMessage=s(61),t.onStartup=s(62),t.openBrowserPage=s(17),t.openInstallPage=s(8),t.sendMessageToAllFrames=s(27),t.sendNotificationInfo=s(29),t.setIcon=s(32),t.subscribeChannel=s(23),t.updateBrowserInfo=s(37),t.wsTabChanged=s(25),t.wsTabClosed=s(26)},function(e){"use strict";e.exports=JSON.parse('{"errorGeneralTitle":"Error","errorGeneralMessage":"Please refresh and try again.","errorUndefinedErrorTitle":"Something went wrong","errorUndefinedErrorMessage":"Please refresh and try again.","errorTimeoutTitle":"Timeout","errorTimeoutMessage":"Closed connection due to a time limit. Please click regenerate button to try again.","errorPushExpiredTitle":"Push expired for DOMAIN","errorPushExpiredMessage":"Please try again.","errorWebSocketTitle":"WebSocket Error","errorWebSocketMessage":"Something went wrong with the WebSocket request. Please try again.","errorOnInstallErrorTitle":"Something went wrong","errorOnInstallErrorMessage":"Please restart your browser or reinstall the extension.","errorExtNameRequiredTitle":"Extension name required","errorExtNameRequiredMessage":"Please enter the extension name.","errorExtNameMinLengthTitle":"Extension name is too short","errorExtNameMinLengthMessage":"Please enter the extension name with at least 3 characters.","errorExtNameMaxLengthTitle":"Extension name is too long","errorExtNameMaxLengthMessage":"Please enter the extension name with no more than 32 characters.","errorConfigFirstTitle":"Configuration required","errorConfigFirstMessage":"Please configure 2FAS Extension first.","errorRemoveDeviceBadDataTitle":"Device data error","errorRemoveDeviceBadDataMessage":"Please refresh and try again.","errorRemoveDomainBadDataTitle":"Domain data error","errorRemoveDomainBadDataMessage":"Please refresh and try again.","errorStorageCorruptedTitle":"Extension storage is corrupted","errorStorageCorruptedMessage":"We will try to fix it for you. Please wait.","errorInactiveTabTitle":"Inactive tab","errorInactiveTabMessage":"Please refresh this tab to use the 2FAS Browser Extension.","errorLackOfTabTitle":"Your tab has been closed","errorLackOfTabMessage":"The request will be ignored","errorInputNotExistTitle":"Input element does not exists","errorInputNotExistMessage":"Please refresh and try again.","errorStorageIntegrityTitle":"Browser Extension data error","errorStorageIntegrityMessage":"Please reinstall browser extension or contact with 2FAS Support on Discord","warningTooSoonTitle":"Wait a moment","warningTooSoonMessage":"Please wait DIFF seconds before sending another request.","successPushSentTitle":"Push sent","successPushSentMessage":"Please check your phone and accept your login request.","successPushSentClipboardTitle":"Push sent","successPushSentClipboardMessage":"Please check your phone and accept your login request. Copy your token and paste it into the correct input on the website.","successExtNameUpdatedTitle":"Success","successExtNameUpdatedMessage":"Extension name updated","successDeviceDisconnectedTitle":"Success","successDeviceDisconnectedMessage":"Device disconnected","successSafariResetTitle":"Success","successSafariResetMessage":"Browser Extension configuration removed","successDomainExcludedTitle":"Success","successDomainExcludedMessage":"Domain added to excluded list","successDomainExcludedRemovedTitle":"Success","successDomainExcludedRemovedMessage":"Domain removed from excluded list","infoNativeNotificationsTitle":"2FAS Notifications","infoNativeNotificationsMessage":"From now on, you\'ll be receiving system notifications instead of 2FAS custom ones. If you\'d like to change this, go to the ","infoEnabledNativeNotifications":"extension\'s settings","infoUnsupportedProtocolTitle":"Info","infoUnsupportedProtocolMessage":"Only HTTP and HTTPS protocols are supported by 2FAS Extension","infoBrowserActionWithoutTabTitle":"Info","infoBrowserActionWithoutTabMessage":"Using outside the browser is not supported by 2FAS Extension","infoCopiedToClipboardTitle":"Successfully copied to clipboard","infoCopiedToClipboardMessage":"You can now paste the token into the input field","infoTestTitle":"2FAS Notification","infoTestMessage":"Hi! This is just a test"}')},function(e,t,s){"use strict";t.sendFrontEndPushAction=s(38),t.showFrontEndPush=s(39),t.showNativePush=s(21),t.showNativePushWithoutTimeout=s(47)},function(e,t,s){"use strict";t.createElement=s(42),t.createImageElement=s(43),t.createSVGElement=s(44),t.createTextElement=s(45)},function(e,t,s){"use strict";t.handleConfigurationRequest=s(48),t.handleLoginRequest=s(52)},function(e,t,s){"use strict";t.updateBrowserExtension=s(58),t.updateIncognitoAccess=s(59),t.verifyStorageIntegrity=s(60)},function(e,t,s){"use strict";t.onTabActivated=s(63),t.onTabRemoved=s(64),t.onTabUpdated=s(65)}],t={};function s(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,s),o.exports}!function(){"use strict";const e=s(0),{onConnect:t,onCommand:r,onContextMenuClick:n,onInstalled:o,getBrowserInfo:a,onMessage:i,onStartup:c,browserAction:g,createContextMenus:l,dummyGetLocalStorage:u,setIcon:m}=s(67),{onTabRemoved:d,onTabUpdated:f,onTabActivated:p}=s(73),x=a();l(),e.runtime.onInstalled.addListener((e=>o(e,x))),e.runtime.onMessage.addListener(i),e.runtime.onStartup.addListener(c),e.runtime.onConnect.addListener(t),e.browserAction.onClicked.addListener(g),e.commands.onCommand.addListener(r),e.contextMenus.onClicked.addListener(n),e.tabs.onRemoved.addListener(d),e.tabs.onUpdated.addListener(f),e.tabs.onActivated.addListener(p),setInterval((()=>u()),25e3),m(null,!1,!1)}()}();