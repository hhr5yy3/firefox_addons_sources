/*! For license information please see content.js.LICENSE.txt */
(()=>{var e={96233:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CHROME_BROWSER="CHROME_BROWSER",e.FIREFOX_BROWSER="FIREFOX_BROWSER",e.EDGE_BROWSER="EDGE_BROWSER",e.SAFARI_BROWSER="SAFARI_BROWSER",e.OPERA_BROWSER="OPERA_BROWSER",e.CHROMIUM_BROWSER="CHROMIUM_BROWSER"}(t.BrowserEnum||(t.BrowserEnum={}))},89717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}t.CoreException=n},50867:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(89717);class r extends i.CoreException{}t.CoreServiceIsNotRegisteredException=r},73266:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(86700),a=(n(96233),n(98573));let c=class{constructor(e){this.browserEnum=e,this.isOnInstalledFired=!1,this.listeners=[],chrome.runtime.onInstalled.addListener((e=>{this.isOnInstalledFired=!0,this.installedDetails=e,this.handleOnInstall()}))}onInstall(e){this.listeners.push({callback:e}),this.isOnInstalledFired&&this.handleOnInstall()}setUninstallURL(e,t){chrome.runtime.setUninstallURL(e,t)}manifest(){return chrome.runtime.getManifest()}browser(){return this.browserEnum}handleOnInstall(){for(const e of this.listeners)e.callback(this.installedDetails);this.listeners=[]}};c=i([s.injectable(),o(0,s.inject(a.MARIO_TYPES.BROWSER)),r("design:paramtypes",[String])],c),t.Extension=c},99959:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(63442);t.MarioEvent=class{constructor(e,t,n){this.event=e,this.data=t,this.id=n||i.Guid.create().toString()}}},33528:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MarioModule=class{constructor(e){this._core=e}mario(){return this._core}}},98573:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={ALARM_SERVICE:Symbol.for("ALARM_SERVICE"),BROWSER:Symbol.for("BROWSER"),BROWSER_ACTION:Symbol.for("BROWSER_ACTION"),CACHE_SERVICE:Symbol.for("CACHE_SERVICE"),CONTAINER:Symbol.for("CONTAINER"),INTERNAL_DISPATCHER:Symbol.for("INTERNAL_DISPATCHER"),LOCAL_STORAGE_SERVICE:Symbol.for("LOCAL_STORAGE_SERVICE"),LOGGER_SERVICE:Symbol.for("LOGGER_SERVICE"),STORAGE_SERVICE:Symbol.for("STORAGE_SERVICE"),TAB_SERVICE:Symbol.for("TAB_SERVICE"),NAVIGATION_SERVICE:Symbol.for("NAVIGATION_SERVICE"),WEB_REQUEST_SERVICE:Symbol.for("WEB_REQUEST_SERVICE"),PROXY_SERVICE:Symbol.for("PROXY_SERVICE"),EXTENSION_SERVICE:Symbol.for("EXTENSION_SERVICE"),EXTERNAL_DISPATCHER:Symbol.for("EXTERNAL_DISPATCHER"),OMNIBOX_SERVICE:Symbol.for("OMNIBOX_SERVICE"),WINDOW_POST:Symbol.for("WINDOW_POST"),MANAGEMENT:Symbol.for("MANAGEMENT"),PORT_DISPATCHER:Symbol.for("PORT_DISPATCHER")};t.MARIO_TYPES=n},17199:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),n(28660);const r=n(86700),o=n(43473),s=n(48643),a=n(2325),c=n(50867),u=n(73266),h=n(98573),d=n(4731),l=n(23961);t.Mario=class{constructor(e,t={}){this.isInitialized=!1,this._container=t.container?t.container:new r.Container,this._container.bind(h.MARIO_TYPES.BROWSER).toConstantValue(e),this._container.bind(h.MARIO_TYPES.CONTAINER).toConstantValue(this._container);const i=t.logger?t.logger:s.LoggerService,c=t.internalDispatcher?t.internalDispatcher:o.InternalDispatcher,f=t.externalDispatcher?t.externalDispatcher:d.ExternalDispatcher,p=t.tab?t.tab:a.TabService;this.registerService(h.MARIO_TYPES.LOGGER_SERVICE,i),this.logger().log(`Core: this build is for "${e.toString()}"`),this.registerService(h.MARIO_TYPES.EXTENSION_SERVICE,u.Extension),this.extension(),this.registerService(h.MARIO_TYPES.INTERNAL_DISPATCHER,c),this.registerService(h.MARIO_TYPES.EXTERNAL_DISPATCHER,f),this.registerService(h.MARIO_TYPES.PORT_DISPATCHER,l.PortDispatcher),this.registerService(h.MARIO_TYPES.TAB_SERVICE,p),this.getService(h.MARIO_TYPES.PORT_DISPATCHER);n.g.window.mario=this,this.coreInitialized()}registerModule(e,t){return i(this,void 0,void 0,(function*(){const n=new e(this);this.logger().log(`Core: registering a module "${n.name()}"`);try{yield n.register(t),this.logger().log(`Core: the module "${n.name()}" is registered`)}catch(e){this.logger().error(e)}}))}registerService(e,t){this.isCoreInitialized()&&this.logger().log(`Core: registered a service "${e.toString()}"`),this.hasService(e)||this._container.bind(e).to(t).inSingletonScope()}getService(e){if(!this.hasService(e)){const t=`Can't get service: service '${e.toString()}' is not registered`;throw this.isCoreInitialized()&&this.logger().warn(t),new c.CoreServiceIsNotRegisteredException(t)}return this._container.get(e)}hasService(e){return this._container.isBound(e)}internalDispatcher(){return this.getService(h.MARIO_TYPES.INTERNAL_DISPATCHER)}externalDispatcher(){return this.getService(h.MARIO_TYPES.EXTERNAL_DISPATCHER)}portDispatcher(){return this.getService(h.MARIO_TYPES.PORT_DISPATCHER)}logger(){return this.getService(h.MARIO_TYPES.LOGGER_SERVICE)}container(){return this._container}tabService(){return this.getService(h.MARIO_TYPES.TAB_SERVICE)}extension(){return this.getService(h.MARIO_TYPES.EXTENSION_SERVICE)}coreInitialized(){this.isInitialized=!0}isCoreInitialized(){return this.isInitialized}}},80187:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BEFORE_CLEAR_CACHE="BEFORE_CLEAR_CACHE",e.AFTER_CLEAR_CACHE="AFTER_CLEAR_CACHE"}(t.CacheEvents||(t.CacheEvents={}))},22344:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(86700),c=n(99959),u=n(98573),h=n(80187);let d=class{constructor(e,t){this.logger=e,this.dispatcher=t}clear(){return s(this,void 0,void 0,(function*(){yield this.dispatcher.emit(new c.MarioEvent(h.CacheEvents.BEFORE_CLEAR_CACHE)),yield this.cacheRemoveAll(),yield this.dispatcher.emit(new c.MarioEvent(h.CacheEvents.AFTER_CLEAR_CACHE))}))}cacheRemoveAll(){return s(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{chrome.browsingData.removeCache({},(()=>{e()}))}catch(e){this.logger.error(e),t()}}))}))}};d.EVENT_BEFORE_CLEAR_CACHE="beforeClearCache",d.EVENT_AFTER_CLEAR_CACHE="afterClearCache",d=i([a.injectable(),o(0,a.inject(u.MARIO_TYPES.LOGGER_SERVICE)),o(1,a.inject(u.MARIO_TYPES.INTERNAL_DISPATCHER)),r("design:paramtypes",[Object,Object])],d),t.CacheService=d},27932:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ContentDispatcherService=class{constructor(){this.listeners={},this.listenersIndex={},this.counter=0,chrome.runtime.onMessage.addListener((e=>{if(!this.isEventMessage(e))return;if(!this.hasEventListeners(e.event))return;const t=[],n=this.listeners[e.event];for(const i of Object.keys(n)){const r=(0,n[i])(e);t.push(r)}return Promise.all(t).then(),!1}))}emit(e,t){chrome.runtime.sendMessage(e,t)}on(e,t){const n=++this.counter;return this.hasEventListeners(e)||(this.listeners[e]={}),this.listeners[e][n]=t,this.listenersIndex[n]=e,n}hasEventListeners(e){return void 0!==this.listeners[e]}removeListener(e){if(this.hasListener(e)){const t=this.listenersIndex[e];delete this.listeners[t][e],delete this.listenersIndex[e]}}hasListener(e){return this.listenersIndex.hasOwnProperty(e)}getListener(e){if(!this.hasListener(e))throw new Error("boom");const t=this.listenersIndex[e];return this.listeners[t][e]}isEventMessage(e){return"object"==typeof e&&"string"==typeof e.event}}},81256:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}t.ExternalDispatcherException=n},39205:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(81256);class r extends i.ExternalDispatcherException{}t.ExternalDispatcherListenerIsNotFoundException=r},4731:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(86700),a=n(98573),c=n(99681),u=n(39205);let h=class{constructor(e,t,n){this.container=e,this.loggerService=t,this.tabService=n,this.listeners={},this.listenersIndex={},this.counter=0,this.beforeEmitListeners=[],chrome.runtime.onMessage.addListener(((e,t,n)=>{if(this.internalEmit(c.ExternalDispatcherEvents.ON_ANY_MESSAGE,e,t,n),this.isEventMessage(e)){const i=e.event;this.loggerService.event("ExternalDispatcher: got",e),this.internalEmit(i,e,t,n)}return!0}))}emit(e,t){this.loggerService.event("ExternalDispatcher: emit",t);try{this.beforeEmitListeners.forEach((n=>n(e,t)))}catch(e){this.loggerService.error(e)}this.tabService.sendMessage(e,t)}on(e){const t=this.bind(e);return this.loggerService.log(`ExternalDispatcher: register an event listener "${t.on()}"`),this.addEventListener(t.on(),t)}onBeforeEmit(e){this.beforeEmitListeners.push(e)}removeListener(e){if(!this.hasListeners(e))throw new u.ExternalDispatcherListenerIsNotFoundException(`Listener with id "${e}" is not found`);this.loggerService.log(`ExternalDispatcher: remove an event listener "${e}"`);const t=this.listenersIndex[e];delete this.listeners[t][e],delete this.listenersIndex[e]}getListener(e){if(!this.hasListeners(e))throw new u.ExternalDispatcherListenerIsNotFoundException(`Listener with id "${e}" is not found`);const t=this.listenersIndex[e];return this.listeners[t][e]}hasListeners(e){return void 0!==this.listenersIndex[e]}getEventListeners(e){return this.hasEventListeners(e)?this.listeners[e]:[]}hasEventListeners(e){return void 0!==this.listeners[e]}isEventMessage(e){return"object"==typeof e&&"string"==typeof e.event}internalEmit(e,t,n,i){if(!this.hasEventListeners(e))return;const r=[],o=this.listeners[e];for(const e of Object.keys(o)){const s=o[e],a=s.handle.apply(s,[t,n,i]);r.push(a)}Promise.all(r).then()}addEventListener(e,t){void 0===this.listeners[e]&&(this.listeners[e]={});const n=++this.counter;return this.listeners[e][n]=t,this.listenersIndex[n]=e,n}bind(e){return this.container.bind(e).toSelf().inSingletonScope(),this.container.get(e)}};h=i([s.injectable(),o(0,s.inject(a.MARIO_TYPES.CONTAINER)),o(1,s.inject(a.MARIO_TYPES.LOGGER_SERVICE)),o(2,s.inject(a.MARIO_TYPES.TAB_SERVICE)),r("design:paramtypes",[Object,Object,Object])],h),t.ExternalDispatcher=h},99681:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ON_ANY_MESSAGE="ON_ANY_MESSAGE"}(t.ExternalDispatcherEvents||(t.ExternalDispatcherEvents={}))},25721:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{}t.InternalDispatcherException=n},52290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(25721);class r extends i.InternalDispatcherException{}t.InternalDispatcherListenerIsNotRegisteredException=r},43473:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(86700),c=n(98573),u=n(52290);let h=class{constructor(e,t){this.container=e,this.loggerService=t,this.counter=0,this.listeners={},this.listenersIndex={},this.onBeforeEmitListeners=[]}emit(e){return s(this,void 0,void 0,(function*(){this.loggerService.event("InternalDispatcher",e);try{this.onBeforeEmitListeners.forEach((t=>t(e)))}catch(e){this.loggerService.error(e)}const t=this.getEventListeners(e.event),n=[];for(const i in t){const r=t[i],o=r.handle.apply(r,[e]);n.push(o)}yield Promise.all(n)}))}on(e){this.container.bind(e).toSelf().inSingletonScope();const t=this.container.get(e),n=t.on();this.loggerService.log(`InternalDispatcher: register a listener on event "${n}"`),void 0===this.listeners[n]&&(this.listeners[n]=[]);const i=++this.counter;return this.listenersIndex[i]=n,this.listeners[n][i]=t,i}onBeforeEmit(e){this.onBeforeEmitListeners.push(e)}hasEventListeners(e){return this.listeners.hasOwnProperty(e)&&this.listeners[e].length>0}getEventListeners(e){if(this.hasEventListeners(e)){return this.listeners[e].filter((e=>!!e.handle))}return[]}getListener(e){if(!this.hasListener(e))throw new u.InternalDispatcherListenerIsNotRegisteredException(`a listener with id "${e}" is not registered`);const t=this.listenersIndex[e];return this.listeners[t][e]}removeListener(e){if(!this.hasListener(e))throw new u.InternalDispatcherListenerIsNotRegisteredException(`a listener with id "${e}" is not registered`);const t=this.listenersIndex[e];delete this.listenersIndex[e],delete this.listeners[t][e]}hasListener(e){return this.listenersIndex.hasOwnProperty(e)}};h=i([a.injectable(),o(0,a.inject(c.MARIO_TYPES.CONTAINER)),o(1,a.inject(c.MARIO_TYPES.LOGGER_SERVICE)),r("design:paramtypes",[Object,Object])],h),t.InternalDispatcher=h},48643:function(e,t,n){"use strict";var i,r=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});const o=n(86700),s=n(64530);let a=i=class{constructor(){this.onLogListeners=[],this.onEventListeners=[],this.onErrorListeners=[],this.onWarnListeners=[],this.onFilterLogListeners=[],this.enabled=!0}log(e,t){const n=this.time();n[0]+=`%c[INFO] %c${e}`,n.push(this.color(i.LIGHT_BLUE_COLOR)+this.fontWeight(600)),n.push(this.color(i.BLACK_COLOR));let r="";void 0!==t&&(r=s(t,null,2));const o=this.prepareOutput(n[0],r);!this.filterInfo(o)&&(this.enabled,this.enabled),this.handleOnLogListeners(e,t,o)}event(e,t){const n=this.time();n[0]+=`%c[EVENT ${t.event}] %c${e}`,n.push(this.color(i.LIGHT_GREEN_COLOR)+this.fontWeight(600)),n.push(this.color(i.BLACK_COLOR)),this.enabled;const r=s(t.data,null,2);this.enabled,this.handleOnEventListeners(e,t,this.prepareOutput(n[0],r))}warn(e,t){const n=this.time();n[0]+=`%c[WARN] %c${e}`,n.push(this.color(i.RED_COLOR)+this.fontWeight(600)),n.push(this.color(i.BLACK_COLOR)),this.enabled;let r="";this.enabled&&void 0!==t&&(r=s(t,null,2)),this.handleOnWarnListeners(e,t,this.prepareOutput(n[0],r))}error(e){const t=this.time();t[0]+=`%c[ERROR] %c${e.message}`,t.push(this.color(i.RED_COLOR)+this.fontWeight(600)),t.push(this.color(i.BLACK_COLOR)),this.enabled&&e.stack,this.handleOnErrorListeners(e)}onLog(e){this.onLogListeners.push(e)}onEvent(e){this.onEventListeners.push(e)}onWarn(e){this.onWarnListeners.push(e)}onError(e){this.onErrorListeners.push(e)}onFilterLog(e){this.onFilterLogListeners.push(e)}disable(){this.enabled=!1}enable(){this.enabled=!0}handleOnLogListeners(e,t,n){for(const i of this.onLogListeners)i(e,t,n)}handleOnWarnListeners(e,t,n){for(const i of this.onWarnListeners)i(e,t,n)}handleOnEventListeners(e,t,n){for(const i of this.onEventListeners)i(e,t,n)}handleOnErrorListeners(e,t){for(const n of this.onErrorListeners)n(e,t)}filterInfo(e){for(const t of this.onFilterLogListeners){if(t(e))return!0}return!1}time(){const e=new Date;let t="%c[";return t+=`tz:${e.getTimezoneOffset()} `,t+=`${this.pad(e.getDate().toString(),2)}/`,t+=`${this.pad(e.getMonth().toString(),2)}/`,t+=`${e.getFullYear()} `,t+=`${this.pad(e.getHours().toString(),2)}:`,t+=`${this.pad(e.getMinutes().toString(),2)}:`,t+=`${this.pad(e.getSeconds().toString(),2)} `,t+=`${this.pad(e.getMilliseconds().toString(),4)}`,t+="]%c ",[t,this.fontWeight(600),this.color(i.BLACK_COLOR)]}color(e){return`color: ${e};`}fontWeight(e){return`font-weight: ${e};`}pad(e,t,n){const i=n||"0";return e.length>=t?e:new Array(t-e.length+1).join(i)+e}prepareOutput(e,t){return`${e.replace(/%c/g,"")}\n${t}`}};a.BLACK_COLOR="#000",a.RED_COLOR="#f40f3f",a.LIGHT_GREEN_COLOR="#1e9f3e",a.LIGHT_BLUE_COLOR="#4285f4",a=i=r([o.injectable()],a),t.LoggerService=a},37302:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(86700),c=n(18313),u=n(98573),h=n(30818);let d=class{constructor(e){this.dispatcherService=e,this.isListenOnBeforeNavigate=!1,this.isListenOnCommitted=!1,this.isListenOnDOMContentLoaded=!1,this.isListenOnCompleted=!1,this.isListenOnErrorOccurred=!1,this.isListenOnCreatedNavigationTarget=!1,this.isListenOnReferenceFragmentUpdated=!1,this.isListenOnTabReplaced=!1,this.isListenOnHistoryStateUpdated=!1}listenOnBeforeNavigate(){this.isListenOnBeforeNavigate||(this.isListenOnBeforeNavigate=!0,chrome.webNavigation.onBeforeNavigate.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_BEFORE_NAVIGATE,{details:e});this.dispatcherService.emit(t).then()})))}listenOnCommitted(){this.isListenOnCommitted||(this.isListenOnCommitted=!0,chrome.webNavigation.onCommitted.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_COMMITTED,{details:e});this.dispatcherService.emit(t).then()})))}listenOnDOMContentLoaded(){this.isListenOnDOMContentLoaded||(this.isListenOnDOMContentLoaded=!0,chrome.webNavigation.onDOMContentLoaded.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_DOM_CONTENT_LOADED,{details:e});this.dispatcherService.emit(t).then()})))}listenOnCompleted(){this.isListenOnCompleted||(this.isListenOnCompleted=!0,chrome.webNavigation.onCompleted.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_COMPLETED,{details:e});this.dispatcherService.emit(t).then()})))}listenOnErrorOccurred(){this.isListenOnErrorOccurred||(this.isListenOnErrorOccurred=!0,chrome.webNavigation.onErrorOccurred.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_ERROR_OCCURRED,{details:e});this.dispatcherService.emit(t).then()})))}listenOnCreatedNavigationTarget(){this.isListenOnCreatedNavigationTarget||(this.isListenOnCreatedNavigationTarget=!0,chrome.webNavigation.onCreatedNavigationTarget.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_CREATED_NAVIGATION_TARGET,{details:e});this.dispatcherService.emit(t).then()})))}listenOnReferenceFragmentUpdated(){this.isListenOnReferenceFragmentUpdated||(this.isListenOnReferenceFragmentUpdated=!0,chrome.webNavigation.onReferenceFragmentUpdated.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_REFERENCE_FRAGMNENT_UPDATED,{details:e});this.dispatcherService.emit(t).then()})))}listenOnTabReplaced(){this.isListenOnTabReplaced||(this.isListenOnTabReplaced=!0,chrome.webNavigation.onTabReplaced.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_TAB_REPLACED,{details:e});this.dispatcherService.emit(t).then()})))}listenOnHistoryStateUpdated(){this.isListenOnHistoryStateUpdated||(this.isListenOnHistoryStateUpdated=!0,chrome.webNavigation.onHistoryStateUpdated.addListener((e=>{const t=new c.MarioEvent(h.NavigationServiceEvents.NAVIGATION_ON_HISTORY_STATE_UPDATED,{details:e});this.dispatcherService.emit(t).then()})))}getFrame(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.webNavigation.getFrame(e,(e=>t(e)))}catch(e){n(e)}}))}))}getAllFrames(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.webNavigation.getAllFrames(e,(e=>t(e)))}catch(e){n(e)}}))}))}};d=i([a.injectable(),o(0,a.inject(u.MARIO_TYPES.INTERNAL_DISPATCHER)),r("design:paramtypes",[Object])],d),t.NavigationService=d},30818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NAVIGATION_ON_BEFORE_NAVIGATE="NAVIGATION_ON_BEFORE_NAVIGATE",e.NAVIGATION_ON_COMMITTED="NAVIGATION_ON_COMMITTED",e.NAVIGATION_ON_DOM_CONTENT_LOADED="NAVIGATION_ON_DOM_CONTENT_LOADED",e.NAVIGATION_ON_COMPLETED="NAVIGATION_ON_COMPLETED",e.NAVIGATION_ON_ERROR_OCCURRED="NAVIGATION_ON_ERROR_OCCURRED",e.NAVIGATION_ON_CREATED_NAVIGATION_TARGET="NAVIGATION_ON_CREATED_NAVIGATION_TARGET",e.NAVIGATION_ON_REFERENCE_FRAGMNENT_UPDATED="NAVIGATION_ON_REFERENCE_FRAGMNENT_UPDATED",e.NAVIGATION_ON_TAB_REPLACED="NAVIGATION_ON_TAB_REMOVED",e.NAVIGATION_ON_HISTORY_STATE_UPDATED="NAVIGATION_ON_HISTORY_STATE_UPDATED"}(t.NavigationServiceEvents||(t.NavigationServiceEvents={}))},23961:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}};Object.defineProperty(t,"__esModule",{value:!0});const s=n(86700),a=n(18313),c=n(98573),u=n(95632);let h=class{constructor(e,t,n){this.container=e,this.logger=t,this.dispatcher=n,this.ports={},this.listeners={},this.onBeforeEmitListeners=[],chrome.runtime.onConnect.addListener((e=>{this.ports[e.name]=e,this.logger.log(`Port "${e.name}" is created`),e.onMessage.addListener((t=>{if(t.port=e.name,this.internalEmit(u.PortDispatcherEvents.ON_ANY_MESSAGE,t),this.isEventMessage(t)){const e=t.event;this.internalEmit(e,t)}})),e.onDisconnect.addListener((()=>{this.logger.log(`Port "${e.name}" is disconnected`),delete this.ports[e.name];const t=new a.MarioEvent(u.PortDispatcherEvents.PORT_DISCONNECTED,{name:e.name});this.dispatcher.emit(t).then()}));const t=new a.MarioEvent(u.PortDispatcherEvents.PORT_CONNECTED,{name:e.name});this.dispatcher.emit(t).then()}))}on(e){this.container.bind(e).toSelf().inSingletonScope();const t=this.container.get(e),n=t.on();void 0===this.listeners[n]&&(this.listeners[n]=[]),this.listeners[n].push(t),this.logger.log(`PortDispatcher: register a listener on event "${n}"`)}onBeforeEmit(e){this.onBeforeEmitListeners.push(e)}emit(e,t,n){let i=[];if(t){const e=t;if(this.hasNotPort(e))throw Error(`PortDispatcher: a named port "${e}" is not found`);const n=this.getPort(e);i.push(n)}else i=Object.keys(this.ports).map((e=>this.ports[e]));!n&&this.onBeforeEmitListeners.forEach((t=>{try{t(e)}catch(e){this.logger.error(e)}})),i.forEach((t=>t.postMessage(e)))}hasPort(e){return!!this.ports[e]}hasNotPort(e){return!this.hasPort(e)}disconnectPort(e){this.hasNotPort(e)&&this.logger.log(`Port "${e}" cannot be disconnected because it's not registered`);this.ports[e].disconnect()}hasEventListeners(e){return this.listeners[e]&&this.listeners[e].length>0}isEventMessage(e){return"object"==typeof e&&"string"==typeof e.event}getPort(e){return this.ports[e]}internalEmit(e,t){this.hasEventListeners(e)&&this.listeners[e].forEach((e=>{try{e.handle(t).then()}catch(e){this.logger.error(e)}}))}};h=i([s.injectable(),o(0,s.inject(c.MARIO_TYPES.CONTAINER)),o(1,s.inject(c.MARIO_TYPES.LOGGER_SERVICE)),o(2,s.inject(c.MARIO_TYPES.INTERNAL_DISPATCHER)),r("design:paramtypes",[Object,Object,Object])],h),t.PortDispatcher=h},95632:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.PORT_CONNECTED="PORT_CONNECTED",e.PORT_DISCONNECTED="PORT_DISCONNECTED",e.ON_ANY_MESSAGE="ON_ANY_MESSAGE"}(t.PortDispatcherEvents||(t.PortDispatcherEvents={}))},9297:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const o=n(86700);let s=class{get(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{chrome.storage.local.get(e,(n=>{const i=void 0!==n[e]?n[e]:null;t(i)}))}))}))}set(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{const r={};r[e]=t,chrome.storage.local.set(r,(()=>n()))}))}))}has(e){return r(this,void 0,void 0,(function*(){return null!==(yield this.get(e))}))}remove(e){return r(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.storage.local.remove(e,(()=>t()))}catch(e){n(e)}}))}))}clean(){chrome.storage.local.clear()}};s=i([o.injectable()],s),t.StorageService=s},2325:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(86700),c=n(18313),u=n(98573),h=n(54674);let d=class{constructor(e){this.dispatcherService=e,this.isListenOnCreated=!1,this.isListenOnUpdated=!1,this.isListenOnMoved=!1,this.isListenOnActivated=!1,this.isListenOnHighlighted=!1,this.isListenOnDetached=!1,this.isListenOnAttached=!1,this.isListenOnRemoved=!1,this.isListenOnReplaced=!1,this.isListenOnZoomChange=!1}listenOnCreated(){this.isListenOnCreated||(this.isListenOnCreated=!0,chrome.tabs.onCreated.addListener((e=>{const t=new c.MarioEvent(h.TabServiceEvents.ON_TAB_CREATED,{tab:e});this.dispatcherService.emit(t).then()})))}listenOnUpdated(){this.isListenOnUpdated||(this.isListenOnUpdated=!0,chrome.tabs.onUpdated.addListener(((e,t,n)=>{const i=new c.MarioEvent(h.TabServiceEvents.ON_TAB_UPDATED,{tabId:e,changeInfo:t,tab:n});this.dispatcherService.emit(i).then()})))}listenOnMoved(){this.isListenOnMoved||(this.isListenOnMoved=!0,chrome.tabs.onMoved.addListener(((e,t)=>{const n=new c.MarioEvent(h.TabServiceEvents.ON_TAB_MOVED,{tabId:e,moveInfo:t});this.dispatcherService.emit(n).then()})))}listenOnActivated(){this.isListenOnActivated||(this.isListenOnActivated=!0,chrome.tabs.onActivated.addListener((e=>{const t=new c.MarioEvent(h.TabServiceEvents.ON_TAB_ACTIVATED,{activeInfo:e});this.dispatcherService.emit(t).then()})))}listenOnHighlighted(){this.isListenOnHighlighted||(this.isListenOnHighlighted=!0,chrome.tabs.onHighlighted.addListener((e=>{const t=new c.MarioEvent(h.TabServiceEvents.ON_TAB_HIGHLIGHTED,{highlightInfo:e});this.dispatcherService.emit(t).then()})))}listenOnDetached(){this.isListenOnDetached||(this.isListenOnDetached=!0,chrome.tabs.onDetached.addListener(((e,t)=>{const n=new c.MarioEvent(h.TabServiceEvents.ON_TAB_DETACHED,{tabId:e,detachInfo:t});this.dispatcherService.emit(n).then()})))}listenOnAttached(){this.isListenOnAttached||(this.isListenOnAttached=!0,chrome.tabs.onAttached.addListener(((e,t)=>{const n=new c.MarioEvent(h.TabServiceEvents.ON_TAB_ATTACHED,{tabId:e,attachInfo:t});this.dispatcherService.emit(n).then()})))}listenOnRemoved(){this.isListenOnRemoved||(this.isListenOnRemoved=!0,chrome.tabs.onRemoved.addListener(((e,t)=>{const n=new c.MarioEvent(h.TabServiceEvents.ON_TAB_REMOVED,{tabId:e,removeInfo:t});this.dispatcherService.emit(n).then()})))}listenOnReplaced(){this.isListenOnReplaced||(this.isListenOnReplaced=!0,chrome.tabs.onReplaced.addListener(((e,t)=>{const n=new c.MarioEvent(h.TabServiceEvents.ON_TAB_REPLACED,{addedTabId:e,removedTabId:t});this.dispatcherService.emit(n).then()})))}listenOnZoomChange(){this.isListenOnZoomChange||(this.isListenOnZoomChange=!0,chrome.tabs.onZoomChange.addListener((e=>{const t=new c.MarioEvent(h.TabServiceEvents.ON_TAB_ZOOM_CHANGE,{zoomChangeInfo:e});this.dispatcherService.emit(t).then()})))}sendMessage(e,t){chrome.tabs.sendMessage(e,t,(e=>{chrome.runtime.lastError}))}query(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.tabs.query(e,(e=>{t(e)}))}catch(e){n()}}))}))}reload(e,t={}){return s(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{try{chrome.tabs.reload(e,t,(()=>{n()}))}catch(e){i()}}))}))}create(e){chrome.tabs.create(e)}get(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.tabs.get(e,(e=>t(e)))}catch(e){n(e)}}))}))}getCurrent(){return s(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{chrome.tabs.getCurrent((t=>e(t)))}catch(e){t(e)}}))}))}duplicate(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.tabs.duplicate(e,(e=>t(e)))}catch(e){n(e)}}))}))}highlight(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.tabs.highlight(e,(()=>t()))}catch(e){n(e)}}))}))}update(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{try{chrome.tabs.update(t,e,(e=>n(e)))}catch(e){i(e)}}))}))}move(e,t){return s(this,void 0,void 0,(function*(){return new Promise(((n,i)=>{try{chrome.tabs.move(e,t,(e=>n(e)))}catch(e){i(e)}}))}))}remove(e){return s(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{try{chrome.tabs.remove(e,(e=>t(e)))}catch(e){n(e)}}))}))}};d=i([a.injectable(),o(0,a.inject(u.MARIO_TYPES.INTERNAL_DISPATCHER)),r("design:paramtypes",[Object])],d),t.TabService=d},54674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ON_TAB_CREATED="ON_TAB_CREATED",e.ON_TAB_UPDATED="ON_TAB_UPDATED",e.ON_TAB_MOVED="ON_TAB_MOVED",e.ON_TAB_ACTIVATED="ON_TAB_ACTIVATED",e.ON_TAB_HIGHLIGHTED="ON_TAB_HIGHLIGHTED",e.ON_TAB_DETACHED="ON_TAB_DETACHED",e.ON_TAB_ATTACHED="ON_TAB_ATTACHED",e.ON_TAB_REMOVED="ON_TAB_REMOVED",e.ON_TAB_REPLACED="ON_TAB_REPLACED",e.ON_TAB_ZOOM_CHANGE="ON_TAB_ZOOM_CHANGE"}(t.TabServiceEvents||(t.TabServiceEvents={}))},34861:function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__param||function(e,t){return function(n,i){t(n,i,e)}},s=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=n(86700),c=n(18313),u=n(98573),h=n(76560);let d=class{constructor(e){this.dispatcherService=e,this.isListenOnBeforeRequest=!1,this.isListenOnBeforeSendHeaders=!1,this.isListenOnSendHeaders=!1,this.isListenOnHeadersReceived=!1,this.isListenOnAuthRequired=!1,this.isListenOnResponseStarted=!1,this.isListenOnBeforeRedirect=!1,this.isListenOnCompleted=!1,this.isListenOnErrorOccurred=!1,this.isListenOnActionIgnored=!1}listenOnBeforeRequest(e,t){this.isListenOnBeforeRequest||(this.isListenOnBeforeRequest=!0,chrome.webRequest.onBeforeRequest.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_BEFORE_REQUEST,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnBeforeSendHeaders(e,t){this.isListenOnBeforeSendHeaders||(this.isListenOnBeforeSendHeaders=!0,chrome.webRequest.onBeforeSendHeaders.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_BEFORE_SEND_HEADERS,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnSendHeaders(e,t){this.isListenOnSendHeaders||(this.isListenOnSendHeaders=!0,chrome.webRequest.onSendHeaders.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_SEND_HEADERS,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnHeadersReceived(e,t){this.isListenOnHeadersReceived||(this.isListenOnHeadersReceived=!0,chrome.webRequest.onHeadersReceived.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_HEADERS_RECEIVED,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnAuthRequired(e,t){this.isListenOnAuthRequired||(this.isListenOnAuthRequired=!0,chrome.webRequest.onAuthRequired.addListener(((e,t)=>{const n=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_AUTH_REQUIRED,{details:e,callback:t});this.dispatcherService.emit(n).then()}),e,t))}listenOnResponseStarted(e,t){this.isListenOnResponseStarted||(this.isListenOnResponseStarted=!0,chrome.webRequest.onResponseStarted.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_RESPONSE_STARTED,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnBeforeRedirect(e,t){this.isListenOnBeforeRedirect||(this.isListenOnBeforeRedirect=!0,chrome.webRequest.onBeforeRedirect.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_BEFORE_REDIRECT,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnCompleted(e,t){this.isListenOnCompleted||(this.isListenOnCompleted=!0,chrome.webRequest.onCompleted.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_COMPLETED,{details:e});this.dispatcherService.emit(t).then()}),e,t))}listenOnErrorOccurred(e){this.isListenOnErrorOccurred||(this.isListenOnErrorOccurred=!0,chrome.webRequest.onErrorOccurred.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_ERROR_OCCURRED,{details:e});this.dispatcherService.emit(t).then()}),e))}listenOnActionIgnored(e,t){this.isListenOnActionIgnored||(this.isListenOnActionIgnored=!0,chrome.webRequest.onActionIgnored.addListener((e=>{const t=new c.MarioEvent(h.WebRequestServiceEvents.WEB_REQUEST_ON_ACTION_IGNORED,{details:e});this.dispatcherService.emit(t).then()}),e,t))}handlerBehaviorChanged(){return s(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{try{chrome.webRequest.handlerBehaviorChanged((()=>e()))}catch(e){t(e)}}))}))}};d=i([a.injectable(),o(0,a.inject(u.MARIO_TYPES.INTERNAL_DISPATCHER)),r("design:paramtypes",[Object])],d),t.WebRequestService=d},76560:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WEB_REQUEST_ON_BEFORE_REQUEST="WEB_REQUEST_ON_BEFORE_REQUEST",e.WEB_REQUEST_ON_BEFORE_SEND_HEADERS="WEB_REQUEST_ON_BEFORE_SEND_HEADERS",e.WEB_REQUEST_ON_SEND_HEADERS="WEB_REQUEST_ON_SEND_HEADERS",e.WEB_REQUEST_ON_HEADERS_RECEIVED="WEB_REQUEST_ON_HEADERS_RECEIVED",e.WEB_REQUEST_ON_AUTH_REQUIRED="WEB_REQUEST_ON_AUTH_REQUIRED",e.WEB_REQUEST_ON_RESPONSE_STARTED="WEB_REQUEST_ON_RESPONSE_STARTED",e.WEB_REQUEST_ON_BEFORE_REDIRECT="WEB_REQUEST_ON_BEFORE_REDIRECT",e.WEB_REQUEST_ON_COMPLETED="WEB_REQUEST_ON_COMPLETED",e.WEB_REQUEST_ON_ERROR_OCCURRED="WEB_REQUEST_ON_ERROR_OCCURRED",e.WEB_REQUEST_ON_ACTION_IGNORED="WEB_REQUEST_ON_ACTION_IGNORED"}(t.WebRequestServiceEvents||(t.WebRequestServiceEvents={}))},18313:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17199);t.Mario=i.Mario;var r=n(33528);t.MarioModule=r.MarioModule;var o=n(99959);t.MarioEvent=o.MarioEvent;var s=n(98573);t.MARIO_TYPES=s.MARIO_TYPES;var a=n(4731);t.ExternalDispatcher=a.ExternalDispatcher;var c=n(22344);t.CacheService=c.CacheService;var u=n(27932);t.ContentDispatcherService=u.ContentDispatcherService;var h=n(43473);t.InternalDispatcher=h.InternalDispatcher;var d=n(48643);t.LoggerService=d.LoggerService;var l=n(2325);t.TabService=l.TabService;var f=n(37302);t.NavigationService=f.NavigationService;var p=n(34861);t.WebRequestService=p.WebRequestService;var _=n(9297);t.StorageService=_.StorageService},63442:(e,t)=>{"use strict";t.__esModule=!0;var n=function(){function e(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=e.EMPTY,t&&e.isGuid(t)&&(this.value=t)}return e.isGuid=function(t){var n=t.toString();return t&&(t instanceof e||e.validator.test(n))},e.create=function(){return new e([e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-"))},e.createEmpty=function(){return new e("emptyguid")},e.parse=function(t){return new e(t)},e.raw=function(){return[e.gen(2),e.gen(1),e.gen(1),e.gen(1),e.gen(3)].join("-")},e.gen=function(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t},e.prototype.equals=function(t){return e.isGuid(t)&&this.value===t.toString()},e.prototype.isEmpty=function(){return this.value===e.EMPTY},e.prototype.toString=function(){return this.value},e.prototype.toJSON=function(){return{value:this.value}},e.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),e.EMPTY="00000000-0000-0000-0000-000000000000",e}();t.Guid=n},99934:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(6867);function o(e,t,n,r,o){var s={},a="number"==typeof o,c=void 0!==o&&a?o.toString():n;if(a&&void 0!==n)throw new Error(i.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(e,t)&&(s=Reflect.getMetadata(e,t));var u=s[c];if(Array.isArray(u))for(var h=0,d=u;h<d.length;h++){var l=d[h];if(l.key===r.key)throw new Error(i.DUPLICATED_METADATA+" "+l.key.toString())}else u=[];u.push(r),s[c]=u,Reflect.defineMetadata(e,s,t)}function s(e,t){Reflect.decorate(e,t)}function a(e,t){return function(n,i){t(n,i,e)}}t.tagParameter=function(e,t,n,i){o(r.TAGGED,e,t,i,n)},t.tagProperty=function(e,t,n){o(r.TAGGED_PROP,e.constructor,t,n)},t.decorate=function(e,t,n){"number"==typeof n?s([a(n,e)],t):"string"==typeof n?Reflect.decorate([e],t,n):s([e],t)}},5744:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(6867),o=n(47738),s=n(99934),a=function(){function e(e){this._cb=e}return e.prototype.unwrap=function(){return this._cb()},e}();t.LazyServiceIdentifer=a,t.inject=function(e){return function(t,n,a){if(void 0===e)throw new Error(i.UNDEFINED_INJECT_ANNOTATION(t.name));var c=new o.Metadata(r.INJECT_TAG,e);"number"==typeof a?s.tagParameter(t,n,a,c):s.tagProperty(t,n,c)}}},64315:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(6867);t.injectable=function(){return function(e){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,e))throw new Error(i.DUPLICATED_INJECTABLE_DECORATOR);var t=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,e)||[];return Reflect.defineMetadata(r.PARAM_TYPES,t,e),e}}},71693:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(47738),o=n(99934);t.multiInject=function(e){return function(t,n,s){var a=new r.Metadata(i.MULTI_INJECT_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},38085:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(47738),o=n(99934);t.named=function(e){return function(t,n,s){var a=new r.Metadata(i.NAMED_TAG,e);"number"==typeof s?o.tagParameter(t,n,s,a):o.tagProperty(t,n,a)}}},6515:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(47738),o=n(99934);t.optional=function(){return function(e,t,n){var s=new r.Metadata(i.OPTIONAL_TAG,!0);"number"==typeof n?o.tagParameter(e,t,n,s):o.tagProperty(e,t,s)}}},7014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(6867),o=n(47738);t.postConstruct=function(){return function(e,t,n){var s=new o.Metadata(r.POST_CONSTRUCT,t);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,e.constructor))throw new Error(i.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,s,e.constructor)}}},32052:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(47738),r=n(99934);t.tagged=function(e,t){return function(n,o,s){var a=new i.Metadata(e,t);"number"==typeof s?r.tagParameter(n,o,s,a):r.tagProperty(n,o,a)}}},55638:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(47738),o=n(99934);t.targetName=function(e){return function(t,n,s){var a=new r.Metadata(i.NAME_TAG,e);o.tagParameter(t,n,s,a)}}},86757:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(47738),o=n(99934);t.unmanaged=function(){return function(e,t,n){var s=new r.Metadata(i.UNMANAGED_TAG,!0);o.tagParameter(e,t,n,s)}}},44290:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28421),r=n(37791),o=function(){function e(e,t){this.id=r.id(),this.activated=!1,this.serviceIdentifier=e,this.scope=t,this.type=i.BindingTypeEnum.Invalid,this.constraint=function(e){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}();t.Binding=o},23184:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},16674:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",t.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",t.NULL_ARGUMENT="NULL argument",t.KEY_NOT_FOUND="Key Not Found",t.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",t.CANNOT_UNBIND="Could not unbind serviceIdentifier:",t.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",t.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",t.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",t.UNDEFINED_INJECT_ANNOTATION=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},t.CIRCULAR_DEPENDENCY="Circular dependency found:",t.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",t.INVALID_BINDING_TYPE="Invalid binding type:",t.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",t.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",t.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",t.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",t.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",t.ARGUMENTS_LENGTH_MISMATCH=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+e[0]+" must be >= than the number of constructor arguments of its base class."},t.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",t.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",t.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",t.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",t.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",t.POST_CONSTRUCT_ERROR=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},t.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency in one of the '"+e[0]+"' bindings. Please investigate bindings withservice identifier '"+e[1]+"'."},t.STACK_OVERFLOW="Maximum call stack size exceeded"},28421:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};t.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};t.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAMED_TAG="named",t.NAME_TAG="name",t.UNMANAGED_TAG="unmanaged",t.OPTIONAL_TAG="optional",t.INJECT_TAG="inject",t.MULTI_INJECT_TAG="multi_inject",t.TAGGED="inversify:tagged",t.TAGGED_PROP="inversify:tagged_props",t.PARAM_TYPES="inversify:paramtypes",t.DESIGN_PARAM_TYPES="design:paramtypes",t.POST_CONSTRUCT="post_construct"},51389:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n((function(t){t(e.value)})).then(s,a)}c((i=i.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=i[2&o[0]?"return":o[0]?"throw":"next"])&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[0,r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(44290),s=n(16674),a=n(28421),c=n(6867),u=n(51377),h=n(86311),d=n(31927),l=n(51860),f=n(37791),p=n(55800),_=n(85700),E=n(80175),v=function(){function e(e){var t=e||{};if("object"!=typeof t)throw new Error(""+s.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===t.defaultScope)t.defaultScope=a.BindingScopeEnum.Transient;else if(t.defaultScope!==a.BindingScopeEnum.Singleton&&t.defaultScope!==a.BindingScopeEnum.Transient&&t.defaultScope!==a.BindingScopeEnum.Request)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===t.autoBindInjectable)t.autoBindInjectable=!1;else if("boolean"!=typeof t.autoBindInjectable)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===t.skipBaseClassChecks)t.skipBaseClassChecks=!1;else if("boolean"!=typeof t.skipBaseClassChecks)throw new Error(""+s.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:t.autoBindInjectable,defaultScope:t.defaultScope,skipBaseClassChecks:t.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new E.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return e.merge=function(t,n){var i=new e,r=h.getBindingDictionary(i),o=h.getBindingDictionary(t),s=h.getBindingDictionary(n);function a(e,t){e.traverse((function(e,n){n.forEach((function(e){t.add(e.serviceIdentifier,e.clone())}))}))}return a(o,r),a(s,r),i},e.prototype.load=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=this._getContainerModuleHelpersFactory(),i=0,r=e;i<r.length;i++){var o=r[i],s=n(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(this,void 0,void 0,(function(){var t,n,i,o,s;return r(this,(function(r){switch(r.label){case 0:t=this._getContainerModuleHelpersFactory(),n=0,i=e,r.label=1;case 1:return n<i.length?(o=i[n],s=t(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},e.prototype.unload=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.forEach((function(t){var n,i=(n=t.id,function(e){return e.moduleId===n});e._bindingDictionary.removeByCondition(i)}))},e.prototype.bind=function(e){var t=this.options.defaultScope||a.BindingScopeEnum.Transient,n=new o.Binding(e,t);return this._bindingDictionary.add(e,n),new l.BindingToSyntax(n)},e.prototype.rebind=function(e){return this.unbind(e),this.bind(e)},e.prototype.unbind=function(e){try{this._bindingDictionary.remove(e)}catch(t){throw new Error(s.CANNOT_UNBIND+" "+p.getServiceIdentifierAsString(e))}},e.prototype.unbindAll=function(){this._bindingDictionary=new E.Lookup},e.prototype.isBound=function(e){var t=this._bindingDictionary.hasKey(e);return!t&&this.parent&&(t=this.parent.isBound(e)),t},e.prototype.isBoundNamed=function(e,t){return this.isBoundTagged(e,c.NAMED_TAG,t)},e.prototype.isBoundTagged=function(e,t,n){var i=!1;if(this._bindingDictionary.hasKey(e)){var r=this._bindingDictionary.get(e),o=h.createMockRequest(this,e,t,n);i=r.some((function(e){return e.constraint(o)}))}return!i&&this.parent&&(i=this.parent.isBoundTagged(e,t,n)),i},e.prototype.snapshot=function(){this._snapshots.push(_.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var e=this._snapshots.pop();if(void 0===e)throw new Error(s.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=e.bindings,this._middleware=e.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=e.reduce((function(e,t){return t(e)}),n)},e.prototype.applyCustomMetadataReader=function(e){this._metadataReader=e},e.prototype.get=function(e){return this._get(!1,!1,a.TargetTypeEnum.Variable,e)},e.prototype.getTagged=function(e,t,n){return this._get(!1,!1,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getNamed=function(e,t){return this.getTagged(e,c.NAMED_TAG,t)},e.prototype.getAll=function(e){return this._get(!0,!0,a.TargetTypeEnum.Variable,e)},e.prototype.getAllTagged=function(e,t,n){return this._get(!1,!0,a.TargetTypeEnum.Variable,e,t,n)},e.prototype.getAllNamed=function(e,t){return this.getAllTagged(e,c.NAMED_TAG,t)},e.prototype.resolve=function(e){var t=this.createChild();return t.bind(e).toSelf(),t.get(e)},e.prototype._getContainerModuleHelpersFactory=function(){var e=this,t=function(e,t){e._binding.moduleId=t},n=function(n){return function(i){var r=e.rebind.bind(e)(i);return t(r,n),r}};return function(i){return{bindFunction:(r=i,function(n){var i=e.bind.bind(e)(n);return t(i,r),i}),isboundFunction:function(t){return e.isBound.bind(e)(t)},rebindFunction:n(i),unbindFunction:function(t){e.unbind.bind(e)(t)}};var r}},e.prototype._get=function(e,t,n,i,r,o){var a=null,c={avoidConstraints:e,contextInterceptor:function(e){return e},isMultiInject:t,key:r,serviceIdentifier:i,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(c)))throw new Error(s.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(c);return a},e.prototype._planAndResolve=function(){var e=this;return function(t){var n=h.plan(e._metadataReader,e,t.isMultiInject,t.targetType,t.serviceIdentifier,t.key,t.value,t.avoidConstraints);return n=t.contextInterceptor(n),d.resolve(n)}},e}();t.Container=v},33244:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37791),r=function(e){this.id=i.id(),this.registry=e};t.ContainerModule=r;var o=function(e){this.id=i.id(),this.registry=e};t.AsyncContainerModule=o},85700:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.of=function(t,n){var i=new e;return i.bindings=t,i.middleware=n,i},e}();t.ContainerSnapshot=n},80175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(e,t){if(null==e)throw new Error(i.NULL_ARGUMENT);if(null==t)throw new Error(i.NULL_ARGUMENT);var n=this._map.get(e);void 0!==n?(n.push(t),this._map.set(e,n)):this._map.set(e,[t])},e.prototype.get=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);var t=this._map.get(e);if(void 0!==t)return t;throw new Error(i.KEY_NOT_FOUND)},e.prototype.remove=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);if(!this._map.delete(e))throw new Error(i.KEY_NOT_FOUND)},e.prototype.removeByCondition=function(e){var t=this;this._map.forEach((function(n,i){var r=n.filter((function(t){return!e(t)}));r.length>0?t._map.set(i,r):t._map.delete(i)}))},e.prototype.hasKey=function(e){if(null==e)throw new Error(i.NULL_ARGUMENT);return this._map.has(e)},e.prototype.clone=function(){var t=new e;return this._map.forEach((function(e,n){e.forEach((function(e){return t.add(n,e.clone())}))})),t},e.prototype.traverse=function(e){this._map.forEach((function(t,n){e(n,t)}))},e}();t.Lookup=r},86700:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867);t.METADATA_KEY=i;var r=n(51389);t.Container=r.Container;var o=n(28421);t.BindingScopeEnum=o.BindingScopeEnum,t.BindingTypeEnum=o.BindingTypeEnum,t.TargetTypeEnum=o.TargetTypeEnum;var s=n(33244);t.AsyncContainerModule=s.AsyncContainerModule,t.ContainerModule=s.ContainerModule;var a=n(64315);t.injectable=a.injectable;var c=n(32052);t.tagged=c.tagged;var u=n(38085);t.named=u.named;var h=n(5744);t.inject=h.inject,t.LazyServiceIdentifer=h.LazyServiceIdentifer;var d=n(6515);t.optional=d.optional;var l=n(86757);t.unmanaged=l.unmanaged;var f=n(71693);t.multiInject=f.multiInject;var p=n(55638);t.targetName=p.targetName;var _=n(7014);t.postConstruct=_.postConstruct;var E=n(51377);t.MetadataReader=E.MetadataReader;var v=n(37791);t.id=v.id;var g=n(99934);t.decorate=g.decorate;var y=n(80758);t.traverseAncerstors=y.traverseAncerstors,t.taggedConstraint=y.taggedConstraint,t.namedConstraint=y.namedConstraint,t.typeConstraint=y.typeConstraint;var O=n(55800);t.getServiceIdentifierAsString=O.getServiceIdentifierAsString;var T=n(70600);t.multiBindToService=T.multiBindToService},95228:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37791),r=function(){function e(e){this.id=i.id(),this.container=e}return e.prototype.addPlan=function(e){this.plan=e},e.prototype.setCurrentRequest=function(e){this.currentRequest=e},e}();t.Context=r},47738:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=function(){function e(e,t){this.key=e,this.value=t}return e.prototype.toString=function(){return this.key===i.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}();t.Metadata=r},51377:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=function(){function e(){}return e.prototype.getConstructorMetadata=function(e){return{compilerGeneratedMetadata:Reflect.getMetadata(i.PARAM_TYPES,e),userGeneratedMetadata:Reflect.getMetadata(i.TAGGED,e)||{}}},e.prototype.getPropertiesMetadata=function(e){return Reflect.getMetadata(i.TAGGED_PROP,e)||[]},e}();t.MetadataReader=r},55314:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){this.parentContext=e,this.rootRequest=t};t.Plan=n},86311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(23184),r=n(16674),o=n(28421),s=n(6867),a=n(85265),c=n(55800),u=n(95228),h=n(47738),d=n(55314),l=n(6e3),f=n(6748),p=n(18924);function _(e){return e._bindingDictionary}function E(e,t,n,o,s){var a=g(n.container,s.serviceIdentifier),u=[];return a.length===i.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof s.serviceIdentifier&&e.getConstructorMetadata(s.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(s.serviceIdentifier).toSelf(),a=g(n.container,s.serviceIdentifier)),u=t?a:a.filter((function(e){var t=new f.Request(e.serviceIdentifier,n,o,e,s);return e.constraint(t)})),function(e,t,n,o){switch(t.length){case i.BindingCount.NoBindingsAvailable:if(n.isOptional())return t;var s=c.getServiceIdentifierAsString(e),a=r.NOT_REGISTERED;throw a+=c.listMetadataForTarget(s,n),a+=c.listRegisteredBindingsForServiceIdentifier(o,s,g),new Error(a);case i.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return t;case i.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return t;s=c.getServiceIdentifierAsString(e),a=r.AMBIGUOUS_MATCH+" "+s;throw a+=c.listRegisteredBindingsForServiceIdentifier(o,s,g),new Error(a)}}(s.serviceIdentifier,u,s,n.container),u}function v(e,t,n,i,s,a){var c,u;if(null===s){c=E(e,t,i,null,a),u=new f.Request(n,i,null,c,a);var h=new d.Plan(i,u);i.addPlan(h)}else c=E(e,t,i,s,a),u=s.addChildRequest(a.serviceIdentifier,c,a);c.forEach((function(t){var n=null;if(a.isArray())n=u.addChildRequest(t.serviceIdentifier,t,a);else{if(t.cache)return;n=u}if(t.type===o.BindingTypeEnum.Instance&&null!==t.implementationType){var s=l.getDependencies(e,t.implementationType);if(!i.container.options.skipBaseClassChecks){var c=l.getBaseClassDependencyCount(e,t.implementationType);if(s.length<c){var h=r.ARGUMENTS_LENGTH_MISMATCH(l.getFunctionName(t.implementationType));throw new Error(h)}}s.forEach((function(t){v(e,!1,t.serviceIdentifier,i,n,t)}))}}))}function g(e,t){var n=[],i=_(e);return i.hasKey(t)?n=i.get(t):null!==e.parent&&(n=g(e.parent,t)),n}t.getBindingDictionary=_,t.plan=function(e,t,n,i,r,o,d,l){void 0===l&&(l=!1);var f=new u.Context(t),_=function(e,t,n,i,r,o){var a=e?s.MULTI_INJECT_TAG:s.INJECT_TAG,c=new h.Metadata(a,n),u=new p.Target(t,i,n,c);if(void 0!==r){var d=new h.Metadata(r,o);u.metadata.push(d)}return u}(n,i,r,"",o,d);try{return v(e,l,r,f,null,_),f}catch(e){throw a.isStackOverflowExeption(e)&&f.plan&&c.circularDependencyToException(f.plan.rootRequest),e}},t.createMockRequest=function(e,t,n,i){var r=new p.Target(o.TargetTypeEnum.Variable,"",t,new h.Metadata(n,i)),s=new u.Context(e);return new f.Request(t,s,null,[],r)}},88460:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.str=e}return e.prototype.startsWith=function(e){return 0===this.str.indexOf(e)},e.prototype.endsWith=function(e){var t,n=e.split("").reverse().join("");return t=this.str.split("").reverse().join(""),this.startsWith.call({str:t},n)},e.prototype.contains=function(e){return-1!==this.str.indexOf(e)},e.prototype.equals=function(e){return this.str===e},e.prototype.value=function(){return this.str},e}();t.QueryableString=n},6e3:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(5744),r=n(16674),o=n(28421),s=n(6867),a=n(55800);t.getFunctionName=a.getFunctionName;var c=n(18924);function u(e,t,n,i){var o=e.getConstructorMetadata(n),s=o.compilerGeneratedMetadata;if(void 0===s){var a=r.MISSING_INJECTABLE_ANNOTATION+" "+t+".";throw new Error(a)}var c=o.userGeneratedMetadata,u=Object.keys(c),l=function(e,t,n,i,r){for(var o=[],s=0;s<r;s++){var a=h(s,e,t,n,i);null!==a&&o.push(a)}return o}(i,t,s,c,0===n.length&&u.length>0?u.length:n.length),f=d(e,n);return l.concat(f)}function h(e,t,n,s,a){var u=a[e.toString()]||[],h=l(u),d=!0!==h.unmanaged,f=s[e],p=h.inject||h.multiInject;if((f=p||f)instanceof i.LazyServiceIdentifer&&(f=f.unwrap()),d){if(!t&&(f===Object||f===Function||void 0===f)){var _=r.MISSING_INJECT_ANNOTATION+" argument "+e+" in class "+n+".";throw new Error(_)}var E=new c.Target(o.TargetTypeEnum.ConstructorArgument,h.targetName,f);return E.metadata=u,E}return null}function d(e,t){for(var n=e.getPropertiesMetadata(t),i=[],r=0,s=Object.keys(n);r<s.length;r++){var a=s[r],u=n[a],h=l(n[a]),f=h.targetName||a,p=h.inject||h.multiInject,_=new c.Target(o.TargetTypeEnum.ClassProperty,f,p);_.metadata=u,i.push(_)}var E=Object.getPrototypeOf(t.prototype).constructor;if(E!==Object){var v=d(e,E);i=i.concat(v)}return i}function l(e){var t={};return e.forEach((function(e){t[e.key.toString()]=e.value})),{inject:t[s.INJECT_TAG],multiInject:t[s.MULTI_INJECT_TAG],targetName:t[s.NAME_TAG],unmanaged:t[s.UNMANAGED_TAG]}}t.getDependencies=function(e,t){return u(e,a.getFunctionName(t),t,!1)},t.getBaseClassDependencyCount=function e(t,n){var i=Object.getPrototypeOf(n.prototype).constructor;if(i!==Object){var r=u(t,a.getFunctionName(i),i,!0),o=r.map((function(e){return e.metadata.filter((function(e){return e.key===s.UNMANAGED_TAG}))})),c=[].concat.apply([],o).length,h=r.length-c;return h>0?h:e(t,i)}return 0}},6748:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(37791),r=function(){function e(e,t,n,r,o){this.id=i.id(),this.serviceIdentifier=e,this.parentContext=t,this.parentRequest=n,this.target=o,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return e.prototype.addChildRequest=function(t,n,i){var r=new e(t,this.parentContext,this,n,i);return this.childRequests.push(r),r},e}();t.Request=r},18924:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(37791),o=n(47738),s=n(88460),a=function(){function e(e,t,n,a){this.id=r.id(),this.type=e,this.serviceIdentifier=n,this.name=new s.QueryableString(t||""),this.metadata=new Array;var c=null;"string"==typeof a?c=new o.Metadata(i.NAMED_TAG,a):a instanceof o.Metadata&&(c=a),null!==c&&this.metadata.push(c)}return e.prototype.hasTag=function(e){for(var t=0,n=this.metadata;t<n.length;t++){if(n[t].key===e)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(i.MULTI_INJECT_TAG)},e.prototype.matchesArray=function(e){return this.matchesTag(i.MULTI_INJECT_TAG)(e)},e.prototype.isNamed=function(){return this.hasTag(i.NAMED_TAG)},e.prototype.isTagged=function(){return this.metadata.some((function(e){return e.key!==i.INJECT_TAG&&e.key!==i.MULTI_INJECT_TAG&&e.key!==i.NAME_TAG&&e.key!==i.UNMANAGED_TAG&&e.key!==i.NAMED_TAG}))},e.prototype.isOptional=function(){return this.matchesTag(i.OPTIONAL_TAG)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(e){return e.key===i.NAMED_TAG}))[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(e){return e.key!==i.INJECT_TAG&&e.key!==i.MULTI_INJECT_TAG&&e.key!==i.NAME_TAG&&e.key!==i.UNMANAGED_TAG&&e.key!==i.NAMED_TAG})):null},e.prototype.matchesNamedTag=function(e){return this.matchesTag(i.NAMED_TAG)(e)},e.prototype.matchesTag=function(e){var t=this;return function(n){for(var i=0,r=t.metadata;i<r.length;i++){var o=r[i];if(o.key===e&&o.value===n)return!0}return!1}},e}();t.Target=a},52279:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(28421),o=n(6867);t.resolveInstance=function(e,t,n){var s,a,c=null;if(t.length>0){var u=t.filter((function(e){return null!==e.target&&e.target.type===r.TargetTypeEnum.ConstructorArgument})).map(n);a=u,c=function(e,t,n){var i=t.filter((function(e){return null!==e.target&&e.target.type===r.TargetTypeEnum.ClassProperty})),o=i.map(n);return i.forEach((function(t,n){var i;i=t.target.name.value();var r=o[n];e[i]=r})),e}(c=new((s=e).bind.apply(s,[void 0].concat(a))),t,n)}else c=new e;return function(e,t){if(Reflect.hasMetadata(o.POST_CONSTRUCT,e)){var n=Reflect.getMetadata(o.POST_CONSTRUCT,e);try{t[n.value]()}catch(t){throw new Error(i.POST_CONSTRUCT_ERROR(e.name,t.message))}}}(e,c),c}},31927:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(28421),o=n(85265),s=n(55800),a=n(52279),c=function(e,t,n){try{return n()}catch(n){throw o.isStackOverflowExeption(n)?new Error(i.CIRCULAR_DEPENDENCY_IN_FACTORY(e,t.toString())):n}},u=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,o=t.childRequests,h=t.target&&t.target.isArray(),d=!(t.parentRequest&&t.parentRequest.target&&t.target&&t.parentRequest.target.matchesArray(t.target.serviceIdentifier));if(h&&d)return o.map((function(t){return u(e)(t)}));var l=null;if(!t.target.isOptional()||0!==n.length){var f=n[0],p=f.scope===r.BindingScopeEnum.Singleton,_=f.scope===r.BindingScopeEnum.Request;if(p&&f.activated)return f.cache;if(_&&null!==e&&e.has(f.id))return e.get(f.id);if(f.type===r.BindingTypeEnum.ConstantValue)l=f.cache;else if(f.type===r.BindingTypeEnum.Function)l=f.cache;else if(f.type===r.BindingTypeEnum.Constructor)l=f.implementationType;else if(f.type===r.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)l=c("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(t.parentContext)}));else if(f.type===r.BindingTypeEnum.Factory&&null!==f.factory)l=c("toFactory",f.serviceIdentifier,(function(){return f.factory(t.parentContext)}));else if(f.type===r.BindingTypeEnum.Provider&&null!==f.provider)l=c("toProvider",f.serviceIdentifier,(function(){return f.provider(t.parentContext)}));else{if(f.type!==r.BindingTypeEnum.Instance||null===f.implementationType){var E=s.getServiceIdentifierAsString(t.serviceIdentifier);throw new Error(i.INVALID_BINDING_TYPE+" "+E)}l=a.resolveInstance(f.implementationType,o,u(e))}return"function"==typeof f.onActivation&&(l=f.onActivation(t.parentContext,l)),p&&(f.cache=l,f.activated=!0),_&&null!==e&&!e.has(f.id)&&e.set(f.id,l),l}}};t.resolve=function(e){return u(e.plan.rootRequest.requestScope)(e.plan.rootRequest)}},83366:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28421),r=n(71325),o=function(){function e(e){this._binding=e}return e.prototype.inRequestScope=function(){return this._binding.scope=i.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=i.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=i.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},e}();t.BindingInSyntax=o},99812:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(83366),r=n(51811),o=n(98370),s=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new o.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new i.BindingInSyntax(e)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingInWhenOnSyntax=s},51811:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(98370),r=function(){function e(e){this._binding=e}return e.prototype.onActivation=function(e){return this._binding.onActivation=e,new i.BindingWhenSyntax(this._binding)},e}();t.BindingOnSyntax=r},51860:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674),r=n(28421),o=n(99812),s=n(71325),a=function(){function e(e){this._binding=e}return e.prototype.to=function(e){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=e,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+i.INVALID_TO_SELF_VALUE);var e=this._binding.serviceIdentifier;return this.to(e)},e.prototype.toConstantValue=function(e){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=e,this._binding.dynamicValue=null,this._binding.implementationType=null,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toDynamicValue=function(e){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=e,this._binding.implementationType=null,new o.BindingInWhenOnSyntax(this._binding)},e.prototype.toConstructor=function(e){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFactory=function(e){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toFunction=function(e){if("function"!=typeof e)throw new Error(i.INVALID_FUNCTION_BINDING);var t=this.toConstantValue(e);return this._binding.type=r.BindingTypeEnum.Function,t},e.prototype.toAutoFactory=function(e){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(t){return function(){return t.container.get(e)}},new s.BindingWhenOnSyntax(this._binding)},e.prototype.toProvider=function(e){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=e,new s.BindingWhenOnSyntax(this._binding)},e.prototype.toService=function(e){this.toDynamicValue((function(t){return t.container.get(e)}))},e}();t.BindingToSyntax=a},71325:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(51811),r=n(98370),o=function(){function e(e){this._binding=e,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new i.BindingOnSyntax(this._binding)}return e.prototype.when=function(e){return this._bindingWhenSyntax.when(e)},e.prototype.whenTargetNamed=function(e){return this._bindingWhenSyntax.whenTargetNamed(e)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(e,t){return this._bindingWhenSyntax.whenTargetTagged(e,t)},e.prototype.whenInjectedInto=function(e){return this._bindingWhenSyntax.whenInjectedInto(e)},e.prototype.whenParentNamed=function(e){return this._bindingWhenSyntax.whenParentNamed(e)},e.prototype.whenParentTagged=function(e,t){return this._bindingWhenSyntax.whenParentTagged(e,t)},e.prototype.whenAnyAncestorIs=function(e){return this._bindingWhenSyntax.whenAnyAncestorIs(e)},e.prototype.whenNoAncestorIs=function(e){return this._bindingWhenSyntax.whenNoAncestorIs(e)},e.prototype.whenAnyAncestorNamed=function(e){return this._bindingWhenSyntax.whenAnyAncestorNamed(e)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenAnyAncestorTagged(e,t)},e.prototype.whenNoAncestorNamed=function(e){return this._bindingWhenSyntax.whenNoAncestorNamed(e)},e.prototype.whenNoAncestorTagged=function(e,t){return this._bindingWhenSyntax.whenNoAncestorTagged(e,t)},e.prototype.whenAnyAncestorMatches=function(e){return this._bindingWhenSyntax.whenAnyAncestorMatches(e)},e.prototype.whenNoAncestorMatches=function(e){return this._bindingWhenSyntax.whenNoAncestorMatches(e)},e.prototype.onActivation=function(e){return this._bindingOnSyntax.onActivation(e)},e}();t.BindingWhenOnSyntax=o},98370:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(51811),r=n(80758),o=function(){function e(e){this._binding=e}return e.prototype.when=function(e){return this._binding.constraint=e,new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetNamed=function(e){return this._binding.constraint=r.namedConstraint(e),new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(e){return null!==e.target&&!e.target.isNamed()&&!e.target.isTagged()},new i.BindingOnSyntax(this._binding)},e.prototype.whenTargetTagged=function(e,t){return this._binding.constraint=r.taggedConstraint(e)(t),new i.BindingOnSyntax(this._binding)},e.prototype.whenInjectedInto=function(e){return this._binding.constraint=function(t){return r.typeConstraint(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentNamed=function(e){return this._binding.constraint=function(t){return r.namedConstraint(e)(t.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenParentTagged=function(e,t){return this._binding.constraint=function(n){return r.taggedConstraint(e)(t)(n.parentRequest)},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorIs=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,r.typeConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorIs=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,r.typeConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorNamed=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,r.namedConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorNamed=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,r.namedConstraint(e))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorTagged=function(e,t){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorTagged=function(e,t){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(e)(t))},new i.BindingOnSyntax(this._binding)},e.prototype.whenAnyAncestorMatches=function(e){return this._binding.constraint=function(t){return r.traverseAncerstors(t,e)},new i.BindingOnSyntax(this._binding)},e.prototype.whenNoAncestorMatches=function(e){return this._binding.constraint=function(t){return!r.traverseAncerstors(t,e)},new i.BindingOnSyntax(this._binding)},e}();t.BindingWhenSyntax=o},80758:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(6867),r=n(47738),o=function(e,t){var n=e.parentRequest;return null!==n&&(!!t(n)||o(n,t))};t.traverseAncerstors=o;var s=function(e){return function(t){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(e)(t)};return n.metaData=new r.Metadata(e,t),n}};t.taggedConstraint=s;var a=s(i.NAMED_TAG);t.namedConstraint=a;t.typeConstraint=function(e){return function(t){var n=null;if(null!==t){if(n=t.bindings[0],"string"==typeof e)return n.serviceIdentifier===e;var i=t.bindings[0].implementationType;return e===i}return!1}}},70600:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.multiBindToService=function(e){return function(t){return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return n.forEach((function(n){return e.bind(n).toService(t)}))}}}},85265:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674);t.isStackOverflowExeption=function(e){return e instanceof RangeError||e.message===i.STACK_OVERFLOW}},37791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0;t.id=function(){return n++}},55800:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16674);function r(e){return"function"==typeof e?e.name:"symbol"==typeof e?e.toString():e}function o(e,t){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===t||o(e.parentRequest,t))}function s(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}t.getServiceIdentifierAsString=r,t.listRegisteredBindingsForServiceIdentifier=function(e,t,n){var i="",r=n(e,t);return 0!==r.length&&(i="\nRegistered bindings:",r.forEach((function(e){var t="Object";null!==e.implementationType&&(t=s(e.implementationType)),i=i+"\n "+t,e.constraint.metaData&&(i=i+" - "+e.constraint.metaData)}))),i},t.circularDependencyToException=function e(t){t.childRequests.forEach((function(t){if(o(t,t.serviceIdentifier)){var n=function(e){var t=function e(t,n){void 0===n&&(n=[]);var i=r(t.serviceIdentifier);return n.push(i),null!==t.parentRequest?e(t.parentRequest,n):n}(e);return t.reverse().join(" --\x3e ")}(t);throw new Error(i.CIRCULAR_DEPENDENCY+" "+n)}e(t)}))},t.listMetadataForTarget=function(e,t){if(t.isTagged()||t.isNamed()){var n="",i=t.getNamedTag(),r=t.getCustomTags();return null!==i&&(n+=i.toString()+"\n"),null!==r&&r.forEach((function(e){n+=e.toString()+"\n"}))," "+e+"\n "+e+" - "+n}return" "+e},t.getFunctionName=s},64530:(e,t)=>{function n(e,t){var n=[],i=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+i.slice(0,n.indexOf(t)).join(".")+"]"}),function(r,o){if(n.length>0){var s=n.indexOf(this);~s?n.splice(s+1):n.push(this),~s?i.splice(s,1/0,r):i.push(r),~n.indexOf(o)&&(o=t.call(this,r,o))}else n.push(o);return null==e?o:e.call(this,r,o)}}(e.exports=function(e,t,i,r){return JSON.stringify(e,n(t,r),i)}).getSerialize=n},28660:(e,t,n)=>{var i;!function(e){!function(t){var i="object"==typeof n.g?n.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=o(e);function o(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===i.Reflect?i.Reflect=e:r=o(i.Reflect,r),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",r=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?function(){return ie(Object.create(null))}:s?function(){return ie({__proto__:null})}:function(){return ie({})},has:a?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:a?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),h="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=h||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?ee():Map,l=h||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?te():Set,f=new(h||"function"!=typeof WeakMap?ne():WeakMap);function p(e,t,n,i){if(B(n)){if(!k(e))throw new TypeError;if(!Y(t))throw new TypeError;return S(e,t)}if(!k(e))throw new TypeError;if(!G(t))throw new TypeError;if(!G(i)&&!B(i)&&!j(i))throw new TypeError;return j(i)&&(i=void 0),R(e,t,n=H(n),i)}function _(e,t){function n(n,i){if(!G(n))throw new TypeError;if(!B(i)&&!Q(i))throw new TypeError;M(e,t,n,i)}return n}function E(e,t,n,i){if(!G(n))throw new TypeError;return B(i)||(i=H(i)),M(e,t,n,i)}function v(e,t,n){if(!G(t))throw new TypeError;return B(n)||(n=H(n)),I(e,t,n)}function g(e,t,n){if(!G(t))throw new TypeError;return B(n)||(n=H(n)),b(e,t,n)}function y(e,t,n){if(!G(t))throw new TypeError;return B(n)||(n=H(n)),C(e,t,n)}function O(e,t,n){if(!G(t))throw new TypeError;return B(n)||(n=H(n)),w(e,t,n)}function T(e,t){if(!G(e))throw new TypeError;return B(t)||(t=H(t)),L(e,t)}function A(e,t){if(!G(e))throw new TypeError;return B(t)||(t=H(t)),D(e,t)}function m(e,t,n){if(!G(t))throw new TypeError;B(n)||(n=H(n));var i=N(t,n,!1);if(B(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var r=f.get(t);return r.delete(n),r.size>0||f.delete(t),!0}function S(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!B(i)&&!j(i)){if(!Y(i))throw new TypeError;t=i}}return t}function R(e,t,n,i){for(var r=e.length-1;r>=0;--r){var o=(0,e[r])(t,n,i);if(!B(o)&&!j(o)){if(!G(o))throw new TypeError;i=o}}return i}function N(e,t,n){var i=f.get(e);if(B(i)){if(!n)return;i=new d,f.set(e,i)}var r=i.get(t);if(B(r)){if(!n)return;r=new d,i.set(t,r)}return r}function I(e,t,n){if(b(e,t,n))return!0;var i=Z(t);return!j(i)&&I(e,i,n)}function b(e,t,n){var i=N(t,n,!1);return!B(i)&&V(i.has(e))}function C(e,t,n){if(b(e,t,n))return w(e,t,n);var i=Z(t);return j(i)?void 0:C(e,i,n)}function w(e,t,n){var i=N(t,n,!1);if(!B(i))return i.get(e)}function M(e,t,n,i){N(n,i,!0).set(e,t)}function L(e,t){var n=D(e,t),i=Z(e);if(null===i)return n;var r=L(i,t);if(r.length<=0)return n;if(n.length<=0)return r;for(var o=new l,s=[],a=0,c=n;a<c.length;a++){var u=c[a];o.has(u)||(o.add(u),s.push(u))}for(var h=0,d=r;h<d.length;h++){u=d[h];o.has(u)||(o.add(u),s.push(u))}return s}function D(e,t){var n=[],i=N(e,t,!1);if(B(i))return n;for(var r=K(i.keys()),o=0;;){var s=J(r);if(!s)return n.length=o,n;var a=z(s);try{n[o]=a}catch(e){try{X(r)}finally{throw e}}o++}}function P(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function B(e){return void 0===e}function j(e){return null===e}function x(e){return"symbol"==typeof e}function G(e){return"object"==typeof e?null!==e:"function"==typeof e}function U(e,t){switch(P(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",r=$(e,i);if(void 0!==r){var o=r.call(e,n);if(G(o))throw new TypeError;return o}return W(e,"default"===n?"number":n)}function W(e,t){if("string"===t){var n=e.toString;if(q(n))if(!G(r=n.call(e)))return r;if(q(i=e.valueOf))if(!G(r=i.call(e)))return r}else{var i;if(q(i=e.valueOf))if(!G(r=i.call(e)))return r;var r,o=e.toString;if(q(o))if(!G(r=o.call(e)))return r}throw new TypeError}function V(e){return!!e}function F(e){return""+e}function H(e){var t=U(e,3);return x(t)?t:F(t)}function k(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function q(e){return"function"==typeof e}function Y(e){return"function"==typeof e}function Q(e){switch(P(e)){case 3:case 4:return!0;default:return!1}}function $(e,t){var n=e[t];if(null!=n){if(!q(n))throw new TypeError;return n}}function K(e){var t=$(e,r);if(!q(t))throw new TypeError;var n=t.call(e);if(!G(n))throw new TypeError;return n}function z(e){return e.value}function J(e){var t=e.next();return!t.done&&t}function X(e){var t=e.return;t&&t.call(e)}function Z(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===u)return t;if(t!==u)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var r=i.constructor;return"function"!=typeof r||r===e?t:r}function ee(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[r]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,r=n+1;r<i;r++)this._keys[r-1]=this._keys[r],this._values[r-1]=this._values[r];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[r]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}function te(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[r]=function(){return this.keys()},e}()}function ne(){var e=16,n=c.create(),i=r();return function(){function e(){this._key=r()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&c.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?c.get(t,this._key):void 0},e.prototype.set=function(e,t){return o(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=r()},e}();function r(){var e;do{e="@@WeakMap@@"+u()}while(c.has(n,e));return n[e]=!0,e}function o(e,n){if(!t.call(e,i)){if(!n)return;Object.defineProperty(e,i,{value:c.create()})}return e[i]}function s(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function a(e){return"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e)}function u(){var t=a(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<e;++i){var r=t[i];4!==i&&6!==i&&8!==i||(n+="-"),r<16&&(n+="0"),n+=r.toString(16).toLowerCase()}return n}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",p),e("metadata",_),e("defineMetadata",E),e("hasMetadata",v),e("hasOwnMetadata",g),e("getMetadata",y),e("getOwnMetadata",O),e("getMetadataKeys",T),e("getOwnMetadataKeys",A),e("deleteMetadata",m)}(r)}()}(i||(i={}))},88912:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationContentIn=void 0,function(e){e.NOTIFICATION_SHOW="APP_NOTIFICATION_SHOW"}(t.NotificationContentIn||(t.NotificationContentIn={}))},15782:function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ContentNotificationService=void 0;const r=n(88912),o=n(69070);t.ContentNotificationService=class{constructor(e){this.dispatcher=e,this.showing=!1,this.dispatcher.on(r.NotificationContentIn.NOTIFICATION_SHOW,(e=>{this.show(e.data.notification).then()}));window.addEventListener("message",(e=>{const t=e.data;if(t.type===o.MessageType.IFRAME_OUT){const e={[o.IframeEventsOut.NOTIFICATION_HIDE]:this.hide.bind(this),[o.IframeEventsOut.BUTTON_CLICKED]:this.onButtonClicked.bind(this),[o.IframeEventsOut.DATA_HANDLED]:this.dataHandled.bind(this)};e[t.event]&&e[t.event](t.data)}}).bind(this),!1)}show(e){return i(this,void 0,void 0,(function*(){this.iframe||(yield this.inject()),this.showing=!0,this.duration=e.duration,this.emit(o.IframeEventsIn.NOTIFICATION_DATA,e)}))}hide(){this.showing=!1,this.iframe.style.right="-1600px"}inject(){return i(this,void 0,void 0,(function*(){return new Promise((e=>{this.iframe=document.createElement("iframe"),this.iframe.addEventListener("transitionend",(()=>{this.showing&&this.duration&&this.duration!==1/0&&setTimeout(this.hide.bind(this),this.duration)})),this.iframe.onload=()=>{e()},this.iframe.style.display="block",this.iframe.style.transition="right 1s",this.iframe.style.width="453px",this.iframe.style.height="165px",this.iframe.style.position="fixed",this.iframe.style.top="16px",this.iframe.style.right="-1600px",this.iframe.style.zIndex="9999999999",this.iframe.style.borderRadius="6px",this.iframe.style.boxShadow="0 2px 8px 0 rgba(0, 0, 0, 0.3)",this.iframe.style.backgroundColor="#ffffff",this.iframe.style.border="solid 1px #d7d7d7",this.iframe.src=chrome.extension.getURL("content/app-notification/app-iframe/index.html"),this.iframe.id="urban_app_iframe",document.body.insertBefore(this.iframe,document.body.firstChild)}))}))}emit(e,t){const n={data:t,event:e,type:o.MessageType.IFRAME_IN};this.iframe.contentWindow.postMessage(n,"*")}onButtonClicked(e){this.hide()}dataHandled(){this.iframe.style.right="16px"}}},69070:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IframeEventsIn=t.IframeEventsOut=t.MessageType=void 0,function(e){e.IFRAME_IN="NOTIFICATION_IFRAME_IN",e.IFRAME_OUT="NOTIFICATION_IFRAME_OUT",e.CONTENT_IN="NOTIFICATION_CONTENT_IN",e.CONTENT_OUT="NOTIFICATION_CONTENT_OUT"}(t.MessageType||(t.MessageType={})),function(e){e.NOTIFICATION_HIDE="NOTIFICATION_HIDE",e.BUTTON_CLICKED="NOTIFICATION_BUTTON_CLICKED",e.DATA_HANDLED="NOTIFICATION_DATA_HANDLED"}(t.IframeEventsOut||(t.IframeEventsOut={})),function(e){e.NOTIFICATION_DATA="NOTIFICATION_DATA"}(t.IframeEventsIn||(t.IframeEventsIn={}))}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();(()=>{"use strict";const e=n(15782),t=new(n(18313).ContentDispatcherService);new e.ContentNotificationService(t)})()})();