(globalThis.webpackChunk_eesel_app=globalThis.webpackChunk_eesel_app||[]).push([[482],{50128:(e,t,r)=>{var a=r(94182).w_;e.exports.FiChevronDown=function(e){return a({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}},43264:(e,t,r)=>{"use strict";t.P=void 0;const a=r(3974),n=(0,a.__importDefault)(r(30130)),o=r(21743),l=r(50128),s=r(41473),i=r(73081);t.P=e=>{var{className:t,display:r,iconOffset:c=1,maxWidth:u,w:m,disabled:d}=e,p=(0,a.__rest)(e,["className","display","iconOffset","maxWidth","w","disabled"]);const b=(0,o.useTheme)();return n.default.createElement(s.x.div,{className:t,display:r,maxWidth:u,position:"relative",w:m},n.default.createElement(s.x.select,Object.assign({appearance:"none",backgroundColor:"bg02",borderRadius:"0.5rem",boxShadow:{_:"none",focus:`0 0 0 1px ${b.colors.onBGSubtle}`},color:"onBG02",disabled:d,outline:"none",padding:"0.625rem 2.25rem 0.625rem 0.75rem",text:"body",w:"100%"},p,d?{cursor:"disabled"}:{cursor:"pointer"})),n.default.createElement(i.Icon,{component:l.FiChevronDown,pointerEvents:"none",position:"absolute",right:"0.625rem",top:`calc((100% - ${c}rem) / 2)`}))}},36324:(e,t,r)=>{"use strict";r.d(t,{Dx:()=>d,VY:()=>p,xE:()=>m});var a=r(3974),n=r(30130),o=r(21743),l=r(14289),s=r(41473),i=r(11930),c=r(44235);const u=(0,r(35313).I)(l.FiChevronLeft),m=n.forwardRef(((e,t)=>n.createElement(c.z,Object.assign({alignItems:"center",color:"text",display:"flex",ml:"-0.5rem",ref:t,shape:"icon"},e),n.createElement(u,null)))),d=n.forwardRef(((e,t)=>{var{variant:r="centered"}=e,o=(0,a.__rest)(e,["variant"]);const l=Object.assign(Object.assign({flexGrow:1,fontSize:"1rem",fontWeight:600,margin:"0px 1rem 0px 0.5rem"},"centered"===r?{textAlign:"center"}:{}),"left"===r?{textAlign:"left"}:{});return n.createElement(s.x.h2,Object.assign({ref:t},l,o))})),p=(0,o.default)(i.VY)`
  flex-grow: 1;
  overflow-y: auto;
`},80482:(e,t,r)=>{"use strict";r.r(t),r.d(t,{SettingsPreferenceContainer:()=>A});var a=r(3974),n=r(30130),o=r(79740),l=r(8330),s=r(67527),i=r(17683),c=r(75278),u=r(90232),m=r(12900),d=r.n(m),p=r(21743),b=r(21178),f=r(41473),g=r(36324),h=r(87515),x=r(43264);const v=e=>{const t=(0,h.u)();return n.createElement(x.P,Object.assign({backgroundColor:"bg",boxShadow:{_:`0 0 0 1px ${t.colors.onBG}`,focus:`0 0 0 1px ${t.colors.onBG}`},color:"onBG",maxWidth:"18.5rem"},e))};var w=r(44235),E=r(48248),k=r(71210),y=r(80930),C=r(87228),_=r(68609),O=r(92040),S=r(94506);const j=e=>n.createElement(f.x.div,Object.assign({borderBottom:"1px solid",borderColor:"border",pb:"1.5rem",pt:"1rem"},e)),B=(0,p.default)(E.b)`
  max-width: 712rpx;
  padding: 3 4;
  a {
    color: danger;
  }
`,F=(0,p.default)(w.z)`
  margin-right: 3;
`,P=["auto","dark","light"],D=({colorMode:e,onSubmit:t,user:r})=>{const[a]=n.useState((()=>{return Object.assign({appearance:"null"===e?"auto":e},r?(t=r.preference,JSON.parse(JSON.stringify(t,((e,t)=>"__typename"===e?void 0:t)))):{newtab:"eesel"});var t})),o=(0,k.e)(),l=(0,y.b)(),{stopPropagation:s}=(0,S.useAnalyticsListener)(),i=n.useCallback((e=>{s(e),o({target:l?void 0:"_self",url:(0,O.Mk)()})}),[l,o,s]),c=(0,C.u)();return n.createElement(g.VY,null,n.createElement(b.Formik,{enableReinitialize:!0,initialValues:a,onSubmit:t},(e=>{var t;return n.createElement(b.Form,null,n.createElement(I,Object.assign({},e)),n.createElement(G,Object.assign({},e)),n.createElement(j,null,n.createElement(f.x.div,{mb:2,text:"strongBody"},"Shortcut"),n.createElement(f.x.div,{alignItems:"center",display:"flex",mb:2,ml:"-1rem"},n.createElement(_.ShortcutBar,{shortcut:c.data}),n.createElement(f.x.a,{color:"primary",href:(0,O.Mk)(),ml:(null===(t=c.data)||void 0===t?void 0:t.keys.length)>0?"0":"1rem",onClick:i,textDecoration:"none"},"Edit shortcut"))))})))},G=({submitForm:e,values:t,setFieldValue:r})=>{const a=n.useCallback((({target:{value:t}})=>{r("appearance",t),e()}),[r,e]);return n.createElement(j,null,n.createElement(f.x.div,{mb:2,text:"strongBody"},"Appearance"),n.createElement(f.x.div,{mb:2},n.createElement(v,{"aria-label":"Appearance",onChange:a,value:t.appearance},P.map((e=>n.createElement("option",{key:e,value:e},d()(e)))))))},I=({submitForm:e,values:t,setFieldValue:r,resetForm:a})=>{const[o,l]=n.useState(!1),s="browserDefault"===t.newtab,i=(n.useCallback((({target:{value:t}})=>{r("newtab",t),"browserDefault"===t?l(!0):e()}),[r,e]),(0,k.e)()),c=(0,y.b)(),u=n.useCallback((()=>"https://intercom.help/eesel/en/articles/3728989-how-to-remove-eesel-from-your-new-tab#h_5847aa31a2"),[]),{stopPropagation:m}=(0,S.useAnalyticsListener)(),d=n.useCallback((e=>{m(e),i({target:c?void 0:"_self",url:u()})}),[u,c,i,m]);return n.createElement(j,null,n.createElement(f.x.div,{mb:2,text:"strongBody"},"New Tab"),null,s&&n.createElement(B,{color:"danger"},"The eesel button and the command-e shortcut won’t be working from the default new tab. You’ll still be able to open eesel from other pages."," ",n.createElement(f.x.a,{color:"error",href:"https://intercom.help/eesel/en/articles/3728989-how-to-remove-eesel-from-your-new-tab",text:"strongBody"},"Learn more."),o&&n.createElement(f.x.div,{my:3},n.createElement(F,{color:"danger",onClick:()=>{l(!1),r("appearance","auto"),e()},type:"submit"},"Confirm"),n.createElement(w.z,{color:"danger",onClick:()=>{l(!1),a()},shape:"text"},"Cancel"))),!s&&n.createElement(f.x.div,{color:"onBG"},"Want to keep using eesel but have another extension in your new tab?"," ",n.createElement(f.x.a,{color:"onBG",href:u(),onClick:d,outline:"none",tabIndex:-1},"Learn how to do that.")))},L=o.Ps`
  query SettingsPreferenceQuery {
    user {
      id
      preference {
        newtab
      }
    }
  }
`,W=o.Ps`
  mutation SettingsPreferenceUpdate($input: UserInput!) {
    userUpdate(input: $input) {
      id
      preference {
        newtab
      }
    }
  }
`,A=()=>{const{data:{user:e}={},error:t,loading:r}=(0,i.useQuery)(L),[o,m]=(0,s.If)(),[d]=(0,l.D)(W),p=n.useCallback((async e=>{var{appearance:t}=e,r=(0,a.__rest)(e,["appearance"]);m(t),await d({variables:{input:{preference:r}}}),u.j("preferenceUpdated",Object.assign(Object.assign({},r),{appearance:t}))}),[m,d]);if(t)throw t;if(r)return n.createElement(c.a,null);if(!e)throw new Error("user not found");return n.createElement(D,{colorMode:o,onSubmit:p,user:e})}}}]);