import{_ as t}from"./icon-back-D_TFrgyJ.js";import{_ as s}from"./icon-close-BUGl_M7j.js";import{o as e,B as a,n as i,ab as l,u as r,h as n,A as o}from"./icon-alert-mvI7iJMO.js";import{s as c}from"./index-S6WCWdQc.js";import{u as d,b as u}from"./index-B0SY0IAS.js";import{_ as p}from"./icon-clean-rFsPxTtp.js";const h=e({name:"Upsell",components:{ModalBanner:e({name:"ModalBanner",props:{sales:{type:Object,default:()=>({})},showClose:{type:Boolean,default:!0},showBack:{type:Boolean,default:!1}},computed:{date:()=>m.models.date,time(){return new Date(this.date.get("seconds"))},saleInfo(){return this.sales&&this.sales.yearly},saleTimeLeft(){return new Date(this.sales.yearly.endDate)-this.time},stringCountdown(){if(!this.sales||!this.sales.yearly.endDate)return"";if(this.saleTimeLeft<=0)return"Sale Has Ended";const t=Math.floor(this.saleTimeLeft/1e3),s=m.utils.twoDigit(t%60),e=Math.floor(t/60),a=m.utils.twoDigit(e%60),i=Math.floor(e/60),l=m.utils.twoDigit(i%24);return"Ends in "+Math.floor(i/24)+"d "+l+"h "+a+"m "+s+"s"}}},(function(){var e=this,a=e._self._c;return a("div",{staticClass:"sale"},[e.showBack?a("div",{staticClass:"back-container"},[a("div",{staticClass:"back icon-wrapper",attrs:{"data-test":"back"},on:{click:function(t){return e.$emit("goBack")}}},[a("inline-svg",{staticClass:"icon icon-back",attrs:{src:t}})],1)]):e._e(),a("span",{staticClass:"text"},[a("div",{staticClass:"description"},[e._v(e._s(e.saleInfo.title)),a("span",{staticClass:"divider"},[e._v("â€“")]),e._v(e._s(e.saleInfo.percentOff)+"% Off")]),a("div",{staticClass:"countdown"},[e._v(e._s(e.stringCountdown))])]),e.showClose?a("div",{staticClass:"close-container"},[a("div",{staticClass:"icon-wrapper close",attrs:{"data-test":"close"},on:{click:function(t){return e.$emit("close")}}},[a("inline-svg",{staticClass:"icon icon-close",attrs:{src:s}})],1)]):e._e()])}),[],!1,null,"7fcae1e4").exports,UpgradeButton:e({name:"UpgradeButton",setup(){var t;const s=a();return{circle:a(),upgradeButton:a(),shimmerMask:s,buttonBoundingBox:d(s),mouse:u({touch:!1}),cleanup:[],isSafari:i(),variant:(null==(t=l("upsell_button_2"))?void 0:t.variantName)??""}},computed:{transformShimmerMask(){return`translate(${this.mouse.x.value-this.buttonBoundingBox.x.value}px, ${this.mouse.y.value-this.buttonBoundingBox.y.value}px)`},deltaXToCenter(){return this.mouse.x.value-(this.buttonBoundingBox.x.value+.5*this.buttonBoundingBox.width.value)},deltaYToCenter(){return this.mouse.y.value-(this.buttonBoundingBox.y.value+.5*this.buttonBoundingBox.height.value)}},watch:{transformShimmerMask:{handler(t){var s;null==(s=this.circle)||s.animate({transform:t},{duration:800,fill:"forwards",easing:"ease-in-out"})},immediate:!0}}},(function(){var t=this,s=t._self._c;return s("a",{ref:"upgradeButton",staticClass:"upgrade-button",class:[`${t.variant.replaceAll("_","-")}`]},[t._m(0),t._m(1),s("div",{staticClass:"background"}),t.isSafari?t._e():s("div",{staticClass:"chroma-bg shimmer"},[t._m(2)]),s("div",{staticClass:"content"},[t._t("default")],2),s("svg",{ref:"shimmerMask",attrs:{id:"shimmer-mask-svg"}},[s("mask",{attrs:{id:"shimmer-mask"}},[s("circle",{ref:"circle",staticClass:"circle",attrs:{r:"50",cx:"0",cy:"0",fill:"white"}})])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"chroma-bg border"},[t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])])},function(){var t=this._self._c;return t("div",{staticClass:"chroma-bg glow"},[t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])])},function(){var t=this._self._c;return t("div",{staticClass:"hover-spin"},[t("div",{staticClass:"gradient"})])}],!1,null,"fcf140b6").exports},props:{type:{type:String,default:"General"},eventSource:{type:String,default:""},eventFeature:{type:String,default:""},eventType:{type:String,default:""},plans:{type:Object,default:()=>({})},sales:{type:Object,default:()=>({})},headerTitle:{type:String,default:"Available on Momentum Plus"}},setup:()=>({isSafari:r.isSafari(),stepsEnum:c,userIsLegacyUnregistered:n}),computed:{saleActive(){return this.sales&&Object.keys(this.sales).length},sale(){return this.sales&&this.sales.yearly}},created(){m.on("globalEvent:esc",this.close);let t={feature:this.eventFeature||this.type};this.eventType&&(t.type=this.eventType),this.analytics=new o(t)},mounted(){m.upsellModalActive=!0,this.analytics.capture("upsell show",{location:this.eventSource}),m.commandManager.beforeExecute("upsell.upgrade")},destroyed(){m.upsellModalActive=!1,m.off("globalEvent:esc",this.close)},methods:{close(){m.trigger("modal:close")},upgrade(){this.analytics.capture("upsell click"),m.trigger("modal:showUpgrade")}}},(function(){var t=this,e=t._self._c;return e("div",{staticClass:"upsell-modal",attrs:{"data-test":"upsell"}},[e("transition",{attrs:{name:"slide-fade",appear:""}},[e("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.close,expression:"close"}],staticClass:"app onboarding new-upsell light light-full",class:`${t.type}-upsell`,attrs:{"data-test":`${t.type}-upsell`}},[t.saleActive?e("modal-banner",{attrs:{sales:t.sales},on:{close:t.close}}):t._e(),e("header",{staticClass:"header"},[e("div",{staticClass:"header-left"}),e("div",{staticClass:"header-title"},[t._v(t._s(t.headerTitle))]),e("div",{staticClass:"header-right"},[t.saleActive?t._e():e("span",{staticClass:"icon-wrapper hide",attrs:{"data-test":"close"},on:{click:t.close}},[e("inline-svg",{staticClass:"icon icon-hide",attrs:{src:s}})],1)])]),e("main",{staticClass:"body"},[e("div",{staticClass:"body-header"},[e("div",{staticClass:"title",attrs:{"data-test":"upsell-title"}},[t._t("title")],2),e("div",{staticClass:"description",attrs:{"data-test":"upsell-description"}},[t._t("description")],2)]),t._t("body"),t._t("default")],2),e("footer",{staticClass:"footer"},[e("upgrade-button",{attrs:{"data-test":"upsell-cta"},nativeOn:{click:function(s){return t.upgrade.apply(null,arguments)}}},[e("inline-svg",{staticClass:"icon",attrs:{src:p}}),t._v("Upgrade to Plus ")],1),e("div",{staticClass:"button-desc"},[t.isSafari||t.userIsLegacyUnregistered()?t._e():[t._v(" Only "),t.saleActive?[e("strong",[e("s",{staticClass:"strike"},[t._v("$"+t._s(t.plans.yearly.friendlyMonthlyPrice))]),t._v(" $"+t._s(t.sale.friendlyMonthlyPrice))]),t._v("/month.")]:t.plans.yearly?[t._v("$"+t._s(t.plans.yearly.friendlyMonthlyPrice)+"/month.")]:t._e()],t._v(" 30-day money-back guarantee. "),t.isSafari?t._e():e("a",{staticClass:"learn-more",attrs:{href:"https://momentumdash.com/plus",target:"_blank"}},[e("strong",[t._v("Learn more")])])],2)],1)],1)])],1)}),[],!1,null,"ad3655b7").exports;export{h as U};