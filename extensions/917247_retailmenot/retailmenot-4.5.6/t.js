!function(){"use strict";function e(e,t,r,n){return new(r||(r=Promise))((function(t,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function a(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,a)}s((n=n.apply(e,[])).next())}))}function t(e){return this instanceof t?(this.v=e,this):new t(e)}function r(e){return Boolean(e)&&"object"==typeof e&&"name"in e&&"message"in e&&"stack"in e}function n(e){return Array.isArray(e)}function o(e){return"boolean"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return"string"==typeof e}function c(e){return void 0===e}function d(e){try{return new RegExp(e),!0}catch{return!1}}function u(e){if(!s(e))return!1;for(let t=0;t<e.length;t++){const r=e.charCodeAt(t);if(r>=7&&r<=13||27===r||127===r)return!1}return!0}function l(e){return m(e)||B(e)}function p(e){return c(e)||function(e){return"bigint"==typeof e}(e)}function f(e){return c(e)||i(e)}function m(e){return c(e)||o(e)}function h(e){return c(e)||s(e)}function y(e){return c(e)||B(e)}function g(e){return a(e)&&"Optional"===e[gt]}function b(e){return E(e,"Array")&&"array"===e.type&&h(e.$id)&&B(e.items)&&f(e.minItems)&&f(e.maxItems)&&m(e.uniqueItems)&&y(e.contains)&&f(e.minContains)&&f(e.maxContains)}function w(e){return E(e,"Integer")&&"integer"===e.type&&h(e.$id)&&f(e.exclusiveMaximum)&&f(e.exclusiveMinimum)&&f(e.maximum)&&f(e.minimum)&&f(e.multipleOf)}function S(e){return a(e)&&Object.entries(e).every((([e,t])=>u(e)&&B(t)))}function I(e){return E(e,"Intersect")&&(!s(e.type)||"object"===e.type)&&n(e.allOf)&&e.allOf.every((e=>B(e)&&!U(e)))&&h(e.type)&&(m(e.unevaluatedProperties)||y(e.unevaluatedProperties))&&h(e.$id)}function E(e,t){return a(e)&&wt in e&&e[wt]===t}function T(e){return E(e,"Literal")&&h(e.$id)&&function(e){return o(e)||i(e)||s(e)}(e.const)}function D(e){return E(e,"MappedKey")&&n(e.keys)&&e.keys.every((e=>i(e)||s(e)))}function x(e){return E(e,"MappedResult")&&S(e.properties)}function v(e){return E(e,"Never")&&a(e.not)&&0===Object.getOwnPropertyNames(e.not).length}function A(e){return E(e,"Number")&&"number"===e.type&&h(e.$id)&&f(e.exclusiveMaximum)&&f(e.exclusiveMinimum)&&f(e.maximum)&&f(e.minimum)&&f(e.multipleOf)}function O(e){return E(e,"Object")&&"object"===e.type&&h(e.$id)&&S(e.properties)&&l(e.additionalProperties)&&f(e.minProperties)&&f(e.maxProperties)}function R(e){return E(e,"Record")&&"object"===e.type&&h(e.$id)&&l(e.additionalProperties)&&a(e.patternProperties)&&(e=>{const t=Object.getOwnPropertyNames(e.patternProperties);return 1===t.length&&d(t[0])&&a(e.patternProperties)&&B(e.patternProperties[t[0]])})(e)}function P(e){return E(e,"RegExp")&&h(e.$id)&&s(e.source)&&s(e.flags)}function k(e){return E(e,"String")&&"string"===e.type&&h(e.$id)&&f(e.minLength)&&f(e.maxLength)&&function(e){return c(e)||s(e)&&u(e)&&d(e)}(e.pattern)&&function(e){return c(e)||s(e)&&u(e)}(e.format)}function C(e){return E(e,"TemplateLiteral")&&"string"===e.type&&s(e.pattern)&&"^"===e.pattern[0]&&"$"===e.pattern[e.pattern.length-1]}function U(e){return a(e)&&yt in e}function M(e){return E(e,"Tuple")&&"array"===e.type&&h(e.$id)&&i(e.minItems)&&i(e.maxItems)&&e.minItems===e.maxItems&&(c(e.items)&&c(e.additionalItems)&&0===e.minItems||n(e.items)&&e.items.every((e=>B(e))))}function N(e){return E(e,"Union")&&h(e.$id)&&a(e)&&n(e.anyOf)&&e.anyOf.every((e=>B(e)))}function B(e){return a(e)&&(function(e){return E(e,"Any")&&h(e.$id)}(e)||b(e)||function(e){return E(e,"Boolean")&&"boolean"===e.type&&h(e.$id)}(e)||function(e){return E(e,"BigInt")&&"bigint"===e.type&&h(e.$id)&&p(e.exclusiveMaximum)&&p(e.exclusiveMinimum)&&p(e.maximum)&&p(e.minimum)&&p(e.multipleOf)}(e)||function(e){return E(e,"AsyncIterator")&&"AsyncIterator"===e.type&&h(e.$id)&&B(e.items)}(e)||function(e){return E(e,"Constructor")&&"Constructor"===e.type&&h(e.$id)&&n(e.parameters)&&e.parameters.every((e=>B(e)))&&B(e.returns)}(e)||function(e){return E(e,"Date")&&"Date"===e.type&&h(e.$id)&&f(e.exclusiveMaximumTimestamp)&&f(e.exclusiveMinimumTimestamp)&&f(e.maximumTimestamp)&&f(e.minimumTimestamp)&&f(e.multipleOfTimestamp)}(e)||function(e){return E(e,"Function")&&"Function"===e.type&&h(e.$id)&&n(e.parameters)&&e.parameters.every((e=>B(e)))&&B(e.returns)}(e)||w(e)||I(e)||function(e){return E(e,"Iterator")&&"Iterator"===e.type&&h(e.$id)&&B(e.items)}(e)||T(e)||D(e)||x(e)||v(e)||function(e){return E(e,"Not")&&B(e.not)}(e)||function(e){return E(e,"Null")&&"null"===e.type&&h(e.$id)}(e)||A(e)||O(e)||function(e){return E(e,"Promise")&&"Promise"===e.type&&h(e.$id)&&B(e.item)}(e)||R(e)||function(e){return E(e,"Ref")&&h(e.$id)&&s(e.$ref)}(e)||P(e)||k(e)||function(e){return E(e,"Symbol")&&"symbol"===e.type&&h(e.$id)}(e)||C(e)||function(e){return E(e,"This")&&h(e.$id)&&s(e.$ref)}(e)||M(e)||function(e){return E(e,"Undefined")&&"undefined"===e.type&&h(e.$id)}(e)||N(e)||function(e){return E(e,"Uint8Array")&&"Uint8Array"===e.type&&h(e.$id)&&f(e.minByteLength)&&f(e.maxByteLength)}(e)||function(e){return E(e,"Unknown")&&h(e.$id)}(e)||function(e){return E(e,"Unsafe")}(e)||function(e){return E(e,"Void")&&"void"===e.type&&h(e.$id)}(e)||function(e){return a(e)&&wt in e&&s(e[wt])&&!Tt.includes(e[wt])}(e))}function _(e){return n(e)?function(e){return e.map((e=>_(e)))}(e):function(e){return e instanceof globalThis.Date}(e)?function(e){return new Date(e.getTime())}(e):function(e){return e instanceof globalThis.Uint8Array}(e)?function(e){return new Uint8Array(e)}(e):function(e){return e instanceof globalThis.RegExp}(e)?function(e){return new RegExp(e.source,e.flags)}(e):a(e)?function(e){return{...Object.getOwnPropertyNames(e).reduce(((t,r)=>({...t,[r]:_(e[r])})),{}),...Object.getOwnPropertySymbols(e).reduce(((t,r)=>({...t,[r]:_(e[r])})),{})}}(e):e}function L(e){return e.map((e=>F(e)))}function F(e,t={}){return{...(r=e,_(r)),...t};var r}function q(e,t={}){return{...t,[wt]:"Array",type:"array",items:F(e)}}function j(e,t){return t.reduce(((e,t)=>function(e,t){const{[t]:r,...n}=e;return n}(e,t)),e)}function $(e={}){return{...e,[wt]:"Never",not:{}}}function z(e){return{[wt]:"MappedResult",properties:e}}function Y(e,t){return{...t,[wt]:"Union",anyOf:L(e)}}function V(e){return e.map((e=>g(e)?function(e){return j(e,[gt])}(e):e))}function X(e,t={}){return 0===e.length?$(t):1===e.length?F(e[0],t):function(e,t){return function(e){return e.some((e=>g(e)))}(e)?ye(Y(V(e),t)):Y(V(e),t)}(e,t)}function H(e,t={}){return 0===e.length?$(t):1===e.length?F(e[0],t):Y(e,t)}function K(e,t,r){return e[t]===r&&92!==e.charCodeAt(t-1)}function G(e,t){return K(e,t,"(")}function J(e,t){return K(e,t,")")}function W(e,t){return K(e,t,"|")}function Q(e){return function(e){if(!G(e,0)||!J(e,e.length-1))return!1;let t=0;for(let r=0;r<e.length;r++)if(G(e,r)&&(t+=1),J(e,r)&&(t-=1),0===t&&r!==e.length-1)return!1;return!0}(e)?Q(function(e){return e.slice(1,e.length-1)}(e)):function(e){let t=0;for(let r=0;r<e.length;r++)if(G(e,r)&&(t+=1),J(e,r)&&(t-=1),W(e,r)&&0===t)return!0;return!1}(e)?function(e){let[t,r]=[0,0];const n=[];for(let o=0;o<e.length;o++)if(G(e,o)&&(t+=1),J(e,o)&&(t-=1),W(e,o)&&0===t){const t=e.slice(r,o);t.length>0&&n.push(Q(t)),r=o+1}const o=e.slice(r);return o.length>0&&n.push(Q(o)),0===n.length?{type:"const",const:""}:1===n.length?n[0]:{type:"or",expr:n}}(e):function(e){for(let t=0;t<e.length;t++)if(G(e,t))return!0;return!1}(e)?function(e){function t(e,t){if(!G(e,t))throw new Dt("TemplateLiteralParser: Index must point to open parens");let r=0;for(let n=t;n<e.length;n++)if(G(e,n)&&(r+=1),J(e,n)&&(r-=1),0===r)return[t,n];throw new Dt("TemplateLiteralParser: Unclosed group parens in expression")}function r(e,t){for(let r=t;r<e.length;r++)if(G(e,r))return[t,r];return[t,e.length]}const n=[];for(let o=0;o<e.length;o++)if(G(e,o)){const[r,i]=t(e,o),a=e.slice(r,i+1);n.push(Q(a)),o=i}else{const[t,i]=r(e,o),a=e.slice(t,i);a.length>0&&n.push(Q(a)),o=i-1}return 0===n.length?{type:"const",const:""}:1===n.length?n[0]:{type:"and",expr:n}}(e):{type:"const",const:e}}function Z(e){return Q(e.slice(1,e.length-1))}function ee(e){return!function(e){return"or"===e.type&&2===e.expr.length&&"const"===e.expr[0].type&&"0"===e.expr[0].const&&"const"===e.expr[1].type&&"[1-9][0-9]*"===e.expr[1].const}(e)&&!function(e){return"const"===e.type&&".*"===e.const}(e)&&(!!function(e){return"or"===e.type&&2===e.expr.length&&"const"===e.expr[0].type&&"true"===e.expr[0].const&&"const"===e.expr[1].type&&"false"===e.expr[1].const}(e)||("and"===e.type||"or"===e.type?e.expr.every((e=>ee(e))):"const"===e.type||(()=>{throw new xt("Unknown expression type")})()))}function*te(e){if(1===e.length)return yield*e[0];for(const t of e[0])for(const r of te(e.slice(1)))yield`${t}${r}`}function*re(e){return yield*te(e.expr.map((e=>[...ne(e)])))}function*ne(e){return"and"===e.type?yield*re(e):"or"===e.type?yield*function*(e){for(const t of e.expr)yield*ne(t)}(e):"const"===e.type?yield*function*(e){return yield e.const}(e):(()=>{throw new vt("Unknown expression")})()}function oe(e,t={}){return{...t,[wt]:"Literal",const:e,type:typeof e}}function ie(e={}){return{...e,[wt]:"Boolean",type:"boolean"}}function ae(e={}){return{...e,[wt]:"Number",type:"number"}}function se(e={}){return{...e,[wt]:"String",type:"string"}}function ce(e){return function(e){const t=Z(e.pattern);return ee(t)?[...ne(t)]:[]}(e).map((e=>e.toString()))}function de(e){return e.reduce(((e,t)=>[...e,...le(t)]),[])}function ue(e){return[e.toString()]}function le(e){return[...new Set(C(e)?ce(e):N(e)?de(e.anyOf):T(e)?ue(e.const):A(e)||w(e)?["[number]"]:[])]}function pe(e,t){return e.map((e=>fe(e,t)))}function fe(e,t){return I(e)?function(e,t){return we(function(e){return e.filter((e=>!v(e)))}(pe(e,t)))}(e.allOf,t):N(e)?function(e,t){return X(pe(e,t))}(e.anyOf,t):M(e)?function(e,t){return t in e?e[t]:"[number]"===t?X(e):$()}(e.items??[],t):b(e)?function(e,t){return"[number]"===t?e:$()}(e.items,t):O(e)?function(e,t){return t in e?e[t]:$()}(e.properties,t):$()}function me(e,t){return t.map((t=>fe(e,t)))}function he(e,t={}){const[r,n,o]=[!1,e.length,e.length];return e.length>0?{...t,[wt]:"Tuple",type:"array",items:L(e),additionalItems:r,minItems:n,maxItems:o}:{...t,[wt]:"Tuple",type:"array",minItems:n,maxItems:o}}function ye(e,t){const r=t??!0;return x(e)?function(e,t){const r=function(e,t){return function(e,t){return globalThis.Object.getOwnPropertyNames(e).reduce(((r,n)=>({...r,[n]:ye(e[n],t)})),{})}(e.properties,t)}(e,t);return z(r)}(e,r):function(e,t){return!1===t?function(e){return j(F(e),[gt])}(e):function(e){return{...F(e),[gt]:"Optional"}}(e)}(e,r)}function ge(e,t){const r=e.every((e=>O(e))),n=B(t.unevaluatedProperties)?{unevaluatedProperties:F(t.unevaluatedProperties)}:{};return!1===t.unevaluatedProperties||B(t.unevaluatedProperties)||r?{...t,...n,[wt]:"Intersect",type:"object",allOf:L(e)}:{...t,...n,[wt]:"Intersect",allOf:L(e)}}function be(e){return e.map((e=>g(e)?function(e){return j(e,[gt])}(e):e))}function we(e,t={}){if(0===e.length)return $(t);if(1===e.length)return F(e[0],t);if(e.some((e=>U(e))))throw new Error("Cannot intersect transform types");return function(e,t){return function(e){return e.every((e=>g(e)))}(e)?ye(ge(be(e),t)):ge(be(e),t)}(e,t)}function Se(e,t={}){if(0===e.length)return $(t);if(1===e.length)return F(e[0],t);if(e.some((e=>U(e))))throw new Error("Cannot intersect transform types");return ge(e,t)}function Ie(e){return e.reduce(((e,t)=>[...e,Ee(t)]),[])}function Ee(e){return I(e)?function(e){const t=function(e){return e.reduce(((e,t)=>[...e,...t]),[])}(Ie(e));return t}(e.allOf):N(e)?function(e){const t=function(e){return 1===e.length?e[0]:e.length>1?function(e,t){return e.reduce(((e,t)=>function(e,t){return e.filter((e=>t.includes(e)))}(e,t)),t)}(e.slice(1),e[0]):[]}(Ie(e));return t}(e.anyOf):M(e)?function(e){return e.map(((e,t)=>t.toString()))}(e.items??[]):b(e)?(e.items,["[number]"]):O(e)?function(e){return globalThis.Object.getOwnPropertyNames(e)}(e.properties):R(e)?(e.patternProperties,[]):[]}function Te(e,t){return e.reduce(((e,r)=>function(e){return e.filter((e=>!v(e)))}([...e,...me(r,[t])])),[])}function De(e,t={}){const r=function(e,t){return t.reduce(((t,r)=>({...t,[r]:we(Te(e,r))})),{})}(e,function(e){return e.reduce(((e,t)=>function(e){return[...new Set(e)]}([...e,...Ee(t)])),[])}(e));return At(r,t)}function xe(e={}){return{...e,[wt]:"Null",type:"null"}}function ve(e={}){return{...e,[wt]:"Unknown"}}function Ae(e,t={}){if(c(e))throw new Error("Enum undefined or empty");const r=globalThis.Object.getOwnPropertyNames(e).filter((e=>isNaN(e))).map((t=>e[t]));return H([...new Set(r)].map((e=>oe(e))),{...t,[bt]:"Enum"})}function Oe(e,t){return I(e)?Se(function(e,t){return e.map((e=>Oe(e,t)))}(e.allOf,t)):N(e)?H(function(e,t){return e.map((e=>Oe(e,t)))}(e.anyOf,t)):O(e)?At(function(e,t){return t.reduce(((e,t)=>function(e,t){const{[t]:r,...n}=e;return n}(e,t)),e)}(e.properties,t)):At({})}function Re(e,t,r={}){if(D(t))return function(e,t,r){const n=function(e,t,r){return function(e,t,r){return t.reduce(((t,n)=>({...t,...Pe(e,n,r)})),{})}(e,t.keys,r)}(e,t,r);return z(n)}(e,t,r);if(x(e))return function(e,t,r){return z(function(e,t,r){return function(e,t,r){return globalThis.Object.getOwnPropertyNames(e).reduce(((n,o)=>({...n,[o]:Re(e[o],t,r)})),{})}(e.properties,t,r)}(e,t,r))}(e,t,r);const n=B(t)?le(t):t;return{...j(e,[yt,"$id","required"]),...F(Oe(e,n),r)}}function Pe(e,t,r){return{[t]:Re(e,[t],r)}}function ke(e,t){return I(e)?Se(function(e,t){return e.map((e=>ke(e,t)))}(e.allOf,t)):N(e)?H(function(e,t){return e.map((e=>ke(e,t)))}(e.anyOf,t)):O(e)?At(function(e,t){return t.reduce(((t,r)=>r in e?{...t,[r]:e[r]}:t),{})}(e.properties,t)):At({})}function Ce(e,t,r={}){if(D(t))return function(e,t,r){const n=function(e,t,r){return function(e,t,r){return t.reduce(((t,n)=>({...t,...Ue(e,n,r)})),{})}(e,t.keys,r)}(e,t,r);return z(n)}(e,t,r);if(x(e))return function(e,t,r){return z(function(e,t,r){return function(e,t,r){return globalThis.Object.getOwnPropertyNames(e).reduce(((n,o)=>({...n,[o]:Ce(e[o],t,r)})),{})}(e.properties,t,r)}(e,t,r))}(e,t,r);const n=B(t)?le(t):t;return{...j(e,[yt,"$id","required"]),...F(ke(e,n),r)}}function Ue(e,t,r){return{[t]:Ce(e,[t],r)}}function Me(e,t,r){return{...r,[wt]:"Record",type:"object",patternProperties:{[e]:F(t)}}}function Ne(e,t,r){const n=e.reduce(((e,r)=>({...e,[r]:F(t)})),{});return At(n,{...r,[bt]:"Record"})}function Be(e,t,r={}){return N(e)?function(e,t,r){return Ne(le(H(e)),t,r)}(e.anyOf,t,r):C(e)?function(e,t,r){return ee(Z(e.pattern))?Ne(le(e),t,r):Me(e.pattern,t,r)}(e,t,r):T(e)?function(e,t,r){return Ne([e.toString()],t,r)}(e.const,t,r):w(e)||A(e)?function(e,t,r){return Me(St,t,r)}(0,t,r):P(e)?function(e,t,r){return Me(e.source,t,r)}(e,t,r):k(e)?function(e,t,r){return Me(c(e.pattern)?It:e.pattern,t,r)}(e,t,r):$(r)}function _e(e){return new Ot(e)}var Le={withStackTrace:!1},Fe=(e,t,r=Le)=>({data:t.isOk()?{type:"Ok",value:t.value}:{type:"Err",value:t.error},message:e,stack:r.withStackTrace?(new Error).stack:void 0}),qe=class r{constructor(e){this._promise=e}static fromSafePromise(e){const t=e.then((e=>new Je(e)));return new r(t)}static fromPromise(e,t){const n=e.then((e=>new Je(e))).catch((e=>new We(t(e))));return new r(n)}static fromThrowable(t,n){return(...o)=>new r((()=>e(this,0,void 0,(function*(){try{return new Je(yield t(...o))}catch(e){return new We(n?n(e):e)}})))())}static combine(e){return Ve(e)}static combineWithAllErrors(e){return He(e)}map(t){return new r(this._promise.then((r=>e(this,0,void 0,(function*(){return r.isErr()?new We(r.error):new Je(yield t(r.value))})))))}mapErr(t){return new r(this._promise.then((r=>e(this,0,void 0,(function*(){return r.isOk()?new Je(r.value):new We(yield t(r.error))})))))}andThen(e){return new r(this._promise.then((t=>{if(t.isErr())return new We(t.error);const n=e(t.value);return n instanceof r?n._promise:n})))}orElse(t){return new r(this._promise.then((r=>e(this,0,void 0,(function*(){return r.isErr()?t(r.error):new Je(r.value)})))))}match(e,t){return this._promise.then((r=>r.match(e,t)))}unwrapOr(e){return this._promise.then((t=>t.unwrapOr(e)))}safeUnwrap(){return function(e,r,n){function o(e){u[e]&&(d[e]=function(t){return new Promise((function(r,n){l.push([e,t,r,n])>1||i(e,t)}))})}function i(e,r){try{(n=u[e](r)).value instanceof t?Promise.resolve(n.value.v).then(a,s):c(l[0][2],n)}catch(e){c(l[0][3],e)}var n}function a(e){i("next",e)}function s(e){i("throw",e)}function c(e,t){e(t),l.shift(),l.length&&i(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,u=function*(){return yield t(yield t(yield*function(e){function r(r,i){n[r]=e[r]?function(n){return(o=!o)?{value:t(e[r](n)),done:"return"===r}:i?i(n):n}:i}var n,o;return n={},r("next"),r("throw",(function(e){throw e})),r("return"),n[Symbol.iterator]=function(){return this},n}(function(e){function t(t){r[t]=e[t]&&function(r){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(r=e[t](r)).done,r.value)}))}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)}(yield t(this._promise.then((e=>e.safeUnwrap())))))))}.apply(e,r||[]),l=[];return d={},o("next"),o("throw"),o("return"),d[Symbol.asyncIterator]=function(){return this},d}(this,arguments)}then(e,t){return this._promise.then(e,t)}},je=e=>new qe(Promise.resolve(new We(e)));qe.fromPromise,qe.fromSafePromise,qe.fromThrowable;var $e,ze,Ye=e=>{let t=Ke([]);for(const r of e){if(r.isErr()){t=Ge(r.error);break}t.map((e=>e.push(r.value)))}return t},Ve=e=>qe.fromSafePromise(Promise.all(e)).andThen(Ye),Xe=e=>{let t=Ke([]);for(const r of e)r.isErr()&&t.isErr()?t.error.push(r.error):r.isErr()&&t.isOk()?t=Ge([r.error]):r.isOk()&&t.isOk()&&t.value.push(r.value);return t},He=e=>qe.fromSafePromise(Promise.all(e)).andThen(Xe);(ze=$e||($e={})).fromThrowable=function(e,t){return(...r)=>{try{const t=e(...r);return Ke(t)}catch(e){return Ge(t?t(e):e)}}},ze.combine=function(e){return Ye(e)},ze.combineWithAllErrors=function(e){return Xe(e)};var Ke=e=>new Je(e),Ge=e=>new We(e),Je=class{constructor(e){this.value=e}isOk(){return!0}isErr(){return!this.isOk()}map(e){return Ke(e(this.value))}mapErr(e){return Ke(this.value)}andThen(e){return e(this.value)}orElse(e){return Ke(this.value)}asyncAndThen(e){return e(this.value)}asyncMap(e){return qe.fromSafePromise(e(this.value))}unwrapOr(e){return this.value}match(e,t){return e(this.value)}safeUnwrap(){const e=this.value;return function*(){return e}()}_unsafeUnwrap(e){return this.value}_unsafeUnwrapErr(e){throw Fe("Called `_unsafeUnwrapErr` on an Ok",this,e)}},We=class{constructor(e){this.error=e}isOk(){return!1}isErr(){return!this.isOk()}map(e){return Ge(this.error)}mapErr(e){return Ge(e(this.error))}andThen(e){return Ge(this.error)}orElse(e){return e(this.error)}asyncAndThen(e){return je(this.error)}asyncMap(e){return je(this.error)}unwrapOr(e){return e}match(e,t){return t(this.error)}safeUnwrap(){const e=this.error;return function*(){throw yield Ge(e),new Error("Do not use this generator out of `safeTry`")}()}_unsafeUnwrap(e){throw Fe("Called `_unsafeUnwrap` on an Err",this,e)}_unsafeUnwrapErr(e){return this.error}};$e.fromThrowable;var Qe,Ze,et={ArrayBuffer:globalThis.ArrayBuffer,Blob:globalThis.Blob,DataView:globalThis.DataView,Document:globalThis.Document,FormData:globalThis.FormData,Headers:globalThis.Headers,Node:globalThis.Node,ReadableStream:globalThis.ReadableStream,Request:globalThis.Request,Response:globalThis.Response,TextDecoder:globalThis.TextDecoder,TextEncoder:globalThis.TextEncoder,URL:globalThis.URL,URLSearchParams:globalThis.URLSearchParams,XMLHttpRequest:globalThis.XMLHttpRequest,Date:globalThis.Date,Promise:globalThis.Promise,document:globalThis.document,location:globalThis.location,self:globalThis.self,top:globalThis.top,addEventListener:globalThis.addEventListener?.bind(globalThis),clearInterval:globalThis.clearInterval?.bind(globalThis),clearTimeout:globalThis.clearTimeout?.bind(globalThis),fetch:globalThis.fetch?.bind(globalThis),getComputedStyle:globalThis.getComputedStyle?.bind(globalThis),removeEventListener:globalThis.removeEventListener?.bind(globalThis),setInterval:globalThis.setInterval?.bind(globalThis),setTimeout:globalThis.setTimeout?.bind(globalThis)},tt=250,rt=e=>e,nt=e=>e,ot=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+((t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_")),""),it=class{storage=new Map;get=e=>this.storage.get(e);set=(e,t)=>{this.storage.set(e,t)};delete=e=>{this.storage.delete(e)}},at=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map((e=>[e.name,e])),st=new Map(at),ct=class e extends Error{name="NonError";constructor(t){super(e._prepareSuperMessage(t))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}},dt=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ut=new WeakSet,lt=e=>st.get(e)??Error,pt=({from:e,seen:t,to:n,forceEnumerable:o,maxDepth:i,depth:a,useToJSON:s,serialize:c})=>{if(n||(n=Array.isArray(e)?[]:!c&&r(e)?new(lt(e.name)):{}),t.push(e),a>=i)return n;if(s&&"function"==typeof e.toJSON&&!ut.has(e))return(e=>{ut.add(e);const t=e.toJSON();return ut.delete(e),t})(e);const d=e=>pt({from:e,seen:[...t],forceEnumerable:o,maxDepth:i,depth:a,useToJSON:s,serialize:c});for(const[r,o]of Object.entries(e))if(o&&o instanceof Uint8Array&&"Buffer"===o.constructor.name)n[r]="[object Buffer]";else if(null===o||"object"!=typeof o||"function"!=typeof o.pipe){if("function"!=typeof o)if(o&&"object"==typeof o)t.includes(e[r])?n[r]="[Circular]":(a++,n[r]=d(e[r]));else try{n[r]=o}catch{}}else n[r]="[object Stream]";for(const{property:t,enumerable:i}of dt)void 0!==e[t]&&null!==e[t]&&Object.defineProperty(n,t,{value:r(e[t])?d(e[t]):e[t],enumerable:!!o||i,configurable:!0,writable:!0});return n},ft=e=>null===e?null:r(e)?function(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=t;return"object"==typeof e&&null!==e?pt({from:e,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e}(e):Array.isArray(e)?e.map(ft):"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,ft(t)]))):e,mt=e=>null===e?null:r(e)?function(e,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(e instanceof Error)return e;if(function(e){return Boolean(e)&&"object"==typeof e&&"message"in e&&!Array.isArray(e)}(e)){const t=lt(e.name);return pt({from:e,seen:[],to:new t,maxDepth:r,depth:0,serialize:!1})}return new ct(e)}(e):Array.isArray(e)?e.map(mt):"object"==typeof e?Object.fromEntries(Object.entries(e).map((([e,t])=>[e,mt(t)]))):e,ht=class{constructor(e,t){this.pendingRequestStorage=e,this.namespace=t}useParentFrame=e=>{const t=et.top;if(null===t)throw new Error("Parent frame not found.");return((e,t)=>{return r=(r,n)=>qe.fromPromise((async(e,t,r,n)=>{const{timeoutMs:o=tt}=r,{message:i}=await(async(e,t,{serialize:r=rt,postMessage:n,namespace:o})=>{if("string"!=typeof e)throw new Error("Property must be a string");const i={type:"request",method:e,args:t,bridgeId:ot(),messageId:ot(),namespace:o};return{message:i,response:await n(r(i))}})(e,t,r);return new Promise(((e,t)=>{const r=et.setTimeout((()=>{t(new Error("Timeout")),n.delete(i.messageId)}),o);n.set(i.messageId,{resolve:e,reject:t,timeoutId:r})}))})(r,n,e,t),(e=>e instanceof Error?e:new Error("Unknown error"))),new Proxy({},{get:(e,t)=>(...e)=>r(t,e)});var r})({...e,postMessage:e=>t.postMessage(e,"*"),deserialize:mt,serialize:ft,namespace:this.namespace},this.pendingRequestStorage)}},yt=Symbol.for("TypeBox.Transform"),gt=Symbol.for("TypeBox.Optional"),bt=Symbol.for("TypeBox.Hint"),wt=Symbol.for("TypeBox.Kind"),St="^(0|[1-9][0-9]*)$",It="^(.*)$",Et=class extends Error{constructor(e){super(e)}},Tt=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"],Dt=class extends Et{},xt=class extends Et{},vt=class extends Et{},At=function(e,t={}){const r=globalThis.Object.getOwnPropertyNames(e),n=r.filter((t=>g(e[t]))),o=r.filter((e=>!n.includes(e))),i=B(t.additionalProperties)?{additionalProperties:F(t.additionalProperties)}:{},a=r.reduce(((t,r)=>({...t,[r]:F(e[r])})),{});return o.length>0?{...t,...i,[wt]:"Object",type:"object",properties:a,required:o}:{...t,...i,[wt]:"Object",type:"object",properties:a}};(Ze=Qe||(Qe={}))[Ze.Union=0]="Union",Ze[Ze.True=1]="True",Ze[Ze.False=2]="False";var Ot=class{schema;constructor(e){this.schema=e}Decode(e){return new Rt(this.schema,e)}},Rt=class{schema;decode;constructor(e,t){this.schema=e,this.decode=t}EncodeTransform(e,t){const r={Encode:r=>t[yt].Encode(e(r)),Decode:e=>this.decode(t[yt].Decode(e))};return{...t,[yt]:r}}EncodeSchema(e,t){const r={Decode:this.decode,Encode:e};return{...t,[yt]:r}}Encode(e){const t=F(this.schema);return U(t)?this.EncodeTransform(e,t):this.EncodeSchema(e,t)}};At({sessionId:ye(se()),netloc:se(),pathname:se(),simpleDom:se(),isShopify:ie(),version:ye(oe("1"))}),At({cartTotal:ae()});var Pt,kt=H([oe("1"),oe("n")]),Ct=((Pt=Ct||{})[Pt.CLICK=0]="CLICK",Pt[Pt.CLICK_TEXT=1]="CLICK_TEXT",Pt[Pt.CAPTURE=2]="CAPTURE",Pt[Pt.INPUT_COUPON=3]="INPUT_COUPON",Pt[Pt.COMPLETE=4]="COMPLETE",Pt[Pt.PAGE_PREPARATION_COMPLETE=5]="PAGE_PREPARATION_COMPLETE",Pt);Ae(Ct);var Ut,Mt=((Ut=Mt||{})[Ut.XPATH=0]="XPATH",Ut[Ut.SELECTOR=1]="SELECTOR",Ut),Nt=Ae(Mt),Bt=At({task:oe(0),nodeId:se(),id:se(),value:H([se(),q(se())]),cacheType:Nt,elementString:se()}),_t=At({task:oe(1),textValue:se(),id:se()}),Lt=At({task:oe(2),id:se()}),Ft=At({task:oe(3),nodeId:se(),id:se(),value:H([se(),q(se())]),cacheType:Nt}),qt=H([Bt,_t,Lt,Ft,At({task:oe(4),id:se()}),At({task:oe(5),id:se()})]),jt=Re(qt,["value","elementString","cacheType"]);At({sessionId:ye(se()),netloc:se(),pathname:se(),simpleDom:se(),couponOrder:kt,isShopify:ie(),runId:se(),couponCode:se(),version:ye(oe("1"))}),At({action:jt,runId:se()}),At({sessionId:ye(se()),netloc:se(),pathname:se(),simpleDom:se(),couponOrder:kt,isShopify:ie(),couponCode:se(),version:ye(oe("1"))}),At({action:jt,runId:se()}),At({cartTotalSelector:se(),revealSelector:se(),inputSelector:se(),applySelector:se()}),At({netloc:se(),pathname:se(),simpleDom:se(),isShopify:ie()}),At({inputNodeId:se(),applyNodeId:se()});var $t,zt,Yt=(($t=Yt||{})[$t.CLICK=0]="CLICK",$t[$t.INPUT=1]="INPUT",$t[$t.COMPLETE=2]="COMPLETE",$t),Vt=At({type:oe(0),nodeId:se()}),Xt=((zt=Xt||{})[zt.CARD_NUMBER=0]="CARD_NUMBER",zt[zt.CARD_CVV=1]="CARD_CVV",zt[zt.CARD_NAME_FIRSTNAME_LASTNAME=2]="CARD_NAME_FIRSTNAME_LASTNAME",zt[zt.CARD_NAME_FIRSTNAME=3]="CARD_NAME_FIRSTNAME",zt[zt.CARD_NAME_LASTNAME=4]="CARD_NAME_LASTNAME",zt[zt.CARD_EXPIRY_MMYY=5]="CARD_EXPIRY_MMYY",zt[zt.CARD_EXPIRY_MM=6]="CARD_EXPIRY_MM",zt[zt.CARD_EXPIRY_YY=7]="CARD_EXPIRY_YY",zt[zt.CARD_EXPIRY_MMYYYY=8]="CARD_EXPIRY_MMYYYY",zt[zt.CARD_EXPIRY_YYYY=9]="CARD_EXPIRY_YYYY",zt),Ht=Ae(Xt),Kt=H([Vt,At({type:oe(1),nodeId:se(),token:Ht}),At({type:oe(2)})]);At({netloc:se(),pathname:se(),dom:se(),isShopify:ie(),runId:ye(se())}),At({actions:q(Kt),runId:se()}),At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),name:se(),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),idForRetailerActivation:se(),isInternal:ie(),isUGCCaptureEnabled:ie()});var Gt=At({hash:se(),id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:se(),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:se(),userAgent:H([ye(se()),xe()]),sdkUserId:se(),sdkVersion:se(),caaVersion:ae()});var Jt=At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:se(),pathname:se(),actions:q(ve()),currentTaskType:H([ye(se()),xe()]),taskSequence:q(se()),hashSequence:q(se()),couponOrder:H([ye(se()),xe()]),isSuccessful:ie(),sessionId:H([ye(se()),xe()])});At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:se(),pathname:se(),regionHash:se(),regionSelectors:q(se()),actions:q(ve()),taskType:se(),isShopify:ie(),disabled:ie(),lastUsedAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()])});var Wt=At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),rootDomain:se(),domain:se(),hostname:se(),disabled:ie(),autoCrpDetectionDisabled:ie()}),Qt=At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),websiteId:se(),hostnameMatch:se(),pathnameMatch:H([ye(se()),xe()]),queryMatch:H([ye(ve()),xe()]),urlRegexMatch:H([ye(se()),xe()]),pathnameRegex:H([ye(se()),xe()]),elementMatchSelectors:q(se()),promotedRealtimeCouponPageId:H([ye(se()),xe()]),isAutoApplyEnabled:ie(),disabled:ie(),isGeneratedElementMatchSelector:ie()});At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),websiteId:se(),hostname:se(),pathname:se(),pathnameRegex:H([ye(se()),xe()]),query:H([ye(ve()),xe()]),couponDetailId:H([ye(se()),xe()]),isCouponPage:ie(),disabled:ie()});var Zt=At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),elementMatchSelectors:q(se()),isAutoApplyEnabled:ie()});At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:se(),pathname:se(),regionHash:se(),regionSelectors:q(se()),values:q(se()),isShopify:ie(),disabled:ie(),usageCount:ae()});var er=At({id:se(),strackrId:se(),inNetworkId:se(),strackrNetworkId:se(),inNetworkOrderId:H([ye(se()),xe()]),country:se(),activatedAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),clickedAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),soldAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:H([ye(se()),xe()]),passbackUid:H([ye(se()),xe()]),passbackData:H([ye(se()),xe()]),cashbackOfferActivationShortId:H([ye(se()),xe()]),couponActivationShortId:H([ye(se()),xe()]),promotionActivationShortId:H([ye(se()),xe()]),currencyCode:se(),orderValue:ae(),commission:ae(),commissionPercentage:ae(),cashback:ae(),cashbackPercentage:ae(),expectedCommissionPercentage:H([ye(ae()),xe()]),expectedCashbackPercentage:H([ye(ae()),xe()]),maximumCommissionFeeAbsolutePercentage:ae(),commissionFeePercentage:ae()});At({id:se(),strackrId:se(),inNetworkId:se(),strackrNetworkId:se(),inNetworkOrderId:H([ye(se()),xe()]),country:se(),activatedAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),clickedAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),soldAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:H([ye(se()),xe()]),passbackUid:H([ye(se()),xe()]),passbackData:H([ye(se()),xe()]),transactionId:se(),currencyCode:se(),orderValue:ae(),commission:ae(),commissionPercentage:ae(),cashback:ae(),cashbackPercentage:ae(),expectedCommissionPercentage:H([ye(ae()),xe()]),expectedCashbackPercentage:H([ye(ae()),xe()]),maximumCommissionFeeAbsolutePercentage:ae(),commissionFeePercentage:ae()}),At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),code:se(),organizationId:se(),hostname:se(),pathname:se(),isShopify:ie()}),At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:se(),pathname:se(),classificationConfidence:H([ye(ae()),xe()]),hasCouponSupport:H([ye(ie()),xe()]),hasCouponSupportConfidence:H([ye(ae()),xe()]),lastVisitedAt:H([ye(_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))),xe()]),visitCount:ae(),websiteId:se()}),At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),pageId:se(),selector:se(),lastUsedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});var tr=At({id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),hostname:se(),requestHostname:se(),requestPathnameRegex:H([ye(se()),xe()])}),rr=At({featured:ie(),hostname:se(),id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),logo:H([ye(se()),xe()]),name:se(),overrideLogo:H([ye(se()),xe()]),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),url:se()});At({affiliateUrl:se(),id:se(),inNetworkId:se(),inNetworkLogo:H([ye(se()),xe()]),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),name:se(),networkId:se(),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});var nr=At({active:ie(),category:H([ye(se()),xe()]),commissionFeePercentage:ae(),countries:q(se()),description:H([ye(se()),xe()]),expectedCommissionPercentage:ae(),featured:ie(),id:se(),inNetworkAffiliateUrl:se(),inNetworkId:se(),inProviderId:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),maximumCommissionFeeAbsolutePercentage:ae(),maximumFixedCommissionFee:H([ye(ae()),xe()]),networkId:se(),networkName:se(),overrideAffiliateUrl:H([ye(se()),xe()]),retailerId:se(),termsAndExclusions:H([ye(se()),xe()]),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});At({cashbackOfferId:se(),id:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:se(),overrideActive:ie(),rankingOverride:H([ye(ae()),xe()]),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))}),At({cashbackOfferId:se(),commissionFeePercentageAtActivation:ae(),expectedCashbackPercentageAtActivation:ae(),expectedCommissionPercentageAtActivation:ae(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),maximumCommissionFeeAbsolutePercentageAtActivation:ae(),organizationId:se(),passbackData:H([ye(se()),xe()]),passbackUid:se(),shortId:se(),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),urlUsed:se(),userAgent:H([ye(se()),xe()])});var or=At({active:ie(),code:se(),description:se(),descriptionOverride:H([ye(se()),xe()]),endDate:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),id:se(),inNetworkAffiliateUrl:se(),inNetworkId:se(),inProviderId:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),networkId:se(),networkName:se(),retailerId:se(),startDate:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});At({couponId:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:se(),passbackData:H([ye(se()),xe()]),passbackUid:se(),shortId:se(),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),urlUsed:se(),userAgent:H([ye(se()),xe()])});var ir=At({active:ie(),deepLink:se(),description:se(),descriptionOverride:H([ye(se()),xe()]),endDate:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),id:se(),inNetworkAffiliateUrl:se(),inNetworkId:se(),inProviderId:se(),insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),networkId:se(),networkName:se(),retailerId:se(),startDate:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString()))});At({insertedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),organizationId:se(),passbackData:H([ye(se()),xe()]),passbackUid:se(),promotionId:se(),shortId:se(),updatedAt:_e(se()).Decode((e=>new Date(e))).Encode((e=>e.toISOString())),urlUsed:se(),userAgent:H([ye(se()),xe()])});var ar=(e,t)=>{let r=Object.entries(t).filter((e=>void 0!==e[1]));for(let[t,n]of r){let r=e.properties[t];r&&(e.properties[t]={...r,...n})}},sr=De([Ce(nr,["id","featured","countries","maximumFixedCommissionFee","description","category","termsAndExclusions"]),At({cashbackPercentage:ae(),retailerId:se(),logo:ye(se()),url:se(),name:se()})]);ar(sr,{cashbackPercentage:{description:"The percentage of cashback the retailer offers. In decimal form.",examples:[.14]},category:{description:"The category of the cashback offer.",examples:["Electronics"]},countries:{description:"The countries the retailer's cashback offer is available. Format: `ISO 3166-1 alpha-2 code`",examples:[["CA","US"],["CA"]]},featured:{description:"Indicates if the retailer's cashback offer is featured by Sleek for an outstanding deal.",examples:[!0,!1]},id:{description:"The ID of the retailer's cashback offer. Format: `UUID RFC 4122`",examples:["e8400e53-078f-4641-97e2-5c397401c0f0"]},retailerId:{description:"The ID of the retailer associated with the cashback offer. Format: `UUID RFC 4122`",examples:["4f9df53d-16dc-4630-8603-8d14ec40fcfe"]},logo:{description:"URL of the retailer's logo.",examples:["https://example.com/logo.png"]},name:{description:"The name of the cashback offer's retailer.",examples:["BestBuy"]},maximumFixedCommissionFee:{description:"The fixed cashback the retailer's offer. If null, the retailer offers a percentage.",examples:[75,null]},description:{description:"The description of the fixed cashback offer.",examples:["$75.00 cashback on all orders.","Get up to $75.00 cashback on all orders over $500.",null]},termsAndExclusions:{description:"The terms and exclusions of the cashback offer.",examples:["Excludes all Apple products","Minimum purchase of $50.00 required."]},url:{description:"The url of the retailer's website.",examples:["https://www.bestbuy.com"]}});var cr=e=>At({data:q(e),cursor:ye(se({description:"The ID of the next item in the list. Defined if there are more items to fetch. Pass this as the `cursor` query parameter to fetch the next page. Format: `UUID RFC 4122`",title:"Cursor",examples:["21171097-94a2-4ad9-bfe7-6bb84704dd83","dd329acc-6ee6-46af-8c8e-a4ceb2e3cf60","b2ad0802-e632-4edd-b074-8112e3d065c5"]}))});cr(sr);var dr=Ce(tr,["requestHostname","requestPathnameRegex"]),ur=(e=>(e[e.XmlHttpRequest=0]="XmlHttpRequest",e[e.Fetch=1]="Fetch",e))(ur||{}),lr=At({stringifiedBody:ye(se()),didBodyExceedMaxSize:ie(),headers:ye(q(he([se(),se()]))),method:se(),requestType:Ae(ur),url:se()}),pr=At({stringifiedBody:ye(se()),didBodyExceedMaxSize:ie(),statusCode:ye(ae()),headers:ye(q(he([se(),se()])))}),fr=At({request:lr,response:pr}),mr=At({cartTotalBefore:ae(),cartTotalAfter:ae(),codeValue:se(),requestResponsePairs:q(fr)});At({pageUrl:se(),couponTrappedNetworkRequests:q(mr)}),At({status:oe("ok")}),q(dr);var hr=Ce(Zt,["elementMatchSelectors","isAutoApplyEnabled"]);At({url:se(),cleanDom:se(),title:se()}),At({data:H([xe(),ye(hr)])}),At({id:se()}),At({sdkUserId:se(),sdkVersion:se(),url:ye(se()),isShopify:ye(ie())});var yr=H([se(),ae(),ie(),xe()]),gr=Be(se(),yr);q(At({eventId:ye(se()),event:se(),distinctId:se(),timestamp:se(),properties:gr,additionalProperties:ye(se()),dataSink:ye(se())})),At({status:oe("ok")}),Be(se(),H([se(),xe()]));var br=Ce(Qt,["hostnameMatch","pathnameMatch","urlRegexMatch","pathnameRegex","elementMatchSelectors","isAutoApplyEnabled","queryMatch"]);At({data:H([xe(),ye(q(br))])});var wr=De([Ce(er,["id","country","clickedAt","soldAt","updatedAt","currencyCode","orderValue","cashback"]),At({activatedAt:se(),passbackUid:se(),passbackData:ye(se()),status:H([oe("PENDING"),oe("DECLINED"),oe("CONFIRMED")]),cashbackOfferId:ye(se()),couponId:ye(se()),promotionId:ye(se())})]);ar(wr,{id:{description:"The unique identifier for the transaction. Format: `UUID RFC 4122`",examples:["4812f869-dd9a-48e2-8dae-1658cb4569bf"]},country:{description:"The country where the transaction was made. Format: `ISO 3166-1 alpha-2 code`",examples:["US"]},clickedAt:{description:"The date and time the user clicked on the link. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},soldAt:{description:"The date and time the user made the purchase. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},updatedAt:{description:"The date and time the transaction was last updated. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},currencyCode:{description:"The currency code of the transaction. Format: `ISO 4217`",examples:["USD"]},orderValue:{description:"The total value of the order.",examples:[112.4]},cashback:{description:"The cashback amount.",examples:[23.14]},activatedAt:{description:"The date and time the deal was activated. Format: `ISO 8601`",examples:["2021-09-01T12:00:00"]},passbackUid:{description:"The unique identifier that was given during retailer activation.",examples:["your_uid_here"]},passbackData:{description:"The data field that was given during retailer activation.",examples:["your_data_here"]},status:{description:"The status of the transaction.",examples:["CONFIRMED"]},cashbackOfferId:{description:"If the transaction occurred as a result of a cashback offer activation, this field is set to the `id` of the cashback offer.",examples:["10c39198-ce3f-45ea-a7ae-fab4a2ba936a"]},couponId:{description:"If the transaction occurred as a result of a coupon activation, this field is set to the `id` of the coupon.",examples:["ad2b56ad-3f14-4587-9d2d-88612479e30f"]},promotionId:{description:"If the transaction occurred as a result of a promotion activation, this field is set to the `id` of the promotion.",examples:["efe308d6-63c7-472e-ac8d-5f722322052b"]}}),cr(wr),q(At({code:se(),hostname:se(),pathname:se(),isShopify:ie()})),At({status:oe("ok")}),Re(Gt,["id","insertedAt","updatedAt"]);var Sr=H([oe("REVEAL_INPUT"),oe("REVEAL_APPLY"),oe("REMOVE_COUPON"),oe("INPUT_COUPON"),oe("APPLY_COUPON"),oe("CLOSE_DIALOG"),oe("CONFIRM_COUPON")]),Ir=Re(qt,["nodeId"]),Er=De([Re(Jt,["actions","currentTaskType"]),At({actions:q(Ir),currentTaskType:H([Sr,xe()])})]);Re(Er,["id","insertedAt","updatedAt"]),q(At({retailerName:se(),retailerUrl:se(),retailerLogo:H([se(),xe()]),coupons:ae()})),At({task:ye(Sr),couponAction:ye(qt)});var Tr=De([Ce(or,["code","id","description","startDate","endDate"]),At({retailerId:se(),name:se(),url:se(),logo:ye(se())})]);ar(Tr,{code:{description:"The coupon code value.",examples:["SAVE20","FREESHIP"]},id:{description:"The unique identifier for the coupon. Format: `UUID RFC 4122`",examples:["ea0efd78-2c3c-4efd-9e92-1ab676ee304b"]},description:{description:"The description of the coupon.",examples:["Use SAVE20 coupon code to get 20% off."]},startDate:{description:"The date and time when the coupon becomes active. Format: `ISO 8601`",examples:["2024-01-01T00:00:00"]},endDate:{description:"The date and time when the coupon expires. Format: `ISO 8601`",examples:["2024-12-31T23:59:59"]},retailerId:{description:"The ID of the retailer associated with the coupon offer. Format: `UUID RFC 4122`",examples:["4f9df53d-16dc-4630-8603-8d14ec40fcfe"]},name:{description:"The name of the retailer associated with the coupon.",examples:["BestBuy"]},url:{description:"The URL of the retailer's website where the coupon can be used.",examples:["https://www.bestbuy.com"]},logo:{description:"The URL of the retailer's logo associated with the coupon.",examples:["https://www.bestbuy.com/logo.png"]}});var Dr=De([Ce(ir,["id","description","startDate","endDate","deepLink"]),At({retailerId:se(),name:se(),url:se(),logo:ye(se())})]);ar(Dr,{id:{description:"The unique identifier for the promotion. Format: `UUID RFC 4122`",examples:["ce0839f8-b522-41a4-9c09-5f3e510fb2d9"]},description:{description:"The description of the promotion.",examples:["Free shipping on all orders over $50."]},startDate:{description:"The date and time when the promotion becomes active. Format: `ISO 8601`",examples:["2024-01-01T00:00:00"]},endDate:{description:"The date and time when the promotion expires. Format: `ISO 8601`",examples:["2024-12-31T23:59:59"]},deepLink:{description:"The deep link URL for the promotion.",examples:["https://www.bestbuy.com/promotion"]},retailerId:{description:"The ID of the retailer associated with the promotion offer. Format: `UUID RFC 4122`",examples:["4f9df53d-16dc-4630-8603-8d14ec40fcfe"]},name:{description:"The name of the retailer associated with the promotion.",examples:["BestBuy"]},url:{description:"The URL of the retailer's website where the promotion can be used.",examples:["https://www.bestbuy.com"]},logo:{description:"The URL of the retailer's logo associated with the promotion.",examples:["https://www.bestbuy.com/logo.png"]}}),ar(De([Ce(rr,["id","name","hostname","url","logo"]),At({cashbackOffers:q(Re(sr,["retailerId","name","url","logo"])),coupons:q(Re(Tr,["retailerId","name","url","logo"])),promotions:q(Re(Dr,["retailerId","name","url","logo"]))})]),{id:{description:"The unique identifier for the retailer. Format: `UUID RFC 4122`",examples:["4812f869-dd9a-48e2-8dae-1658cb4569bf"]},name:{description:"The name of the retailer.",examples:["BestBuy"]},hostname:{description:"The hostname of the retailer's website.",examples:["bestbuy.com"]},url:{description:"The URL of the retailer's website.",examples:["https://www.bestbuy.com"]},logo:{description:"The URL of the retailer's logo.",examples:["https://www.bestbuy.com/logo.png"]},cashbackOffers:{description:"Cashback offers available for the retailer.",examples:[[{id:"9a8bcb3f-46db-4b01-b2c9-fe1693f99d7ff",featured:!0,countries:["CA","US"],cashbackPercentage:.14,maximumFixedCommissionFee:50,description:"Get up to $75.00 cashback on all orders over $500.",category:"Electronics",termsAndExclusions:"Minimum purchase of $500.00 required."}]]},coupons:{description:"Coupons available for the retailer.",examples:[[{code:"SAVE20",id:"77df23d1-dbf0-4b6c-ba09-5da4dbf484f1",description:"Use SAVE20 coupon code to get 20% off.",startDate:"2024-01-01T00:00:00",endDate:"2024-12-31T23:59:59"}]]},promotions:{description:"Promotions available for the retailer.",examples:[[{id:"eebf1484-f3d2-42f4-a829-5e3f1dcfcecf",description:"Free shipping on all orders over $50.",startDate:"2024-01-01T00:00:00",endDate:"2024-12-31T23:59:59",deepLink:"https://www.bestbuy.com/promotion"}]]}}),De([Ce(Wt,["rootDomain","autoCrpDetectionDisabled","domain","hostname"])]);var xr=e=>e instanceof et.Headers?Array.from(e.entries()):Array.isArray(e)?[...e]:Object.entries(e).map((([e,t])=>[e,String(t)])),vr=e=>e?.method??"GET",Ar=e=>new et.URL(e instanceof et.URL?e.href:Or(e)?e.url:e,et.location.href).href,Or=e=>e instanceof et.Request,Rr=Symbol.for("s_xhr"),Pr=e=>(new et.TextEncoder).encode(e).length,kr=async(e,t=256e3)=>{if("string"==typeof e)return Pr(e)>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:e,didBodyExceedMaxSize:!1};if(e instanceof et.Document)return{stringifiedBody:"Document",didBodyExceedMaxSize:!1};if(e instanceof et.Blob)return e.size>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:await e.text(),didBodyExceedMaxSize:!1};if(e instanceof et.ArrayBuffer)return e.byteLength>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:(new et.TextDecoder).decode(e),didBodyExceedMaxSize:!1};if(e instanceof et.FormData){let r=0;const n={};return e.forEach(((e,t)=>{"string"==typeof e?r+=Pr(e):e instanceof et.Blob&&(r+=e.size),n[t]=e})),r>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:JSON.stringify(n),didBodyExceedMaxSize:!1}}if(e instanceof et.URLSearchParams){const r=e.toString();return Pr(r)>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:r,didBodyExceedMaxSize:!1}}if(e instanceof et.ReadableStream){if(e.locked)return{stringifiedBody:void 0,didBodyExceedMaxSize:!1};const r=e.getReader();let n="",o=0;const i=new et.TextDecoder;let a=!1;for(;!a;){const{value:e,done:s}=await r.read();if(a=s,e){if(o+=e.byteLength,o>t)return r.releaseLock(),{stringifiedBody:void 0,didBodyExceedMaxSize:!0};n+=i.decode(e,{stream:!0})}}return r.releaseLock(),{stringifiedBody:n,didBodyExceedMaxSize:!1}}const r=(e=>{try{return JSON.stringify(e)}catch{return}})(e);return void 0===r?{stringifiedBody:void 0,didBodyExceedMaxSize:!1}:Pr(r)>t?{stringifiedBody:void 0,didBodyExceedMaxSize:!0}:{stringifiedBody:r,didBodyExceedMaxSize:!1}},Cr=Symbol.for("SLEEK_TPM"),Ur=Object.getOwnPropertySymbols(window);new Set(Ur).has(Cr)||(new class{trackedTrappedRequestPayloads=new Map;networkTrapEnabled=!1;tpmPendingRequestStorage=new it;tpmFrameControllerBridge=new ht(this.tpmPendingRequestStorage,"tpm-2-fc");constructor(){var e,t,r,n;e=e=>{et.addEventListener("message",(t=>{e(t.data,t)}))},t=()=>this,r={postMessage:(e,t)=>{t.source?.postMessage(e,{targetOrigin:t.origin})},deserialize:mt,serialize:ft,namespace:"fc-2-tpm"},n=this.tpmPendingRequestStorage,e(((e,o)=>((e,t,r,n,o,i)=>{const{deserialize:a=nt,onError:s}=n,c=(()=>{try{return a(e)}catch(e){if(!s)return;const t=e instanceof Error?e:new Error("Unknown error in deserializing message.");s(t)}})();if("object"!=typeof(d=c)||null===d||!("bridgeId"in d))return;var d;if(c.namespace!==n.namespace)return;if(!new Set(["request"]).has(c.type))return;const u=r(t);var l;if("object"==typeof(l=u)&&null!==l&&!Array.isArray(l))return(async()=>{try{if("request"===c.type)return await(async(e,t,r,n,o)=>{const{serialize:i=rt,postMessage:a}=r,s=await(async(e,t,r)=>{const n=e[t];if("function"!=typeof n)return Ge(new Error(`Bridge method call (${t}) not found.`));try{const e=await n.apply(null,r);return e instanceof We?Ge(e.error):Ke(e instanceof Je?e.value:e)}catch(e){return e instanceof Error?Ge(e):Ge(new Error(`Bridge method call (${t}) failed with a non-error.`))}})(n,e.method,e.args),c=i({type:"response",bridgeId:e.bridgeId,error:s.isErr()?s.error:void 0,result:s.isOk()?s.value:void 0,messageId:e.messageId,namespace:e.namespace});return o&&a(c,t),c})(c,t,n,u,i);if("response"===c.type)return await(async(e,t)=>{const{messageId:r,error:n,result:o}=e,i=t?.get(r);i&&(et.clearTimeout(i.timeoutId),n?i.reject(n):i.resolve(o),t?.delete(r))})(c,i)}catch(e){if(!n.onError)return;const t=e instanceof Error?e:new Error("Unknown error in handling message for bridge.");n.onError(t)}})();n.onError?.(new Error("Bridge is supposed to handle a message but the function factory didn't return a record."))})(e,o,t,r,0,n))),this.overrideFetch(),this.overrideXhr(),et.setInterval((async()=>{(new globalThis.XMLHttpRequest)[Rr]!==Rr&&this.overrideXhr()}),1e3)}startTrappingNetwork=()=>{this.networkTrapEnabled=!0};stopTrappingNetwork=()=>{this.networkTrapEnabled=!1};isTrappingNetwork=()=>this.networkTrapEnabled;checkConnection=()=>!0;waitForRequestsComplete=async(e=[])=>{await new Promise((t=>{let r;const n=et.setInterval((()=>{Array.from(this.trackedTrappedRequestPayloads.values()).some((t=>{return r=t.url,!e.some((e=>r.includes(e.requestHostname)));var r}))?(et.clearTimeout(r),r=void 0):r||(r=et.setTimeout((()=>{et.clearInterval(n),t()}),250))}),100);et.setTimeout((()=>{et.clearInterval(n),et.clearTimeout(r),t()}),1e4)}))};overrideFetch=()=>{var e,t;globalThis.fetch=(e=et.fetch,t={onRequestStart:this.handleRequest,onResponse:this.handleResponse,onComplete:this.handleRequestComplete},new Proxy(e,{apply:async(e,r,n)=>{const o=ot(),i=n[0],a=n[1];(e=>e instanceof et.Request||e instanceof et.URL||"string"==typeof e)(i)&&(void 0===a||(e=>"object"==typeof e&&null!==e)(a))&&((e,r,n)=>{try{const o={headers:Or(r)?xr(r.headers):xr(n?.headers??{}),method:Or(r)?r.method:vr(n),requestId:e,requestType:ur.Fetch,url:Ar(r),body:Or(r)?r?.body:n?.body};t.onRequestStart(o)}catch{}})(o,i,a);try{const i=await Reflect.apply(e,r,n);return i instanceof et.Response&&((e,r)=>{try{const n={headers:xr(r.headers),statusCode:r.status,body:r.body};t.onResponse(e,n)}catch{}})(o,i.clone()),i}finally{(e=>{try{t.onComplete(e)}catch{}})(o)}}}))};overrideXhr=()=>{globalThis.XMLHttpRequest=((e,t)=>new Proxy(e,{construct:(e,r)=>{const n=Reflect.construct(e,r);Object.defineProperty(n,Rr,{value:Rr,writable:!1,enumerable:!1,configurable:!1});const o=ot();let i,a;const s=[];let c;const d=()=>{const e=[];for(const t of n.getAllResponseHeaders().split("\n")){const[r,n]=t.split(":");r&&n&&e.push([r.trim(),n.trim()])}const r=n.response;let i;var a;("string"==typeof(a=r)||a instanceof et.ArrayBuffer||a instanceof et.Blob||a instanceof et.Document||a instanceof et.ReadableStream||"object"==typeof a||null===a)&&(i=r),((e,r)=>{try{const n={body:r.body,headers:r.headers,statusCode:r.statusCode};t.onResponse(e,n)}catch{}})(o,{headers:e,statusCode:n.status,body:i}),(e=>{try{t.onComplete(e)}catch{}})(o)};return n.setRequestHeader=new Proxy(n.setRequestHeader,{apply:(e,t,r)=>{const n=r[0],o=r[1];return"string"==typeof n&&"string"==typeof o&&s.push([n,o]),Reflect.apply(e,t,r)}}),n.open=new Proxy(n.open,{apply:(e,t,r)=>{const n=r[0];"string"==typeof n&&(c=n);const o=r[1];return o instanceof et.URL?i=new et.URL(o.href,et.location.href).href:"string"==typeof o&&(i=new et.URL(o,et.location.href).href),Reflect.apply(e,t,r)}}),n.send=new Proxy(n.send,{apply:(e,r,u)=>{const l=u[0];var p;("string"==typeof(p=l)||p instanceof et.ArrayBuffer||p instanceof et.Blob||p instanceof et.Document||p instanceof et.DataView||p instanceof et.FormData||p instanceof et.URLSearchParams||"object"==typeof p||null===p)&&(a=l);const f=Reflect.apply(e,r,u);return i&&c&&((e,r)=>{try{const n={body:r.body,headers:r.headers,method:r.method,requestId:e,requestType:ur.XmlHttpRequest,url:r.url};t.onRequestStart(n)}catch{}})(o,{url:i,method:c,body:a,headers:s}),4===n.readyState&&d(),f}}),n.addEventListener("loadend",(()=>d())),n}}))(et.XMLHttpRequest,{onRequestStart:this.handleRequest,onResponse:this.handleResponse,onComplete:this.handleRequestComplete})};handleRequest=async e=>{this.networkTrapEnabled&&this.trackedTrappedRequestPayloads.set(e.requestId,e)};handleResponse=(e,t)=>{if(!this.networkTrapEnabled)return;const r=this.trackedTrappedRequestPayloads.get(e);r&&this.processRequestResponsePayload(r,t)};handleRequestComplete=e=>{this.trackedTrappedRequestPayloads.delete(e)};processRequestResponsePayload=async(e,t)=>{const r=await kr(e.body),n={stringifiedBody:r.stringifiedBody,didBodyExceedMaxSize:r.didBodyExceedMaxSize,headers:e.headers,method:e.method,requestType:e.requestType,url:e.url},o=await kr(t.body),i={stringifiedBody:o.stringifiedBody,didBodyExceedMaxSize:o.didBodyExceedMaxSize,statusCode:t.statusCode,headers:t.headers};this.tpmFrameControllerBridge.useParentFrame().handleTrappedRequestResponsePair({request:n,response:i})}},Object.defineProperty(window,Cr,{value:!0}))}();