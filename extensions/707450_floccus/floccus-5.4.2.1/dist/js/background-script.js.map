{"version":3,"file":"background-script.js","mappings":"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","sources":["webpack://floccus/webpack/runtime/chunk loaded","webpack://floccus/webpack/runtime/load script","webpack://floccus/./src/lib/browser/BrowserController.js","webpack://floccus/./src/entries/background-script.js","webpack://floccus/./src/lib/Logger.js","webpack://floccus/./src/lib/adapters/Fake.js","webpack://floccus/./src/lib/browser/BrowserAccountStorage.js","webpack://floccus/./node_modules/lodash/uniqBy.js","webpack://floccus/./node_modules/core-js/internals/is-regexp.js","webpack://floccus/./node_modules/core-js/internals/regexp-get-flags.js","webpack://floccus/./node_modules/core-js/modules/es.string.match-all.js","webpack://floccus/webpack/bootstrap","webpack://floccus/webpack/runtime/amd define","webpack://floccus/webpack/runtime/amd options","webpack://floccus/webpack/runtime/compat get default export","webpack://floccus/webpack/runtime/define property getters","webpack://floccus/webpack/runtime/ensure chunk","webpack://floccus/webpack/runtime/get javascript chunk filename","webpack://floccus/webpack/runtime/global","webpack://floccus/webpack/runtime/harmony module decorator","webpack://floccus/webpack/runtime/hasOwnProperty shorthand","webpack://floccus/webpack/runtime/make namespace object","webpack://floccus/webpack/runtime/node module decorator","webpack://floccus/webpack/runtime/publicPath","webpack://floccus/webpack/runtime/jsonp chunk loading","webpack://floccus/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"floccus:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","import browser from '../browser-api'\nimport Controller from '../Controller'\nimport BrowserAccount from './BrowserAccount'\nimport BrowserTree from './BrowserTree'\nimport Cryptography from '../Crypto'\nimport packageJson from '../../../package.json'\nimport BrowserAccountStorage from './BrowserAccountStorage'\nimport uniqBy from 'lodash/uniqBy'\nimport Account from '../Account'\nimport { STATUS_ALLGOOD, STATUS_DISABLED, STATUS_ERROR, STATUS_SYNCING } from '../interfaces/Controller'\nimport * as Sentry from '@sentry/browser'\n\nconst INACTIVITY_TIMEOUT = 7 * 1000 // 7 seconds\nconst DEFAULT_SYNC_INTERVAL = 15 // 15 minutes\nconst STALE_SYNC_TIME = 1000 * 60 * 60 * 24 * 2 // two days\nconst INTERVENTION_INTERVAL = 1000 * 60 * 60 * 25 * 75 // 75 days\n\nclass AlarmManager {\n  constructor(ctl) {\n    this.ctl = ctl\n  }\n\n  async checkSync() {\n    const accounts = await BrowserAccountStorage.getAllAccounts()\n    const promises = []\n    for (let accountId of accounts) {\n      const account = await Account.get(accountId)\n      const data = account.getData()\n      const lastSync = data.lastSync || 0\n      const interval = data.syncInterval || DEFAULT_SYNC_INTERVAL\n      if (data.scheduled) {\n        promises.push(this.ctl.scheduleSync(accountId))\n        continue\n      }\n      if (data.error && data.errorCount > 1) {\n        if (Date.now() > interval * 2 ** data.errorCount + lastSync) {\n          promises.push(this.ctl.scheduleSync(accountId))\n        }\n        continue\n      }\n      if (\n        Date.now() >\n        interval * 1000 * 60 + lastSync\n      ) {\n        promises.push(this.ctl.scheduleSync(accountId))\n      }\n    }\n    await Promise.all(promises)\n  }\n}\n\nexport default class BrowserController {\n  constructor() {\n    this.schedule = {}\n    this.listeners = []\n\n    this.alarms = new AlarmManager(this)\n\n    this.unlocked = true\n    this.setEnabled(true)\n\n    Controller.singleton = this\n\n    // set up change listener\n    browser.bookmarks.onChanged.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n    browser.bookmarks.onMoved.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n    browser.bookmarks.onRemoved.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n    browser.bookmarks.onCreated.addListener((localId, details) =>\n      this.onchange(localId, details)\n    )\n\n    browser.permissions.contains({permissions: ['history']}).then((historyAllowed) => {\n      if (historyAllowed) {\n        browser.history.onVisited.addListener((historyItem) => this.onVisitUrl(historyItem))\n      }\n    })\n\n    // Set up the alarms\n\n    browser.alarms.create('checkSync', { periodInMinutes: 1 })\n    browser.alarms.onAlarm.addListener(async alarm => {\n      await this.alarms[alarm.name]()\n    })\n\n    // lock accounts when locking is enabled\n\n    browser.storage.local.get('accountsLocked').then(async d => {\n      this.setEnabled(!d.accountsLocked)\n      this.unlocked = !d.accountsLocked\n      if (d.accountsLocked) {\n        this.key = null\n      }\n    })\n\n    // do some cleaning if this is a new version\n\n    browser.storage.local.get(['currentVersion', 'lastInterventionAt']).then(async d => {\n      if (packageJson.version === d.currentVersion) return\n      await browser.storage.local.set({\n        currentVersion: packageJson.version\n      })\n\n      const packageVersion = packageJson.version.split('.')\n      const accounts = await Account.getAllAccounts()\n      const lastVersion = d.currentVersion ? d.currentVersion.split('.') : []\n      if ((packageVersion[0] !== lastVersion[0] || packageVersion[1] !== lastVersion[1]) && accounts.length !== 0) {\n        if (d.lastInterventionAt && d.lastInterventionAt > Date.now() - INTERVENTION_INTERVAL) {\n          return\n        }\n        browser.tabs.create({\n          url: '/dist/html/options.html#/update',\n          active: false\n        })\n        browser.storage.local.set({ lastInterventionAt: Date.now() })\n      }\n    })\n\n    browser.storage.local.get('lastInterventionAt').then(async d => {\n      const accounts = await Account.getAllAccounts()\n      if (d.lastInterventionAt && d.lastInterventionAt < Date.now() - INTERVENTION_INTERVAL && accounts.length !== 0) {\n        browser.tabs.create({\n          url: 'https://floccus.org/donate/',\n          active: false\n        })\n        browser.storage.local.set({ lastInterventionAt: Date.now() })\n      }\n    })\n\n    // Set correct badge after waiting a bit\n    setTimeout(() => this.updateStatus(), 3000)\n\n    // Setup service worker messaging\n\n    // eslint-disable-next-line no-undef\n    if (!navigator.userAgent.includes('Firefox') && typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope) {\n      addEventListener('message', (event) => this._receiveEvent(event.data, (data) => event.source.postMessage(data)))\n    } else {\n      browser.runtime.onMessage.addListener((data) => void (this._receiveEvent(data, (data) => {\n        try {\n          browser.runtime.sendMessage(data)\n        } catch (e) {\n          console.warn(e)\n        }\n      })))\n    }\n    this.onStatusChange(async() => {\n      if (self?.clients) {\n        const clientList = await self.clients.matchAll()\n        clientList.forEach(client => {\n          try {\n            client.postMessage({ type: 'status:update', params: [] })\n          } catch (e) {\n            console.warn(e)\n          }\n        })\n      } else {\n        try {\n          await browser.runtime.sendMessage({ type: 'status:update', params: [] })\n        } catch (e) {\n          console.warn(e)\n        }\n      }\n    })\n\n    // Run some things on browser startup\n    browser.runtime.onStartup.addListener(this.onStartup)\n  }\n\n  async _receiveEvent(data, sendResponse) {\n    const {type, params} = data\n    const result = await this[type](...params)\n    sendResponse({type: type + 'Response', params: [result]})\n\n    // checkSync after waiting a bit\n    setTimeout(() => this.alarms.checkSync(), 3000)\n  }\n\n  setEnabled(enabled) {\n    this.enabled = enabled\n    if (enabled) {\n      // Sync after 7s\n      setTimeout(() => {\n        this.alarms.checkSync()\n      }, 7000)\n    }\n  }\n\n  async unlock(key) {\n    let d = await browser.storage.local.get({ 'accountsLocked': null })\n    if (d.accountsLocked) {\n      let hashedKey = await Cryptography.sha256(key)\n      let decryptedHash = await Cryptography.decryptAES(\n        key,\n        d.accountsLocked,\n        'FLOCCUS'\n      )\n\n      if (decryptedHash !== hashedKey) {\n        throw new Error('The provided key was wrong')\n      }\n      this.key = key\n    }\n    this.unlocked = true\n    this.setEnabled(true)\n\n    // remove encryption\n    this.key = null\n    await browser.storage.local.set({ accountsLocked: null })\n    const accountIds = await BrowserAccountStorage.getAllAccounts()\n    for (let accountId of accountIds) {\n      const storage = new BrowserAccountStorage(accountId)\n      const data = await storage.getAccountData(key)\n      await storage.setAccountData(data, null)\n    }\n    let accounts = await BrowserAccount.getAllAccounts()\n    await Promise.all(accounts.map(a => a.updateFromStorage()))\n  }\n\n  getUnlocked() {\n    return Promise.resolve(this.unlocked)\n  }\n\n  async onchange(localId, details) {\n    if (!this.enabled) {\n      return\n    }\n    // Debounce this function\n    this.setEnabled(false)\n\n    const allAccounts = await BrowserAccount.getAllAccounts()\n\n    // Check which accounts contain the bookmark and which used to contain (track) it\n    const trackingAccountsFilter = await Promise.all(\n      allAccounts.map(account => {\n        return account.tracksBookmark(localId)\n      })\n    )\n\n    let accountsToSync = allAccounts\n      // Filter out any accounts that are not tracking the bookmark\n      .filter((account, i) => trackingAccountsFilter[i])\n\n    // Now we check the account of the new folder\n\n    let containingAccounts = []\n    try {\n      const ancestors = await BrowserTree.getIdPathFromLocalId(localId)\n      containingAccounts = await BrowserAccount.getAccountsContainingLocalId(\n        localId,\n        ancestors,\n        allAccounts\n      )\n    } catch (e) {\n      console.log(e)\n      console.log('Could not detect containing account from localId ', localId)\n    }\n\n    accountsToSync = uniqBy(\n      accountsToSync.concat(containingAccounts),\n      acc => acc.id\n    )\n      // Filter out accounts that are not enabled\n      .filter(account => account.getData().enabled)\n      // Filter out accounts that are syncing, because the event may stem from the sync run\n      .filter(account => !account.getData().syncing)\n\n    // schedule a new sync for all accounts involved\n    accountsToSync.forEach(account => {\n      this.scheduleSync(account.id, true)\n    })\n\n    this.setEnabled(true)\n  }\n\n  async scheduleSync(accountId, wait) {\n    if (wait) {\n      if (this.schedule[accountId]) {\n        clearTimeout(this.schedule[accountId])\n      }\n      console.log('scheduleSync: setting a timeout in ms :', INACTIVITY_TIMEOUT)\n      this.schedule[accountId] = setTimeout(\n        () => this.scheduleSync(accountId),\n        INACTIVITY_TIMEOUT\n      )\n      return\n    }\n\n    let account = await Account.get(accountId)\n    if (account.getData().syncing) {\n      return\n    }\n    // if the account is already scheduled, don't prevent it, to avoid getting stuck\n    if (!account.getData().enabled && !account.getData().scheduled) {\n      return\n    }\n\n    const status = await this.getStatus()\n    if (status === STATUS_SYNCING) {\n      await account.setData({ ...account.getData(), scheduled: account.getData().scheduled || true })\n      return\n    }\n\n    if (account.getData().scheduled === true) {\n      await this.syncAccount(accountId)\n    } else {\n      await this.syncAccount(accountId, account.getData().scheduled)\n    }\n  }\n\n  async scheduleAll() {\n    const accounts = await Account.getAllAccounts()\n    for (const account of accounts) {\n      await account.setData({...account.getData(), scheduled: true})\n    }\n    this.updateStatus()\n  }\n\n  async cancelSync(accountId, keepEnabled) {\n    let account = await Account.get(accountId)\n    // Avoid starting it again automatically\n    if (!keepEnabled) {\n      await account.setData({ ...account.getData(), enabled: false })\n    }\n    await account.cancelSync()\n  }\n\n  async syncAccount(accountId, strategy, forceSync = false) {\n    if (!this.enabled) {\n      return\n    }\n    let account = await Account.get(accountId)\n    if (account.getData().syncing) {\n      return\n    }\n    // executes long-running async work without letting the service worker to die\n    const interval = setInterval(() => browser.tabs.getCurrent(), 2e4)\n    setTimeout(() => this.updateStatus(), 500)\n    try {\n      await account.sync(strategy, forceSync)\n    } catch (error) {\n      console.error(error)\n    }\n    clearInterval(interval)\n    this.updateStatus()\n  }\n\n  async updateStatus() {\n    await this.updateBadge()\n    this.listeners.forEach(fn => fn())\n  }\n\n  onStatusChange(listener) {\n    this.listeners.push(listener)\n    let unregistered = false\n    return () => {\n      if (unregistered) return\n      this.listeners.splice(this.listeners.indexOf(listener), 1)\n      unregistered = true\n    }\n  }\n\n  async getStatus() {\n    if (!this.unlocked) {\n      return STATUS_ERROR\n    }\n    const accounts = await Account.getAllAccounts()\n    let overallStatus = accounts.reduce((status, account) => {\n      const accData = account.getData()\n      if (status === STATUS_SYNCING || accData.syncing || account.syncing) {\n        // Show syncing symbol if any account is syncing\n        return STATUS_SYNCING\n      } else if (status === STATUS_ERROR || (accData.error && !accData.syncing) || (accData.enabled && accData.lastSync < Date.now() - STALE_SYNC_TIME)) {\n        // Show error symbol if any account has an error and not currently syncing, or if any account is enabled but hasn't been synced for two days\n        return STATUS_ERROR\n      } else {\n        // show allgood symbol otherwise\n        return STATUS_ALLGOOD\n      }\n    }, STATUS_ALLGOOD)\n\n    if (overallStatus === STATUS_ALLGOOD) {\n      if (accounts.every(account => !account.getData().enabled)) {\n        // if status is allgood but no account is enabled, show disabled\n        overallStatus = STATUS_DISABLED\n      }\n    }\n\n    return overallStatus\n  }\n\n  async updateBadge() {\n    await this.setStatusBadge(await this.getStatus())\n  }\n\n  async setStatusBadge(status) {\n    const icon = {\n      [STATUS_ALLGOOD]: {path: '/icons/logo_32.png'},\n      [STATUS_SYNCING]: {path: '/icons/syncing_32.png'},\n      [STATUS_ERROR]: {path: '/icons/error_32.png'},\n      [STATUS_DISABLED]: {path: '/icons/disabled_32.png'}\n    }\n\n    if (icon[status]) {\n      if (browser.browserAction) {\n        await browser.browserAction.setIcon(icon[status])\n      } else if (browser.action) {\n        await browser.action.setIcon(icon[status])\n      }\n    }\n  }\n\n  async onStartup() {\n    const accounts = await Account.getAllAccounts()\n    await Promise.all(\n      accounts.map(async acc => {\n        if (acc.getData().syncing) {\n          await acc.setData({\n            ...acc.getData(),\n            syncing: false,\n            scheduled: acc.getData().enabled,\n          })\n        }\n        if (acc.getData().localRoot === 'tabs') {\n          await acc.init()\n        }\n      })\n    )\n  }\n\n  async onLoad() {\n    browser.storage.local.get('telemetryEnabled').then(async d => {\n      if (!d.telemetryEnabled) {\n        return\n      }\n      Sentry.init({\n        dsn: 'https://836f0f772fbf2e12b9dd651b8e6b6338@o4507214911307776.ingest.de.sentry.io/4507216408870992',\n        integrations: [],\n        sampleRate: 0.15,\n        release: packageJson.version,\n        debug: true,\n      })\n    })\n  }\n\n  async onVisitUrl(historyItem) {\n    if (!historyItem.url) {\n      return\n    }\n    let accounts = await Account.getAllAccounts()\n    accounts = accounts.filter(account => account.getData().clickCountEnabled)\n    if (!accounts.length) {\n      return\n    }\n    const bookmarks = await browser.bookmarks.search({url: historyItem.url})\n    for (let bookmark of bookmarks) {\n      let matchingAccounts = []\n      try {\n        const ancestors = await BrowserTree.getIdPathFromLocalId(bookmark.id)\n        matchingAccounts = await BrowserAccount.getAccountsContainingLocalId(\n          bookmark.id,\n          ancestors,\n          accounts,\n          true\n        )\n      } catch (e) {\n        console.log(e)\n        console.log('Could not detect containing account from localId ', bookmark.id)\n      }\n      if (matchingAccounts.length) {\n        await Promise.all(\n          matchingAccounts.map(async account => {\n            const server = await account.getServer()\n            if (server.countClick) {\n              await server.countClick(historyItem.url)\n            }\n          })\n        )\n      }\n    }\n  }\n}\n","import BrowserController from '../lib/browser/BrowserController'\n\nconst controller = new BrowserController\ncontroller.onLoad()\n","/* global DEBUG */\nimport util from 'util'\nimport * as Parallel from 'async-parallel'\nimport packageJson from '../../package.json'\nimport Crypto from './Crypto'\nimport { Share } from '@capacitor/share'\nimport { Filesystem, Directory, Encoding } from '@capacitor/filesystem'\nimport { Capacitor } from '@capacitor/core'\n\nexport default class Logger {\n  static log() {\n    const logMsg = [new Date().toISOString(), ...arguments]\n\n    // log to console\n    DEBUG && console.log(util.format.apply(util, logMsg))\n    this.messages.push(util.format.apply(util, logMsg)) // TODO: Use a linked list here to get O(n)\n  }\n\n  static async persist() {\n    const Storage = (Capacitor.getPlatform() === 'web') ? await import('./browser/BrowserAccountStorage') : await import('./native/NativeAccountStorage')\n    await Storage.default.changeEntry(\n      'logs',\n      log => {\n        const messages = this.messages\n        this.messages = []\n        return messages // only save the last sync run\n      },\n      []\n    )\n  }\n\n  static async getLogs() {\n    const Storage = (Capacitor.getPlatform() === 'web') ? await import('./browser/BrowserAccountStorage') : await import('./native/NativeAccountStorage')\n    return Storage.default.getEntry('logs', [])\n  }\n\n  static async anonymizeLogs(logs) {\n    const regex = /\\[(.*?)\\]\\((.*?)\\)|\\[(.*?)\\]/g\n    const newLogs = await Parallel.map(logs, async(entry) => {\n      return Logger.replaceAsync(entry, regex, async(match, p1, p2, p3) => {\n        if (p1 && p2) {\n          const hash1 = await Crypto.sha256(p1)\n          const hash2 = await Crypto.sha256(p2)\n          return '[' + hash1 + ']' + '(' + hash2 + ')'\n        } else if (p3) {\n          const hash = await Crypto.sha256(p3)\n          return '[' + hash + ']'\n        }\n      })\n    }, 1)\n    const regex2 = /url=https?%3A%2F%2F.*$|url=https?%3A%2F%2F[^ ]*/\n    const regex3 = /https?:\\/\\/[^ /]*\\//\n    return newLogs\n      .map(line => line.replace(regex2, '###url###').replace(regex3, '###server###'))\n  }\n\n  static async replaceAsync(str, regex, asyncFn) {\n    // Stolen from https://stackoverflow.com/questions/33631041/javascript-async-await-in-replace\n    const promises = []\n    str.replace(regex, (match, ...args) => {\n      const promise = asyncFn(match, ...args)\n      promises.push(promise)\n    })\n    let data\n    try {\n      data = await Promise.all(promises)\n    } catch (e) {\n      console.error(e)\n    }\n    return str.replace(regex, () => data.shift())\n  }\n\n  static async downloadLogs(anonymous = false) {\n    let logs = await this.getLogs()\n    if (anonymous) {\n      logs = await Logger.anonymizeLogs(logs)\n    }\n    let blob = new Blob([logs.join('\\n')], {\n      type: 'text/plain',\n      endings: 'native'\n    })\n    this.download(\n      'floccus-' +\n        packageJson.version +\n        '-' +\n        new Date().toISOString().slice(0, 10) +\n        '-' +\n        (anonymous ? 'redacted' : 'full') +\n        '.log',\n      blob\n    )\n  }\n\n  static async download(filename, blob) {\n    if (Capacitor.getPlatform() === 'web') {\n      const element = document.createElement('a')\n\n      let objectUrl = URL.createObjectURL(blob)\n      element.setAttribute('href', objectUrl)\n      element.setAttribute('download', filename)\n\n      element.style.display = 'none'\n      document.body.appendChild(element)\n\n      element.click()\n\n      URL.revokeObjectURL(objectUrl)\n      document.body.removeChild(element)\n    } else {\n      const {uri: fileURI} = await Filesystem.writeFile({\n        path: 'Downloads/' + filename,\n        data: await blob.text(),\n        encoding: Encoding.UTF8,\n        directory: Directory.External,\n        recursive: true\n      })\n      await Share.share({\n        title: filename,\n        files: [fileURI],\n      })\n    }\n  }\n}\nLogger.messages = []\n","import CachingAdapter from './Caching'\n\nexport default class FakeAdapter extends CachingAdapter {\n  constructor(server) {\n    super()\n    this.server = server\n  }\n\n  static getDefaultValues() {\n    return {\n      type: 'fake'\n    }\n  }\n\n  setData(data) {\n    this.server = data\n  }\n\n  getData() {\n    return JSON.parse(JSON.stringify(this.server))\n  }\n\n  getLabel() {\n    return 'Fake account (floccus)'\n  }\n}\n","import browser from '../browser-api'\nimport Cryptography from '../Crypto'\nimport DefunctCryptography from '../DefunctCrypto'\nimport Mappings from '../Mappings'\nimport { Folder, ItemLocation } from '../Tree'\nimport AsyncLock from 'async-lock'\n\nconst storageLock = new AsyncLock()\n\nexport default class BrowserAccountStorage {\n  constructor(id) {\n    this.accountId = id\n  }\n\n  static async changeEntry(entryName, fn, defaultVal) {\n    await storageLock.acquire(entryName, async() => {\n      let entry = await BrowserAccountStorage.getEntry(entryName, defaultVal)\n      entry = fn(entry)\n\n      await browser.storage.local.set({ [entryName]: JSON.stringify(entry) })\n    })\n  }\n\n  static async getEntry(entryName, defaultVal) {\n    let entry = await browser.storage.local.get(entryName)\n    if (entry[entryName]) {\n      while (typeof entry[entryName] === 'string') {\n        entry[entryName] = JSON.parse(entry[entryName])\n      }\n      return entry[entryName]\n    } else {\n      return defaultVal\n    }\n  }\n\n  static deleteEntry(entryName) {\n    return browser.storage.local.remove(entryName)\n  }\n\n  static async getAllAccounts() {\n    let accounts = await BrowserAccountStorage.getEntry(`accounts`, {})\n    return Object.keys(accounts)\n  }\n\n  async getAccountData(key) {\n    let accounts = await BrowserAccountStorage.getEntry(`accounts`, {})\n    let data = accounts[this.accountId]\n    if (key) {\n      if (data.iv) {\n        data.password = await DefunctCryptography.decryptAES(key, data.iv, data.password)\n        delete data.iv\n      } else {\n        data.password = await Cryptography.decryptAES(key, data.password, data.username)\n        if (data.passphrase) {\n          data.passphrase = await Cryptography.decryptAES(key, data.passphrase, data.username)\n        }\n      }\n    }\n    return data\n  }\n\n  async setAccountData(data, key) {\n    let encData = data\n    if (key) {\n      if (data.iv) {\n        delete data.iv\n      }\n      encData = {\n        ...data,\n        password: await Cryptography.encryptAES(key, data.password, data.username),\n        ...(data.passphrase && {passphrase: await Cryptography.encryptAES(key, data.passphrase, data.username)})\n      }\n    }\n    return BrowserAccountStorage.changeEntry(\n      `accounts`,\n      accounts => {\n        accounts[this.accountId] = encData\n        return accounts\n      },\n      {}\n    )\n  }\n\n  async deleteAccountData() {\n    await BrowserAccountStorage.changeEntry(`accounts`, accounts => {\n      delete accounts[this.accountId]\n      return accounts\n    })\n    await this.deleteCache()\n    await this.deleteMappings()\n  }\n\n  async initCache() {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].cache`,\n      () => ({})\n    )\n  }\n\n  async getCache() {\n    const data = await BrowserAccountStorage.getEntry(\n      `bookmarks[${this.accountId}].cache`\n    )\n    return Folder.hydrate(data && Object.keys(data).length ? data : {location: ItemLocation.LOCAL})\n  }\n\n  async setCache(data) {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].cache`,\n      () => data\n    )\n  }\n\n  async deleteCache() {\n    await BrowserAccountStorage.deleteEntry(`bookmarks[${this.accountId}].cache`)\n  }\n\n  async initMappings() {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].mappings`,\n      () => ({})\n    )\n  }\n\n  async getMappings() {\n    const data = await BrowserAccountStorage.getEntry(\n      `bookmarks[${this.accountId}].mappings`\n    )\n    return new Mappings(\n      this,\n      data && Object.keys(data).length\n        ? data\n        : {\n          bookmarks: {\n            ServerToLocal: {},\n            LocalToServer: {}\n          },\n          folders: {\n            ServerToLocal: {},\n            LocalToServer: {}\n          }\n        }\n    )\n  }\n\n  async setMappings(data) {\n    await BrowserAccountStorage.changeEntry(\n      `bookmarks[${this.accountId}].mappings`,\n      () => data\n    )\n  }\n\n  async deleteMappings() {\n    await BrowserAccountStorage.deleteEntry(`bookmarks[${this.accountId}].mappings`)\n  }\n\n  async getCurrentContinuation() {\n    return BrowserAccountStorage.getEntry(`bookmarks[${this.accountId}].continuation`)\n  }\n\n  async setCurrentContinuation(continuation) {\n    await BrowserAccountStorage.changeEntry(`bookmarks[${this.accountId}].continuation`, (_) => ({...continuation, createdAt: Date.now()}), null)\n  }\n}\n","var baseIteratee = require('./_baseIteratee'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * This method is like `_.uniq` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * uniqueness is computed. The order of result values is determined by the\n * order they occur in the array. The iteratee is invoked with one argument:\n * (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n * // => [2.1, 1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n * // => [{ 'x': 1 }, { 'x': 2 }]\n */\nfunction uniqBy(array, iteratee) {\n  return (array && array.length) ? baseUniq(array, baseIteratee(iteratee, 2)) : [];\n}\n\nmodule.exports = uniqBy;\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) === 'RegExp');\n};\n","'use strict';\nvar call = require('../internals/function-call');\nvar hasOwn = require('../internals/has-own-property');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar regExpFlags = require('../internals/regexp-flags');\n\nvar RegExpPrototype = RegExp.prototype;\n\nmodule.exports = function (R) {\n  var flags = R.flags;\n  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)\n    ? call(regExpFlags, R) : flags;\n};\n","'use strict';\n/* eslint-disable es/no-string-prototype-matchall -- safe */\nvar $ = require('../internals/export');\nvar call = require('../internals/function-call');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar createIteratorConstructor = require('../internals/iterator-create-constructor');\nvar createIterResultObject = require('../internals/create-iter-result-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar toLength = require('../internals/to-length');\nvar toString = require('../internals/to-string');\nvar anObject = require('../internals/an-object');\nvar isNullOrUndefined = require('../internals/is-null-or-undefined');\nvar classof = require('../internals/classof-raw');\nvar isRegExp = require('../internals/is-regexp');\nvar getRegExpFlags = require('../internals/regexp-get-flags');\nvar getMethod = require('../internals/get-method');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar regExpExec = require('../internals/regexp-exec-abstract');\nvar InternalStateModule = require('../internals/internal-state');\nvar IS_PURE = require('../internals/is-pure');\n\nvar MATCH_ALL = wellKnownSymbol('matchAll');\nvar REGEXP_STRING = 'RegExp String';\nvar REGEXP_STRING_ITERATOR = REGEXP_STRING + ' Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(REGEXP_STRING_ITERATOR);\nvar RegExpPrototype = RegExp.prototype;\nvar $TypeError = TypeError;\nvar stringIndexOf = uncurryThis(''.indexOf);\nvar nativeMatchAll = uncurryThis(''.matchAll);\n\nvar WORKS_WITH_NON_GLOBAL_REGEX = !!nativeMatchAll && !fails(function () {\n  nativeMatchAll('a', /./);\n});\n\nvar $RegExpStringIterator = createIteratorConstructor(function RegExpStringIterator(regexp, string, $global, fullUnicode) {\n  setInternalState(this, {\n    type: REGEXP_STRING_ITERATOR,\n    regexp: regexp,\n    string: string,\n    global: $global,\n    unicode: fullUnicode,\n    done: false\n  });\n}, REGEXP_STRING, function next() {\n  var state = getInternalState(this);\n  if (state.done) return createIterResultObject(undefined, true);\n  var R = state.regexp;\n  var S = state.string;\n  var match = regExpExec(R, S);\n  if (match === null) {\n    state.done = true;\n    return createIterResultObject(undefined, true);\n  }\n  if (state.global) {\n    if (toString(match[0]) === '') R.lastIndex = advanceStringIndex(S, toLength(R.lastIndex), state.unicode);\n    return createIterResultObject(match, false);\n  }\n  state.done = true;\n  return createIterResultObject(match, false);\n});\n\nvar $matchAll = function (string) {\n  var R = anObject(this);\n  var S = toString(string);\n  var C = speciesConstructor(R, RegExp);\n  var flags = toString(getRegExpFlags(R));\n  var matcher, $global, fullUnicode;\n  matcher = new C(C === RegExp ? R.source : R, flags);\n  $global = !!~stringIndexOf(flags, 'g');\n  fullUnicode = !!~stringIndexOf(flags, 'u');\n  matcher.lastIndex = toLength(R.lastIndex);\n  return new $RegExpStringIterator(matcher, S, $global, fullUnicode);\n};\n\n// `String.prototype.matchAll` method\n// https://tc39.es/ecma262/#sec-string.prototype.matchall\n$({ target: 'String', proto: true, forced: WORKS_WITH_NON_GLOBAL_REGEX }, {\n  matchAll: function matchAll(regexp) {\n    var O = requireObjectCoercible(this);\n    var flags, S, matcher, rx;\n    if (!isNullOrUndefined(regexp)) {\n      if (isRegExp(regexp)) {\n        flags = toString(requireObjectCoercible(getRegExpFlags(regexp)));\n        if (!~stringIndexOf(flags, 'g')) throw new $TypeError('`.matchAll` does not allow non-global regexes');\n      }\n      if (WORKS_WITH_NON_GLOBAL_REGEX) return nativeMatchAll(O, regexp);\n      matcher = getMethod(regexp, MATCH_ALL);\n      if (matcher === undefined && IS_PURE && classof(regexp) === 'RegExp') matcher = $matchAll;\n      if (matcher) return call(matcher, regexp, O);\n    } else if (WORKS_WITH_NON_GLOBAL_REGEX) return nativeMatchAll(O, regexp);\n    S = toString(O);\n    rx = new RegExp(regexp, 'g');\n    return IS_PURE ? call($matchAll, rx, S) : rx[MATCH_ALL](S);\n  }\n});\n\nIS_PURE || MATCH_ALL in RegExpPrototype || defineBuiltIn(RegExpPrototype, MATCH_ALL, $matchAll);\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdD = function () {\n\tthrow new Error('define cannot be used indirect');\n};","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.p = \"/dist/js/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t393: 0\n};\n\n__webpack_require__.f.j = (chunkId, promises) => {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise((resolve, reject) => (installedChunkData = installedChunks[chunkId] = [resolve, reject]));\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = (event) => {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = globalThis[\"webpackChunkfloccus\"] = globalThis[\"webpackChunkfloccus\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [853,885,389,546,832], () => (__webpack_require__(17392)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","inProgress","dataWebpackPrefix","INTERVENTION_INTERVAL","AlarmManager","constructor","ctl","this","checkSync","accounts","BrowserAccountStorage","getAllAccounts","promises","accountId","data","Account","getData","lastSync","interval","syncInterval","scheduled","push","scheduleSync","error","errorCount","Date","now","Promise","all","schedule","listeners","alarms","unlocked","setEnabled","Controller","browser","bookmarks","onChanged","addListener","localId","details","onchange","onMoved","onRemoved","onCreated","permissions","contains","then","historyAllowed","history","onVisited","historyItem","onVisitUrl","create","periodInMinutes","onAlarm","async","alarm","name","storage","local","get","d","accountsLocked","key","packageJson","currentVersion","set","packageVersion","split","lastVersion","length","lastInterventionAt","tabs","url","active","setTimeout","updateStatus","navigator","userAgent","includes","WorkerGlobalScope","self","addEventListener","event","_receiveEvent","source","postMessage","runtime","onMessage","sendMessage","e","console","warn","onStatusChange","_self","clients","matchAll","forEach","client","type","params","onStartup","sendResponse","enabled","unlock","hashedKey","Cryptography","Error","accountIds","getAccountData","setAccountData","BrowserAccount","map","a","updateFromStorage","getUnlocked","resolve","allAccounts","trackingAccountsFilter","account","tracksBookmark","accountsToSync","filter","i","containingAccounts","ancestors","BrowserTree","log","uniqBy","concat","acc","id","syncing","wait","clearTimeout","getStatus","STATUS_SYNCING","syncAccount","setData","scheduleAll","cancelSync","keepEnabled","strategy","forceSync","arguments","undefined","setInterval","getCurrent","sync","clearInterval","updateBadge","fn","listener","unregistered","splice","indexOf","STATUS_ERROR","overallStatus","reduce","status","accData","STATUS_ALLGOOD","every","STATUS_DISABLED","setStatusBadge","icon","path","browserAction","setIcon","action","localRoot","init","onLoad","telemetryEnabled","Sentry","dsn","integrations","sampleRate","release","debug","clickCountEnabled","search","bookmark","matchingAccounts","server","getServer","countClick","Logger","logMsg","toISOString","messages","util","apply","persist","Storage","Capacitor","getPlatform","default","changeEntry","getLogs","getEntry","anonymizeLogs","logs","regex","newLogs","Parallel","replaceAsync","entry","match","p1","p2","p3","Crypto","regex2","regex3","line","replace","str","asyncFn","_len","args","Array","_key","promise","shift","downloadLogs","anonymous","blob","Blob","join","endings","download","slice","filename","element","document","createElement","objectUrl","URL","createObjectURL","setAttribute","style","display","body","appendChild","click","revokeObjectURL","removeChild","uri","fileURI","Filesystem","writeFile","text","encoding","Encoding","UTF8","directory","Directory","External","recursive","Share","share","title","files","FakeAdapter","CachingAdapter","super","getDefaultValues","JSON","parse","stringify","getLabel","storageLock","AsyncLock","entryName","defaultVal","acquire","deleteEntry","remove","Object","keys","iv","password","DefunctCryptography","decryptAES","username","passphrase","encData","deleteAccountData","deleteCache","deleteMappings","initCache","getCache","Folder","hydrate","location","ItemLocation","LOCAL","setCache","initMappings","getMappings","Mappings","ServerToLocal","LocalToServer","folders","setMappings","getCurrentContinuation","setCurrentContinuation","continuation","_","createdAt","baseIteratee","baseUniq","module","exports","array","iteratee","isObject","classof","MATCH","wellKnownSymbol","it","isRegExp","call","hasOwn","isPrototypeOf","regExpFlags","RegExpPrototype","RegExp","prototype","R","flags","$","uncurryThis","createIteratorConstructor","createIterResultObject","requireObjectCoercible","toLength","toString","anObject","isNullOrUndefined","getRegExpFlags","getMethod","defineBuiltIn","fails","speciesConstructor","advanceStringIndex","regExpExec","InternalStateModule","IS_PURE","MATCH_ALL","REGEXP_STRING","REGEXP_STRING_ITERATOR","setInternalState","getInternalState","getterFor","$TypeError","TypeError","stringIndexOf","nativeMatchAll","WORKS_WITH_NON_GLOBAL_REGEX","$RegExpStringIterator","regexp","string","$global","fullUnicode","global","unicode","done","state","S","lastIndex","$matchAll","matcher","C","target","proto","forced","rx","O","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","m","amdD","amdO","result","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","r","n","getter","__esModule","definition","o","defineProperty","enumerable","f","chunkId","u","g","globalThis","Function","window","hmd","children","obj","prop","hasOwnProperty","l","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","timeout","nc","src","onScriptComplete","prev","onerror","onload","doneFns","parentNode","bind","head","Symbol","toStringTag","value","nmd","paths","p","installedChunks","installedChunkData","reject","errorType","realSrc","message","request","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","some","chunkLoadingGlobal","__webpack_exports__"],"sourceRoot":""}