(()=>{"use strict";var e={4950:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbsDomEvent=t.AbsDomEventId=void 0,t.AbsDomEventId="absDomEvent";class n extends CustomEvent{constructor(e){super(t.AbsDomEventId,{detail:e})}}t.AbsDomEvent=n},6186:(e,t)=>{var n,i,o,s;Object.defineProperty(t,"__esModule",{value:!0}),t.isManagementMessage=t.ContentScriptBaseMessageKind=t.ContentScriptIdentifier=t.PageScriptIdentifier=t.ContentScriptManagementOperation=void 0,(s=t.ContentScriptManagementOperation||(t.ContentScriptManagementOperation={})).Initialize="Initialize",s.Uninitialize="Uninitialize",(o=t.PageScriptIdentifier||(t.PageScriptIdentifier={})).ObjectUrlPageScript="objectUrlPageScript",o.SafariDownloadClickPageScript="safariDownloadClickPageScript",o.ChromeExpPageScript="chromeExpPageScript",o.UploadDetectionPageScript="uploadDetectionPageScript",(i=t.ContentScriptIdentifier||(t.ContentScriptIdentifier={})).ChromeExp="chromeExp",i.BlobDownload="blobDownload",i.DetectionRescan="detectionRescan",i.PageInfo="pageInfo",i.Timers="timers",i.SignInEnforcementInteractionsDisabling="signInEnforcementInteractionsDisabling",i.DomainDefinedSDD="domainDefinedSDD",i.SafariDownloadClickContentScript="safariDownloadClickContentScript",i.UploadDetectionContentScript="uploadDetectionContentScript",function(e){e.Management="management"}(n=t.ContentScriptBaseMessageKind||(t.ContentScriptBaseMessageKind={})),t.isManagementMessage=function(e){if(!e||"object"!=typeof e)return!1;const{kind:t}=e;return t===n.Management}},3098:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomEventBase=void 0,t.DomEventBase=class{constructor(e,t=document.head){this.id=e,this.target=t,this.tagName=t instanceof HTMLBodyElement?"div":"meta",this.querySelector=`${this.tagName}#${e}`,this.mutationObserver=new MutationObserver(this.handleMutation.bind(this)),this.mutationObserver.observe(t,{subtree:!0,childList:!0})}find(){return document.querySelector(this.querySelector)||void 0}isCandidate(e){return e.nodeType===Node.ELEMENT_NODE&&e.tagName.toLowerCase()===this.tagName.toLowerCase()&&e.id===this.id}done(){var e,t;null===(e=this.element)||void 0===e||e.remove(),this.element=void 0,null===(t=this.mutationObserver)||void 0===t||t.disconnect(),this.mutationObserver=void 0}}},4240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DomListener=void 0;const i=n(3098);class o extends i.DomEventBase{handleMutation(e){var t;for(const n of e)if("childList"===n.type)if(void 0!==this.element)for(const e of n.removedNodes){const t=e;if(this.element===t){this.done();break}}else for(const e of n.addedNodes){const n=e;if(this.isCandidate(n)){this.element=n,null===(t=this.callback)||void 0===t||t.call(this,this.element);break}}}subscribe(e){this.callback=e;const t=this.find();void 0!==t&&(this.element=t,this.callback(t))}done(){this.callback=void 0,super.done()}}t.DomListener=o},8359:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.isObjectUrlMessage=t.ObjectUrlMessageKind=void 0,function(e){e.Create="Create",e.Revoke="Revoke"}(n=t.ObjectUrlMessageKind||(t.ObjectUrlMessageKind={})),t.isObjectUrlMessage=function(e){if(!e||"object"!=typeof e)return!1;const{kind:t}=e;return!(!t||!Object.values(n).includes(t))}},9503:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessagePortSender=void 0,t.MessagePortSender=class{constructor(){this.aggregatedMessages=[]}start(e){let t=this.aggregatedMessages.pop();for(;void 0!==t;)e.postMessage(t),t=this.aggregatedMessages.pop();this.port=e}send(e){try{this.port?this.port.postMessage(e):this.aggregatedMessages.push(e)}catch(e){}}}},916:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.isScriptsMessage=t.ScriptsMessageKind=void 0,function(e){e.RequestPort="requestPort",e.TransferPort="transferPort"}(n=t.ScriptsMessageKind||(t.ScriptsMessageKind={})),t.isScriptsMessage=function(e){if(!e||"object"!=typeof e)return!1;const{kind:t}=e;return!(!t||!Object.values(n).includes(t))}},4873:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.waitForChannel=void 0;const i=n(4240),o=n(916),s=n(4319);t.waitForChannel=function(e,t,n){const r=s.getDomEventId(e,t),a=new i.DomListener(r);a.subscribe((()=>{!function(e,t,n){s.onMessageRecieved(window,((i,s)=>{if(o.isScriptsMessage(i.data)&&i.data.originator!==t&&i.data.target===t&&i.data.originator===e&&i.data.kind===o.ScriptsMessageKind.TransferPort){s();const{port:e}=i.data;n(e)}}));const i={kind:o.ScriptsMessageKind.RequestPort,originator:t,target:e};window.postMessage(i,"*")}(e,t,(e=>{a.done(),n(e)}))}))}},4319:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onMessageRecieved=t.whenHeadIsReady=t.getDomEventId=void 0;const i=n(4950);t.getDomEventId=function(e,t){return`${e}-${t}`},t.whenHeadIsReady=function(e){document.head?e():document.documentElement.addEventListener(i.AbsDomEventId,(t=>{const n=t;"rootElementAdded"===n.detail.type&&"head"===n.detail.rootElement&&e()}),{once:!0})},t.onMessageRecieved=function(e,t){const n=i=>{t(i,(()=>e.removeEventListener("message",n)))};e.addEventListener("message",n)}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}(()=>{var e,t;const i=n(8359),o=n(9503),s=n(6186),r=n(4873),a=n(4319),c="revokeObjectURL",d="createObjectURL",l={revokeObjectURL:Reflect.getOwnPropertyDescriptor(URL,c),createObjectURL:Reflect.getOwnPropertyDescriptor(URL,d)},g=new o.MessagePortSender;"function"==typeof(null===(e=l.revokeObjectURL)||void 0===e?void 0:e.value)&&(Reflect.defineProperty(URL,c,Object.assign(Object.assign({},l.revokeObjectURL),{value(){const e=arguments,t=this;window.setTimeout((()=>{Reflect.apply(l.revokeObjectURL.value,t,e)}),15e3);const n=e[0],o={kind:i.ObjectUrlMessageKind.Revoke,url:n};g.send(o)}}))||console.error("overwriting revokeObjectURL failed")),"function"==typeof(null===(t=l.createObjectURL)||void 0===t?void 0:t.value)&&(Reflect.defineProperty(URL,d,Object.assign(Object.assign({},l.createObjectURL),{value(){const e=Reflect.apply(l.createObjectURL.value,this,arguments),t=arguments[0];if(t instanceof Blob){const n={kind:i.ObjectUrlMessageKind.Create,url:e,blob:t};g.send(n)}return e}}))||console.error("overwriting createObjectURL failed")),a.whenHeadIsReady((()=>{r.waitForChannel(s.ContentScriptIdentifier.BlobDownload,s.PageScriptIdentifier.ObjectUrlPageScript,(e=>{g.start(e)}))}))})()})();