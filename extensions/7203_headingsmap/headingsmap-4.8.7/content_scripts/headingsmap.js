let re={getStored:(e,t)=>{e=Array.isArray(e)?e:[e],e=chrome.storage.local.get(e,e=>{t&&t(e)});try{e.then(e=>{t&&t(e)})}catch(e){}},setStored:(e,t,a)=>{var n={};n[e]=t,chrome.storage.local.set(n),a&&a(e,t)},removeStored:e=>{chrome.storage.local.remove([e])}},t=chrome.runtime,le=t.getURL("html/"),F=t.getURL("css/"),Ce=e=>t.getURL(`_locales/${e}/messages.json`),l=500,a="indentation",n="Untitled document",se="data-element-id",Z="data-frame-id",K="data-anchor-id",xe="data-headingsMap-frameId",W="headings-map",b="headingsMap-",ae="anchor-icon",oe="hidden-header-information",S=e("^H[1-6]$",{attribute:"role",value:"heading"}),k=e("^HGROUP$"),E=e("^BLOCKQUOTE$|^BODY$|^DETAILS$|^DIALOG$|^FIELDSET$|^FIGURE$|^TD$"),$=e("^ARTICLE$|^ASIDE$|^NAV$|^SECTION$"),_="visible-element",H="hidden-element",U="fixed-tab-content-start",y="fixed-tab-content-end",z="variable-tab-content",d="tabs-container custom-scrollbar",u="data-headingsMap-highlight",N="active",T="headingsMap-overlays-container",q="headingsMap-overlay",Se="headingsMap-highlighted",I="headingsMap-overlay-label",w="data-shadow-root",X="data-shadow-root-id",p="shadow-root-",J="focused",ke="tab-button",ee="ul",ce="li",B="custom-scrollbar",h,f,g,O="showing-headers",R="data-show-headings",Ee=[{code:"en",description:"english"},{code:"fr",description:"français"},{code:"es",description:"español"},{code:"pl",description:"polski"},{code:"ja",description:"日本語"}],de={showHeadLevels:{defaultValue:!0,cssClass:"show-head-levels"},showHeadError:{defaultValue:!0,cssClass:"show-error"},showHeadErrorH1:{defaultValue:!0,cssClass:"show-head-error-h1"},showOutLevels:{defaultValue:!0,cssClass:"show-out-levels"},showOutElem:{defaultValue:!0,cssClass:"show-section"},darkTheme:{defaultValue:!0,cssClass:"dark-theme"},isOutlineTestActive:{defaultValue:!1,cssClass:"is-outline-test-active"},showHiddenHeaders:{defaultValue:!1,cssClass:"show-hidden-headers"},showHiddenSections:{defaultValue:!1,cssClass:"show-hidden-sections"},showAriaLabelContent:{defaultValue:!1,cssClass:"show-aria-label-content"},showAnchors:{defaultValue:!0,cssClass:"show-anchors"},position:{defaultValue:"left"},savePanelWidthOnResize:{defaultValue:!1},initialPanelWidth:{defaultValue:350},widgetVersion:{},showAriaHeaders:{defaultValue:!0},highLightElements:{defaultValue:!0},normalWrap:{defaultValue:!1,cssClass:"normal-wrap"},considerHgroup:{defaultValue:!0},showTooltip:{defaultValue:!1},viewportIndicator:{defaultValue:!1},language:{defaultValue:"en"},pinned:{defaultValue:!1},pinnedByDomain:{defaultValue:""},pinnedByURL:{defaultValue:""},pinnedTabs:{defaultValue:""},showEmptyHeadings:{defaultValue:!1},hideTreeResultsTools:{defaultValue:!1,cssClass:"headingsMap-simplified"},simplifiedView:{defaultValue:!1},settingsActiveTab:{defaultValue:!1}},m="@keyframes headingsMapOutline {0% {outline-color: transparent;}50% {outline-color: red;}100% {outline-color: transparent;}}*[data-headingsMap-highlight=true] {outline-width: 4px;outline-style: solid;outline-color: transparent;animation-name: headingsMapOutline;animation-iteration-count: 4;animation-duration: .5s;}",P="data-highlight-element-style",ue={},pe="",v={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","src","style"]},D=void 0,A=void 0,L=void 0,M=void 0,G=()=>{},$e=!1,Te={},he="headingsMapPanel",fe={},qe;let be,ge="headingsMap",Ie=()=>{},{setStored:Q,getStored:Y}=re;function me(e){(async()=>{await t.sendMessage(e)})()}function ve(e,t){var a;fe[e]=t,e=e,t=t,a=Be,Q(e,t,a)}function Be(e,t){var a=de;a[e]&&a[e].cssClass&&Oe(a[e].cssClass,t)}function Oe(e,t){be&&(t?be.classList.add(e):be.classList.remove(e))}function ye(e,t={},a=[],n=[]){var i,r,o=document.createElement(e);for(i in t)o.setAttribute(i,t[i]);a=Array.isArray(a)?a:[a];for(let e=0;e<a.length;e++)"string"==typeof a[e]||"number"==typeof a[e]?(r=ne(a[e]),o.appendChild(r)):o.appendChild(a[e]);n=Array.isArray(n)?n:[n];for(let e=0;e<n.length;e++){var{name:l,callback:s}=n[e];o.addEventListener(l,s)}return o}function Re(e){for(var e=e.replaceAll(" headingsmap@gmail.com",' <a href="mailto:headingsmap@gmail.com">headingsmap@gmail.com</a>'),t=ye("span"),a=(t.innerHTML=e,[]);t.childNodes.length;)a.push(t.childNodes[0]),t.removeChild(t.childNodes[0]);return a}function ne(e){return document.createTextNode(e)}function Pe(e,t=!1){if(3===e.nodeType)return e.nodeValue;let a;if(a="function"==typeof t?t(e):t,("img"===(i=(n=e).tagName.toLowerCase())&&(!n.getAttribute("src")||0!==n.getAttribute("src")?.indexOf("moz-extension://"))||"area"===i||"input"===i&&"image"===n.getAttribute("type")?.toLowerCase())&&a)return e.getAttribute("alt")||"";var n,i,r=e.shadowRoot?.childNodes||e.childNodes,o=r.length;let l="";for(let e=0;e<o;e++){var s=r[e];8!==s.nodeType&&"style"!==s.tagName?.toLowerCase()&&"script"!==s.tagName?.toLowerCase()&&a&&(l+=Pe(r[e],t))}return l.replace(/\n/g," ").replace(/\t/g," ").replace(/\s+/gi," ").trim()}function De(e,t,a){a=new MutationObserver(a);return a.observe(e,t),a}function Me(e){return e&&e.tagName&&e.hasAttribute("hidden")}function te(e){return Ne(e)&&!function e(t){let a=He(t);a&&t.parentNode.tagName&&"body"!==t.parentNode.tagName.toLowerCase()&&(a=e(t.parentNode));return a}(e)}function He(e){var t;return!(!Ne(e)||Ve(e)||(t=document.defaultView.getComputedStyle(e,null),Me(e))||e.attributes["aria-hidden"]&&"true"===e.attributes["aria-hidden"].value||"none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility"))}function Ne(e){return e&&1===e.nodeType&&!Ve(e)}function Ve(e){e=e.tagName.toLowerCase();return"script"===e||"style"===e||"noscript"===e}function we(e,t,a="document"){let n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType=a,n.onload=()=>{var e;4===n.readyState&&200===n.status&&("document"===a?(e=V(n.responseXML.documentElement.querySelector(".content")),t(Ke(e))):t(n.response))},n.onerror=function(e){},n.send(null)}function je(e,a,n=!1,i=le){let r=(e=Array.isArray(e)?e:[e]).length,o=0;e.forEach(e=>{let t=new XMLHttpRequest;t.overrideMimeType("text/plain"),t.open("GET",""+i+e+".css",!0),t.onload=()=>{var e;4===t.readyState&&200===t.status&&(e=ye("style",{},ne(t.responseText.replace(/url\(/g,"url("+i))),a.appendChild(e),++o===r)&&n&&n()},t.onerror=e=>{},t.send(null)})}function Fe(t){let a={};for(var e in de)a[e]=de[e].defaultValue;var n=Object.keys(de);Y(n,e=>{fe=Object.assign(a,e),t(fe)})}function V(e){return 1===e.nodeType?{type:"element",tagName:e.tagName.toLowerCase(),attributes:(t=>{var a={};for(let e=0;e<t.length;e++)a[t[e].name]=t[e].value;return a})(e.attributes),children:Array.from(e.childNodes,We)}:{type:"no-element",tagName:"",attributes:{},children:[]}}function Ke(e){let t;var a=e.type,n=e.children||[],i=e.textContent;return t="element"===a?ye(e.tagName,e.attributes,n.map(Ke)):ne(i)}function We(e){return 3!==e.nodeType?V(e):{type:"text",textContent:e.textContent}}function _e(e){var{elementId:e,highLightElement:t,shadowRootId:a}=e;return Ue(),(h=(a?window.document.querySelector(`*[${w}=${a}]`).shadowRoot:window.document).querySelector(`*[${se}=${e}]`))&&(Je(h),t)&&(a=h,e=!1,a)&&((g=a).setAttribute(u,"true"),e)&&(a.getAttribute("tabindex")||(a.setAttribute("tabindex","-1"),a.setAttribute("data-tabindex","true")),a.focus()),h}function Ue(){g&&g.removeAttribute(u)}function ze(e){var e=e.elementId;return(f=window.document.querySelector(`*[${se}=${e}]`))&&((e=f)&&(e.getAttribute("tabindex")||(e.setAttribute("tabindex","-1"),e.setAttribute("data-headingsMap-tabindex","true")),e.focus()),f.onblur=e=>{e=e.target;e.getAttribute("data-headingsMap-tabindex")||(e.removeAttribute("tabindex"),e.removeAttribute("data-headingsMap-tabindex"))}),f}function Xe(){Je(window.document.body,{block:"start"})}function Je(e,t={}){e.scrollIntoView(t)}function Ge(){document.querySelectorAll(`*[${se}]`).forEach(e=>{e.removeAttribute(se)}),document.querySelectorAll(`*[${w}]`).forEach(e=>{e.shadowRoot.querySelectorAll(`*[${se}]`).forEach(e=>{e.removeAttribute(se)})})}function Qe(e=!1){var t=window.document,t=!!t.querySelectorAll("title").length&&t.querySelectorAll("title")[0];let a=t?t.text:"";return""===a.trim()&&(t=window.location.href,a=e?t:n),a}function Ye(i,t=document){{var[a=document]=[t],n,r;let e=0;for(n of a.querySelectorAll("*"))n.shadowRoot&&!n.getAttribute(w)&&(n.setAttribute(w,""+p+e),e++,(r=document.createElement("style")).setAttribute(P,"true"),r.textContent=m,n.shadowRoot.appendChild(r))}let o=[];return t.querySelectorAll(`${i}, *[${w}]`).forEach((t,e)=>{var a,n;n=t,i.split(",").map(e=>e.trim()).some(e=>{var t;return"."===e.substring(0,1)?n.classList.contains(e.substring(1)):"*["===e.substring(0,2)?(t=e.substring(2).replace("]","").split("="),n.getAttribute(t[0])&&(1===t.length||n.getAttribute(t[0])===t[1])):n.tagName.toLowerCase()===e})||"*"===i?o.push({element:t}):t.shadowRoot&&(a=Ye(i,t.shadowRoot).map(e=>({element:e.element,shadowRoot:t.getAttribute(w)})),o.push(...a))}),o}function C(e,c,t=!1,d=void 0,u=!1){let a={showAriaLabelContent:c.showAriaLabelContent,showHiddenContent:c.showHiddenHeaders},p=e=>a.showHiddenContent||He(e),h=c.showHiddenHeaders;t=Ye("h1, h2, h3, h4, h5, h6, *[role=heading]"+(t?", iframe":""),e);let f=[];return t.forEach((t,a)=>{var{element:t,shadowRoot:n}=t;if(!t.classList.contains("headingsmap-exclude")){var e,i,r=t.tagName.toLowerCase(),o=!(te(t)||Me(t)||(o="details"===(e=t).tagName.toLowerCase()?e:e.closest("details"),i="summary"===e.tagName.toLowerCase()?e:e.closest("summary"),o&&!i&&!e.closest("details").open));if("iframe"!==r){if(i="heading",!(e=(e=t).attributes.role)||e.value===i){var l=0<Pe(t,!0).trim().length,s=x(t,c,p);if((o||h)&&(c.showEmptyHeadings||l)){let e=void 0;void 0!==d&&u&&(e=b+a+"-"+d,t.setAttribute(se,e));l={tagName:r,header:t,headingInfo:s,headerId:e,frameId:d,isVisible:o,shadowRoot:n};f.push(l)}}}else(o||h)&&f.push({tagName:r,frameId:t.getAttribute(xe),isVisible:o})}}),f}function Ze(e){let t=0,a=e;for(;null!==a;)t=(t+=a.offsetLeft)-a.scrollLeft,a=a.offsetParent;return t}function et(e){let t=0,a=e;for(;null!==a;)t=(t+=a.offsetTop)-a.scrollTop,a=a.offsetParent;return t}function x(e,a,n=Ie){var t,i,r,o,l=e.attributes.role,s=e.tagName.toLowerCase();if("HGROUP"===s&&a.considerHgroup){var c=C(e,a);let t=[];return c.forEach(e=>{t.push(x(e.header,a,n))}),c.sort(function(e,t){return e.level-t.level}),c[0]||null}return i=(i=(c=e).attributes["aria-level"])&&parseInt(i.value),r=0<=i,o=(c=c.tagName)&&new RegExp("^H[1-6]$","i").test(c.toUpperCase()),r=r?i:o?parseInt(c.substr(1)):2,i=tt(e),o=at(e),t=nt(e),{level:r,tagName:s,headerText:Pe(e,n),ariaLevel:!0,ariaLabel:i,ariaLabelledBy:o,sectionRef:t,headingRole:l&&l.value}}function tt(e){return e.getAttribute("aria-label")||!1}function at(e){e=e.getAttribute("aria-labelledby");let a="";return e&&e.split(" ").forEach((e,t)=>{e=window.document.getElementById(e);e&&(t&&(a+=" "),a+=Pe(e,!0))}),a}function nt(e){let t=e.getAttribute("id")||e.getAttribute("name");if(!t){var a=e.children,n=a.length;for(let e=0;e<n&&!(t=nt(a[e]));e++);}return t}function e(i,r){return function(e){var t,a,n;return(!(t=(t=e)&&t.attributes&&t.attributes.role)||"presentation"!==t.value)&&(!(t=e&&e.tagName&&new RegExp(i,"i").test(e.tagName.toUpperCase()))&&r?({attribute:a,value:n}=r,e&&a&&n&&e.getAttribute&&e.getAttribute(a)&&e.getAttribute(a)===n):t)}}function it(e){return e[e.length-1]}function rt(e){return e?_:H}function o(){return document.URL?.split(/[?#]/)[0]}function ot(){return new URL(o()).hostname}function lt(e,t,a,n){var i={},a=(a&&(i.class=a),ye("div",i)),{tabList:i,tabPanels:e}=((a,e,t)=>{let n=ye("div",{role:"tablist"}),i={},r=(t&&(i.class=t),ye("div",i));return e.forEach(e=>{var{tabButton:e,tabPanel:t}=((e,t)=>{let a=ue[t.tabTex]||t.tabTex,n=t.tabId,i=t.tabClass||"",r=t.panelClass||"",o=t.style||"",l=ne(a),s=t.active||!1,c={"aria-selected":"false",id:n+"-tab","aria-controls":n,role:"tab",tabindex:"-1"},d=(i&&(c.class=i),o&&(c.style=o),ye("button",c)),u=t.metadata||[],p=(u.forEach(e=>{d.setAttribute("data-"+e.key,e.value)}),()=>t.onclick&&t.onclick(n));var h=e,f=d,b=p,g=(f.onclick=()=>{b();var e=f.closest("[role=tablist]").querySelector("[aria-selected=true]"),e=(e?.setAttribute("tabindex","-1"),e?.setAttribute("aria-selected","false"),e?.getAttribute("aria-controls"));h.querySelector(`[role=tabpanel][id=${e}]`)?.classList.remove(N),f.setAttribute("tabindex",""),f.setAttribute("aria-selected","true"),e=f.getAttribute("aria-controls"),h.querySelector(`[role=tabpanel][id=${e}]`).classList.add(N)},f.addEventListener("keydown",e=>{var t=e.key.toLowerCase(),a=e.target,n=a.parentNode.querySelectorAll("button[role=tab]");switch(t){case"arrowleft":e.preventDefault();var i=a.previousSibling;(i&&"tab"===i.getAttribute("role")?(i.focus(),i):(n[n.length-1].focus(),n[n.length-1])).click();break;case"arrowright":e.preventDefault();i=a.nextSibling;(i&&"tab"===i.getAttribute("role")?(i.focus(),i):(n[0].focus(),n[0])).click()}}),d.appendChild(l),c={id:n,"data-panel-id":n,role:"tabpanel","aria-labelledby":n+"-tab"},r&&(c.class=r),ye("div",c)),e=ye("div",{class:U}),e=(g.appendChild(e),ye("div",{class:z+" "+B})),e=(g.appendChild(e),ye("div",{class:y}));if(g.appendChild(e),e=t.content){var m,v=Array.isArray(e)?e:[e];for(let e=0;e<v.length;e++)"string"==typeof v[e]||"number"==typeof v[e]?(m=ne(v[e]),g.appendChild(m)):g.appendChild(v[e])}return s&&(d.setAttribute("tabindex","0"),d.setAttribute("aria-selected","true"),g.classList.add(N)),{tabButton:d,tabPanel:g}})(a,e);n.appendChild(e),r.appendChild(t)}),{tabList:n,tabPanels:r}})(e,t,d+" "+n);return a.appendChild(i),a.appendChild(e),a}function st(e){return{text:new Array(e-1).fill("    ").join(""),indentationClass:a}}function ct(e){me({action:"scrollElementInTree",params:{headerId:e}})}function dt(e,t){t=t.querySelector(`*[${se}=${e}]`);t&&t.classList.add(Se)}function ut(e){return e.getAttribute(R)}function pt(e){document.removeEventListener("scrollend",e,!0)}function ht(e){A=e,ft(M),L&&(D=De(window.document.body,v,((n,i,r)=>{let o;return function(){let e=this,t=arguments;var a=i&&!o;clearTimeout(o),o=setTimeout(function(){o=null,i||n.apply(e,t)},r||l),a&&n.apply(e,t)}})(()=>{L()&&L()(!1)},!1))),window.document.body.querySelectorAll("details").forEach(e=>{e.ontoggle=()=>{L()&&L()(!0)}})}function ft(){D&&D.disconnect(),D=void 0,G()}function bt(e){var t=window.document.querySelector("iframe["+xe+'="'+e+'"]');return{frame:t,isVisible:!t||!te(t)&&!Me(t),frameId:e}}function gt(e){window.location===window.parent.location&&e()}function mt(e){return e?e.map(({tagName:e,headingInfo:t})=>"iframe"!==e?e+t.headerText+t.level+t.ariaLevel:e).join(""):""}function vt(){return document.getElementById(he)}t.onMessage.addListener(function(e,t,a){{var n;"getDomainInfo"===e.action?a({action:"update",params:{domain:ot(),URL:o()}}):($e&&a({isOpen:!!vt()}),n=e.action,e=e.params||{},Te[n]&&"test"!==n&&Te[n](Object.assign({},{settings:fe},e),a))}}),document.addEventListener("click",e=>{me({action:"documentClick",params:{}})});let yt="headings-map-aria-live",wt={createAriaLiveElement:()=>ye("div",{id:yt,style:"position: absolute; left: 0; height: 1px; width: 1px; margin: -1px; overflow: hidden; opacity: 0; clip: rect(0 0 0 0);","aria-live":"polite","aria-atomic":"true","aria-relevant":"additions"}),removeAriaLiveElement:()=>{var e=document.getElementById(yt);e.parentElement.removeChild(e)},setAriaLiveMessage:e=>{let t=document.getElementById(yt);t&&(ft(),t.replaceChildren(),e=ne(e),t.appendChild(e),ht(A),setTimeout(()=>{ft(),t.replaceChildren(),ht(A)},3e3))}},At=!1,ie={},Lt=[],Ct=new Set,xt=null;function St(){let i=30,r="tooltip",c="hiddenTooltip",d="tooltip-reference-content";class e{constructor(e){this._root=e;e=e,t=ye("span",{class:"arrow"}),a=ye("div",{class:"tooltip-content"}),n=ye("div",{class:"tooltip "+c},[t,a]),e.appendChild(n);var t,a,n,e={arrow:t,tooltipElement:n,tooltipContent:a};this._tooltip=e.tooltipElement,this._tooltipContent=e.tooltipContent,this._arrow=e.arrow,e.tooltipDataSetPrefix=r}show(){return e=>{var t=e.target,a=(this.sendContentToOrigin(),this._tooltip),n=this._root,i=this._tooltipContent,r=a.style,o=this._arrow,l=o.style,s=t.querySelector("."+d);s&&(i.appendChild(s),r.left=u(n,a,e.clientX),s=(i=p(t)).top+i.height/2,r.top=s+"px",e=(n=p(a)).height/2-p(o).height/1.5,l.top=e+"px",0<(t=n.bottom-(window.innerHeight||document.documentElement.clientHeight))&&(r.top=s-t+"px",l.top=e+t+"px"),a.classList.remove(c))}}updatePositionToMouseClientX(){return e=>{this._tooltip.style.left=u(this._root,this._tooltip,e.clientX)}}hide(){return()=>{this._tooltip.classList.add(c),this.sendContentToOrigin()}}sendContentToOrigin(){this._tooltipContent.querySelectorAll("."+d).forEach(e=>{var t=e.getAttribute(se);this._root.querySelector(`[${se}=${t}]`).appendChild(e)})}}return{tooltipReferenceContentAttr:d,TreeTooltip:e,tooltipDataSetPrefix:r};function u(e,t,a){var n=e.classList.contains("position-left")?"left":"right";return"left"==n?((e,t)=>(t+=i,e=p(e).right,t<=e?t:e))(e,a)+"px":((e,t,a)=>(e=p(e).left,t=p(t).width,(0<(a=a-e-i)?a:0)-t))(e,t,a)+"px"}function p(e){return e.getBoundingClientRect()}}function kt(){let T="biohead",q="head-error",I="tooltip-error",B="headingsMap-h",{generateSectionForMap:i,removeAnchorFromHref:O}=Bt,R=St().tooltipReferenceContentAttr;return{headingsMap:function(e,t,a){let n=Object.assign({translations:t},e);return function(){var e=i(a),t=C(window.document.body,n,!0,a,!0);return{results:e,elements:t}}},generateTreeList:function(a,e,t){let n=Object.assign({translations:t},e),r=n.translations,o=0,l=0,s=n.showAnchors,c=O(window.location.href),d=ye(ee,{class:B+" 0"}),i=new DocumentFragment,u=(i.appendChild(d),a.length);{var p;if(!u)return t=ye(ce),d.appendChild(t),e=ne(r.noHeadings),(p=ye("span",{class:"no-headed"})).appendChild(e),t.appendChild(p),d}for(let t=0;t<u;t++){var{headingInfo:h,headerId:f,frameId:b,isVisible:g,tagName:m,shadowRoot:v}=a[t],{headingRole:y,headerText:w,sectionRef:A,ariaLabel:L,ariaLabelledBy:C}=h,x=[{content:w}],h=(l=h.level,ye(ce));if(l>o){var S=l===o+1?l:o+1,S=B+S,S=ye(ee,{class:S});S.appendChild(h),d.tagName.toLowerCase()===ee?d.appendChild(h):d.appendChild(S)}else if(l===o)(d=d.parentNode).appendChild(h);else if(l<o){let e=d;for(;"hroot"!==e.parentNode.getAttribute("class");){var k=(e=e.parentNode).getAttribute("class");if(0<=k.indexOf("h")){if(parseInt(k.replace(B,""))<=l){d=e;break}}else{k=parseInt(k.replace(T,""));if(k<l){d=e.getElementsByTagName(ee)[0];break}if(l===k){d=e.parentNode;break}}}d.appendChild(h)}d=h;var S=l,h=g?_:H,b={[se]:f,[Z]:b,class:h},v=(v&&(b[X]=v),st(l)),v=ye("span",{class:v.indentationClass},v.text),E=ye("span",{class:"head-level additional-info","aria-hidden":"true"},l+" "),$=ne(w+`
`),v=[v,E,$],E=(A&&s&&(E=c+"#"+A,$=ye("span",{"data-anchor-id":b.href=E,class:ae,title:r.clickTheAnchor}),v.push($)),b.tabindex="0",ye("span",{class:oe})),$=(v.push(E),ye("a",b,v)),v=((n.showAriaLabelContent||!1)&&(L&&(x.push({content:"aria-label "+L}),E=ye("span",{class:"aria-label-span"},' [aria-label="'+L+'"]'),$.appendChild(E)),C)&&(x.push({content:"aria-labelledby "+C}),b=ye("span",{class:"aria-labelled-span"},' [aria-labelledby="'+C+'"]'),$.appendChild(b)),d.appendChild($),d.classList.add(T+S),d.setAttribute("data-level",S),0===w.trim().length),L=(v&&$.classList.add(q),l>o+1);let e=!1,i=(L&&(e=0===t,$.classList.add(e?"head-error-h1":q)),o=l,ye("div",{class:R,[se]:f}));x.push({content:r.headingLevel+" "+l}),x.push({content:r.element+" "+m}),y&&x.push({content:"Role "+y}),v&&x.push({content:[r.error,r.emptyHeader],attributes:{class:I}}),L&&x.push({content:[r.error,e?r.missingH1:r.wrongHierarchy],attributes:{class:I}}),A&&x.push({content:r.clickTheAnchor,attributes:{class:ae}}),g||x.push({content:r.potentiallyHidden,attributes:{class:h}}),x.forEach(e=>{var t=e.content,e=e.attributes||{};let a="",n;n="string"==typeof t||t.nodeType?t:(a=ye("strong",{},t[0]+": "),t[1]);t=ye("div",e,[a,n]);t.classList.add("tooltip-item"),i.appendChild(t)}),$.append(i)}return i}}}function Et(){let W="no-headed",_="tag-name",U="additional-info",z="aria-label-span",X="aria-labelled-span",J="tooltip-item",G="tooltip-error",Q="element with no heading",m=window.document.body,{removeAnchorFromHref:v,generateStringSectionForMap:y,isHigherLevel:w}=Bt,Y=St().tooltipReferenceContentAttr;return{HTML5Outline:function(r,e,D){let M=e,H=r.showAriaLabelContent||!1,o=r.showHiddenSections,t={showAriaLabelContent:H,showHiddenContent:o},N=r.showAnchors,l,s,c,n=0,V=v(window.location.href);class d{constructor(e){this.sections=[],this.startingNode=e,this.attributes={}}append(e){(e.container=this).sections.push(e)}}class u{constructor(e,t){this.startingNode=e.node,this.sections=[t]}getLastSection(){return it(this.sections)}}class p{constructor(e){this.node=e}}return function(){return s=null,c=[],n=0,l=null,((e,t,a)=>{let n=e;e:for(;n;)if(Ne(n)&&!n.classList?.contains("headingsmap-exclude")&&(t(n),n.firstChild))n=n.firstChild;else for(;n;){if(a(n),n.nextSibling){n=n.nextSibling;continue e}n=n===e?null:n.parentNode}})(m,a,i),{results:y(function B(e,O={},R=1){if(!e.length)return"";void 0===O.idCounter&&(O.idCounter=0);let P=[];P.push(`<${ee}>`);e.forEach(e=>{let t=K(e,O),a=e.heading,n=a.implied?"no heading":a.tagName.toLowerCase(),i=e.startingNode,r=j(a),{ariaLabelledBy:o,ariaLabel:l}=r,s=e.attributes.isVisible,c=r.textContent,d=i.tagName.toLowerCase(),u=("body"===d&&(d=d.replace("body","document")),'<span class="'+_+" "+U+'">['+d+"]</span>"),p=c||H&&(o||l),h="",f=(p||(h=" "+W,c=Q),rt(s)),b=`class="${f}${h}"`,g="",m=(c&&(g=`title="${c.replace(/"/g,"'")}"`),`${se}="${t}"`),v=Z+`="${D}"`,y=i.getAttribute("id")||i.getAttribute("name"),w="",A=(w=y?`href="${V}#${y}"`:'tabindex="0"',""),L="",C=(H&&(o&&(A=`<span class="${X}"> [aria-labelledby: ${o}]</span>`),l)&&(L=`<span class="${z}"> [aria-label: ${l}]</span>`),"");if(N){let t=F(e);if(t){let e=V+"#"+t;C=`<span data-anchor-id="${e}" class="${ae}" title="${M.clickTheAnchor.replace(/"/g,"'")}"></span>`}}let x=`<span class="${Y}" ${m}>`,S=(x+=`<div class="${J}">${c}</div>`,l&&(x+=`<div class="${J}">aria-label: ${l}</div>`),o&&(x+=`<div class="${J}">aria-labelledby: ${o}</div>`),x+=`<div class="${J}">${M.generatedBy}: ${d}</div>`,p&&d!==n?x+=`<div class="${J}">${M.heading}: ${n}</div>`:p||(x+=`<div class="${J} ${G}">${M.errorNoHeadingSection}</div>`),y&&(x+=`<div class="${J} ${ae}">${M.anchor}: #${y}</div>`),s||(x+=`<div class="${J} ${f}">${M.potentiallyHiddenPlural}</div>`),x+="</div>",`<span class="${oe}"></span>`),k=u+c+A+L+C+S,E=m+` ${v} ${g} ${b} `+w,$=B(e.sections,O,R+1),T=st(R),q=`<span class="${T.indentationClass}">${T.text}</span>`,I=`<${ce}><a ${E}>${q}${k} ${x}</a>${$}</${ce}>`;P.push(I)});P.push(`</${ee}>`);return P.join("")}(l.outline.sections),D),elements:[]}};function h(){return c.length?it(c).node:""}function a(a){var e=h();if(!(S(e)||k(e)||Ne(e)&&te(e)&&!o)){var n,i=te(a);if(Me(a)||i&&!o)c.push({node:a});else if($(a)||E(a))null!==l&&(s.heading||(s.heading={implied:!0}),c.push(l)),l=new p(a),E(a)&&(l.parentSection=s),(s=new d(a)).attributes.isVisible=!i,l.outline=new u(l.node,s);else if(S(a)||r.considerHgroup&&k(a)&&C(a,r).length){if(s.heading)if(l.outline.getLastSection().heading.implied||!w(x(a,r).level,x(l.outline.getLastSection().heading,r).level)){e=new d(a);e.attributes.isVisible=!i,l.outline.sections.push(e),(s=e).heading=a}else{let e=!1,t=s;do{w(x(a,r).level,x(t.heading,r).level)&&((n=new d(a)).attributes.isVisible=!i,t.append(n),(s=n).heading=a,e=!0),t=t.container}while(!e)}else s.heading=a;c.push({node:a})}}}function i(e){var t=h();t===e&&c.pop(),S(t)||te(t)&&!o||(($(e)||E(e))&&0<c.length&&!s.heading&&(s.heading={implied:!0}),$(e)&&0<c.length?(t=l,l=c.pop(),s=l.outline.getLastSection(),t.outline.sections.forEach(e=>{s.append(e)})):E(e)&&0<c.length?(s=l.parentSection,l=c.pop()):!$(e)&&!E(e)||s.heading||(s.heading={implied:!0}))}function f(e){if(S(e))return b(e);if(k(e)){let n={textContent:"",ariaLabelledBy:"",ariaLabel:""};return C(e,r).forEach(e=>{var{textContent:e,ariaLabelledBy:t,ariaLabel:a}=b(e.header);n.textContent+=e?" "+e:"",n.ariaLabelledBy+=t?" "+t:"",n.ariaLabel+=a?" "+a:""}),n}return{textContent:"",ariaLabelledBy:"",ariaLabel:""}}function b(e){return{textContent:(Pe(e,g)||e.innerText).replaceAll("<","&lt;")||"",ariaLabelledBy:at(e),ariaLabel:tt(e)}}function j(e){var t;return e.implied?{textContent:"",ariaLabelledBy:"",ariaLabel:""}:{textContent:(t=f(e)).textContent,ariaLabelledBy:at(e)||t.ariaLabelledBy,ariaLabel:tt(e)||t.ariaLabel}}function F(e){return e.heading.implied?"":nt(e.heading)}function K(e,t){return e.heading.implied?a(e.startingNode,++t.idCounter):a(e.startingNode);function a(e){var t=e.getAttribute(se);return t?e.setAttribute(se,t):(t="headingsMap-"+ ++n,e.setAttribute(se,t)),t}}function g(e){return t.showHiddenContent||He(e)}}}}function $t(){let a=Ot().createCombobox;return{createDocumentSelector:function(t,e=()=>{}){let o=a([],{label:ue.documents,editable:!1},{onSelect:e=>{t(parseInt(e.getAttribute(Z)))},openCallback:e});return o.classList.add("document_selector"),o.updateListOfDocuments=(e,t)=>{let{options:a,activeOption:n,visibilityCounter:i}=((a,n)=>{let e=a.length,i=[],r=null,o=0;for(let t=0;t<e;t++){var l=a[t],s=l.frameId,c=l.isVisible;let e=l.title;l=window.document.querySelector('iframe[src="'+l.url+'"]');l&&(e=e||l.getAttribute("title"),l.setAttribute(xe,s)),void 0===(e=0===s&&void 0===e?Qe(!0):e)&&(e="-"),i.push({text:e,attributes:{[Z]:s,role:"option","aria-selected":"false",class:c?_:H}}),c&&o++,n===s&&(r=s)}return{options:i,activeOption:r,visibilityCounter:o}})(e,t),r=(o.updateOptions(a),o.getOptions().filter(e=>e.getAttribute(Z)===""+n)[0]);!fe.showHiddenSections&&r.classList.contains(H)&&(r=o.getOptions().filter(e=>!e.classList.contains(H))[0]),o.setActiveOption(r),o.style.display=!fe.showHiddenSections&&i<2?"none":""},o.updateActiveDocument=()=>{var e=Array.from(o.querySelectorAll("*[role=option]"));let t=e.find(e=>"true"===e.getAttribute("aria-selected"));t&&(fe.showHiddenSections||!t.classList.contains(H))||(t=e.find(e=>!e.classList.contains(H)),o.setActiveOption(t))},o.setActiveDocument=function(t){var e=o.getOptions(),e=e.find(e=>e.getAttribute(Z)===""+t);o.setActiveOption(e)},o}}}let Tt=function(){let e=function(e){var t;!vt()||e.isComposing||e.repeat||(e=>(e=(e=>e instanceof HTMLElement?e.tagName.toLowerCase():"")(e),["input","textarea","select"].includes(e)))(e.target)||e.metaKey||(u(t=e.key)?e.preventDefault():(Ct.add(t.toLowerCase()),me({action:"documentKeydown",params:{keysCombination:(e=>e.map(e=>e.toLowerCase()).join(r))(Array.from(Ct))}}),e.target.addEventListener("blur",a)))}.bind(this),h=function(e){vt()&&("meta"!==(e=e.key.toLowerCase())?Ct.delete(e):i())}.bind(this),f=function(){vt()&&i()}.bind(this),r="~",N=["meta","control","alt"],t=["control","alt"],b="headingsmap-shortcuts",g=" + ",s="is-custom-shortcut",m="data-shortcut-id",V="data-shortcut-group",o="shortcuts-list",v="shortcut-keys-container",j="shortcut-description",F="shortcut-keys",y="shortcut-item",K="shortcut-buttons-container",w="button-shortcut",A="edit-shortcut",W="reset-shortcut",L="save-shortcut",_="cancel-shortcut",U="kdb-shortcut",c="shortcut",z="kdb-shortcut-fixed",X="kdb-shortcut-undefined",J="editor-shortcut-container",G="input-shortcut-container",C="input-shortcut",n="shortcut-error",Q="shortcut-hint-message",Y="shortcut-error-message",x="shortcut-edition-active",S=wt.setAriaLiveMessage,{setStored:k,getStored:Z}=re;return At||(At=!0,document.addEventListener("keydown",e),document.addEventListener("keyup",h),document.addEventListener("blur",f)),{registerShortcuts:function(e){e=Array.isArray(e)?e:[e];e.forEach(e=>{var{binding:e,command:t,preventDefault:a,description:n,customizable:i,id:r,fixedKey:o,fixedKeyAlias:l,group:s}=e,t={binding:e,command:t,preventDefault:a,description:n,customizable:i,id:r,fixedKey:o,fixedKeyAlias:l,group:s};t.binding=I(e),Lt.push(t)}),E()},getShortcutsPanel:function(){let e=Re(ue.shortcutsPanelDescription),t=ye("p",{},e),a=ye("ul",{class:o},[]),n=[],i=(Object.values(ie).forEach(e=>{var t=e.group;t&&n.includes(t)||(a.appendChild((e=>{let{description:t,binding:a,id:n,fixedKey:i,fixedKeyAlias:r,group:o}=e,l=n,s=ne(t),c=ye("span",{class:j},[s]),d=[],u=(Array.isArray(a[0])?a.forEach(e=>{d.push(R(l,e,i,r,o))}):d.push(R(l,a,i,r,o)),((i,r)=>{let o=ye("input",{type:"text",readonly:"readonly",placeholder:ue.shortcutHintMessage,"aria-label":ue.shortcutEditLabel,class:C,[m]:i},[],[{name:"keydown",callback:ee},{name:"keyup",callback:te},{name:"blur",callback:ae}]),e=ne(ue.shortcutHintMessage),t=ye("span",{"aria-hidden":"true",class:Q},[e]),a=ne(ue.shortcutErrorMessage),n=ye("span",{id:"error-"+i,class:Y},[a]),l=(o.clear=()=>{o.value="",M(o,!0)},o.save=()=>{var e=D(r)||[P(i)];let n=[];e.forEach(e=>{var t=P(e.id).fixedKey,t=o.value.trim()+(t?""+g+t:"");n.push({binding:H(t),id:e.id})});{e=n;let a=[];e.forEach(e=>{if(e.binding.length){if(T(e.id,e.binding))return void console.error(`"${e.binding.toString()}" shortcut is already registered`);if(q(e.id,e.binding))return}var t=I(e.binding),e=e.id;a.push({id:e,binding:t})}),$(r=>{a.forEach(t=>{let a=t.id;var e=r.findIndex(e=>e.id===a),e=(0<=e&&r.splice(e,1),Lt.find(e=>e.id===a));let n=!1;var i=e.binding;(n=Array.isArray(i[0])?i.some(e=>B(e.binding,t.binding)):B(e.binding,t.binding))||r.push(t)}),k(b,JSON.stringify(r)),E()})}S(""+ue.saved);e=o.closest("."+y);e.classList.remove(x),e.querySelector(`.${w}.`+A)?.focus(),o.clear()},o.cancel=()=>{var e=o.closest("."+y);e.classList.remove(x),e.querySelector(`.${w}.`+A)?.focus(),o.clear()},o.reset=()=>{let e=[i];r&&(e=D(r).map(({id:e})=>e)),t=e,$(a=>{t.forEach(t=>{var e=a.findIndex(e=>e.id===t);0<=e&&a.splice(e,1)}),k(b,JSON.stringify(a),()=>{E(Lt)})});var t,a=o.closest("."+y);a.classList.remove(x),a.querySelector(`.${w}.`+A)?.focus(),o.clear()},o.keyBuffer={},ye("span",{class:""+G},[o,t,n])),s=ye("button",{class:w+" "+A,"aria-label":ue.shortcutEditButton,title:ue.shortcutEditButton,[m]:i},[],[{name:"click",callback:()=>{var e=o.closest("."+y),t=(t=>{if(t=P(t)){let{binding:e,fixedKey:a}=t,n=[];return e.forEach(e=>{if(Array.isArray(e)){let t=[];e.forEach(e=>{e!==a&&t.push(e.toLowerCase())}),n.push(t)}else e!==a&&n.push(e.toLowerCase())}),n}})(i);Array.isArray(t[0])?o.value=t[0].join(g):o.value=t.join(g),e.classList.add(x),o.focus()}}]),c=ye("button",{class:w+" "+W,"aria-label":ue.shortcutResetButton,title:ue.shortcutResetButton,[m]:i},[],[{name:"click",callback:o.reset}]),d=ye("button",{class:w+" "+L,"aria-label":ue.shortcutSaveButton,title:ue.shortcutSaveButton,[m]:i},[],[{name:"click",callback:o.save}]),u=ye("button",{class:w+" "+_,"aria-label":ue.shortcutCancelButton,title:ue.shortcutCancelButton,[m]:i},[],[{name:"click",callback:o.cancel}]),p=ye("span",{class:""+K},[c,s,d,u]);return ye("span",{class:J},[l,p])})(l,o)),p=ye("span",{class:v},[...d]),h=ye("span",{class:F},[p,u],[{name:"click",callback:()=>{h.closest(`.${y}.`+x)?.querySelector("."+C)?.focus()}}]),f=ye("li",{class:y,[m]:l},[c,h]);return o&&f.setAttribute(V,o),O(l,f),f})(e)),t&&n.push(t))}),Re(ue.shortcutsPanelDescriptionBottom)),r=ye("p",{},i);return xt=ye("ul",{class:o},[t,a,r])},keydownWithShortcuts:function(e){var e=e.split(r),t=(t=>{let e=Object.values(ie),a=e.find(({binding:e})=>Array.isArray(e[0])?e.some(e=>B(e,t)):B(e,t)),n=t.some(e=>d(e));var i;return!a&&n&&(i=t.filter(e=>!d(e)).join(r),a=ie[i]),a??null})(e);t&&t.command(e)},clearShortcuts:function(){ie={},Lt.length=0,i(),xt=null}};function E(){ie={};let c=[];Lt.forEach(e=>{var{binding:e,command:t,preventDefault:a,description:n,customizable:i,id:r,fixedKey:o,fixedKeyAlias:l,group:s}=e,e={binding:e,command:t,preventDefault:a,description:n,customizable:i,id:r,fixedKey:o,fixedKeyAlias:l,group:s};c.push(e)}),$(e=>{e.forEach(({id:t,binding:e})=>{var a=c.find(e=>e.id===t);a&&(a.binding=e,a.isCustom=!0)}),c.forEach(e=>{T((e=e).id,e.binding)?console.error(`"${e.binding.toString()}" shortcut is already registered`):O((ie[e.id]=e).id)})})}function $(t){Z(b,e=>{e=e&&e[b]?e[b]:"[]";t(JSON.parse(e))})}function T(e,t){return I(t),!q(e,t)&&P(e)&&l(t)}function q(e,t){I(t);var e=P(e);let a=!1;return e&&(e=e.binding,a=Array.isArray(e[0])?e.some(e=>B(e,t)):B(e,t)),a}function l(t){return I(t),Object.values(ie).find(e=>{e=e.binding;return Array.isArray(e[0])?e.some(e=>B(e,t)):B(e,t)})}function I(e){return e.map(e=>Array.isArray(e)?e.map(e=>e.toLowerCase()):e.toLowerCase()),e}function a(e){i(),e.target.removeEventListener("blur",a)}function i(){Ct.clear()}function B(e,t){return JSON.stringify([...e].sort())===JSON.stringify([...t].sort())}function d(e){return t.includes(e.toLowerCase())}function u(e){return N.includes(e.toLowerCase())}function O(o,l){l=l||xt?.querySelector(`.shortcut-item[${m}=${o}]`);if(l){let t=l.querySelector("."+v);let{isCustom:e,binding:a,fixedKey:n,fixedKeyAlias:i,group:r}=P(o);e?l.classList.add(s):l.classList.remove(s),t.replaceChildren(),Array.isArray(a[0])?a.forEach(e=>{t.appendChild(R(o,e,n,i,r))}):t.appendChild(R(o,a,n,i,r))}}function R(e,t,a,n){t=((e,i,r=void 0)=>{let o=e.length,l=[];return o?e.forEach((e,t)=>{let a=c;var n=i===e,e=(i===e&&(a+=" "+z),ne(n&&r?`[${r}]`:""+e)),n=ye(n&&r?"span":"kbd",{class:a},[e]);l.push(n),t<o-1&&(e=ye("span",{},[ne(g)]),l.push(e))}):(e=ne(ue.shortcutNotDefined),e=ye("span",{class:c+" "+X},[e]),l.push(e)),l})(t,a,n);return ye("span",{class:U,[m]:e},t)}function P(t){var e=Object.values(ie).find(({id:e})=>e===t);return e||void 0}function D(t){var e=Object.values(ie).filter(({group:e})=>e===t);return t?e:void 0}function ee(t){var a=t.target,n=a.getAttribute(m),i=P(n).fixedKey,r=t.key.toLowerCase();if(u(r)||t.metaKey)t.preventDefault();else if(i&&r===i)t.preventDefault();else if("escape"===r)t.stopPropagation(),a.cancel();else if("tab"===r)t.stopPropagation();else if("backspace"===r||"delete"===r)a.clear();else if("enter"===r)t.preventDefault(),t.stopPropagation(),a.save();else if(t.isComposing||t.repeat)t.preventDefault(),t.stopPropagation();else{i=r.match(/[^A-Za-z0-9.,/<>;:]+/g);if("shift"!==r&&1<r.length&&!(-1<["arrowleft","arrowright","arrowup","arrowdown"].indexOf(r))||i)new Array(15).fill("").map((e,t)=>"f"+(t+1)).includes(r)||t.preventDefault();else{t.preventDefault(),a.keyBuffer[r]=!0;i=(e=>{var t,a=[];for(t in e.keyBuffer)e.keyBuffer[t]&&a.push(t);return a})(a),t=i.join(g),r=(a.value=t,!T(n,i));M(a,r);let e=t;!r&&(e=t+" "+ue.shortcutErrorMessage,n=l(i))&&(e+=" to "+n.description),S(e)}}}function te(e){var t=e.target,a=P(t.getAttribute(m)).fixedKey,e=e.key.toLowerCase();t.keyBuffer[e]=null,a||p(t.value)&&t.clear()}function ae(e){var e=e.target,t=P(e.getAttribute(m)).fixedKey;t||!p(e.value)&&e.value.trim().length||e.clear()}function M(e,t){var e=e.closest("."+y),a=e.querySelector("."+L);t?(e.classList.remove(n),a.removeAttribute("disabled"),a.setAttribute("title",ue.shortcutSaveButton)):(e.classList.add(n),a.setAttribute("disabled","disabled"),a.removeAttribute("title"))}function p(e){return!H(e).some(e=>!t.includes(e)&&e.length)}function H(e){return 0===e.trim().length?[]:e.trim().split(g)}}(),qt="tree-root",It="tree-header",Bt={generateSectionForMap:e=>{var t=ne(Qe()),e=ye("h2",{class:qt,id:"treemap-id",[Z]:e},t),t=ye("div",{class:It},e);return ye("section",{tabindex:"-1","aria-labelledby":"headingsTab-button treemap-id",id:"map-id"},t)},generateStringSectionForMap:(e,t)=>`<section aria-labelledby="outlineTab-button treemap-id" tabindex="-1" id="map-id"><div class="${It}"><h2 class="${qt}" data-frame-id="${t}" id="treemap-id">${Qe()}</h2></div>${e}</section>`,removeAnchorFromHref:e=>e.split("#")[0],isHigherLevel:(e,t)=>-e<-t},Ot=function(){let I="combobox-open",B="result-match",O="search-text-active",R=null,P=!1;return{createCombobox:function(e=[],t={label:"",ariaLabel:"",optionsAriaLabel:""},a={}){let{onSelect:n,openCallback:i}=Object.assign({onSelect:()=>{},openCallback:()=>{}},a),{label:r,ariaLabel:o,optionsAriaLabel:l,editable:s}=t,c=null,d=null,u=Math.floor(1e4*Math.random()),p="";s?((R=ye("input",{id:"control-"+u,class:"combobox-input",type:"text",role:"combobox","aria-autocomplete":"both","aria-expanded":"false","aria-haspopup":"listbox","aria-controls":"dropdown-"+u})).oninput=()=>{A()||m(),$()},R.onfocus=()=>{P=!0,$(),setTimeout(()=>{P=!1},100)},p=ye("button",{class:"clear-text-button","aria-label":ue.clearText},[],[{name:"focus",callback:()=>{P=!0}},{name:"click",callback:()=>{P=!0,x(),$(),R.focus()}},{name:"blur",callback:()=>{P=!1,setTimeout(()=>{P||v()},100)}}])):R=ye("button",{id:"control-"+u,class:"combobox-button",role:"combobox","aria-expanded":"false","aria-haspopup":"listbox","aria-controls":"dropdown-"+u});R.onclick=function(e){1!==f.children.length&&(e&&e.stopPropagation(),(A()?v:m)())},R.onkeydown=function(e){let t=e.key.toLowerCase(),a=f.querySelectorAll("li");switch(t){case"arrowdown":if(A()){let e=c&&c.nextSibling?c.nextSibling:a[0];for(;e&&!q(e);)e=e.nextSibling;S(e)}else m();e.preventDefault();break;case"arrowup":if(A()){let e=c&&c.previousSibling?c.previousSibling:a[a.length-1];for(;e&&!q(e);)e=e.previousSibling;S(e)}else m();e.preventDefault();break;case"enter":if(A())c?.click(),e.preventDefault();else{let e=T(E().toLowerCase());1===e.length&&e[0].click()}break;case"escape":S(d),e.preventDefault(),v();break;default:return}},R.onblur=()=>{setTimeout(()=>{P||v()},100)};let h=ye("span",{class:"combobox-icon"}),f=ye("ul",{id:"dropdown-"+u,class:"dropdown-panel custom-scrollbar",role:"listbox","aria-label":l}),b=(f.onmouseenter=()=>{P=!0},f.onmouseleave=()=>{P=!1},ye("div",{class:"combobox-control"},[R,s?p:"",h,f])),g=ye("div",{class:"combobox"},[b]);r&&(a=ne(r),t=ye("label",{class:"combobox-label",for:"control-"+u},a),g.insertBefore(t,b));o&&R.setAttribute("aria-label",o);return g.updateOptions=L,g.open=m,g.close=v,g.clearSelection=x,g.control=R,g.isOpen=A,je(["comboboxService"],g,!1,F),L(e),g.keydown=e=>{27===e.which&&e.target.close()},g.setActiveOption=C,g.setActiveOptionByIndex=function(e){e=f.querySelectorAll("li")[e];C(e)},g.getOptions=function(){var e=f.querySelectorAll("li");return Array.from(e)},g.focus=()=>{R.focus()},g;function m(){g.classList.add(I),R.setAttribute("aria-expanded","true"),i(),$()}function v(){g.classList.remove(I),R.setAttribute("aria-expanded","false"),E()||w(),P=!1}function y(){g.classList.add(O)}function w(){g.classList.remove(O)}function A(){return g.classList.contains(I)}function L(e){f.replaceChildren(),e.forEach(e=>{e=((e,t={})=>{let a=ne(e),n=ye("li",Object.assign({},t),a);return n.onclick=()=>{C(n),v(),R.focus()},n})(e.text,e.attributes);f.appendChild(e)})}function C(e){e&&(f.querySelector("li[aria-selected=true]")?.removeAttribute("aria-selected"),d=e,k((c=e)?.textContent||""),e.setAttribute("aria-selected","true"),n(e))}function x(){f.querySelector("li[aria-selected=true]")?.removeAttribute("aria-selected"),k(""),d=null,c=null}function S(e){e&&(c?.removeAttribute("aria-selected"),c=null,e.setAttribute("aria-selected","true"),(c=e).scrollIntoView({block:"nearest"}),k(c?.textContent||""),y(),A()||e.click())}function k(e){s?R.value=e:R.textContent=e}function E(){return R.value.trim().toLowerCase()}function $(){var e=f.querySelectorAll("li"),t=E().toLowerCase();(t?y:w)();let a=T(t),n=0;Array.from(e).forEach(e=>{a.includes(e)?(e.style.display="",e.classList.add(B),n++):(e.style.display="none",e.classList.remove(B))}),n}function T(t){var e=f.querySelectorAll("li");return Array.from(e).filter(e=>0<=e.textContent.toLowerCase().indexOf(t))}function q(e){return"none"!==e.style.display&&!te(e)&&!Me(e)}}}},Rt="context-menu",Pt="context-menu--open",Dt=0,Mt={createMenu:(e,t,a="",n="",i=()=>{})=>{var r=Rt+"-"+Dt++,o=r+"-menuList";let l=ye("div",{class:Rt+" "+a},[],[{name:"click",callback:e=>{e.stopPropagation()}}]),s=ye("button",{class:"menu-trigger "+n,id:r,"aria-label":t,"aria-haspopup":"true","aria-expanded":"false","aria-controls":o}),c=ye("ul",{id:o,role:"menu",tabindex:"-1","aria-labelledby":r});e.forEach(n=>{var e=ne(n.label),t=ye("li",{role:"presentation",class:"menu-item"+(n.disabled?" menu-item--disabled":"")});let i=e=>{"menuitemcheckbox"!==n.role&&l.close(),n.callback(e)};e=ye("button",{id:n.id||"",role:n.role||"menuitem",tabindex:"-1",class:n.class},e,{name:"click",callback:i});"menuitemcheckbox"===n.role&&e.setAttribute("aria-checked",!!n.checked),n.disabled&&e.setAttribute("disabled","disabled"),e.addEventListener("keydown",e=>{var t=e.key,a=e.target;switch(t){case"Enter":e.preventDefault(),i(e),"menuitemcheckbox"!==n.role&&l.close();break;case" ":e.preventDefault(),i(e);break;case"ArrowDown":e.preventDefault(),d(c,a).focus();break;case"ArrowUp":e.preventDefault(),!function t(a,e){let n=e?.parentNode.previousSibling;{if(n){let e=n.querySelector("button");return u(e)?e:t(a,e)}{let e=a.querySelectorAll("button:not([disabled])");return e[e.length-1]}}}(c,a).focus();break;case"Escape":e.preventDefault(),l.close();break;case"Tab":l.close()}}),t.appendChild(e),c.appendChild(t)});a=ye("div",{class:"arrow"});return l.appendChild(s),l.appendChild(c),l.appendChild(a),s.onclick=e=>{var t;l.isOpen?l.close():(i(s),e.stopPropagation(),l.isOpen?(c.classList.remove(N),s.setAttribute("aria-expanded","false"),l.classList.remove(Pt),l.isOpen=!1):(t=(e=s.closest(W).getBoundingClientRect()).left,e=e.width,c.style.right="-10px",c.style.maxWidth=e-30+"px",c.classList.add(N),s.setAttribute("aria-expanded","true"),c.firstChild.focus(),(e=c.getBoundingClientRect().left)<t&&(c.style.right=e-t-20+"px"),l.classList.add(Pt),l.isOpen=!0,d(c).focus()))},l.close=()=>{l.isOpen&&(c.classList.remove(N),s.setAttribute("aria-expanded","false"),s.focus(),l.isOpen=!1,l.classList.remove(Pt))},l.isOpen=!1,l;function d(e,t){var t=t?.parentNode.nextSibling;return t?u(t=t.querySelector("button"))?t:d(e,t):e.querySelector("button:not([disabled])")}function u(e){return!e?.getAttribute("disabled")}}},Ht="collapser",Nt="collapse-trigger",Vt="collapse-trigger--collapsed",jt="expanded",Ft="collapsed",Kt="tree-results",r="data-level",Wt=10,_t={},i=null,Ut=null,j,zt=wt.setAriaLiveMessage,Xt=St().tooltipDataSetPrefix;function Jt(){var{collapseLabel:e,collapserDescription:t}=ue;(i=ye("div",{class:Ht,role:"group","aria-roledescription":t},[])).shortcuts=[{binding:["shift","h"],command:(e,t)=>{Ut?.focus()},description:ue.focussHeadingsTree,preventDefault:!0,id:"focus-in-tree",customizable:!0}];for(let n=1;n<=Wt;n++){var a=ye("button",{class:Nt,style:"display: none","aria-label":e+" level "+n},n,[{name:"click",callback:e=>{oa(n),Gt(n)}},{name:"keydown",callback:e=>{var t=e.key.toLowerCase(),a=e.target;switch(t){case"arrowright":var n=a.nextSibling;n&&"disabled"!==n.getAttribute("disabled")&&n.focus(),e.stopPropagation();break;case"arrowleft":n=a.previousSibling;n&&n.focus(),e.stopPropagation();break;default:return}}}]);i.appendChild(a),i.shortcuts.push({binding:["h",""+n],command:(e,t)=>{var a;a=n,i.querySelectorAll("button")[a-1]?.getAttribute("disabled")||oa(a)},fixedKey:""+n,fixedKeyAlias:ue.number,description:ue.toggleTreeNodesByLevel,preventDefault:!0,id:"toogle-level-"+n,group:"collapser"})}return i.update=function(){let a=(()=>{let t=[];return Array.from(j.querySelectorAll("a[aria-owns]")).map(e=>e.parentElement).forEach(e=>t.push(e.getAttribute(r))),[...new Set(t)]})(),e=i.querySelectorAll("button");e.forEach((e,t)=>{e.style.display=-1<a.indexOf(""+(t+1))?"":"none"})},i}function Gt(e){if(null!=e){var t=e-1,{expandLabel:a,collapseLabel:n}=ue,t=i.querySelectorAll("button")[t];if(t){da(e)?(t.classList.add(Vt),t.setAttribute("aria-label",a+" level "+e)):(t.classList.remove(Vt),t.setAttribute("aria-label",n+" level "+e));{let a=!1,e=i.querySelectorAll("button");e.forEach((e,t)=>{(a=da(t)?!0:a)?e.setAttribute("disabled","disabled"):e.removeAttribute("disabled")})}}}}function Qt(e,a,t){_t=a,j=e;{let t=(a=e).querySelector("h2");t.onclick=e=>{me({action:"scrollFrameDocumentToTop",params:{frameId:parseInt(t.getAttribute(Z)||0)}})}}e=t,(a=j.querySelector(".results "+ee))&&(a.setAttribute("role","tree"),a.setAttribute("tabindex","-1"),a.addEventListener("keydown",e=>{switch(e.key.toLowerCase()){case"arrowdown":e.preventDefault(),e.stopPropagation(),na();break;case"arrowup":e.preventDefault(),e.stopPropagation(),ia();break;default:return}}),j.querySelectorAll(`.results ${ee} `+ee).forEach(e=>{e.setAttribute("role","group")}),j.querySelectorAll(".results "+ce).forEach(e=>{e.setAttribute("role","none")}),j.querySelectorAll(".results a").forEach((e,t)=>{e.setAttribute("role","treeitem"),e.setAttribute("tabindex",t?"-1":"0")}),j.querySelectorAll(`.results ${ee} `+ee).forEach((e,t)=>{var a=e.previousSibling;e.id="nested-list-"+t,a.setAttribute("aria-owns",e.id),a.setAttribute("aria-expanded","true"),e.classList.add(jt),e.classList.remove(Ft),a.querySelector("."+Nt)||((t=ye("span",{class:Nt})).onclick=Yt,a.insertBefore(t,a.firstChild))}),ra(fe),la(e),i.update())}function Yt(e){var e=e.target.parentNode,t=((c(t=e)?Zt:ea)(t),e.closest(ce).getAttribute(r));(da(t)?sa:ca)(t),Gt(t)}function Zt(e){var t,a;s(e)&&(t=e.querySelector("."+Nt),a=e.getAttribute("aria-owns"),(a=e.parentElement.querySelector(ee+`[id=${a}]`)).style.display="none",a.classList.remove(jt),a.classList.add(Ft),t.classList.add(Vt),e.setAttribute("aria-expanded","false"),i.update(),Gt(e.closest(ce).getAttribute(r)))}function ea(e){var t,a;s(e)&&(t=e.querySelector("."+Nt),a=e.getAttribute("aria-owns"),(a=e.parentElement.querySelector(ee+`[id=${a}]`)).style.display="block",a.classList.add(jt),a.classList.remove(Ft),t.classList.remove(Vt),e.setAttribute("aria-expanded","true"),i.update(),Gt(e.closest(ce).getAttribute(r)))}function ta(e,r=["arrowdown","arrowup","arrowleft","arrowright","home","end","enter","escape","*"]){let o=e.onEnter,l=e.onEscape;return e=>{var t=e.key.toLowerCase();if(-1!==r.indexOf(t)){e.preventDefault(),e.stopPropagation();var a=e.target,n=s(a);switch(t){case"home":na();break;case"end":ia();break;case"arrowdown":aa(a);break;case"arrowup":var i=a;(i=function e(t){let n=t.previousSibling;let a;for(;n&&s(n.querySelector("a"))&&c(n.querySelector("a"));)if(s((n=n.querySelector(ee).lastChild).querySelector("a"))&&(a=c(n.querySelector(ee).querySelector("a")))){let a=n.querySelector(`${ee}.${jt}:last-child`);if(a){let e=a.lastChild,t=e.length;n=t?e[t-1]:n}}n=n||t.closest(ee).closest(ce);if(n)return"none"!==n.querySelector("a").style.display?n:e(n);return!1}(i.parentNode))&&i.querySelector("a").focus();break;case"arrowright":n&&(c(a)?aa:ea)(a);break;case"arrowleft":n&&c(a)?Zt(a):(i=(i=a).closest(ee).closest(ce))&&i.querySelector("a").focus();break;case"*":a.closest(ee).childNodes.forEach(e=>{e=e.querySelector("a");s(e)&&ea(e)});break;case"enter":o&&o(e);break;case"escape":l();break;default:return}}}}function aa(e){e=(t=>{let e=s(t.querySelector("a")),a=t.nextSibling;var n;if(e&&(n=t.querySelector(ee),a=c(t.querySelector("a"))?n.firstChild:t.nextSibling),!a){let e=t.closest(ce);for(;e&&e.closest(ce)&&!a;)(a=e.closest(ce).nextSibling)||(e=e.parentNode.closest(ce))}return a})(e.parentNode);e&&e?.querySelector("a").focus()}function na(){j.querySelector("a")?.focus()}function ia(e=j){var e=e.querySelector(""+ee).lastChild,t=e.querySelector("a");c(t)?ia(e):t.focus()}function s(e){return!!e.getAttribute("aria-owns")}function c(e){return"true"===e.getAttribute("aria-expanded")}function ra(e){var{onclick:n,onfocus:i,onblur:r,onkeydown:o,onmouseover:l,onmousemove:s,onmouseout:c}=_t,d=j.querySelectorAll(`.panel-results ${ce} a`),u=e.showTooltip,t=d.length;let p=d[0];Ut=p;for(let a=0;a<t;a++){let t=d[a];t.onclick||(t.onclick=n),t.onfocus||(t.onfocus=i),t.addEventListener("focus",e=>{t.classList.add(J),(Ut=t).setAttribute("tabindex","0"),0<a&&p.setAttribute("tabindex","-1")}),t.onblur||(t.onblur=r),t.addEventListener("blur",e=>{t.classList.remove(J),0<a&&t.setAttribute("tabindex","-1"),p.setAttribute("tabindex","0")}),t.onkeydown=o,u?(t.onmouseover=l,t.onmousemove=s,t.onmouseout=c,[...t.querySelectorAll("*[title]"),t].forEach(e=>{e.getAttribute("title")&&(e.setAttribute("data-"+Xt,e.getAttribute("title")),e.removeAttribute("title"))})):(t.onmouseover=()=>{},t.onmousemove=()=>{},t.onmouseout=()=>{},[...t.querySelectorAll(`*[data-${Xt}]`),t].forEach(e=>{e.getAttribute("data-"+Xt)&&(e.setAttribute("title",e.getAttribute("data-"+Xt)),e.removeAttribute("data-"+Xt))}),t.removeAttribute("aria-labelledby"))}}function oa(e,t=!1){if(Number.isInteger(parseInt(e))){if(da(e)){var[n,i=!1]=[e,t];if(!Array.isArray(n)||n.length){let t=i?"":">",a=[];i=Array.isArray(n)?n:[n];i.forEach(e=>{a.push(`${ce}[${r}="${e}"] ${t} a[aria-owns]`)}),j.querySelectorAll(a.join(", ")).forEach(e=>{ea(e)}),i.forEach(e=>{ca(e)}),zt(ue.ariaLiveExpandedLevel.replace("{level}",i.join(", ")))}}else la(e,t);Gt(e)}}function la(e,n=!1){if(!Array.isArray(e)||e.length){let t=n?"":">",a=[];n=Array.isArray(e)?e:[e];n.forEach(e=>{a.push(`${ce}[${r}="${e}"] ${t} a[aria-owns]`)}),j.querySelectorAll(a.join(", ")).forEach(e=>{Zt(e)}),n.forEach(e=>{sa(e)}),zt(ue.ariaLiveCollapsedLevel.replace("{level}",n.join(", ")))}}function sa(e){var t=j.getAttribute("data-collapsed-levels")?.split(" ")||[];-1===t.indexOf(e)&&t.push(e),j.setAttribute("data-collapsed-levels",t.join(" ").trim())}function ca(e){var t=j.getAttribute("data-collapsed-levels")?.split(" ")||[];t.splice(t.indexOf(e),1),j.setAttribute("data-collapsed-levels",t.join(" "))}function da(e){e=j.querySelectorAll(`${ce}[${r}="${e}"] > a[aria-owns]`);return e.length&&Array.from(e).every(e=>"false"==e.getAttribute("aria-expanded"))}function ua(){let r=200,i=350,o=10,a="position-",t,l,s,n,c,d,u,p,h,f,b,g,m,v,y=document.body,e=y.style.marginLeft,w,A,L,C=[],x=wt.setAriaLiveMessage;return{createResizer:function(e,t=()=>{}){var{resizingPanel:a,isLeftPosition:n}=e;return l=ye("div",{class:"extension-panel-resizer",tabindex:"0","aria-label":ue.resizePanelAriaLabel},[],[{name:"keydown",callback:S}]),s=l.style,g=a,h=e.pageBody,m=h.getAttribute("style"),c=window.getComputedStyle(h,null).getPropertyValue("margin-left"),d=window.getComputedStyle(h,null).getPropertyValue("margin-right"),u=window.getComputedStyle(h,null).getPropertyValue("position"),f=n?"left":"right",v=t,l.addEventListener("mousedown",$),l.addEventListener("mouseup",T),(e=>{L=e,m=y.getAttribute("style"),u=window.getComputedStyle(y,null).getPropertyValue("position"),A=window.getComputedStyle(y,null).getPropertyValue("width"),c=window.getComputedStyle(y,null).getPropertyValue("margin-left"),d=window.getComputedStyle(y,null).getPropertyValue("margin-right"),w=window.getComputedStyle(y,null).getPropertyValue("overflow"),Ye("*",document.body).forEach(({element:e})=>{"fixed"===window.getComputedStyle(e,null).getPropertyValue("position")&&C.push({element:e,left:parseInt(window.getComputedStyle(e,null).getPropertyValue("left")),right:parseInt(window.getComputedStyle(e,null).getPropertyValue("right")),styleLeft:e.style.left,styleRight:e.style.right})});var e="left"===fe.position,t=fe.savePanelWidthOnResize&&fe.initialPanelWidth||i;g.style.width=t+"px",e?g.style.left="0":g.style.right="0"})(g),g.appendChild(l),l},removeResizer:function(){y.style.marginLeft=e,l.removeEventListener("mousedown",$),l.removeEventListener("mouseup",T),T(),E(),C.length=0,C=[],l=null},updatePanelPosition:function(t){k(),t!==f&&C.forEach(e=>{var{element:e,styleLeft:t,styleRight:a}=e;e.style.left=t,e.style.right=a});var e="left"===(f=t);n=O(),p=o,"static"===u&&(h.style.position="relative");if(e){let e=n+o;n+o<=parseInt(c)&&(e=parseInt(c),p=parseInt(c)-(n+o)),h.style.setProperty("margin-left",e+"px","important"),l.style.left=n-o+"px",l.style.right="initial",g.style.paddingLeft="0",g.style.paddingRight=o+"px",g.style.left="0",g.style.right="auto",g.classList.add(a+t),g.classList.remove(a+"right")}else{let e=n+o;n+o<=parseInt(d)&&(e=parseInt(d)+"px",p=parseInt(d)-(n+o)),h.style.setProperty("margin-right",e+"px","important"),l.style.left="initial",l.style.right=n-o+"px",g.style.paddingLeft=o+"px",g.style.paddingRight="0",g.style.right="0",g.style.left="auto",g.classList.add(a+t),g.classList.remove(a+"left")}B()},getCurrentWidth:O,recoverBodyStyles:k};function S(e){var t=e.key,a=e.ctrlKey;let n=0;switch(t){case"ArrowDown":case"ArrowRight":e.preventDefault(),n=10;break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),n=-10}0!==n&&(a&&(n*=5),"right"===f&&(n*=-1),I(O()+n,!0))}function k(){y.style.position=u,y.style.marginLeft=c,y.style.marginRight=d,m?y.setAttribute("style",m):y.removeAttribute("style")}function E(){C.forEach(e=>{var{element:e,styleLeft:t,styleRight:a}=e;e.style.left=t,e.style.right=a})}function $(e){b=window.innerWidth,t="left"===f?e.pageX-n:e.pageX,document.addEventListener("mousemove",q),document.addEventListener("mouseup",T),g.addEventListener("mousemove",q),g.addEventListener("mouseup",T)}function T(){document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",T),g.removeEventListener("mousemove",q),g.removeEventListener("mouseup",T),n=R(g.style.width)}function q(e){e.preventDefault(),I("left"===f?e.pageX-t:n-e.pageX+t)}function I(e,t=!1){var a,n,i;b-e<=r||e<=r||(g.style.width=e+"px",s[f]=e-o+"px",s["left"===f?"right":"left"]="auto",i=e+o,n=(a="left"===f)?c:d,i=i>parseInt(n)?i:parseInt(n),a?h.style.setProperty("margin-left",i+"px","important"):h.style.setProperty("margin-right",i+"px","important"),B(),t&&x(`panel width updated to ${e} pixels`),v&&v(e))}function B(){var e="left"===f?"margin-left":"margin-right";let a=parseInt(h.style[e]);C.forEach(e=>{var t=e.element;t.style.setProperty(f,a+e[f]+"px","important")})}function O(){return R(g.style.width)}function R(e){return parseInt(e.replace(/\D/g,""))}}let pa="pin-button",ha="pin-by-domain-button",fa="pin-by-URL-button",ba="pin-button",ga="pinned--on",ma="pinned--off",va="pinned-by-domain--on",ya="pinned-by-domain--off",wa="pinned-by-URL--on",Aa="pinned-by-URL--off",La="menu-trigger-pin",Ca="pinned-indicator",Ae=null,xa=null,Sa=null,ka=Mt.createMenu;function Ea(e,t,a,n){Sa=n,Ae=""+e.tabId;let i=ot(),r=o();return[{role:"menuitemcheckbox",id:ha,label:""+t.pinPanelByDomainLabel,class:pa+" "+ha,callback:e=>{var t;a(),e.stopPropagation(),i.trim().length&&(e=ot()).trim().length&&(-1<(t=fe.pinnedByDomain?.split(",")||[]).indexOf(e)?t.splice(t.indexOf(e),1):t.push(e),ve("pinnedByDomain",t.join(",")),Le())},disabled:!i.trim().length,checked:!!i.trim().length&&-1<e.settings.pinnedByDomain?.split(",").indexOf(i)},{role:"menuitemcheckbox",id:fa,label:""+t.pinPanelByURLLabel,class:pa+" "+fa,callback:e=>{var t;a(),e.stopPropagation(),r.trim().length&&(e=o()).trim().length&&(-1<(t=fe.pinnedByURL?.split(",")||[]).indexOf(e)?t.splice(t.indexOf(e),1):t.push(e),ve("pinnedByURL",t.join(",")),Le())},disabled:!r.trim().length,checked:!!r.trim().length&&-1<e.settings.pinnedByURL?.split(",").indexOf(r)}]}function Le(){[Sa,xa].forEach(e=>{if(e){e.classList.remove(ga),e.classList.remove(ma),e.classList.add(fe.pinned?ga:ma),e.querySelectorAll("."+ba).forEach(e=>e.setAttribute("aria-checked",fe.pinned));var n=ot();let t=!!n.trim().length&&-1<fe.pinnedByDomain?.split(",").indexOf(n);e.classList.remove(va),e.classList.remove(ya),e.classList.add(t?va:ya),e.querySelectorAll("."+ha).forEach(e=>e.setAttribute("aria-checked",t));n=o();let a=!!n.trim().length&&-1<fe.pinnedByURL?.split(",").indexOf(n);e.classList.remove(wa),e.classList.remove(Aa),e.classList.add(a?wa:Aa),e.querySelectorAll("."+fa).forEach(e=>e.setAttribute("aria-checked",a))}})}function $a(){let o="",l=wt.setAriaLiveMessage;return{createCopyButton:function(e,t,a,n,i=void 0){var r=e.copyButtonLabel,e=(o=e.ariaLiveHeadingsCopied,ye("button",{class:t+" copy-button","aria-label":r,title:r}));return e.onclick=((a,n,i=void 0)=>()=>{var e=document.createRange(),t=a.querySelector(n),t=i?t.querySelector("."+i):t;t.querySelectorAll(ee+".collapsed").forEach(e=>{e.setAttribute("data-style",e.getAttribute("style")),e.setAttribute("style","display: block; position: absolute; top: -20000px; left: -20000px;")}),e.selectNode(t),window.getSelection().removeAllRanges(),window.getSelection().addRange(e),window.getSelection&&(e=window.getSelection().toString().replace(/ /g," ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]1 [\r\n\x0B\x0C\u0085\u2028\u2029]+/g,"1 ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]2 [\r\n\x0B\x0C\u0085\u2028\u2029]+/g,"2 ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]3 [\r\n\x0B\x0C\u0085\u2028\u2029]+/g,"3 ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]4 [\r\n\x0B\x0C\u0085\u2028\u2029]+/g,"4 ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]5 [\r\n\x0B\x0C\u0085\u2028\u2029]+/g,"5 ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029]6 [\r\n\x0B\x0C\u0085\u2028\u2029]+/g,"6 ").replace(/[\r\n\x0B\x0C\u0085\u2028\u2029](?=[\r\n\x0B\x0C\u0085\u2028\u2029])/g,"").replace(/]+[\r\n\x0B\x0C\u0085\u2028\u2029]/g,"] "),navigator.clipboard.writeText(e).then(()=>{},()=>{}),window.getSelection()?.removeAllRanges()),t.querySelectorAll(ee+".collapsed").forEach(e=>{e.setAttribute("style",e.getAttribute("data-style")),e.removeAttribute("data-style")}),l(o)})(a,n,i),e}}}function Ta(){let h=null,f=null,b=null,g=null,m=null,v=null,y=[],w=!1,A=Ot().createCombobox;return{createSearchComponent:function(e,t,a,n,i,r,o){let{searchLabel:l,searchButtonLabel:s,closeSearchButtonLabel:c,resultsListLabel:d,searchInHeadingsTree:u}=e,p=(b=a,g=t,(h=ye("div",{class:"headingsmap-search"})).close=()=>{C(o)},h.onmouseenter=()=>{w=!0},h.onmouseleave=()=>{w=!1},x(f=A([],{ariaLabel:l,optionsAriaLabel:d,editable:!0},{onSelect:e=>{let t=e.getAttribute(se),a=e.getAttribute(Z);e=y.find(e=>e.getAttribute(se)===t&&e.getAttribute(Z)===a);e&&(e.click(),ct(t)),f.close()},openCallback:()=>{f.updateOptions((n=>{let e=b.querySelector(g),i=(y.length=0,y=Array.from(e.querySelectorAll(`a[${se}]`)),[]);return y.forEach(e=>{var t=n(e),a=e.getAttribute(se),e=e.getAttribute(Z);i.push({text:t,attributes:{[se]:a,[Z]:e}})}),i})(n))}})),f.control.onkeydown);return f.control.onkeydown=e=>{"escape"!==e.key.toLowerCase()||""!==f.control.value.trim()||f.isOpen()||C(o),p(e)},(m=ye("button",{class:"search-button","aria-label":s,title:s})).onclick=()=>{L(r)},(v=ye("button",{class:"search-button-close","aria-label":c,title:c})).onclick=()=>{C(o)},x(v),h.appendChild(f),h.appendChild(m),h.appendChild(v),h.shortcuts=[{binding:["shift","s"],command:(e,t)=>{L(r),f.control.focus()},description:u,preventDefault:!0,id:"open-search",customizable:!0}],h},searchModeActiveClass:"search-mode-active"};function L(e){e(),f.clearSelection(),x(m),t(v),t(f),f.focus()}function C(e){e(),f.clearSelection(),f.close(),t(m),x(v),x(f),m.focus()}function x(e){e.style.display="none"}function t(e){e.style.display=""}}function qa(){let l="dialog-panel",s="dialog-backdrop",c="dialog-wrapper headingsmap-exclude",d="dialog-content-wrapper",u="dialog-title headingsmap-exclude",p="dialog-content custom-scrollbar",h="dialog-actions",f="dialog-action",b="dialog-closer",g="dialog-action-close",m="active",v="",y=null,w=null,A=null,L=null,C=null;return{openDialog:function(e,t,a,n={}){var i,r,o;x()||({openCallback:n,closeCallback:i}=n,y||(y=(()=>{let e=ue.closeButton,t=ye("div",{id:l,class:c,role:"dialog"}),a=ye("div",{class:s}),n=(a.onclick=k,t.appendChild(a),ye("div",{class:d})),i=(t.appendChild(n),L=ye("h1",{class:u,tabindex:"-1"},void 0,[{name:"keydown",callback:e=>{"tab"===e.key.toLowerCase()&&e.shiftKey&&(e.preventDefault(),t.querySelector(`.${f}:last-child`).focus())}}]),n.appendChild(L),ye("button",{class:b,"aria-label":e,title:e},[],[{name:"click",callback:k},{name:"keydown",callback:e=>{"tab"===e.key.toLowerCase()&&e.shiftKey&&(e.preventDefault(),r.focus())}}])),r=(n.appendChild(i),w=ye("div",{class:p}),n.appendChild(w),A=ye("div",{class:h}),ye("button",{button:"button",class:f+" "+g},e,[{name:"click",callback:k},{name:"keydown",callback:e=>{"tab"!==e.key.toLowerCase()||e.shiftKey||(e.preventDefault(),i.focus())}}]));return A.appendChild(r),n.appendChild(A),t.addEventListener("keydown",e=>{var t=e.key;e.stopPropagation(),"escape"===t.toLowerCase()&&S()}),t.closeCallback=()=>{},t.close=S,t})(),a.appendChild(y)),L.replaceChildren(),r=t.querySelector("h1"),e=ne(r?r.textContent:e),r?.parentNode.removeChild(r),L.appendChild(e),t&&w.appendChild(t),r=t.getBoundingClientRect().height,e=w.getBoundingClientRect().height,t=y.getBoundingClientRect().height,r<e&&(e=L.getBoundingClientRect().height,o=A.getBoundingClientRect().height,e=30+e+r+o,y.style.height=e+"px",e<t)&&(y.style.top=(t-e)/2+"px"),y.classList.add(m),(C=document.activeElement).tagName.toLowerCase()===W&&(C=a?.parentNode?.activeElement),L.focus(),n&&n(y),y.closeCallback=i,v=document.body.style.overflow,document.body.style.overflow="hidden",document.removeEventListener("keydown",E),document.addEventListener("keydown",E))}};function x(){return y&&y.classList.contains(m)}function S(){y&&x()&&(y.classList.remove(m),y.closeCallback&&y.closeCallback(),w.replaceChildren(),C?.focus(),C=null,y.parentNode.removeChild(y),y=null,document.removeEventListener("keydown",E),document.body.style.overflow=v)}function k(){S()}function E(e){"escape"===e.key.toLowerCase()&&(e.stopPropagation(),S())}}gt(()=>Fe(()=>{me({action:"update",params:{domain:ot(),URL:o()}})})),Fe(()=>{let i=window.document.body,a,d;try{var e={getDocumentStructure:t,highlightElementInFrame:_e,focusElementInFrame:ze,scrollFrameDocumentToTop:Xe,connectMutationObserverInDocument:v,disconnectMutationObserverInDocument:y,getDocumentTitle:function(e){var t=Qe(e.withHref);a=e.frameId,me({action:"setDocumentList",params:Object.assign({},e,{documentTitle:t})})},closeWidget:function(){y(),Ge(),document.querySelectorAll(`*[${w}]`).forEach(t=>{t.shadowRoot.querySelectorAll(`style[${P}]`).forEach(e=>{t.shadowRoot.removeChild(e)}),t.removeAttribute(w)}),Ue()},toggleRevealHeadings:function(e){y(),(i.getAttribute(R)?o:n)();A?.settings&&v(A)},removeHeadingsViewer:o,removeIntersectionObservers:p};let s=Object.assign(Et(),kt()),c={};function t(t,a=!1){Ge(),Ue();var n=t.frameId,i=t.analysis;if(s[i]){var{results:r,elements:o}=s[i](fe,ue,n)();let e;e="HTML5Outline"!==i?V(r):(r=r,(l=ye("div")).insertAdjacentHTML("beforeend",r),V(l.firstChild)),c=e;var r=o.map(e=>{var t=e.header;return t&&(e.header=V(t)),e}),l={structure:e,elements:r},o=!!t.mutationChange;me({action:"showResultsFromFrame",params:{frameId:n,analysis:i,data:l,settings:fe,mutationChange:o,forceRefresh:"boolean"==typeof a&&a}}),r=fe.viewportIndicator,p(),r&&(r=Ye(`*[${se}]`).map(({element:e})=>e),d=((e,i)=>{let t=new IntersectionObserver((e,n)=>{e.forEach(e=>{var t,a=e.target.getAttribute(se);a?(t=0<e.intersectionRatio,i({elementId:a,isInViewport:t,intersectionRatio:e.intersectionRatio})):n.unobserve(e.target)},{threshold:1})});return e.forEach(e=>{t.observe(e)}),t})(r,u))}}function u(e){me({action:"viewportIndicator",params:{intersectionData:e}})}function p(){var e;(e=d)&&e.disconnect()}function h(e){me({action:"highlightElementInTree",params:{dataElementId:e.getAttribute(se)}})}function f(){me({action:"clearHighlightedElementsInTree",params:{}})}function n(){i.setAttribute(R,"true"),me({action:"addClassToPanel",params:{panelClass:O}});let o={showEmptyHeadings:!0,showHiddenHeaders:!0},s=C(i,o);{var[e=[]]=[s.map(({header:t,shadowRoot:e,headingInfo:a},n)=>{var i=x(t,o).level,r=0===a.headerText.trim().length,n=a.level>s[n-1]?.headingInfo.level+1;return{element:t,label:"h"+i,shadowRoot:e,events:[{name:"mouseenter",callback:e=>h(t)},{name:"mouseleave",callback:e=>f()}],data:Object.assign({emptyHeader:r,incorrectLevel:n},a)}})];let l;!e[0]||(t=(e[0].shadowRootId?window.document.querySelector(`*[${w}=${e[0].shadowRootId}]`):e[0].element).closest("body"),l=t.querySelector("."+T))||(l=ye("div",{class:T}),t.appendChild(l),l.style.height=t.scrollHeight+"px",l.style.width=t.scrollWidth+"px"),e.forEach(({element:e,label:t,events:a})=>{let n=e.getAttribute(se);var i,r,o;n&&({width:i,height:r}=e.getBoundingClientRect(),(o=ye("span",{"aria-hidden":"true",class:I},t)).addEventListener("click",()=>{ct(n)}),e=ye("div",{[se+"-overlay"]:n,"aria-hidden":"true",style:`left: ${Ze(e)}px; top: ${et(e)}px; width: ${i}px; height: ${r}px`,class:q},t&&o,a),l.appendChild(e))})}var t;pt(t=r),document.addEventListener("scrollend",t,!0)}function r(e){var t=C(i,{showEmptyHeadings:!0,showHiddenHeaders:!1});{var[t=[]]=[t.map(({header:e})=>e)];let i;t.forEach(e=>{var{width:t,height:a}=e.getBoundingClientRect(),n=(i=e.closest("body"))?.querySelector(`[${se}-overlay=${e.getAttribute(se)}]`);n&&(n.style.left=Ze(e)+"px",n.style.top=et(e)+"px",n.style.width=t+"px",n.style.height=a+"px")}),(t=i.querySelector("."+T)).style.height=i.scrollHeight+"px",t.style.width=i.scrollWidth+"px"}}function o(){var e;i.removeAttribute(R),me({action:"removeClassFromPanel",params:{panelClass:O}}),(e=(e=i).querySelector("."+T))&&e.parentElement.removeChild(e),pt(r)}function l(){var t=C(i,{showEmptyHeadings:!0,showHiddenHeaders:!1});for(let e=t.length-1;0<=e;e--){var a=t[e].header;a.addEventListener("mouseenter",g),a.addEventListener("mouseleave",m)}}function b(){var t=C(i,{showEmptyHeadings:!0,showHiddenHeaders:!1}),a=t.length;for(let e=0;e<a;e++){var n=t[e].header;n.removeEventListener("mouseenter",g),n.removeEventListener("mouseleave",m)}}function g(e){ut(i)&&h(e.target)}function m(e){ut(i)&&f(e.target)}function v(e){ht(e)}function y(){ft()}Object.assign(Te,e),L=()=>e=>{D&&(b(),t(Object.assign({mutationChange:!0},A),e),l(),ut(i))&&(y(),o(),n(),A?.settings)&&v(A)},M=()=>{b(),l()},G=b}catch(e){}});function Ia(){let g="utilsBar-button";var e="custom-scrollbar";let m="counter",v="visibleElementsCounter",y="hiddenElementsCounter";var t="results";let n="active-element",w={close:()=>{}},A,b={},L={},C=void 0,a=!0,i=!0,x=[{tabId:"headingsTab",tabClass:ke,tabTex:"headersTab",style:"width: 50%",metadata:[{key:"tab-id",value:"headingsTab"},{key:"analysis",value:"headingsMap"}],panelClass:t+" "+e,onclick:()=>{i=!0,b={},ge="headingsMap",D("headingsTab")}},{tabId:"outlineTab",tabClass:ke,tabTex:"outlineTab",style:"width: 50%",metadata:[{key:"tab-id",value:"outlineTab"},{key:"analysis",value:"HTML5Outline"}],panelClass:t+" "+e,onclick:()=>{i=!0,ge="outlineTab",me({action:"hideRevealedHeadings",params:{}}),D("outlineTab")}}],S=$t().createDocumentSelector,k=Mt.createMenu,E=kt().generateTreeList,{createSearchComponent:$,searchModeActiveClass:T}=Ta(),q=St().TreeTooltip,I=$a().createCopyButton;return{createWidgetPanel:function(o,l,a,e,s,c,d){C=ye(W,{id:he,dir:"rtl"});let u=ye(W,{class:"headingsMap-body"}),t=C.attachShadow({mode:"closed"}),n=(t.appendChild(u),ye("div",{id:"headingsMapWrapper"})),{header:i,tabPanels:r,documentsSelectorCombo:p,collapser:h,headingsRevealButton:f,searchComponent:b}=(u.appendChild(n),(()=>{var{extensionName:e,maniMenuLabel:t,closeButtonAriaLabel:a,revealHeadingsButtonAriaLabel:n}=ue,e=ye("h1",{id:"extension_title"},[e]),i=ye("div",{id:"headingsMapHeader"}),r=ye("div",{id:"utilsBar"}),e=(i.appendChild(e),i.appendChild(r),(e=>(e=lt(u,x,"custom-scrollbar panel-results",e),C.counterLegend=(()=>{var e=ye("span",{class:m}),e=ye("span",{class:v},[e,ue.visible]),t=ye("span",{class:m}),t=ye("span",{class:y},[t,ue.potentiallyHiddenPlural]);return(e=ye("div",{class:"visibility-legend"},[e,t])).updateCounters=function(e,t){var a=this.querySelector(`.${v} .`+m),a=(a.textContent=e+" ",this.querySelector(`.${y} .`+m));a.textContent=t+" "},e})(),e.appendChild(C.counterLegend),e))("data-container"));C.pinMenu=((e,t,a,n)=>{Ae=""+e.tabId;var i=e.triggerMenuCLass,e=Ea(e,t,n);return xa=ka(e,t.pinMenuLabel,"",`${La} ${Ca} `+i,()=>{Le(),a()}),Le(),xa})({tabId:o,container:i,triggerMenuCLass:g,settings:fe},ue,()=>{w.close(),C.documentsSelector.close(),w=C.pinMenu},()=>{Be()}),r.appendChild(C.pinMenu),C.menu=k(s,t,"","main-menu "+g,e=>{w.close(),C.documentsSelector.close(),w=C.menu,A=e}),r.appendChild(C.menu);(t=ye("button",{class:g+" headingsMap_closer action-button","aria-label":a})).onclick=d,r.appendChild(t),a=S(l,function(){C.menu.close(),C.pinMenu.close()}),r=Jt(),(t=ye("button",{class:"headingsMap-reveal","aria-label":n,title:n})).onclick=()=>{me({action:"toggleRevealHeadings",params:fe})},n=$(ue,"[data-panel-id=headingsTab] ."+Kt,u,function(e){return Array.from(e.childNodes).filter(e=>fe.showHeadLevels?3===e.nodeType||e.className.includes("head-level"):3===e.nodeType).map(e=>3===e.nodeType?e.textContent.trim():"h"+e.textContent.trim()+": ").join(" ").replace(/\n/g," ").trim()},e=>{},()=>{w.close(),u.classList.add(T)},()=>{u.classList.remove(T)});return c(),{header:i,tabPanels:e,documentsSelectorCombo:a,collapser:r,headingsRevealButton:t,searchComponent:n}})());return C.shadowRoot=t,C.headingsMapBody=u,C.searchComponent=b,C.documentsSelector=p,C.updateListOfDocuments=B,C.updateActiveDocument=O,C.collapserComponent=h,C.shortcuts=[...b.shortcuts,...h.shortcuts],C.tabs=x,C.switchTab=D,C.viewportIndicator=M,u.addEventListener("click",()=>{w.close(),C.documentsSelector.close()}),u.addEventListener("keydown",e=>{"Escape"===e.key&&(w.close(),C.documentsSelector.close())}),C.spinner=ye("div",{class:"spinner "+N}),je(["basicStyles","context-menu","themes/bright/theme","themes/dark/theme","scrollBars","tooltip","dialog","shortcuts"],u,function(){n.appendChild(i),n.appendChild(r),u.querySelector("*[data-panel-id=outlineTab] ."+U).appendChild(C.documentsSelector);var e=u.querySelector("*[data-panel-id=headingsTab] ."+U),t=(e.appendChild(C.collapserComponent),ye("span",{class:"fixed-tab-content-start-utils"},[I(ue,"",n,".tree-results"),f,b]));return e.appendChild(t),n.appendChild(C.spinner),a(),C},F),C.treeTooltip=new q(u),C.showResultsFromFrame=R,C}};function B(e,t){e.documents.map(e=>e.frameId);e=e.documents.map(e=>{var t=bt(e.frameId).isVisible;return Object.assign({isVisible:t},e)});C.documentsSelector.updateListOfDocuments(e,t)}function O(){C.documentsSelector.updateActiveDocument()}function R(r,e,o,l,s,c=()=>{}){if(!o||"headingsMap"!==s){let{structure:e,elements:t}=r.data;var o=Ke(e),d=!!r.mutationChange;let a=r.frameId;if("headingsMap"===s){if(!r.forceRefresh&&t.length&&mt(b["frame"+a])===mt(t))return}else{if(d&&r.frameId!==l||JSON.stringify(V(o))===JSON.stringify(L))return;me({action:"getDocumentList",params:fe})}b["frame"+a]=[...t];var u,d=o.querySelector("h2");let{frame:n,isVisible:i}=bt(a);if("headingsMap"===s){let e=(u=b).frame0?[...u.frame0].map(e=>"iframe"!==e.tagName?e:u["frame"+e.frameId]||[]).flat():[];i||e.forEach(e=>{e.frameId===a&&(e.isVisible=i)});var p=E(e.filter(e=>"iframe"!==e.tagName),fe,ue);o.appendChild(p),d.textContent=Qe(),d.setAttribute([Z],"0")}else{if(!i){let e=o.querySelectorAll(`a[${Z}="${a}"]`);e.forEach(e=>{e.classList.remove(_),e.classList.add(H)})}n&&n.scrollIntoView(),C.documentsSelector.setActiveDocument(a),l=a}p=j?.getAttribute("data-collapsed-levels")?.split(" ")||[],d=(L=r.data.structure,C.tabs.filter(e=>e.metadata.some(e=>"analysis"===e.key&&e.value===s))[0].metadata.filter(e=>"tab-id"===e.key)[0].value),r=be.querySelector("*[data-panel-id="+d+"]"),d=r;if(d){var h=d.querySelector("."+z);let e=h.firstElementChild;for(;e;){var f=e.nextElementSibling;h.removeChild(e),e=f}}d=o.querySelector(""+ee),d=(d?.classList.add(Kt),d?.setAttribute("aria-description","headingsMap"===s?ue.headersTab:ue.outlineTab),r?.querySelector("."+z)?.appendChild(o),o.querySelectorAll("a")),r=_,r=o.querySelectorAll("a."+r).length,d=d.length-r;Qt(o,{onclick:e=>{P(e),e.preventDefault()},onfocus:e=>{e.target.classList.add(J),fe.showTooltip&&C.treeTooltip.show(e.target)(e),fe.highLightElements&&P(e)},onblur:e=>{e.target.classList.remove(J),C.treeTooltip.hide(e.target)()},onkeydown:ta({onEnter:e=>{P(e),focusElementInFrame(e)},onEscape:C.treeTooltip&&C.treeTooltip.hide()}),onmouseover:C.treeTooltip.show(),onmousemove:C.treeTooltip.updatePositionToMouseClientX(),onmouseout:C.treeTooltip.hide()},p),o.querySelectorAll("."+ae).forEach(e=>{let n=e.getAttribute(K);e.addEventListener("click",e=>{var t=n;try{navigator.clipboard.writeText(t)}catch(e){var a=ye("input");a.value=t,document.body.appendChild(a),a.select(),document.execCommand("copy"),a.remove()}e.stopPropagation(),e.preventDefault()},!1)}),C.counterLegend.updateCounters(r,d),c(l)}}function P(e){var t=e.target,a=t.parentNode,n=t.getAttribute(se)||a.getAttribute(se),i=t.getAttribute(X)||a.getAttribute(X),t=Number(t.getAttribute(Z)||a.getAttribute(Z)),a=fe.highLightElements;e.preventDefault(),me({action:"highlightElementInFrame",params:{frameId:t,elementId:n,highLightElement:a,shadowRootId:i}})}function D(e){var t;a&&C.spinner?.classList.add(N),C.headingsMapBody&&((t=C.headingsMapBody.querySelector(`[role=tablist] [role=tab][data-tab-id=${e}]`))?.click(),ge=t?.getAttribute("data-analysis"),C.headingsMapBody.setAttribute("data-active",""+e),qe=e,localStorage.headingsMap_selectedTab=e,setTimeout(function(){me({action:"getFrames",params:fe}),C.spinner.classList.remove(N),a=!0},0))}function M(e){var t,a;fe.viewportIndicator&&({elementId:e,isInViewport:t,intersectionRatio:a}=e.intersectionData,e=be.querySelector(`*[${se}=${e}]`))&&(t?e.classList.add(n):e.classList.remove(n))}}gt(()=>{let i="data-headings-map-active",r="headingsMap_release_notes",o="settings",l="shortcutsId",D="switchPosition",M="help",H="headingsMap_privacy_policy",N="contribute",e="dark-theme",d="action-button",s="news-active",c=document.body,u=c.parentNode,V,t=!0,j,F,p,h,a=0,f,K,b=!1,g={},W,_,m,v,U,n=!1,y={},w={},A={},L={},C={},{createResizer:z,removeResizer:X,updatePanelPosition:x,getCurrentWidth:J,recoverBodyStyles:G}=ua(),{registerShortcuts:Q,getShortcutsPanel:S,keydownWithShortcuts:Y,clearShortcuts:Z}=Tt,{removeAriaLiveElement:ee,createAriaLiveElement:te,setAriaLiveMessage:k}=wt,E=qa().openDialog,ae=Ia().createWidgetPanel;var ne={toggle:function(e){var t=document.getElementById(he);t?T():(h=0,((e={})=>{me({action:"initialize",params:e})})(e))},update:I,updateListOfDocuments:function(e){p.updateListOfDocuments(e,a)},updateActiveDocument:$,showResultsFromFrame:function(e){p.showResultsFromFrame(e,t,n,a,ge,e=>{t=!1,n=!1,a=e})},initializeWidget:function(e={}){v=e.tabId,(e=>{de.language.defaultValue=e})((t=>(t.indexOf("-")&&(t=t.split("-")[0]),Ee.find(e=>e.code===t)?t:de.language.defaultValue))(e.browserLanguage)),((n,e="en")=>{let i=e;Fe(t=>{Ee.find(e=>e.code===t.language)&&(i=t.language),we(Ce(i),e=>{let a={};Object.entries(e).forEach(([e,t])=>{a[e]=t.message}),n(a,i)},"json")})})((e,t)=>{if(ue=e,pe=t,!document.getElementById(he)){p=ae(v,ie,function(){var e="left"===fe.position,e=(z({resizingPanel:be,pageBody:c,isLeftPosition:e},e=>{fe.savePanelWidthOnResize&&ve("initialPanelWidth",e),fe.savePanelWidthOnResize&&ve("initialPanelWidth",e)}),x(fe.position),[{binding:["."],command:(e,t)=>{E(ue.shortcuts,S(),be)},description:ue.openShortcutsDialog,preventDefault:!0,id:"openShortcuts"},{binding:[],command:q,description:ue.openSettingsDialog,preventDefault:!0,id:"openSettings"},{binding:[],command:O,description:ue.updatePanelPosition,preventDefault:!0,id:"updateWidgetPosition"},{binding:["shift","r"],command:(e,t)=>{me({action:"toggleRevealHeadings",params:fe})},description:ue.identifyHeadersInPage,preventDefault:!0,id:"reveal-headers",customizable:!0},...a]);B(),Q(e),I();for(var t in fe)Be(t,fe[t])},I,(()=>{return menuItems=[{id:o,label:ue.settingsLabel,class:d,callback:q},{id:l,label:ue.shortcuts,class:d,callback:()=>{E(ue.shortcuts,S(),be)}},{id:D,label:ue.switchPositionLabel,class:d,role:"menuitemcheckbox",callback:O},{id:M,label:ue.helpLabel,class:d,callback:function(){A[pe]?E("Help",A[pe],be):we(le+`help/${pe}.html`,e=>{A[pe]=e,E("Help",A[pe],be)})}},{id:r,label:ue.releaseNotesMenuLink,class:d,callback:function(){y[pe]?t():we(le+`releaseNotes/${pe}.html`,e=>{y[pe]=e,t()})}},{id:H,label:ue.privacyPolicyMenuLink,class:d,callback:function(){L[pe]?E("Privacy Policy",L[pe],be):we(le+`privacyPolicy/${pe}.html`,e=>{L[pe]=e,E("Privacy Policy",L[pe],be)})}},{id:N,label:ue.contributeMenuLink,class:d,callback:function(){C[pe]?E("Contribute",C[pe],be):we(le+`contribute/${pe}.html`,e=>{C[pe]=e,E("Contribute",C[pe],be)})}}];function t(){E("Release notes",y[pe],be,{closeCallback:()=>{b&&(ve("widgetVersion",f),Oe(s,!1),b=!1)}})}})(),function(){y[pe]?n():we(le+`releaseNotes/${pe}.html`,e=>{y[pe]=e,n()})},T),be=p.headingsMapBody,V=p.shadowRoot,j=p.documentsSelector,_=p.collapserComponent,F=p.spinner,W=p.treeTooltip,K=p.counterLegend;let a=p.shortcuts;function n(){(f=y[pe].querySelector("dt:first-child").getAttribute("data-version"))!==fe.widgetVersion&&(b=!0,Oe(s,!0))}u.insertBefore(p,c),u.setAttribute(i,"true"),me({action:"getDocumentList",params:fe}),g={},m=De(u,{childList:!1,subtree:!1,attributes:!0,attributeFilter:[i]},function(){var e=u.getAttribute(i);"true"!==e&&u.setAttribute(i,"true")}),((e=Ie)=>{var t=fe.pinnedTabs?.split(",")||[];-1<t.indexOf(Ae)||t.push(Ae),ve("pinnedTabs",t.join(",")),Le()})(),c.appendChild(te())}})},updatePinnedStatus:Le,addClassToPanel:function(e){e=e.panelClass;be.classList.add(e)},removeClassFromPanel:function(e){e=e.panelClass;be.classList.remove(e)},highlightTreeNode:function(e){e=e.dataElementId;dt(e,be)},clearHighlightedTreeNodes:function(e){(e=>{(e=e.querySelector("."+Se))&&e.classList.remove(Se)})(be)},setFrameIds:function(e){e=e.frames;U={},n=!1,me({action:"getHeadingsMapFromFrame",params:{frameId:"HTML5Outline"===ge?a:0,settings:fe,analysis:ge}}),"HTML5Outline"!==ge&&e.forEach(({url:e,frameId:t})=>{e=window.document.querySelector('iframe[src="'+e+'"]');e&&(e.setAttribute(xe,t),me({action:"getHeadingsMapFromFrame",params:{frameId:t,settings:fe,analysis:ge}}))})},scrollElementInTree:function(e){var e=e.headerId,t=be.querySelector(`.${Kt} *[${se}=${e}]`);t?.scrollIntoView({behavior:"smooth",block:"center"}),dt(e,be),function e(t){if(!t)return;ea(t);let a=t.closest("ul");let n=a.id;a&&n&&e(a.closest(ce).querySelector(`a[aria-owns="${n}"]`))}(t)},viewportIndicator:function(e){p.viewportIndicator(e)},documentKeydown:function(e){document.getElementById(he)&&Y(e.keysCombination)},documentClick:function(e){document.getElementById(he)}};function $(e){p.updateActiveDocument(e,a)}function ie(e){var t,a,n;h!==e&&(t=e,a=fe,n=qe,me({action:"getHeadingsMapFromFrame",params:{frameId:t,settings:a,analysis:p.tabs.filter(e=>e.tabId===n)[0].metadata.filter(e=>"analysis"===e.key)[0].value}}),h=e)}function T(){Z(),Ie,-1<(e=fe.pinnedTabs?.split(",")||[]).indexOf(Ae)&&e.splice(e.indexOf(Ae),1),ve("pinnedTabs",e.join(",")),Le(),g={},me("closeWidget");var e=document.getElementById(he),t=e.parentNode;t.removeChild(e),t.removeAttribute(i),X(),G(),m&&m.disconnect(),ee()}function q(){w[pe]?E("Configuration",w[pe],be):we(le+`configuration/${pe}.html`,e=>{w[pe]=e,E("Configuration",w[pe],be,{openCallback:re})})}function re(a){var t=a.getElementsByTagName("select"),n=t.length,i=a.getElementsByTagName("input"),r=i.length;{var e=a,o=Ee;let t=e.querySelector("#language");o.forEach(e=>{e=ye("option",{value:e.code,lang:e.code},e.description);t.appendChild(e)})}var l,s=fe;for(l in s){var c=a.querySelector("#"+l);c&&("checkbox"===c.type?c.checked=s[l]:c.value=s[l])}for(let e=0;e<n;e++)t[e].onchange=function(){R(this)};for(let e=0;e<r;e++)i[e].oninput=function(){R(this,("checkbox"===this.type?this.checked:this.value)+"")};a.querySelectorAll("*[callback~=disableFields]").forEach(e=>{P(e)}),a.querySelector(".settings-content").appendChild((()=>{let e=a.querySelectorAll("fieldset"),n=[],i=0,r=fe.settingsActiveTab;return e.forEach((e,t)=>{var a=e.querySelector("legend").textContent,a={tabId:v="settingsTab-"+i++,tabClass:d+" "+ke,tabTex:a,onclick:e=>{ve("settingsActiveTab",e)},content:e,active:r?v===r:0===t};n.push(a)}),lt(be,n)})())}function I(){var e=fe.isOutlineTestActive,e=(t=!0,!e&&"outlineTab"===localStorage.headingsMap_selectedTab||!localStorage.headingsMap_selectedTab?"headingsTab":localStorage.headingsMap_selectedTab);p?.switchTab(e)}function B(){fe.darkTheme?be.classList.add(e):be.classList.remove(e)}function O(){var e="left"===fe.position;e=e?"right":"left",fe.position!==e&&(ve("position",fe.position=e),x(e),"left"===e?k(ue.ariaLiveSwitchedToLeft):k(ue.ariaLiveSwitchedToRight))}function oe(){ve("initialPanelWidth",J())}function R(e,t){var a=e.getAttribute("id"),n=e.getAttribute("data-callback"),t=t||e.children[e.selectedIndex].value,i={setTheme:B,refresh:I,updateActiveDocument:$,updateWidgetPosition:O,disableFields:function(){P(e)},updateInitialPanelWidth:oe,setLinksBehavior:ra},r=(ve(a,!0===t||"true"===t||!1===t||"false"===t?!0===t||"true"===t:t),n&&n.split(" ")),o=r?r.length:0;for(let e=0;e<o;e++)i[r[e]]&&i[r[e]](fe)}function P(e){var t="checkbox"===e.type?e.checked:"true"===e.value,e=e.getAttribute("data-related-fields"),a=e&&e.split(" "),n=a.length;for(let e=0;e<n;e++){var i=be.querySelector(`[name=${a[e]}]`);t?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")}}$e=!0,Object.assign(Te,ne)});