import{a as V}from"./chunk-FVPQGETT.js";import{a as D}from"./chunk-KWDMUJJA.js";import{a as re}from"./chunk-WN4MFSKN.js";import{a as B}from"./chunk-7S3YJSN5.js";import{a as p,f as a,j as S,k as L,l as P}from"./chunk-LADTODTA.js";import{A as x,z as w}from"./chunk-WRHUMLYF.js";import{e as t}from"./chunk-3GYLW4KZ.js";var vr=t(p());var mr=t(p()),C=t(p());var je=t(p());var ke=t(p());var oe=(e,r)=>{x(e,r)},te=(e,r)=>{w(e,r)},ne={track:oe,pageView:te},f=({eventType:e,eventName:r,data:o})=>{ne[e](r,o)};var k=({url:e})=>{window.open(e)};var $=t(a()),U={openWindow:k},ie={componentName:"button",Render({component:e}){let r=v(),{text:o,onClick:i,metrics:s,...m}=e;return(0,$.jsx)(S,{onClick:g=>{for(let n of i){if(typeof U[n.eventType]<"u"){let l=U[n.eventType];l(n.data)}let d=r.getEventHandler(n.componentName,n.eventType);d&&d.handler(n.data)}s.onClick&&f(s.onClick)},...m,children:o})}},W=ie;var Te=t(p());var F=t(a()),z={openWindow:k},se={componentName:"img",Render({component:e}){let r=v(),{name:o,metrics:i,onClick:s=[],...m}=e;return(0,F.jsx)("img",{onClick:g=>{for(let n of s){if(typeof z[n.eventType]<"u"){let l=z[n.eventType];l(n.data)}let d=r.getEventHandler(n.componentName,n.eventType);d&&d.handler(n.data)}i&&i.onClick&&f(i.onClick)},alt:o,...m})}},A=se;var Se=t(p());var X=t(a()),I={openWindow:k},ae={componentName:"link",Render({component:e}){let r=v(),{value:o,onClick:i,metrics:s,...m}=e;return(0,X.jsx)("a",{onClick:g=>{for(let n of i){if(typeof I[n.eventType]<"u"){let l=I[n.eventType];l(n.data)}let d=r.getEventHandler(n.componentName,n.eventType);d&&d.handler(n.data)}s&&s.onClick&&f(s.onClick)},...m,children:o})}},O=ae;var Ge=t(p()),H=t(p());var q=t(p()),R=t(re());var u=t(a()),me=({isVisible:e=!0,setIsVisible:r,showLogo:o=!1,isDraggable:i=!1,dragSelector:s,onDragEnd:m,onDismiss:c,children:g,translateX:n="0",width:d=240})=>{let[l,N]=(0,q.useState)(!1);return(0,u.jsx)(R.Motion,{style:{opacity:(0,R.spring)(e?1:0,{stiffness:180,damping:20}),y:(0,R.spring)(e?0:-100,{stiffness:180,damping:20})},onRest:()=>{N(!0)},children:({opacity:j,y:ee})=>(0,u.jsxs)(V,{isDraggable:i,animationCompleted:l,dragSelector:s,onDragEnd:m,element:"div",className:"fixed z-[2147483647] top-0 right-6 bg-white border border-solid pt-2 pb-6",style:{transform:`translate3d(${n},${ee}%,0)`,opacity:j,width:d},children:[(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[o&&(0,u.jsx)(B,{width:146,height:32,marginLeft:12,marginTop:0}),(0,u.jsx)("div",{className:"flex flex-row",children:c&&(0,u.jsx)(D,{height:20,onClick:()=>{c&&c(),r&&r(!1)}})})]}),g]})})},E=me;var G=e=>{chrome.storage.local.set(e)};var K=t(a()),de={componentName:"notification",Render({component:e}){let[r,o]=(0,H.useState)(!0),i=v(),{name:s,metrics:m,onLoad:c,...g}=e,n=()=>{if(c)for(let N of c)N.eventType==="storage"&&G(N.data);m&&m.onLoad&&f(m.onLoad)};(0,H.useEffect)(()=>{n()},[]),i.registerEvent({componentName:s,eventType:"dismiss",handler:()=>{o(!r)}});let d=N=>{m.onDismiss&&f(m.onDismiss)},l=h();return(0,K.jsx)(E,{showLogo:!0,onDismiss:d,isVisible:r,setIsVisible:o,...g,children:e.children&&e.children.map(l)})}},J=de;var M=t(a()),ce={componentName:"container",Render({component:e}){let r=h(),{children:o,...i}=e;return(0,M.jsx)(L,{...i,children:o.map(r)})}},pe={componentName:"text",Render({component:e}){let{value:r,...o}=e;return(0,M.jsx)(P,{...o,children:r})}},le={renderNotification:J,renderContainer:ce,renderText:pe,imgRenderer:A,renderButton:W,linkRenderer:O},Q=le;var Z=t(a()),b=(0,C.createContext)(void 0),fe={eventHandlers:[],registerEvent(e){this.eventHandlers.push(e)},getEventHandler(e,r){return this.eventHandlers.find(o=>o.eventType===r&&o.componentName===e)}},Y=({children:e})=>{let r=Object.values(Q).reduce((s,{componentName:m,Render:c})=>(s[m]=c,s),{}),i={eventMediator:(0,C.useRef)(fe).current,componentRenderers:r};return(0,Z.jsx)(b.Provider,{value:i,children:e})},v=()=>{let{eventMediator:e}=(0,C.useContext)(b);return e},h=()=>{let{componentRenderers:e}=(0,C.useContext)(b);return o=>{let{componentName:i,...s}=o;return e[i]({component:s})}};var _=t(p());var y=class extends _.Component{constructor(r){super(r)}componentDidCatch(r,o){x(this.props.eventName||"error",{name:this.props.errorName||"serverDrivenUiError",error:r.toString(),label:o.componentStack})}render(){return this.props.children}};var T=t(a()),ve=({content:e})=>h()(e),kr=({content:e})=>{let{ui:r,errorHandler:o}=e,i=o?o.eventName:"error",s=o?o.errorName:"serverDrivenUiError";return(0,T.jsx)(y,{eventName:i,errorName:s,children:(0,T.jsx)(Y,{children:(0,T.jsx)(ve,{content:r})})})};export{kr as a};
