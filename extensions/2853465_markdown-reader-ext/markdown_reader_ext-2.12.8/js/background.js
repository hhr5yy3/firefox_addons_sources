(()=>{"use strict";var h={};class n{local;constructor(){this.local=chrome.storage.local}set(e,t){return typeof e=="string"?this.setObjData({[e]:t}):this.setObjData(e)}setObjData(e){return new Promise(t=>{this.local.set(e,t.bind(null,e))})}get(e=null){return new Promise(t=>this.local.get(e,t))}}const o=new n;chrome.runtime.onMessage.addListener(({action:r,data:e},t,s)=>(i(r,e,s),!0));async function i(r,e,t){switch(r){case"storage":await o.set({[e.key]:e.value}),g(e.key,e.value),t==null||t(e);break;case"fetch":fetch(e).then(s=>s.text()).then(t).catch(s=>{console.error(s),t==null||t(s)});break}}const u={enable:"reload",refresh:"toggleRefresh",centered:"toggleCentered",mdPlugins:"updateMdPlugins",pageTheme:"updatePageTheme",hiddenSide:"toggleSide"};function g(r,e){const t=u[r];t&&chrome.tabs.query({currentWindow:!0,active:!0},s=>{s.length&&chrome.tabs.sendMessage(s[0].id,{action:t,data:{key:r,value:e}})})}chrome.runtime.setUninstallURL("https://github.com/orgs/md-reader/discussions/51")})();
