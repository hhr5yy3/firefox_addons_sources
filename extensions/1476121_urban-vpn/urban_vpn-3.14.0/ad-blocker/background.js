(()=>{var t={7588:t=>{var e=function(t){"use strict";var e,n=Object.prototype,a=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function define(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{define({},"")}catch(t){define=function(t,e,n){return t[e]=n}}function wrap(t,e,n,a){var i=e&&e.prototype instanceof Generator?e:Generator,r=Object.create(i.prototype),o=new Context(a||[]);return r._invoke=function makeInvokeMethod(t,e,n){var a=d;return function invoke(i,r){if(a===c)throw new Error("Generator is already running");if(a===l){if("throw"===i)throw r;return doneResult()}for(n.method=i,n.arg=r;;){var o=n.delegate;if(o){var s=maybeInvokeDelegate(o,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=l,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=c;var _=tryCatch(t,e,n);if("normal"===_.type){if(a=n.done?l:u,_.arg===h)continue;return{value:_.arg,done:n.done}}"throw"===_.type&&(a=l,n.method="throw",n.arg=_.arg)}}}(t,n,o),r}function tryCatch(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=wrap;var d="suspendedStart",u="suspendedYield",c="executing",l="completed",h={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var _={};define(_,r,(function(){return this}));var E=Object.getPrototypeOf,T=E&&E(E(values([])));T&&T!==n&&a.call(T,r)&&(_=T);var f=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(_);function defineIteratorMethods(t){["next","throw","return"].forEach((function(e){define(t,e,(function(t){return this._invoke(e,t)}))}))}function AsyncIterator(t,e){function invoke(n,i,r,o){var s=tryCatch(t[n],t,i);if("throw"!==s.type){var d=s.arg,u=d.value;return u&&"object"==typeof u&&a.call(u,"__await")?e.resolve(u.__await).then((function(t){invoke("next",t,r,o)}),(function(t){invoke("throw",t,r,o)})):e.resolve(u).then((function(t){d.value=t,r(d)}),(function(t){return invoke("throw",t,r,o)}))}o(s.arg)}var n;this._invoke=function enqueue(t,a){function callInvokeWithMethodAndArg(){return new e((function(e,n){invoke(t,a,e,n)}))}return n=n?n.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(t,n){var a=t.iterator[n.method];if(a===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,maybeInvokeDelegate(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var i=tryCatch(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,h;var r=i.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function pushTryEntry(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function resetTryEntry(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t){var n=t[r];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function next(){for(;++i<t.length;)if(a.call(t,i))return next.value=t[i],next.done=!1,next;return next.value=e,next.done=!0,next};return o.next=o}}return{next:doneResult}}function doneResult(){return{value:e,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(f,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===GeneratorFunction||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,s,"GeneratorFunction")),t.prototype=Object.create(f),t},t.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,o,(function(){return this})),t.AsyncIterator=AsyncIterator,t.async=function(e,n,a,i,r){void 0===r&&(r=Promise);var o=new AsyncIterator(wrap(e,n,a,i),r);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},defineIteratorMethods(f),define(f,s,"Generator"),define(f,r,(function(){return this})),define(f,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function next(){for(;e.length;){var n=e.pop();if(n in t)return next.value=n,next.done=!1,next}return next.done=!0,next}},t.values=values,Context.prototype={constructor:Context,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(resetTryEntry),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function handle(a,i){return o.type="throw",o.arg=t,n.next=a,i&&(n.method="next",n.arg=e),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return handle("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),d=a.call(r,"finallyLoc");if(s&&d){if(this.prev<r.catchLoc)return handle(r.catchLoc,!0);if(this.prev<r.finallyLoc)return handle(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return handle(r.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return handle(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,h):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),resetTryEntry(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;resetTryEntry(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:values(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}},5976:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(1225),r=n(1850),o=n(3124),s=n(4019),d=function(){function PosdAdBlocker(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdAdBlocker),this.id=t,this.init=!1,this.tabsCounters=[],this.totalCounter=0,this.ConfigManager=null,this.TabsManager=null,this.status=i.GetDefaultAdblockerStatus(),this.GetStatusFromStorage()}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdAdBlocker,[{key:"Init",value:function Init(t,e){return!this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&t&&e&&(this.ConfigManager=t,this.TabsManager=e,this.init=!0),this.init}},{key:"GetStatusFromStorage",value:function GetStatusFromStorage(){if(a.CONFIG_ADBLOCKER_AVAILABLE){var t=localStorage.getItem("posdAdBlockerStatus");if(t&&"string"==typeof t)if(t===o.ADBLOCKER_STATUS_ENABLED||t===o.ADBLOCKER_STATUS_DISABLED)this.status[o.ADBLOCKER_FOR_DISPLAY]=t,this.SetStatusToStorage();else try{var e=JSON.parse(s.decode(t));for(var n in e)!this.status.hasOwnProperty(n)||e[n]!==o.ADBLOCKER_STATUS_ENABLED&&e[n]!==o.ADBLOCKER_STATUS_DISABLED||(this.status[n]=e[n])}catch(t){}this.SendUpdatedStatusToAgents()}}},{key:"SetStatusToStorage",value:function SetStatusToStorage(){var t=s.encode(JSON.stringify(this.status));localStorage.setItem("posdAdBlockerStatus",t),chrome.storage.local.set({posdAdBlockerStatus:t})}},{key:"UpdateAdblockerStatus",value:function UpdateAdblockerStatus(t,e){var n=this;if(this.init){var a=!1;t.forEach((function(t){n.status.hasOwnProperty(t)&&n.status[t]!==e&&(n.status[t]=e,a=!0)})),a&&(this.SendUpdatedStatusToAgents(),this.SetStatusToStorage())}}},{key:"Enable",value:function Enable(t){return this.UpdateAdblockerStatus(t,o.ADBLOCKER_STATUS_ENABLED),this.status}},{key:"Disable",value:function Disable(t){return this.UpdateAdblockerStatus(t,o.ADBLOCKER_STATUS_DISABLED),this.IsAnyAdBlockerEnabled()||(this.totalCounter=0,this.tabsCounters=[]),this.status}},{key:"SetHiddenCandidatesAmount",value:function SetHiddenCandidatesAmount(t,e){var n=i.GetTabIdKey(t);void 0===this.tabsCounters[n]&&(this.tabsCounters[n]=0),this.tabsCounters[n]=this.tabsCounters[n]+e,this.totalCounter=this.totalCounter+e}},{key:"onTabUpdated",value:function onTabUpdated(t){var e=i.GetTabIdKey(t);void 0!==this.tabsCounters[e]&&(this.tabsCounters[e]=0)}},{key:"GetCounters",value:function GetCounters(t){var e={currentPageTotal:0,currentSessionTotal:this.totalCounter},n=i.GetTabIdKey(t);return void 0!==this.tabsCounters[n]&&(e.currentPageTotal=this.tabsCounters[n]),e}},{key:"GetStatus",value:function GetStatus(){return this.status}},{key:"SendUpdatedStatusToAgents",value:function SendUpdatedStatusToAgents(){var t=this;this.init&&this.TabsManager.GetAllTabs((function(e){e&&e.length&&e.forEach((function(e){if(e&&e.id){var n=r.EmptyMessage;n.type=o.MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED,n.to=i.GetMainPageId(e.id),n.content=t.status,chrome.tabs.sendMessage(e.id,n)}}))}))}},{key:"IsAnyAdBlockerEnabled",value:function IsAnyAdBlockerEnabled(){var t=!1;for(var e in this.status)this.status[e]===o.ADBLOCKER_STATUS_ENABLED&&(t=!0);return t}},{key:"IsAdBlockerEnabled",value:function IsAdBlockerEnabled(){return this.init&&a.CONFIG_ADBLOCKER_AVAILABLE&&this.IsAnyAdBlockerEnabled()}}]),PosdAdBlocker}();t.exports=d},2e3:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(1225),i=function(){function PosdAdBlockInspector(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdAdBlockInspector),this.id=t,this.init=!1,this.hasActiveAdblock=!1,this.InspectorConfig=null,this.needsActiveAgentStatusLastRequestTime=a.GetCurrentTimestamp()-300}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdAdBlockInspector,[{key:"Init",value:function Init(t){return this.InspectorConfig=t,!this.init&&this.InspectorConfig?(this.init=!0,this.init):this.init}},{key:"IsNeedActivateAgentForTab",value:function IsNeedActivateAgentForTab(t){var e=a.GetCurrentTimestamp();return!!(this.IsActive()&&e-this.needsActiveAgentStatusLastRequestTime>this.GetActivationStatusUpdateInterval())&&(this.needsActiveAgentStatusLastRequestTime=e,!0)}},{key:"onGotMessageFromAdBlockInspectorAgent",value:function onGotMessageFromAdBlockInspectorAgent(t){this.IsActive()&&t&&(this.hasActiveAdblock=t.hasActiveAdblock)}},{key:"IsInit",value:function IsInit(){return this.init}},{key:"IsActive",value:function IsActive(){return this.init&&this.InspectorConfig&&this.InspectorConfig.active}},{key:"GetActivationStatusUpdateInterval",value:function GetActivationStatusUpdateInterval(){return this.init&&this.InspectorConfig&&this.InspectorConfig.needsActiveAgentIntervalSec}},{key:"HasActiveAdblock",get:function get(){return this.hasActiveAdblock}}]),PosdAdBlockInspector}();t.exports=i},3886:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(1225),r=n(1510),o=function(){function PosdAnalyticManager(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdAnalyticManager),this.id=t,this.init=!1,this.panalyticsId="",this.installEventTriggered=!1,this.sentInstallEvent=!1,this.BackgendIOManager=new r}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdAnalyticManager,[{key:"Init",value:function Init(){return!(this.init||!i.IsOnChromeRuntime()||!a.CONFIG_ANALYTIC_INSTALL_EVENTS_TRACING_AVAILABLE)&&(chrome.runtime.onInstalled.addListener(this.onExtensionInstalled.bind(this)),this.init=!0,!0)}},{key:"onExtensionInstalled",value:function onExtensionInstalled(t){this.installEventTriggered=!0,this.panalyticsId.length&&!this.sentInstallEvent&&"install"===t.reason&&this.SendInstallEventToBackend()}},{key:"SetPanalyticsId",value:function SetPanalyticsId(t){this.panalyticsId=t,this.panalyticsId.length&&this.installEventTriggered&&!this.sentInstallEvent&&this.SendInstallEventToBackend()}},{key:"SendInstallEventToBackend",value:function SendInstallEventToBackend(){if(a.CONFIG_ANALYTIC_INSTALL_EVENTS_TRACING_AVAILABLE){this.sentInstallEvent=!0;var t=a.CONFIG_PANELBACKEND_ENDPOINT+a.CONFIG_PANELBACKEND_ENDPOINT_ULR_INSTALL_EVENT;this.BackgendIOManager.SendInstallEvent(this.panalyticsId,t,this.onSentInstallEvent.bind(this),this.onErrorSentInstallEvent.bind(this))}}},{key:"onSentInstallEvent",value:function onSentInstallEvent(){}},{key:"onErrorSentInstallEvent",value:function onErrorSentInstallEvent(){}}]),PosdAnalyticManager}();t.exports=o},1510:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(4019),r=n(3002),o=function(){function PosdBackendIOManager(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdBackendIOManager),this.init=!1,this.dataCollectionManager=new r}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdBackendIOManager,[{key:"SendSingleOutTicketToBackend",value:function SendSingleOutTicketToBackend(t,e,n,i){this.dataCollectionManager.IsDisabled()?n():e&&e.data&&e.ticketId&&e.ticketId.length&&t&&t.length&&this.SendDataToEndpoint(t,e.data,a.CONFIG_PANELBACKEND_ENDPOINT+a.CONFIG_PANELBACKEND_ENDPOINT_ULR_OUTTICKET+"/"+e.ticketId,n,i)}},{key:"SendMultiOutTicketToBackend",value:function SendMultiOutTicketToBackend(t,e,n,i){this.dataCollectionManager.IsDisabled()?n():e&&e.data&&t&&t.length&&this.SendDataToEndpoint(t,e.data,a.CONFIG_PANELBACKEND_ENDPOINT+a.CONFIG_PANELBACKEND_ENDPOINT_ULR_OUTTICKET,n,i)}},{key:"SendDataToEndpoint",value:function SendDataToEndpoint(t,e,n,i,r){return!(!e||!n)&&(fetch(n,{method:"POST",cache:"no-cache",body:e,headers:{Authorization:PosdBackendIOManager.GetBasicAuthorizationHeaderValue(t),"Content-type":a.CONFIG_USE_COMPRESSION?"application/octet-stream":"application/json"}}).then((function(t){200===t.status?i():r()})).catch((function(t){r()})),!0)}},{key:"SendInstallEvent",value:function SendInstallEvent(t,e,n,a){return!!e&&(fetch(e,{method:"POST",cache:"no-cache",body:"",headers:{Authorization:PosdBackendIOManager.GetBasicAuthorizationHeaderValue(t)}}).then((function(t){200===t.status?n():a()})).catch((function(){a()})),!0)}}],[{key:"GetBasicAuthorizationHeaderValue",value:function GetBasicAuthorizationHeaderValue(t){return"Basic "+i.encode("pnldsk:".concat(a.CONFIG_PINSTANCE_ID,"-").concat(a.CONFIG_PARTNER_ID,"-").concat(a.CONFIG_DISTRIBUTOR_ID,"-").concat(t))}},{key:"GetConfig",value:function GetConfig(t,e,n,a){return e?(fetch(e,{method:"GET",cache:"no-cache",headers:{Authorization:PosdBackendIOManager.GetBasicAuthorizationHeaderValue(t)}}).then((function(t){if(200===t.status)return t.text();a()})).then((function(t){n(t)})).catch((function(){a()})),!0):(a(),!1)}}]),PosdBackendIOManager}();t.exports=o},411:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(1225),r=n(3124),o=n(1850),s=n(597),d=n(8235),u=n(5978),c=n(8382),l=n(3886),h=n(2e3),_=n(5976),E=n(5734),T=n(850),f=n(6023),g=n(6162),A=n(4063),C=n(8501),m=n(6523),I=n(3002),p=function(){function PosdBackgroundContent(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdBackgroundContent),this.id="bg_"+i.GenerateQuickId(),this.activeStatus=a.CONFIG_GLOBAL_ACTIVE_STATUS,this.VideoRequestNumber=0,this.ConfigManager=new T(this.id),this.TabsManager=new E(this.id),this.TicketBuilder=new d(this.id),this.TicketSender=new s(this.id),this.panalyticsId=new u(this.id),this.ContentStorage=new c(this.id),this.AnalyticManager=new l(this.id),this.AdBlockInspector=new h(this.id),this.AdBlocker=new _(this.id),this.FacebookLoader=new f(this.id),this.TwitterLoader=new g(this.id),this.PinterestLoader=new A(this.id),this.DataCollectionManager=new I,this.slaveTabs=[],this.excludeList={domains:new C,pages:new m}}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdBackgroundContent,[{key:"Init",value:function Init(){this.RestoreCurrentActiveStatus(),this.AnalyticManager.Init(),this.panalyticsId.GetId(this.onGetPanalyticsId.bind(this)),i.IsOnChromeRuntime()&&chrome.runtime.onMessage.addListener(this.MessageListener.bind(this)),this.TicketSender.Init(),this.TicketBuilder.Init(this.ContentStorage,this.TicketSender,this.AdBlockInspector,this.TabsManager,this.ConfigManager),a.CONFIG_ADBLOCK_INSPECTOR_AVAILABLE&&this.AdBlockInspector.Init(this.ConfigManager.GetAdBlockInspectorConfig()),a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker.Init(this.ConfigManager,this.TabsManager),this.FacebookLoader.Init(this.ConfigManager,this.ContentStorage),this.TwitterLoader.Init(this.ConfigManager,this.ContentStorage),this.PinterestLoader.Init(this.ConfigManager,this.ContentStorage)}},{key:"MessageListener",value:function MessageListener(t,e,n){var i,s,d,u,c,l=this;if(o.IsValid(t)){var h=t.content;if(e.tab){if(o.IsStrictValid(t))switch(!0){case t.type===r.MESSAGE_TYPE_TAB_INITIALIZATION:this.TabsManager.SetInitedTab(e.tab.id,h),a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker.IsAdBlockerEnabled()&&this.AdBlocker.onTabUpdated(e.tab.id),n({status:"ok",config:{activeStatus:this.activeStatus,activeAdBlockInspectorAgent:this.AdBlockInspector.IsNeedActivateAgentForTab(e.tab.url),adBlockerStatus:this.AdBlocker.GetStatus(),panalyticsId:this.panalyticsId.ID,tabId:e.tab.id,excludeList:Object.keys(this.excludeList).reduce((function(t,e){return t[e]=l.excludeList[e].GetList(),t}),{}),configuration:this.ConfigManager.GetConfigEncoded()}});break;case t.type===r.MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION:this.TabsManager.SetInitedTab(e.tab.id,h),a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker.IsAdBlockerEnabled()&&this.AdBlocker.onTabUpdated(e.tab.id),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_PANEL_REGULATOR_RESULT:this.UpdateSlaveTabs(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_IFRAME_INITIALIZATION:var _=o.EmptyMessage;_.type=r.MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE,_.from=this.id,_.content={isMaster:this.isTabMaster(e.tab.id),activeStatus:this.activeStatus,frameId:e.frameId,configuration:this.ConfigManager.GetConfigEncoded()},n({status:"ok",mes:_});break;case t.type===r.MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET:this.TicketBuilder.AddTicketToTabInfo(e.tab.id,this.TicketBuilder.PrebuildTicket(h)),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_OUT_TICKET:this.TicketBuilder.AddTicketForBuilding(e.tab.id,this.TicketBuilder.PrebuildTicket(h))?n({status:"ok"}):n({status:"error"});break;case t.type===r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5:this.ContentStorage.AddCandidatePlacementsHtml5(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK:this.ContentStorage.AddCandidatePlacementsFacebook(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER:this.ContentStorage.AddCandidatePlacementsTwitter(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT:this.ContentStorage.AddCandidatePlacementsReddit(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK:this.ContentStorage.AddCandidatePlacementsTiktok(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM:this.ContentStorage.AddCandidatePlacementsInstagram(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_SKINADS:this.ContentStorage.AddCandidatesDataSkinAds(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_BANNERS:this.ContentStorage.AddCandidatesDataBanners(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK:if(h&&h.length)for(var E=0;E<h.length;E++)h[E].designVersion===r.FACEBOOK_DESIGN_VERSION_NEW?this.ContentStorage.AddOneCandidateDataFacebook(e.tab.id,h[E]):this.FacebookLoader.IsLoadAboutPageActivated()&&h[E].aboutPageLink&&h[E].aboutPageLink.length?this.FacebookLoader.AddOneCandidateForLoading(e.tab.id,h[E],t.type):this.ContentStorage.AddOneCandidateDataFacebook(e.tab.id,h[E]);n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_TWITTER:this.TwitterLoader.IsLoadUserDataActivated()&&(h[0].hasOwnProperty("videoData")&&h[0].videoData||!h[0].hasOwnProperty("videoData"))?(this.TwitterLoader.AddCandidatesForLoading(e.tab.id,h),n({status:"ok"})):(h[0].hasOwnProperty("videoData")&&h[0].videoData||!h[0].hasOwnProperty("videoData"))&&(this.ContentStorage.AddCandidatesDataTwitter(e.tab.id,h),n({status:"ok"}));break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_REDDIT:this.ContentStorage.AddCandidatesDataReddit(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM:this.ContentStorage.AddCandidatesDataInstagram(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST:this.PinterestLoader.AddCandidateForLoading(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_FACEBOOK_VIDEO_DATA:h&&this.ContentStorage.AddCandidatesFacebookVideoData(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_PINTEREST_VIDEO_DATA:h&&this.ContentStorage.AddCandidatesPinterestVideoData(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA:h&&this.ContentStorage.AddCandidatesInstagramVideoData(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_INSTAGRAM_STORY_DATA:t.content&&this.ContentStorage.AddCandidatesInstagramStoryData(e.tab.id,t.content),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA:h&&(h.requestId=this.VideoRequestNumber++,h.encodedText.bisLinks&&h.encodedText.bisLinks.aboutPageLink?this.FacebookLoader.AddOneCandidateForLoading(e.tab.id,h,t.type):this.ContentStorage.AddVideoHar(e.tab.id,h),n({status:"ok"})),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_TWITTER_VIDEO_DATA:h&&this.ContentStorage.AddCandidatesTwitterVideoData(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_REDDIT_VIDEO_DATA:h&&this.ContentStorage.AddCandidatesRedditVideoData(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA:h&&this.ContentStorage.AddCandidatesRedditRightColumnData(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_IFRAME_CONTENT:h.browserFrameId=e.frameId,this.ContentStorage.AddChainSegmentContent(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT:h.isChainCompleted?this.ContentStorage.AddInvalidChainCompletedContent(e.tab.id,h):this.ContentStorage.AddChainSegmentContent(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND:this.TicketBuilder.IsInit()&&this.TicketBuilder.onGotTicketClickTargetUrlInfo(e.tab.id,t.from,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS:this.ContentStorage.AddFrameWithInputs(e.tab.id,e.frameId),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS:this.ContentStorage.AddFrameWithRedirects(e.tab.id,e.frameId),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT:a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker.SetHiddenCandidatesAmount(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_VIDEO_HAR:h.requestId=this.VideoRequestNumber++,h.frameId=e.frameId,h.framesChain=[],this.ContentStorage.AddVideoHar(e.tab.id,h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT:this.AdBlockInspector&&this.AdBlockInspector.onGotMessageFromAdBlockInspectorAgent&&this.AdBlockInspector.onGotMessageFromAdBlockInspectorAgent(h),n({status:"ok"});break;case t.type===r.MESSAGE_TYPE_TEST:n({status:"ok"});break;default:n({status:"error"})}}else switch(!0){case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID:n({status:"ok",panalyticsId:this.panalyticsId.ID});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION:n({status:"ok",version:a.CONFIG_PANELOS_VERSION});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS:n({status:"ok",adBlockerStatus:this.AdBlocker.GetStatus()});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS:n({status:"ok",counters:this.AdBlocker.GetCounters(h)});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER:n({status:"ok",adBlockerStatus:this.AdBlocker.Enable(h)});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER:n({status:"ok",adBlockerStatus:this.AdBlocker.Disable(h)});break;case t.type===r.MESSAGE_TYPE_GET_EXCLUDE_LIST:this.GetExcludeList((function(t){return n({status:"ok",excludeList:t})}),(function(t){return n({status:"error",message:t.message})}),null===(i=t.content)||void 0===i?void 0:i.listType);break;case t.type===r.MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST:this.AddIntoExcludeList((function(){return n({status:"ok"})}),(function(t){return n({status:"error",message:t.message})}),null===(s=t.content)||void 0===s?void 0:s.listType,null===(d=t.content)||void 0===d?void 0:d.item);break;case t.type===r.MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST:this.RemoveFromExcludeList((function(){return n({status:"ok"})}),(function(t){return n({status:"error",message:t.message})}),null===(u=t.content)||void 0===u?void 0:u.listType,null===(c=t.content)||void 0===c?void 0:c.item);break;case t.type===r.MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST:return this.AddCurrentDomainIntoExcludeList((function(t){return n({status:"ok",domain:t})}),(function(t){return n({status:"error",message:t.message})})),!0;case t.type===r.MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST:return this.AddCurrentPageIntoExcludeList((function(t){return n({status:"ok",page:t})}),(function(t){return n({status:"error",message:t.message})})),!0;case t.type===r.MESSAGE_TYPE_GET_CURRENT_DOMAIN:return this.GetCurrentDomain((function(t){return n({status:"ok",domain:t})}),(function(t){return n({status:"error",message:t.message})})),!0;case t.type===r.MESSAGE_TYPE_GET_CURRENT_PAGE_URL:return this.GetCurrentPageUrl((function(t){return n({status:"ok",page:t})}),(function(t){return n({status:"error",message:t.message})})),!0;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS:n({status:"ok",dataCollectionStatus:this.DataCollectionManager.IsEnabled()});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION:n({status:"ok",dataCollectionStatus:this.DataCollectionManager.Enable()});break;case t.type===r.MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION:n({status:"ok",dataCollectionStatus:this.DataCollectionManager.Disable()});break;default:n({status:"error"})}}}},{key:"onGetPanalyticsId",value:function onGetPanalyticsId(t){this.TicketSender.SetPanalyticsId(t),this.AnalyticManager.SetPanalyticsId(t),this.ConfigManager.SetPanalyticsId(t),this.TicketBuilder.SetPanalyticsId(t)}},{key:"RestoreCurrentActiveStatus",value:function RestoreCurrentActiveStatus(){var t=localStorage.getItem("posdActiveStatus");this.activeStatus="on"===t||"off"===t?"on"===t:a.CONFIG_GLOBAL_ACTIVE_STATUS,this.UpdateActiveStatus(this.activeStatus)}},{key:"UpdateActiveStatus",value:function UpdateActiveStatus(t){this.activeStatus=t,t?(localStorage.setItem("posdActiveStatus","on"),chrome.storage.local.set({posdActiveStatus:"on"})):(localStorage.setItem("posdActiveStatus","off"),chrome.storage.local.set({posdActiveStatus:"off"}))}},{key:"UpdateConfig",value:function UpdateConfig(){this.ConfigManager&&this.ConfigManager.UpdateConfig(3e3)}},{key:"GetAdBlockerStatus",value:function GetAdBlockerStatus(t,e){a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker&&t?t(this.AdBlocker.GetStatus()):e&&e("error: adblocker is not available")}},{key:"GetAdBlockerCounters",value:function GetAdBlockerCounters(t,e,n){a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker&&t?t(this.AdBlocker.GetCounters(n)):e&&e("error: adblocker is not available")}},{key:"EnableAdBlocker",value:function EnableAdBlocker(t,e,n){a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker&&t?t(this.AdBlocker.Enable(n)):e&&e("error: adblocker is not available")}},{key:"DisableAdBlocker",value:function DisableAdBlocker(t,e,n){a.CONFIG_ADBLOCKER_AVAILABLE&&this.AdBlocker&&t?t(this.AdBlocker.Disable(n)):e&&e("error: adblocker is not available")}},{key:"UpdateSlaveTabs",value:function UpdateSlaveTabs(t,e){if(e){if(this.slaveTabs.includes(t)){var n=this.slaveTabs.indexOf(t);-1!==n&&this.slaveTabs.splice(n,1)}}else this.slaveTabs.includes(t)||this.slaveTabs.push(t)}},{key:"isTabMaster",value:function isTabMaster(t){return!this.slaveTabs.includes(t)}},{key:"GetExcludeList",value:function GetExcludeList(t,e,n){try{this._validateExcludeListType(n),t(this.excludeList[n].GetList())}catch(t){e(t)}}},{key:"AddIntoExcludeList",value:function AddIntoExcludeList(t,e,n,a){this.excludeList[n]||e();try{t(this.excludeList[n].AddItem(a))}catch(t){e(t)}}},{key:"RemoveFromExcludeList",value:function RemoveFromExcludeList(t,e,n,a){try{this._validateExcludeListType(n),t(this.excludeList[n].RemoveItem(a))}catch(t){e(t)}}},{key:"HasItemInExcludeList",value:function HasItemInExcludeList(t,e,n,a){try{this._validateExcludeListType(n),t(this.excludeList[n].HasItem(a))}catch(t){e(t)}}},{key:"AddCurrentDomainIntoExcludeList",value:function AddCurrentDomainIntoExcludeList(t,e){var n=this;this.GetCurrentDomain((function(a){try{n.excludeList.domains.AddItem(a),t(a)}catch(t){e(t)}}),(function(t){return e(t)}))}},{key:"AddCurrentPageIntoExcludeList",value:function AddCurrentPageIntoExcludeList(t,e){var n=this;this.GetCurrentPageUrl((function(a){try{n.excludeList.pages.AddItem(a),t(a)}catch(t){e(t)}}),(function(t){return e(t)}))}},{key:"GetCurrentDomain",value:function GetCurrentDomain(t,e){this.GetCurrentPageUrl((function(e){var n=new URL(e);t("".concat(n.protocol,"//").concat(n.hostname))}),(function(t){return e(t)}))}},{key:"GetCurrentPageUrl",value:function GetCurrentPageUrl(t,e){chrome.tabs.query({active:!0,currentWindow:!0},(function(n){n&&n[0]&&n[0].id?t(n[0].url):e(new Error("No Active Tab"))}))}},{key:"_validateExcludeListType",value:function _validateExcludeListType(t){if(!this.excludeList[t])throw new Error('List type "'.concat(t,'" is not available'))}},{key:"EnableDataCollection",value:function EnableDataCollection(t,e){try{this.DataCollectionManager.Enable(),t()}catch(t){e()}}},{key:"DisableDataCollection",value:function DisableDataCollection(t,e){try{this.DataCollectionManager.Disable(),t()}catch(t){e()}}},{key:"GetDataCollectionStatus",value:function GetDataCollectionStatus(t,e){try{t(this.DataCollectionManager.IsEnabled())}catch(t){e()}}}]),PosdBackgroundContent}();t.exports=p},6124:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(4019),i=function(){function PosdConfigLocalExtender(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdConfigLocalExtender),this.id=t,this.LOCAL_DEFAULT_WINDOWS_OBJECT_PROPERTIES=[]}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdConfigLocalExtender,[{key:"ExtendConfigJson",value:function ExtendConfigJson(t){var e=this.ExtendHtml5TargetUrlDetectionConfig(t.html5TargetUrlDetectionConfig);return Object.assign(t,{html5TargetUrlDetectionConfig:e})}},{key:"ExtendConfigEncoded",value:function ExtendConfigEncoded(t){var e=JSON.parse(a.decode(t)),n=this.ExtendConfigJson(e);return a.encode(JSON.stringify(n))}},{key:"ExtendHtml5TargetUrlDetectionConfig",value:function ExtendHtml5TargetUrlDetectionConfig(t){return this.SetDefaultWindowsObjectProperties(),Object.assign(t,{LOCAL_DEFAULT_WINDOWS_OBJECT_PROPERTIES:this.LOCAL_DEFAULT_WINDOWS_OBJECT_PROPERTIES})}},{key:"SetDefaultWindowsObjectProperties",value:function SetDefaultWindowsObjectProperties(){if(0===this.LOCAL_DEFAULT_WINDOWS_OBJECT_PROPERTIES.length){var t=document.createElement("iframe");t.style.display="none",document.body.appendChild(t);var e=Object.getOwnPropertyNames(t.contentWindow);document.body.removeChild(t),this.LOCAL_DEFAULT_WINDOWS_OBJECT_PROPERTIES=e}}}]),PosdConfigLocalExtender}();t.exports=i},850:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(4019),r=n(1510),o=n(6124),s=n(7401),d=function(){function PosdConfigManager(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdConfigManager),this.id=t;var e=s,n=JSON.parse(i.decode(e));this.ConfigLocalExtender=new o(t),this.configEncoded=this.ConfigLocalExtender.ExtendConfigEncoded(e),this.config=this.ConfigLocalExtender.ExtendConfigJson(n),this.panalyticsId=""}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdConfigManager,[{key:"SetPanalyticsId",value:function SetPanalyticsId(t){this.panalyticsId!==t&&(this.panalyticsId=t,this.LoadConfig(),setInterval(this.LoadConfig.bind(this),36e5))}},{key:"LoadConfig",value:function LoadConfig(){r.GetConfig(this.panalyticsId,a.CONFIG_PANELBACKEND_ENDPOINT+a.CONFIG_PANELBACKEND_ENDPOINT_ULR_CONFIGURATION,this.onGetConfigData.bind(this),this.onGetConfigDataError.bind(this))}},{key:"UpdateConfig",value:function UpdateConfig(t){setTimeout(this.LoadConfig.bind(this),t)}},{key:"onGetConfigDataError",value:function onGetConfigDataError(){}},{key:"onGetConfigData",value:function onGetConfigData(t){try{var e=JSON.parse(i.decode(t));e&&e.hasOwnProperty("blacklistBannerImgSrc")&&e.hasOwnProperty("blacklistBannerHref")&&e.hasOwnProperty("blacklistIframeSrc")&&e.hasOwnProperty("blacklistIframeId")&&e.hasOwnProperty("blacklistTargetUrl")&&e.hasOwnProperty("whitelistCandidatesUrlKeyWords")&&e.hasOwnProperty("videoValidatorsForHTML")&&e.hasOwnProperty("videoValidatorsForJS")&&e.hasOwnProperty("videoValidatorsForXHR")&&e.hasOwnProperty("loadManagement")&&e.hasOwnProperty("blacklistPublishers")&&e.hasOwnProperty("facebookConfig")&&e.hasOwnProperty("twitterConfig")&&e.hasOwnProperty("adBlockInspectorConfig")&&(this.configEncoded=this.ConfigLocalExtender.ExtendConfigEncoded(t),this.config=this.ConfigLocalExtender.ExtendConfigJson(e))}catch(t){}}},{key:"GetConfigFull",value:function GetConfigFull(){return this.config}},{key:"GetLoadManagementSettings",value:function GetLoadManagementSettings(){return this.config.loadManagement}},{key:"GetBlacklistPublishers",value:function GetBlacklistPublishers(){return this.config.blacklistPublishers}},{key:"GetFacebookConfig",value:function GetFacebookConfig(){return this.config.facebookConfig}},{key:"GetTwitterConfig",value:function GetTwitterConfig(){return this.config.twitterConfig}},{key:"GetAdBlockInspectorConfig",value:function GetAdBlockInspectorConfig(){return this.config.adBlockInspectorConfig}},{key:"GetBannerAdsConfig",value:function GetBannerAdsConfig(){return this.config.bannerAdsConfig}},{key:"GetHtml5AdsConfig",value:function GetHtml5AdsConfig(){return this.config.HTML5AdsConfig}},{key:"IsUseSensitiveDataFilter",value:function IsUseSensitiveDataFilter(){return!!this.config.hasOwnProperty("useSensitiveDataFilter")&&this.config.useSensitiveDataFilter}},{key:"GetConfigEncoded",value:function GetConfigEncoded(){return this.configEncoded}},{key:"RedditConfig",get:function get(){return this.config.redditConfig}},{key:"PinterestConfig",get:function get(){return this.config.pinterestConfig}},{key:"InstagramConfig",get:function get(){return this.config.instagramConfig}}]),PosdConfigManager}();t.exports=d},8382:(t,e,n)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}n(1225);var a=function(){function PosdContentStorage(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdContentStorage),this.id=t,this.init=!1,this.CandidatesDataSkinAds=new Array,this.CandidatesDataBanners=new Array,this.FacebookCandidatePlacements=new Array,this.CandidatesDataFacebook=new Array,this.CandidatesFacebookVideoData=new Array,this.FacebookAboutSectionContent=new Array,this.TwitterCandidatePlacements=new Array,this.CandidatesDataTwitter=new Array,this.CandidatesTwitterVideoData=new Array,this.RedditCandidatePlacements=new Array,this.CandidatesDataReddit=new Array,this.CandidatesRedditVideoData=new Array,this.CandidatesRedditRightColumnData=new Array,this.PinterestCandidatePlacements=new Array,this.CandidatesDataPinterest=new Array,this.CandidatesPinterestVideoData=new Array,this.PinterestUniqueContentIdSent=new Array,this.Html5CandidatePlacements=new Array,this.TiktokCandidatePlacements=new Array,this.InstagramCandidatePlacements=new Array,this.CandidatesDataInstagram=new Array,this.CandidatesInstagramVideoData=new Array,this.CandidatesInstagramStoryData=new Array,this.CandidatesInstagramStoryTargetUrlSent=new Array,this.ChainSegmentContent=new Array,this.InvalidChainCompletedContent=new Array,this.FramesWithInputs=new Array,this.FramesWithRedirects=new Array,this.VideoHars=new Array,this.maxAmountTwitterCandidates=3,this.maxAmountTwitterVideoDatas=40}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdContentStorage,[{key:"GetMpKey",value:function GetMpKey(t){return"mp_"+t}},{key:"AddCandidatesDataSkinAds",value:function AddCandidatesDataSkinAds(t,e){var n=this.GetMpKey(t);this.CandidatesDataSkinAds[n]||(this.CandidatesDataSkinAds[n]=new Array);for(var a=0;a<e.length;a++)this.CandidatesDataSkinAds[n].push(e[a])}},{key:"AddCandidatesDataBanners",value:function AddCandidatesDataBanners(t,e){var n=this.GetMpKey(t);this.CandidatesDataBanners[n]||(this.CandidatesDataBanners[n]=new Array);for(var a=0;a<e.length;a++)this.CandidatesDataBanners[n].push(e[a])}},{key:"AddOneCandidateDataFacebook",value:function AddOneCandidateDataFacebook(t,e){var n=this.GetMpKey(t);this.CandidatesDataFacebook[n]||(this.CandidatesDataFacebook[n]=new Array),this.CandidatesDataFacebook[n].push(e)}},{key:"AddCandidatesFacebookVideoData",value:function AddCandidatesFacebookVideoData(t,e){var n=this.GetMpKey(t);this.CandidatesFacebookVideoData[n]||(this.CandidatesFacebookVideoData[n]=new Array),this.CandidatesFacebookVideoData[n].push(e)}},{key:"AddCandidatesTwitterVideoData",value:function AddCandidatesTwitterVideoData(t,e){var n=this.GetMpKey(t);this.CandidatesTwitterVideoData[n]||(this.CandidatesTwitterVideoData[n]=new Array),this.CandidatesTwitterVideoData[n].push(e)}},{key:"AddCandidatesRedditVideoData",value:function AddCandidatesRedditVideoData(t,e){var n=this.GetMpKey(t);this.CandidatesRedditVideoData[n]||(this.CandidatesRedditVideoData[n]=new Array),this.CandidatesRedditVideoData[n].push(e)}},{key:"AddCandidatesPinterestVideoData",value:function AddCandidatesPinterestVideoData(t,e){var n=this.GetMpKey(t);this.CandidatesPinterestVideoData[n]||(this.CandidatesPinterestVideoData[n]=new Array),this.CandidatesPinterestVideoData[n].push(e)}},{key:"AddCandidatesInstagramVideoData",value:function AddCandidatesInstagramVideoData(t,e){var n=this.GetMpKey(t);this.CandidatesInstagramVideoData[n]||(this.CandidatesInstagramVideoData[n]=new Array),this.CandidatesInstagramVideoData[n].push(e)}},{key:"AddCandidatesInstagramStoryData",value:function AddCandidatesInstagramStoryData(t,e){var n=this.GetMpKey(t);this.CandidatesInstagramStoryData[n]||(this.CandidatesInstagramStoryData[n]=new Array),this.CandidatesInstagramStoryData[n].push(e)}},{key:"AddCandidatesInstagramStoryTargetUrlsSent",value:function AddCandidatesInstagramStoryTargetUrlsSent(t,e){var n=this.GetMpKey(t);this.CandidatesInstagramStoryTargetUrlSent[n]||(this.CandidatesInstagramStoryTargetUrlSent[n]=new Array),this.CandidatesInstagramStoryTargetUrlSent[n].push(e)}},{key:"AddCandidatesRedditRightColumnData",value:function AddCandidatesRedditRightColumnData(t,e){var n=this.GetMpKey(t);this.CandidatesRedditRightColumnData[n]||(this.CandidatesRedditRightColumnData[n]=new Array),this.CandidatesRedditRightColumnData[n].push(e)}},{key:"AddCandidatesDataFacebook",value:function AddCandidatesDataFacebook(t,e){var n=this.GetMpKey(t);this.CandidatesDataFacebook[n]||(this.CandidatesDataFacebook[n]=new Array);for(var a=0;a<e.length;a++)this.CandidatesDataFacebook[n].push(e[a])}},{key:"AddCandidatesDataTwitter",value:function AddCandidatesDataTwitter(t,e){var n=this.GetMpKey(t);this.CandidatesDataTwitter[n]||(this.CandidatesDataTwitter[n]=new Array);for(var a=0;a<e.length;a++)this.CandidatesDataTwitter[n].push(e[a])}},{key:"AddCandidatesDataReddit",value:function AddCandidatesDataReddit(t,e){var n=this.GetMpKey(t);this.CandidatesDataReddit[n]||(this.CandidatesDataReddit[n]=new Array);for(var a=0;a<e.length;a++)this.CandidatesDataReddit[n].push(e[a])}},{key:"AddCandidatesDataInstagram",value:function AddCandidatesDataInstagram(t,e){var n=this.GetMpKey(t);this.CandidatesDataInstagram[n]||(this.CandidatesDataInstagram[n]=new Array);for(var a=0;a<e.length;a++)this.CandidatesDataInstagram[n].push(e[a])}},{key:"AddCandidatesDataPinterest",value:function AddCandidatesDataPinterest(t,e){var n=this.GetMpKey(t);this.CandidatesDataPinterest[n]||(this.CandidatesDataPinterest[n]=new Array),this.PinterestUniqueContentIdSent[n]||(this.PinterestUniqueContentIdSent[n]=[]);for(var a=0;a<e.length;a++){var i=e[a].uniqueContentId;i&&this.PinterestUniqueContentIdSent[n]&&!this.PinterestUniqueContentIdSent[n].includes(i)&&(this.AddUniqueContentIdPinterest(t,i),this.CandidatesDataPinterest[n].push(e[a]),this.AddCandidatePlacementsPinterest(t,1))}}},{key:"AddFacebookAboutSectionContent",value:function AddFacebookAboutSectionContent(t,e){var n=this.GetMpKey(t);this.FacebookAboutSectionContent[n]||(this.FacebookAboutSectionContent[n]=new Array);for(var a=0;a<e.length;a++)this.FacebookAboutSectionContent[n].push(e[a])}},{key:"AddCandidatePlacementsFacebook",value:function AddCandidatePlacementsFacebook(t,e){var n=this.GetMpKey(t);this.FacebookCandidatePlacements[n]||(this.FacebookCandidatePlacements[n]=0),this.FacebookCandidatePlacements[n]=this.FacebookCandidatePlacements[n]+e}},{key:"AddCandidatePlacementsTwitter",value:function AddCandidatePlacementsTwitter(t,e){var n=this.GetMpKey(t);this.TwitterCandidatePlacements[n]||(this.TwitterCandidatePlacements[n]=0),this.TwitterCandidatePlacements[n]=this.TwitterCandidatePlacements[n]+e}},{key:"AddCandidatePlacementsReddit",value:function AddCandidatePlacementsReddit(t,e){var n=this.GetMpKey(t);this.RedditCandidatePlacements[n]||(this.RedditCandidatePlacements[n]=0),this.RedditCandidatePlacements[n]=this.RedditCandidatePlacements[n]+e}},{key:"AddCandidatePlacementsPinterest",value:function AddCandidatePlacementsPinterest(t,e){var n=this.GetMpKey(t);this.PinterestCandidatePlacements[n]||(this.PinterestCandidatePlacements[n]=0),this.PinterestCandidatePlacements[n]=this.PinterestCandidatePlacements[n]+e}},{key:"AddCandidatePlacementsHtml5",value:function AddCandidatePlacementsHtml5(t,e){var n=this.GetMpKey(t);this.Html5CandidatePlacements[n]||(this.Html5CandidatePlacements[n]=0),this.Html5CandidatePlacements[n]=this.Html5CandidatePlacements[n]+e}},{key:"AddCandidatePlacementsTiktok",value:function AddCandidatePlacementsTiktok(t,e){var n=this.GetMpKey(t);this.TiktokCandidatePlacements[n]||(this.TiktokCandidatePlacements[n]=0),this.TiktokCandidatePlacements[n]=this.TiktokCandidatePlacements[n]+e}},{key:"AddCandidatePlacementsInstagram",value:function AddCandidatePlacementsInstagram(t,e){var n=this.GetMpKey(t);this.InstagramCandidatePlacements[n]||(this.InstagramCandidatePlacements[n]=0),this.InstagramCandidatePlacements[n]=this.InstagramCandidatePlacements[n]+e}},{key:"AddInvalidChainCompletedContent",value:function AddInvalidChainCompletedContent(t,e){var n=this.GetMpKey(t);this.InvalidChainCompletedContent[n]||(this.InvalidChainCompletedContent[n]=new Array),this.InvalidChainCompletedContent[n].push(e)}},{key:"AddChainSegmentContent",value:function AddChainSegmentContent(t,e){if(e&&e.headerInfo){var n=this.GetMpKey(t);this.ChainSegmentContent[n]||(this.ChainSegmentContent[n]=new Array),this.ChainSegmentContent[n].push(e)}}},{key:"AddFrameWithInputs",value:function AddFrameWithInputs(t,e){var n=this.GetMpKey(t);this.FramesWithInputs[n]||(this.FramesWithInputs[n]=new Array),this.FramesWithInputs[n].push(e)}},{key:"AddFrameWithRedirects",value:function AddFrameWithRedirects(t,e){var n=this.GetMpKey(t);this.FramesWithRedirects[n]||(this.FramesWithRedirects[n]=new Array),this.FramesWithRedirects[n].push(e)}},{key:"AddVideoHar",value:function AddVideoHar(t,e){var n=this.GetMpKey(t);this.VideoHars[n]||(this.VideoHars[n]=new Array),this.VideoHars[n].push(e)}},{key:"AddUniqueContentIdPinterest",value:function AddUniqueContentIdPinterest(t,e){var n=this.GetMpKey(t);try{if(!this.CandidatesDataPinterest[n])return;e&&e.length&&!this.PinterestUniqueContentIdSent[n].includes(e)&&this.PinterestUniqueContentIdSent[n].push(e)}catch(t){}}},{key:"GetCandidatePlacementsHtml5",value:function GetCandidatePlacementsHtml5(t){var e=this.GetMpKey(t);return this.Html5CandidatePlacements[e]?this.Html5CandidatePlacements[e]:0}},{key:"GetCandidatePlacementsTiktok",value:function GetCandidatePlacementsTiktok(t){var e=this.GetMpKey(t);return this.TiktokCandidatePlacements[e]?this.TiktokCandidatePlacements[e]:0}},{key:"GetCandidatePlacementsInstagram",value:function GetCandidatePlacementsInstagram(t){var e=this.GetMpKey(t);return this.InstagramCandidatePlacements[e]?this.InstagramCandidatePlacements[e]:0}},{key:"GetCandidatePlacementsFacebook",value:function GetCandidatePlacementsFacebook(t){var e=this.GetMpKey(t);return this.FacebookCandidatePlacements[e]?this.FacebookCandidatePlacements[e]:0}},{key:"GetCandidatePlacementsTwitter",value:function GetCandidatePlacementsTwitter(t){var e=this.GetMpKey(t);return this.TwitterCandidatePlacements[e]?this.TwitterCandidatePlacements[e]>this.maxAmountTwitterCandidates?this.maxAmountTwitterCandidates:this.TwitterCandidatePlacements[e]:0}},{key:"GetCandidatePlacementsReddit",value:function GetCandidatePlacementsReddit(t){var e=this.GetMpKey(t);return this.RedditCandidatePlacements[e]?this.RedditCandidatePlacements[e]:0}},{key:"GetCandidatePlacementsPinterest",value:function GetCandidatePlacementsPinterest(t){var e=this.GetMpKey(t);return this.PinterestCandidatePlacements[e]?this.PinterestCandidatePlacements[e]:0}},{key:"GetVideoHars",value:function GetVideoHars(t){var e=this.GetMpKey(t);return this.VideoHars[e]?this.VideoHars[e]:[]}},{key:"GetInvalidChainCompletedContent",value:function GetInvalidChainCompletedContent(t){var e=this.GetMpKey(t);return this.InvalidChainCompletedContent[e]?this.InvalidChainCompletedContent[e]:[]}},{key:"GetCandidatesDataBanners",value:function GetCandidatesDataBanners(t){var e=this.GetMpKey(t);return this.CandidatesDataBanners[e]?this.CandidatesDataBanners[e]:[]}},{key:"GetCandidatesDataFacebook",value:function GetCandidatesDataFacebook(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesDataFacebook[n]&&(e=this.CandidatesDataFacebook[n])}catch(t){}return e}},{key:"GetCandidatesDataTwitter",value:function GetCandidatesDataTwitter(t,e){var n=[];try{var a=this.GetMpKey(t);this.CandidatesDataTwitter[a]&&(n=this.CandidatesDataTwitter[a].length<=this.maxAmountTwitterCandidates||e?this.CandidatesDataTwitter[a]:this.CandidatesDataTwitter[a].slice(0,this.maxAmountTwitterCandidates))}catch(t){}return n}},{key:"GetCandidatesDataReddit",value:function GetCandidatesDataReddit(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesDataReddit[n]&&(e=this.CandidatesDataReddit[n])}catch(t){}return e}},{key:"GetCandidatesDataPinterest",value:function GetCandidatesDataPinterest(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesDataPinterest[n]&&(e=this.CandidatesDataPinterest[n])}catch(t){}return e}},{key:"GetCandidatesDataInstagram",value:function GetCandidatesDataInstagram(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesDataInstagram[n]&&(e=this.CandidatesDataInstagram[n])}catch(t){}return e}},{key:"GetCandidatesFacebookVideoData",value:function GetCandidatesFacebookVideoData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesFacebookVideoData[n]&&(e=this.CandidatesFacebookVideoData[n])}catch(t){}return e}},{key:"GetCandidatesTwitterVideoData",value:function GetCandidatesTwitterVideoData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesTwitterVideoData[n]&&(e=this.CandidatesTwitterVideoData[n])}catch(t){}return e}},{key:"GetCandidatesRedditVideoData",value:function GetCandidatesRedditVideoData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesRedditVideoData[n]&&(e=this.CandidatesRedditVideoData[n])}catch(t){}return e}},{key:"GetCandidatesRedditRightColumnData",value:function GetCandidatesRedditRightColumnData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesRedditRightColumnData[n]&&(e=this.CandidatesRedditRightColumnData[n])}catch(t){}return e}},{key:"GetCandidatesPinterestVideoData",value:function GetCandidatesPinterestVideoData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesPinterestVideoData[n]&&(e=this.CandidatesPinterestVideoData[n])}catch(t){}return e}},{key:"GetCandidatesInstagramVideoData",value:function GetCandidatesInstagramVideoData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesInstagramVideoData[n]&&(e=this.CandidatesInstagramVideoData[n])}catch(t){}return e}},{key:"GetCandidatesInstagramStoryData",value:function GetCandidatesInstagramStoryData(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesInstagramStoryData[n]&&(e=this.CandidatesInstagramStoryData[n])}catch(t){}return e}},{key:"GetCandidatesInstagramStoryTargetUrlSent",value:function GetCandidatesInstagramStoryTargetUrlSent(t){var e=[];try{var n=this.GetMpKey(t);this.CandidatesInstagramStoryTargetUrlSent[n]&&(e=this.CandidatesInstagramStoryTargetUrlSent[n])}catch(t){}return e}},{key:"RemovePinterestSentVideoData",value:function RemovePinterestSentVideoData(t,e){try{var n=this.GetMpKey(t);if(this.CandidatesPinterestVideoData[n]&&this.CandidatesPinterestVideoData[n].includes(e)){var a=this.CandidatesPinterestVideoData[n].indexOf(e);this.CandidatesPinterestVideoData[n].splice(a,1)}}catch(t){}}},{key:"RemoveInstagramSentVideoData",value:function RemoveInstagramSentVideoData(t,e){try{var n=this.GetMpKey(t);if(this.CandidatesInstagramVideoData[n]&&this.CandidatesInstagramVideoData[n].includes(e)){var a=this.CandidatesInstagramVideoData[n].indexOf(e);this.CandidatesInstagramVideoData[n].splice(a,1)}}catch(t){}}},{key:"RemoveInstagramSentStoryData",value:function RemoveInstagramSentStoryData(t,e){try{var n=this.GetMpKey(t);if(this.CandidatesInstagramStoryData[n]&&this.CandidatesInstagramStoryData[n].includes(e)){var a=this.CandidatesInstagramStoryData[n].indexOf(e);this.AddCandidatesInstagramStoryTargetUrlsSent(t,targetUrl),this.CandidatesInstagramStoryData[n].splice(a,1)}}catch(t){}}},{key:"GetFacebookAboutSectionContent",value:function GetFacebookAboutSectionContent(t){var e=this.GetMpKey(t);return this.FacebookAboutSectionContent[e]?this.FacebookAboutSectionContent[e]:[]}},{key:"GetCandidatesDataSkinAds",value:function GetCandidatesDataSkinAds(t){var e=this.GetMpKey(t);return this.CandidatesDataSkinAds[e]?this.CandidatesDataSkinAds[e]:[]}},{key:"IsChainFramesHaveInputs",value:function IsChainFramesHaveInputs(t,e){var n=!1,a=this.GetMpKey(t);if(this.FramesWithInputs[a]&&this.FramesWithInputs[a].length&&e&&e.length)for(var i=0;i<e.length&&!n;i++)this.FramesWithInputs[a].includes(e[i])&&(n=!0);return n}},{key:"IsChainFramesHaveRedirects",value:function IsChainFramesHaveRedirects(t,e){var n=!1,a=this.GetMpKey(t);if(this.FramesWithRedirects[a]&&this.FramesWithRedirects[a].length&&e&&e.length)for(var i=0;i<e.length&&!n;i++)this.FramesWithRedirects[a].includes(e[i])&&(n=!0);return n}},{key:"GetChainBuildingInitInfo",value:function GetChainBuildingInitInfo(t){var e=this.GetMpKey(t),n=[],a=0;if(this.ChainSegmentContent&&this.ChainSegmentContent[e]&&this.ChainSegmentContent[e].length)for(var i=0;i<this.ChainSegmentContent[e].length;i++){var r="chainId_".concat(this.ChainSegmentContent[e][i].headerInfo.chainId);"object"!==_typeof(n[r])&&(a+=1,n[r]={chainId:this.ChainSegmentContent[e][i].headerInfo.chainId,validSegmentsAmount:0,validSegmentsId:[],invalidSegmentsAmount:0}),this.ChainSegmentContent[e][i].isValid?(n[r].validSegmentsAmount=n[r].validSegmentsAmount+1,n[r].validSegmentsId.push(this.ChainSegmentContent[e][i].browserFrameId)):n[r].invalidSegmentsAmount=n[r].invalidSegmentsAmount+1}return{buildingInit:n,chainsAmount:a}}},{key:"GetAllSegmentsForChain",value:function GetAllSegmentsForChain(t,e){var n=[];try{for(var a=this.GetMpKey(t),i=0;i<this.ChainSegmentContent[a].length;i++)this.ChainSegmentContent[a][i].headerInfo.chainId===e&&n.push(this.ChainSegmentContent[a][i])}catch(t){}return n}},{key:"HaveDataForTab",value:function HaveDataForTab(t){var e=this.GetMpKey(t);return!!(this.CandidatesDataSkinAds[e]&&this.CandidatesDataSkinAds[e].length||this.CandidatesDataBanners[e]&&this.CandidatesDataBanners[e].length||this.CandidatesDataFacebook[e]&&this.CandidatesDataFacebook[e].length||this.CandidatesDataTwitter[e]&&this.CandidatesDataTwitter[e].length||this.CandidatesDataReddit[e]&&this.CandidatesDataReddit[e].length||this.CandidatesDataPinterest[e]&&this.CandidatesDataPinterest[e].length||this.VideoHars[e]&&this.VideoHars[e].length||this.InvalidChainCompletedContent[e]&&this.InvalidChainCompletedContent[e].length||this.ChainSegmentContent[e]&&this.ChainSegmentContent[e].length||this.Html5CandidatePlacements[e]&&this.Html5CandidatePlacements[e]>0||this.FacebookCandidatePlacements[e]&&this.FacebookCandidatePlacements[e]>0||this.TwitterCandidatePlacements[e]&&this.TwitterCandidatePlacements[e]>0||this.RedditCandidatePlacements[e]&&this.RedditCandidatePlacements[e]>0||this.CandidatesFacebookVideoData[e]&&this.CandidatesFacebookVideoData[e].length||this.CandidatesTwitterVideoData[e]&&this.CandidatesTwitterVideoData[e].length||this.CandidatesInstagramStoryData[e]&&this.CandidatesInstagramStoryData[e].length||this.CandidatesPinterestVideoData[e]&&this.CandidatesPinterestVideoData[e].length)}},{key:"RemoveOldFacebookVideoData",value:function RemoveOldFacebookVideoData(t,e){try{var n=this.GetMpKey(t);if(this.CandidatesFacebookVideoData[n]&&this.CandidatesFacebookVideoData[n].length){for(var a=Date.now()/1e3|0,i=[],r=0;r<this.CandidatesFacebookVideoData[n].length;r++)e.includes(this.CandidatesFacebookVideoData[n][r].videoId)||a-this.CandidatesFacebookVideoData[n][r].detectionTime>=300||i.push(this.CandidatesFacebookVideoData[n][r]);this.CandidatesFacebookVideoData[n]=i}}catch(t){}}},{key:"RemoveOldTwitterVideoData",value:function RemoveOldTwitterVideoData(t,e){try{var n=this.GetMpKey(t);if(this.CandidatesTwitterVideoData[n]&&this.CandidatesTwitterVideoData[n].length){for(var a=Date.now()/1e3|0,i=[],r=0;r<this.CandidatesTwitterVideoData[n].length;r++)e.includes(this.CandidatesTwitterVideoData[n][r].tweets.id)||a-this.CandidatesTwitterVideoData[n][r].detectionTime>=300||i.push(this.CandidatesTwitterVideoData[n][r]);this.CandidatesTwitterVideoData[n]=i}}catch(t){}}},{key:"RemoveIframeContentFromTabId",value:function RemoveIframeContentFromTabId(t,e){var n=this.GetMpKey(t);this.CandidatesDataSkinAds[n]&&(this.CandidatesDataSkinAds[n]=null),this.CandidatesDataBanners[n]&&(this.CandidatesDataBanners[n]=null),this.CandidatesDataFacebook[n]&&(this.CandidatesDataFacebook[n]=null),this.CandidatesDataTwitter[n]&&(this.CandidatesDataTwitter[n].length>this.maxAmountTwitterCandidates&&!e?this.CandidatesDataTwitter[n]=this.CandidatesDataTwitter[n].slice(this.maxAmountTwitterCandidates,this.CandidatesDataTwitter[n].length):this.CandidatesDataTwitter[n]=null),this.CandidatesDataReddit[n]&&(this.CandidatesDataReddit[n]=null),this.RedditCandidatePlacements[n]&&(this.RedditCandidatePlacements[n]=0),this.Html5CandidatePlacements[n]&&(this.Html5CandidatePlacements[n]=0),this.FacebookCandidatePlacements[n]&&(this.FacebookCandidatePlacements[n]=0),this.TwitterCandidatePlacements[n]&&(this.CandidatesDataTwitter[n]&&this.CandidatesDataTwitter[n].length>this.maxAmountTwitterCandidates?this.TwitterCandidatePlacements[n]=this.TwitterCandidatePlacements[n]-this.maxAmountTwitterCandidates:this.TwitterCandidatePlacements[n]=0),this.CandidatesDataPinterest[n]&&(this.CandidatesDataPinterest[n]=null),this.PinterestCandidatePlacements[n]&&(this.PinterestCandidatePlacements[n]=0),this.CandidatesDataInstagram[n]&&(this.CandidatesDataInstagram[n]=null),this.InstagramCandidatePlacements[n]&&(this.InstagramCandidatePlacements[n]=0),this.CandidatesInstagramStoryTargetUrlSent[n]&&(this.CandidatesInstagramStoryTargetUrlSent[n]=null),this.FacebookAboutSectionContent[n]&&(this.FacebookAboutSectionContent[n]=null),this.ChainSegmentContent[n]&&(this.ChainSegmentContent[n]=null),this.InvalidChainCompletedContent[n]&&(this.InvalidChainCompletedContent[n]=null),this.FramesWithInputs[n]&&(this.FramesWithInputs[n]=null),this.FramesWithRedirects[n]&&(this.FramesWithRedirects[n]=null),this.VideoHars[n]&&(this.VideoHars[n]=null),this.TiktokCandidatePlacements[n]&&(this.TiktokCandidatePlacements[n]=0),this.CandidatesFacebookVideoData[n]&&(e?this.CandidatesFacebookVideoData[n]=null:this.RemoveOldFacebookVideoData(t,[])),this.CandidatesTwitterVideoData[n]&&(e&&this.CandidatesTwitterVideoData[n].length>this.maxAmountTwitterVideoDatas||this.CandidatesTwitterVideoData[n].length>this.maxAmountTwitterVideoDatas)&&(this.CandidatesTwitterVideoData[n]=null)}},{key:"SetMaxAmountTwitterCandidates",value:function SetMaxAmountTwitterCandidates(t){this.maxAmountTwitterCandidates=t.MAX_CANDIDATES_TO_SEND}},{key:"SetMaxAmountTwitterVideoDatas",value:function SetMaxAmountTwitterVideoDatas(t){this.maxAmountTwitterVideoDatas=t.MAX_VIDEO_DATA_KEEP_IN_STORAGE}}]),PosdContentStorage}();t.exports=a},3002:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=function(){function PosdDataCollectionManager(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdDataCollectionManager),this._has("posdDataCollection")||(a.CONFIG_DATA_COLLECTION_ENABLED?this.Enable():this.Disable())}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdDataCollectionManager,[{key:"Enable",value:function Enable(){return localStorage.setItem("posdDataCollection","on"),chrome.storage.local.set({posdDataCollection:"on"}),!0}},{key:"Disable",value:function Disable(){return localStorage.setItem("posdDataCollection","off"),chrome.storage.local.set({posdDataCollection:"off"}),!1}},{key:"IsEnabled",value:function IsEnabled(){return"on"===this._get("posdDataCollection")}},{key:"IsDisabled",value:function IsDisabled(){return"off"===this._get("posdDataCollection")}},{key:"_has",value:function _has(t){return!!localStorage.getItem(t)}},{key:"_get",value:function _get(t){return localStorage.getItem(t)}}]),PosdDataCollectionManager}();t.exports=i},8501:(t,e,n)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _get(t,e,n){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,e,n){var a=function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}},_get(t,e,n||t)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var a=n(1083),i=n(3124),r=function(t){function PosdDomainExcludeManager(){return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdDomainExcludeManager),_possibleConstructorReturn(this,_getPrototypeOf(PosdDomainExcludeManager).call(this,i.EXCLUDE_DOMAINS_LIST()))}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(PosdDomainExcludeManager,t),function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdDomainExcludeManager,[{key:"AddItem",value:function AddItem(t){if(!/^https?:\/\/(?=.{1,254}(?::|$))(?:(?!\d|-)(?![a-z0-9\-]{1,62}-(?:\.|:|$))[a-z0-9\-]{1,63}\b(?!\.$)\.?)+(:\d+)?$/i.test(t))throw new Error("Domain is not valid");return _get(_getPrototypeOf(PosdDomainExcludeManager.prototype),"AddItem",this).call(this,t)}}]),PosdDomainExcludeManager}(a);t.exports=r},8950:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(1850),r=n(3124),o=function(){function PosdIframesChain(t,e,n,a,i,o,s){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdIframesChain),this.id=t,this.tabId=e,this.chainInfo=n,this.fullIdStr="tabId:".concat(e,"-chainId:").concat(n.chainId),this.init=!1,this.ContentStorage=a,this.onChainBuilt=s,this.html5Candidate={},this.targetUrls=[],this.buildingTimeoutId=null,this.status=r.IFRAMES_CHAIN_BUILDING_STATUS_NONE,this.extractionStatus=PosdIframesChain.GetEmptyExtractionStatus(),this.chainInfo&&this.ContentStorage&&(this.init=!0,this.status=r.IFRAMES_CHAIN_BUILDING_STATUS_INITED,setTimeout(this.ActivateBuilding.bind(this),i),this.buildingTimeoutId=setTimeout(this.FinishBuilding.bind(this),o))}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdIframesChain,[{key:"ActivateBuilding",value:function ActivateBuilding(){this.init&&this.BuildChain()}},{key:"BuildChain",value:function BuildChain(){this.status=r.IFRAMES_CHAIN_BUILDING_STATUS_STARTED,this.html5Candidate={chainId:this.chainInfo.chainId,topFrameHeader:"",frames:[],targetUrl:[]};var t=this.ContentStorage.GetAllSegmentsForChain(this.tabId,this.chainInfo.chainId);if(t.length)for(var e=0;e<t.length;e++)0===t[e].headerInfo.depth&&t[e].headerInfo.topHeaderContent&&(this.html5Candidate.topFrameHeader=t[e].headerInfo.topHeaderContent),this.html5Candidate.frames.push({contentFinal:t[e].contentFinal,depth:t[e].headerInfo.depth,bisId:t[e].headerInfo.bisId,childsBisId:[],parentBisId:"",id:t[e].headerInfo.frameId,src:t[e].headerInfo.src,size:t[e].headerInfo.size}),this.targetUrls=this.targetUrls.concat(t[e].targetUrl),t[e].browserFrameId&&Number.isInteger(t[e].browserFrameId)&&!this.chainInfo.chainFramesList.includes(t[e].browserFrameId)&&this.chainInfo.chainFramesList.push(t[e].browserFrameId);if(this.ContentStorage.IsChainFramesHaveInputs(this.tabId,this.chainInfo.chainFramesList))this.extractionStatus.filteredOut=!0,this.FinishBuilding(!1);else if(this.targetUrls.length&&(this.extractionStatus.targetUrlExtracted=!0),t.length>=this.chainInfo.chainFramesList.length&&(this.extractionStatus.fullContentExtracted=!0),this.extractionStatus.targetUrlExtracted)this.FinishBuilding(!1);else{var n=!0;a.CONFIG_TARGET_URL_BY_CLICK_AVAILABLE&&this.html5Candidate.frames.length&&this.chainInfo.chainFramesList.length&&(this.ContentStorage.IsChainFramesHaveRedirects(this.tabId,this.chainInfo.chainFramesList)||(n=!1,this.ActivateTargetUrlByClickDetection())),n&&this.FinishBuilding(!1)}}},{key:"ActivateTargetUrlByClickDetection",value:function ActivateTargetUrlByClickDetection(){this.status=r.IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED;for(var t=[],e=0;e<this.html5Candidate.frames.length;e++)t.push(this.html5Candidate.frames[e].bisId);var n=i.EmptyMessage;n.type=r.MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK,n.multiTo=t,n.content={chainId:this.html5Candidate.chainId},chrome.tabs.sendMessage(this.tabId,n)}},{key:"AddDetectedTargetUrlByClick",value:function AddDetectedTargetUrlByClick(t,e){this.status===r.IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED&&e&&e.length&&(this.targetUrls=this.targetUrls.concat(e),this.status=r.IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED,this.FinishBuilding(!1))}},{key:"FinishBuilding",value:function FinishBuilding(t){this.status!==r.IFRAMES_CHAIN_BUILDING_STATUS_FINISHED&&(this.status=r.IFRAMES_CHAIN_BUILDING_STATUS_FINISHED,this.buildingTimeoutId&&(clearTimeout(this.buildingTimeoutId),this.buildingTimeoutId=null),this.html5Candidate.targetUrl=PosdIframesChain.GetSortedTargetUrls(this.targetUrls),this.html5Candidate.targetUrl.length&&(this.extractionStatus.targetUrlExtracted=!0),!t&&this.onChainBuilt&&this.onChainBuilt(this.chainInfo.chainId))}},{key:"TerminateBuilding",value:function TerminateBuilding(){this.status!==r.IFRAMES_CHAIN_BUILDING_STATUS_FINISHED&&this.FinishBuilding(!0)}},{key:"GetExtractionStatus",value:function GetExtractionStatus(){return{chainId:this.chainInfo.chainId,extractionStatus:this.extractionStatus}}},{key:"GetChainId",value:function GetChainId(){return this.chainInfo.chainId}},{key:"GetStatus",value:function GetStatus(){return this.status}},{key:"GetHTML5Candidate",value:function GetHTML5Candidate(){return this.html5Candidate}},{key:"ClearChain",value:function ClearChain(){this.initInfo=null,this.html5Candidate=null}}],[{key:"GetEmptyExtractionStatus",value:function GetEmptyExtractionStatus(){return{filteredOut:!1,fullContentExtracted:!1,targetUrlExtracted:!1,sentToBackend:!1}}},{key:"GetSortedTargetUrls",value:function GetSortedTargetUrls(t){var e=[];try{if(t&&t.length){t.sort((function(t,e){return e.square-t.square}));for(var n=0;n<t.length;n++)e.includes(t[n].href)||e.push(t[n].href)}}catch(t){}return e}},{key:"GetHtml5CandidateFromComletedInvalidChain",value:function GetHtml5CandidateFromComletedInvalidChain(t){return{chainId:t.headerInfo.chainId,topFrameHeader:t.headerInfo.topHeaderContent,frames:[{contentFinal:t.contentFinal,depth:t.headerInfo.depth,bisId:t.headerInfo.bisId,childsBisId:[],parentBisId:"",id:t.headerInfo.frameId,src:t.headerInfo.src,size:t.headerInfo.size}],targetUrl:PosdIframesChain.GetSortedTargetUrls(t.targetUrl)}}}]),PosdIframesChain}();t.exports=o},6523:(t,e,n)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _get(t,e,n){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(t,e,n){var a=function _superPropBase(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_getPrototypeOf(t)););return t}(t,e);if(a){var i=Object.getOwnPropertyDescriptor(a,e);return i.get?i.get.call(n):i.value}},_get(t,e,n||t)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function _setPrototypeOf(t,e){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t},_setPrototypeOf(t,e)}var a=n(1083),i=n(3124),r=function(t){function PosdPageExcludeManager(){return function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdPageExcludeManager),_possibleConstructorReturn(this,_getPrototypeOf(PosdPageExcludeManager).call(this,i.EXCLUDE_PAGES_LIST()))}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(PosdPageExcludeManager,t),function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdPageExcludeManager,[{key:"AddItem",value:function AddItem(t){if(!/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(t))throw new Error("Url is not valid");return _get(_getPrototypeOf(PosdPageExcludeManager.prototype),"AddItem",this).call(this,t)}}]),PosdPageExcludeManager}(a);t.exports=r},5978:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(8962),i=n(6864),r=function(){function PosdPanalyticsId(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdPanalyticsId),this.id=t,this.panalyticsId="",this.onGotId=null,this.PanalyticsUtility=new i({host:a.CONFIG_UTILITY_HOST,logging:!0})}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdPanalyticsId,[{key:"GetId",value:function GetId(t){var e=this;this.onGotId=t,this.PanalyticsUtility.getKey((function(t){t.length&&(e.panalyticsId=t,e.onGotId&&e.onGotId(e.panalyticsId))}),!0)}},{key:"ID",get:function get(){return this.panalyticsId}}]),PosdPanalyticsId}();t.exports=r},1083:t=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var e=function(){function PosdStorageList(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdStorageList),this._key=t}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdStorageList,[{key:"GetList",value:function GetList(){if(this.HasList()){var t=localStorage.getItem(this._key);return JSON.parse(t)}return[]}},{key:"RemoveList",value:function RemoveList(){localStorage.removeItem(this._key),chrome.storage.local.remove([this._key])}},{key:"HasList",value:function HasList(){return!!localStorage.getItem(this._key)}},{key:"SetItems",value:function SetItems(t){localStorage.setItem(this._key,JSON.stringify(t));var e={};e[this._key]=JSON.stringify(t),chrome.storage.local.set(e)}},{key:"AddItem",value:function AddItem(t){if(""===t.trim())throw new Error("Item's name is empty");var e=this.GetList();if(-1!==e.indexOf(t))throw new Error('Item "'.concat(t,'" is already exist'));e.push(t),this.SetItems(e)}},{key:"RemoveItem",value:function RemoveItem(t){var e=this.GetList(),n=e.indexOf(t);-1!==n&&(e.splice(n,1),this.SetItems(e))}},{key:"HasItem",value:function HasItem(t){return-1!==this.GetList().indexOf(t)}}]),PosdStorageList}();t.exports=e},5734:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(1225),i=n(3124),r=n(1850),o=function(){function PosdTabsManager(t){var e=this;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdTabsManager),this.id=t,this.initedTabs=[],this.onActivatedHandlers=[],this.onRemovedHandlers=[],this.onUpdatedHandlers=[],this.onUpdated(this.PageUrlChangeWatcher.bind(this)),chrome.tabs.onActivated.addListener((function(t){var n=!0,a=!1,i=void 0;try{for(var r,o=e.onActivatedHandlers[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){(0,r.value)(t)}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}})),chrome.tabs.onRemoved.addListener((function(t,n){var a=!0,i=!1,r=void 0;try{for(var o,s=e.onRemovedHandlers[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){(0,o.value)(t,n)}}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}})),chrome.tabs.onUpdated.addListener((function(t,n,a){var i=!0,r=!1,o=void 0;try{for(var s,d=e.onUpdatedHandlers[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){(0,s.value)(t,n,a)}}catch(t){r=!0,o=t}finally{try{i||null==d.return||d.return()}finally{if(r)throw o}}}))}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdTabsManager,[{key:"onActivated",value:function onActivated(t){this.onActivatedHandlers.push(t)}},{key:"onRemoved",value:function onRemoved(t){this.onRemovedHandlers.push(t)}},{key:"onUpdated",value:function onUpdated(t){this.onUpdatedHandlers.push(t)}},{key:"SetInitedTab",value:function SetInitedTab(t,e){e.tabId=t,this.initedTabs[a.GetTabIdKey(t)]=e}},{key:"PageUrlChangeWatcher",value:function PageUrlChangeWatcher(t,e,n){if(e&&e.url){var o=a.GetTabIdKey(t);if(void 0!==this.initedTabs[o]&&this.initedTabs[o].url&&this.initedTabs[o].url!==e.url){var s=r.EmptyMessage;s.type=i.MESSAGE_TYPE_TAB_URL_CHANGED,s.to=a.GetMainPageId(t),s.content={newUrl:e.url,initedTicketId:this.initedTabs[o].ticketId},chrome.tabs.sendMessage(t,s)}}}},{key:"GetAllTabs",value:function GetAllTabs(t){chrome.tabs.query({currentWindow:!0},(function(e){t&&t(e)}))}}]),PosdTabsManager}();t.exports=o},1234:(t,e,n)=>{"use strict";function _slicedToArray(t,e){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return n}(t,e)||function _unsupportedIterableToArray(t,e){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(t,e)}(t,e)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function asyncGeneratorStep(t,e,n,a,i,r,o){try{var s=t[r](o),d=s.value}catch(t){return void n(t)}s.done?e(d):Promise.resolve(d).then(a,i)}function _asyncToGenerator(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var r=t.apply(e,n);function _next(t){asyncGeneratorStep(r,a,i,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(r,a,i,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _asyncIterator(t){var e;if("undefined"!=typeof Symbol){if(Symbol.asyncIterator&&null!=(e=t[Symbol.asyncIterator]))return e.call(t);if(Symbol.iterator&&null!=(e=t[Symbol.iterator]))return e.call(t)}throw new TypeError("Object is not async iterable")}var a=n(1225),i=n(4019),r=n(8962),o=n(3124),s=n(1850),d=n(8950),u=n(7833),c=function(){function PosdTicket(t,e,n,a,i,r){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdTicket),this.panalyticsId=t,this.tabId=e,this.lastTicketDataSendTimestamp=a,this.ConfigManager=r,this.ContentStorage=i,this.rawTicket=JSON.parse(n),this.html5AdsPrebuildInfo=[],this.webNavigationIframes=[],this.webNavigationChainsList=[],this.fullIframesList=[],this.onTicketBuiltCallback=null,this.timeoutMaxBuilding=null,this.timeoutDeepTargetUrlDetection=null,this.status=o.TICKET_BUILDING_STATUS_INIT,this.chainBuildingInitInfo=[],this.chains=[],this.successfullyBuidChainIds=[],this.chainsWithoutTargetUrl=[],this.finalOutTicket={ticketId:"",data:""},this.GetHtml5AdsPrebuildInfo(),this.textStorage=[],this.isFacebookTicketReady=!1,this.isTwitterTicketReady=!1,this.isRedditTicketReady=!1,this.ContentStorage.SetMaxAmountTwitterVideoDatas(this.ConfigManager.GetTwitterConfig())}var t,e,n,c;return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdTicket,[{key:"GetHtml5AdsPrebuildInfo",value:function GetHtml5AdsPrebuildInfo(){if(this.rawTicket&&this.rawTicket.adCandidatesHtml5&&this.rawTicket.adCandidatesHtml5.length){for(var t=0;t<this.rawTicket.adCandidatesHtml5.length;t++)this.html5AdsPrebuildInfo.push(this.rawTicket.adCandidatesHtml5[t]);this.rawTicket.adCandidatesHtml5=[]}}},{key:"IsValid",value:function IsValid(){var t=!1;try{this.rawTicket&&this.rawTicket.ticketId&&this.rawTicket.ticketId.length&&this.rawTicket.url&&this.rawTicket.url.length&&(t=!0)}catch(t){}return t}},{key:"ActivateBuilding",value:function ActivateBuilding(t){this.onTicketBuiltCallback=t,this.finalOutTicket.ticketId=this.rawTicket.ticketId,this.ActivateHTML5CandidatesBuilding()?(this.status=o.TICKET_BUILDING_STATUS_STARTED,this.timeoutMaxBuilding=setTimeout(this.onMaxBuildingTimeout.bind(this),7e3)):this.GetWebNavigationIframes(this.TicketBuildingFinished.bind(this,!1))}},{key:"ActivateHTML5CandidatesBuilding",value:function ActivateHTML5CandidatesBuilding(){var t=this.ContentStorage.GetChainBuildingInitInfo(this.tabId);return this.chainBuildingInitInfo=t.buildingInit,!!t.chainsAmount&&(this.GetWebNavigationIframes(this.AcivateIframeChainsBuilding.bind(this)),!0)}},{key:"GetWebNavigationIframes",value:function GetWebNavigationIframes(t){var e=this;this.status=o.TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES,chrome.webNavigation.getAllFrames({tabId:this.tabId},(function(n){n&&(e.webNavigationIframes=n,e.webNavigationChainsList=u.GetWebNavigationChainsList(e.webNavigationIframes),e.status=o.TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES),t&&t()}))}},{key:"AcivateIframeChainsBuilding",value:function AcivateIframeChainsBuilding(){for(var t in this.successfullyBuidChainIds=[],this.chainBuildingInitInfo){var e=this.chainBuildingInitInfo[t];e.chainFramesList=this.FindChainFramesListForSegment(e.validSegmentsId),this.chains.push(new d(this.id,this.tabId,e,this.ContentStorage,this.GetChainStartBuildingTimeout(this.chainBuildingInitInfo[t].chainId),6e3,this.onIframeChainBuilt.bind(this)))}}},{key:"GetChainStartBuildingTimeout",value:function GetChainStartBuildingTimeout(t){var e=a.GetRandomIntInRange(500,1e3),n=!1;if(this.html5AdsPrebuildInfo)for(var i=0;i<this.html5AdsPrebuildInfo.length&&!n;i++)this.html5AdsPrebuildInfo[i].chainId===t&&(this.html5AdsPrebuildInfo[i].timeAfterProcessingStart<3e3&&(e=3e3-this.html5AdsPrebuildInfo[i].timeAfterProcessingStart),n=!0);return e}},{key:"onIframeChainBuilt",value:function onIframeChainBuilt(t){this.successfullyBuidChainIds.includes(t)||(this.successfullyBuidChainIds.push(t),this.successfullyBuidChainIds.length===this.chains.length&&this.TicketBuildingFinished(!1))}},{key:"FindChainFramesListForSegment",value:function FindChainFramesListForSegment(t){var e=[];if(t&&t.length&&this.webNavigationChainsList&&this.webNavigationChainsList.length)for(var n=!1,a=0;a<this.webNavigationChainsList.length&&!n;a++)this.webNavigationChainsList[a].includes(t[0])&&(e=this.webNavigationChainsList[a],n=!0);return t&&0===e.length&&t.length>0&&(e=t),e}},{key:"GetVideoHars",value:function GetVideoHars(t){var e=-1,n=!1,a=this.ContentStorage.GetVideoHars(this.tabId);if(a.length&&this.webNavigationIframes&&this.webNavigationIframes.length){for(var i=0;i<a.length;i++)a[i].frameId&&(a[i].framesChain=u.GetVideoHarFramesChainFullInfo(a[i].frameId,this.webNavigationIframes)),t&&(a[i].mediaType&&a[i].mediaType===o.VIDEO_TRAFFIC_MEDIA_TYPE_HTML&&(e=i),a[i].alias&&a[i].alias===o.VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE&&(n=!0));t&&n&&-1!==e&&a.splice(e,1)}return a}},{key:"onGotTicketClickTargetUrl",value:function onGotTicketClickTargetUrl(t,e,n){if(this.chains&&this.chains.length)for(var a=!1,i=0;i<this.chains.length&&!a;i++)this.chains[i].GetChainId()===e&&(a=!0,this.chains[i].AddDetectedTargetUrlByClick(t,n))}},{key:"onMaxBuildingTimeout",value:function onMaxBuildingTimeout(){if(this.chains.length)for(var t=0;t<this.chains.length;t++)this.chains[t].TerminateBuilding();this.TicketBuildingFinished(!1)}},{key:"GetVideoDataForTwitterVideoAd",value:function GetVideoDataForTwitterVideoAd(t,e){var n=this,a={};try{!function(){var i=n.ConfigManager.GetTwitterConfig().MIN_AMOUNT_OF_WORDS_FOR_MATCHING,r=n.ConfigManager.GetTwitterConfig().MIN_MATCHING_WORD_LENGTH;if(t&&t.length&&e&&e.length)for(var o=!1,s=0;s<t.length&&!o;s++){var d=t[s].tweets.full_text;n.textStorage.includes(d)||n.textStorage.push(d);var u=d.replace(/[\n\r]/g," ").split(/\s/).filter((function(t){return t.length>=r&&!t.startsWith("http")&&!t.startsWith("#")&&!t.startsWith("@")&&!(/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])/g.test(t)||/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g.test(t))})),c=0,l=0;if(u.length){var h=!0,_=!1,E=void 0;try{for(var T,f=u[Symbol.iterator]();!(h=(T=f.next()).done);h=!0){var g=T.value;c++,e.includes(g)&&l++}}catch(t){_=!0,E=t}finally{try{h||null==f.return||f.return()}finally{if(_)throw E}}c>=i&&l==c&&(o=!0,a=t[s])}else!u.length&&n.textStorage.includes(d)}}()}catch(t){}return a}},{key:"GetVideoDataForRedditVideoAd",value:function GetVideoDataForRedditVideoAd(t,e){var n={};try{if(t&&t.length&&e&&e.length)for(var a=!1,i=0;i<t.length&&!a;i++){var r=t[i];e.includes(r.videoId)&&(a=!0,n=r)}}catch(t){}return n}},{key:"GetRightColumnDataForReddit",value:function GetRightColumnDataForReddit(t,e){var n="";try{if(e&&e.length)for(var a=!1,i=0;i<t.length&&!a;i++){var r=t[i];if(r.length){var o=!0,s=!1,d=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value,h=l.elementId.replace(/&/g,"&amp;");if(e.includes(h))return n=l.targetUrl,a=!0,n}}catch(t){s=!0,d=t}finally{try{o||null==c.return||c.return()}finally{if(s)throw d}}}}}catch(t){}return n}},{key:"TicketBuildingFinished",value:(c=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var e,n,i,u,c,l,h,_,E,T,f,g;return regeneratorRuntime.wrap((function _callee$(A){for(;;)switch(A.prev=A.next){case 0:return e=!1,0===this.rawTicket[o.TICKET_ALIAS_PANALYTICSID].length&&(this.rawTicket[o.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId),A.next=4,this.LookingForFacebookAds();case 4:if(this.LookingForTwitterAds(t),this.LookingForRedditAds(),this.LookingForPinterestAds(),this.LookingForSkinAds(),this.LookingForBannerAds(),n=[],(i=this.ContentStorage?this.ContentStorage.GetInvalidChainCompletedContent(this.tabId):[]).length)for(u=0;u<i.length;u++)c=d.GetHtml5CandidateFromComletedInvalidChain(i[u]),l={chainId:i[u].headerInfo.chainId,extractionStatus:d.GetEmptyExtractionStatus()},c.frames.length&&(l.extractionStatus.fullContentExtracted=!0),c.targetUrl.length&&(l.extractionStatus.targetUrlExtracted=!0),l.extractionStatus.fullContentExtracted&&l.extractionStatus.targetUrlExtracted&&(this.rawTicket.adCandidatesHtml5.push(c),l.extractionStatus.sentToBackend=!0),n.push(l);if(this.chains.length)for(h=0;h<this.chains.length;h++)this.chains[h].GetStatus()===o.IFRAMES_CHAIN_BUILDING_STATUS_FINISHED&&(!(_=this.chains[h].GetExtractionStatus()).extractionStatus.filteredOut&&_.extractionStatus.targetUrlExtracted&&(this.rawTicket.adCandidatesHtml5.push(this.chains[h].GetHTML5Candidate()),_.extractionStatus.sentToBackend=!0),n.push(_));if(E=a.IsYouTubeUrl(this.rawTicket.url),this.rawTicket.videoTraffics=this.GetVideoHars(E),this.rawTicket.adCandidatePlacements.skinAd=this.rawTicket.adCandidatesSkinAd.length,this.rawTicket.adCandidatePlacements.banner=this.rawTicket.adCandidatesBanner.length,this.rawTicket.adCandidatePlacements.html5=this.ContentStorage.GetCandidatePlacementsHtml5(this.tabId),this.rawTicket.adCandidatePlacements.facebook=this.ContentStorage.GetCandidatePlacementsFacebook(this.tabId),this.rawTicket.adCandidatePlacements.twitter=this.ContentStorage.GetCandidatePlacementsTwitter(this.tabId),this.rawTicket.adCandidatePlacements.reddit=this.ContentStorage.GetCandidatePlacementsReddit(this.tabId),this.rawTicket.adCandidatePlacements.pinterest=this.ContentStorage.GetCandidatePlacementsPinterest(this.tabId),this.rawTicket.adCandidatePlacements.tiktok=this.ContentStorage.GetCandidatePlacementsTiktok(this.tabId),(T=this.ConfigManager.GetLoadManagementSettings())&&(this.rawTicket.adCandidatesSkinAd.length&&!T.sendCandidatesSkinAd&&(this.rawTicket.adCandidatesSkinAd=[]),this.rawTicket.adCandidatesBanner.length&&!T.sendCandidatesBanner&&(this.rawTicket.adCandidatesBanner=[]),this.rawTicket.adCandidatesHtml5.length&&!T.sendCandidatesHtml5&&(this.rawTicket.adCandidatesHtml5=[]),this.rawTicket.videoTraffics.length&&(E&&!T.sendYoutubeVideoTraffics||a.IsTiktokUrl(this.rawTicket.url)&&!T.sendTiktokVideoTraffics||a.IsFacebookUrl(this.rawTicket.url)&&!T.sendFacebookVideoTraffics?this.rawTicket.videoTraffics=[]:T.sendNonYoutubeVideoTraffics||(this.rawTicket.videoTraffics=[])),this.rawTicket.adsFacebook.length&&!T.sendFacebookAds&&(this.rawTicket.adsFacebook=[]),this.rawTicket.adsTwitter.length&&!T.sendTwitterAds&&(this.rawTicket.adsTwitter=[]),this.rawTicket.adsReddit.length&&!T.sendRedditAds&&(this.rawTicket.adsReddit=[]),this.rawTicket.adsPinterest.length&&!T.sendPinterestAds&&(this.rawTicket.adsPinterest=[])),a.IsPublisherInBlacklist(this.rawTicket.url,this.ConfigManager.GetBlacklistPublishers())&&(this.rawTicket.adCandidatesSkinAd=[],this.rawTicket.adCandidatesBanner=[],this.rawTicket.adCandidatesHtml5=[],this.rawTicket.videoTraffics=[],this.rawTicket.adsFacebook=[],this.rawTicket.adsTwitter=[],this.rawTicket.adsReddit=[],this.rawTicket.adsPinterest=[]),(this.rawTicket.adCandidatesSkinAd.length||this.rawTicket.adCandidatesBanner.length||this.rawTicket.adCandidatesHtml5.length||this.rawTicket.videoTraffics.length||this.rawTicket.adsFacebook.length||this.rawTicket.adsTwitter.length||this.rawTicket.adsReddit.length||this.rawTicket.adsPinterest.length||this.rawTicket.firstVisit)&&(e=!0),this.rawTicket.timeOnPage=a.GetCurrentTimestamp()-this.lastTicketDataSendTimestamp,this.finalOutTicket.type=o.OUT_TICKET_TYPE_SINGLE,this.finalOutTicket.data=JSON.stringify(this.rawTicket),this.status=o.TICKET_BUILDING_STATUS_DONE,this.chains.length)for(f=0;f<this.chains.length;f++)this.chains[f].ClearChain();this.chains=[],this.timeoutMaxBuilding&&(clearTimeout(this.timeoutMaxBuilding),this.timeoutMaxBuilding=null),this.timeoutDeepTargetUrlDetection&&(clearTimeout(this.timeoutDeepTargetUrlDetection),this.timeoutDeepTargetUrlDetection=null),(e||t)&&this.ContentStorage.RemoveIframeContentFromTabId(this.tabId,t),t||(n.length&&r.CONFIG_MARK_AD_CANDIDATES&&r.CONFIG_MARK_PROCESSED_AD_CANDIDATES&&((g=s.EmptyMessage).type=o.MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES,g.to="mp_"+this.tabId,g.content=n,chrome.tabs.sendMessage(this.tabId,g)),this.onTicketBuiltCallback&&this.onTicketBuiltCallback(this.tabId,this.finalOutTicket,e),this.ClearTicket());case 37:case"end":return A.stop()}}),_callee,this)}))),function TicketBuildingFinished(t){return c.apply(this,arguments)})},{key:"LookingForInstagramAds",value:function LookingForInstagramAds(){if(this.ContentStorage){this.rawTicket.adsInstagram=this.ContentStorage.GetCandidatesDataInstagram(this.tabId);var t=this.ContentStorage.GetCandidatesInstagramVideoData(this.tabId),e=this.ContentStorage.GetCandidatesInstagramStoryData(this.tabId),n=this.ContentStorage.GetCandidatesInstagramStoryTargetUrlSent(this.tabId);if(this.rawTicket.adsInstagram&&this.rawTicket.adsInstagram.length){var a=!0,r=!1,o=void 0;try{for(var s,d=this.rawTicket.adsInstagram[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var u=s.value,c=this.rawTicket.adsInstagram.indexOf(u);if(n.includes(u))delete this.rawTicket.adsInstagram[c];else{var l=i.decode(u.content);if(t&&t.length&&u.videoData&&"feed"===u.adPlacementType){var h=this.GetVideoDataForInstagramVideoAd(t,l);h&&h.videoVersions&&(u.videoData=h,this.ContentStorage.RemoveInstagramSentVideoData(this.tabId,h))}if("story"===u.adPlacementType){var _=this.GetStorySlidesData(e,l);_&&(u.storySlidesData=_,this.ContentStorage.RemoveInstagramSentStoryData(this.tabId,_,u.targetUrl))}}}}catch(t){r=!0,o=t}finally{try{a||null==d.return||d.return()}finally{if(r)throw o}}}}}},{key:"GetStorySlidesData",value:function GetStorySlidesData(t,e){var n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,d=s[0].advertiserName;if(this.MatchVideDataByAdvertiserName(e,d))return s}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"GetVideoDataForInstagramVideoAd",value:function GetVideoDataForInstagramVideoAd(t,e){var n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,d=s.fullText,u=s.advertiserName;if(d&&e.indexOf(d)>=0)return s;if(d){if(this.MatchVideoDataByContentInstagram(e,d))return s;if(this.MatchVideDataByAdvertiserName(e,u))return s}}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}return null}},{key:"MatchVideoDataByContentInstagram",value:function MatchVideoDataByContentInstagram(t,e){var n=e.split(/\n\n|\n/)[0].replace(/[\n\r]/g," ").split(/\s/).filter((function(t){return t.length>=3&&!t.startsWith("http")&&!t.startsWith("#")&&!t.startsWith("@")&&!(/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])/g.test(t)||/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])/g.test(t))})),a=n.length,i=0;if(n.length){var r=!0,o=!1,s=void 0;try{for(var d,u=n[Symbol.iterator]();!(r=(d=u.next()).done);r=!0){var c=d.value;t.includes(c)&&i++}}catch(t){o=!0,s=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw s}}if(i==a)return!0}}},{key:"MatchVideDataByAdvertiserName",value:function MatchVideDataByAdvertiserName(t,e){return t.indexOf(e)>=0}},{key:"LookingForBannerAds",value:function LookingForBannerAds(){if(this.ContentStorage&&(this.rawTicket.adCandidatesBanner=this.ContentStorage.GetCandidatesDataBanners(this.tabId),this.rawTicket.adCandidatesBanner.length&&r.CONFIG_MARK_AD_CANDIDATES&&r.CONFIG_MARK_PROCESSED_AD_CANDIDATES)){for(var t=[],e=0;e<this.rawTicket.adCandidatesBanner.length;e++)t.push({bannerId:this.rawTicket.adCandidatesBanner[e].bisId,extractionStatus:{sentToBackend:!0,fullContentExtracted:!0,targetUrlExtracted:!0}});var n=s.EmptyMessage;n.type=o.MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES,n.to="mp_"+this.tabId,n.content=t,chrome.tabs.sendMessage(this.tabId,n)}}},{key:"LookingForSkinAds",value:function LookingForSkinAds(){if(this.ContentStorage&&(this.rawTicket.adCandidatesSkinAd=this.ContentStorage.GetCandidatesDataSkinAds(this.tabId),this.rawTicket.adCandidatesSkinAd.length&&r.CONFIG_MARK_AD_CANDIDATES&&r.CONFIG_MARK_PROCESSED_AD_CANDIDATES)){for(var t=[],e=0;e<this.rawTicket.adCandidatesSkinAd.length;e++)t.push({query:'*[bis_skin_element="1"]',extractionStatus:{sentToBackend:!0,fullContentExtracted:!0,targetUrlExtracted:!0}});var n=s.EmptyMessage;n.type=o.MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES,n.to="mp_"+this.tabId,n.content=t,chrome.tabs.sendMessage(this.tabId,n)}}},{key:"LookingForTwitterAds",value:function LookingForTwitterAds(t){if(this.ContentStorage){this.rawTicket.adsTwitter=this.ContentStorage.GetCandidatesDataTwitter(this.tabId,t);var e=this.ContentStorage.GetCandidatesTwitterVideoData(this.tabId),n=[];if(e&&e.length&&this.rawTicket.adsTwitter&&this.rawTicket.adsTwitter.length){var a=!0,r=!1,s=void 0;try{for(var d,u=this.rawTicket.adsTwitter[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var c=d.value;if(c.adPlacementType===o.TWITTER_AD_PLACEMENT_TYPE_FEED&&c.hasOwnProperty("videoData")){var l=this.GetVideoDataForTwitterVideoAd(e,i.decode(c.content));l&&l.tweets&&l.tweets.id&&(c.videoData=l,n.push(l.tweets.id))}}}catch(t){r=!0,s=t}finally{try{a||null==u.return||u.return()}finally{if(r)throw s}}}this.isTwitterTicketReady=!0}}},{key:"LookingForRedditAds",value:function LookingForRedditAds(){if(this.ContentStorage){this.rawTicket.adsReddit=this.ContentStorage.GetCandidatesDataReddit(this.tabId);var t=this.ContentStorage.GetCandidatesRedditVideoData(this.tabId),e=this.ContentStorage.GetCandidatesRedditRightColumnData(this.tabId);if(this.rawTicket.adsReddit&&this.rawTicket.adsReddit.length){var n=!0,a=!1,r=void 0;try{for(var s,d=this.rawTicket.adsReddit[Symbol.iterator]();!(n=(s=d.next()).done);n=!0){var u=s.value;if(t&&t.length&&u.adPlacementType===o.REDDIT_AD_PLACEMENT_TYPE_FEED&&u.hasOwnProperty("videoData")){var c=this.GetVideoDataForRedditVideoAd(t,i.decode(u.content));!u.videoData.videoId&&c&&c.videoId&&(u.videoData=c)}if(e&&e.length&&u.adPlacementType===o.REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN){var l=this.GetRightColumnDataForReddit(e,i.decode(u.content));l&&l.length&&(u.targetUrl=l)}}}catch(t){a=!0,r=t}finally{try{n||null==d.return||d.return()}finally{if(a)throw r}}}this.isRedditTicketReady=!0}}},{key:"LookingForPinterestAds",value:function LookingForPinterestAds(){if(this.ContentStorage){this.rawTicket.adsPinterest=this.ContentStorage.GetCandidatesDataPinterest(this.tabId);var t=this.ContentStorage.GetCandidatesPinterestVideoData(this.tabId);if(this.rawTicket.adsPinterest&&this.rawTicket.adsPinterest.length){var e=!0,n=!1,a=void 0;try{for(var r,o=this.rawTicket.adsPinterest[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;if(t&&t.length&&s.videoData){var d=this.GetVideoDataForPinterestVideoAd(t,i.decode(s.content));d&&d.videoId&&(s.videoData=d)}s.hasOwnProperty("uniqueContentId")&&delete s.uniqueContentId}}catch(t){n=!0,a=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw a}}}}}},{key:"GetVideoDataForPinterestVideoAd",value:function GetVideoDataForPinterestVideoAd(t,e){var n=!0,a=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var s=r.value,d=s.title,u=s.promoter;if(d&&e.indexOf(d)>=0||u&&e.indexOf(u)>=0)return delete s.title,delete s.detectionTime,delete s.promoter,this.ContentStorage.RemovePinterestSentVideoData(this.tabId,s),s}}catch(t){a=!0,i=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw i}}}},{key:"LookingForFacebookAds",value:(n=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var t,e,n,a,r,s,d,u,c,l,h,_,E,T,f;return regeneratorRuntime.wrap((function _callee2$(g){for(;;)switch(g.prev=g.next){case 0:if(this.rawTicket.adsFacebook=this.ContentStorage.GetCandidatesDataFacebook(this.tabId),!this.rawTicket.adsFacebook.length){g.next=41;break}t=this.ContentStorage.GetCandidatesFacebookVideoData(this.tabId),e=0,n=[],a=!0,r=!1,g.prev=7,d=_asyncIterator(this.rawTicket.adsFacebook);case 9:return g.next=11,d.next();case 11:return u=g.sent,a=u.done,g.next=15,u.value;case 15:if(c=g.sent,a){g.next=23;break}if((l=c).designVersion&&l.designVersion===o.FACEBOOK_DESIGN_VERSION_NEW&&(e+=1),l.videoData&&t&&t.length){for(h=!1,_=i.decode(l.content),E=0;E<t.length&&!h;E++)T=t[E],this.isVideoDataMatch(_,T)&&(f=this.ConfigManager.GetFacebookConfig().VIDEO_URL_BY_PATTERN,h=!0,l.videoData.videoId=T.videoId,l.videoData.videoUrl=this.decodeURL(T.videoUrl,f),l.videoData.audioUrl=T.audioUrl,n.push(T.videoId));h||l.aboutPageLink&&(h=this.buildFBVideoUrl(l,_))}case 20:a=!0,g.next=9;break;case 23:g.next=29;break;case 25:g.prev=25,g.t0=g.catch(7),r=!0,s=g.t0;case 29:if(g.prev=29,g.prev=30,a||null==d.return){g.next=34;break}return g.next=34,d.return();case 34:if(g.prev=34,!r){g.next=37;break}throw s;case 37:return g.finish(34);case 38:return g.finish(29);case 39:e>0&&this.rawTicket&&e===this.rawTicket.adsFacebook.length&&(this.rawTicket.facebookDesignVersion=o.FACEBOOK_DESIGN_VERSION_NEW),this.ContentStorage&&t&&t.length&&this.ContentStorage.RemoveOldFacebookVideoData(this.tabId,n);case 41:this.isFacebookTicketReady=!0;case 42:case"end":return g.stop()}}),_callee2,this,[[7,25,29,39],[30,,34,38]])}))),function LookingForFacebookAds(){return n.apply(this,arguments)})},{key:"isVideoDataMatch",value:function isVideoDataMatch(t,e){var n=!1,a=e.previewImageUrl,i=!!a&&new RegExp(a.substring(a.length-8),"i"),r=new RegExp(e.videoId,"i"),o=!(!e.linkDisplay||!e.linkDisplay.length)&&new RegExp(e.linkDisplay,"i"),s=!(!e.userName||!e.userName.length)&&new RegExp(e.userName,"i"),d=!(!e.adName||!e.adName.length)&&new RegExp(e.adName,"i"),u=!(!e.adLogo||!e.adLogo.length)&&new RegExp(e.adLogo,"i");return(i&&i.test(t)||r.test(t)||o&&o.test(t)||s&&s.test(t)||d&&d.test(t)||u&&u.test(t))&&(n=!0),n}},{key:"buildFBVideoUrl",value:(e=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(t,e){var n,a,i,r,s,d,u,c,l,h=this;return regeneratorRuntime.wrap((function _callee3$(_){for(;;)switch(_.prev=_.next){case 0:if(n=this.ConfigManager.GetFacebookConfig().VIDEO_URL_BY_PATTERN,a=new RegExp(n.REGEX_ADVERTISER_NAME),i=new RegExp(n.REGEX_VIDEO_ID),r=new RegExp(n.REGEX_VIDEO_SRC),s=n.PATTERN,d=t.aboutPageLink.match(a)?t.aboutPageLink.match(a)[1]:null,u=this.getVideoId(e,i),c=!1,u&&d){_.next=10;break}return _.abrupt("return",c);case 10:return s=s.replace(o.FACEBOOK_AD_VIDEO_URL_REPLACE_NAME,d).replace(o.FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID,u),_.next=13,fetch(s).then((function(t){return t.ok?t.text():c})).then((function(t){if(!t)return c;var e=t.match(r);if(e&&e.length){var a=e.filter((function(t){return t&&-1!==t.search(/^https?/)}))[0];return a=h.decodeURL(a,n)}return c}));case 13:if(l=_.sent){_.next=16;break}return _.abrupt("return",c);case 16:return c=!0,t.videoData.videoUrl=l,t.videoData.videoId=u,_.abrupt("return",c);case 20:case"end":return _.stop()}}),_callee3,this)}))),function buildFBVideoUrl(t,n){return e.apply(this,arguments)})},{key:"decodeURL",value:function decodeURL(t,e){var n=e.MAP_REPLACE_UNICODE;-1!==t.search(/https:\\\/\\\//)&&(t=t.replace(/\\/g,""));var a=!0,i=!1,r=void 0;try{for(var o,s=n[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var d=_slicedToArray(o.value,2),u=d[0],c=d[1],l=new RegExp(u,"g");t=t.replace(l,c)}}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return t}},{key:"getVideoId",value:function getVideoId(t,e){var n=null,a=t.match(e);return a&&a.length>0&&(n=a[1]),n}},{key:"GetForcedBuildTicket",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){return regeneratorRuntime.wrap((function _callee4$(t){for(;;)switch(t.prev=t.next){case 0:if(!this.IsValid()){t.next=4;break}return t.next=3,this.TicketBuildingFinished(!0);case 3:return t.abrupt("return",this.finalOutTicket.data?this.finalOutTicket.data:"{}");case 4:return t.abrupt("return","{}");case 5:case"end":return t.stop()}}),_callee4,this)}))),function GetForcedBuildTicket(){return t.apply(this,arguments)})},{key:"ClearTicket",value:function ClearTicket(){this.isReadyToClearTicket&&(this.ConfigManager=null,this.ContentStorage=null,this.rawTicket=null,this.webNavigationIframes=[],this.webNavigationChainsList=[],this.fullIframesList=[],this.onTicketBuiltCallback=null,this.timeoutMaxBuilding=null,this.timeoutDeepTargetUrlDetection=null,this.chainBuildingInitInfo=[],this.chains=[],this.successfullyBuidChainIds=[],this.chainsWithoutTargetUrl=[],this.finalOutTicket={ticketId:"",data:""},this.html5AdsPrebuildInfo=[],this.isFacebookTicketReady=!1,this.isTwitterTicketReady=!1,this.isRedditTicketReady=!1)}},{key:"TabId",get:function get(){return this.tabId}},{key:"isReadyToClearTicket",get:function get(){var t=!1;return this.isFacebookTicketReady&&this.isTwitterTicketReady&&this.isRedditTicketReady&&(t=!0),t}}],[{key:"GetForcedOutTicketFromTabTicketInfo",value:function GetForcedOutTicketFromTabTicketInfo(t){return t.rawOutTicket.adCandidatesHtml5=[],t.rawOutTicket.timeOnPage=a.GetCurrentTimestamp()-t.lastTicketDataSendTimestamp,t.rawOutTicket}}]),PosdTicket}();t.exports=c},8235:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(1234),i=n(3124),r=n(1225),o=n(8962),s=n(630).default,d=function(){function PosdTicketBuilder(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdTicketBuilder),this.id=t,this.init=!1,this.ConfigManager=null,this.ContentStorage=null,this.TicketSender=null,this.TabsManager=null,this.SensitiveDataFilter=null,this.SensitiveDataFilterInited=!1,this.tickets=[],this.tabsInBuilding=[],this.tabTicketInfo=[],this.tabTicketInfoCheckerTimeout=null,this.panalyticsId=""}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdTicketBuilder,[{key:"IsInit",value:function IsInit(){return this.init}},{key:"SetPanalyticsId",value:function SetPanalyticsId(t){this.panalyticsId=t}},{key:"Init",value:function Init(t,e,n,a,i){var r=this;!this.init&&t&&e&&a&&(this.init=!0,this.ConfigManager=i,this.ContentStorage=t,this.TicketSender=e,this.AdBlockInspector=n,this.TabsManager=a,this.TabsManager.onRemoved(this.onTabClosed.bind(this)),this.ConfigManager&&this.ConfigManager.IsUseSensitiveDataFilter()&&(this.SensitiveDataFilter=new s({host:o.CONFIG_UTILITY_HOST,logging:!0}),this.SensitiveDataFilter.init().then((function(){r.SensitiveDataFilterInited=!0}),(function(){}))))}},{key:"PrebuildTicket",value:function PrebuildTicket(t){var e=JSON.parse(t);return this.AdBlockInspector&&this.AdBlockInspector.IsInit()?e.activeAdBlocker=this.AdBlockInspector.HasActiveAdblock:e.activeAdBlocker=!1,this.SensitiveDataFilter&&this.SensitiveDataFilterInited&&(e.url=this.SensitiveDataFilter.transformUrl(e.url)),0===e[i.TICKET_ALIAS_PANALYTICSID].length&&(e[i.TICKET_ALIAS_PANALYTICSID]=this.panalyticsId),JSON.stringify(e)}},{key:"AddTicketForBuilding",value:function AddTicketForBuilding(t,e){if(this.init){var n=this.AddTicketToTabInfo(t,e);if(!this.tabsInBuilding.includes(t)){n.addTicketToBuildingTimestamp=r.GetCurrentTimestamp();var i=new a(this.panalyticsId,t,e,n.lastTicketDataSendTimestamp,this.ContentStorage,this.ConfigManager);if(i.IsValid())return this.tickets.push(i),this.tabsInBuilding.push(t),i.ActivateBuilding(this.onTicketBuilt.bind(this)),!0}}return!1}},{key:"onGotTicketClickTargetUrlInfo",value:function onGotTicketClickTargetUrlInfo(t,e,n){if(this.init)for(var a=!1,i=0;i<this.tickets.length&&!a;i++)this.tickets[i].TabId===t&&(a=!0,this.tickets[i].onGotTicketClickTargetUrl(e,n.chainId,n.clickTargetUrl))}},{key:"onTicketBuilt",value:function onTicketBuilt(t,e,n){if(this.tabsInBuilding.includes(t)){if(n){this.TicketSender.PushTicket(e);var a="tab_".concat(t);this.tabTicketInfo[a]&&(this.tabTicketInfo[a].lastTicketDataSendTimestamp=this.tabTicketInfo[a].addTicketToBuildingTimestamp)}var i=this.tabsInBuilding.indexOf(t);i>-1&&this.tabsInBuilding.splice(i,1);for(var r=!1,o=0;o<this.tickets.length&&!r;o++)this.tickets[o].TabId===t&&(r=!0,this.tickets.splice(o,1))}}},{key:"AddTicketToTabInfo",value:function AddTicketToTabInfo(t,e){var n=this,o="tab_".concat(t),s=JSON.parse(e),d=!1;if(this.tabTicketInfo[o])if(s.ticketId===this.tabTicketInfo[o].rawOutTicket.ticketId)this.tabTicketInfo[o].rawOutTicket=s;else{if(this.tabTicketInfo[o].rawOutTicket.finalTicket=!0,this.ContentStorage.HaveDataForTab(t)){var u=new a(this.panalyticsId,t,JSON.stringify(this.tabTicketInfo[o].rawOutTicket),this.tabTicketInfo[o].lastTicketDataSendTimestamp,this.ContentStorage,this.ConfigManager);u.GetForcedBuildTicket().then((function(t){n.TicketSender.PushTicket({type:i.OUT_TICKET_TYPE_SINGLE,ticketId:n.tabTicketInfo[o].rawOutTicket.ticketId,data:t}),u.ClearTicket()}))}else{var c=JSON.stringify(a.GetForcedOutTicketFromTabTicketInfo(this.tabTicketInfo[o]));this.TicketSender.PushTicket({type:i.OUT_TICKET_TYPE_SINGLE,ticketId:this.tabTicketInfo[o].rawOutTicket.ticketId,data:c})}d=!0}else d=!0;return d&&(this.tabTicketInfo[o]={tabId:t,addTicketToBuildingTimestamp:r.GetCurrentTimestamp(),lastTicketDataSendTimestamp:r.GetCurrentTimestamp(),rawOutTicket:s}),this.tabTicketInfo[o]}},{key:"onTabClosed",value:function onTabClosed(t,e){var n="tab_".concat(t);this.tabTicketInfo[n]&&(this.tabTicketInfo[n].rawOutTicket.finalTicket=!0,this.tabTicketInfoCheckerTimeout||(this.tabTicketInfoCheckerTimeout=setTimeout(this.CheckForFinalTickets.bind(this,t),1e3)))}},{key:"CheckForFinalTickets",value:function CheckForFinalTickets(t){var e=this;this.tabTicketInfoCheckerTimeout=null;var n=[];for(var r in this.tabTicketInfo)this.tabTicketInfo[r]&&this.tabTicketInfo[r].rawOutTicket.finalTicket&&(this.tabsInBuilding.includes(t)&&this.onTicketBuilt(t,"",!1),this.ContentStorage.HaveDataForTab(t)?function(){var o=new a(e.panalyticsId,t,JSON.stringify(e.tabTicketInfo[r].rawOutTicket),e.tabTicketInfo[r].lastTicketDataSendTimestamp,e.ContentStorage,e.ConfigManager);o.GetForcedBuildTicket().then((function(t){n.push(JSON.parse(t)),o.ClearTicket(),n.length&&e.TicketSender.PushTicket({type:i.OUT_TICKET_TYPE_MULTI,data:JSON.stringify(n)})}))}():n.push(a.GetForcedOutTicketFromTabTicketInfo(this.tabTicketInfo[r])),this.tabTicketInfo[r]=null,delete this.tabTicketInfo[r]);n.length&&this.TicketSender.PushTicket({type:i.OUT_TICKET_TYPE_MULTI,data:JSON.stringify(n)})}}]),PosdTicketBuilder}();t.exports=d},597:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(3124),i=n(8962),r=n(2420),o=n(1510),s=function(){function PosdTicketSender(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdTicketSender),this.id=t,this.BackgendIOManager=new o,this.OutTicketQueue=[],this.ticketToOut={},this.panalyticsId=""}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdTicketSender,[{key:"Init",value:function Init(){setInterval(this.SendTicket.bind(this),500)}},{key:"SetPanalyticsId",value:function SetPanalyticsId(t){this.panalyticsId=t}},{key:"isTicketDataEmpty",value:function isTicketDataEmpty(t){var e=JSON.parse(t);if(!e)return!0;if(e.length&&1===e.length){var n=e[0];if(!Object.keys(n).length)return!0}return!e.finalTicket&&!Object.keys(e).length}},{key:"PushTicket",value:function PushTicket(t){return this.OutTicketQueue.length<a.MAX_OUT_TICKETS_QUEUE_LENGTH&&(this.OutTicketQueue.push(t),!0)}},{key:"SendTicket",value:function SendTicket(){if(this.panalyticsId.length&&this.OutTicketQueue.length){if(this.ticketToOut=this.OutTicketQueue.shift(),this.isTicketDataEmpty(this.ticketToOut.data))return;this.ticketToOut.data.length,JSON.parse(this.ticketToOut.data);if(i.CONFIG_USE_COMPRESSION&&this.ticketToOut.data){this.ticketToOut.data=r.compressToUTF16(this.ticketToOut.data);this.ticketToOut.data.length}this.ticketToOut.type===a.OUT_TICKET_TYPE_SINGLE?this.BackgendIOManager.SendSingleOutTicketToBackend(this.panalyticsId,this.ticketToOut,this.onTicketSend.bind(this),this.onTicketSendError.bind(this)):this.ticketToOut.type===a.OUT_TICKET_TYPE_MULTI&&this.BackgendIOManager.SendMultiOutTicketToBackend(this.panalyticsId,this.ticketToOut,this.onTicketSend.bind(this),this.onTicketSendError.bind(this))}}},{key:"onTicketSend",value:function onTicketSend(){this.ticketToOut.ticketId="",this.ticketToOut.data=""}},{key:"onTicketSendError",value:function onTicketSendError(){this.ticketToOut.ticketId="",this.ticketToOut.data=""}}]),PosdTicketSender}();t.exports=s},7833:t=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var e=function(){function PosdWebNavigationIframes(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdWebNavigationIframes)}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdWebNavigationIframes,null,[{key:"GetWebNavigationChainsList",value:function GetWebNavigationChainsList(t){for(var e=[],n=[],a=0;a<t.length;a++)0===t[a].parentFrameId?n.push([t[a].frameId]):t[a].parentFrameId>0&&e.push({frameId:t[a].frameId,parentFrameId:t[a].parentFrameId,processed:!1});for(var i=0,r=0;r<100&&e.length>i;){r+=1,i=0;for(var o=0;o<e.length;o++)if(e[o].processed)i+=1;else for(var s=!1,d=0;d<n.length&&!s;d++)n[d].includes(e[o].parentFrameId)&&(n[d].push(e[o].frameId),e[o].processed=!0,s=!0)}return n}},{key:"GetVideoHarFramesChainFullInfo",value:function GetVideoHarFramesChainFullInfo(t,e){for(var n=[],a=0,i=t;a<100&&i>=0;){a+=1;for(var r=!1,o=0;o<e.length&&!r;o++)e[o].frameId===i&&(n.push({frameId:e[o].frameId,parentFrameId:e[o].parentFrameId,url:e[o].url}),i=e[o].parentFrameId,r=!0)}return n}}]),PosdWebNavigationIframes}();t.exports=e},6023:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(4019),i=n(1225),r=n(3124),o=function(){function PosdFacebookLoader(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdFacebookLoader),this.id=t,this.ContentStorage=null,this.ConfigManager=null,this.aboutSectionConfig=null,this.clenupTimer=null,this.candidates=[]}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdFacebookLoader,[{key:"Init",value:function Init(t,e){this.ConfigManager=t,this.ContentStorage=e,this.clenupTimer=setInterval(this.CleanupCandidates.bind(this),6e4)}},{key:"IsLoadAboutPageActivated",value:function IsLoadAboutPageActivated(){var t=this.facebookConfig;return!(!t||!t.ABOUT_SECTION_CONFIG)&&t.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE}},{key:"AddOneCandidateForLoading",value:function AddOneCandidateForLoading(t,e,n){this.mesType=n,this.candidates.push({tabId:t,active:!0,addTimestamp:i.GetCurrentTimestamp(),content:e}),this.mesType===r.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK?this.AddToLoading(e.aboutPageLink):this.mesType===r.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA&&this.AddToLoading(e.encodedText.bisLinks.aboutPageLink)}},{key:"AddToLoading",value:function AddToLoading(t){if(this.ConfigManager){var e=this.ConfigManager.GetFacebookConfig();e&&e.ABOUT_SECTION_CONFIG&&e.ABOUT_SECTION_CONFIG.LOAD_ABOUT_PAGE&&(this.aboutSectionConfig=e.ABOUT_SECTION_CONFIG,this.mesType===r.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK?this.LoadFBAboutContent(e,t,this.onAboutPageLoaded.bind(this)):this.mesType===r.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA&&this.LoadFBAboutContent(e,t,this.onInstreamAboutPageLoaded.bind(this)))}}},{key:"LoadFBAboutContent",value:function LoadFBAboutContent(t,e,n){var a=this;if(e){var i=null;return fetch(e,{headers:t.ABOUT_SECTION_CONFIG.HEADERS,method:"GET"}).then((function(t){if(200===t.status)return i=t.url,t.text();n(!1,e,"")})).then((function(r){a.workWithDataFromLoadPage(t,e,n,r,i)})).catch((function(t){n(!1,e,"")})),!0}return!1}},{key:"workWithDataFromLoadPage",value:function workWithDataFromLoadPage(t,e,n,a,i){this.mesType===r.MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK&&this.getAboutPageContent(e,n,a),this.mesType===r.MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA&&this.getAdvertiserUrlFromAboutPage(t,e,n,a,i)}},{key:"getAdvertiserUrlFromAboutPage",value:function getAdvertiserUrlFromAboutPage(t,e,n,a,i){if(a){for(var r="".concat(a),o={pageLink:i.replace(/about/,""),advertiserLink:null},s=!1,d=0;d<t.ABOUT_SECTION_CONFIG.ADVERTISER_LINK_INSTREAM_QUERIES.length&&!s;d++){var u=t.ABOUT_SECTION_CONFIG.ADVERTISER_LINK_INSTREAM_QUERIES[d],c=new RegExp(u),l=r.match(c);l&&l.length&&l[0].search(/http/)>-1&&(o.advertiserLink=JSON.parse('"'.concat(l[0].match(/https?:((\/\/)|(\\\/\\\/)).[^"]+/)[0],'"')),s=!0)}n(s,e,o)}else n(!1,e,null)}},{key:"getAboutPageContent",value:function getAboutPageContent(t,e,n){var r=n.body,o="";if(i.IsChrome()){var s=r.indexOf(this.aboutSectionConfig.CHROME_SECTIONS.SECTION_ZONE_DETECTOR);if(s>0){var d=r.substring(0,s),u=d.lastIndexOf(this.aboutSectionConfig.CHROME_SECTIONS.SECTION_START),c=d.lastIndexOf(this.aboutSectionConfig.CHROME_SECTIONS.SECTION_END);u>0&&c>0&&u<c&&(o=a.encode(d.substring(u+this.aboutSectionConfig.CHROME_SECTIONS.SECTION_START.length,c)))}}else if(i.IsFirefox()){var l=r.indexOf(this.aboutSectionConfig.FIREFOX_SECTIONS.SECTION_START);if(l>0){var h=r.substring(l,r.length-1),_=h.indexOf(this.aboutSectionConfig.FIREFOX_SECTIONS.SECTION_END);_>0&&(o=a.encode(h.substring(0,_)))}}e(!0,t,o)}},{key:"onAboutPageLoaded",value:function onAboutPageLoaded(t,e,n){for(var a=!1,i=0;i<this.candidates.length;i++)this.candidates[i].content.aboutPageLink===e&&(this.candidates[i].content.aboutSectionContent=n,this.candidates[i].active=!1,this.ContentStorage.AddCandidatesDataFacebook(this.candidates[i].tabId,[this.candidates[i].content]),a=!0);a&&this.CleanupCandidates()}},{key:"onInstreamAboutPageLoaded",value:function onInstreamAboutPageLoaded(t,e,n){for(var i=!1,r=0;r<this.candidates.length;r++){var o=this.candidates[r];if(o.content.encodedText.bisLinks.aboutPageLink===e){var s=Object.assign({},o.content);s.encodedText.bisLinks.advertiserLink=n.advertiserLink,s.encodedText.bisLinks.pageLink=n.pageLink,delete s.encodedText.bisLinks.aboutPageLink,s.encodedText=a.encode(JSON.stringify(s.encodedText)),this.ContentStorage.AddVideoHar(o.tabId,s),i=!0}}i&&this.CleanupCandidates()}},{key:"CleanupCandidates",value:function CleanupCandidates(){var t=[],e=i.GetCurrentTimestamp();if(this.candidates&&this.candidates.length){for(var n=0;n<this.candidates.length;n++)this.candidates[n].active&&e-this.candidates[n].addTimestamp<60&&t.push(this.candidates[n]);this.candidates=t}}},{key:"facebookConfig",get:function get(){return this.ConfigManager?this.ConfigManager.GetFacebookConfig():null}}]),PosdFacebookLoader}();t.exports=o},4063:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(1225),i=n(3124),r=function(){function PosdPinterestLoader(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdPinterestLoader),this.id=t,this.ContentStorage=null,this.ConfigManager=null,this.replacePatternId="[PIN_ID]",this.replacePatternUsername="[USERNAME]",this.candidates=[],this.clenupTimer=null}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdPinterestLoader,[{key:"Init",value:function Init(t,e){this.ConfigManager=t,this.ContentStorage=e,this.clenupTimer=setInterval(this.CleanupCandidates.bind(this),6e4)}},{key:"isAdTextValid",value:function isAdTextValid(t){var e=t.length?t[0]:t;return!(!e.adText||!e.adText.length)}},{key:"isAdvertiserUrlValid",value:function isAdvertiserUrlValid(t){var e=t.length?t[0]:t;return!(!e.advertiserUrl||!e.advertiserUrl.length||this.isAdvertiserUrlLowPriority(e.advertiserUrl))}},{key:"isAdvertiserUrlLowPriority",value:function isAdvertiserUrlLowPriority(t){return t.search(this.pinterestAdditionalConfig.CHECK_ON_PRIORITY_ADV_URL)>=0}},{key:"AddCandidateForLoading",value:function AddCandidateForLoading(t,e){var n=e[0],r=!this.isAdvertiserUrlValid(n),o=!this.isAdTextValid(n);this.candidates.push({tabId:t,active:!0,isTextLoaderProccessed:o,isUrlLoaderProccessed:r,addTimestamp:a.GetCurrentTimestamp(),content:n}),this.LoadPage(n,i.PINTEREST_LOADER_TYPE_PIN_PAGE,this.onLoadPinPageCallback.bind(this))}},{key:"LoadPage",value:function LoadPage(t,e,n){var a=this;return new Promise((function(i,r){var o=t.uniqueContentId,s=null;try{if(!(s=a.getRequestToFetch(t,e)))return void i(!1)}catch(t){return void r(t)}fetch(s).then((function(t){return t.text()})).then((function(t){t&&a.workWithDataFromLoadedData(i,n,o,t,e)})).catch((function(t){i(!1)}))}))}},{key:"getRequestToFetch",value:function getRequestToFetch(t,e){var n=t.uniqueContentId,a=this.getOptionsToFetch(),i=this.pinterestAdditionalConfig.PIN_PAGE_URL_PATTERN.replace(this.replacePatternId,n);return new Request(i,a)}},{key:"getOptionsToFetch",value:function getOptionsToFetch(){return{method:"GET"}}},{key:"onLoadPinPageCallback",value:function onLoadPinPageCallback(t,e,n,a,i,r){var o=!1,s=!0,d=!1,u=void 0;try{for(var c,l=this.candidates[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var h=c.value;e===h.content.uniqueContentId&&(h.content.adText=n,h.content.description=a,h.content.advertiserUrl=i||h.content.advertiserUrl,h.content.advertiserId=r,o=!0,h.active=!1,this.ContentStorage.AddCandidatesDataPinterest(h.tabId,[h.content]))}}catch(t){d=!0,u=t}finally{try{s||null==l.return||l.return()}finally{if(d)throw u}}t(o)}},{key:"workWithDataFromLoadedData",value:function workWithDataFromLoadedData(t,e,n,a,i){this.getNeccessaryData(t,e,n,a)}},{key:"getNeccessaryData",value:function getNeccessaryData(t,e,n,a){var i=this.getDescription(a);e(t,n,this.getAdTitle(a),i,this.getAdvertiserUrl(a),this.getAdvertiserId(a))}},{key:"getDescription",value:function getDescription(t){var e=new RegExp(this.pinterestAdditionalConfig.DESCRIPTION_QUERY),n=t.match(e);return n&&n.length>1?n[1]:""}},{key:"getAdTitle",value:function getAdTitle(t){var e=new RegExp(this.pinterestAdditionalConfig.TITLE_QUERY),n=t.match(e);return n&&n.length>1?n[1]:""}},{key:"getAdvertiserUrl",value:function getAdvertiserUrl(t){var e,n="",a=this.getTextJs(t);return a?((e=this.parseTextToJs(a))&&(n=this.findValueByPath(e,this.pinterestAdditionalConfig.PATH_TO_ADVERTISER_URL)),n&&"string"==typeof n?n:""):n}},{key:"getTextJs",value:function getTextJs(t){var e=new RegExp(this.pinterestAdditionalConfig.GET_SCRIPT_WITH_DATA_QUERY),n=t.match(e);return n&&n.length>1?n[1]:""}},{key:"findValueByPath",value:function findValueByPath(t,e){var n=null,a=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var d=o.value;n=t;var u=!0,c=!1,l=void 0;try{for(var h,_=d[Symbol.iterator]();!(u=(h=_.next()).done);u=!0){var E=h.value;if(n&&n[E]&&(n=n[E]),E===this.replacePatternId)n=n[Object.keys(n)]}}catch(t){c=!0,l=t}finally{try{u||null==_.return||_.return()}finally{if(c)throw l}}if(n&&"string"==typeof n)return n}}catch(t){i=!0,r=t}finally{try{a||null==s.return||s.return()}finally{if(i)throw r}}return""}},{key:"parseTextToJs",value:function parseTextToJs(t){var e=null;try{e=JSON.parse(t)}catch(t){}return e}},{key:"getAdvertiserId",value:function getAdvertiserId(t){var e,n="",a=this.getTextJs(t);return a?((e=this.parseTextToJs(a))&&(n=this.findValueByPath(e,this.pinterestAdditionalConfig.PATH_TO_ADVERTISER_ID)),n&&"string"==typeof n?n:""):n}},{key:"CleanupCandidates",value:function CleanupCandidates(){var t=[],e=a.GetCurrentTimestamp();if(this.candidates&&this.candidates.length){for(var n=0;n<this.candidates.length;n++){var i=this.candidates[n];i.active&&e-i.addTimestamp<60&&t.push(i)}this.candidates=t}}},{key:"pinterestConfig",get:function get(){return this.ConfigManager.PinterestConfig}},{key:"pinterestAdditionalConfig",get:function get(){return this.pinterestConfig.ADDITIONAL_LOADER_CONFIG}}]),PosdPinterestLoader}();t.exports=r},6162:(t,e,n)=>{function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(4019),i=n(1225),r=function(){function PosdTwitterLoader(t){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdTwitterLoader),this.id=t,this.ContentStorage=null,this.twitterConfig=null,this.clenupTimer=null,this.candidates=[],this.guestToken=null,this.loaderCache=[],this.guestTokenLastUpdateTime=i.GetCurrentTimestamp()-300}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdTwitterLoader,[{key:"Init",value:function Init(t,e){this.twitterConfig=t.GetTwitterConfig(),this.ContentStorage=e,this.ContentStorage&&this.twitterConfig&&(this.clenupTimer=setInterval(this.Cleanup.bind(this),6e4))}},{key:"UpdateGuestToken",value:function UpdateGuestToken(t){var e=this,n=i.GetCurrentTimestamp();(!this.guestToken||n-this.guestTokenLastUpdateTime>60)&&(this.guestTokenLastUpdateTime=n,fetch(this.twitterConfig.LOAD_USER_DATA.API_CALL_GUEST,{method:"POST",headers:{authorization:this.twitterConfig.LOAD_USER_DATA.AUTH_BEARER},credentials:"omit"}).then((function(t){return t.json()})).then((function(t){return t.guest_token})).then((function(n){e.guestToken=n,t&&t()})))}},{key:"AddOneCandidateForLoading",value:function AddOneCandidateForLoading(t,e){this.IsLoadUserDataActivated()&&(this.candidates.push({tabId:t,active:!0,addTimestamp:i.GetCurrentTimestamp(),content:e}),this.LoadTwAboutContent(e.screenName,e.token,this.onUserDataLoaded.bind(this)))}},{key:"AddCandidatesForLoading",value:function AddCandidatesForLoading(t,e){for(var n=0;n<e.length;n++)this.AddOneCandidateForLoading(t,e[n])}},{key:"IsLoadUserDataActivated",value:function IsLoadUserDataActivated(){return!!this.twitterConfig&&this.twitterConfig.LOAD_USER_DATA.ENABLED}},{key:"LoadTwAboutContent",value:function LoadTwAboutContent(t,e,n){var i=this;t&&(this.IsInCache(t)?n(!0,t,this.GetDataFromCache(t)):this.twitterConfig.LOAD_USER_DATA.AUTH_BEARER&&e?fetch("".concat(this.twitterConfig.LOAD_USER_DATA.API_CALL_SCREEN_NAME).replace("${%1}",t),{method:"GET",headers:{authorization:this.twitterConfig.LOAD_USER_DATA.AUTH_BEARER,"X-Csrf-Token":e},credentials:"same-origin"}).then((function(e){if(200===e.status)return e.text();n(!1,t,"")})).then((function(e){i.AddToCache(t,a.encode(e)),n(!0,t,a.encode(e))})).catch((function(e){n(!1,t,""),i.guestToken=""})):n(!1,t,""))}},{key:"onUserDataLoaded",value:function onUserDataLoaded(t,e,n){for(var a=!1,i=0;i<this.candidates.length;i++)this.candidates[i].content.screenName===e&&(this.candidates[i].content.userDataByScreenName=n,this.candidates[i].active=!1,this.ContentStorage.AddCandidatesDataTwitter(this.candidates[i].tabId,[this.candidates[i].content]),a=!0,delete this.candidates[i].content.token);a&&this.CleanupCandidates()}},{key:"CleanupCandidates",value:function CleanupCandidates(){var t=[],e=i.GetCurrentTimestamp();if(this.candidates&&this.candidates.length){for(var n=0;n<this.candidates.length;n++)this.candidates[n].active&&e-this.candidates[n].addTimestamp<60&&t.push(this.candidates[n]);this.candidates=t}}},{key:"Cleanup",value:function Cleanup(){this.CleanupCandidates(),this.CleanupCache()}},{key:"AddToCache",value:function AddToCache(t,e){if(t&&e){this.cacheUsed=!0;var n=i.GetCurrentTimestamp();this.IsInCache(t)?this.loaderCache[t].addTimestamp=n:this.loaderCache[t]={addTimestamp:n,data:e}}}},{key:"IsInCache",value:function IsInCache(t){return t&&"object"===_typeof(this.loaderCache[t])}},{key:"GetDataFromCache",value:function GetDataFromCache(t){return this.IsInCache(t)?this.loaderCache[t].data:""}},{key:"CleanupCache",value:function CleanupCache(){if(Object.keys(this.loaderCache).length){var t=i.GetCurrentTimestamp();for(screenName in this.loaderCache)t-this.loaderCache[screenName].addTimestamp>600&&delete this.loaderCache[screenName]}}}]),PosdTwitterLoader}();t.exports=r},8962:t=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var e=function(){function PosdConfig(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdConfig)}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdConfig,null,[{key:"CONFIG_PANELOS_VERSION",get:function get(){return"1.9.15"}},{key:"CONFIG_PINSTANCE_ID",get:function get(){return 1}},{key:"CONFIG_PARTNER_ID",get:function get(){return 5}},{key:"CONFIG_DISTRIBUTOR_ID",get:function get(){return 5}},{key:"CONFIG_PANELBACKEND_ENDPOINT",get:function get(){return"https://analytics-toolbar.urban-vpn.com:40443"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_OUTTICKET",get:function get(){return"/tickets"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_INSTALL_EVENT",get:function get(){return"/install"}},{key:"CONFIG_PANELBACKEND_ENDPOINT_ULR_CONFIGURATION",get:function get(){return"/configuration?pv=".concat(this.CONFIG_PANELOS_VERSION)}},{key:"CONFIG_GLOBAL_ACTIVE_STATUS",get:function get(){return!1}},{key:"CONFIG_USE_COMPRESSION",get:function get(){return!0}},{key:"CONFIG_MARK_AD_CANDIDATES",get:function get(){return!1}},{key:"CONFIG_MARK_PROCESSED_AD_CANDIDATES",get:function get(){return!1}},{key:"CONFIG_ADBLOCKER_AVAILABLE",get:function get(){return!0}},{key:"CONFIG_TARGET_URL_BY_CLICK_AVAILABLE",get:function get(){return!0}},{key:"CONFIG_ANALYTIC_INSTALL_EVENTS_TRACING_AVAILABLE",get:function get(){return!0}},{key:"CONFIG_ADBLOCK_INSPECTOR_AVAILABLE",get:function get(){return!0}},{key:"CONFIG_UTILITY_HOST",get:function get(){return"https://authentication.urban-vpn.com"}}]),PosdConfig}();t.exports=e},1225:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(3124),i=function(){function PosdCommon(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdCommon)}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdCommon,null,[{key:"QuerySelectorAll",value:function QuerySelectorAll(t,e){return document.__proto__.querySelectorAll.call(t,e)}},{key:"QuerySelector",value:function QuerySelector(t,e){return document.__proto__.querySelector.call(t,e)}},{key:"Escape",value:function Escape(t){return t.replace(/\"/g,"&quot;")}},{key:"ToJSON",value:function ToJSON(t){return"function"==typeof t.toJSON?t.toJSON():JSON.stringify(t)}},{key:"GetBaseHref",value:function GetBaseHref(){var t=PosdCommon.QuerySelector(document,"base");return t&&t.href?t.href:""}},{key:"GetTabIdKey",value:function GetTabIdKey(t){return"tb_"+t}},{key:"GetMainPageId",value:function GetMainPageId(t){return"mp_"+t}},{key:"IsOnChromeRuntime",value:function IsOnChromeRuntime(){return chrome.app&&chrome.runtime?void 0!==chrome.app.isInstalled:!!self.navigator.userAgent.toLowerCase().includes("firefox")&&!!chrome.runtime}},{key:"GetElementSize",value:function GetElementSize(t){var e={x:0,y:0,w:0,h:0};if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect();e={x:~~(n.left+window.scrollX),y:~~(n.top+window.scrollX),w:~~n.width,h:~~n.height}}return e}},{key:"IsCoordinatesValid",value:function IsCoordinatesValid(t){return!!(t&&t.hasOwnProperty("x")&&"number"==typeof t.x&&t.hasOwnProperty("y")&&"number"==typeof t.y)}},{key:"GetFullElementSize",value:function GetFullElementSize(t,e,n){var a=PosdCommon.GetElementSize(t);return PosdCommon.IsCoordinatesValid(n)&&(a.x=a.x+n.x,a.y=a.y+n.y),PosdCommon.IsCoordinatesValid(e)?(a.abs_x=a.x+e.x,a.abs_y=a.y+e.y):(a.abs_x=a.x,a.abs_y=a.y),a}},{key:"SetFullSizeToElement",value:function SetFullSizeToElement(t,e,n){var a={x:0,y:0,w:0,h:0};return PosdCommon.IsCoordinatesValid(n)&&(a.x=a.x+n.x,a.y=a.y+n.y),t&&t.setAttribute&&(a=PosdCommon.GetFullElementSize(t,e,n),t.setAttribute("bis_size",PosdCommon.ToJSON(a))),a}},{key:"GenerateAndSetBisId",value:function GenerateAndSetBisId(t,e){var n=e+PosdCommon.GenerateQuickId();return t&&t.setAttribute&&t.setAttribute(a.ATTRIBUTE_BIS_ID,n),n}},{key:"GenerateAndSetBisIdToFrame",value:function GenerateAndSetBisIdToFrame(t){return PosdCommon.GenerateAndSetBisId(t,"fr_")}},{key:"GenerateAndSetBisIdToBanner",value:function GenerateAndSetBisIdToBanner(t){return PosdCommon.GenerateAndSetBisId(t,"bn_")}},{key:"GenerateAndSetBisIdToFBAds",value:function GenerateAndSetBisIdToFBAds(t){return PosdCommon.GenerateAndSetBisId(t,"fb_")}},{key:"GenerateAndSetBisIdToTwitterAds",value:function GenerateAndSetBisIdToTwitterAds(t){return PosdCommon.GenerateAndSetBisId(t,"tw_")}},{key:"GenerateAndSetBisIdToRedditAds",value:function GenerateAndSetBisIdToRedditAds(t){return PosdCommon.GenerateAndSetBisId(t,"rd_")}},{key:"GenerateAndSetBisIdToPinterestAds",value:function GenerateAndSetBisIdToPinterestAds(t){return PosdCommon.GenerateAndSetBisId(t,"pt_")}},{key:"GenerateAndSetBisIdToInstagramAds",value:function GenerateAndSetBisIdToInstagramAds(t){return PosdCommon.GenerateAndSetBisId(t,"ig_")}},{key:"SetBisDepth",value:function SetBisDepth(t,e){t&&t.setAttribute&&t.setAttribute("bis_depth",e)}},{key:"SetBisChainId",value:function SetBisChainId(t,e){t&&t.setAttribute&&t.setAttribute("bis_chainid",e)}},{key:"SetBannerId",value:function SetBannerId(t,e){t&&t.setAttribute&&t.setAttribute("bis_bannerid",e)}},{key:"UpdateCandidateStatusBorderColor",value:function UpdateCandidateStatusBorderColor(t,e){if(t&&t.style&&t.style.cssText&&e){var n="";e.filteredOut?n=a.STYLES_BORDER_BANNER_FILTERED:e.sentToBackend?n=a.STYLES_BORDER_BANNER_SENT:e.targetUrlExtracted?n=a.STYLES_BORDER_BANNER_URL_EXTRACTED:e.fullContentExtracted&&(n=a.STYLES_BORDER_BANNER_CONTENT_EXTRACTED);var i=t.style.cssText;i.includes(n)||(i=i.replace(/(border: .{3,} solid 6px !important;)|(border: 6px solid .{3,} !important;)/,n),t.style.cssText=i)}}},{key:"GetMainDomainFromHost",value:function GetMainDomainFromHost(t){if(t&&t.split){var e=t.split(".");if(e.length>=2)return e[e.length-2]+"."+e[e.length-1]}return null}},{key:"GetMainDomainFromUrl",value:function GetMainDomainFromUrl(t){return PosdCommon.GetMainDomainFromHost(PosdCommon.GetHostNameFromUrl(t))}},{key:"GetHostNameFromUrl",value:function GetHostNameFromUrl(t){var e=t.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=e&&e.length>2&&"string"==typeof e[2]&&e[2].length>0?e[2]:null}},{key:"IsUrlFromHost",value:function IsUrlFromHost(t,e){return-1!==t.indexOf(PosdCommon.GetMainDomainFromUrl(e))}},{key:"IsPublisherInBlacklist",value:function IsPublisherInBlacklist(t,e){var n=!1,a=PosdCommon.GetHostNameFromUrl(t);return e&&e.length&&a&&e.includes(a)&&(n=!0),n}},{key:"GetUrlFromStyleStr",value:function GetUrlFromStyleStr(t){var e=t.replace(/"/g,"'"),n=e.indexOf("http");-1==n&&(n=e.indexOf("//"));var a=e.indexOf("'",n),i="";return n>0&&a>0&&n<a&&(i=e.substr(n,a-n)),i}},{key:"GetCurrentDataTimeStr",value:function GetCurrentDataTimeStr(){function Normalize2(t){return t<10?"0"+t:""+t}var t=new Date;return"".concat(t.getFullYear(),"-").concat(Normalize2(t.getMonth()+1),"-").concat(Normalize2(t.getDate())," ").concat(Normalize2(t.getHours()),":").concat(Normalize2(t.getMinutes()),":").concat(Normalize2(t.getSeconds()))}},{key:"GetWindowSize",value:function GetWindowSize(){return{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}}},{key:"IsIframeHasContentScript",value:function IsIframeHasContentScript(t){try{if(t&&!PosdCommon.IsIframeSecure(t)&&"ok"!==t.contentDocument.body.getAttribute("bis_status"))return!1}catch(t){}return!0}},{key:"IsIframeSecure",value:function IsIframeSecure(t){return!t||0!==t.src.length&&"about:blank"!==t.src&&"about:srcdoc"!==t.src&&0!==t.src.indexOf("javascript:")}},{key:"isValidUrl",value:function isValidUrl(t){return"string"==typeof t&&t.length>0&&(-1!==t.indexOf("http")||-1!==t.indexOf("//"))}},{key:"IsValidBisId",value:function IsValidBisId(t){return!!(t.startsWith("mp_")||t.startsWith("bg_")||t.startsWith("fr_"))}},{key:"IsYouTubeUrl",value:function IsYouTubeUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.indexOf("youtube.com")}},{key:"IsFacebookUrl",value:function IsFacebookUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.indexOf("facebook.com")}},{key:"IsTwitterUrl",value:function IsTwitterUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.indexOf("twitter.com")}},{key:"IsRedditUrl",value:function IsRedditUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.indexOf("reddit.com")}},{key:"IsTiktokUrl",value:function IsTiktokUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.indexOf("tiktok.com")}},{key:"IsPinterestUrl",value:function IsPinterestUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.search(/pinterest\.(com|ca|at|ch|cl|co\.kr|com\.au|com\.mx|co\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/)}},{key:"IsInstagramUrl",value:function IsInstagramUrl(t){var e=PosdCommon.GetHostNameFromUrl(t);return!!e&&-1!==e.indexOf("instagram.com")}},{key:"GetFullIdStr",value:function GetFullIdStr(t,e,n){return"ext:".concat(chrome.runtime.id,"-chainId:").concat(t,"-frameId:").concat(e,"-bisId:").concat(n)}},{key:"GetRandomIntInRange",value:function GetRandomIntInRange(t,e){return parseInt((Math.random()*(e-t)+t).toFixed(0))}},{key:"GetCurrentTimestamp",value:function GetCurrentTimestamp(){return Date.now()/1e3|0}},{key:"GetCurrentTimestampMs",value:function GetCurrentTimestampMs(){return Date.now()}},{key:"GenerateQuickId",value:function GenerateQuickId(){return(Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)).substring(0,22)}},{key:"GenerateTicketId",value:function GenerateTicketId(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))}},{key:"IsInFilterList",value:function IsInFilterList(t,e){var n=!1;if(t)for(var a=0;a<t.length&&!n;a++)-1!=e.indexOf(t[a])&&(n=!0);return n}},{key:"IsChrome",value:function IsChrome(){return-1!==navigator.userAgent.indexOf("Chrome")}},{key:"IsFirefox",value:function IsFirefox(){return-1!==navigator.userAgent.indexOf("Firefox")}},{key:"IsFBVideoDataValid",value:function IsFBVideoDataValid(t){var e=!1;if(t)try{"number"==typeof t.detectionTime&&"string"==typeof t.videoId&&"string"==typeof t.videoUrl&&t.videoId.length&&t.videoUrl.length&&(e=!0)}catch(t){}return e}},{key:"GetDefaultAdblockerStatus",value:function GetDefaultAdblockerStatus(){var t={};return t[a.ADBLOCKER_FOR_DISPLAY]=a.ADBLOCKER_STATUS_DISABLED,t[a.ADBLOCKER_FOR_FACEBOOK]=a.ADBLOCKER_STATUS_DISABLED,t[a.ADBLOCKER_FOR_TWITTER]=a.ADBLOCKER_STATUS_DISABLED,t[a.ADBLOCKER_FOR_REDDIT]=a.ADBLOCKER_STATUS_DISABLED,t[a.ADBLOCKER_FOR_PINTEREST]=a.ADBLOCKER_STATUS_DISABLED,t[a.ADBLOCKER_FOR_INSTAGRAM]=a.ADBLOCKER_STATUS_DISABLED,t}},{key:"GetImagesSpacePercentage",value:function GetImagesSpacePercentage(t,e,n){var a=0;if(e){var i=Array.from(e.querySelectorAll("*")).map((function(e){return e.shadowRoot?e.shadowRoot.querySelectorAll(t):"IMG"===e.nodeName?e:e.querySelectorAll(t)})).filter((function(t){return t})).reduce((function(t,e){return e&&e.length&&e.forEach((function(e){t.includes(e)||t.push(e)})),"IMG"===e.nodeName&&t.push(e),t}),[]);if(i&&i.length>=1&&n.w*n.h>0){var r=0;i.forEach((function(t){var e=PosdCommon.GetElementSize(t);r+=e.w*e.h})),r&&(a=r/(n.w*n.h)*100)}}return a}},{key:"GetCookie",value:function GetCookie(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}}]),PosdCommon}();t.exports=i},3124:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(4019),i=function(){function PosdConst(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdConst)}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdConst,null,[{key:"EXCLUDE_DOMAINS_LIST",value:function EXCLUDE_DOMAINS_LIST(){return"EXCLUDE_DOMAINS_LIST"}},{key:"EXCLUDE_PAGES_LIST",value:function EXCLUDE_PAGES_LIST(){return"EXCLUDE_PAGES_LIST"}},{key:"DOCUMENT_READYSTATE_LOADING",get:function get(){return"loading"}},{key:"DOCUMENT_READYSTATE_INTERACTIVE",get:function get(){return"interactive"}},{key:"DOCUMENT_READYSTATE_COMPLETE",get:function get(){return"complete"}},{key:"ATTRIBUTE_BIS_ID",get:function get(){return"bis_id"}},{key:"ATTRIBUTE_BIS_SIZE",get:function get(){return"bis_size"}},{key:"ATTRIBUTE_BIS_STYLE",get:function get(){return"bis_style"}},{key:"ATTRIBUTE_BIS_STATUS",get:function get(){return"bis_status"}},{key:"ATTRIBUTE_BIS_LABEL",get:function get(){return"bis_label"}},{key:"ATTRIBUTE_BIS_ELEMENT_ID",get:function get(){return"bis_element_id"}},{key:"ATTRIBUTE_BIS_HIDE_HEIGHT",get:function get(){return"bis_hide_height"}},{key:"ATTRIBUTE_BIS_HIDE_WIDTH",get:function get(){return"bis_hide_width"}},{key:"ATTRIBUTE_BIS_HIDE_STATUS",get:function get(){return"bis_hide_status"}},{key:"ATTRIBUTE_BIS_HIDE_LEFT_OFFSET",get:function get(){return"bis_hide_left_offset"}},{key:"ACTIVATION_BY_ADS_MANAGER",get:function get(){return"ACTIVATION_BY_ADS_MANAGER"}},{key:"ACTIVATION_BY_ADS_SELF",get:function get(){return"ACTIVATION_BY_ADS_SELF"}},{key:"MESSAGE_ID",get:function get(){return"PANELOS_MESSAGE"}},{key:"MESSAGE_TYPE_TEST",get:function get(){return"TEST"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT",get:function get(){return"IFRAME_CONTENT"}},{key:"MESSAGE_TYPE_IFRAME_INVALID_CHAIN_SEGMENT_CONTENT",get:function get(){return"IFRAME_INVALID_CHAIN_SEGMENT_CONTENT"}},{key:"MESSAGE_TYPE_TAB_INITIALIZATION",get:function get(){return"TAB_INITIALIZATION"}},{key:"MESSAGE_TYPE_TAB_SINGLE_PAGE_REINITIALIZATION",get:function get(){return"TAB_SINGLE_PAGE_REINITIALIZATION"}},{key:"MESSAGE_TYPE_TAB_URL_CHANGED",get:function get(){return"TAB_URL_CHANGED"}},{key:"MESSAGE_TYPE_TAB_ADBLOCKER_STATUS_CHANGED",get:function get(){return"TAB_ADBLOCKER_STATUS_CHANGED"}},{key:"MESSAGE_TYPE_IFRAME_INITIALIZATION",get:function get(){return"IFRAME_INITIALIZATION"}},{key:"MESSAGE_TYPE_IFRAME_INITIALIZATION_RESPONSE",get:function get(){return"IFRAME_INITIALIZATION_RESPONSE"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_INPUTS",get:function get(){return"IFRAME_CONTENT_INFO_DETECTED_INPUTS"}},{key:"MESSAGE_TYPE_IFRAME_CONTENT_INFO_DETECTED_REDIRECTS",get:function get(){return"IFRAME_CONTENT_INFO_DETECTED_REDIRECTS"}},{key:"MESSAGE_TYPE_HIDDEN_AD_CANDIDATES_AMOUNT",get:function get(){return"HIDDEN_AD_CANDIDATES_AMOUNT"}},{key:"MESSAGE_TYPE_GET_WINDOW_TARGET_URL",get:function get(){return"GET_WINDOW_TARGET_URL"}},{key:"MESSAGE_TYPE_GET_WINDOW_TARGET_URL_RESPOND",get:function get(){return"GET_WINDOW_TARGET_URL_RESPOND"}},{key:"MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL",get:function get(){return"GET_WINDOW_CLICK_TARGET_URL"}},{key:"MESSAGE_TYPE_GET_WINDOW_CLICK_TARGET_URL_RESPOND",get:function get(){return"GET_WINDOW_CLICK_TARGET_URL_RESPOND"}},{key:"MESSAGE_TYPE_GET_FRAME_CONTENT",get:function get(){return"GET_FRAME_CONTENT"}},{key:"MESSAGE_TYPE_TARGET_URL_DETECTION_BY_CLICK",get:function get(){return"TARGET_URL_DETECTION_BY_CLICK"}},{key:"MESSAGE_TYPE_NEW_PAGE_CREATED_TICKET",get:function get(){return"NEW_PAGE_CREATED_TICKET"}},{key:"MESSAGE_TYPE_PANEL_REGULATOR_RESULT",get:function get(){return"PANEL_REGULATOR_RESULT"}},{key:"MESSAGE_TYPE_OUT_TICKET",get:function get(){return"OUT_TICKET"}},{key:"MESSAGE_TYPE_CHAIN_ACTIVATION",get:function get(){return"CHAIN_ACTIVATION"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_SKINADS",get:function get(){return"CANDIDATES_DATA_SKINADS"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_BANNERS",get:function get(){return"CANDIDATES_DATA_BANNERS"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_FACEBOOK",get:function get(){return"CANDIDATES_DATA_FACEBOOK"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_INSTAGRAM",get:function get(){return"CANDIDATES_DATA_INSTAGRAM"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_TWITTER",get:function get(){return"CANDIDATES_DATA_TWITTER"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_REDDIT",get:function get(){return"CANDIDATES_DATA_REDDIT"}},{key:"MESSAGE_TYPE_CANDIDATES_DATA_PINTEREST",get:function get(){return"CANDIDATES_DATA_PINTEREST"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_FACEBOOK",get:function get(){return"CANDIDATE_PLACEMENTS_FACEBOOK"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TWITTER",get:function get(){return"CANDIDATE_PLACEMENTS_TWITTER"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_REDDIT",get:function get(){return"CANDIDATE_PLACEMENTS_REDDIT"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_PINTEREST",get:function get(){return"CANDIDATE_PLACEMENTS_PINTEREST"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_HTML5",get:function get(){return"CANDIDATE_PLACEMENTS_HTML5"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_TIKTOK",get:function get(){return"CANDIDATE_PLACEMENTS_TIKTOK"}},{key:"MESSAGE_TYPE_CANDIDATE_PLACEMENTS_INSTAGRAM",get:function get(){return"CANDIDATE_PLACEMENTS_INSTAGRAM"}},{key:"MESSAGE_TYPE_HTML5_CANDIDATES_EXTRACTION_STATUSES",get:function get(){return"HTML5_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_BANNER_CANDIDATES_EXTRACTION_STATUSES",get:function get(){return"BANNER_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_SKIN_AD_CANDIDATES_EXTRACTION_STATUSES",get:function get(){return"SKIN_AD_CANDIDATES_EXTRACTION_STATUSES"}},{key:"MESSAGE_TYPE_VIDEO_XHR_CANDIDATE",get:function get(){return"VIDEO_XHR_CANDIDATE"}},{key:"MESSAGE_TYPE_VIDEO_HAR",get:function get(){return"VIDEO_HAR"}},{key:"MESSAGE_TYPE_FACEBOOK_VIDEO_DATA",get:function get(){return"FACEBOOK_VIDEO_DATA"}},{key:"MESSAGE_TYPE_FACEBOOK_INSTREAM_DATA",get:function get(){return"FACEBOOK_INSTREAM_DATA"}},{key:"MESSAGE_TYPE_FACEBOOK_MARKETPLACE_VIDEO_DATA",get:function get(){return"FACEBOOK_MARKETPLACE_VIDEO_DATA"}},{key:"MESSAGE_TYPE_PINTEREST_VIDEO_DATA",get:function get(){return"PINTEREST_VIDEO_DATA"}},{key:"MESSAGE_TYPE_TWITTER_VIDEO_DATA",get:function get(){return"TWITTER_VIDEO_DATA"}},{key:"MESSAGE_TYPE_REDDIT_VIDEO_DATA",get:function get(){return"REDDIT_VIDEO_DATA"}},{key:"MESSAGE_TYPE_REDDIT_RIGHT_COLUMN_DATA",get:function get(){return"REDDIT_RIGHT_COLUMN_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_VIDEO_DATA",get:function get(){return"INSTAGRAM_VIDEO_DATA"}},{key:"MESSAGE_TYPE_INSTAGRAM_STORY_DATA",get:function get(){return"INSTAGRAM_STORY_DATA"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANALYTICS_ID",get:function get(){return"GET_PANALYTICS_ID"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_PANELOS_VERSION",get:function get(){return"GET_PANELOS_VERSION"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_STATUS",get:function get(){return"GET_ADBLOCKER_STATUS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_ADBLOCKER_COUNTERS",get:function get(){return"GET_ADBLOCKER_COUNTERS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_ADBLOCKER",get:function get(){return"ENABLE_ADBLOCKER"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_ADBLOCKER",get:function get(){return"DISABLE_ADBLOCKER"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_GET_DATA_COLLECTION_STATUS",get:function get(){return"GET_DATA_COLLECTION_STATUS"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_ENABLE_DATA_COLLECTION",get:function get(){return"ENABLE_DATA_COLLECTION"}},{key:"MESSAGE_TYPE_PANELOS_CLIENT_REQUESTS_DISABLE_DATA_COLLECTION",get:function get(){return"DISABLE_DATA_COLLECTION"}},{key:"MESSAGE_TYPE_ADBLOCK_INSPECTOR_AGENT_REPORT",get:function get(){return"ADBLOCK_INSPECTOR_AGENT_REPORT"}},{key:"MESSAGE_TYPE_GET_EXCLUDE_LIST",get:function get(){return"GET_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_INTO_EXCLUDE_LIST",get:function get(){return"ADD_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_REMOVE_FROM_EXCLUDE_LIST",get:function get(){return"REMOVE_FROM_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST",get:function get(){return"ADD_CURRENT_DOMAIN_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST",get:function get(){return"ADD_CURRENT_PAGE_INTO_EXCLUDE_LIST"}},{key:"MESSAGE_TYPE_GET_CURRENT_DOMAIN",get:function get(){return"GET_CURRENT_DOMAIN"}},{key:"MESSAGE_TYPE_GET_CURRENT_PAGE_URL",get:function get(){return"GET_CURRENT_PAGE_URL"}},{key:"ADBLOCKER_STATUS_ENABLED",get:function get(){return"enabled"}},{key:"ADBLOCKER_STATUS_DISABLED",get:function get(){return"disabled"}},{key:"VIDEO_TRAFFIC_SOURCE_HTML",get:function get(){return"HTML"}},{key:"VIDEO_TRAFFIC_SOURCE_JS",get:function get(){return"JS"}},{key:"VIDEO_TRAFFIC_SOURCE_XHR",get:function get(){return"XHR"}},{key:"VIDEO_TRAFFIC_MEDIA_TYPE_HTML",get:function get(){return"HTML"}},{key:"VIDEO_TRAFFIC_FACEBOOK_MEDIA_TYPE_JSON",get:function get(){return"JSON"}},{key:"VIDEO_TRAFFIC_FACEBOOK_MEDIA_ALIAS_JSON",get:function get(){return"JSON_FB"}},{key:"VIDEO_TRAFFIC_ALIAS_YT_JSON_NEXTPAGE",get:function get(){return"YT_JSON_NEXTPAGE"}},{key:"VIDEO_TRAFFIC_ALIAS_YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE",get:function get(){return"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_FEED",get:function get(){return"feed"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_FEED_WATCH",get:function get(){return"feedWatch"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_MARKETPLACE",get:function get(){return"marketplace"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_RIGHT_COLOMN",get:function get(){return"rightColumn"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_STORIES",get:function get(){return"stories"}},{key:"FACEBOOK_AD_PLACEMENT_TYPE_VIDEO_PAGE",get:function get(){return"videoPage"}},{key:"FACEBOOK_AD_VIDEO_URL_REPLACE_NAME",get:function get(){return"[ADVERTISER_NAME]"}},{key:"FACEBOOK_AD_VIDEO_URL_REPLACE_VIDEO_ID",get:function get(){return"[VIDEO_ID]"}},{key:"TWITTER_AD_PLACEMENT_TYPE_FEED",get:function get(){return"feedPost"}},{key:"TWITTER_AD_PLACEMENT_TYPE_FEED_WHO_TO_FOLLOW",get:function get(){return"feedWhoToFollow"}},{key:"TWITTER_AD_PLACEMENT_TYPE_RIGHT_COLUMN_WHO_TO_FOLLOW",get:function get(){return"rightColumnWhoToFollow"}},{key:"REDDIT_AD_PLACEMENT_TYPE_FEED",get:function get(){return"feed"}},{key:"REDDIT_AD_PLACEMENT_TYPE_COMMENT_PAGE",get:function get(){return"commentPage"}},{key:"REDDIT_AD_PLACEMENT_TYPE_RIGHT_COLUMN",get:function get(){return"rightColumn"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_FEED",get:function get(){return"feed"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_SEARCH",get:function get(){return"searchPage"}},{key:"PINTEREST_AD_PLACEMENT_TYPE_PIN",get:function get(){return"pinPage"}},{key:"PINTEREST_LOADER_TYPE_PIN_PAGE",get:function get(){return"pinPage"}},{key:"PINTEREST_LOADER_TYPE_USER_INFO",get:function get(){return"userInfo"}},{key:"INSTAGRAM_AD_PLACEMENT_TYPE_FEED",get:function get(){return"feed"}},{key:"INSTAGRAM_AD_PLACEMENT_TYPE_STORY",get:function get(){return"story"}},{key:"KNOWN_CSS_NAMES",get:function get(){return["align-content","align-items","align-self","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","block-size","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start-color","border-block-start-style","border-block-start-width","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-end-end-radius","border-end-start-radius","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-spacing","border-start-end-radius","border-start-start-radius","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","color-adjust","color-interpolation","color-interpolation-filters","column-count","column-fill","column-gap","column-rule-color","column-rule-style","column-rule-width","column-width","contain","content","counter-increment","counter-reset","counter-set","cursor","cx","cy","direction","display","dominant-baseline","empty-cells","fill","fill-opacity","fill-rule","filter","flex-basis","flex-direction","flex-grow","flex-shrink","flex-wrap","float","flood-color","flood-opacity","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column-end","grid-column-start","grid-row-end","grid-row-start","grid-template-areas","grid-template-columns","grid-template-rows","height","hyphens","image-orientation","image-rendering","ime-mode","inline-size","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","lighting-color","line-break","line-height","list-style-image","list-style-position","list-style-type","margin-block-end","margin-block-start","margin-bottom","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marker-end","marker-mid","marker-start","mask","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-position-x","mask-position-y","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","object-fit","object-position","opacity","order","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-anchor","overflow-block","overflow-inline","overflow-wrap","overflow-x","overflow-y","overscroll-behavior-x","overscroll-behavior-y","padding-block-end","padding-block-start","padding-bottom","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","paint-order","perspective","perspective-origin","pointer-events","position","quotes","r","resize","right","row-gap","ruby-align","ruby-position","rx","ry","scroll-behavior","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","scrollbar-color","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","table-layout","text-align","text-align-last","text-anchor","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip-ink","text-decoration-style","text-decoration-thickness","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-offset","top","touch-action","transform","transform-box","transform-origin","transform-style","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vector-effect","vertical-align","visibility","white-space","width","will-change","word-break","word-spacing","writing-mode","x","y","z-index","-moz-appearance","-moz-box-align","-moz-box-direction","-moz-box-flex","-moz-box-ordinal-group","-moz-box-orient","-moz-box-pack","-moz-float-edge","-moz-force-broken-image-icon","-moz-image-region","-moz-orient","-moz-outline-radius-bottomleft","-moz-outline-radius-bottomright","-moz-outline-radius-topleft","-moz-outline-radius-topright","-moz-stack-sizing","-moz-tab-size","-moz-text-size-adjust","-moz-user-focus","-moz-user-input","-moz-user-modify","-moz-window-dragging","-webkit-line-clamp","-webkit-text-fill-color","-webkit-text-stroke-color","-webkit-text-stroke-width","offset-distance","offset-path","offset-rotate","orphans","speak","tab-size","text-underline-position","text-size-adjust","widows","zoom","-webkit-appearance","-webkit-border-horizontal-spacing","-webkit-border-image","-webkit-border-vertical-spacing","-webkit-box-align","-webkit-box-decoration-break","-webkit-box-direction","-webkit-box-flex","-webkit-box-ordinal-group","-webkit-box-orient","-webkit-box-pack","-webkit-box-reflect","column-span","backdrop-filter","-webkit-font-smoothing","-webkit-highlight","-webkit-hyphenate-character","-webkit-line-break","-webkit-locale","-webkit-margin-before-collapse","-webkit-margin-after-collapse","-webkit-mask-box-image","-webkit-mask-box-image-outset","-webkit-mask-box-image-repeat","-webkit-mask-box-image-slice","-webkit-mask-box-image-source","-webkit-mask-box-image-width","-webkit-mask-clip","-webkit-mask-composite","-webkit-mask-image","-webkit-mask-origin","-webkit-mask-position","-webkit-mask-repeat","-webkit-mask-size","-webkit-print-color-adjust","-webkit-rtl-ordering","-webkit-tap-highlight-color","-webkit-text-combine","-webkit-text-decorations-in-effect","-webkit-text-emphasis-color","-webkit-text-emphasis-position","-webkit-text-emphasis-style","-webkit-text-orientation","-webkit-text-security","-webkit-user-drag","-webkit-user-modify","-webkit-writing-mode","-webkit-app-region","buffered-rendering","color-rendering","alignment-baseline","baseline-shift","d"]}},{key:"FACEBOOK_DESIGN_VERSION_OLD",get:function get(){return 1}},{key:"FACEBOOK_DESIGN_VERSION_NEW",get:function get(){return 2}},{key:"OUT_TICKET_TYPE_SINGLE",get:function get(){return"SINGLE"}},{key:"OUT_TICKET_TYPE_MULTI",get:function get(){return"MULTI"}},{key:"ADBLOCKER_FOR_DISPLAY",get:function get(){return"DISPLAY"}},{key:"ADBLOCKER_FOR_FACEBOOK",get:function get(){return"FACEBOOK"}},{key:"ADBLOCKER_FOR_TWITTER",get:function get(){return"TWITTER"}},{key:"ADBLOCKER_FOR_REDDIT",get:function get(){return"REDDIT"}},{key:"ADBLOCKER_FOR_PINTEREST",get:function get(){return"PINTEREST"}},{key:"ADBLOCKER_FOR_INSTAGRAM",get:function get(){return"INSTAGRAM"}},{key:"AD_DETECTOR_INITIATOR_TIMER",get:function get(){return"timer"}},{key:"AD_DETECTOR_INITIATOR_MUTATION",get:function get(){return"mutation"}},{key:"AD_DETECTOR_INITIATOR_PAGECHANGE",get:function get(){return"pagechange"}},{key:"AD_DETECTOR_INITIATOR_ACTIVATION",get:function get(){return"activation"}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_NONE",get:function get(){return 0}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_INITED",get:function get(){return 1}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_STARTED",get:function get(){return 2}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_STARTED",get:function get(){return 3}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_TARGET_URL_DETECTION_FINISHED",get:function get(){return 4}},{key:"IFRAMES_CHAIN_BUILDING_STATUS_FINISHED",get:function get(){return 5}},{key:"CANDIDATE_PROCESS_STATUS_DETECED",get:function get(){return 1}},{key:"CANDIDATE_PROCESS_STATUS_START_PROCESSING",get:function get(){return 2}},{key:"CANDIDATE_PROCESS_STATUS_PROCESSING_ACTIVATED",get:function get(){return 3}},{key:"CANDIDATE_PROCESS_STATUS_PREBUILD_INFO_SENT",get:function get(){return 4}},{key:"TICKET_BUILDING_STATUS_INIT",get:function get(){return 0}},{key:"TICKET_BUILDING_STATUS_STARTED",get:function get(){return 1}},{key:"TICKET_BUILDING_STATUS_GETTING_WEBNAVIGATION_IFRAMES",get:function get(){return 2}},{key:"TICKET_BUILDING_STATUS_GOT_WEBNAVIGATION_IFRAMES",get:function get(){return 3}},{key:"TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_ACTIVE",get:function get(){return 4}},{key:"TICKET_BUILDING_STATUS_CONSTRUCT_IFRAME_CHAINS_DONE",get:function get(){return 5}},{key:"TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_ACTIVE",get:function get(){return 6}},{key:"TICKET_BUILDING_STATUS_DEEP_TARGET_URL_DETECTION_DONE",get:function get(){return 7}},{key:"TICKET_BUILDING_STATUS_DONE",get:function get(){return 8}},{key:"TICKET_ALIAS_PANALYTICSID",get:function get(){return a.decode("cGFuZWxpc3RJZA==")}},{key:"TICKET_ALIAS_PINSTANCEID",get:function get(){return a.decode("cGFuZWxJZA==")}},{key:"MAX_OUT_TICKETS_QUEUE_LENGTH",get:function get(){return 20}},{key:"STYLES_BORDER_BANNER_CONTENT_EXTRACTED",get:function get(){return"border: 6px solid blue !important;"}},{key:"STYLES_BORDER_BANNER_URL_EXTRACTED",get:function get(){return"border: 6px solid blueviolet !important;"}},{key:"STYLES_BORDER_BANNER_FILTERED",get:function get(){return"border: 6px solid orange !important;"}},{key:"STYLES_BORDER_BANNER_SENT",get:function get(){return"border: green solid 6px !important;"}},{key:"STYLES_OUTLINE_SUCCESS_DETECT",get:function get(){return"outline: green solid 6px !important;"}},{key:"STYLES_OUTLINE_VIDEO_AD",get:function get(){return"outline: rgba(42, 213, 255, 1) solid 6px !important;"}},{key:"STYLES_OUTLINE_TEXT_AD",get:function get(){return"outline: rgba(243, 143, 20, 1) solid 6px !important;"}}]),PosdConst}();t.exports=i},1850:(t,e,n)=>{function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var a=n(3124),i=n(1225),r=function(){function PosdMessage(){!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,PosdMessage)}return function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(PosdMessage,null,[{key:"IsValid",value:function IsValid(t){try{if(void 0!==t&&void 0!==t.posdMessageId&&void 0!==t.type&&void 0!==t.content)return t.posdMessageId&&t.posdMessageId===a.MESSAGE_ID}catch(t){}return!1}},{key:"IsStrictValid",value:function IsStrictValid(t){try{if(void 0!==t&&void 0!==t.posdMessageId&&void 0!==t.from&&void 0!==t.to&&void 0!==t.type&&void 0!==t.content)return t.posdMessageId&&t.posdMessageId===a.MESSAGE_ID}catch(t){}return!1}},{key:"EmptyMessage",get:function get(){return{posdMessageId:a.MESSAGE_ID,posdHash:i.GenerateQuickId(),from:"",to:"",multiTo:[],type:"",content:""}}}]),PosdMessage}();t.exports=r},4019:t=>{var e={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function encode(t){var n,a,i,r,o,s,d,u="",c=0;for(t=e._utf8_encode(t);c<t.length;)r=(n=t.charCodeAt(c++))>>2,o=(3&n)<<4|(a=t.charCodeAt(c++))>>4,s=(15&a)<<2|(i=t.charCodeAt(c++))>>6,d=63&i,isNaN(a)?s=d=64:isNaN(i)&&(d=64),u=u+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(d);return u},decode:function decode(t){if("{"===t[0])return t;var n,a,i,r,o,s,d="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)n=this._keyStr.indexOf(t.charAt(u++))<<2|(r=this._keyStr.indexOf(t.charAt(u++)))>>4,a=(15&r)<<4|(o=this._keyStr.indexOf(t.charAt(u++)))>>2,i=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(u++))),d+=String.fromCharCode(n),64!=o&&(d+=String.fromCharCode(a)),64!=s&&(d+=String.fromCharCode(i));return d=e._utf8_decode(d)},_utf8_encode:function _utf8_encode(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var a=t.charCodeAt(n);a<128?e+=String.fromCharCode(a):a>127&&a<2048?(e+=String.fromCharCode(a>>6|192),e+=String.fromCharCode(63&a|128)):(e+=String.fromCharCode(a>>12|224),e+=String.fromCharCode(a>>6&63|128),e+=String.fromCharCode(63&a|128))}return e},_utf8_decode:function _utf8_decode(t){for(var e="",n=0,a=0,i=0,r=0;n<t.length;)(a=t.charCodeAt(n))<128?(e+=String.fromCharCode(a),n++):a>191&&a<224?(i=t.charCodeAt(n+1),e+=String.fromCharCode((31&a)<<6|63&i),n+=2):(i=t.charCodeAt(n+1),r=t.charCodeAt(n+2),e+=String.fromCharCode((15&a)<<12|(63&i)<<6|63&r),n+=3);return e}};t.exports=e},7401:t=>{t.exports='{"configInfo":{"panelVersion":"1.9.15","version":"1.91"},"loadManagement":{"sendCandidatesSkinAd":true,"sendCandidatesBanner":true,"sendCandidatesHtml5":true,"sendYoutubeVideoTraffics":true,"sendNonYoutubeVideoTraffics":true,"sendFacebookAds":true,"sendTwitterAds":true,"sendRedditAds":true,"sendPinterestAds":true,"sendTiktokVideoTraffics":true,"sendInstagramAds":true,"sendFacebookVideoTraffics":true},"blacklistPublishers":["mail.google.com","mail.yahoo.com","mail.aol.com","outlook.live.com","outlook.office365.com","google.com","docs.google.com","drive.google.com","calendar.google.com","translate.google.com","classroom.google.com","accounts.google.com","meet.google.com","photos.google.com","myaccount.google.com","contacts.google.com","duo.google.com","hangouts.google.com","keep.google.com","jamboard.google.com","classroom.google.com","earth.google.com","artsandculture.google.com","podcasts.google.com","one.google.com","developers.google.com","fi.google.com","files.google.com","groups.google.com","health.google","pay.google.com","workspace.google.com","shopping.google.com","store.google.com","sites.google.com","stadia.google.com","translate.google.com","voice.google.com","steamcommunity.com","store.steampowered.com","fredericksburg-inn.com","truspaceaspire.com","picturecreator9.in","iek-akmi.edu.gr","sbie.edu.gr","mitropolitiko.edu.gr","servergarden.hu","shoemart.gr","biscience.atlassian.net","amazonaws.com","adviewer.adcint.net","github.com","chat.google.com","twitch.tv","f95zone.to","pl.xhamster.com","outlook.office.com","developer.mozilla.org","instagram.com"],"blacklistBannerImgSrc":[".files.wordpress.com/",".outlook.office.net/",".wikimedia.org/",".azureedge.net",".yimg.com/","image.winudf.com/"],"blacklistBannerHref":["//play.google.com/store/apps/","//itunes.apple.com/app/","//www.youtube.com/watch","//zoom.us/","rozetka."],"blacklistIframeSrc":["facebook.com/","twitter.com/","youtube-nocookie.com/embed/","//vk.com/","//www.vk.com/","//linkedin.com/","//www.linkedin.com/","//instagram.com/","//www.instagram.com/","//www.google.com/recaptcha/api2/","//hangouts.google.com/webchat/","//www.google.com/calendar/","//www.google.com/maps/embed","spotify.com/","soundcloud.com/","//player.vimeo.com/","//disqus.com/","//tgwidget.com/","//js.driftt.com/","friends2follow.com","/widget","login","//video.bigmir.net/","blogger.com","//smartlock.google.com/","//keep.google.com/","/web.tolstoycomments.com/","moz-extension://","chrome-extension://","/auth/","//analytics.google.com/","adclarity.com","paddle.com/checkout","hcaptcha.com","recaptcha.net","2captcha.com","accounts.google.com","www.google.com/shopping/customerreviews","buy.tinypass.com","gstatic.com","secureir.ebaystatic.com","docs.google.com","contacts.google.com","github.com","mail.google.com","chat.google.com","audio.xpleer.com","keepa.com","static.xx.fbcdn.net"],"blacklistIframeId":["twitter-widget-","cello__trello-board__"],"blacklistTargetUrl":["adssettings.google.com/whythisad?reasons=","mediamath.com/privacy-policy","info.yahoo.com/privacy","boostbox.com.br","http://alberoonlus.it","http://app.netjobsall.com","http://bagstories.gr","http://caetanostarmercedes.pt","http://caribul.com","http://et.nz","http://fasciaclinics.com","http://fasciaguide.com","http://incoaching.it","http://kiddomstore.gr","http://macon.gr","http://parousiasi.gr","http://pausit.no","http://qavpodcast.com.au","http://starantzis.com","http://survival.gr","http://tecnorulli.com","http://visaprostudy.com.au","http://youbarber.com"],"whitelistCandidatesUrlKeyWords":["/lynad/","banner","/ad","/webads/","ad-sys.","/?gfe_rd=cr","/a.asp","/about/privacy","/aclk?sa=","/ag/","/clicktracker","/connect","/econda","/go","/javascripts/blogger.js","/js/plusone.js","/linkout","/offers","/pagead/","/plugins","/privacy-policy","/scripts/l.php","/servlet/click/zone?zid=","/simpleads/","/site/catsearch","/tncms/tracking","/tsn","/www/delivery/","/xgde.html","/xiti.asp?s=","/webtracking","javascript:window.parent"],"whitelistRedirectionCode":[".location.replace(\\"javascript:window.goog_content\\")"],"videoValidatorsForHTML":[{"name":"HTML","alias":"YT_HTML_DESKTOP_MASTHEAD_AD","mimePattern":"/html/i","domainPattern":"/^https?:\\\\/\\\\/www\\\\.youtube\\\\.com\\\\/?$/","contentPattern":"/videoMastheadAdV3Renderer/m","reduceSizeFilter":{"reducePattern":"/(\\\\<script.{0,200}\\\\>\\\\s*var\\\\s*ytInitialData\\\\s*=.*\\\\s*\\\\<\\\\/\\\\s*script\\\\>)/m","active":true,"regResIndexes":[0]}},{"name":"HTML","alias":"YT_HTML_DESKTOP_IFRAME_MASTHEAD_AD","mimePattern":"/html/i","domainPattern":"/^https:\\\\/\\\\/pubads\\\\.g\\\\.doubleclick\\\\.net\\\\/gampad\\\\/ads\\\\?.*?com\\\\.ythome.*?kmyd\\\\%3Dvideo-masthead/","contentPattern":"/yt.method/m"},{"name":"HTML","alias":"YT_HTML_MOBILE_AD_PLACEMENTS","mimePattern":"/html/i","domainPattern":"/https?:\\\\/\\\\/m\\\\.youtube\\\\.com/","contentPattern":"/adPlacements/"},{"name":"HTML","alias":"YT_HTML_MOBILE_INSCRIPT_AD_PLACEMENTS","mimePattern":"/html/i","domainPattern":"/https?:\\\\/\\\\/m\\\\.youtube\\\\.com/watch\\\\?.+$/","contentPattern":"/\\\\<script.*?\\\\>\\\\s*var\\\\s*ytInitialPlayerResponse\\\\s*=\\\\s*(.*adPlacements.*).*[;]\\\\<\\\\/script\\\\>/m"},{"name":"HTML","alias":"YT_HTML_DESKTOP_INSCRIPT_PLAYER_RESPONSE","mimePattern":"/html/i","domainPattern":"/^https?:\\\\/\\\\/www\\\\.youtube\\\\.com/watch\\\\?.+$/","contentPattern":"/\\\\<script.{0,200}\\\\>\\\\s*var\\\\s*ytInitialPlayerResponse\\\\s*=\\\\W*\\\\\\"responseContext\\\\\\".*adPlacements.*var\\\\s*meta\\\\s*=\\\\s*document\\\\.createElement\\\\(\'meta\'\\\\)/m","reduceSizeFilter":{"reducePattern":"/({window\\\\.ytplayer\\\\s*=\\\\s*{\\\\s*}\\\\s*;\\\\s*ytcfg\\\\.set\\\\(.*}\\\\);)(?:[\\\\s\\\\S]*)(\\\\<script.{0,200}\\\\>\\\\s*var\\\\s*ytInitialPlayerResponse\\\\s*=.*\\\\s*\\\\<\\\\/\\\\s*script\\\\>)/mg","active":true,"regResIndexes":[1,2]}},{"name":"HTML","alias":"HTML_NHL","mimePattern":"/html/i","contentPattern":"/(\\\\&quot\\\\;ad\\\\&quot\\\\;)\\\\W*?(\\\\&quot\\\\;adTagUrl\\\\&quot\\\\;)/m"},{"name":"HTML","alias":"IAB_HTML","mimePattern":"/html/i","contentPattern":"/VAST|VMAP/m"}],"videoValidatorsForJS":[{"name":"JAVASCRIPT","alias":"JS_DAILYMOTION","mimePattern":"/javascript/i","domainPattern":"/https?:\\\\/\\\\/.{0,30}?(dailymotion\\\\.com).*?callback=.*/i","contentPattern":"/VAST|VMAP/m"},{"name":"JAVASCRIPT","alias":"JS_FREEWHEEL","mimePattern":"/javascript/i","contentPattern":"/^tv\\\\.freewheel\\\\.SDK\\\\.\\\\_instanceQueue.{0,100}requestComplete\\\\(\\\\{/"},{"name":"JAVASCRIPT","alias":"JS_INNOVID","mimePattern":"/javascript/i","domainPattern":"/https?:\\\\/\\\\/[^\\\\/]*innovid\\\\.com/","contentPattern":"/SCOPE.baseData.app_data/"},{"name":"JAVASCRIPT","alias":"JS_VIDIBLE","mimePattern":"/javascript/i","domainPattern":"/https?:\\\\/\\\\/[^\\\\/]*vidible\\\\.tv/","contentPattern":"/vpaidAd.initAd = function/"},{"name":"JSON","alias":"JSON_TIKTOK_FEED","mimePattern":"/javascript/i","contentPattern":"/ItemModule.*[^adLabelVersion]adLabelVersion/"}],"videoValidatorsForXHR":[{"name":"XML_URLENCODED","alias":"YT_XML_EMBED","mimePattern":"/urlencoded/i","domainPattern":"/https:\\\\/\\\\/www\\\\.youtube\\\\.com\\\\/get_video_info/","contentPattern":"/vast|vmap/m","transform":"content => window.atob(content)"},{"name":"XML","alias":"XML_FREEWHEEL","mimePattern":"/xml/i","contentPattern":"/adResponse/m"},{"name":"XML","alias":"IAB_XML","mimePattern":"/xml/i","contentPattern":"/VAST|VMAP/m"},{"name":"XML","alias":"XML_INNOVID","mimePattern":"/xml/i","domainPattern":"/https?:\\\\/\\\\/[^\\\\/]*innovid\\\\.com/","contentPattern":"/extension-config-url|placement-config/"},{"name":"JSON","alias":"JSON_UPLYNK","mimePattern":"/json/i","contentPattern":"/(\\"is_ad\\"\\\\W*?1)((.|\\\\n|\\\\t|\\\\r)*?)(\\"ad_data\\")/m","domainPattern":"/https?://.{0,30}?(uplynk\\\\.com)\\\\/.*/i"},{"name":"JSON","alias":"YT_JSON_NEXTPAGE","mimePattern":"/json/i","domainPattern":"/^https?:\\\\/\\\\/www\\\\.youtube\\\\.com\\\\/watch\\\\?v=.+$/"},{"name":"JSON","alias":"YT_JSON_NEXTPAGE_PLAYER","mimePattern":"/json/i","domainPattern":"/^https?:\\\\/\\\\/www\\\\.youtube\\\\.com\\\\/youtubei\\\\/v1\\\\/player\\\\?key=/","contentPattern":"/adPlacements/"},{"name":"JSON","alias":"YT_MIDROLL_INFO","mimePattern":"/xml|json/i","domainPattern":"/(https?:\\\\/\\\\/((www|m)\\\\.){0,1}(youtube|youtube-nocookie)\\\\.com\\\\/get_midroll_info)|(https?:\\\\/\\\\/((www|m)\\\\.){0,1}youtube\\\\.com\\\\/youtubei\\\\/v1\\\\/player\\\\/ad_break[?]key=)/"},{"name":"JSON","alias":"JSON_NHL","mimePattern":"/json/i","contentPattern":"/flashAdTag|html5AdTag/m"},{"name":"JSON","alias":"JSON_TIKTOK_FEED","mimePattern":"/application\\\\/json/i","domainPattern":"/(tiktok\\\\.com\\\\/api\\\\/recommend\\\\/)|(tiktok\\\\.com\\\\/api\\\\/topic\\\\/)item_list\\\\/\\\\?/","contentPattern":"/itemList/i"},{"name":"JSON","alias":"IAB_JSON","mimePattern":"/json/i","domainPattern":"/^((?!tiktok).)*$/","contentPattern":"/VAST|VMAP/m"}],"facebookConfig":{"FB_CONTENT":"div[id^=\\"mount_\\"]","VIDEO_URL_BY_PATTERN":{"PATTERN":"https://www.facebook.com/plugins/video.php?href=https://www.facebook.com/[ADVERTISER_NAME]/videos/[VIDEO_ID]/&show_text=false&t=0","REGEX_ADVERTISER_NAME":"pg/([^&/]+)","REGEX_VIDEO_ID":"[?&]v=([^&]+).*$","REGEX_VIDEO_SRC":"(?:(\\"hd\\\\_src\\\\_no\\\\_ratelimit\\"\\\\:( |)\\"|\\"hd\\\\_src\\"\\\\:( |)\\"|\\"sd\\\\_src\\\\_no\\\\_ratelimit\\"\\\\:( |)\\"))(.[^,\\"]+)","MAP_REPLACE_UNICODE":[["u0025","%"]]},"TAGS_FOR_LOADING_CHECK":"img, video, svg","FEED_PAGE":{"MIN_IMGS_SPACE_PERCENTAGE":6,"INVALID_PATHS":["/marketplace","/watch"],"FEED_QUERIES":["div[role=\\"feed\\"] > div:not([class])","div[role=\\"main\\"] div>span>span>span>span","div[role=\\"main\\"] span[id=\\"ssrb_feed_start\\"]","div[role=\\"main\\"] h3 ~ div:not([class]):not([aria-hidden])"],"POSTS_QUERY":"div[role=\\"feed\\"] > div, div[role=\\"feed\\"] > span > div","MIN_HEIGHT":1400,"COVER_IMAGE_QUERY":"div[data-instancekey] img"},"FEED_WATCH_PAGE":{"MIN_IMGS_SPACE_PERCENTAGE":6,"FEED_WATCH_QUERIES":["div[role=\\"main\\"] div[class] > div[class] > div:not([class]) > div:not([class]) > div[class] > div[class] > div:not([class])"],"COVER_IMAGE_QUERY":"div > img[referrerpolicy]"},"SPONSORED_TEXTS":["Sponsored","مُموَّل","赞助内容","贊助","Sponzorováno","May Sponsor","Sponsorisé","Gesponsert","प्रायोजित","Bersponsor","Patrocinado","Publicidad","ได้รับการสนับสนุน","Sponsorlu","Được tài trợ","Реклама","La maalgeliyey","Geborg","Sponsor dəstəkli","Ditaja","Disponsori","Sponzorirano","Paeroniet","Patrocinat","Spunsurizatu","Noddwyd","Sponsoreret","Sponsitud","pəɹosuodS","Reklamo","Babestua","Commandité","Sponsore","Yoɓanaama","Stuðlað","Urraithe","Oñepatrosinapyre","Daukar Nauyi","Plaćeni oglas","Icyamamaza ndasukirwaho","Sponsorizzato","Imedhaminiwa","Peye","Sponsorkirî","Apmaksāta reklāma","Remiama","Hirdetés","Misy Mpiantoka","Sponsorjat","Gesponsord","Sponset","Sponsa","Reklama","Sponsorowane","Sponsorizat","Patronadu de:","Zvabhadharirwa","Sponsorizuar","Sponzorované","Sponzorirano","Sponsoroitu","Sponsrad","Sponsorıdû","Kostað","Szpōnzorowane","Χορηγούμενη","Рэклама","Спонсорирано","Спонзорирано","Ивээн тэтгэсэн","Хәйрияче","Демөөрчүлөнгөн","Демеушілік көрсеткен","Գովազդային","ממומן","سپانسرڈ","دارای پشتیبانی مالی","تمويل شوي","پاڵپشتیکراو","ܒܘܕܩܐ ܡܡܘܘܢܐ","পৃষ্ঠপোষকতা কৰা","সৌজন্যে","ਸਰਪ੍ਰਸਤੀ ਪ੍ਰਾਪਤ","પ્રાયોજિત","ପ୍ରଯୋଜିତ","விளம்பரம்","ప్రాయోజితం చేయబడింది","ಪ್ರಾಯೋಜಿತ","സ്പോൺസർ ചെയ്തത്","අනුග්‍රාහක","ได้รับการสนับสนุน","ຜູ້ສະໜັບສະໜູນ","အခပေးကြော်ငြာ","რეკლამა","የተከፈለበት ማስታወቂያ","បានឧបត្ថម្ភ","ⵉⴷⵍ","広告","Paid for by","Paid Partnership","Sponsorisée"],"POSSIBLE_SPONSORED_TEXT_QUERIES":["svg>use[*|href]:not([href])","a[role=\\"link\\"]","a[href^=\\"/ads/about\\"]","div[role=\\"button\\"]:not([aria-haspopup=\\"menu\\"])"],"XLING_HREF_ATTRIBUTE_FOR_SVG":"xlink:href","VISIBLE_SPANS_TEXT":"span,div","ABOUT_SECTION_CONFIG":{"LOAD_ABOUT_PAGE":true,"QUERY_ABOUT_PAGE_HREF":"object[type=\'nested/pressable\'] a[href], h4 a[href]","HREF_PREFIX":"https://www.facebook.com/","HREF_PREFIX_WATCH":"a[href^=\\"/watch/\\"]","HREF_TEMPLATE_WATCH":"https://www.facebook.com/watch/","ABOUT_PAGE_TEMPLATE":"https://www.facebook.com/pg/%1/about/","ABOUT_PAGE_BAD_WORDS_MATCHES":["facebook.com/stories/","//l.facebook.com/l.php?"],"CONTENT_CHECK_STRING":"((page_about_fields)|(about_app_sections))","HEADERS":{"accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9"},"ADVERTISER_LINK_INSTREAM_QUERIES":["\\"website\\":\\".[^\\"]*\\"","\\"text\\":\\".[^}]*\\\\}\\\\,\\"field\\\\_type\\"\\\\:\\"website\\"",",\\"text\\":\\"Website\\".[^\\"]*\\"link_url\\":\\".[^\\"]*"],"CHROME_SECTIONS":{"SECTION_ZONE_DETECTOR":"</body></html>","CONTENT_CHECK_STRING":">About</div>","SECTION_START":"bigPipe.beforePageletArrive(\\"PagesProfileAboutInfoPagelet_","SECTION_END":"function(bigPipe){bigPipe.beforePageletArrive"},"FIREFOX_SECTIONS":{"CONTENT_CHECK_STRING":">About</div>","SECTION_START sectionStart":"bigPipe.beforePageletArrive(\\"PagesProfileAboutInfoPagelet_","SECTION_END sectionEnd":"function(bigPipe){bigPipe.beforePageletArrive"}},"MARKETPLACE_ADS_CONFIG":{"CONTAINER":"div[role=\\"main\\"]","CARDS":"div[class] > span:not([class]):not([id]):not([aria-hidden])","SPONSOR_BLOCKS":"a[href^=\\"/ads/about\\"]","SATELITE_SPONSORED_STRING":"a[role=link][href*=\\"ads/about\\"]","MIN_IMGS_SPACE_PERCENTAGE":15,"PREV_SIBLING_SPONSOR_BLOCK_QUERY_PATH":["parentElement","parentElement","previousElementSibling","querySelector,a[href^=\\"/ads/about\\"]"],"COVER_IMAGE_QUERY":"div[data-instancekey] img[alt=\'\']"},"RIGHT_COLUMN_ADS_CONFIG":{"CONTAINER":"div[role=\\"complementary\\"]","CARDS":"*[role=\\"complementary\\"] div[class] > div:not([class]) > div:not([class])","SATELITE_SPONSORED_STRING":"h3[dir=\\"auto\\"] > div","IF_AD":"a","MIN_IMGS_SPACE_PERCENTAGE":15,"IMPOSSIBLE_HREF_REG_FOR_AD":"friends/requests"},"optionsForDetectorRightColumn":{"detectorName":"FacebookAds:RightColumn","firstDetectionAfterActivationTimeoutMs":300,"secondDetectionAfterActivationTimeoutMs":900,"detectionIntervalMs":1000,"minTimeAfterLastDetectionMs":500,"useObserver":true,"observerNodesChecksMaxAmount":20,"observerNodesCheckIntervalMs":300,"maxActualizeDetectorWaitTimeMs":60000,"extractAdStaticPartTimeoutMs":1500,"extractAdRandomPartTimeoutMs":500},"optionsForDetectorFeed":{"detectorName":"FacebookAds:Feed","firstDetectionAfterActivationTimeoutMs":300,"secondDetectionAfterActivationTimeoutMs":900,"detectionIntervalMs":1000,"minTimeAfterLastDetectionMs":500,"useObserver":true,"observerNodesChecksMaxAmount":20,"observerNodesCheckIntervalMs":300,"maxActualizeDetectorWaitTimeMs":60000,"extractAdStaticPartTimeoutMs":1500,"extractAdRandomPartTimeoutMs":500,"attributeWithSponsorAlly":"aria-label"},"optionsForDetectorWatch":{"detectionIntervalMs":1000,"detectorName":"FacebookAds:FeedWatch","extractAdRandomPartTimeoutMs":500,"extractAdStaticPartTimeoutMs":1500,"firstDetectionAfterActivationTimeoutMs":300,"maxActualizeDetectorWaitTimeMs":60000,"minTimeAfterLastDetectionMs":500,"observerNodesCheckIntervalMs":300,"observerNodesChecksMaxAmount":20,"secondDetectionAfterActivationTimeoutMs":900,"useObserver":true,"attributeWithSponsorAlly":"aria-label"},"optionsForDetectorMarketplace":{"detectorName":"FacebookAds:Marketplace","firstDetectionAfterActivationTimeoutMs":300,"secondDetectionAfterActivationTimeoutMs":900,"detectionIntervalMs":1000,"minTimeAfterLastDetectionMs":500,"useObserver":true,"observerNodesChecksMaxAmount":20,"observerNodesCheckIntervalMs":300,"maxActualizeDetectorWaitTimeMs":60000,"extractAdStaticPartTimeoutMs":1500,"extractAdRandomPartTimeoutMs":300,"urlValidationByKeyWord":"/marketplace"},"videoDetectorConfigNew":{"PARSERS":[{"TYPE":"XML_HTTP_REQUEST","VIDEO_ID":"\\"videoId\\":(\\\\s|)\\"(.[^\\"]*)","VIDEO_HD_URL":"\\"(browser_native_sd_url|playable_url)\\":(\\\\s|)\\"(.[^\\"]*)","VIDEO_SD_URL":null,"VIDEO_AUDIO_URL":"\\"audio\\":(\\\\s|)\\\\[\\\\{\\"url\\":(\\\\s|)\\"(.[^\\"]*)","THUMBNAIL":"\\"thumbnailImage\\":(\\\\s|){\\"uri\\":(\\\\s|)\\"(.[^\\"]*)","LINK_DISPLAY":"\\"link_display\\":(\\\\s|)\\"(.[^\\"]*)","CHECKER":[]},{"TYPE":"INSTREAM_CONFIG","PATH_NODES":["data","viewer","instream_video_ads","edges"],"PATH_ALL_VIDEO":["extensions","all_video_dash_prefetch_representations",["video_dash_prefetch_representations","representations"]],"PATH_VIDEO_ID":["node","attachments",0,"target","id"],"PATH_TARGET_URL":["node","attachments",0,"action_links"],"PATH_USER_ID":["node","actors",0,"id"],"ALIAS":"JSON_FB","CHECKER":["browser_native_sd_url"]},{"TYPE":"SCRIPT","VIDEO_ID":"\\"videoId\\":(\\\\s|)\\"(.[^\\"]*)","VIDEO_HD_URL":"\\"(browser_native_sd_url|playable_url)\\":(\\\\s|)\\"(.[^\\"]*)","VIDEO_SD_URL":null,"VIDEO_AUDIO_URL":"\\"audio\\":(\\\\s|)\\\\[\\\\{\\"url\\":(\\\\s|)\\"(.[^\\"]*)","THUMBNAIL":"\\"preferred_thumbnail\\":(\\\\s|)\\\\{\\"image\\":(\\\\s|)\\\\{\\"uri\\":(\\\\s|)\\"(.[^\\"]*)","LINK_DISPLAY":"\\"link_display\\":(\\\\s|)\\"(.[^\\"]*)","CHECKER":[]},{"TYPE":"MARKETPLACE_VIDEO_AD","PATH_AUDIO_URL":[["extensions","prefetch_dash_segments",0,"audio",0,"url"],["extensions","prefetch_dash_segments",0,"audio",0,"url"]],"PATH_VIDEO_URL":[["data","node","story","attachments",0,"media","browser_native_sd_url"],["data","marketplace_home_feed","edges",0,"node","story","attachments",0,"media","browser_native_sd_url"]],"PATH_VIDEO_ID":[["data","node","story","attachments",0,"media","id"],["data","marketplace_home_feed","edges",0,"node","story","attachments",0,"media","id"]],"PATH_THUMBNAIL":[["data","node","story","actors",0,"logo","uri"],["data","marketplace_home_feed","edges",0,"node","story","attachments",0,"media","thumbnailImage","uri"]],"PATH_LOGO":[["data","marketplace_home_feed","edges",0,"node","story","actors",0,"logo","uri"]],"PATH_NAME":[["data","marketplace_home_feed","edges",0,"node","story","actors",0,"name"]],"CHECKER":["browser_native_sd_url","MarketplaceFeedAdStory"]},{"TYPE":"FEED_VIDEO_AD","PATH_VIDEO_URL":[["data","node","comet_sections","content","story","attachments",0,"styles","attachment","media","browser_native_sd_url"],["data","viewer","news_feed","edges",0,"node","comet_sections","content","story","attachments",0,"styles","attachment","media","browser_native_sd_url"],["data","node","feed_unit","attachments",0,"media","browser_native_sd_url"],["data","node","section_components","edges",0,"node","feed_unit","attachments",0,"media","browser_native_sd_url"]],"PATH_VIDEO_ID":[["data","node","comet_sections","content","story","attachments",0,"styles","attachment","media","videoId"],["data","viewer","news_feed","edges",0,"node","comet_sections","content","story","attachments",0,"styles","attachment","media","videoId"],["data","node","feed_unit","attachments",0,"media","videoId"],["data","node","section_components","edges",0,"node","feed_unit","attachments",0,"media","videoId"]],"PATH_THUMBNAIL":[["data","node","comet_sections","content","story","attachments",0,"styles","attachment","media","preferred_thumbnail","image","uri"],["data","viewer","news_feed","edges",0,"node","comet_sections","content","story","attachments",0,"styles","attachment","media","preferred_thumbnail","image","uri"],["data","node","feed_unit","attachments",0,"media","preferred_thumbnail","image","uri"],["data","node","section_components","edges",0,"node","feed_unit","attachments",0,"media","preferred_thumbnail","image","uri"]],"PATH_USER_NAME":[["data","node","comet_sections","content","story","actors",0,"name"],["data","viewer","news_feed","edges",0,"node","comet_sections","content","story","actors",0,"name"],["data","node","feed_unit","actors",0,"name"],["data","node","section_components","edges",0,"node","feed_unit","actors",0,"name"]],"CHECKER":["browser_native_sd_url"]}],"PARSER_CONFIG":{"LISTEN_HTTP_REQUESTS":true,"SCRIPT":{"USE":true,"SEPARATOR":"\\"category\\"","INTERVAL_MS":5000},"XML_HTTP_REQUEST":{"USE":true,"SEPARATOR":"\\"category\\"","MATCH_URLS":["/api/graphql/"]},"FEED_VIDEO_AD":{"USE":true,"SEPARATOR":null,"HEADERS":{"x-fb-friendly-name":["CometVideoHomeFeedSectionPaginationQuery","CometNewsFeedPaginationQuery"]}},"INSTREAM_CONFIG":{"USE":true,"SEPARATOR":null,"HEADERS":{"x-fb-friendly-name":["useInstreamAdsFetcherQuery"]},"FILTER_DATA":false},"MARKETPLACE_VIDEO_AD":{"USE":true,"SEPARATOR":null,"HEADERS":{"x-fb-friendly-name":["MarketplaceCometBrowseFeedLightPaginationQuery","MarketplaceCometBrowseFeedLightContainerQuery"]}}},"MATCH_URLS":["/api/graphql/"],"MATCH_HEADERS":{"x-fb-friendly-name":["useInstreamAdsFetcherQuery","MarketplaceCometBrowseFeedLightPaginationQuery","MarketplaceCometBrowseFeedLightContainerQuery","CometNewsFeedPaginationQuery","CometVideoHomeFeedSectionPaginationQuery"]}},"statistic":{"sendNotFullFeedVideoAds":false,"sendFakeAdFromNewDesign":false}},"twitterConfig":{"PROMOTED_ALIASES":["Реклама","Promoted","מקודם","مُروَّج","বিজ্ঞাপিত","Sustatua","Спонсорирано","Được quảng bá","Patrocinat","Promoveret","Uitgelicht","Mainostettu","Sponsorisé","Patrocinado","Gesponsert","Προωθημένο","પ્રચાર કરાયેલું","प्रचारित","Ajánlott","Dipromosikan","Urraithe","Sponsorizzato","プロモーション","ಪ್ರಾಯೋಜಿತ","프로모션 중","Dipromosikan","प्रमोटेड","Promotert","تبلیغی","Promowane","Promovido","Promovat","Промовисано","推廣","Sponzorovaný","Promocionado","Sponsrad","விளம்பரப்படுத்தப்பட்டது","ประชาสัมพันธ์","Sponsorlu","تشہیر شدہ","Được quảng bá","Ad"],"PROMOTED_SELECTOR":"div > svg ~ div > span, div:not([data-testid=\\"User-Name\\"]):not([data-testid=\\"tweetText\\"]) > div > div[dir] > span","PROGRESS_SELECTOR":"div[role=\\"progressbar\\"]","FEED_CONTAINER":"section[role=\\"region\\"]","RIGHT_COLUMN_CONTAINER":"aside[role=\\"complementary\\"]","FEED_TWEETS_SELECTOR":"*[data-testid=\\"tweet\\"]:not([bis_size])","RIGHT_COLUMN_WHO_TO_FOLLOW_SELECTOR":"*[data-testid=\\"sidebarColumn\\"]:not([bis_size]) *[role=\\"complementary\\"]:not([bis_size]) *[data-testid=\\"UserCell\\"]:not([bis_size])","FEED_WHO_TO_FOLLOW_SELECTOR":"*[data-testid=\\"primaryColumn\\"]:not([bis_size]) *[data-testid=\\"UserCell\\"]:not([bis_size])","LOAD_USER_DATA":{"AUTH_BEARER":"Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA","API_CALL_SCREEN_NAME":"https://api.twitter.com/graphql/E4iSsd6gypGFWx2eUhSC1g/UserByScreenName?variables=%7B%22screen_name%22%3A%22${%1}%22%2C%22withHighlightedLabel%22%3Atrue%7D","API_CALL_GUEST":"https://api.twitter.com/1.1/guest/activate.json","ENABLED":true},"FEED_MIN_IMGS_SPACE_PERCENTAGE":7,"FEED_WHO_TO_FOLLOW_MIN_IMGS_SPACE_PERCENTAGE":1,"RIGHT_COLUMN_MIN_IMGS_SPACE_PERCENTAGE":5,"TAGS_FOR_LOADING_CHECK":"img, video","TAGS_FOR_VIDEO_TWEET_CHECK":"div[role=\\"button\\"][aria-label=\\"Play\\"]>div>svg, video[aria-label]","CHECK_IF_CAROUSEL_QUERY":"ul[role=\\"list\\"] > li[role=\\"listitem\\"]","MIN_AMOUNT_OF_WORDS_FOR_MATCHING":3,"MIN_MATCHING_WORD_LENGTH":3,"MAX_CANDIDATES_TO_SEND":3,"MAX_VIDEO_DATA_KEEP_IN_STORAGE":200,"VIDEO_TRAFFIC_DETECTOR":{"parsers":[{"watch":"https://(api\\\\.|)twitter.com/(i/api/|)2/timeline/home.json","pipes":[{"name":"parseJSON","arguments":null},{"name":"jsonQuery","arguments":{"query":"globalObjects.tweets[* #select(id_str as id, full_text)].card.binding_values.unified_card.string_value","queries":["globalObjects.tweets[* #select(id_str as id, full_text)].card.binding_values.unified_card.string_value","globalObjects.tweets[* #select(id_str as id, full_text)].extended_entities.media"],"prop":"string_value"}},{"name":"arrToVal","arguments":{"prop":"string_value"}},{"name":"filterContains","arguments":{"prop":"string_value","text":"video_website","types":["video_website","video","animated_gif"]}},{"name":"mapParseJsonToObj","arguments":{"prop":"string_value"}},{"name":"mapVideoData","arguments":null},{"name":"forEach","arguments":{"pipe":"sendVideoData"}}]},{"watch":"https?://twitter\\\\.com/i/api/graphql/.[^/]*/HomeLatestTimeline","pipes":[{"name":"parseJSON","arguments":null},{"name":"jsonQuery","arguments":{"queries":["data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.card.legacy.binding_values","data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.legacy.extended_entities.media","data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.tweet.rest_id as id, content.itemContent.tweet_results.result.tweet.legacy.full_text as full_text)].content.itemContent.tweet_results.result.tweet.legacy.extended_entities.media"],"prop":"binding_values","props":[["binding_values",["unified_card"]],["media",["video_info","type"]]]}},{"name":"arrToVal","arguments":{"prop":"string_value","total_prop":"string_value","props":[["binding_values",["string_value"]],["entries",["full_text","id"]],["media",["video_info","type"]]]}},{"name":"filterContains","arguments":{"prop":"string_value","text":"video_website","types":["video_website","video","animated_gif"],"props":["string_value","video_info"]}},{"name":"mapParseJsonToObj","arguments":{"prop":"string_value"}},{"name":"mapVideoData","arguments":{"props":["full_text","id"]}},{"name":"forEach","arguments":{"pipe":"sendVideoData"}}]},{"watch":"https?://twitter\\\\.com/i/api/graphql/.[^/]*/(HomeTimeline|UserTweets)","pipes":[{"name":"parseJSON","arguments":null},{"name":"jsonQuery","arguments":{"queries":["data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.card.legacy.binding_values","data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.legacy.extended_entities.media","data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.tweet.rest_id as id, content.itemContent.tweet_results.result.tweet.legacy.full_text as full_text)].content.itemContent.tweet_results.result.tweet.legacy.extended_entities.media","data.user.result.timeline_v2.timeline.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.card.legacy.binding_values","data.user.result.timeline_v2.timeline.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.legacy.extended_entities.media"],"prop":"binding_values","props":[["binding_values",["unified_card"]],["media",["video_info","type"]]]}},{"name":"arrToVal","arguments":{"prop":"string_value","props":[["binding_values",["string_value"]],["entries",["full_text","id"]],["media",["video_info","type"]]]}},{"name":"filterContains","arguments":{"prop":"string_value","text":"video_website","types":["video_website","video","animated_gif"],"props":["string_value","video_info"]}},{"name":"mapParseJsonToObj","arguments":{"prop":"string_value"}},{"name":"mapVideoData","arguments":{"props":["full_text","id"]}},{"name":"forEach","arguments":{"pipe":"sendVideoData"}}]},{"watch":"https?://api\\\\.twitter\\\\.com/graphql/.[^/]*/HomeTimeline","pipes":[{"name":"parseJSON","arguments":null},{"name":"jsonQuery","arguments":{"queries":["data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.legacy.extended_entities.media","data.home.home_timeline_urt.instructions[*].entries[* #select(content.itemContent.tweet_results.result.rest_id as id, content.itemContent.tweet_results.result.legacy.full_text as full_text)].content.itemContent.tweet_results.result.card.legacy.binding_values"],"props":[["media",["type","video_info"]],["binding_values",["unified_card"]]]}},{"name":"arrToVal","arguments":{"props":[["media",["type","video_info"]],["entries",["full_text","id"]],["binding_values",["string_value"]]]}},{"name":"filterContains","arguments":{"prop":"string_value","text":"video_website","types":["video_website","video","animated_gif"],"props":["string_value","video_info"]}},{"name":"mapParseJsonToObj","arguments":{"prop":"string_value"}},{"name":"mapVideoData","arguments":{"props":["full_text","id"]}},{"name":"forEach","arguments":{"pipe":"sendVideoData"}}]}]}},"redditConfig":{"PROMOTED_ALIASES":["anuncio","advertisement","werbung","publicité","pubblicità","anúncio","publicidade","patrocinado","promoted","gesponsort","promocionado","promue","promozione","sponsorisé","gesponsert"],"FEED_CONTAINER":{"IMG_SPACE_PERCENTAGE":7,"PROMOTED_SELECTOR":"span:not([class]):not([id]), faceplate-hovercard[data-id=\\"user-hover-card\\"] ~ span ~ span, faceplate-hovercard[data-id=\\"user-hover-card\\"] ~ span ~ span ~ span","QUERIES":["#AppRouter-main-content div:not([class]) div[tabindex]:not([class]) ~ div[class] ~ div","main > div","div.main > div:not([class])"],"SECONDARY_CHECK_QUERY":"faceplate-batch","QUERY_TO_EXCLUDE":"input[name=\\"createPost\\"],button[role=\\"menuitem\\"]","QUERY_POSTS":"main > div shreddit-ad-post","MAX_CHILD_HEIGHT":1000},"COMMENT_PAGE_CONTAINER":{"IMG_SPACE_PERCENTAGE":0.17,"MIN_HEIGHT":500,"PROMOTED_SELECTOR":"span:not([class]):not([id]), a > span ~ span ~ div, shreddit-dynamic-ad-link > span ~ span ~ div","QUERIES":["div[tabindex=\\"-1\\"] > div[class] > span:not([class]) ~ div ~ div[tabindex] ~ div","div[class*=main]","div[id=\\"overlayScrollContainer\\"] div[class]:not([id]):not([data-testid=\\"frontpage-sidebar\\"]):not([data-testid=\\"subreddit-sidebar\\"])","div[class]:not([id]):not([data-testid=\\"frontpage-sidebar\\"]):not([data-testid=\\"subreddit-sidebar\\"]):not([role=\\"menu\\"]) > div[tabindex] ~ div[class]"],"TOP_DISTANCE":55,"TEXT_FROM_HREF":"/comments/","QUERY_IS_POPUP":"div[id=\\"overlayScrollContainer\\"]"},"RIGHT_COLUMN_CONTAINER":{"MIN_HEIGHT":500,"IMG_SPACE_PERCENTAGE":7,"PATH_WITH_AD_URL":"^https?\\\\://gateway\\\\.reddit\\\\.com/desktopapi/v1/sidebar_insertion","PROMOTED_SELECTOR":"div[data-before-content], span:not([class]):not([id]), shreddit-sidebar-ad > div[slot=\\"promoted-label\\"]","QUERIES":["div[data-testid=\\"frontpage-sidebar\\"], div[data-testid=\\"subreddit-sidebar\\"], div[class*=main] ~ div > pdp-right-rail > faceplate-tabpanel faceplate-tracker > ul","main ~ div"]},"NECESSARY_STYLES":{"BY_DATA_ATTRIBUTE":[{"KEY":"href","ALL_STYLES_FROM":["chunkCSS/reddit-components-LargePost.","chunkCSS/Reddit~reddit-components-ClassicPost~reddit-components-CompactPost~reddit-components-LargePost~reddi~","chunkCSS/Reddit~StandalonePostPage~reddit-components-ClassicPost~reddit-components-CompactPost~reddit-compone~","chunkCSS/ChatPost~CollectionCommentsPage~CommentsPage~EconTopAwardersModal~ModQueuePages~ModerationPages~","chunkCSS/CollectionCommentsPage~CommentsPage~ModerationPages~ProfileComments~ProfileOverview~ProfilePrivate~","chunkCSS/CollectionCommentsPage~CommentsPage~CountryPage~FramedGild~GildModal~GovernanceReleaseNotesModal~","chunkCSS/CollectionCommentsPage~CommentsPage~CountryPage~FramedGild~GildModal~GovernanceReleaseNotesModal~","chunkCSS/CollectionCommentsPage~CommentsPage~ProfileComments~ProfileOverview~ProfilePrivate~StandalonePostPag~"],"FEED_PAGE":["chunkCSS/Governance~Reddit~Subreddit~reddit-components-ClassicPost~reddit-components-CompactPost~reddit-compo~","chunkCSS/CollectionCommentsPage~CommentsPage~ModerationPages~PostCreation~ProfileComments~ProfileOverview~","chunkCSS/CollectionCommentsPage~CommentsPage~ProfileComments~ProfileOverview~ProfilePrivate~RpanListingUnit","chunkCSS/CollectionCommentsPage~CommentsPage~CountryPage~Frontpage~GovernanceReleaseNotesModal~ModListing~","chunkCSS/CollectionCommentsPage~CommentsPage~ModQueuePages~ModerationPages~PostCreation~ProfileComments~Profi~","chunkCSS/CollectionCommentsPage~CommentsPage~CountryPage~GovernanceReleaseNotesModal~ModerationPages~","chunkCSS/CollectionCommentsPage~CommentsPage~EconTopAwardersModal~ModQueuePages~ModerationPages~PostCreation~~","chunkCSS/Governance~ModListing~Reddit"],"COMMENT_PAGE":["chunkCSS/Governance~Reddit~Subreddit","chunkCSS/CommentsPage"]}],"BY_QUERIES_RULES":["\\\\@font-face( |)\\\\{.[^\\\\}]*\\\\}","\\\\.icon\\\\-(upvote|downvote|comment|award|share|save)\\\\:before( |)\\\\{.[^}]*\\\\}","\\\\.icon\\\\:before( |)\\\\{.[^}]*\\\\}","\\\\.icon\\\\..[^{]*( |)\\\\{.[^}]*\\\\}"],"BY_CLASS_NAME":[{"CLASS_NAME_CHILD":".icon-save","STYLES":"{-ms-flex-align: center;align-items: center;display: -ms-flexbox;display: flex;-ms-flex-direction: row;flex-direction: row;text-align: left;width: 100%}","DEEP_LEVEL":"2","INDEX_OF_CLASS":0},{"CLASS_NAME_CHILD":".icon-save","STYLES":"{margin-right: 6px;}","DEEP_LEVEL":"1","INDEX_OF_CLASS":0}],"BY_TAG_NAME":[{"TAG_NAME":"link","ATTRIBUTE_NAME":"href","ATTRIBUTE_REGEX_VALUE":"^https?\\\\://.*\\\\.css$"}]},"IS_ACTIVE_GET_SLIDES_SRC":true,"CAROUSEL_BUTTON_NEXT":"a[title=\\"Next\\"]","CAROUSEL_BUTTON_PREVIUOS":"a:not([title=\\"Next\\"])","PROGRESS_SELECTOR":"img[src=\\"https://www.redditstatic.com/desktop2x/img/loading.gif\\"]","QUERY_CHECK_READY_AD_CELLS":"a[data-testid=\\"post_author_link\\"], div[data-before-content], div[data-adclicklocation=\\"top_bar\\"] img, faceplate-img","TAGS_FOR_LOADING_CHECK":"img, video, img[alt=\\"User avatar\\"], div[data-testid=\\"comments-page-ad-thumbnail\\"] a[data-testid] > div[data-adclicklocation=\\"media\\"][role=\\"img\\"], shreddit-img","TAGS_FOR_TEXT_AD_CHECK":"div[data-click-id=\\"text\\"]","TAGS_FOR_VIDEO_CHECK":"video","VIDEO_TRAFFIC_DETECTOR":{"VIDEO_ID_REGEX":"(?<=v\\\\.redd\\\\.it/)(.*)(?=/(DASHPlaylist|HLSPlaylist).*)","VIDEO_MPD_URL_CHECK":"^https?\\\\://v\\\\.redd\\\\.it/.*/(DASHPlaylist\\\\.mpd|HLSPlaylist\\\\.m3u8)\\\\?","QUERY_VIDEO_DATA_FROM_CONTENT":"shreddit-player[src]"}},"pinterestConfig":{"MAIN_CONTAINER_QUERY":"div.appContent > div > div.mainContainer","PROMOTED_ALIASES":["Рекламодавець","Bevorder deur","Dipromosikan oleh","Inzerent","Annonce fra","Anzeige von","Promoted by","Promocionado por","Sponsorisée par","Promovira","Sponsorizzato da","Reklámozó","Gesponsord door","Promotert av","Promowane przez","Patrocinado por","Publicidade de","Promovat de","Propaguje","Mainostaja","Annons från","Na-promote ni","Quảng cáo bởi","Sponsor","Προωθείται από","Промотиран от","Рекламодатель","מקודם על-ידי","منشور دعائي من","इसके द्वारा प्रचारित","যার দ্বারা প্রচারিত","దీని ద్వారా ప్రచారం చేయబడింది","โปรโมทโดย","광고주","広告","推广者","廣告來源"],"FEED_PAGE":{"CONTAINER_QUERY":"div[data-test-id=\\"homefeed-feed\\"] > div[id=\\"homefeedGridFadeInTransitionContainer\\"] div[role=\\"list\\"]","PROMOTED_PINS_QUERY":"div[data-test-id] a[href] span:not([class]), div[data-test-id=\'pointer-events-wrapper\'] a[href] div[title], div[data-test-id=\'pointer-events-wrapper\'] a[href] div > style","PROMOTED_PINS_QUERY_BY_REGEXP":[["match","\\"([a-zA-Z]{1,1}| )\\""],["join",","],["replace","\\"|,|/"]],"IMG_SPACE_PERCENTAGE":7,"TAGS_FOR_LOADING_CHECK":"a img, a video, a:not([aria-label]) img[alt=\\"\\"]","TAGS_FOR_VIDEO_CHECK":"a[href] div[data-test-id=\\"pinrep-video\\"], a[href] video","ADVERTISER_NAME_QUERY":"a > div > div > div ~ span","ADVERTISER_PINTEREST_URL_QUERY":"a[class]","TARGET_URL_QUERY":"a[href][aria-label]","TITLE_TEXT_QUERY":"div[data-test-id=\\"pointer-events-wrapper\\"] div[data-test-id=\\"otpp\\"] > div[data-test-id] > a[href][aria-label]","UNIQUE_ATTRIBUTE":"data-test-pin-id","STYLE_FIXES":[{"ELEMENT_QUERY":"div[data-test-id=\\"pinWrapper\\"]","NEW_RULES":"margin: 0;"},{"ELEMENT_QUERY":"svg[role=\\"img\\"]","NEW_RULES":"margin: 0;"},{"ELEMENT_QUERY":"div[data-test-id=\\"pinWrapper\\"] > div[aria-hidden] > div","NEW_RULES":"height: ${__HEIGHT__}px;"}]},"SEARCH_PAGE":{"CONTAINER_QUERY":"div[data-test-id=\\"search-feed\\"] > div[data-test-id=\\"masonry\\"] > div:not([class]) > div:not([class]) > div[class]","PROMOTED_PINS_QUERY":"div[data-test-id] a[href] span:not([class]), div[data-test-id=\'pointer-events-wrapper\'] a[href] div[title], div[data-test-id=\'pointer-events-wrapper\'] a[href] div > style","PROMOTED_PINS_QUERY_BY_REGEXP":[["match","\\"([a-zA-Z]{1,1}| )\\""],["join",","],["replace","\\"|,|/"]],"IMG_SPACE_PERCENTAGE":7,"TAGS_FOR_LOADING_CHECK":"a img, a video, a:not([aria-label]) img[alt=\\"\\"]","TAGS_FOR_VIDEO_CHECK":"a[href] div[data-test-id=\\"pinrep-video\\"], a[href] video","ADVERTISER_NAME_QUERY":"a > div > div > div ~ span","ADVERTISER_PINTEREST_URL_QUERY":"a[class]","TARGET_URL_QUERY":"a[href][aria-label]","TITLE_TEXT_QUERY":"div[data-test-id=\\"pointer-events-wrapper\\"] div[data-test-id=\\"otpp\\"] > div[data-test-id] > a[href][aria-label]","UNIQUE_ATTRIBUTE":"data-test-pin-id","STYLE_FIXES":[{"ELEMENT_QUERY":"div[data-test-id=\\"pinWrapper\\"]","NEW_RULES":"margin: 0;"},{"ELEMENT_QUERY":"svg[role=\\"img\\"]","NEW_RULES":"margin: 0;"},{"ELEMENT_QUERY":"div[data-test-id=\\"pinWrapper\\"] > div[aria-hidden] > div","NEW_RULES":"height: ${__HEIGHT__}px;"}]},"PIN_PAGE":{"CONTAINER_QUERY":"div[data-test-id=\\"closeup-container\\"] div[data-test-id=\\"relatedPins\\"] div:not([class]) > div > div[role=\\"list\\"]","PROMOTED_PINS_QUERY":"div[data-test-id] a[href] span:not([class]), div[data-test-id=\'pointer-events-wrapper\'] a[href] div[title], div[data-test-id=\'pointer-events-wrapper\'] a[href] div > style","PROMOTED_PINS_QUERY_BY_REGEXP":[["match","\\"([a-zA-Z]{1,1}| )\\""],["join",","],["replace","\\"|,|/"]],"IMG_SPACE_PERCENTAGE":7,"TAGS_FOR_LOADING_CHECK":"a img, a video, a:not([aria-label]) img[alt=\\"\\"]","TAGS_FOR_VIDEO_CHECK":"a[href] div[data-test-id=\\"pinrep-video\\"], a[href] video","ADVERTISER_NAME_QUERY":"a > div > div > div ~ span","ADVERTISER_PINTEREST_URL_QUERY":"a[class]","TARGET_URL_QUERY":"a[href][aria-label]","TITLE_TEXT_QUERY":"div[data-test-id=\\"pointer-events-wrapper\\"] div[data-test-id=\\"otpp\\"] > div[data-test-id] > a[href][aria-label]","UNIQUE_ATTRIBUTE":"data-test-pin-id","STYLE_FIXES":[{"ELEMENT_QUERY":"div[data-test-id=\\"pinWrapper\\"]","NEW_RULES":"margin: 0;"},{"ELEMENT_QUERY":"svg[role=\\"img\\"]","NEW_RULES":"margin: 0;"},{"ELEMENT_QUERY":"div[data-test-id=\\"pinWrapper\\"] > div[aria-hidden] > div","NEW_RULES":"height: ${__HEIGHT__}px;"}]},"ADDITIONAL_LOADER_CONFIG":{"PIN_PAGE_URL_PATTERN":"https://www.pinterest.com/pin/[PIN_ID]/","TITLE_QUERY":"<h1.[^>]*>(.[^<]*)</h1>","DESCRIPTION_QUERY":"<span>(.[^<]*)</span>","GET_SCRIPT_WITH_DATA_QUERY":"<script.[^id]*id=\\"__PWS_DATA__\\".[^>]*>(.[^<]*)","CHECK_ON_PRIORITY_ADV_URL":"https?:\\\\/\\\\/(www\\\\.|)pinterest\\\\.","GET_USERNAME_QUERY":"https?:\\\\/\\\\/(www\\\\.|)pinterest\\\\.(com|ca|at|ch|cl|co\\\\.kr|com\\\\.au|com\\\\.mx|co\\\\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)/(.[^/]*)","PATH_TO_ADVERTISER_URL":[["props","initialReduxState","pins","[PIN_ID]","pinner","domain_url"],["props","initialReduxState","pins","[PIN_ID]","domain"]],"PATH_TO_ADVERTISER_ID":[["props","initialReduxState","pins","[PIN_ID]","pinner","id"]]},"VIDEO_TRAFFIC_CONFIG":{"PROPERTIES_FOR_VIDEO_DATA":[{"NAME":"detectionTime","PATH_NAME:":null},{"NAME":"videoUrl","PATH_NAME":"PATH_TO_VIDEO_URL"},{"NAME":"videoId","PATH_NAME":"VIDEO_ID_REGEXP"},{"NAME":"previewImageUrl","PATH_NAME":"PATH_TO_THUMBNAIL"},{"NAME":"title","PATH_NAME":"PATH_TO_TITLE"},{"NAME":"promoter","PATH_NAME":"PATH_TO_ADVERTISER_NAME"}],"PARSERS":[{"TYPE":"XMLHttpRequest","USE":true,"QUERY":"www\\\\.pinterest\\\\.(com|ca|at|ch|cl|co\\\\.kr|com\\\\.au|com\\\\.mx|co\\\\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)\\\\/resource\\\\/((UserHomefeedResource)|(RelatedModulesResource))\\\\/get\\\\/\\\\?source_url=","PATH_TO_PINS":["resource_response","data"],"PATHS_GET_PROPERTIES":{"PATH_TO_VIDEO_URL":["videos","video_list","V_HLSV4","url"],"PATH_TO_THUMBNAIL":["videos","video_list","V_HLSV4","thumbnail"],"PATH_TO_TITLE":["title"],"PATH_TO_ADVERTISER_NAME":["promoter","full_name"],"VIDEO_ID_REGEXP":"\\\\/(.[^/.]*)\\\\..{2,5}$"},"CHECK_PROPERTIES":["is_promoted","videos"]},{"TYPE":"XMLHttpRequest","USE":true,"QUERY":"www\\\\.pinterest\\\\.(com|ca|at|ch|cl|co\\\\.kr|com\\\\.au|com\\\\.mx|co\\\\.uk|de|dk|es|fr|ie|it|jp|nz|ph|pt|se)\\\\/resource\\\\/BaseSearchResource\\\\/get\\\\/(\\\\?source_url=)?","PATH_TO_PINS":["resource_response","data","results"],"PATHS_GET_PROPERTIES":{"PATH_TO_VIDEO_URL":["videos","video_list","V_HLSV4","url"],"PATH_TO_THUMBNAIL":["videos","video_list","V_HLSV4","thumbnail"],"PATH_TO_TITLE":["title"],"PATH_TO_ADVERTISER_NAME":["promoter","full_name"],"VIDEO_ID_REGEXP":"\\\\/(.[^/.]*)\\\\..{2,5}$"},"CHECK_PROPERTIES":["is_promoted","videos"]},{"TYPE":"script","USE":true,"QUERY":"script#__PWS_DATA__","PATH_TO_PINS":["props","initialReduxState","pins"],"PATHS_GET_PROPERTIES":{"PATH_TO_VIDEO_URL":["videos","video_list","V_HLSV4","url"],"PATH_TO_THUMBNAIL":["videos","video_list","V_HLSV4","thumbnail"],"PATH_TO_TITLE":["title"],"PATH_TO_ADVERTISER_NAME":["promoter","full_name"],"VIDEO_ID_REGEXP":"\\\\/(.[^/.]*)\\\\..{2,5}$"},"CHECK_PROPERTIES":["is_promoted","videos"]}]}},"instagramConfig":{"PROMOTED_ALIASES":["Sponsored","Geborg","Sponzorováno","Sponsoreret","Anzeige","Χορηγούμενη","Publicidad","Sponsoroitu","Sponsorisé","Bersponsor","Sponsorizzato","広告","광고","Ditaja","Sponset","Gesponsord","Sponsorowane","Patrocinado","Реклама","Sponsrad","ได้รับการสนับสนุน","May Sponsor","Sponsorlu","赞助内容","贊助","প্রযোজিত","પ્રાયોજિત","स्पॉन्सर्ड","Sponzorirano","Hirdetés","ಪ್ರಾಯೋಜಿತ","സ്‌പോൺസർ ചെയ്‌തത്","पुरस्‍कृत","प्रायोजित","ਪ੍ਰਾਯੋਜਿਤ","මුදල් ගෙවා ප්‍රචාරය කරන ලදි","Sponzorované","விளம்பரதாரர்கள்","స్పాన్సర్ చేసింది","Được tài trợ","Спонсорирано","Commandité","Sponsorizat","Спонзорисано","Sponsorizat"],"FEED":{"CONTAINER_QUERIES":["main div:not([class]):not([style]) > div[style]:not([class]):not([role])"],"POSTS_QUERY":"article","CONTAINER_MIN_HEIGHT":1000,"IMG_SPACE_PERCENTAGE":7,"PROMOTED_QUERY":"span > div > span, svg > use","ADVERTISER_URL_QUERY":"canvas ~ a","ADVERTISER_NAME_QUERY":"span a[href] div > span, div > div:not([class]) > span[dir=\\"auto\\"]","TARGET_URL_QUERY":"div:not([class]) div[class] ~ a[target=\\"_blank\\"]"},"STORIES":{"STORY_QUERY":"div:not([class])[style*=\\"height: 100vh\\"] > section > div:nth-child(1) > div > div[style*=\\"scale(1)\\"] > section","IMG_SPACE_PERCENTAGE":7,"PROMOTED_QUERY":"header a ~ div > span, header div > span","ADVERTISER_NAME_QUERY":"a ~ div a, header div:not(class) ~ div[class] > div[class] > div:not(class) > a","TARGET_URL_QUERY":"div:not([class]) > div > a[target=\\"_blank\\"]","ADVERTISER_URL_QUERY":"a ~ div a, header div:not(class) > a"},"TAGS_FOR_LOADING_CHECK":"img, video","TAGS_FOR_VIDEO_CHECK":"video","TRAFFIC_LISTENER_CONFIG":{"PROPERTIES_FOR_VIDEO_DATA":[{"NAME":"detectionTime","PATH_NAME:":null},{"NAME":"videoSrc","PATH_NAME":"PATH_TO_VIDEO_SRC"},{"NAME":"itemCode","PATH_NAME":"PATH_TO_CODE"},{"NAME":"previewImageUrl","PATH_NAME":"PATH_TO_THUMBNAIL"},{"NAME":"advertiserName","PATH_NAME":"PATH_TO_ADVERTISER_NAME"},{"NAME":"fullText","PATH_NAME":"PATH_TO_FULL_TEXT"}],"PARSERS":[{"TYPE":"XMLHttpRequest","USE":true,"QUERY":"www\\\\.instagram\\\\.com\\\\/api\\\\/(QUERY_AD_TYPE_0)|(QUERY_AD_TYPE_1)","MATCH_HEADERS":{"x-fb-friendly-name":["PolarisFeedTimelineRootQuery","PolarisFeedRootPaginationQuery_subscribe","PolarisFeedRootPaginationCachedQuery_subscribe","PolarisFeedTimelineRootV2Query"]},"AD_TYPES_WAYS_TO_PROPERTIES":[{"AD_TYPE":"feed","QUERY_URL_PATH":"graphql","PATH_TO_POSTS":["data","xdt_api__v1__feed__timeline__connection","edges"],"PATHS_GET_PROPERTIES":{"PATH_TO_VIDEO_SRC":["node","ad","items",0,"video_versions",0,"url"],"PATH_TO_THUMBNAIL":["node","ad","items",0,"image_versions2","candidates",0,"url"],"PATH_TO_CODE":["node","ad","items",0,"code"],"PATH_TO_ADVERTISER_NAME":["node","ad","items",0,"user","username"],"PATH_TO_FULL_TEXT":["node","ad","items",0,"caption","text"]},"PATH_CHECK_PROPERTIES":["node","ad","items",0,"video_versions"]},{"AD_TYPE":"story","QUERY_URL_PATH":"v1/injected_story_units","PATH_TO_POSTS":["ad_media_items",0,"items"],"PATHS_GET_PROPERTIES":{"PATH_TO_VIDEO_SRC":["video_versions",0,"url"],"PATH_TO_THUMBNAIL":["image_versions2","candidates",0,"url"],"PATH_TO_CODE":["code"],"PATH_TO_ADVERTISER_NAME":["user","username"],"PATH_TO_FULL_TEXT":["caption","text"]},"PATH_CHECK_PROPERTIES":["video_versions"]}]}]}},"bannerAdsConfig":{"QUERIES":{"FULL_IMG_COLLECTION":"A[href]:not([bis_size]) > img[src]:not([bis_size])","ON_EVENT_IMG_COLLECTION":"img[onclick][onload][src]:not([bis_size])"}},"HTML5AdsConfig":{"QUERIES":{"IFRAMES_COLLECTION":"iframe[src]:not([bis_size]):not([allowfullscreen]), iframe[srcdoc]:not([bis_size]):not([allowfullscreen]), iframe[aria-label=\\"Advertisement\\"]:not([bis_size]):not([allowfullscreen]), frame[src]:not([bis_size]):not([allowfullscreen]), frame[srcdoc]:not([bis_size]):not([allowfullscreen])","ACCEPTABLE_NODES_IN_IFRAME":"a[href], iframe, frame","UNACCEPTABLE_NODES_IN_IFRAME":"textarea, input[type=\\"email\\"]"}},"skinAdsConfig":{"QUERIES":{"FULL_HREF_COLLECTION":"A[href]:not([bis_skin_checked]):not([href=\\"#\\"]):not([href=\\"\\"]):not([href=\\"/\\"])","FULL_DIV_COLLECTION":"div:not([bis_skin_checked])"}},"adBlockInspectorConfig":{"active":true,"needsActiveAgentIntervalSec":50,"agentActivationTimeoutSec":5,"adRemovingTimeoutSec":2,"detectionClassName":"adsbox ads ad adsbox doubleclick ad-placement carbon-ads"},"useSensitiveDataFilter":true,"html5TargetUrlDetectionConfig":{"WINDOW_TARGET_URL_PROPERTY_KEY_WORDS":["targeturl","clickurl","clicktag","destinationurl","trackingurl","finalurl","redirecturl"],"WINDOW_TARGET_URL_SEARCH_DEPTH_LEVEL":10,"TARGET_URL_CLICK_ELEMENTS_SELECTOR":"*[onclick]:not(a), div, button, gwd-taparea"}}'},2420:t=>{var e=function(){var t=String.fromCharCode,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={};function getBaseValue(t,e){if(!a[t]){a[t]={};for(var n=0;n<t.length;n++)a[t][t.charAt(n)]=n}return a[t][e]}var i={compressToBase64:function compressToBase64(t){if(null==t)return"";var n=i._compress(t,6,(function(t){return e.charAt(t)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function decompressFromBase64(t){return null==t?"":""==t?null:i._decompress(t.length,32,(function(n){return getBaseValue(e,t.charAt(n))}))},compressToUTF16:function compressToUTF16(e){return null==e?"":i._compress(e,15,(function(e){return t(e+32)}))+" "},decompressFromUTF16:function decompressFromUTF16(t){return null==t?"":""==t?null:i._decompress(t.length,16384,(function(e){return t.charCodeAt(e)-32}))},compressToUint8Array:function compressToUint8Array(t){for(var e=i.compress(t),n=new Uint8Array(2*e.length),a=0,r=e.length;a<r;a++){var o=e.charCodeAt(a);n[2*a]=o>>>8,n[2*a+1]=o%256}return n},decompressFromUint8Array:function decompressFromUint8Array(e){if(null==e)return i.decompress(e);for(var n=new Array(e.length/2),a=0,r=n.length;a<r;a++)n[a]=256*e[2*a]+e[2*a+1];var o=[];return n.forEach((function(e){o.push(t(e))})),i.decompress(o.join(""))},compressToEncodedURIComponent:function compressToEncodedURIComponent(t){return null==t?"":i._compress(t,6,(function(t){return n.charAt(t)}))},decompressFromEncodedURIComponent:function decompressFromEncodedURIComponent(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,(function(e){return getBaseValue(n,t.charAt(e))})))},compress:function compress(e){return i._compress(e,16,(function(e){return t(e)}))},_compress:function _compress(t,e,n){if(null==t)return"";var a,i,r,o={},s={},d="",u="",c="",l=2,h=3,_=2,E=[],T=0,f=0;for(r=0;r<t.length;r+=1)if(d=t.charAt(r),Object.prototype.hasOwnProperty.call(o,d)||(o[d]=h++,s[d]=!0),u=c+d,Object.prototype.hasOwnProperty.call(o,u))c=u;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<_;a++)T<<=1,f==e-1?(f=0,E.push(n(T)),T=0):f++;for(i=c.charCodeAt(0),a=0;a<8;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1}else{for(i=1,a=0;a<_;a++)T=T<<1|i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i=0;for(i=c.charCodeAt(0),a=0;a<16;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1}0==--l&&(l=Math.pow(2,_),_++),delete s[c]}else for(i=o[c],a=0;a<_;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1;0==--l&&(l=Math.pow(2,_),_++),o[u]=h++,c=String(d)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;a<_;a++)T<<=1,f==e-1?(f=0,E.push(n(T)),T=0):f++;for(i=c.charCodeAt(0),a=0;a<8;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1}else{for(i=1,a=0;a<_;a++)T=T<<1|i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i=0;for(i=c.charCodeAt(0),a=0;a<16;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1}0==--l&&(l=Math.pow(2,_),_++),delete s[c]}else for(i=o[c],a=0;a<_;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1;0==--l&&(l=Math.pow(2,_),_++)}for(i=2,a=0;a<_;a++)T=T<<1|1&i,f==e-1?(f=0,E.push(n(T)),T=0):f++,i>>=1;for(;;){if(T<<=1,f==e-1){E.push(n(T));break}f++}return E.join("")},decompress:function decompress(t){return null==t?"":""==t?null:i._decompress(t.length,32768,(function(e){return t.charCodeAt(e)}))},_decompress:function _decompress(e,n,a){var i,r,o,s,d,u,c,l=[],h=4,_=4,E=3,T="",f=[],g={val:a(0),position:n,index:1};for(i=0;i<3;i+=1)l[i]=i;for(o=0,d=Math.pow(2,2),u=1;u!=d;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=a(g.index++)),o|=(s>0?1:0)*u,u<<=1;switch(o){case 0:for(o=0,d=Math.pow(2,8),u=1;u!=d;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=a(g.index++)),o|=(s>0?1:0)*u,u<<=1;c=t(o);break;case 1:for(o=0,d=Math.pow(2,16),u=1;u!=d;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=a(g.index++)),o|=(s>0?1:0)*u,u<<=1;c=t(o);break;case 2:return""}for(l[3]=c,r=c,f.push(c);;){if(g.index>e)return"";for(o=0,d=Math.pow(2,E),u=1;u!=d;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=a(g.index++)),o|=(s>0?1:0)*u,u<<=1;switch(c=o){case 0:for(o=0,d=Math.pow(2,8),u=1;u!=d;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=a(g.index++)),o|=(s>0?1:0)*u,u<<=1;l[_++]=t(o),c=_-1,h--;break;case 1:for(o=0,d=Math.pow(2,16),u=1;u!=d;)s=g.val&g.position,g.position>>=1,0==g.position&&(g.position=n,g.val=a(g.index++)),o|=(s>0?1:0)*u,u<<=1;l[_++]=t(o),c=_-1,h--;break;case 2:return f.join("")}if(0==h&&(h=Math.pow(2,E),E++),l[c])T=l[c];else{if(c!==_)return null;T=r+r.charAt(0)}f.push(T),l[_++]=r+T.charAt(0),r=T,0==--h&&(h=Math.pow(2,E),E++)}}};return i}();t.exports=e},6864:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(i,r){function fulfilled(t){try{step(a.next(t))}catch(t){r(t)}}function rejected(t){try{step(a.throw(t))}catch(t){r(t)}}function step(t){t.done?i(t.value):function adopt(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,a,i,r,o={label:0,sent:function sent(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function verb(r){return function(s){return function step(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i={getItem:function getItem(t){return chrome.storage.local.get(t).then((function(e){return e[t]}))},setItem:function setItem(t,e){chrome.storage.local.set(function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},t,e))}},r=function(){function PanalyticsUtility(t){if(void 0===t&&(t={}),this.storageSyncKey="panalyticsid",this.userKeyCacheHeader="X-PANEL-USER-KEY",this.userKeySymbolsCount=22,"string"!=typeof t.host)throw"Server host is undefined";t.storageKey&&(this.storageSyncKey=t.storageKey),this.host=t.host,this.logging=!!t.logging,this.cacheResourceUrl=this.host+"/api/identity/cache",this.cookieResourceUrl=this.host+"/api/identity/cookie"}return PanalyticsUtility.prototype.generateKey=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<this.userKeySymbolsCount;n++)t+=e.charAt(Math.floor(62*Math.random()));return this.log("key generated locally: "+t),t},PanalyticsUtility.prototype.setKey=function(t){return n(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.globalSetter(t)];case 1:return e.sent(),[2]}}))}))},PanalyticsUtility.prototype.synchronize=function(){return n(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return[4,this.loadKey()];case 1:return t=e.sent(),[4,this.globalSetter(t)];case 2:return e.sent(),[2]}}))}))},PanalyticsUtility.prototype.loadKey=function(){return n(this,void 0,void 0,(function(){var t=this;return a(this,(function(e){return[2,new Promise((function(e){return n(t,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return t?[3,2]:[4,this.cacheGetter()];case 1:t=n.sent(),n.label=2;case 2:return t?[3,4]:[4,this.cookieGetter()];case 3:t=n.sent(),n.label=4;case 4:return t||(t=this.localStorageGetter()),e(t),[2]}}))}))}))]}))}))},PanalyticsUtility.prototype.getKey=function(t,e){this.getKeyAsync(e).then(t)},PanalyticsUtility.prototype.getKeyAsync=function(t){return void 0===t&&(t=!0),n(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.loadKey()];case 1:return e=n.sent()||this.generateKey(),t?[4,this.setKey(e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2,e]}}))}))},PanalyticsUtility.prototype.localStorageGetter=function(){this.log("localStorageGetter: try to get "+this.storageSyncKey+" from localStorage.");var t=localStorage.getItem(this.storageSyncKey);return t?this.log("localStorageGetter: "+this.storageSyncKey+" has been found in localStorage. Value: "+t):this.log("localStorageGetter: "+this.storageSyncKey+" has not been found in localStorage."),t},PanalyticsUtility.prototype.localStorageSetter=function(t){this.log("localStorageSetter: "+this.storageSyncKey+" are going to be stored in localStorage."),localStorage.setItem(this.storageSyncKey,t),i.setItem(this.storageSyncKey,t)},PanalyticsUtility.prototype.cacheGetter=function(){return n(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){return this.log("CacheGetter: try to get "+this.storageSyncKey+" from cache."),t=this,[2,new Promise((function(n){var a=new XMLHttpRequest;a.open("GET",e.cacheResourceUrl),a.timeout=1e3,a.ontimeout=function(){t.log("CacheGetter: Caching request is timed out."),n()},a.onload=function(){if(200===a.status)try{var e=JSON.parse(a.response).userKey;e?(t.log("CacheGetter: "+t.storageSyncKey+" has been found in cache. Value: "+e),n(e)):n()}catch(e){t.log("CacheGetter: Error occurred while retrieving "+t.storageSyncKey+" from cache."),n()}else t.log("CacheGetter: Caching request has been failed."),n()},a.onerror=function(){n()},a.send()}))]}))}))},PanalyticsUtility.prototype.cacheSetter=function(t){var e=this;this.log("CacheSetter: "+this.storageSyncKey+" are going to be stored in cache.");var n=this;return new Promise((function(a){var i=new XMLHttpRequest;i.open("GET",e.cacheResourceUrl),i.setRequestHeader(e.userKeyCacheHeader,t),i.setRequestHeader("Cache-Control","no-cache"),i.responseType="json",i.send(),i.onload=function(){200===i.status?(n.log("CacheSetter: Caching request to server has been succeeded."),a(t)):(n.log("CacheSetter: Caching request has been failed."),a())},i.onerror=function(){a()}}))},PanalyticsUtility.prototype.cookieGetter=function(){return n(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){return this.log("CookieGetter: try to get "+this.storageSyncKey+" from cookie."),t=this,[2,new Promise((function(n){var a=new XMLHttpRequest;a.withCredentials=!0,a.open("GET",e.cookieResourceUrl),a.timeout=5e3,a.ontimeout=function(){t.log("CookieGetter: Request is timed out."),n()},a.onload=function(){var e;if(200===a.status)try{(e=JSON.parse(a.response).userKey)?(t.log("CookieGetter: "+t.storageSyncKey+" has been found in cookie. Value:"+e),n(e)):(t.log("CookieGetter: "+t.storageSyncKey+" has not been found in cookie. "),n())}catch(e){t.log("CookieGetter: Error occurred while retrieving "+t.storageSyncKey+" from cookie."),n()}else t.log("CookieGetter: Cookie request has been failed."),n()},a.onerror=function(){n()},a.send()}))]}))}))},PanalyticsUtility.prototype.cookieSetter=function(t){var e=this;this.log("CookieSetter: "+this.storageSyncKey+" are going to be stored in cookie.");var n=this;return new Promise((function(a){var i=new XMLHttpRequest;i.withCredentials=!0,i.open("POST",e.cookieResourceUrl+"?userKey="+t),i.send(),i.onload=function(){200===i.status?(n.log("CookieSetter: cookie request has been succeeded."),a(t)):(n.log("CookieSetter: cookie request has been failed."),a())},i.onerror=function(){a()}}))},PanalyticsUtility.prototype.cookieClear=function(){return n(this,void 0,void 0,(function(){var t,e=this;return a(this,(function(n){return this.log("CookieClearer: "+this.storageSyncKey+" are going to be deleted."),t=this,[2,new Promise((function(n){var a=new XMLHttpRequest;a.withCredentials=!0,a.open("DELETE",e.cookieResourceUrl),a.send(),a.onload=function(){200===a.status?(t.log("CookieClearer: cookie request has been succeeded."),n()):(t.log("CookieClearer: cookie request has been failed."),n())},a.onerror=function(){n()}}))]}))}))},PanalyticsUtility.prototype.globalSetter=function(t){return n(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t?(this.localStorageSetter(t),[4,this.cacheSetter(t)]):(this.log("Value provided to global setter is invalid."),[2]);case 1:return e.sent(),[4,this.cookieClear()];case 2:return e.sent(),[4,this.cookieSetter(t)];case 3:return e.sent(),[2]}}))}))},PanalyticsUtility.prototype.log=function(t){this.logging},PanalyticsUtility}();t.exports=r},630:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,a){return new(n||(n=Promise))((function(i,r){function fulfilled(t){try{step(a.next(t))}catch(t){r(t)}}function rejected(t){try{step(a.throw(t))}catch(t){r(t)}}function step(t){t.done?i(t.value):function adopt(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(fulfilled,rejected)}step((a=a.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,a,i,r,o={label:0,sent:function sent(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function verb(r){return function(s){return function step(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,a&&(i=2&r[0]?a.return:r[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,r[1])).done)return i;switch(a=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,a=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){o.label=r[1];break}if(6===r[0]&&o.label<i[1]){o.label=i[1],i=r;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(r);break}i[2]&&o.ops.pop(),o.trys.pop();continue}r=e.call(t,o)}catch(t){r=[6,t],a=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}};e.__esModule=!0;var i="*****",r="SensitiveDataFilter:",o=function(){function SensitiveDataFilter(t){if("string"!=typeof t.host)throw"Server host is undefined";this.host=t.host,this.logging=!!t.logging}return SensitiveDataFilter.prototype.init=function(){return n(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,this.updateRules()];case 1:return t.sent(),[2]}}))}))},SensitiveDataFilter.prototype.transformUrl=function(t){var e=this;if(!t||!this.rules||!this.rules.filters)return t;var n=new URL(t),a=n.host;n.password.length&&(n.password=i),n.username.length&&(n.username=i),this.rules.filters.forEach((function(t){a.match(t.domain)&&(n.pathname=e.processFilterRules(t.rules,n.pathname),n.search=e.processFilterRules(t.rules,n.search),n.hash=e.processFilterRules(t.rules,n.hash))}));var o=n.toString();return this.logging&&this.log(r+" Transformed url: "+t+" -> "+o),o},SensitiveDataFilter.prototype.transformTitle=function(t,e){var n=this;if(!this.rules||!this.rules.titles)return e;var a=this.rules.titles,o=e;return a.forEach((function(e){t.match(e.domain)&&e.rules.forEach((function(t){t.value&&(o=n.applyRegexp(t.value,o,i))}))})),this.logging&&this.log(r+" Transformed title: "+e+" -> "+o),o},SensitiveDataFilter.prototype.updateRules=function(){return n(this,void 0,void 0,(function(){var t,e,n,i;return a(this,(function(a){switch(a.label){case 0:t=this.host+"/api/privacy/data/rules/exclusions",a.label=1;case 1:return a.trys.push([1,4,,5]),[4,fetch(t,{headers:{"Content-type":"application/json;charset=utf-8"}})];case 2:return e=a.sent(),n=this,[4,e.json()];case 3:return n.rules=a.sent(),[3,5];case 4:throw i=a.sent(),new Error(i);case 5:return[2]}}))}))},SensitiveDataFilter.prototype.processFilterRules=function(t,e){var n=this,a=e;return t.forEach((function(t){if(t.value&&t.type)switch(t.type){case"parameter":a=n.applyRegexp("([?&]"+t.value+"=)([^&]+)",a,"$1"+i);break;case"path":a=n.applyPathFilter(t.value,a,i);break;default:n.logging&&n.log(r+" Unknown rule type: "+t.type)}})),a},SensitiveDataFilter.prototype.applyPathFilter=function(t,e,n){var a,i=new RegExp(t,"i"),r=e.match(i);if(!r)return e;var o=r[0],s=r[1];return a=n+s+n,0===o.indexOf(s)&&(a=s+n),o.indexOf(s)===o.length-s.length&&(a=n+s),e.replace(o,a)},SensitiveDataFilter.prototype.applyRegexp=function(t,e,n){var a=new RegExp(t,"ig");return e.replace(a,n)},SensitiveDataFilter.prototype.log=function(t){},SensitiveDataFilter}();e.default=o}},e={};function __webpack_require__(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,__webpack_require__),i.exports}(()=>{__webpack_require__(7588);var t=new(__webpack_require__(411));window.ActivatePanelOS=function(){t.UpdateActiveStatus(!0)},window.DeactivatePanelOS=function(){t.UpdateActiveStatus(!1)},window.UpdatePanelOSConfig=function(){t.UpdateConfig()},window.GetAdBlockerStatus=function(e,n){t.GetAdBlockerStatus(e,n)},window.GetAdBlockerCounters=function(e,n,a){t.GetAdBlockerCounters(e,n,a)},window.EnableAdBlocker=function(e,n,a){t.EnableAdBlocker(e,n,a)},window.DisableAdBlocker=function(e,n,a){t.DisableAdBlocker(e,n,a)},window.GetExcludeList=function(e,n,a){t.GetExcludeList(e,n,a)},window.AddIntoExcludeList=function(e,n,a,i){t.AddIntoExcludeList(e,n,a,i)},window.RemoveFromExcludeList=function(e,n,a,i){t.RemoveFromExcludeList(e,n,a,i)},window.HasItemInExcludeList=function(e,n,a,i){t.HasItemInExcludeList(e,n,a,i)},window.AddCurrentDomainIntoExcludeList=function(e,n){t.AddCurrentDomainIntoExcludeList(e,n)},window.AddCurrentPageIntoExcludeList=function(e,n){t.AddCurrentPageIntoExcludeList(e,n)},window.GetCurrentDomain=function(e,n){t.GetCurrentDomain(e,n)},window.GetCurrentPageUrl=function(e,n){t.GetCurrentPageUrl(e,n)},window.EnableDataCollection=function(e,n){t.EnableDataCollection(e,n)},window.DisableDataCollection=function(e,n){t.DisableDataCollection(e,n)},window.GetDataCollectionStatus=function(e,n){t.GetDataCollectionStatus(e,n)},t.Init()})()})();
//# sourceMappingURL=panelos-background.js.map