(self.webpackChunkchrome_extension=self.webpackChunkchrome_extension||[]).push([[25],{34909:(e,t,n)=>{var r=n(51248),o=n(8611),i=o;i.v1=r,i.v4=o,e.exports=i},12300:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},39929:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},51248:(e,t,n)=>{var r,o,i=n(39929),a=n(12300),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=i();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,y=h-s+(g-u)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,u=g,o=p;var v=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;l[c++]=v>>>24&255,l[c++]=v>>>16&255,l[c++]=v>>>8&255,l[c++]=255&v;var b=h/4294967296*1e4&268435455;l[c++]=b>>>8&255,l[c++]=255&b,l[c++]=b>>>24&15|16,l[c++]=b>>>16&255,l[c++]=p>>>8|128,l[c++]=255&p;for(var m=0;m<6;++m)l[c+m]=d[m];return t||a(l)}},8611:(e,t,n)=>{var r=n(39929),o=n(12300);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},14971:(e,t,n)=>{"use strict";n.d(t,{Ep:()=>d,M4:()=>l,Mg:()=>a,Ol:()=>r,U9:()=>c,Uy:()=>g,Yz:()=>f,_7:()=>y,_Y:()=>u,dH:()=>o,gx:()=>s,hq:()=>p,vF:()=>h,vI:()=>i});var r,o,i,a=5e3,s=[400,401,403],u="ConnectionStateChange";!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.GQL_DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error"}(r||(r={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(o||(o={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(i||(i={}));var c="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",l={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"},d=15e3,p=15e3,f=3e5,h=65e3,g=5e3,y=6e4},42065:(e,t,n)=>{"use strict";n.d(t,{R:()=>oe,T:()=>re});var r=n(15215),o=n(64988),i=n(34549),a=n(35166),s=n(37070),u=n(88319),c=n(16064);const l=n.n(c)();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var p="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function f(e,t){for(var n,r=/\r\n|[\n\r]/g,o=1,i=t+1;(n=r.exec(e.body))&&n.index<t;)o+=1,i=t+1-(n.index+n[0].length);return{line:o,column:i}}function h(e){return g(e.source,f(e.source,e.start))}function g(e,t){var n=e.locationOffset.column-1,r=v(n)+e.body,o=t.line-1,i=e.locationOffset.line-1,a=t.line+i,s=1===t.line?n:0,u=t.column+s,c="".concat(e.name,":").concat(a,":").concat(u,"\n"),l=r.split(/\r\n|[\n\r]/g),d=l[o];if(d.length>120){for(var p=Math.floor(u/80),f=u%80,h=[],g=0;g<d.length;g+=80)h.push(d.slice(g,g+80));return c+y([["".concat(a),h[0]]].concat(h.slice(1,p+1).map((function(e){return["",e]})),[[" ",v(f-1)+"^"],["",h[p+1]]]))}return c+y([["".concat(a-1),l[o-1]],["".concat(a),d],["",v(u-1)+"^"],["".concat(a+1),l[o+1]]])}function y(e){var t=e.filter((function(e){e[0];return void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t,r=e[0],o=e[1];return v(n-(t=r).length)+t+(o?" | "+o:" |")})).join("\n")}function v(e){return Array(e+1).join(" ")}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){var t="function"==typeof Map?new Map:void 0;return C=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return P(e,arguments,N(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),O(r,e)},C(e)}function P(e,t,n){return P=T()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&O(o,n.prototype),o},P.apply(null,arguments)}function T(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function O(e,t){return O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},O(e,t)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(s,e);var t,n,r,o,i,a=(t=s,n=T(),function(){var e,r=N(t);if(n){var o=N(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return _(this,e)});function s(e,t,n,r,o,i,u){var c,l,p,h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(h=a.call(this,e)).name="GraphQLError",h.originalError=null!=i?i:void 0,h.nodes=A(Array.isArray(t)?t:t?[t]:void 0);for(var g=[],y=0,v=null!==(b=h.nodes)&&void 0!==b?b:[];y<v.length;y++){var b,w=v[y].loc;null!=w&&g.push(w)}g=A(g),h.source=null!=n?n:null===(c=g)||void 0===c?void 0:c[0].source,h.positions=null!=r?r:null===(l=g)||void 0===l?void 0:l.map((function(e){return e.start})),h.locations=r&&n?r.map((function(e){return f(n,e)})):null===(p=g)||void 0===p?void 0:p.map((function(e){return f(e.source,e.start)})),h.path=null!=o?o:void 0;var C,P=null==i?void 0:i.extensions;return null==u&&("object"==d(C=P)&&null!==C)?h.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},P):h.extensions=null!=u?u:{},Object.defineProperties(E(h),{message:{enumerable:!0},locations:{enumerable:null!=h.locations},path:{enumerable:null!=h.path},extensions:{enumerable:null!=h.extensions&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=i&&i.stack?(Object.defineProperty(E(h),"stack",{value:i.stack,writable:!0,configurable:!0}),_(h)):(Error.captureStackTrace?Error.captureStackTrace(E(h),s):Object.defineProperty(E(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return r=s,(o=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var o=r[n];o.loc&&(t+="\n\n"+h(o.loc))}else if(e.source&&e.locations)for(var i=0,a=e.locations;i<a.length;i++){var s=a[i];t+="\n\n"+g(e.source,s)}return t}(this)}},{key:p,get:function(){return"Object"}}])&&w(r.prototype,o),i&&w(r,i),s}(C(Error));function A(e){return void 0===e||0===e.length?void 0:e}var I,x=n(88835),M=n(52886),R=n(48287),D=n(78868),L=n(71805),U=n(766),j=n(89404),K=n(36525),B=n(11125),z=n(16772),G=new i.C("AbstractPubSubProvider"),H=function(){function e(e){this._config=e}return e.prototype.configure=function(e){return this._config=(0,r.__assign)((0,r.__assign)({},e),this._config),G.debug("configure "+this.getProviderName(),this._config),this.options},e.prototype.getCategory=function(){return"PubSub"},Object.defineProperty(e.prototype,"options",{get:function(){return(0,r.__assign)({},this._config)},enumerable:!0,configurable:!0}),e}(),q=n(33782),F=n(14971),W=n(67453),V=function(){return(new W.A).networkMonitor()},Y={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}},J=function(){function e(){var e=this;this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=V().subscribe((function(t){var n,r=t.online;e.record(r?Y.ONLINE:Y.OFFLINE),null===(n=e._initialNetworkStateSubscription)||void 0===n||n.unsubscribe()})),this._linkedConnectionStateObservable=new l((function(t){t.next(e._linkedConnectionState),e._linkedConnectionStateObserver=t}))}return e.prototype.enableNetworkMonitoring=function(){var e,t=this;null===(e=this._initialNetworkStateSubscription)||void 0===e||e.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=V().subscribe((function(e){var n=e.online;t.record(n?Y.ONLINE:Y.OFFLINE)})))},e.prototype.disableNetworkMonitoring=function(){var e;null===(e=this._networkMonitoringSubscription)||void 0===e||e.unsubscribe(),this._networkMonitoringSubscription=void 0},Object.defineProperty(e.prototype,"connectionStateObservable",{get:function(){var e,t=this;return this._linkedConnectionStateObservable.map((function(e){return t.connectionStatesTranslator(e)})).filter((function(t){var n=t!==e;return e=t,n}))},enumerable:!0,configurable:!0}),e.prototype.record=function(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();var t=(0,r.__assign)((0,r.__assign)({},this._linkedConnectionState),e);this._linkedConnectionState=(0,r.__assign)({},t),this._linkedConnectionStateObserver.next(this._linkedConnectionState)},e.prototype.connectionStatesTranslator=function(e){var t=e.connectionState,n=e.networkState,r=e.intendedConnectionState,o=e.keepAliveState;return"connected"===t&&"disconnected"===n?q.K.ConnectedPendingNetwork:"connected"===t&&"disconnected"===r?q.K.ConnectedPendingDisconnect:"disconnected"===t&&"connected"===r&&"disconnected"===n?q.K.ConnectionDisruptedPendingNetwork:"disconnected"===t&&"connected"===r?q.K.ConnectionDisrupted:"connected"===t&&"unhealthy"===o?q.K.ConnectedPendingKeepAlive:"connecting"===t?q.K.Connecting:"disconnected"===t?q.K.Disconnected:q.K.Connected},e}();!function(e){e.START_RECONNECT="START_RECONNECT",e.HALT_RECONNECT="HALT_RECONNECT"}(I||(I={}));var Q=function(){function e(){this.reconnectObservers=[]}return e.prototype.addObserver=function(e){this.reconnectObservers.push(e)},e.prototype.record=function(e){var t=this;e===I.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout((function(){t._triggerReconnect(),t.reconnectIntervalId=setInterval((function(){t._triggerReconnect()}),F._7)}),F.Uy)),e===I.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))},e.prototype.close=function(){this.reconnectObservers.forEach((function(e){var t;null===(t=e.complete)||void 0===t||t.call(e)}))},e.prototype._triggerReconnect=function(){this.reconnectObservers.forEach((function(e){var t;null===(t=e.next)||void 0===t||t.call(e)}))},e}(),$=new i.C("AWSAppSyncRealTimeProvider"),Z=function(e,t,n){D.Y.dispatch("api",{event:e,data:t,message:n},"PubSub",F.U9)},X=/^https:\/\/\w{26}\.appsync\-api\.\w{2}(?:(?:\-\w{2,})+)\-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,ee=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.socketStatus=F.vI.CLOSED,n.keepAliveTimeout=F.Yz,n.subscriptionObserverMap=new Map,n.promiseArray=[],n.connectionStateMonitor=new J,n.reconnectionMonitor=new Q,n.connectionStateMonitorSubscription=n.connectionStateMonitor.connectionStateObservable.subscribe((function(e){Z(F._Y,{provider:n,connectionState:e},"Connection state is "+e),n.connectionState=e,e===q.K.ConnectionDisrupted&&n.reconnectionMonitor.record(I.START_RECONNECT),[q.K.Connected,q.K.ConnectedPendingDisconnect,q.K.ConnectedPendingKeepAlive,q.K.ConnectedPendingNetwork,q.K.ConnectionDisruptedPendingNetwork,q.K.Disconnected].includes(e)&&n.reconnectionMonitor.record(I.HALT_RECONNECT)})),n}return(0,r.__extends)(t,e),t.prototype.close=function(){this.socketStatus=F.vI.CLOSED,this.connectionStateMonitor.record(Y.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close()},t.prototype.getNewWebSocket=function(e,t){return new WebSocket(e,t)},t.prototype.getProviderName=function(){return"AWSAppSyncRealTimeProvider"},t.prototype.newClient=function(){throw new Error("Not used here")},t.prototype.publish=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){throw new Error("Operation not supported")}))}))},t.prototype.isCustomDomain=function(e){return null===e.match(X)},t.prototype.subscribe=function(e,t,n){var o=this,i=null==t?void 0:t.appSyncGraphqlEndpoint;return new l((function(e){if(t&&i){var a,s=!1,u=(0,M.v4)(),c=function(){s||(s=!0,o._startSubscriptionWithAWSAppSyncRealTime({options:t,observer:e,subscriptionId:u,customUserAgentDetails:n}).catch((function(e){$.debug(q.U.REALTIME_SUBSCRIPTION_INIT_ERROR+": "+e),o.connectionStateMonitor.record(Y.CLOSED)})).finally((function(){s=!1})))};return a=new l((function(e){o.reconnectionMonitor.addObserver(e)})).subscribe((function(){c()})),c(),function(){return(0,r.__awaiter)(o,void 0,void 0,(function(){var e,t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:null==a||a.unsubscribe(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this._waitForSubscriptionToBeConnected(u)];case 2:if(n.sent(),!(e=(this.subscriptionObserverMap.get(u)||{}).subscriptionState))return[2];if(e!==F.dH.CONNECTED)throw new Error("Subscription never connected");return this._sendUnsubscriptionMessage(u),[3,5];case 3:return t=n.sent(),$.debug("Error while unsubscribing "+t),[3,5];case 4:return this._removeSubscriptionObserver(u),[7];case 5:return[2]}}))}))}}e.error({errors:[(0,r.__assign)({},new k("Subscribe only available for AWS AppSync endpoint"))]}),e.complete()}))},Object.defineProperty(t.prototype,"isSSLEnabled",{get:function(){return!this.options.aws_appsync_dangerously_connect_to_http_endpoint_for_testing},enumerable:!0,configurable:!0}),t.prototype._startSubscriptionWithAWSAppSyncRealTime=function(e){var t,n=e.options,o=e.observer,i=e.subscriptionId,s=e.customUserAgentDetails;return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,u,c,l,d,p,f,h,g,y,v,b,m,S,w,_,E,C,P,T,O,N,k,A=this;return(0,r.__generator)(this,(function(I){switch(I.label){case 0:return e=n.appSyncGraphqlEndpoint,u=n.authenticationType,c=n.query,l=n.variables,d=n.apiKey,p=n.region,f=n.graphql_headers,h=void 0===f?function(){return{}}:f,g=n.additionalHeaders,y=void 0===g?{}:g,v=F.dH.PENDING,b={query:c,variables:l},this.subscriptionObserverMap.set(i,{observer:o,query:null!=c?c:"",variables:null!=l?l:{},subscriptionState:v,startAckTimeoutId:void 0}),m=JSON.stringify(b),w=[{}],[4,this._awsRealTimeHeaderBasedAuth({apiKey:d,appSyncGraphqlEndpoint:e,authenticationType:u,payload:m,canonicalUri:"",region:p,additionalHeaders:y})];case 1:return _=[r.__assign.apply(void 0,w.concat([I.sent()]))],[4,h()];case 2:S=r.__assign.apply(void 0,[r.__assign.apply(void 0,[r.__assign.apply(void 0,_.concat([I.sent()])),y]),(k={},k[a.Y]=(0,L.fE)(s),k)]),E={id:i,payload:{data:m,extensions:{authorization:(0,r.__assign)({},S)}},type:F.Ol.GQL_START},C=JSON.stringify(E),I.label=3;case 3:return I.trys.push([3,5,,6]),this.connectionStateMonitor.record(Y.OPENING_CONNECTION),[4,this._initializeWebSocketConnection({apiKey:d,appSyncGraphqlEndpoint:e,authenticationType:u,region:p,additionalHeaders:y})];case 4:return I.sent(),[3,6];case 5:return P=I.sent(),this._logStartSubscriptionError(i,o,P),[2];case 6:return T=null!==(t=this.subscriptionObserverMap.get(i))&&void 0!==t?t:{},O=T.subscriptionFailedCallback,N=T.subscriptionReadyCallback,this.subscriptionObserverMap.set(i,{observer:o,subscriptionState:v,query:null!=c?c:"",variables:null!=l?l:{},subscriptionReadyCallback:N,subscriptionFailedCallback:O,startAckTimeoutId:setTimeout((function(){A._timeoutStartSubscriptionAck.call(A,i)}),F.hq)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(C),[2]}}))}))},t.prototype._logStartSubscriptionError=function(e,t,n){var o;$.debug({err:n});var i=String(null!==(o=n.message)&&void 0!==o?o:"");if(Promise.resolve(this.connectionStateMonitor.record(Y.CLOSED)),this.connectionState!==q.K.ConnectionDisruptedPendingNetwork){(0,U.gD)(n)?t.error({errors:[(0,r.__assign)({},new k(q.U.CONNECTION_FAILED+": "+i))]}):$.debug(q.U.CONNECTION_FAILED+": "+i);var a=(this.subscriptionObserverMap.get(e)||{}).subscriptionFailedCallback;"function"==typeof a&&a()}},t.prototype._waitForSubscriptionToBeConnected=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return(0,r.__generator)(this,(function(r){return(t=this.subscriptionObserverMap.get(e))&&t.subscriptionState===F.dH.PENDING?[2,new Promise((function(r,o){var i=t.observer,a=t.subscriptionState,s=t.variables,u=t.query;n.subscriptionObserverMap.set(e,{observer:i,subscriptionState:a,variables:s,query:u,subscriptionReadyCallback:r,subscriptionFailedCallback:o})}))]:[2]}))}))},t.prototype._sendUnsubscriptionMessage=function(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===F.vI.READY){var t={id:e,type:F.Ol.GQL_STOP},n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){$.debug({err:e})}},t.prototype._removeSubscriptionObserver=function(e){this.subscriptionObserverMap.delete(e),setTimeout(this._closeSocketIfRequired.bind(this),1e3)},t.prototype._closeSocketIfRequired=function(){if(!(this.subscriptionObserverMap.size>0))if(this.awsRealTimeSocket)if(this.connectionStateMonitor.record(Y.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{$.debug("closing WebSocket..."),this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId);var e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=F.vI.CLOSED,this.connectionStateMonitor.record(Y.CLOSED)}else this.socketStatus=F.vI.CLOSED},t.prototype._handleIncomingSubscriptionMessage=function(e){var t=this;if("string"==typeof e.data){$.debug("subscription message from AWS AppSync RealTime: "+e.data);var n=JSON.parse(String(e.data)),o=n.id,i=void 0===o?"":o,a=n.payload,s=n.type,u=this.subscriptionObserverMap.get(i)||{},c=u.observer,l=void 0===c?null:c,d=u.query,p=void 0===d?"":d,f=u.variables,h=void 0===f?{}:f,g=u.startAckTimeoutId,y=u.subscriptionReadyCallback,v=u.subscriptionFailedCallback;if($.debug({id:i,observer:l,query:p,variables:h}),s===F.Ol.GQL_DATA&&a&&a.data)l?l.next(a):$.debug("observer not found for id: "+i);else{if(s===F.Ol.GQL_START_ACK){$.debug("subscription ready for "+JSON.stringify({query:p,variables:h})),"function"==typeof y&&y(),g&&clearTimeout(g),Z(q.U.SUBSCRIPTION_ACK,{query:p,variables:h},"Connection established for subscription");var b=F.dH.CONNECTED;return l&&this.subscriptionObserverMap.set(i,{observer:l,query:p,variables:h,startAckTimeoutId:void 0,subscriptionState:b,subscriptionReadyCallback:y,subscriptionFailedCallback:v}),void this.connectionStateMonitor.record(Y.CONNECTION_ESTABLISHED)}if(s===F.Ol.GQL_CONNECTION_KEEP_ALIVE)return this.keepAliveTimeoutId&&clearTimeout(this.keepAliveTimeoutId),this.keepAliveAlertTimeoutId&&clearTimeout(this.keepAliveAlertTimeoutId),this.keepAliveTimeoutId=setTimeout((function(){return t._errorDisconnect(q.U.TIMEOUT_DISCONNECT)}),this.keepAliveTimeout),this.keepAliveAlertTimeoutId=setTimeout((function(){t.connectionStateMonitor.record(Y.KEEP_ALIVE_MISSED)}),F.vF),void this.connectionStateMonitor.record(Y.KEEP_ALIVE);if(s===F.Ol.GQL_ERROR){b=F.dH.FAILED;l&&(this.subscriptionObserverMap.set(i,{observer:l,query:p,variables:h,startAckTimeoutId:g,subscriptionReadyCallback:y,subscriptionFailedCallback:v,subscriptionState:b}),$.debug(q.U.CONNECTION_FAILED+": "+JSON.stringify(a)),l.error({errors:[(0,r.__assign)({},new k(q.U.CONNECTION_FAILED+": "+JSON.stringify(a)))]}),g&&clearTimeout(g),"function"==typeof v&&v())}}}},t.prototype._errorDisconnect=function(e){$.debug("Disconnect error: "+e),this.awsRealTimeSocket&&(this.connectionStateMonitor.record(Y.CLOSED),this.awsRealTimeSocket.close()),this.socketStatus=F.vI.CLOSED},t.prototype._timeoutStartSubscriptionAck=function(e){var t=this.subscriptionObserverMap.get(e);if(t){var n=t.observer,r=t.query,o=t.variables;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:o,subscriptionState:F.dH.FAILED}),this.connectionStateMonitor.record(Y.CLOSED),$.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:o}))}},t.prototype._initializeWebSocketConnection=function(e){var t=this,n=e.appSyncGraphqlEndpoint,o=e.authenticationType,i=e.apiKey,a=e.region,s=e.additionalHeaders;if(this.socketStatus!==F.vI.READY)return new Promise((function(e,u){return(0,r.__awaiter)(t,void 0,void 0,(function(){var t,c,l,d,p,f,h,g;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:if(this.promiseArray.push({res:e,rej:u}),this.socketStatus!==F.vI.CLOSED)return[3,5];r.label=1;case 1:return r.trys.push([1,4,,5]),this.socketStatus=F.vI.CONNECTING,[4,this._awsRealTimeHeaderBasedAuth({authenticationType:o,payload:"{}",canonicalUri:"/connect",apiKey:i,appSyncGraphqlEndpoint:n,region:a,additionalHeaders:s})];case 2:return t=r.sent(),c=t?JSON.stringify(t):"",y=c,l=R.Buffer.from(y).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,""),d=null!=n?n:"",d=this.isCustomDomain(d)?d.concat("/realtime"):d.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta"),p=this.isSSLEnabled?"wss://":"ws://",d=d.replace("https://",p).replace("http://",p),f=d,h="header-"+l,[4,this._initializeRetryableHandshake(f,h)];case 3:return r.sent(),this.promiseArray.forEach((function(e){var t=e.res;$.debug("Notifying connection successful"),t()})),this.socketStatus=F.vI.READY,this.promiseArray=[],[3,5];case 4:return g=r.sent(),$.debug("Connection exited with",g),this.promiseArray.forEach((function(e){return(0,e.rej)(g)})),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=F.vI.CLOSED,[3,5];case 5:return[2]}var y}))}))}))},t.prototype._initializeRetryableHandshake=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return $.debug("Initializaling retryable Handshake"),[4,(0,U.hu)(this._initializeHandshake.bind(this),[e,t],F.Mg)];case 1:return n.sent(),[2]}}))}))},t.prototype._initializeHandshake=function(e,t){return(0,r.__awaiter)(this,void 0,void 0,(function(){var n,o,i,a,s=this;return(0,r.__generator)(this,(function(u){switch(u.label){case 0:$.debug("Initializing handshake "+e),u.label=1;case 1:return u.trys.push([1,4,,5]),[4,new Promise((function(n,r){var o=s.getNewWebSocket(e,["graphql-ws",t]);o.onerror=function(){$.debug("WebSocket connection error")},o.onclose=function(){r(new Error("Connection handshake error"))},o.onopen=function(){return s.awsRealTimeSocket=o,n()}}))];case 2:return u.sent(),[4,new Promise((function(e,t){if(s.awsRealTimeSocket){var n=!1;s.awsRealTimeSocket.onerror=function(e){$.debug("WebSocket error "+JSON.stringify(e))},s.awsRealTimeSocket.onclose=function(e){$.debug("WebSocket closed "+e.reason),t(new Error(JSON.stringify(e)))},s.awsRealTimeSocket.onmessage=function(o){if("string"==typeof o.data){$.debug("subscription message from AWS AppSyncRealTime: "+o.data+" ");var i=JSON.parse(o.data),a=i.type,u=i.payload,c=(void 0===u?{}:u).connectionTimeoutMs,l=void 0===c?F.Yz:c;if(a===F.Ol.GQL_CONNECTION_ACK)return n=!0,s.awsRealTimeSocket&&(s.keepAliveTimeout=l,s.awsRealTimeSocket.onmessage=s._handleIncomingSubscriptionMessage.bind(s),s.awsRealTimeSocket.onerror=function(e){$.debug(e),s._errorDisconnect(q.U.CONNECTION_CLOSED)},s.awsRealTimeSocket.onclose=function(e){$.debug("WebSocket closed "+e.reason),s._errorDisconnect(q.U.CONNECTION_CLOSED)}),void e("Cool, connected to AWS AppSyncRealTime");if(a===F.Ol.GQL_CONNECTION_ERROR){var d=i.payload,p=(void 0===d?{}:d).errors,f=(0,r.__read)(void 0===p?[]:p,1)[0],h=void 0===f?{}:f,g=h.errorType,y=void 0===g?"":g,v=h.errorCode;t({errorType:y,errorCode:void 0===v?0:v})}}};var o={type:F.Ol.GQL_CONNECTION_INIT};s.awsRealTimeSocket.send(JSON.stringify(o)),setTimeout((function(){n||(s.connectionStateMonitor.record(Y.CONNECTION_FAILED),t(new Error("Connection timeout: ack from AWSAppSyncRealTime was not received after "+F.Ep+" ms")))}),F.Ep)}}))];case 3:return u.sent(),[3,5];case 4:throw n=u.sent(),i=(o=n).errorType,a=o.errorCode,F.gx.includes(a)?new U.OI(i):i?new Error(i):n;case 5:return[2]}}))}))},t.prototype._awsRealTimeHeaderBasedAuth=function(e){var t=e.authenticationType,n=e.payload,o=e.canonicalUri,i=e.appSyncGraphqlEndpoint,a=e.apiKey,s=e.region,u=e.additionalHeaders;return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,c,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e={API_KEY:this._awsRealTimeApiKeyHeader.bind(this),AWS_IAM:this._awsRealTimeIAMHeader.bind(this),OPENID_CONNECT:this._awsRealTimeOPENIDHeader.bind(this),AMAZON_COGNITO_USER_POOLS:this._awsRealTimeCUPHeader.bind(this),AWS_LAMBDA:this._customAuthHeader},t&&e[t]?[3,1]:($.debug("Authentication type "+t+" not supported"),[2,void 0]);case 1:return c=e[t],l=x.parse(null!=i?i:"").host,$.debug("Authenticating with "+t),[4,c({payload:n,canonicalUri:o,appSyncGraphqlEndpoint:i,apiKey:a,region:s,host:l,additionalHeaders:u})];case 2:return[2,r.sent()]}}))}))},t.prototype._awsRealTimeCUPHeader=function(e){var t=e.host;return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,z.N.currentSession()];case 1:return[2,{Authorization:e.sent().getAccessToken().getJwtToken(),host:t}]}}))}))},t.prototype._awsRealTimeOPENIDHeader=function(e){var t=e.host;return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,n,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,B.Y.getItem("federatedInfo")];case 1:return(n=r.sent())?(e=n.token,[3,4]):[3,2];case 2:return[4,z.N.currentAuthenticatedUser()];case 3:(o=r.sent())&&(e=o.token),r.label=4;case 4:if(!e)throw new Error("No federated jwt");return[2,{Authorization:e,host:t}]}}))}))},t.prototype._awsRealTimeApiKeyHeader=function(e){var t=e.apiKey,n=e.host;return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,o;return(0,r.__generator)(this,(function(r){return e=new Date,o=e.toISOString().replace(/[:\-]|\.\d{3}/g,""),[2,{host:n,"x-amz-date":o,"x-api-key":t}]}))}))},t.prototype._awsRealTimeIAMHeader=function(e){var t=e.payload,n=e.canonicalUri,o=e.appSyncGraphqlEndpoint,i=e.region;return(0,r.__awaiter)(this,void 0,void 0,(function(){var e,a,s;return(0,r.__generator)(this,(function(u){switch(u.label){case 0:return e={region:i,service:"appsync"},[4,this._ensureCredentials()];case 1:if(!u.sent())throw new Error("No credentials");return[4,j.J.get().then((function(e){var t=e;return{secret_key:t.secretAccessKey,access_key:t.accessKeyId,session_token:t.sessionToken}}))];case 2:return a=u.sent(),s={url:""+o+n,data:t,method:"POST",headers:(0,r.__assign)({},F.M4)},[2,K.l.sign(s,a,e).headers]}}))}))},t.prototype._customAuthHeader=function(e){var t=e.host,n=e.additionalHeaders;if(!n||!n.Authorization)throw new Error("No auth token specified");return{Authorization:n.Authorization,host:t}},t.prototype._ensureCredentials=function(){return j.J.get().then((function(e){if(!e)return!1;var t=j.J.shear(e);return $.debug("set credentials for AWSAppSyncRealTimeProvider",t),!0})).catch((function(e){return $.warn("ensure credentials error",e),!1}))},t}(H),te=(0,o.gy)().isNode,ne=new i.C("PubSub"),re=function(){function e(e){this._options=null!=e?e:{},ne.debug("PubSub Options",this._options),this._pluggables=[],this.subscribe=this.subscribe.bind(this)}return Object.defineProperty(e.prototype,"awsAppSyncRealTimeProvider",{get:function(){return this._awsAppSyncRealTimeProvider||(this._awsAppSyncRealTimeProvider=new ee(this._options)),this._awsAppSyncRealTimeProvider},enumerable:!0,configurable:!0}),e.prototype.getModuleName=function(){return"InternalPubSub"},e.prototype.configure=function(e){var t=this,n=e?e.PubSub||e:{};return ne.debug("configure PubSub",{opt:n}),this._options=Object.assign({},this._options,n),this._pluggables.map((function(e){return e.configure(t._options)})),this._options},e.prototype.addPluggable=function(e){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(t){return e&&"PubSub"===e.getCategory()?(this._pluggables.push(e),[2,e.configure(this._options)]):[2]}))}))},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.getProviderByName=function(e){return e===a.b?this.awsAppSyncRealTimeProvider:this._pluggables.find((function(t){return t.getProviderName()===e}))},e.prototype.getProviders=function(e){void 0===e&&(e={});var t=e.provider;if(!t)return this._pluggables;var n=this.getProviderByName(t);if(!n)throw new Error("Could not find provider named "+String(t));return[n]},e.prototype.publish=function(e,t,n){return(0,r.__awaiter)(this,void 0,void 0,(function(){return(0,r.__generator)(this,(function(r){return[2,Promise.all(this.getProviders(n).map((function(r){return r.publish(e,t,n)})))]}))}))},e.prototype.subscribe=function(e,t,n){if(te&&this._options&&this._options.ssr)throw new Error("Subscriptions are not supported for Server-Side Rendering (SSR)");ne.debug("subscribe options",t);var o=this.getProviders(t),i=(0,r.__assign)({category:s.b7.PubSub,action:s.Mv.Subscribe},n);return new l((function(n){var r=o.map((function(n){return{provider:n,observable:n.subscribe(e,t,i)}})).map((function(e){var t=e.provider;return e.observable.subscribe({start:console.error,next:function(e){return n.next({provider:t,value:e})},error:function(e){return n.error({provider:t,error:e})}})}));return function(){return r.forEach((function(e){return e.unsubscribe()}))}}))},e}(),oe=new re;u.H.register(oe)},33782:(e,t,n)=>{"use strict";var r,o;n.d(t,{K:()=>o,U:()=>r}),function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(r||(r={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(o||(o={}))},52886:(e,t,n)=>{var r=n(10849),o=n(1534),i=o;i.v1=r,i.v4=o,e.exports=i},19295:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,o=t;return[o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],"-",o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]],o[e[r++]]].join("")}},89566:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},10849:(e,t,n)=>{var r,o,i=n(89566),a=n(19295),s=0,u=0;e.exports=function(e,t,n){var c=t&&n||0,l=t||[],d=(e=e||{}).node||r,p=void 0!==e.clockseq?e.clockseq:o;if(null==d||null==p){var f=i();null==d&&(d=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==p&&(p=o=16383&(f[6]<<8|f[7]))}var h=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:u+1,y=h-s+(g-u)/1e4;if(y<0&&void 0===e.clockseq&&(p=p+1&16383),(y<0||h>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=h,u=g,o=p;var v=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;l[c++]=v>>>24&255,l[c++]=v>>>16&255,l[c++]=v>>>8&255,l[c++]=255&v;var b=h/4294967296*1e4&268435455;l[c++]=b>>>8&255,l[c++]=255&b,l[c++]=b>>>24&15|16,l[c++]=b>>>16&255,l[c++]=p>>>8|128,l[c++]=255&p;for(var m=0;m<6;++m)l[c+m]=d[m];return t||a(l)}},1534:(e,t,n)=>{var r=n(89566),o=n(19295);e.exports=function(e,t,n){var i=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||r)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},30693:(e,t,n)=>{"use strict";n.r(t),n.d(t,{API:()=>zn.n,APIClass:()=>zn.x,AWSCloudWatchProvider:()=>Vr.b,AWSKinesisFirehoseProvider:()=>s.Y,AWSKinesisProvider:()=>a.T,AWSPinpointProvider:()=>i.i,AmazonPersonalizeProvider:()=>u.i,Amplify:()=>r.H,Analytics:()=>o.j,Auth:()=>c.N,AuthModeStrategyType:()=>Hn.$V,Cache:()=>Yn.Y,ClientDevice:()=>rr.C,DataStore:()=>qn.os,Geo:()=>eo.b,Hub:()=>f.Y,I18n:()=>Fr.F,Interactions:()=>Jn.O,Logger:()=>l.C,Notifications:()=>zr,Predicates:()=>Fn.BV,Predictions:()=>Hr,PubSub:()=>Vn,ServiceWorker:()=>Wr.s,Signer:()=>qr.l,SortDirection:()=>Hn.UE,Storage:()=>Bn,StorageClass:()=>jn,graphqlOperation:()=>Gn.D,syncExpression:()=>Hn.iW,withSSRContext:()=>Xr});var r=n(88319),o=n(11724),i=n(26126),a=n(22093),s=n(6096),u=n(67390),c=n(16772),l=n(34549),d=n(3976),p=n(54769),f=n(78868),h=n(89404),g=n(37070),y=n(64603),v=n(55841),b=n(71805),m=n(82622),S=n(16824),w=n(98641),_=function(e){var t=(new DOMParser).parseFromString(e,"text/xml"),n=E(t);return n[Object.keys(n)[0]]},E=function(e){var t,n,r;if(P(e))return(t={})[e.documentElement.nodeName]=E(e.documentElement),t;if(e.nodeType===Node.TEXT_NODE)return null===(n=e.nodeValue)||void 0===n?void 0:n.trim();if(C(e)){if(T(e))return null===(r=e.childNodes[0])||void 0===r?void 0:r.nodeValue;for(var o={},i=0;i<e.attributes.length;i++){var a=e.attributes[i];N(a.nodeName)||(o[a.nodeName]=a.nodeValue)}if(e.children.length>0)for(i=0;i<e.children.length;i++){var s=e.children[i],u=E(s);if(void 0!==u){var c=s.nodeName;void 0===o[c]?o[c]=u:Array.isArray(o[c])?o[c].push(u):o[c]=[o[c],u]}}return 0===Object.keys(o).length?"":o}},C=function(e){return e.nodeType===Node.ELEMENT_NODE},P=function(e){return e.nodeType===Node.DOCUMENT_NODE},T=function(e){var t;return O(e)&&0===e.children.length&&(null===(t=e.firstChild)||void 0===t?void 0:t.nodeType)===Node.TEXT_NODE},O=function(e){for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t];if(!N(n.nodeName))return!1}return!0},N=function(e){return"xmlns"===e||e.startsWith("xmlns:")},k=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},I=function(e){return k(void 0,void 0,void 0,(function(){var t,n,r,o,i,a,s;return A(this,(function(u){switch(u.label){case 0:return!e||e.statusCode<300?[2]:(t=e.statusCode,[4,x(e)]);case 1:return n=u.sent(),r=(null==n?void 0:n.Code)?n.Code:404===t?"NotFound":t.toString(),o=null!==(s=null!==(a=null==n?void 0:n.message)&&void 0!==a?a:null==n?void 0:n.Message)&&void 0!==s?s:r,i=new Error(o),[2,Object.assign(i,{name:r,$metadata:(0,y.j)(e)})]}}))}))},x=function(e){return k(void 0,void 0,void 0,(function(){var t;return A(this,(function(n){switch(n.label){case 0:if(!e.body)throw new Error("S3 aborted request.");return[4,e.body.text()];case 1:if((null==(t=n.sent())?void 0:t.length)>0)try{return[2,_(t)]}catch(e){throw new Error("Failed to parse XML response.")}return[2,{}]}}))}))},M=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,R=/(\d+\.){3}\d+/,D=/\.\./,L=function(e){return M.test(e)&&!R.test(e)&&!D.test(e)},U={service:"s3",endpointResolver:function(e,t){var n,r=e.region,o=e.useAccelerateEndpoint,i=e.customEndpoint,a=e.forcePathStyle;if(i)n=new URL(i);else if(o){if(a)throw new Error("Path style URLs are not supported with S3 Transfer Acceleration.");n=new URL("https://s3-accelerate.".concat((0,m.R)(r)))}else n=new URL("https://s3.".concat(r,".").concat((0,m.R)(r)));if(null==t?void 0:t.Bucket){if(!L(t.Bucket))throw new Error('Invalid bucket name: "'.concat(t.Bucket,'".'));a||t.Bucket.includes(".")?n.pathname="/".concat(t.Bucket):n.host="".concat(t.Bucket,".").concat(n.host)}return{url:n}},retryDecider:(0,S.D)(I),computeDelay:w.y,userAgentValue:(0,b.fE)(),useAccelerateEndpoint:!1,uriEscapePath:!1},j=n(83453),K=n(64169);function B(e){var t=Array.from(e,(function(e){return String.fromCodePoint(e)})).join("");return btoa(t)}function z(e){return(new TextEncoder).encode(e)}function G(e){return B("string"==typeof e?z(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}var H,q,F,W=function(){return W=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},W.apply(this,arguments)},V=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},J=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Q=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},$=function(e){var t,n,r={};try{for(var o=J(Object.entries(e)),i=o.next();!i.done;i=o.next()){var a=Q(i.value,2),s=a[0],u=a[1];null!=u&&(r[s]=u.toString())}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r},Z=function(e){return V(void 0,void 0,void 0,(function(){var t,n,r,o,i,a;return Y(this,(function(s){switch(s.label){case 0:return t=function(e){return V(void 0,void 0,void 0,(function(){var t;return Y(this,(function(n){return(t=new j.V).update(z(e)),[2,t.digest()]}))}))},n=$,a={"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey&&G(e.SSECustomerKey)},r="x-amz-server-side-encryption-customer-key-md5",(o=e.SSECustomerKey)?(i=G,[4,t(e.SSECustomerKey)]):[3,2];case 1:o=i.apply(void 0,[s.sent()]),s.label=2;case 2:return[2,n.apply(void 0,[(a[r]=o,a)])]}}))}))},X=function(e){return V(void 0,void 0,void 0,(function(){var t,n;return Y(this,(function(r){switch(r.label){case 0:return t=[{}],[4,Z(e)];case 1:return[2,W.apply(void 0,[W.apply(void 0,t.concat([r.sent()])),$(W({"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-language":e.ContentLanguage,"content-encoding":e.ContentEncoding,"content-type":e.ContentType,expires:null===(n=e.Expires)||void 0===n?void 0:n.toUTCString(),"x-amz-tagging":e.Tagging},ee(e.Metadata)))])]}}))}))},ee=function(e){return void 0===e&&(e={}),Object.keys(e).reduce((function(t,n){return t["x-amz-meta-".concat(n.toLowerCase())]=e[n],t}),{})},te=function(e,t){return e.pathname.replace(/\/$/,"")+"/".concat(t.split("/").map(K.$).join("/"))},ne=n(29368),re=n(90502),oe=n(20769),ie=n(12215),ae=n(22576),se="sendUploadProgress",ue="sendDownloadProgress",ce="Network Error",le="Request aborted",de="canceled",pe="x-amz-content-sha256",fe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},he=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},ge=n(85884),ye=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},ve=new l.C("xhr-http-handler"),be=function(e,t,n,r){return Object.assign(new Error(e),{code:t,config:r,request:n})},me=function(e,t,n,r){var o=be(e,t,n,r);return o.name="CanceledError",o.__CANCEL__=!0,o},Se=function(e){return!!(null==e?void 0:e.__CANCEL__)},we=function(e){return e?e.split("\r\n").reduce((function(e,t){var n=t.split(": "),r=n.shift(),o=n.join(": ");return e[r.toLowerCase()]=o,e}),{}):{}},_e=function(e){var t=new FileReader;return new Promise((function(n,r){t.onloadend=function(){t.readyState===FileReader.DONE&&n(t.result)},t.onerror=function(){r(t.error)},t.readAsText(e)}))},Ee=["host"],Ce=(0,ie.q)((function(e,t){var n=e.url,r=e.method,o=e.headers,i=e.body,a=t.emitter,s=t.responseType,u=t.abortSignal;return new Promise((function(e,c){var l,d=new XMLHttpRequest;if(d.open(r.toUpperCase(),n.toString()),Object.entries(o).filter((function(e){var t=ye(e,1)[0];return!Ee.includes(t)})).forEach((function(e){var t=ye(e,2),n=t[0],r=t[1];d.setRequestHeader(n,r)})),d.responseType=s,a&&(d.upload.addEventListener("progress",(function(e){a.emit(se,e),ve.debug(e)})),d.addEventListener("progress",(function(e){a.emit(ue,e),ve.debug(e)}))),d.addEventListener("error",(function(){var e=be(ce,"ECONNABORTED",d,t);ve.error(ce),c(e),d=null})),d.addEventListener("abort",(function(){if(d&&!(null==u?void 0:u.aborted)){var e=be(le,"ERR_ABORTED",d,t);ve.error(le),c(e),d=null}})),d.addEventListener("readystatechange",(function(){if(d&&d.readyState===d.DONE){setTimeout((function(){if(d){var t=we(d.getAllResponseHeaders()),n=d.responseType,r=d.response,o="text"===n?d.responseText:"",i={blob:function(){return Promise.resolve(r)},text:(0,ge.n)((function(){return"blob"===n?_e(r):Promise.resolve(o)})),json:function(){return Promise.reject(new Error("Parsing response to JSON is not implemented. Please use response.text() instead."))}},a={statusCode:d.status,headers:t,body:"blob"===d.responseType?Object.assign(r,i):i};e(a),d=null}}))}})),u){var p=function(){if(d){var e=me(de,"ERR_CANCELED",d,t);d.abort(),c(e),d=null}};u.aborted?p():u.addEventListener("abort",p)}if("function"==typeof ReadableStream&&i instanceof ReadableStream)throw new Error("ReadableStream request payload is not supported.");d.send(null!==(l=i)&&void 0!==l?l:null)}))}),[function(e){return function(e){return function(t){return fe(this,void 0,void 0,(function(){var n;return he(this,(function(r){switch(r.label){case 0:return t.headers[pe]?[2,e(t)]:[3,1];case 1:return[4,(0,ae.M)(t.body)];case 2:return n=r.sent(),t.headers[pe]=n,[2,e(t)]}}))}))}}},ne.L,re.D,oe._]),Pe=function(){return Pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pe.apply(this,arguments)},Te=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Oe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Ne=(0,v.A)(Ce,(function(e,t){return Te(void 0,void 0,void 0,(function(){var n,r,o;return Oe(this,(function(i){switch(i.label){case 0:return r=[{}],[4,X(e)];case 1:return n=Pe.apply(void 0,[Pe.apply(void 0,r.concat([i.sent()])),$({"x-amz-copy-source":e.CopySource,"x-amz-metadata-directive":e.MetadataDirective})]),(o=new URL(t.url.toString())).pathname=te(o,e.Key),[2,{method:"PUT",headers:n,url:o}]}}))}))}),(function(e){return Te(void 0,void 0,void 0,(function(){return Oe(this,(function(t){switch(t.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw t.sent();case 2:return[4,x(e)];case 3:return t.sent(),[2,{$metadata:(0,y.j)(e)}]}}))}))}),Pe(Pe({},U),{responseType:"text"})),ke=n(35842),Ae=n(12334),Ie=n(35166),xe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Me=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Re=function(e,t){var n,r,o={};try{for(var i=xe(Object.entries(t)),a=i.next();!a.done;a=i.next()){var s=Me(a.value,2),u=s[0],c=s[1],l=Me(Array.isArray(c)?c:[c],2),d=l[0],p=l[1];e.hasOwnProperty(d)&&(o[u]=p?p(e[d]):String(e[d]))}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return o},De=function(e){return e?Number(e):void 0},Le=function(e){return e?"true"===e:void 0},Ue=function(e){return e?new Date(e):void 0},je=function(e,t){return""===e?[]:t((Array.isArray(e)?e:[e]).filter((function(e){return null!=e})))},Ke=function(e){var t="x-amz-meta-",n=Object.keys(e).filter((function(e){return e.startsWith(t)})).reduce((function(n,r){return n[r.replace(t,"")]=e[r],n}),{});return Object.keys(n).length>0?n:void 0},Be=function(){return Be=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Be.apply(this,arguments)},ze=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ge=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},He=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},qe=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fe=function(e,t){return ze(void 0,void 0,void 0,(function(){var n,r,o;return Ge(this,(function(i){switch(i.label){case 0:return[4,Z(e)];case 1:return n=i.sent(),r=Re(e,{"response-cache-control":"ResponseCacheControl","response-content-disposition":"ResponseContentDisposition","response-content-encoding":"ResponseContentEncoding","response-content-language":"ResponseContentLanguage","response-content-type":"ResponseContentType"}),(o=new URL(t.url.toString())).pathname=te(o,e.Key),o.search=new URLSearchParams(r).toString(),[2,{method:"GET",headers:n,url:o}]}}))}))},We=(0,v.A)(Ce,Fe,(function(e){return ze(void 0,void 0,void 0,(function(){return Ge(this,(function(t){switch(t.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw t.sent();case 2:if(e.body)return[2,Be(Be({},Re(e.headers,{DeleteMarker:["x-amz-delete-marker",Le],AcceptRanges:"accept-ranges",Expiration:"x-amz-expiration",Restore:"x-amz-restore",LastModified:["last-modified",Ue],ContentLength:["content-length",De],ETag:"etag",ChecksumCRC32:"x-amz-checksum-crc32",ChecksumCRC32C:"x-amz-checksum-crc32c",ChecksumSHA1:"x-amz-checksum-sha1",ChecksumSHA256:"x-amz-checksum-sha256",MissingMeta:["x-amz-missing-meta",De],VersionId:"x-amz-version-id",CacheControl:"cache-control",ContentDisposition:"content-disposition",ContentEncoding:"content-encoding",ContentLanguage:"content-language",ContentRange:"content-range",ContentType:"content-type",Expires:["expires",Ue],WebsiteRedirectLocation:"x-amz-website-redirect-location",ServerSideEncryption:"x-amz-server-side-encryption",SSECustomerAlgorithm:"x-amz-server-side-encryption-customer-algorithm",SSECustomerKeyMD5:"x-amz-server-side-encryption-customer-key-md5",SSEKMSKeyId:"x-amz-server-side-encryption-aws-kms-key-id",BucketKeyEnabled:["x-amz-server-side-encryption-bucket-key-enabled",Le],StorageClass:"x-amz-storage-class",RequestCharged:"x-amz-request-charged",ReplicationStatus:"x-amz-replication-status",PartsCount:["x-amz-mp-parts-count",De],TagCount:["x-amz-tagging-count",De],ObjectLockMode:"x-amz-object-lock-mode",ObjectLockRetainUntilDate:["x-amz-object-lock-retain-until-date",Ue],ObjectLockLegalHoldStatus:"x-amz-object-lock-legal-hold"})),{Metadata:Ke(e.headers),$metadata:(0,y.j)(e),Body:e.body})];throw new Error("Got empty response body.");case 3:return[2]}}))}))}),Be(Be({},U),{responseType:"blob"})),Ve=function(e,t){return ze(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,d,p,f,h;return Ge(this,(function(g){switch(g.label){case 0:return n=U.endpointResolver(e,t),[4,Fe(t,n)];case 1:r=g.sent(),o=r.url,i=r.headers,a=r.method,o.searchParams.append(pe,ke.fM),o.searchParams.append(null!==(h=e.userAgentHeader)&&void 0!==h?h:Ie.Y,e.userAgentValue);try{for(s=qe(Object.entries(i).sort((function(e,t){var n=He(e,1)[0],r=He(t,1)[0];return n.localeCompare(r)}))),u=s.next();!u.done;u=s.next())c=He(u.value,2),l=c[0],d=c[1],o.searchParams.append(l,d)}catch(e){p={error:e}}finally{try{u&&!u.done&&(f=s.return)&&f.call(s)}finally{if(p)throw p.error}}return[2,(0,Ae.o)({method:a,url:o,body:null},Be(Be({},U),e)).toString()]}}))}))},Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ye.apply(this,arguments)},Je=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Qe=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},$e=(0,v.A)(Ce,(function(e,t){return Je(void 0,void 0,void 0,(function(){var n,r;return Qe(this,(function(o){switch(o.label){case 0:return[4,Z(e)];case 1:return n=o.sent(),(r=new URL(t.url.toString())).pathname=te(r,e.Key),[2,{method:"HEAD",headers:n,url:r}]}}))}))}),(function(e){return Je(void 0,void 0,void 0,(function(){var t;return Qe(this,(function(n){switch(n.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw n.sent();case 2:return t=Ye(Ye({},Re(e.headers,{ContentLength:["content-length",De],ContentType:"content-type",ETag:"etag",LastModified:["last-modified",Ue],VersionId:"x-amz-version-id"})),{Metadata:Ke(e.headers)}),[2,Ye({$metadata:(0,y.j)(e)},t)]}}))}))}),Ye(Ye({},U),{responseType:"text"})),Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ze.apply(this,arguments)},Xe=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},et=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},tt=(0,v.A)(Ce,(function(e,t){var n=new URL(t.url.toString());return n.pathname=te(n,e.Key),{method:"DELETE",headers:{},url:n}}),(function(e){return Xe(void 0,void 0,void 0,(function(){var t;return et(this,(function(n){switch(n.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw n.sent();case 2:return t=Re(e.headers,{DeleteMarker:["x-amz-delete-marker",Le],VersionId:"x-amz-version-id",RequestCharged:"x-amz-request-charged"}),[2,Ze(Ze({},t),{$metadata:(0,y.j)(e)})]}}))}))}),Ze(Ze({},U),{responseType:"text"})),nt=function(){return nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},nt.apply(this,arguments)},rt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},ot=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},it=function(e){return e.map(at)},at=function(e){return Re(e,{Prefix:"Prefix"})},st=function(e){return e.map(ut)},ut=function(e){return Re(e,{Key:"Key",LastModified:["LastModified",Ue],ETag:"ETag",ChecksumAlgorithm:["ChecksumAlgorithm",function(e){return je(e,ct)}],Size:["Size",De],StorageClass:"StorageClass",Owner:["Owner",lt]})},ct=function(e){return e.map((function(e){return String(e)}))},lt=function(e){return Re(e,{DisplayName:"DisplayName",ID:"ID"})},dt=(0,v.A)(Ce,(function(e,t){var n=$({"x-amz-request-payer":e.RequestPayer,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r=$({"list-type":"2","continuation-token":e.ContinuationToken,delimiter:e.Delimiter,"encoding-type":e.EncodingType,"fetch-owner":e.FetchOwner,"max-keys":e.MaxKeys,prefix:e.Prefix,"start-after":e.StartAfter}),o=new URL(t.url.toString());return o.search=new URLSearchParams(r).toString(),{method:"GET",headers:n,url:o}}),(function(e){return rt(void 0,void 0,void 0,(function(){var t,n;return ot(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw r.sent();case 2:return[4,x(e)];case 3:return t=r.sent(),n=Re(t,{CommonPrefixes:["CommonPrefixes",function(e){return je(e,it)}],Contents:["Contents",function(e){return je(e,st)}],ContinuationToken:"ContinuationToken",Delimiter:"Delimiter",EncodingType:"EncodingType",IsTruncated:["IsTruncated",Le],KeyCount:["KeyCount",De],MaxKeys:["MaxKeys",De],Name:"Name",NextContinuationToken:"NextContinuationToken",Prefix:"Prefix",StartAfter:"StartAfter"}),[2,nt({$metadata:(0,y.j)(e)},n)]}}))}))}),nt(nt({},U),{responseType:"text"}));!function(e){e.NO_CREDENTIALS="No credentials",e.NO_SRC_KEY='source param should be an object with the property "key" with value of type string',e.NO_DEST_KEY='destination param should be an object with the property "key" with value of type string',e.INVALID_BLOB="Object must be an instance of Blob"}(H||(H={})),function(e){e.CLEANUP_FAILED="Multipart copy clean up failed",e.NO_OBJECT_FOUND="Object does not exist",e.INVALID_QUEUESIZE="Queue size must be a positive number",e.NO_COPYSOURCE="You must specify a copy source",e.MAX_NUM_PARTS_EXCEEDED="Only a maximum of 10000 parts are allowed"}(q||(q={})),function(e){e.UPLOAD_PAUSED_MESSAGE="paused"}(F||(F={}));var pt,ft,ht="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",gt="__uploadInProgress",yt=function(e,t,n,r,o){if(e){var i={attrs:n};r&&(i.metrics=r),f.Y.dispatch("storage",{event:t,data:i,message:o},"Storage",ht)}},vt=function(e){return void 0!==e&&e instanceof Blob},bt=function(e){return void 0!==e&&e instanceof ArrayBuffer},mt=function(){return mt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},mt.apply(this,arguments)},St=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},wt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},_t=new l.C("S3ClientUtils"),Et={accessKeyId:"",secretAccessKey:""},Ct=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},o=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+o+"/",a=(void 0!==r.protected?r.protected:"protected/")+o+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return a;default:return s}},Pt=function(){return St(void 0,void 0,void 0,(function(){var e,t,n;return wt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.J.get()];case 1:return(e=r.sent())?(t=h.J.shear(e),_t.debug("credentials provider get credentials",t),[2,t]):[2,Et];case 2:return n=r.sent(),_t.warn("credentials provider error",n),[2,Et];case 3:return[2]}}))}))},Tt=function(e){if(!e.region)throw new Error("Region is missing.");return mt(mt(mt({},e),{region:e.region,credentials:e.credentials?function(){return Promise.resolve(e.credentials)}:Pt,userAgentValue:(0,b.fE)({category:g.b7.Storage,action:e.storageAction})}),e.dangerouslyConnectToHttpEndpointForTesting?{customEndpoint:"http://localhost:20005",forcePathStyle:!0}:{})},Ot=1048576,Nt=5*Ot,kt=5497558138880,At=function(e){for(var t=Nt,n=Math.ceil(e/t);n>1e4;)t*=2,n=Math.ceil(e/t);return t},It=function(){return It=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},It.apply(this,arguments)},xt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Mt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Rt=(0,v.A)(Ce,(function(e,t){return xt(void 0,void 0,void 0,(function(){var n,r,o,i;return Mt(this,(function(a){switch(a.label){case 0:return r=[{}],[4,X(It(It({},e),{ContentType:null!==(i=e.ContentType)&&void 0!==i?i:"application/octet-stream"}))];case 1:return n=It.apply(void 0,[It.apply(void 0,r.concat([a.sent()])),$({"content-md5":e.ContentMD5})]),(o=new URL(t.url.toString())).pathname=te(o,e.Key),[2,{method:"PUT",headers:n,url:o,body:e.Body}]}}))}))}),(function(e){return xt(void 0,void 0,void 0,(function(){return Mt(this,(function(t){switch(t.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw t.sent();case 2:return[2,It(It({},Re(e.headers,{ETag:"etag",VersionId:"x-amz-version-id"})),{$metadata:(0,y.j)(e)})]}}))}))}),It(It({},U),{responseType:"text"})),Dt=function(){return Dt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Dt.apply(this,arguments)},Lt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ut=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},jt=(0,v.A)(Ce,(function(e,t){return Lt(void 0,void 0,void 0,(function(){var n,r;return Ut(this,(function(o){switch(o.label){case 0:return[4,X(e)];case 1:return n=o.sent(),(r=new URL(t.url.toString())).pathname=te(r,e.Key),r.search="uploads",[2,{method:"POST",headers:n,url:r}]}}))}))}),(function(e){return Lt(void 0,void 0,void 0,(function(){var t,n;return Ut(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw r.sent();case 2:return[4,x(e)];case 3:return t=r.sent(),n=Re(t,{UploadId:"UploadId"}),[2,Dt({$metadata:(0,y.j)(e)},n)]}}))}))}),Dt(Dt({},U),{responseType:"text"})),Kt=function(){return Kt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Kt.apply(this,arguments)},Bt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},zt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Gt=(0,v.A)(Ce,(function(e,t){return Bt(void 0,void 0,void 0,(function(){var n,r,o;return zt(this,(function(i){switch(i.label){case 0:return r=[{}],[4,Z(e)];case 1:return(n=Kt.apply(void 0,[Kt.apply(void 0,r.concat([i.sent()])),$({"content-md5":e.ContentMD5})]))["content-type"]="application/octet-stream",(o=new URL(t.url.toString())).pathname=te(o,e.Key),o.search=new URLSearchParams({partNumber:e.PartNumber+"",uploadId:e.UploadId}).toString(),[2,{method:"PUT",headers:n,url:o,body:e.Body}]}}))}))}),(function(e){return Bt(void 0,void 0,void 0,(function(){return zt(this,(function(t){switch(t.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw t.sent();case 2:return[2,Kt(Kt({},Re(e.headers,{ETag:"etag"})),{$metadata:(0,y.j)(e)})]}}))}))}),Kt(Kt({},U),{responseType:"text"})),Ht=function(){return Ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ht.apply(this,arguments)},qt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Ft=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Wt="Invalid parameter for ComplteMultipartUpload API",Vt=function(e){var t;if(!(null===(t=e.Parts)||void 0===t?void 0:t.length))throw new Error("".concat(Wt,": ").concat(e));return'<CompleteMultipartUpload xmlns="http://s3.amazonaws.com/doc/2006-03-01/">'.concat(e.Parts.map(Yt).join(""),"</CompleteMultipartUpload>")},Yt=function(e){if(!e.ETag||null==e.PartNumber)throw new Error("".concat(Wt,": ").concat(e));return"<Part><ETag>".concat(e.ETag,"</ETag><PartNumber>").concat(e.PartNumber,"</PartNumber></Part>")},Jt=function(e){return qt(void 0,void 0,void 0,(function(){var t,n;return Ft(this,(function(r){switch(r.label){case 0:return[4,x(e)];case 1:return void 0===(t=r.sent()).Code||void 0===t.Message?[3,3]:[4,I(Ht(Ht({},e),{statusCode:500}))];case 2:throw(n=r.sent()).$metadata.httpStatusCode=e.statusCode,n;case 3:return[2,t]}}))}))},Qt=(0,v.A)(Ce,(function(e,t){return qt(void 0,void 0,void 0,(function(){var n,r;return Ft(this,(function(o){switch(o.label){case 0:return[4,Z(e)];case 1:return(n=o.sent())["content-type"]="application/xml",(r=new URL(t.url.toString())).pathname=te(r,e.Key),r.search=new URLSearchParams({uploadId:e.UploadId}).toString(),[2,{method:"POST",headers:n,url:r,body:'<?xml version="1.0" encoding="UTF-8"?>'+Vt(e.MultipartUpload)}]}}))}))}),(function(e){return qt(void 0,void 0,void 0,(function(){var t,n;return Ft(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw r.sent();case 2:return[4,Jt(e)];case 3:return t=r.sent(),n=Re(t,{ETag:"ETag",Key:"Key",Location:"Location"}),[2,Ht({$metadata:(0,y.j)(e)},n)]}}))}))}),Ht(Ht({},U),{responseType:"text",retryDecider:function(e,t){return qt(void 0,void 0,void 0,(function(){var n;return Ft(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode?[3,2]:e.body?[4,x(e)]:[2,!0];case 1:return void 0!==(n=r.sent()).Code&&void 0!==n.Message?[2,!0]:[2,!1];case 2:return[2,(0,U.retryDecider)(e,t)]}}))}))}})),$t=function(){return $t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},$t.apply(this,arguments)},Zt=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},Xt=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},en=(0,v.A)(Ce,(function(e,t){var n=new URL(t.url.toString());return n.pathname=te(n,e.Key),n.search=new URLSearchParams({uploadId:e.UploadId}).toString(),{method:"DELETE",headers:{},url:n}}),(function(e){return Zt(void 0,void 0,void 0,(function(){return Xt(this,(function(t){switch(t.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw t.sent();case 2:return[2,{$metadata:(0,y.j)(e)}]}}))}))}),$t($t({},U),{responseType:"text"})),tn=function(){return tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},tn.apply(this,arguments)},nn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},rn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},on=function(e){return e.map((function(e){return Re(e,{PartNumber:["PartNumber",De],ETag:"ETag",Size:["Size",De]})}))},an=(0,v.A)(Ce,(function(e,t){return nn(void 0,void 0,void 0,(function(){var n,r;return rn(this,(function(o){switch(o.label){case 0:return[4,Z(e)];case 1:return n=o.sent(),(r=new URL(t.url.toString())).pathname=te(r,e.Key),r.search=new URLSearchParams({uploadId:e.UploadId}).toString(),[2,{method:"GET",headers:n,url:r}]}}))}))}),(function(e){return nn(void 0,void 0,void 0,(function(){var t,n;return rn(this,(function(r){switch(r.label){case 0:return e.statusCode>=300?[4,I(e)]:[3,2];case 1:throw r.sent();case 2:return[4,x(e)];case 3:return t=r.sent(),n=Re(t,{UploadId:"UploadId",Parts:["Part",function(e){return je(e,on)}]}),[2,tn({$metadata:(0,y.j)(e)},n)]}}))}))}),tn(tn({},U),{responseType:"text"})),sn=n(37007),un=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},cn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},ln=function(e){return un(void 0,void 0,void 0,(function(){var t,n;return cn(this,(function(r){switch(r.label){case 0:return t=new j.V,"string"!=typeof e?[3,1]:(t.update(e),[3,3]);case 1:return[4,dn(e)];case 2:n=r.sent(),t.update(n),r.label=3;case 3:return[4,t.digest()];case 4:return[2,G(r.sent())]}}))}))},dn=function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){r.result&&t(r.result),r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)}},void 0!==e&&r.readAsArrayBuffer(e)}))},pn=function(){return pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pn.apply(this,arguments)},fn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},hn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},gn=new l.C("AWSS3ProviderManagedUpload"),yn=function(){function e(e,t,n){this.opts=null,this.completedParts=[],this.partSize=Nt,this.bytesUploaded=0,this.totalBytesToUpload=0,this.emitter=null,this.params=e,this.opts=pn({isObjectLockEnabled:!1},t),this.emitter=n,this.s3Config=Tt(pn(pn({},t),{emitter:n,storageAction:g.sZ.Put}))}return e.prototype.upload=function(){return fn(this,void 0,void 0,(function(){var e,t,n,r,o,i,a,s,u,c,l=this;return hn(this,(function(d){switch(d.label){case 0:return d.trys.push([0,12,,14]),!0!==this.opts.isObjectLockEnabled?[3,2]:(e=this.params,[4,ln(this.params.Body)]);case 1:e.ContentMD5=d.sent(),d.label=2;case 2:return this.body=this.validateAndSanitizeBody(this.params.Body),this.totalBytesToUpload=this.byteLength(this.body),this.totalBytesToUpload<=Nt?(this.params.Body=this.body,t=Rt,n=[this.s3Config],r=[pn({},this.params)],c={},[4,this.getObjectKeyWithPrefix(this.params.Key)]):[3,4];case 3:return[2,t.apply(void 0,n.concat([pn.apply(void 0,r.concat([(c.Key=d.sent(),c)]))]))];case 4:return this.partSize=At(this.totalBytesToUpload),o=this,[4,this.createMultiPartUpload()];case 5:o.uploadId=d.sent(),i=Math.ceil(this.totalBytesToUpload/this.partSize),a=this.createParts(),s=0,d.label=6;case 6:return s<i?[4,this.uploadParts(this.uploadId,a.slice(s,s+4))]:[3,9];case 7:d.sent(),d.label=8;case 8:return s+=4,[3,6];case 9:return a.map((function(e){l.removeEventListener(e)})),[4,this.finishMultiPartUpload(this.uploadId)];case 10:return[2,d.sent()];case 11:return[3,14];case 12:return u=d.sent(),[4,this.cleanup(this.uploadId)];case 13:throw d.sent(),gn.error("Error. Cancelling the multipart upload."),u;case 14:return[2]}}))}))},e.prototype.createParts=function(){try{for(var e=[],t=0;t<this.totalBytesToUpload;){var n=Math.min(t+this.partSize,this.totalBytesToUpload);e.push({bodyPart:this.body.slice(t,n),partNumber:e.length+1,emitter:new sn.EventEmitter,_lastUploadedBytes:0}),t+=this.partSize}return e}catch(e){throw gn.error(e),e}},e.prototype.createMultiPartUpload=function(){return fn(this,void 0,void 0,(function(){var e,t,n,r,o,i;return hn(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),t=jt,n=[this.s3Config],r=[pn({},this.params)],i={},[4,this.getObjectKeyWithPrefix(this.params.Key)];case 1:return[4,t.apply(void 0,n.concat([pn.apply(void 0,r.concat([(i.Key=a.sent(),i)]))]))];case 2:return e=a.sent(),gn.debug(e.UploadId),[2,e.UploadId];case 3:throw o=a.sent(),gn.error(o),o;case 4:return[2]}}))}))},e.prototype.uploadParts=function(e,t){return fn(this,void 0,void 0,(function(){var n,r,o,i=this;return hn(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Promise.all(t.map((function(t){return fn(i,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,d;return hn(this,(function(p){switch(p.label){case 0:return this.setupEventListener(t),this.opts.isObjectLockEnabled?(n=this.params,[4,ln(t.bodyPart)]):[3,2];case 1:n.ContentMD5=p.sent(),p.label=2;case 2:return r=this.params,r.Key,o=r.Bucket,i=r.SSECustomerAlgorithm,a=r.SSECustomerKey,s=r.SSECustomerKeyMD5,u=r.ContentMD5,c=Gt,l=[pn(pn({},this.s3Config),{emitter:t.emitter})],d={PartNumber:t.partNumber,Body:t.bodyPart,UploadId:e},[4,this.getObjectKeyWithPrefix(this.params.Key)];case 3:return[4,c.apply(void 0,l.concat([(d.Key=p.sent(),d.Bucket=o,d.SSECustomerAlgorithm=i,d.SSECustomerKey=a,d.SSECustomerKeyMD5=s,d.ContentMD5=u,d)]))];case 4:return[2,p.sent()]}}))}))})))];case 1:for(n=a.sent(),r=0;r<n.length;r++)this.completedParts.push({PartNumber:t[r].partNumber,ETag:n[r].ETag});return[3,3];case 2:throw o=a.sent(),gn.error("Error happened while uploading a part. Cancelling the multipart upload"),o;case 3:return[2]}}))}))},e.prototype.finishMultiPartUpload=function(e){return fn(this,void 0,void 0,(function(){var t,n,r;return hn(this,(function(o){switch(o.label){case 0:return r={Bucket:this.params.Bucket},[4,this.getObjectKeyWithPrefix(this.params.Key)];case 1:r.Key=o.sent(),r.UploadId=e,r.MultipartUpload={Parts:this.completedParts},t=r,o.label=2;case 2:return o.trys.push([2,4,,5]),[4,Qt(pn(pn({},this.s3Config),{emitter:void 0}),t)];case 3:return[2,o.sent().Key];case 4:throw n=o.sent(),gn.error("Error happened while finishing the upload."),n;case 5:return[2]}}))}))},e.prototype.cleanup=function(e){return fn(this,void 0,void 0,(function(){var t,n,r;return hn(this,(function(o){switch(o.label){case 0:return this.body=null,this.completedParts=[],this.bytesUploaded=0,this.totalBytesToUpload=0,e?(r={Bucket:this.params.Bucket},[4,this.getObjectKeyWithPrefix(this.params.Key)]):[2];case 1:return r.Key=o.sent(),r.UploadId=e,t=r,[4,en(this.s3Config,t)];case 2:return o.sent(),[4,an(this.s3Config,t)];case 3:if((n=o.sent())&&n.Parts&&n.Parts.length>0)throw new Error("Multipart upload clean up failed.");return[2]}}))}))},e.prototype.removeEventListener=function(e){e.emitter.removeAllListeners(se),e.emitter.removeAllListeners(ue)},e.prototype.setupEventListener=function(e){var t=this;e.emitter.on(se,(function(n){t.progressChanged(e.partNumber,n.loaded-e._lastUploadedBytes),e._lastUploadedBytes=n.loaded}))},e.prototype.progressChanged=function(e,t){this.bytesUploaded+=t,this.emitter.emit(se,{loaded:this.bytesUploaded,total:this.totalBytesToUpload,part:e,key:this.params.Key})},e.prototype.byteLength=function(e){if(null==e)return 0;if("number"==typeof e.byteLength)return e.byteLength;if("number"==typeof e.length)return e.length;if("number"==typeof e.size)return e.size;if("string"!=typeof e.path)throw new Error("Cannot determine length of "+e)},e.prototype.validateAndSanitizeBody=function(e){var t=this.isGenericObject(e)?JSON.stringify(e):e;if(this.byteLength(t)>kt)throw new Error("File size bigger than S3 Object limit of 5TB, got ".concat(this.totalBytesToUpload," Bytes"));return t},e.prototype.isGenericObject=function(e){if(null!==e&&"object"==typeof e)try{return!(this.byteLength(e)>=0)}catch(e){return!0}return!1},e.prototype.getObjectKeyWithPrefix=function(e){return fn(this,void 0,void 0,(function(){var t,n,r;return hn(this,(function(o){switch(o.label){case 0:return t=Ct,n=[pn({},this.opts)],r={},[4,Pt()];case 1:return[4,t.apply(void 0,[pn.apply(void 0,n.concat([(r.credentials=o.sent(),r)]))])];case 2:return[2,o.sent()+e]}}))}))},e}(),vn=function(){return vn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},vn.apply(this,arguments)},bn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Sn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},wn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},_n=new l.C("AWSS3UploadTask");function En(e,t){return e.PartNumber-t.PartNumber}!function(e){e[e.INIT=0]="INIT",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.PAUSED=2]="PAUSED",e[e.CANCELLED=3]="CANCELLED",e[e.COMPLETED=4]="COMPLETED"}(pt||(pt={})),function(e){e.CANCEL="cancel",e.UPLOAD_COMPLETE="uploadComplete",e.UPLOAD_PROGRESS="uploadPartProgress",e.ERROR="error"}(ft||(ft={}));var Cn=function(){function e(e){var t=e.s3Config,n=e.file,r=e.emitter,o=e.storage,i=e.params,a=e.level,s=e.prefixPromise;this.queueSize=4,this.partSize=Nt,this.inProgress=[],this.completedParts=[],this.queued=[],this.bytesUploaded=0,this.totalBytes=0,this.state=pt.INIT,this.prefixPromise=s,this.s3Config=t,this.storage=o,this.storageSync=Promise.resolve(),"function"==typeof this.storage.sync&&(this.storageSync=this.storage.sync()),this.params=i,this.file=n,this.totalBytes=this.file.size,this.bytesUploaded=0,this.emitter=r,this.queued=[],this.fileId=this._getFileId(a),this._validateParams(),this.emitter.on(ft.ERROR,(function(){}))}return Object.defineProperty(e.prototype,"percent",{get:function(){return this.bytesUploaded/this.totalBytes*100},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInProgress",{get:function(){return this.state===pt.IN_PROGRESS},enumerable:!1,configurable:!0}),e.prototype._listSingleFile=function(e){var t=e.key,n=e.bucket;return bn(this,void 0,void 0,(function(){var e,r;return mn(this,(function(o){switch(o.label){case 0:return[4,this.prefixPromise];case 1:return e=o.sent(),[4,dt(this.s3Config,{Bucket:n,Prefix:e+t})];case 2:return r=o.sent().Contents,[2,(void 0===r?[]:r).find((function(n){return n.Key==="".concat(e).concat(t)}))]}}))}))},e.prototype._getFileId=function(e){return void 0!==(t=this.file)&&t instanceof File?[this.file.name,this.file.lastModified,this.file.size,this.file.type,this.params.Bucket,e,this.params.Key].join("-"):[this.file.size,this.file.type,this.params.Bucket,e,this.params.Key].join("-");var t},e.prototype._findCachedUploadParts=function(){return bn(this,void 0,void 0,(function(){var e,t,n,r,o,i;return mn(this,(function(a){switch(a.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return e=a.sent(),0!==Object.keys(e).length&&Object.prototype.hasOwnProperty.call(e,this.fileId)?((t=e[this.fileId]).lastTouched=Date.now(),this.storage.setItem(gt,JSON.stringify(e)),r=an,o=[this.s3Config],i={Bucket:this.params.Bucket},[4,this.prefixPromise]):[2,{parts:[],uploadId:null}];case 2:return[4,r.apply(void 0,o.concat([(i.Key=a.sent()+this.params.Key,i.UploadId=t.uploadId,i)]))];case 3:return n=a.sent().Parts,[2,{parts:void 0===n?[]:n,uploadId:t.uploadId}]}}))}))},e.prototype._emitEvent=function(e,t){this.emitter.emit(e,t)},e.prototype._validateParams=function(){if(this.totalBytes>kt)throw new Error("File size bigger than S3 Object limit of 5TB, got ".concat(this.totalBytes," Bytes"))},e.prototype._listCachedUploadTasks=function(){return bn(this,void 0,void 0,(function(){var e;return mn(this,(function(t){switch(t.label){case 0:return[4,this.storageSync];case 1:return t.sent(),e=this.storage.getItem(gt)||"{}",[2,JSON.parse(e)]}}))}))},e.prototype._cache=function(e){return bn(this,void 0,void 0,(function(){var t;return mn(this,(function(n){switch(n.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return(t=n.sent())[this.fileId]=e,this.storage.setItem(gt,JSON.stringify(t)),[2]}}))}))},e.prototype._isCached=function(){return bn(this,void 0,void 0,(function(){var e,t;return mn(this,(function(n){switch(n.label){case 0:return t=(e=Object.prototype.hasOwnProperty).call,[4,this._listCachedUploadTasks()];case 1:return[2,t.apply(e,[n.sent(),this.fileId])]}}))}))},e.prototype._removeFromCache=function(){return bn(this,void 0,void 0,(function(){var e;return mn(this,(function(t){switch(t.label){case 0:return[4,this._listCachedUploadTasks()];case 1:return delete(e=t.sent())[this.fileId],this.storage.setItem(gt,JSON.stringify(e)),[2]}}))}))},e.prototype._onPartUploadCompletion=function(e){var t=e.eTag,n=e.partNumber,r=e.chunk;return bn(this,void 0,void 0,(function(){return mn(this,(function(e){return this.completedParts.push({ETag:t,PartNumber:n}),this.bytesUploaded+=function(e){if("string"==typeof e)return e.length;if(bt(e))return e.byteLength;if(vt(e))return e.size;throw new Error("Cannot determine byte length of "+e)}(r),this._emitEvent(ft.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes}),this.inProgress=this.inProgress.filter((function(e){return e.uploadPartInput.PartNumber!==n})),this.queued.length&&this.state!==pt.PAUSED&&this._startNextPart(),this._isDone()&&this._completeUpload(),[2]}))}))},e.prototype._completeUpload=function(){return bn(this,void 0,void 0,(function(){var e,t,n,r;return mn(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),e=Qt,t=[this.s3Config],r={Bucket:this.params.Bucket},[4,this.prefixPromise];case 1:return[4,e.apply(void 0,t.concat([(r.Key=o.sent()+this.params.Key,r.UploadId=this.uploadId,r.MultipartUpload={Parts:wn([],Sn(this.completedParts),!1).sort(En)},r)]))];case 2:return o.sent(),[4,this._verifyFileSize()];case 3:return o.sent(),this._emitEvent(ft.UPLOAD_COMPLETE,{key:this.params.Key}),this._removeFromCache(),this.state=pt.COMPLETED,[3,5];case 4:return n=o.sent(),_n.error("error completing upload",n),this._emitEvent(ft.ERROR,n),[3,5];case 5:return[2]}}))}))},e.prototype._makeUploadPartRequest=function(e,t){return bn(this,void 0,void 0,(function(){var n,r,o,i,a,s;return mn(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),r=Gt,o=[vn(vn({},this.s3Config),{abortSignal:t})],i=[vn({},e)],s={},[4,this.prefixPromise];case 1:return[4,r.apply(void 0,o.concat([vn.apply(void 0,i.concat([(s.Key=u.sent()+this.params.Key,s)]))]))];case 2:return n=u.sent(),[4,this._onPartUploadCompletion({eTag:n.ETag,partNumber:e.PartNumber,chunk:e.Body})];case 3:return u.sent(),[3,5];case 4:return a=u.sent(),this.state===pt.PAUSED?_n.log("upload paused"):this.state===pt.CANCELLED?_n.log("upload aborted"):_n.error("error starting next part of upload: ",a),Se(a)||a.message===de||(this._emitEvent(ft.ERROR,a),this.pause()),[3,5];case 5:return[2]}}))}))},e.prototype._startNextPart=function(){if(this.queued.length>0&&this.state!==pt.PAUSED){var e=new AbortController,t=this.queued.shift();this.inProgress.push({uploadPartInput:t,s3Request:this._makeUploadPartRequest(t,e.signal),abortController:e})}},e.prototype._verifyFileSize=function(){return bn(this,void 0,void 0,(function(){var e,t,n;return mn(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this._listSingleFile({key:this.params.Key,bucket:this.params.Bucket})];case 1:return t=r.sent(),e=Boolean(t&&t.Size===this.file.size),[3,3];case 2:return n=r.sent(),_n.log("Could not get file on s3 for size matching: ",n),[2];case 3:if(!e)throw new Error("File size does not match between local file and file on s3");return[2]}}))}))},e.prototype._isDone=function(){return!this.queued.length&&!this.inProgress.length&&this.bytesUploaded===this.totalBytes},e.prototype._createParts=function(){for(var e=this.file.size,t=[],n=0;n<e;){var r=Math.min(n+this.partSize,e);t.push({Body:this.file.slice(n,r),Key:this.params.Key,Bucket:this.params.Bucket,PartNumber:t.length+1,UploadId:this.uploadId}),n+=this.partSize}return t},e.prototype._initCachedUploadParts=function(e){this.bytesUploaded+=e.reduce((function(e,t){return e+t.Size}),0);var t=new Set(e.map((function(e){return e.PartNumber})));this.queued=this.queued.filter((function(e){return!t.has(e.PartNumber)})),this.completedParts=e.map((function(e){return{PartNumber:e.PartNumber,ETag:e.ETag}})),this._emitEvent(ft.UPLOAD_PROGRESS,{loaded:this.bytesUploaded,total:this.totalBytes})},e.prototype._initMultipartUpload=function(){return bn(this,void 0,void 0,(function(){var e,t,n,r,o;return mn(this,(function(i){switch(i.label){case 0:return t=jt,n=[this.s3Config],r=[vn({},this.params)],o={},[4,this.prefixPromise];case 1:return[4,t.apply(void 0,n.concat([vn.apply(void 0,r.concat([(o.Key=i.sent()+this.params.Key,o)]))]))];case 2:return e=i.sent(),this._cache({uploadId:e.UploadId,lastTouched:Date.now(),bucket:this.params.Bucket,key:this.params.Key,fileName:this.file instanceof File?this.file.name:""}),[2,e.UploadId]}}))}))},e.prototype._initializeUploadTask=function(){return bn(this,void 0,void 0,(function(){var e,t,n,r;return mn(this,(function(o){switch(o.label){case 0:this.state=pt.IN_PROGRESS,this.partSize=At(this.totalBytes),o.label=1;case 1:return o.trys.push([1,7,,8]),[4,this._isCached()];case 2:return o.sent()?[4,this._findCachedUploadParts()]:[3,4];case 3:return e=o.sent(),t=e.parts,n=e.uploadId,this.uploadId=n,this.queued=this._createParts(),this._initCachedUploadParts(t),this._isDone()?this._completeUpload():this._startUpload(),[3,6];case 4:return this.uploadId?[3,6]:[4,this._initMultipartUpload()];case 5:n=o.sent(),this.uploadId=n,this.queued=this._createParts(),this._startUpload(),o.label=6;case 6:return[3,8];case 7:return r=o.sent(),Se(r)||(_n.error("Error initializing the upload task",r),this._emitEvent(ft.ERROR,r)),[3,8];case 8:return[2]}}))}))},e.prototype.resume=function(){this.state===pt.CANCELLED?_n.warn("This task has already been cancelled"):this.state===pt.COMPLETED?_n.warn("This task has already been completed"):this.state===pt.IN_PROGRESS?_n.warn("Upload task already in progress"):this.uploadId?this._startUpload():this._initializeUploadTask()},e.prototype._startUpload=function(){this.state=pt.IN_PROGRESS;for(var e=0;e<this.queueSize;e++)this._startNextPart()},e.prototype._cancel=function(){return bn(this,void 0,void 0,(function(){var e,t,n,r;return mn(this,(function(o){switch(o.label){case 0:return this.state!==pt.CANCELLED?[3,1]:(_n.warn("This task has already been cancelled"),[2,!1]);case 1:return this.state!==pt.COMPLETED?[3,2]:(_n.warn("This task has already been completed"),[2,!1]);case 2:this.pause(),this.queued=[],this.completedParts=[],this.bytesUploaded=0,this.state=pt.CANCELLED,o.label=3;case 3:return o.trys.push([3,7,,8]),e=en,t=[this.s3Config],r={Bucket:this.params.Bucket},[4,this.prefixPromise];case 4:return[4,e.apply(void 0,t.concat([(r.Key=o.sent()+this.params.Key,r.UploadId=this.uploadId,r)]))];case 5:return o.sent(),[4,this._removeFromCache()];case 6:return o.sent(),[2,!0];case 7:return n=o.sent(),_n.error("Error cancelling upload task",n),[2,!1];case 8:return[2]}}))}))},e.prototype.pause=function(){var e;this.state===pt.CANCELLED?_n.warn("This task has already been cancelled"):this.state===pt.COMPLETED?_n.warn("This task has already been completed"):this.state===pt.PAUSED&&_n.warn("This task is already paused"),this.state=pt.PAUSED;var t=this.inProgress.splice(0,this.inProgress.length);t.forEach((function(e){e.abortController.abort()})),(e=this.queued).unshift.apply(e,wn([],Sn(t.map((function(e){return e.uploadPartInput}))),!1))},e}(),Pn=function(){return Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Pn.apply(this,arguments)},Tn=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{u(r.next(e))}catch(e){i(e)}}function s(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},On=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}},Nn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},kn=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},An=new l.C("AWSS3Provider"),In="public",xn=function(){function e(e){var t=this;this._config=e||{},this._storage=(new p.i).getStorage(),f.Y.listen("auth",(function(e){var n=e.payload;"signOut"!==n.event&&"signIn"!==n.event||t._storage.removeItem(gt)})),An.debug("Storage Options",this._config)}return e.prototype.getCategory=function(){return e.CATEGORY},e.prototype.getProviderName=function(){return e.PROVIDER_NAME},e.prototype.configure=function(e){if(An.debug("configure Storage",e),!e)return this._config;var t=(0,d.s)(e);return this._config=Object.assign({},this._config,t.Storage),this._config.bucket||An.debug("Do not have bucket yet"),this._config},e.prototype.startResumableUpload=function(e,t){var n,r=e.s3Config,o=e.emitter,i=e.key,a=e.file,s=e.params,u=t.progressCallback,c=t.completeCallback,l=t.errorCallback,d=void 0!==(n=t.track)&&n;if(!(a instanceof Blob))throw new Error(H.INVALID_BLOB);o.on(ft.UPLOAD_PROGRESS,(function(e){u&&("function"==typeof u?u(e):An.warn("progressCallback should be a function, not a "+typeof u))})),o.on(ft.UPLOAD_COMPLETE,(function(e){c&&("function"==typeof c?c(e):An.warn("completeCallback should be a function, not a "+typeof c))})),o.on(ft.ERROR,(function(e){l&&("function"==typeof l?l(e):An.warn("errorCallback should be a function, not a "+typeof l))}));var p=h.J.get().then((function(n){var r=h.J.shear(n);return Ct(Pn(Pn({},t),{level:e.accessLevel,credentials:r}))})),f=new Cn({s3Config:r,file:a,emitter:o,level:e.accessLevel,storage:this._storage,params:s,prefixPromise:p});return yt(d,"upload",{method:"put",result:"success"},null,"Upload Task created successfully for ".concat(i)),f.resume(),f},e.prototype.copy=function(e,t,n){return Tn(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,d,p,f,h,y,v,b,m,S,w,_,E,C,P,T,O;return On(this,(function(N){switch(N.label){case 0:return[4,this._ensureCredentials()];case 1:if(!N.sent()||!this._isWithCredentials(this._config))throw new Error(H.NO_CREDENTIALS);if(r=Object.assign({},this._config,n),o=r.acl,i=r.bucket,a=r.cacheControl,s=r.expires,u=r.track,c=r.serverSideEncryption,l=r.SSECustomerAlgorithm,d=r.SSECustomerKey,p=r.SSECustomerKeyMD5,f=r.SSEKMSKeyId,T=e.level,h=void 0===T?In:T,y=e.identityId,v=e.key,O=t.level,b=void 0===O?In:O,m=t.key,!v||"string"!=typeof v)throw new Error(H.NO_SRC_KEY);if(!m||"string"!=typeof m)throw new Error(H.NO_DEST_KEY);"protected"!==h&&y&&An.warn('You may copy files from another user if the source level is "protected", currently it\'s '.concat(h)),S=this._prefix(Pn(Pn(Pn({},r),{level:h}),y&&{identityId:y})),w=this._prefix(Pn(Pn({},r),{level:b})),_="".concat(i,"/").concat(S).concat(v),E="".concat(w).concat(m),An.debug("copying ".concat(_," to ").concat(E)),C={Bucket:i,CopySource:_,Key:E,MetadataDirective:"COPY"},a&&(C.CacheControl=a),s&&(C.Expires=s),c&&(C.ServerSideEncryption=c),l&&(C.SSECustomerAlgorithm=l),d&&(C.SSECustomerKey=d),p&&(C.SSECustomerKeyMD5=p),f&&(C.SSEKMSKeyId=f),o&&(C.ACL=o),N.label=2;case 2:return N.trys.push([2,4,,5]),[4,Ne(Tt(Pn(Pn({},r),{storageAction:g.sZ.Copy})),C)];case 3:return N.sent(),yt(u,"copy",{method:"copy",result:"success"},null,"Copy success from ".concat(v," to ").concat(m)),[2,{key:m}];case 4:throw P=N.sent(),yt(u,"copy",{method:"copy",result:"failed"},null,"Copy failed from ".concat(v," to ").concat(m)),P;case 5:return[2]}}))}))},e.prototype.get=function(e,t){var n;return Tn(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,d,p,f,h,y,v,b,m,S,w,_,E,C,P,T,O,N,k,A,I,x;return On(this,(function(M){switch(M.label){case 0:return[4,this._ensureCredentials()];case 1:if(!M.sent()||!this._isWithCredentials(this._config))throw new Error(H.NO_CREDENTIALS);if(r=Object.assign({},this._config,t),o=r.bucket,i=r.download,a=r.cacheControl,s=r.contentDisposition,u=r.contentEncoding,c=r.contentLanguage,l=r.contentType,d=r.expires,p=r.track,f=r.SSECustomerAlgorithm,h=r.SSECustomerKey,y=r.SSECustomerKeyMD5,v=r.progressCallback,I=r.validateObjectExistence,b=void 0!==I&&I,m=this._prefix(r),S=m+e,w=new sn.EventEmitter,_=Tt(Pn(Pn({},r),{emitter:w,storageAction:g.sZ.Get})),An.debug("get "+e+" from "+S),E={Bucket:o,Key:S},a&&(E.ResponseCacheControl=a),s&&(E.ResponseContentDisposition=s),u&&(E.ResponseContentEncoding=u),c&&(E.ResponseContentLanguage=c),l&&(E.ResponseContentType=l),f&&(E.SSECustomerAlgorithm=f),h&&(E.SSECustomerKey=h),y&&(E.SSECustomerKeyMD5=y),!0!==i)return[3,5];M.label=2;case 2:return M.trys.push([2,4,,5]),v&&("function"==typeof v?w.on(ue,(function(e){v(e)})):An.warn("progressCallback should be a function, not a "+typeof v)),[4,We(_,E)];case 3:return C=M.sent(),w.removeAllListeners(ue),yt(p,"download",{method:"get",result:"success"},{fileSize:Number(C.Body.size||C.Body.length)},"Download success for ".concat(e)),[2,C];case 4:throw P=M.sent(),yt(p,"download",{method:"get",result:"failed"},null,"Download failed with ".concat(P.message)),P;case 5:if(!b)return[3,9];M.label=6;case 6:return M.trys.push([6,8,,9]),[4,$e(_,E)];case 7:return M.sent(),[3,9];case 8:throw T=M.sent(),404===(null===(n=T.$metadata)||void 0===n?void 0:n.httpStatusCode)&&yt(p,"getSignedUrl",{method:"get",result:"failed"},null,"".concat(e," not found")),T;case 9:return M.trys.push([9,12,,13]),N=Ve,k=[Pn({},_)],x={expiration:d||900},[4,_.credentials()];case 10:return[4,N.apply(void 0,[Pn.apply(void 0,k.concat([(x.credentials=M.sent(),x.signingRegion=_.region,x.signingService="s3",x)])),E])];case 11:return O=M.sent(),yt(p,"getSignedUrl",{method:"get",result:"success"},null,"Signed URL: ".concat(O)),[2,O];case 12:throw A=M.sent(),An.warn("get signed url error",A),yt(p,"getSignedUrl",{method:"get",result:"failed"},null,"Could not get a signed URL for ".concat(e)),A;case 13:return[2]}}))}))},e.prototype.getProperties=function(e,t){var n;return Tn(this,void 0,void 0,(function(){var r,o,i,a,s,u,c,l,d,p,f,h,y,v;return On(this,(function(b){switch(b.label){case 0:return[4,this._ensureCredentials()];case 1:if(!b.sent()||!this._isWithCredentials(this._config))throw new Error(H.NO_CREDENTIALS);r=Object.assign({},this._config,t),o=r.bucket,v=r.track,i=void 0!==v&&v,a=r.SSECustomerAlgorithm,s=r.SSECustomerKey,u=r.SSECustomerKeyMD5,c=this._prefix(r),l=c+e,An.debug("getProperties ".concat(e," from ").concat(l)),d=Tt(Pn(Pn({},r),{storageAction:g.sZ.GetProperties})),p={Bucket:o,Key:l},a&&(p.SSECustomerAlgorithm=a),s&&(p.SSECustomerKey=s),u&&(p.SSECustomerKeyMD5=u),b.label=2;case 2:return b.trys.push([2,4,,5]),[4,$e(d,p)];case 3:return f=b.sent(),h={contentLength:f.ContentLength,contentType:f.ContentType,eTag:f.ETag,lastModified:f.LastModified,metadata:f.Metadata},yt(i,"getProperties",{method:"getProperties",result:"success"},null,"getProperties successful for ".concat(e)),[2,h];case 4:throw y=b.sent(),404===(null===(n=y.$metadata)||void 0===n?void 0:n.httpStatusCode)&&yt(i,"getProperties",{method:"getProperties",result:"failed"},null,"".concat(e," not found")),y;case 5:return[2]}}))}))},e.prototype.put=function(e,t,n){var r=Object.assign({},this._config,n),o=r.bucket,i=r.track,a=r.progressCallback,s=r.level,u=r.resumable,c=r.contentType,l=r.contentDisposition,d=r.contentEncoding,p=r.cacheControl,f=r.expires,h=r.metadata,y=r.tagging,v=r.acl,b=r.serverSideEncryption,m=r.SSECustomerAlgorithm,S=r.SSECustomerKey,w=r.SSECustomerKeyMD5,_=r.SSEKMSKeyId,E={Bucket:o,Key:e,Body:t,ContentType:c||"binary/octet-stream"};p&&(E.CacheControl=p),l&&(E.ContentDisposition=l),d&&(E.ContentEncoding=d),f&&(E.Expires=f),h&&(E.Metadata=h),y&&(E.Tagging=y),b&&(E.ServerSideEncryption=b),m&&(E.SSECustomerAlgorithm=m),S&&(E.SSECustomerKey=S),w&&(E.SSECustomerKeyMD5=w),_&&(E.SSEKMSKeyId=_);var C=new sn.EventEmitter,P=new yn(E,r,C);if(v&&(E.ACL=v),!0===u){var T=Tt(Pn(Pn({},r),{storageAction:g.sZ.Put})),O={bucket:o,key:e,s3Config:T,file:t,emitter:C,accessLevel:s,params:E};return this.startResumableUpload(O,n)}try{return a&&("function"==typeof a?C.on(se,(function(e){a(e)})):An.warn("progressCallback should be a function, not a "+typeof a)),P.upload().then((function(t){return An.debug("upload result",t),yt(i,"upload",{method:"put",result:"success"},null,"Upload success for ".concat(e)),{key:e}}))}catch(t){throw An.warn("error uploading",t),yt(i,"upload",{method:"put",result:"failed"},null,"Error uploading ".concat(e)),t}},e.prototype.remove=function(e,t){return Tn(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l;return On(this,(function(d){switch(d.label){case 0:return[4,this._ensureCredentials()];case 1:if(!d.sent()||!this._isWithCredentials(this._config))throw new Error(H.NO_CREDENTIALS);n=Object.assign({},this._config,t),r=n.bucket,o=n.track,i=this._prefix(n),a=i+e,An.debug("remove "+e+" from "+a),s={Bucket:r,Key:a},u=Tt(Pn(Pn({},n),{storageAction:g.sZ.Remove})),d.label=2;case 2:return d.trys.push([2,4,,5]),[4,tt(u,s)];case 3:return c=d.sent(),yt(o,"delete",{method:"remove",result:"success"},null,"Deleted ".concat(e," successfully")),[2,c];case 4:throw l=d.sent(),yt(o,"delete",{method:"remove",result:"failed"},null,"Deletion of ".concat(e," failed with ").concat(l)),l;case 5:return[2]}}))}))},e.prototype._list=function(e,t,n){return Tn(this,void 0,void 0,(function(){var r,o;return On(this,(function(i){switch(i.label){case 0:return r={results:[],hasNextToken:!1},[4,dt(Tt(Pn(Pn({},t),{storageAction:g.sZ.List})),Pn({},e))];case 1:return(o=i.sent())&&o.Contents&&(r.results=o.Contents.map((function(e){return{key:e.Key.substr(n.length),eTag:e.ETag,lastModified:e.LastModified,size:e.Size}})),r.nextToken=o.NextContinuationToken,r.hasNextToken=o.IsTruncated),[2,r]}}))}))},e.prototype.list=function(e,t){return Tn(this,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,d,p,f,h,g;return On(this,(function(y){switch(y.label){case 0:return[4,this._ensureCredentials()];case 1:if(!y.sent()||!this._isWithCredentials(this._config))throw new Error(H.NO_CREDENTIALS);n=Object.assign({},this._config,t),r=n.bucket,o=n.track,i=n.pageSize,a=n.nextToken,s=this._prefix(n),u=s+e,An.debug("list "+e+" from "+u),y.label=2;case 2:if(y.trys.push([2,10,,11]),c={results:[],hasNextToken:!1},d=void 0,(p={Bucket:r,Prefix:u,MaxKeys:l=1e3,ContinuationToken:a}).ContinuationToken=a,"ALL"!==i)return[3,7];y.label=3;case 3:return[4,this._list(p,n,s)];case 4:d=y.sent(),(h=c.results).push.apply(h,kn([],Nn(d.results),!1)),d.nextToken&&(p.ContinuationToken=d.nextToken),y.label=5;case 5:if(d.nextToken)return[3,3];y.label=6;case 6:return[3,9];case 7:return i&&i<=l&&"number"==typeof i?p.MaxKeys=i:An.warn("pageSize should be from 0 - ".concat(l,".")),[4,this._list(p,n,s)];case 8:d=y.sent(),(g=c.results).push.apply(g,kn([],Nn(d.results),!1)),c.hasNextToken=d.hasNextToken,c.nextToken=d.nextToken,y.label=9;case 9:return yt(o,"list",{method:"list",result:"success"},null,"".concat(c.results.length," items returned from list operation")),An.debug("list",c),[2,c];case 10:throw f=y.sent(),An.error("list InvalidArgument",f),yt(o,"list",{method:"list",result:"failed"},null,"Listing items failed: ".concat(f.message)),f;case 11:return[2]}}))}))},e.prototype._ensureCredentials=function(){return Tn(this,void 0,void 0,(function(){var e,t,n;return On(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,h.J.get()];case 1:return(e=r.sent())?(t=h.J.shear(e),An.debug("set credentials for storage",t),this._config.credentials=t,[2,!0]):[2,!1];case 2:return n=r.sent(),An.warn("ensure credentials error",n),[2,!1];case 3:return[2]}}))}))},e.prototype._isWithCredentials=function(e){return"object"==typeof e&&e.hasOwnProperty("credentials")},e.prototype._prefix=function(e){var t=e.credentials,n=e.level,r=e.customPrefix||{},o=e.identityId||t.identityId,i=(void 0!==r.private?r.private:"private/")+o+"/",a=(void 0!==r.protected?r.protected:"protected/")+o+"/",s=void 0!==r.public?r.public:"public/";switch(n){case"private":return i;case"protected":return a;default:return s}},e.CATEGORY="Storage",e.PROVIDER_NAME="AWSS3",e}(),Mn=function(){return Mn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Mn.apply(this,arguments)},Rn=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Dn=new l.C("StorageClass"),Ln=new l.C("Storage"),Un="AWSS3",jn=function(){function e(){this._config={},this._pluggables=[],this._abortControllerMap=new WeakMap,Dn.debug("Storage Options",this._config),this.get=this.get.bind(this),this.put=this.put.bind(this),this.remove=this.remove.bind(this),this.list=this.list.bind(this)}return e.prototype.getModuleName=function(){return"Storage"},e.prototype.addPluggable=function(e){if(e&&"Storage"===e.getCategory()){this._pluggables.push(e);return e.configure(this._config[e.getProviderName()])}},e.prototype.getPluggable=function(e){var t=this._pluggables.find((function(t){return t.getProviderName()===e}));return void 0===t?(Dn.debug("No plugin found with providerName",e),null):t},e.prototype.removePluggable=function(e){this._pluggables=this._pluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t,n=this;if(Dn.debug("configure Storage"),!e)return this._config;var r=null!==(t=(0,d.s)(e).Storage)&&void 0!==t?t:{},o=["bucket","region","level","track","customPrefix","ContentMD5","serverSideEncryption","SSECustomerAlgorithm","SSECustomerKey","SSECustomerKeyMD5","SSEKMSKeyId"];return function(e){return Object.keys(e).find((function(e){return o.includes(e)}))}(r)&&!r[Un]&&(r[Un]={}),Object.entries(r).forEach((function(e){var t=Rn(e,2),n=t[0],i=t[1];n&&o.includes(n)&&void 0!==i&&(r[Un][n]=i,delete r[n])})),Object.keys(r).forEach((function(e){"string"!=typeof r[e]&&(n._config[e]=Mn(Mn({},n._config[e]),r[e]))})),this._pluggables.forEach((function(e){e.configure(n._config[e.getProviderName()])})),0===this._pluggables.length&&this.addPluggable(new xn),this._config},e.prototype.getAbortController=function(){return new AbortController},e.prototype.updateRequestToBeCancellable=function(e,t){this._abortControllerMap.set(e,t)},e.prototype.isUploadTask=function(e){return void 0!==e&&"function"==typeof e.pause&&"function"==typeof e.resume},e.prototype.cancel=function(e,t){if(e instanceof Cn)return e._cancel();var n=this._abortControllerMap.get(e);n?n.abort(t):Dn.debug("The request does not map to any cancel token")},e.prototype.copy=function(e,t,n){var r=(null==n?void 0:n.provider)||Un,o=this._pluggables.find((function(e){return e.getProviderName()===r}));if(void 0===o)return Dn.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var i=this.getAbortController();if("function"!=typeof o.copy)return Promise.reject(".copy is not implemented on provider ".concat(o.getProviderName()));var a=o.copy(e,t,Mn(Mn({},n),{abortSignal:i.signal}));return this.updateRequestToBeCancellable(a,i),a},e.prototype.get=function(e,t){var n=(null==t?void 0:t.provider)||Un,r=this._pluggables.find((function(e){return e.getProviderName()===n}));if(void 0===r)return Dn.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider");var o=this.getAbortController(),i=r.get(e,Mn(Mn({},t),{abortSignal:o.signal}));return this.updateRequestToBeCancellable(i,o),i},e.prototype.isCancelError=function(e){return Se(e)},e.prototype.getProperties=function(e,t){var n=(null==t?void 0:t.provider)||Un,r=this._pluggables.find((function(e){return e.getProviderName()===n}));if(void 0===r)throw Dn.debug("No plugin found with providerName",n),new Error("No plugin found with providerName");var o=this.getAbortController();if("function"!=typeof r.getProperties)return Promise.reject(".getProperties is not implemented on provider ".concat(r.getProviderName()));var i=null==r?void 0:r.getProperties(e,Mn({},t));return this.updateRequestToBeCancellable(i,o),i},e.prototype.put=function(e,t,n){var r=(null==n?void 0:n.provider)||Un,o=this._pluggables.find((function(e){return e.getProviderName()===r}));if(void 0===o)return Dn.debug("No plugin found with providerName",r),Promise.reject("No plugin found in Storage for the provider");var i=this.getAbortController(),a=o.put(e,t,Mn(Mn({},n),{abortSignal:i.signal}));return this.isUploadTask(a)||this.updateRequestToBeCancellable(a,i),a},e.prototype.remove=function(e,t){var n=(null==t?void 0:t.provider)||Un,r=this._pluggables.find((function(e){return e.getProviderName()===n}));return void 0===r?(Dn.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.remove(e,t)},e.prototype.list=function(e,t){var n=(null==t?void 0:t.provider)||Un,r=this._pluggables.find((function(e){return e.getProviderName()===n}));return void 0===r?(Dn.debug("No plugin found with providerName",n),Promise.reject("No plugin found in Storage for the provider")):r.list(e,t)},e}(),Kn=null,Bn=function(){if(Kn)return Kn;Ln.debug("Create Storage Instance, debug"),(Kn=new jn).vault=new jn;var e=Kn.configure;return Kn.configure=function(t){Ln.debug("storage configure called");var n=Mn({},e.call(Kn,t));Object.keys(n).forEach((function(e){"string"!=typeof n[e]&&(n[e]=Mn(Mn({},n[e]),{level:"private"}))})),Ln.debug("storage vault configure called"),Kn.vault.configure(n)},Kn}();r.H.register(Bn);var zn=n(38180),Gn=n(59977),Hn=n(29640),qn=n(26414),Fn=n(39820),Wn=n(15215),Vn=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,Wn.__extends)(t,e),t.prototype.getModuleName=function(){return"PubSub"},t.prototype.subscribe=function(t,n){return e.prototype.subscribe.call(this,t,n)},t}(n(42065).T));r.H.register(Vn);var Yn=n(11125),Jn=n(96227),Qn=n(35970),$n=n.n(Qn),Zn={},Xn=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];null===(t=Zn[e])||void 0===t||t.forEach((function(e){e.handleEvent.apply(e,(0,Wn.__spread)(n))}))},er=function(e,t){Zn[e]||(Zn[e]=new Set);var n={handleEvent:t,remove:function(){Zn[e].delete(n)}};return Zn[e].add(n),n},tr=n(87821),nr=n(64988),rr=n(68026),or=n(25471),ir=n(85247),ar=n(34909),sr=function(){function e(e){var t,n=this;this.config={},this.endpointInitialized=!1,this.initialized=!1,this.identifyUser=function(e,t){return(0,Wn.__awaiter)(n,void 0,void 0,(function(){var n;return(0,Wn.__generator)(this,(function(r){switch(r.label){case 0:return this.initialized?[3,2]:[4,this.init()];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.updateEndpoint(e,t)];case 3:return r.sent(),[3,5];case 4:throw n=r.sent(),this.logger.error("Error identifying user",n),n;case 5:return[2]}}))}))},this.init=function(){return(0,Wn.__awaiter)(n,void 0,void 0,(function(){var e,t,n,r,o,i;return(0,Wn.__generator)(this,(function(a){switch(a.label){case 0:e=this.config,t=e.endpointId,n=e.storage,r=this.getProviderName(),a.label=1;case 1:return a.trys.push([1,6,,7]),"function"!=typeof n.sync?[3,3]:[4,n.sync()];case 2:a.sent(),a.label=3;case 3:return t?[3,5]:(o=this.config,[4,this.getEndpointId()]);case 4:o.endpointId=a.sent(),a.label=5;case 5:return this.initialized=!0,[3,7];case 6:return i=a.sent(),this.logger.error("Failed to initialize "+r,i),[3,7];case 7:return[2]}}))}))},this.getUserAgentValue=function(){var e;return e="PushNotification"===n.getSubCategory()?{category:g.b7.PushNotification,action:g.CG.None}:{category:g.b7.InAppMessaging,action:g.r5.None},(0,b.fE)(e)},this.recordAnalyticsEvent=function(e){return(0,Wn.__awaiter)(n,void 0,void 0,(function(){var t,n,r,o,i,a,s,u,c,l;return(0,Wn.__generator)(this,(function(d){switch(d.label){case 0:return t=this.config,[4,this.getCredentials()];case 1:t.credentials=d.sent(),this.assertNotEmptyConfiguration(),n=this.config,r=n.appId,o=n.credentials,i=n.endpointId,a=n.region,d.label=2;case 2:return d.trys.push([2,4,,5]),s={ApplicationId:r,EventsRequest:{BatchItem:(c={},c[i]={Endpoint:{},Events:(l={},l[(0,ar.v4)()]=e,l)},c)}},this.logger.debug("recording analytics event"),[4,(0,or.t)({credentials:o,region:a,userAgentValue:this.getUserAgentValue()},s)];case 3:return d.sent(),[3,5];case 4:throw u=d.sent(),this.logger.error("Error recording analytics event",u),u;case 5:return[2]}}))}))},this.updateEndpoint=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=null),(0,Wn.__awaiter)(n,void 0,void 0,(function(){var n,r,o,i,a,s,u,c,l,d,p,f,h,g,y,v,b,m,S,w,_,E,C,P=this;return(0,Wn.__generator)(this,(function(T){switch(T.label){case 0:return[4,this.getCredentials()];case 1:if(n=T.sent(),r=!this.config.credentials||Object.keys(n).some((function(e){return n[e]!==P.config.credentials[e]})),this.endpointInitialized&&!r&&!e&&!t)return[2];this.config.credentials=n,this.assertNotEmptyConfiguration(),o=this.config,i=o.appId,a=o.endpointId,s=o.endpointInfo,u=void 0===s?{}:s,c=o.region,T.label=2;case 2:return T.trys.push([2,4,,5]),d=(l=null!=t?t:{}).address,p=l.attributes,f=l.demographic,h=l.location,g=l.metrics,y=l.optOut,v=this.clientInfo,b=v.appVersion,m=v.make,S=v.model,w=v.platform,_=v.version,E={ApplicationId:i,EndpointId:a,EndpointRequest:{RequestId:(0,ar.v4)(),EffectiveDate:(new Date).toISOString(),ChannelType:u.channelType,Address:null!=d?d:u.address,Attributes:(0,Wn.__assign)((0,Wn.__assign)({},u.attributes),p),Demographic:(0,Wn.__assign)({AppVersion:b,Make:m,Model:S,ModelVersion:_,Platform:w},(0,nr.qo)((0,Wn.__assign)((0,Wn.__assign)({},u.demographic),f))),Location:(0,nr.qo)((0,Wn.__assign)((0,Wn.__assign)({},u.location),h)),Metrics:(0,Wn.__assign)((0,Wn.__assign)({},u.metrics),g),OptOut:null!=y?y:u.optOut,User:{UserId:null!==(C=null!=e?e:u.userId)&&void 0!==C?C:n.identityId,UserAttributes:null!=p?p:u.userAttributes}}},this.logger.debug("updating endpoint"),[4,(0,ir.l)({credentials:n,region:c,userAgentValue:this.getUserAgentValue()},E)];case 3:return T.sent(),this.endpointInitialized=!0,[3,5];case 4:throw T.sent();case 5:return[2]}}))}))},this.getEndpointId=function(){return(0,Wn.__awaiter)(n,void 0,void 0,(function(){var e,t,n,r,o;return(0,Wn.__generator)(this,(function(i){switch(i.label){case 0:return e=this.config.appId,t="PushNotification"===this.getSubCategory()?this.getProviderName()+"_"+e:this.getSubCategory()+":"+this.getProviderName()+":"+e,[4,Yn.Y.getItem(t)];case 1:return(n=i.sent())?[2,n]:(r=(0,ar.v4)(),o=(new Date).getTime()+31536e8,Yn.Y.setItem(t,r,{expires:o,priority:1}),[2,r])}}))}))},this.getCredentials=function(){return(0,Wn.__awaiter)(n,void 0,void 0,(function(){var e,t;return(0,Wn.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,h.J.get()];case 1:return(e=n.sent())?[2,h.J.shear(e)]:(this.logger.debug("no credentials found"),[2,null]);case 2:return t=n.sent(),this.logger.error("Error getting credentials:",t),[2,null];case 3:return[2]}}))}))},this.assertNotEmptyConfiguration=function(){var e=n.config,t=e.appId,r=e.credentials,o=e.region;if(!t||!r||!o)throw new Error("One or more of credentials, appId or region is not configured")},this.config={storage:(new p.i).getStorage()},this.clientInfo=null!==(t=rr.C.clientInfo())&&void 0!==t?t:{},this.logger=e}return e.prototype.getCategory=function(){return e.category},e.prototype.getProviderName=function(){return e.providerName},e.prototype.configure=function(e){return void 0===e&&(e={}),this.config=(0,Wn.__assign)((0,Wn.__assign)({},this.config),e),this.logger.debug("configure "+this.getProviderName()+this.getSubCategory()+"Provider",this.config),this.config},e.category="Notifications",e.providerName="AWSPinpoint",e}();const ur=sr;var cr,lr,dr=n(63950),pr=n.n(dr),fr=(0,nr.gy)().isBrowser;fr&&document&&(void 0!==document.hidden?(cr="hidden",lr="visibilitychange"):void 0!==document.msHidden?(cr="msHidden",lr="msvisibilitychange"):void 0!==document.webkitHidden&&(cr="webkitHidden",lr="webkitvisibilitychange"));var hr=new l.C("InAppMessagingSessionTracker");const gr=function(e){var t=this;void 0===e&&(e=pr()),this.start=function(){return fr&&(null===document||void 0===document||document.addEventListener(lr,t.visibilityChangeHandler)),t.getSessionState()},this.end=function(){return fr&&(null===document||void 0===document||document.removeEventListener(lr,t.visibilityChangeHandler)),t.getSessionState()},this.getSessionState=function(){return fr&&document&&!document[cr]?"started":"ended"},this.visibilityChangeHandler=function(){fr&&document&&(document[cr]?(hr.debug("App is now hidden"),t.sessionStateChangeHandler("ended")):(hr.debug("App is now visible"),t.sessionStateChangeHandler("started")))},this.sessionStateChangeHandler=e};var yr,vr;!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED_EVENT",e.MESSAGE_DISPLAYED="MESSAGE_DISPLAYED_EVENT",e.MESSAGE_DISMISSED="MESSAGE_DISMISSED_EVENT",e.MESSAGE_ACTION_TAKEN="MESSAGE_ACTION_TAKEN_EVENT"}(yr||(yr={})),function(e){e.MESSAGE_DISPLAYED="_inapp.message_displayed",e.MESSAGE_DISMISSED="_inapp.message_dismissed",e.MESSAGE_ACTION_TAKEN="_inapp.message_clicked"}(vr||(vr={}));var br=n(62193),mr=n.n(br),Sr="undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("amplify_default"):"@@amplify_default",wr={},_r={},Er={},Cr=new l.C("InAppMessaging.AWSPinpointProvider"),Pr=function(e,t,n){f.Y.dispatch("inAppMessaging",{event:e,data:t,message:n},"InAppMessaging",Sr)},Tr=function(){var e=new Date;return e.setHours(0,0,0,0),e.toISOString()},Or=function(e){switch(e){case"EQUAL":return function(e,t){return e===t};case"GREATER_THAN":return function(e,t){return e<t};case"GREATER_THAN_OR_EQUAL":return function(e,t){return e<=t};case"LESS_THAN":return function(e,t){return e>t};case"LESS_THAN_OR_EQUAL":return function(e,t){return e>=t};default:return null}},Nr=function(e){var t,n,r=e.InAppMessage;return null!==(n=null===(t=null==r?void 0:r.Content)||void 0===t?void 0:t.map((function(e){var t=e.BackgroundColor,n=e.BodyConfig,r=e.HeaderConfig,o=e.ImageUrl,i=e.PrimaryBtn,a=e.SecondaryBtn,s=null==i?void 0:i.DefaultConfig,u=null==a?void 0:a.DefaultConfig,c={};return t&&(c.container={style:{backgroundColor:t}}),r&&(c.header={content:r.Header,style:{color:r.TextColor,textAlign:r.Alignment.toLowerCase()}}),n&&(c.body={content:n.Body,style:{color:n.TextColor,textAlign:n.Alignment.toLowerCase()}}),o&&(c.image={src:o}),s&&(c.primaryButton={title:s.Text,action:s.ButtonAction,url:s.Link,style:{backgroundColor:s.BackgroundColor,borderRadius:s.BorderRadius,color:s.TextColor}}),u&&(c.secondaryButton={title:u.Text,action:u.ButtonAction,url:u.Link,style:{backgroundColor:u.BackgroundColor,borderRadius:u.BorderRadius,color:u.TextColor}}),c})))&&void 0!==n?n:[]},kr=function(e){var t=e.InAppMessage,n=e.Priority,r=e.Schedule,o=e.TreatmentId;return{customData:null==t?void 0:t.CustomConfig,endDate:null==r?void 0:r.EndDate,priority:n,treatmentId:o}},Ar="pinpointProvider_inAppMessages_dailyCount",Ir="pinpointProvider_inAppMessages_totalCount",xr=function(e){function t(){var t=e.call(this,Cr)||this;return t.configured=!1,t.configure=function(n){return void 0===n&&(n={}),t.config=(0,Wn.__assign)((0,Wn.__assign)({},e.prototype.configure.call(t,n)),{endpointInfo:{channelType:"IN_APP"}}),t.configured||(t.sessionTracker=new gr(t.sessionStateChangeHandler),t.sessionTracker.start(),er(yr.MESSAGE_DISPLAYED,(function(e){t.recordMessageEvent(e,vr.MESSAGE_DISPLAYED)})),er(yr.MESSAGE_DISMISSED,(function(e){t.recordMessageEvent(e,vr.MESSAGE_DISMISSED)})),er(yr.MESSAGE_ACTION_TAKEN,(function(e){t.recordMessageEvent(e,vr.MESSAGE_ACTION_TAKEN)}))),t.configured=!0,Pr("pinpointProvider_configured",null),t.config},t.getInAppMessages=function(){return(0,Wn.__awaiter)(t,void 0,void 0,(function(){var e,t,n,r,o,i,a,s,u;return(0,Wn.__generator)(this,(function(c){switch(c.label){case 0:return this.initialized?[3,2]:[4,this.init()];case 1:c.sent(),c.label=2;case 2:wr={},_r={},Er={},c.label=3;case 3:return c.trys.push([3,6,,7]),[4,this.updateEndpoint()];case 4:return c.sent(),e=this.config,t=e.appId,n=e.credentials,r=e.endpointId,o=e.region,i={ApplicationId:t,EndpointId:r},this.logger.debug("getting in-app messages"),[4,(0,tr.j)({credentials:n,region:o},i)];case 5:return a=c.sent(),s=a.InAppMessagesResponse.InAppMessageCampaigns,Pr("getInAppMessages",s),[2,s];case 6:throw u=c.sent(),this.logger.error("Error getting in-app messages",u),u;case 7:return[2]}}))}))},t.processInAppMessages=function(e,n){return(0,Wn.__awaiter)(t,void 0,void 0,(function(){var t,r=this;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return this.initialized?[3,2]:[4,this.init()];case 1:o.sent(),o.label=2;case 2:return[2,this.normalizeMessages(e.reduce((function(e,o){var i=function(e,t){var n,r=e.CampaignId,o=e.Schedule,i=t.name,a=(null===(n=null==o?void 0:o.EventFilter)||void 0===n?void 0:n.Dimensions).EventType,s=r+":"+i;return wr.hasOwnProperty(s)||(wr[s]=!!(null==a?void 0:a.Values.includes(i))),wr[s]}(o,n)&&function(e,t){var n,r=e.CampaignId,o=e.Schedule,i=t.attributes,a=(null===(n=null==o?void 0:o.EventFilter)||void 0===n?void 0:n.Dimensions).Attributes;if(mr()(a))return!0;if(mr()(i))return!1;var s=r+":"+JSON.stringify(i);return _r.hasOwnProperty(s)||(_r[s]=Object.entries(a).every((function(e){var t=(0,Wn.__read)(e,2),n=t[0];return t[1].Values.includes(i[n])}))),_r[s]}(o,n)&&function(e,t){var n,r=e.CampaignId,o=e.Schedule,i=t.metrics,a=(null===(n=null==o?void 0:o.EventFilter)||void 0===n?void 0:n.Dimensions).Metrics;if(mr()(a))return!0;if(mr()(i))return!1;var s=r+":"+JSON.stringify(i);return Er.hasOwnProperty(s)||(Er[s]=Object.entries(a).every((function(e){var t=(0,Wn.__read)(e,2),n=t[0],r=t[1],o=r.ComparisonOperator,a=r.Value,s=Or(o);return!!s&&s(a,i[n])}))),Er[s]}(o,n)&&function(e){var t=e.Schedule;return!(null==t?void 0:t.EndDate)||new Date<new Date(t.EndDate)}(o)&&r.isBelowCap(o);if(i)if(t){if(o.Priority){if(o.Priority<t)return t=o.Priority,[o];o.Priority===t&&e.push(o)}}else{if(o.Priority)return t=o.Priority,[o];e.push(o)}return e}),[]))]}}))}))},t.sessionStateChangeHandler=function(e){"started"===e&&(t.sessionMessageCountMap={})},t.isBelowCap=function(e){var n=e.CampaignId,r=e.SessionCap,o=e.DailyCap,i=e.TotalCap,a=t.getMessageCounts(n),s=a.sessionCount,u=a.dailyCount,c=a.totalCount;return(!r||s<r)&&(!o||u<o)&&(!i||c<i)},t.getSessionCount=function(e){return t.sessionMessageCountMap[e]||0},t.getDailyCount=function(){var e=t.config.storage,n=Tr(),r=e.getItem(Ar),o=r?JSON.parse(r):{count:0,lastCountTimestamp:n};return o.lastCountTimestamp===n?o.count:0},t.getTotalCountMap=function(){var e=t.config.storage.getItem(Ir);return e?JSON.parse(e):{}},t.getTotalCount=function(e){return t.getTotalCountMap()[e]||0},t.getMessageCounts=function(e){try{return{sessionCount:t.getSessionCount(e),dailyCount:t.getDailyCount(),totalCount:t.getTotalCount(e)}}catch(e){t.logger.error("Failed to get message counts from storage",e)}},t.setSessionCount=function(e,n){t.sessionMessageCountMap[e]=n},t.setDailyCount=function(e){var n=t.config.storage,r={count:e,lastCountTimestamp:Tr()};try{n.setItem(Ar,JSON.stringify(r))}catch(e){t.logger.error("Failed to save daily message count to storage",e)}},t.setTotalCountMap=function(e){var n=t.config.storage;try{n.setItem(Ir,JSON.stringify(e))}catch(e){t.logger.error("Failed to save total count to storage",e)}},t.setTotalCount=function(e,n){var r,o=(0,Wn.__assign)((0,Wn.__assign)({},t.getTotalCountMap()),((r={})[e]=n,r));t.setTotalCountMap(o)},t.incrementCounts=function(e){return(0,Wn.__awaiter)(t,void 0,void 0,(function(){var t,n,r,o;return(0,Wn.__generator)(this,(function(i){return t=this.getMessageCounts(e),n=t.sessionCount,r=t.dailyCount,o=t.totalCount,this.setSessionCount(e,n+1),this.setDailyCount(r+1),this.setTotalCount(e,o+1),[2]}))}))},t.normalizeMessages=function(e){return e.map((function(e){var t,n=e.CampaignId,r=e.InAppMessage;return{id:n,content:Nr(e),layout:(t=r.Layout,"MOBILE_FEED"===t?"MODAL":"OVERLAYS"===t?"FULL_SCREEN":t),metadata:kr(e)}}))},t.recordMessageEvent=function(e,n){return(0,Wn.__awaiter)(t,void 0,void 0,(function(){return(0,Wn.__generator)(this,(function(t){switch(t.label){case 0:return this.initialized?[3,2]:[4,this.init()];case 1:t.sent(),t.label=2;case 2:return function(e,t){if(r.H.Analytics&&"function"==typeof r.H.Analytics.record){var n=t.id,o=t.metadata;r.H.Analytics.record({name:e,attributes:{campaign_id:n,delivery_type:"IN_APP_MESSAGE",treatment_id:null==o?void 0:o.treatmentId}})}else Cr.debug("Analytics module is not registered into Amplify")}(n,e),n!==vr.MESSAGE_DISPLAYED?[3,4]:[4,this.incrementCounts(e.id)];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))},t.sessionMessageCountMap={},t}return(0,Wn.__extends)(t,e),t.prototype.getSubCategory=function(){return t.subCategory},t.subCategory="InAppMessaging",t}(ur);const Mr=xr;var Rr="_inAppMessages",Dr=new l.C("Notifications.InAppMessaging");const Lr=function(){function e(){var e=this;this.config={},this.listeningForAnalyticEvents=!1,this.pluggables=[],this.storageSynced=!1,this.configure=function(t){void 0===t&&(t={});var n=t.listenForAnalyticsEvents,r=void 0===n||n,o=(0,Wn.__rest)(t,["listenForAnalyticsEvents"]);return e.config=(0,Wn.__assign)((0,Wn.__assign)({},e.config),o),Dr.debug("configure InAppMessaging",e.config),e.pluggables.forEach((function(t){t.configure(e.config[t.getProviderName()])})),0===e.pluggables.length&&e.addPluggable(new Mr),r&&!e.listeningForAnalyticEvents&&(f.Y.listen("analytics",e.analyticsListener),e.listeningForAnalyticEvents=!0),e.config},this.getPluggable=function(t){var n,r=null!==(n=e.pluggables.find((function(e){return e.getProviderName()===t})))&&void 0!==n?n:null;return r||Dr.debug("No plugin found with name "+t),r},this.addPluggable=function(t){if(t&&"Notifications"===t.getCategory()&&"InAppMessaging"===t.getSubCategory()){if(e.getPluggable(t.getProviderName()))throw new Error("Pluggable "+t.getProviderName()+" has already been added.");e.pluggables.push(t),t.configure(e.config[t.getProviderName()])}},this.removePluggable=function(t){var n=e.pluggables.findIndex((function(e){return e.getProviderName()===t}));-1===n?Dr.debug("No plugin found with name "+t):e.pluggables.splice(n,1)},this.syncMessages=function(){return Promise.all(e.pluggables.map((function(t){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e,n,r;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,t.getInAppMessages()];case 1:return e=o.sent(),n=""+t.getProviderName()+Rr,[4,this.setMessages(n,e)];case 2:return o.sent(),[3,4];case 3:throw r=o.sent(),Dr.error("Failed to sync messages",r),r;case 4:return[2]}}))}))})))},this.clearMessages=function(){return Promise.all(e.pluggables.map((function(t){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e;return(0,Wn.__generator)(this,(function(n){switch(n.label){case 0:return e=""+t.getProviderName()+Rr,[4,this.removeMessages(e)];case 1:return n.sent(),[2]}}))}))})))},this.dispatchEvent=function(t){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e,n,r=this;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return[4,Promise.all(this.pluggables.map((function(e){return(0,Wn.__awaiter)(r,void 0,void 0,(function(){var n,r;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return n=""+e.getProviderName()+Rr,[4,this.getMessages(n)];case 1:return r=o.sent(),[2,e.processInAppMessages(r,t)]}}))}))})))];case 1:return e=o.sent(),(n=$n()(e)).length&&Xn(yr.MESSAGE_RECEIVED,this.conflictHandler(n)),[2]}}))}))},this.identifyUser=function(t,n){return Promise.all(e.pluggables.map((function(r){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r.identifyUser(t,n)];case 1:return o.sent(),[3,3];case 2:throw e=o.sent(),Dr.error("Failed to identify user",e),e;case 3:return[2]}}))}))})))},this.onMessageReceived=function(e){return er(yr.MESSAGE_RECEIVED,e)},this.onMessageDisplayed=function(e){return er(yr.MESSAGE_DISPLAYED,e)},this.onMessageDismissed=function(e){return er(yr.MESSAGE_DISMISSED,e)},this.onMessageActionTaken=function(e){return er(yr.MESSAGE_ACTION_TAKEN,e)},this.notifyMessageInteraction=function(e,t){Xn(t,e)},this.setConflictHandler=function(t){e.conflictHandler=t},this.analyticsListener=function(t){var n=t.payload,r=n.event,o=n.data;if("record"===r)e.dispatchEvent(o)},this.syncStorage=function(){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e,t;return(0,Wn.__generator)(this,(function(n){switch(n.label){case 0:e=this.config.storage,n.label=1;case 1:return n.trys.push([1,4,,5]),"function"!=typeof e.sync?[3,3]:[4,e.sync()];case 2:n.sent(),n.label=3;case 3:return this.storageSynced=!0,[3,5];case 4:return t=n.sent(),Dr.error("Failed to sync storage",t),[3,5];case 5:return[2]}}))}))},this.getMessages=function(t){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e,n,r;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),this.storageSynced?[3,2]:[4,this.syncStorage()];case 1:o.sent(),o.label=2;case 2:return e=this.config.storage,[2,(n=e.getItem(t))?JSON.parse(n):[]];case 3:return r=o.sent(),Dr.error("Failed to retrieve in-app messages from storage",r),[3,4];case 4:return[2]}}))}))},this.setMessages=function(t,n){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e;return(0,Wn.__generator)(this,(function(r){switch(r.label){case 0:if(!n)return[2];r.label=1;case 1:return r.trys.push([1,4,,5]),this.storageSynced?[3,3]:[4,this.syncStorage()];case 2:r.sent(),r.label=3;case 3:return this.config.storage.setItem(t,JSON.stringify(n)),[3,5];case 4:return e=r.sent(),Dr.error("Failed to store in-app messages",e),[3,5];case 5:return[2]}}))}))},this.removeMessages=function(t){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e;return(0,Wn.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),this.storageSynced?[3,2]:[4,this.syncStorage()];case 1:n.sent(),n.label=2;case 2:return this.config.storage.removeItem(t),[3,4];case 3:return e=n.sent(),Dr.error("Failed to remove in-app messages from storage",e),[3,4];case 4:return[2]}}))}))},this.defaultConflictHandler=function(e){return e.sort((function(e,t){var n,r,o=null===(n=e.metadata)||void 0===n?void 0:n.endDate,i=null===(r=t.metadata)||void 0===r?void 0:r.endDate;return o===i?0:o&&!i?-1:!o&&i?1:new Date(o)<new Date(i)?-1:1}))[0]},this.config={storage:(new p.i).getStorage()},this.setConflictHandler(this.defaultConflictHandler)}return e.prototype.getModuleName=function(){return"InAppMessaging"},e}();const Ur=function(e){function t(){var t=e.call(this,"Function not supported on current platform")||this;return t.name="PlatformNotSupportedError",t}return(0,Wn.__extends)(t,e),t}(Error);const jr=function(){function e(){var e=this;this.configure=function(e){throw void 0===e&&(e={}),new Ur},this.getPluggable=function(e){throw new Ur},this.addPluggable=function(e){throw new Ur},this.removePluggable=function(){throw new Ur},this.enable=function(){throw new Ur},this.identifyUser=function(){throw new Ur},this.getLaunchNotification=function(){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){return(0,Wn.__generator)(this,(function(e){throw new Ur}))}))},this.getBadgeCount=function(){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){return(0,Wn.__generator)(this,(function(e){throw new Ur}))}))},this.setBadgeCount=function(e){throw new Ur},this.getPermissionStatus=function(){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){return(0,Wn.__generator)(this,(function(e){throw new Ur}))}))},this.requestPermissions=function(t){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){return(0,Wn.__generator)(this,(function(e){throw new Ur}))}))},this.onNotificationReceivedInBackground=function(e){throw new Ur},this.onNotificationReceivedInForeground=function(e){throw new Ur},this.onTokenReceived=function(e){throw new Ur},this.onNotificationOpened=function(e){throw new Ur}}return e.prototype.getModuleName=function(){throw new Ur},e}();var Kr=new l.C("Notifications"),Br=new(function(){function e(){var e=this;this.config={},this.configure=function(t){var n=(void 0===t?{}:t).Notifications;if(e.config=(0,Wn.__assign)((0,Wn.__assign)({},e.config),n),Kr.debug("configure Notifications",n),e.inAppMessaging.configure(e.config.InAppMessaging),e.config.Push)try{e.pushNotification||(e.pushNotification=new jr),e.pushNotification.configure(e.config.Push)}catch(e){Kr.error(e)}return e.config},this.identifyUser=function(t,n){var r=[];return e.inAppMessaging&&r.push(e.inAppMessaging.identifyUser),e.pushNotification&&r.push(e.pushNotification.identifyUser),Promise.all(r.map((function(r){return(0,Wn.__awaiter)(e,void 0,void 0,(function(){var e;return(0,Wn.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,r(t,n)];case 1:return o.sent(),[3,3];case 2:throw e=o.sent(),Kr.error("Failed to identify user",e),e;case 3:return[2]}}))}))})))},this.inAppMessaging=new Lr}return e.prototype.getModuleName=function(){return"Notifications"},Object.defineProperty(e.prototype,"InAppMessaging",{get:function(){return this.inAppMessaging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Push",{get:function(){var e;return null!==(e=this.pushNotification)&&void 0!==e?e:{}},enumerable:!0,configurable:!0}),e}());const zr=Br;r.H.register(Br);var Gr=new l.C("Predictions"),Hr=new(function(){function e(e){this._options=e,this._convertPluggables=[],this._identifyPluggables=[],this._interpretPluggables=[]}return e.prototype.getModuleName=function(){return"Predictions"},e.prototype.addPluggable=function(e){if(this.getPluggable(e.getProviderName()))throw new Error("Pluggable with name "+e.getProviderName()+" has already been added.");var t=!1;this.implementsConvertPluggable(e)&&(this._convertPluggables.push(e),t=!0),this.implementsIdentifyPluggable(e)&&(this._identifyPluggables.push(e),t=!0),this.implementsInterpretPluggable(e)&&(this._interpretPluggables.push(e),t=!0),t&&this.configurePluggable(e)},e.prototype.getPluggable=function(e){var t=this.getAllProviders().find((function(t){return t.getProviderName()===e}));return void 0===t?(Gr.debug("No plugin found with providerName=>",e),null):t},e.prototype.removePluggable=function(e){this._convertPluggables=this._convertPluggables.filter((function(t){return t.getProviderName()!==e})),this._identifyPluggables=this._identifyPluggables.filter((function(t){return t.getProviderName()!==e})),this._interpretPluggables=this._interpretPluggables.filter((function(t){return t.getProviderName()!==e}))},e.prototype.configure=function(e){var t=this,n=e?e.predictions||e:{};n=(0,Wn.__assign)((0,Wn.__assign)({},n),e),this._options=Object.assign({},this._options,n),Gr.debug("configure Predictions",this._options),this.getAllProviders().forEach((function(e){return t.configurePluggable(e)}))},e.prototype.interpret=function(e,t){return this.getPluggableToExecute(this._interpretPluggables,t).interpret(e)},e.prototype.convert=function(e,t){return this.getPluggableToExecute(this._convertPluggables,t).convert(e)},e.prototype.identify=function(e,t){return this.getPluggableToExecute(this._identifyPluggables,t).identify(e)},e.prototype.getPluggableToExecute=function(e,t){if(t&&t.providerName)return(0,Wn.__spread)(e).find((function(e){return e.getProviderName()===t.providerName}));if(1===e.length)return e[0];throw new Error("More than one or no providers are configured, Either specify a provider name or configure exactly one provider")},e.prototype.getAllProviders=function(){return(0,Wn.__spread)(this._convertPluggables,this._identifyPluggables,this._interpretPluggables)},e.prototype.configurePluggable=function(e){var t=Object.assign({},this._options.predictions,this._options[e.getCategory().toLowerCase()]);e.configure(t)},e.prototype.implementsConvertPluggable=function(e){return e&&"function"==typeof e.convert},e.prototype.implementsIdentifyPluggable=function(e){return e&&"function"==typeof e.identify},e.prototype.implementsInterpretPluggable=function(e){return e&&"function"==typeof e.interpret},e}())({});r.H.register(Hr);var qr=n(36525),Fr=n(63401),Wr=n(92352),Vr=n(86326);var Yr=function(){return Yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Yr.apply(this,arguments)};Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var Jr=n(5548),Qr=n(69038),$r=[c.N,h.J],Zr=[zn.n,c.N,qn.os];function Xr(e){void 0===e&&(e={});var t=e.modules,n=void 0===t?Zr:t,o=e.req;n.includes(qn.os)&&!n.includes(Jr.G)&&n.push(Jr.G);var i=r.H.configure(),a=new r.N,s=new Qr.l({req:o});return $r.forEach((function(e){n.includes(e)||a.register(new e.constructor)})),n.forEach((function(e){a.register(new e.constructor)})),a.configure(Yr(Yr({},i),{storage:s})),a}var eo=n(7713)}}]);