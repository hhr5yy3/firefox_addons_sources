/*! For license information please see video.js.LICENSE.txt */
(self.webpackChunkvideo_downloader=self.webpackChunkvideo_downloader||[]).push([[791],{41968:e=>{class t{constructor(e){this.player=e,this._sessionListener=this._onSessionStateChange.bind(this),this._castListener=this._onCastStateChange.bind(this),this._addCastContextEventListeners(),this.player.on("dispose",this._removeCastContextEventListeners.bind(this)),this._notifyPlayerOfDevicesAvailabilityChange(this.getCastContext().getCastState()),this.remotePlayer=new cast.framework.RemotePlayer,this.remotePlayerController=new cast.framework.RemotePlayerController(this.remotePlayer)}static hasConnected=!1;_addCastContextEventListeners(){var e=cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t=cast.framework.CastContextEventType.CAST_STATE_CHANGED;this.getCastContext().addEventListener(e,this._sessionListener),this.getCastContext().addEventListener(t,this._castListener)}_removeCastContextEventListeners(){var e=cast.framework.CastContextEventType.SESSION_STATE_CHANGED,t=cast.framework.CastContextEventType.CAST_STATE_CHANGED;this.getCastContext().removeEventListener(e,this._sessionListener),this.getCastContext().removeEventListener(t,this._castListener)}_onSessionStateChange(e){e.sessionState===cast.framework.SessionState.SESSION_ENDED&&(this.player.trigger("chromecastDisconnected"),this._reloadTech())}_onCastStateChange(e){this._notifyPlayerOfDevicesAvailabilityChange(e.castState)}_notifyPlayerOfDevicesAvailabilityChange(e){this.hasAvailableDevices(e)?this.player.trigger("chromecastDevicesAvailable"):this.player.trigger("chromecastDevicesUnavailable")}hasAvailableDevices(e){return(e=e||this.getCastContext().getCastState())===cast.framework.CastState.NOT_CONNECTED||e===cast.framework.CastState.CONNECTING||e===cast.framework.CastState.CONNECTED}openCastMenu(){var e;this.player.currentSource()&&(e=function(){t.hasConnected=!0,this.player.trigger("chromecastConnected"),this._reloadTech()}.bind(this),this.getCastContext().requestSession().then(e,(function(){})))}_reloadTech(){var e=this.player,t=e.currentTime(),n=e.paused(),r=e.currentSources();e.src(r),e.ready((function(){n?e.pause():e.play(),e.currentTime(t||0)}))}getCastContext(){return cast.framework.CastContext.getInstance()}getRemotePlayer(){return this.remotePlayer}getRemotePlayerController(){return this.remotePlayerController}static isChromecastAPIAvailable(){return window.chrome&&window.chrome.cast&&window.cast}static isChromecastConnected(){return t.isChromecastAPIAvailable()&&cast.framework.CastContext.getInstance().getCastState()===cast.framework.CastState.CONNECTED&&t.hasConnected}}e.exports=t},73204:e=>{var t;t={constructor:function(e){this.constructor.super_.apply(this,arguments),e.on("chromecastConnected",this._onChromecastConnected.bind(this)),e.on("chromecastDisconnected",this._onChromecastDisconnected.bind(this)),e.on("chromecastDevicesAvailable",this._onChromecastDevicesAvailable.bind(this)),e.on("chromecastDevicesUnavailable",this._onChromecastDevicesUnavailable.bind(this)),this.controlText("Open Chromecast menu"),e.chromecastSessionManager&&e.chromecastSessionManager.hasAvailableDevices()?this._onChromecastDevicesAvailable():this._onChromecastDevicesUnavailable()},buildCSSClass:function(){return"vjs-chromecast-button "+(this._isChromecastConnected?"vjs-chromecast-casting-state ":"")+this.constructor.super_.prototype.buildCSSClass()},handleClick:function(){this.player().trigger("chromecastRequested")},_onChromecastConnected:function(){this._isChromecastConnected=!0,this._reloadCSSClasses()},_onChromecastDisconnected:function(){this._isChromecastConnected=!1,this._reloadCSSClasses()},_onChromecastDevicesAvailable:function(){this.show()},_onChromecastDevicesUnavailable:function(){this.hide()},_reloadCSSClasses:function(){this.el_&&(this.el_.className=this.buildCSSClass())}},e.exports=function(e){var n;n=e.extend(e.getComponent("Button"),t),e.registerComponent("chromecastButton",n)}},28509:(e,t,n)=>{var r=n(41968);function i(e){e.chromecastSessionManager.openCastMenu()}function a(e,t){!function(e){cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:e.receiverAppID||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}(t),function(e){e.chromecastSessionManager||(e.chromecastSessionManager=new r(e))}(e),function(e,t){var n;t.addButtonToControlBar&&!e.controlBar.getChild("chromecastButton")&&(n=e.controlBar.children().length,void 0!==t.buttonPositionIndex&&(n=t.buttonPositionIndex>=0?t.buttonPositionIndex:e.controlBar.children().length+t.buttonPositionIndex),e.controlBar.addChild("chromecastButton",t,n)),e.on("chromecastRequested",i.bind(null,e))}(e,t)}e.exports=function(e){e.registerPlugin("chromecast",(function(e){var t=Object.assign({addButtonToControlBar:!0},e||{});this.ready(function(){this.controlBar&&(r.isChromecastAPIAvailable()?a(this,t):function(e,t){var n,i=1;n=setInterval((function(){i>30?clearInterval(n):(r.isChromecastAPIAvailable()&&(clearInterval(n),a(e,t)),i+=1)}),1e3)}(this,t))}.bind(this))}))}},14135:(e,t,n)=>{var r=n(60995),i=n(73204),a=n(71642),s=n(28509);e.exports=function(e,t){Object.assign({preloadWebComponents:!1},t).preloadWebComponents&&r(),e=e||window.videojs,i(e),a(e),s(e)}},60995:(e,t,n)=>{function r(e){return"string"==typeof window.navigator.userAgent&&window.navigator.userAgent.indexOf(e)>=0}e.exports=function(){var e=!document.registerElement,t=r("CriOS");(r("Android")&&r("Chrome/")&&window.navigator.presentation||t)&&e&&n(24889)}},71642:(e,t,n)=>{var r,i=n(41968),a=n(46707);r={constructor:function(e){var t;return this._eventListeners=[],this.videojsPlayer=this.videojs(e.playerId),this._chromecastSessionManager=this.videojsPlayer.chromecastSessionManager,this._ui=new a,this._ui.updatePoster(this.videojsPlayer.poster()),t=this.constructor.super_.apply(this,arguments),this._remotePlayer=this._chromecastSessionManager.getRemotePlayer(),this._remotePlayerController=this._chromecastSessionManager.getRemotePlayerController(),this._listenToPlayerControllerEvents(),this.on("dispose",this._removeAllEventListeners.bind(this)),this._hasPlayedAnyItem=!1,this._requestTitle=e.requestTitleFn||function(){},this._requestSubtitle=e.requestSubtitleFn||function(){},this._requestCustomData=e.requestCustomDataFn||function(){},this._initialStartTime=e.startTime||0,this._playSource(e.source,this._initialStartTime),this.ready(function(){this.setMuted(e.muted)}.bind(this)),t},createEl:function(){return this._ui.getDOMElement()},play:function(){this.paused()&&(this.ended()&&!this._isMediaLoading?this._playSource({src:this.videojsPlayer.src()},0):this._remotePlayerController.playOrPause())},pause:function(){!this.paused()&&this._remotePlayer.canPause&&this._remotePlayerController.playOrPause()},paused:function(){return this._remotePlayer.isPaused||this.ended()||null===this._remotePlayer.playerState},setSource:function(e){this._currentSource&&this._currentSource.src===e.src&&this._currentSource.type===e.type||(this._currentSource=e,this._playSource(e,0))},_playSource:function(e,t){var n,r=this._getCastSession(),i=new chrome.cast.media.MediaInfo(e.src,e.type),a=this._requestTitle(e),s=this._requestSubtitle(e),o=this._requestCustomData(e);this.trigger("waiting"),this._clearSessionTimeout(),i.metadata=new chrome.cast.media.GenericMediaMetadata,i.metadata.metadataType=chrome.cast.media.MetadataType.GENERIC,i.metadata.title=a,i.metadata.subtitle=s,i.streamType=this.videojsPlayer.liveTracker&&this.videojsPlayer.liveTracker.isLive()?chrome.cast.media.StreamType.LIVE:chrome.cast.media.StreamType.BUFFERED,o&&(i.customData=o),this._ui.updateTitle(a),this._ui.updateSubtitle(s),(n=new chrome.cast.media.LoadRequest(i)).autoplay=!0,n.currentTime=t,this._isMediaLoading=!0,this._hasPlayedCurrentItem=!1,r.loadMedia(n).then(function(){this._hasPlayedAnyItem||this.triggerReady(),this.trigger("loadstart"),this.trigger("loadeddata"),this.trigger("play"),this.trigger("playing"),this._hasPlayedAnyItem=!0,this._isMediaLoading=!1,this._getMediaSession().addUpdateListener(this._onMediaSessionStatusChanged.bind(this))}.bind(this),this._triggerErrorEvent.bind(this))},setCurrentTime:function(e){var t=this.duration();e>t||!this._remotePlayer.canSeek||(this._remotePlayer.currentTime=Math.min(t-1,e),this._remotePlayerController.seek(),this._triggerTimeUpdateEvent())},currentTime:function(){return this._hasPlayedAnyItem?this._remotePlayer.currentTime:this._initialStartTime},duration:function(){return this._hasPlayedAnyItem?this._remotePlayer.duration:this.videojsPlayer.duration()},ended:function(){var e=this._getMediaSession();return!(e||!this._hasMediaSessionEnded)||!!e&&e.idleReason===chrome.cast.media.IdleReason.FINISHED},volume:function(){return this._remotePlayer.volumeLevel},setVolume:function(e){this._remotePlayer.volumeLevel=e,this._remotePlayerController.setVolumeLevel(),this._triggerVolumeChangeEvent()},muted:function(){return this._remotePlayer.isMuted},setMuted:function(e){(this._remotePlayer.isMuted&&!e||!this._remotePlayer.isMuted&&e)&&this._remotePlayerController.muteOrUnmute()},poster:function(){return this._ui.getPoster()},setPoster:function(e){this._ui.updatePoster(e)},buffered:function(){},seekable:function(){return this.videojs.createTimeRange(0,this.duration())},controls:function(){return!1},playsinline:function(){return!0},supportsFullScreen:function(){return!0},setAutoplay:function(){},playbackRate:function(){var e=this._getMediaSession();return e?e.playbackRate:1},setPlaybackRate:function(){},preload:function(){},load:function(){},readyState:function(){return"IDLE"===this._remotePlayer.playerState||"BUFFERING"===this._remotePlayer.playerState?0:4},_listenToPlayerControllerEvents:function(){var e=cast.framework.RemotePlayerEventType;this._addEventListener(this._remotePlayerController,e.PLAYER_STATE_CHANGED,this._onPlayerStateChanged,this),this._addEventListener(this._remotePlayerController,e.VOLUME_LEVEL_CHANGED,this._triggerVolumeChangeEvent,this),this._addEventListener(this._remotePlayerController,e.IS_MUTED_CHANGED,this._triggerVolumeChangeEvent,this),this._addEventListener(this._remotePlayerController,e.CURRENT_TIME_CHANGED,this._triggerTimeUpdateEvent,this),this._addEventListener(this._remotePlayerController,e.DURATION_CHANGED,this._triggerDurationChangeEvent,this)},_addEventListener:function(e,t,n,r){var i;i={target:e,type:t,callback:n,context:r,listener:n.bind(r)},e.addEventListener(t,i.listener),this._eventListeners.push(i)},_removeAllEventListeners:function(){for(;this._eventListeners.length>0;)this._removeEventListener(this._eventListeners[0]);this._eventListeners=[]},_removeEventListener:function(e){var t,n=-1;for(e.target.removeEventListener(e.type,e.listener),t=0;t<this._eventListeners.length;t++)if(this._eventListeners[t].target===e.target&&this._eventListeners[t].type===e.type&&this._eventListeners[t].callback===e.callback&&this._eventListeners[t].context===e.context){n=t;break}-1!==n&&this._eventListeners.splice(n,1)},_onPlayerStateChanged:function(){var e=chrome.cast.media.PlayerState,t=this._remotePlayer.playerState;t===e.PLAYING?(this._hasPlayedCurrentItem=!0,this.trigger("play"),this.trigger("playing")):t===e.PAUSED?this.trigger("pause"):t===e.IDLE&&this.ended()||null===t&&this._hasPlayedCurrentItem?(this._hasPlayedCurrentItem=!1,this._closeSessionOnTimeout(),this.trigger("ended"),this._triggerTimeUpdateEvent()):t===e.BUFFERING&&this.trigger("waiting")},_onMediaSessionStatusChanged:function(e){this._hasMediaSessionEnded=!!e},_closeSessionOnTimeout:function(){this._clearSessionTimeout(),this._sessionTimeoutID=setTimeout(function(){var e=this._getCastSession();e&&e.endSession(!0),this._clearSessionTimeout()}.bind(this),1e4)},_clearSessionTimeout:function(){this._sessionTimeoutID&&(clearTimeout(this._sessionTimeoutID),this._sessionTimeoutID=!1)},_getCastContext:function(){return this._chromecastSessionManager.getCastContext()},_getCastSession:function(){return this._getCastContext().getCurrentSession()},_getMediaSession:function(){var e=this._getCastSession();return e?e.getMediaSession():null},_triggerVolumeChangeEvent:function(){this.trigger("volumechange")},_triggerTimeUpdateEvent:function(){this.trigger("timeupdate")},_triggerDurationChangeEvent:function(){this.trigger("durationchange")},_triggerErrorEvent:function(){this.trigger("error")}},e.exports=function(e){var t,n=e.getComponent("Tech");(t=e.extend(n,r)).canPlaySource=()=>i.isChromecastConnected(),t.isSupported=()=>i.isChromecastConnected(),t.prototype.featuresVolumeControl=!0,t.prototype.featuresPlaybackRate=!1,t.prototype.movingMediaElementInDOM=!1,t.prototype.featuresFullscreenResize=!0,t.prototype.featuresTimeupdateEvents=!0,t.prototype.featuresProgressEvents=!1,t.prototype.featuresNativeTextTracks=!1,t.prototype.featuresNativeAudioTracks=!1,t.prototype.featuresNativeVideoTracks=!1,t.prototype.videojs=e,e.registerTech("chromecast",t)}},46707:e=>{e.exports=class{constructor(){this._el=this._createDOMElement()}_createDOMElement(){var e=this._createElement("div","vjs-tech vjs-tech-chromecast"),t=this._createElement("div","vjs-tech-chromecast-poster"),n=this._createElement("img","vjs-tech-chromecast-poster-img"),r=this._createElement("div","vjs-tech-chromecast-title"),i=this._createElement("div","vjs-tech-chromecast-subtitle"),a=this._createElement("div","vjs-tech-chromecast-title-container");return t.appendChild(n),a.appendChild(r),a.appendChild(i),e.appendChild(a),e.appendChild(t),e}_createElement(e,t){var n=document.createElement(e);return n.className=t,n}getDOMElement(){return this._el}_findPosterEl(){return this._el.querySelector(".vjs-tech-chromecast-poster")}_findPosterImageEl(){return this._el.querySelector(".vjs-tech-chromecast-poster-img")}_findTitleEl(){return this._el.querySelector(".vjs-tech-chromecast-title")}_findSubtitleEl(){return this._el.querySelector(".vjs-tech-chromecast-subtitle")}updatePoster(e){var t=this._findPosterImageEl();this._poster=e||null,e?(t.setAttribute("src",e),t.classList.remove("vjs-tech-chromecast-poster-img-empty")):(t.removeAttribute("src"),t.classList.add("vjs-tech-chromecast-poster-img-empty"))}getPoster(){return this._poster}updateTitle(e){var t=this._findTitleEl();this._title=e,e?(t.innerHTML=e,t.classList.remove("vjs-tech-chromecast-title-empty")):t.classList.add("vjs-tech-chromecast-title-empty")}updateSubtitle(e){var t=this._findSubtitleEl();this._subtitle=e,e?(t.innerHTML=e,t.classList.remove("vjs-tech-chromecast-subtitle-empty")):t.classList.add("vjs-tech-chromecast-subtitle-empty")}}},68977:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LOCAL_STORAGE_KEY:()=>pr,Vhs:()=>hr,VhsHandler:()=>Er,VhsSourceHandler:()=>Sr,emeKeySystems:()=>gr,expandDataUri:()=>br,getAllPsshKeySystemsOptions:()=>yr,setupEmeOptions:()=>_r,simpleTypeFromSourceType:()=>S.t,waitForKeySessionCreation:()=>vr});var r=n(97326),i=n(94578),a=n(89144),s=n.n(a),o=n(58908),u=n.n(o),l=n(80779),d=n(85215),c=n(87462),f=n(80976),h=n(36722),p=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return(0,i.Z)(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(f.Z),m=String.fromCharCode(9),g=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},y=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},v=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}(0,i.Z)(t,e);var n=t.prototype;return n.push=function(e){var t,n,r=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((function(e){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void r.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void r.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=(0,c.Z)(g(t[1]),{type:"tag",tagType:"byterange"}),void r.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=y(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=g(a.BYTERANGE))}r.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=y(t[1]),n.attributes.RESOLUTION){var s=n.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),n.attributes.RESOLUTION=o}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=y(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))r.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=y(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=y(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=y(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(m)),void r.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=y(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=g(n.attributes.BYTERANGE)),void r.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=y(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void r.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=y(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void r.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=y(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void r.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=y(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void r.trigger("data",n);r.trigger("data",{type:"tag",data:e.slice(4)})}}}else r.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,a=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(f.Z),_=function(e){var t={};return Object.keys(e).forEach((function(n){var r;t[(r=n,r.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[n]})),t},T=function(e){var t=e.serverControl,n=e.targetDuration,r=e.partTargetDuration;if(t){var i="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=n&&3*n,u=r&&2*r;n&&!t.hasOwnProperty(a)&&(t[a]=o,this.trigger("info",{message:i+" defaulting HOLD-BACK to targetDuration * 3 ("+o+")."})),o&&t[a]<o&&(this.trigger("warn",{message:i+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+o+")"}),t[a]=o),r&&!t.hasOwnProperty(s)&&(t[s]=3*r,this.trigger("info",{message:i+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[s]+")."})),r&&t[s]<u&&(this.trigger("warn",{message:i+" clamping PART-HOLD-BACK ("+t[s]+") to partTargetDuration * 2 ("+u+")."}),t[s]=u)}},b=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new p,t.parseStream=new v,t.lineStream.pipe(t.parseStream);var n,i,a=(0,r.Z)(t),s=[],o={},u=!1,l=function(){},d={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},f=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var m=0,g=0;return t.on("end",(function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&n&&(o.map=n),!o.key&&i&&(o.key=i),o.timeline||"number"!=typeof f||(o.timeline=f),t.manifest.preloadSegment=o)})),t.parseStream.on("data",(function(e){var t,r;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(e.offset=m)),"offset"in e&&(o.byterange=t,t.offset=e.offset),m=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:(0,h.Z)(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,f=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),i&&(n.key=i)},"stream-inf":function(){this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes?(o.attributes||(o.attributes={}),(0,c.Z)(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||d,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(r={default:/yes/i.test(e.attributes.DEFAULT)}).default?r.autoselect=!0:r.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(r.language=e.attributes.LANGUAGE),e.attributes.URI&&(r.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(r.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(r.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(r.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=r}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){f+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,T.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data},skip:function(){this.manifest.skip=_(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;u=!0;var n=this.manifest.segments.length,r=_(e.attributes);o.parts=o.parts||[],o.parts.push(r),r.byterange&&(r.byterange.hasOwnProperty("offset")||(r.byterange.offset=g),g=r.byterange.offset+r.byterange.length);var i=o.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+i+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=_(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),T.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=_(e.attributes),r=n.type&&"PART"===n.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=r?g:0,r&&(g=n.byterange.offset+n.byterange.length)));var i=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<o.preloadHints.length-1;a++){var s=o.preloadHints[a];s.type&&s.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+i+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+a})}},"rendition-report":function(){var t=_(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,r=["LAST-MSN","URI"];u&&r.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,r)},"part-inf":function(){this.manifest.partInf=_(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),T.call(this,this.manifest)}}[e.tagType]||l).call(a)},uri:function(){o.uri=e.uri,s.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),i&&(o.key=i),o.timeline=f,n&&(o.map=n),g=0,o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(a)})),t}(0,i.Z)(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var r=[];n.forEach((function(e){t.hasOwnProperty(e)||r.push(e)})),r.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+r.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(f.Z),E=n(92260),S=n(8485),w=n(60562),C=n(6723),A=n(3969),I=function(e){return!!e&&"object"==typeof e},k=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return"object"!=typeof n||Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):I(t[r])&&I(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},R=function(e){return Object.keys(e).map((function(t){return e[t]}))},P=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},D=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},O=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},M=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,i=void 0===r?"":r,a=e.range,s=void 0===a?"":a,o=e.indexRange,d=void 0===o?"":o,c={uri:i,resolvedUri:(0,l.Z)(n||"",i)};if(s||d){var f,h=(s||d).split("-"),p=u().BigInt?u().BigInt(h[0]):parseInt(h[0],10),m=u().BigInt?u().BigInt(h[1]):parseInt(h[1],10);p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),m<Number.MAX_SAFE_INTEGER&&"bigint"==typeof m&&(m=Number(m)),"bigint"==typeof(f="bigint"==typeof m||"bigint"==typeof p?u().BigInt(m)-u().BigInt(p)+u().BigInt(1):m-p+1)&&f<Number.MAX_SAFE_INTEGER&&(f=Number(f)),c.byterange={length:f,offset:p}}return c},L=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},N={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration,a=e.periodDuration,s=L(e.endNumber),o=t/r;return"number"==typeof s?{start:0,end:s}:"number"==typeof a?{start:0,end:a/o}:{start:0,end:i/o}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,s=e.duration,o=e.periodStart,u=void 0===o?0:o,l=e.minimumUpdatePeriod,d=void 0===l?0:l,c=e.timeShiftBufferDepth,f=void 0===c?1/0:c,h=L(e.endNumber),p=(t+n)/1e3,m=r+u,g=p+d-m,y=Math.ceil(g*a/s),v=Math.floor((p-m-f)*a/s),_=Math.floor((p-m)*a/s);return{start:Math.max(0,v),end:"number"==typeof h?h:Math.min(y,_)}}},x=function(e){var t=e.type,n=e.duration,r=e.timescale,i=void 0===r?1:r,a=e.periodDuration,s=e.sourceDuration,o=N[t](e),u=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(o.start,o.end).map(function(e){return function(t){var n=e.duration,r=e.timescale,i=void 0===r?1:r,a=e.periodStart,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:n/i,timeline:a,time:t*n}}}(e));if("static"===t){var l=u.length-1,d="number"==typeof a?a:s;u[l].duration=d-n/i*l}return u},F=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,a=e.indexRange,s=void 0===a?"":a,o=e.periodStart,u=e.presentationTime,l=e.number,d=void 0===l?0:l,c=e.duration;if(!t)throw new Error("NO_BASE_URL");var f=M({baseUrl:t,source:r.sourceURL,range:r.range}),h=M({baseUrl:t,source:t,indexRange:s});if(h.map=f,c){var p=x(e);p.length&&(h.duration=p[0].duration,h.timeline=p[0].timeline)}else i&&(h.duration=i,h.timeline=o);return h.presentationTime=u||o,h.number=d,[h]},U=function(e,t,n){var r,i=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,d=t.timescale,c=t.references.filter((function(e){return 1!==e.referenceType})),f=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline,m=p,g=e.mediaSequence||0;r="bigint"==typeof t.firstOffset?u().BigInt(l)+t.firstOffset:l+t.firstOffset;for(var y=0;y<c.length;y++){var v,_=t.references[y],T=_.referencedSize,b=_.subsegmentDuration;v="bigint"==typeof r?r+u().BigInt(T)-u().BigInt(1):r+T-1;var E=F({baseUrl:n,timescale:d,timeline:s,periodStart:p,presentationTime:m,number:g,duration:b,sourceDuration:a,indexRange:r+"-"+v,type:h})[0];i&&(E.map=i),f.push(E),r+="bigint"==typeof r?u().BigInt(T):T,m+=b/d,g++}return e.segments=f,e},j=["AUDIO","SUBTITLES"],B=function(e){return(t=e,n=function(e){return e.timeline},R(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},V=function(e){var t=[];return(0,C.g)(e,j,(function(e,n,r,i){t=t.concat(e.playlists||[])})),t},q=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},H=function(e){return e&&e.uri+"-"+(n="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?u().BigInt(t.offset)+u().BigInt(t.length)-u().BigInt(1):t.offset+t.length-1,t.offset+"-"+n);var t,n},G=function(e){return R(e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");e[r]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments)),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):(e[r]=t,e[r].attributes.timelineStarts=[]);return e[r].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t;return e.discontinuityStarts=(t=e.segments||[],"discontinuity",t.reduce((function(e,t,n){return t.discontinuity&&e.push(n),e}),[])),e}))},z=function(e,t){var n=H(e.sidx),r=n&&t[n]&&t[n].sidx;return r&&U(e,r,e.sidx.resolvedUri),e},W=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=z(e[n],t);return e},K=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a=e.discontinuityStarts,s={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:r};return n.frameRate&&(s.attributes["FRAME-RATE"]=n.frameRate),n.contentProtection&&(s.contentProtection=n.contentProtection),i&&(s.sidx=i),s},Y=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},X=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},Q=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},Z=function(e){return e?Object.keys(e).reduce((function(t,n){var r=e[n];return t.concat(r.playlists)}),[]):[]},J=function(e){var t,n=e.dashPlaylists,r=e.locations,i=e.sidxMapping,a=void 0===i?{}:i,s=e.previousManifest;if(!n.length)return{};var o=n[0].attributes,u=o.sourceDuration,l=o.type,d=o.suggestedPresentationDelay,c=o.minimumUpdatePeriod,f=G(n.filter(Y)).map(K),h=G(n.filter(X)),p=G(n.filter(Q)),m=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),g={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:u,playlists:W(f,a)};c>=0&&(g.minimumUpdatePeriod=1e3*c),r&&(g.locations=r),"dynamic"===l&&(g.suggestedPresentationDelay=d);var y,v,_,T,b,E,S,w=0===g.playlists.length,C=h.length?function(e,t,n){var r;void 0===t&&(t={}),void 0===n&&(n=!1);var i=e.reduce((function(e,i){var a=i.attributes.role&&i.attributes.role.value||"",s=i.attributes.lang||"",o=i.attributes.label||"main";if(s&&!i.attributes.label){var u=a?" ("+a+")":"";o=""+i.attributes.lang+u}e[o]||(e[o]={language:s,autoselect:!0,default:"main"===a,playlists:[],uri:""});var l=z(function(e,t){var n,r=e.attributes,i=e.segments,a=e.sidx,s=e.mediaSequence,o=e.discontinuitySequence,u=e.discontinuityStarts,l={attributes:(n={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===r.type,timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuitySequence:o,discontinuityStarts:u,timelineStarts:r.timelineStarts,mediaSequence:s,segments:i};return r.contentProtection&&(l.contentProtection=r.contentProtection),a&&(l.sidx=a),t&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l}(i,n),t);return e[o].playlists.push(l),void 0===r&&"main"===a&&((r=i).default=!0),e}),{});return r||(i[Object.keys(i)[0]].default=!0),i}(h,a,w):null,A=p.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r=n.attributes.lang||"text";return e[r]||(e[r]={language:r,default:!1,autoselect:!1,playlists:[],uri:""}),e[r].playlists.push(z(function(e){var t,n=e.attributes,r=e.segments,i=e.mediaSequence,a=e.discontinuityStarts,s=e.discontinuitySequence;void 0===r&&(r=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var o=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(o.CODECS=n.codecs),{attributes:o,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:s,mediaSequence:i,segments:r}}(n),t)),e}),{})}(p,a):null,I=f.concat(Z(C),Z(A)),k=I.map((function(e){return e.timelineStarts}));return g.timelineStarts=B(k),y=I,v=g.timelineStarts,y.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=O(v,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),C&&(g.mediaGroups.AUDIO.audio=C),A&&(g.mediaGroups.SUBTITLES.subs=A),m.length&&(g.mediaGroups["CLOSED-CAPTIONS"].cc=m.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,r=t.language;e[r]={autoselect:!1,default:!1,instreamId:n,language:r},t.hasOwnProperty("aspectRatio")&&(e[r].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[r].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[r]["3D"]=t["3D"])})),e):e}),{})),s?(T=(_={oldManifest:s,newManifest:g}).oldManifest,b=_.newManifest,E=T.playlists.concat(V(T)),S=b.playlists.concat(V(b)),b.timelineStarts=B([T.timelineStarts,b.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.timelineStarts;e.newPlaylists.forEach((function(e){e.discontinuitySequence=O(n,(function(t){return t.timeline===e.timeline}));var r=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(r&&!e.sidx){var i=e.segments[0],a=O(r.segments,(function(e){return Math.abs(e.presentationTime-i.presentationTime)<.016666666666666666}));if(-1===a)return q({playlist:e,mediaSequence:r.mediaSequence+r.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!r.segments.length&&e.timeline>r.timeline||r.segments.length&&e.timeline>r.segments[r.segments.length-1].timeline)&&e.discontinuitySequence--);r.segments[a].discontinuity&&!i.discontinuity&&(i.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),q({playlist:e,mediaSequence:r.segments[a].number})}}))}({oldPlaylists:E,newPlaylists:S,timelineStarts:b.timelineStarts}),b):g},$=function(e,t,n){var r=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,s=e.timescale,o=void 0===s?1:s,u=e.periodStart,l=void 0===u?0:u,d=e.minimumUpdatePeriod,c=(r+i)/1e3+(void 0===d?0:d)-(a+l);return Math.ceil((c*o-t)/n)},ee=function(e,t){for(var n=e.type,r=e.minimumUpdatePeriod,i=void 0===r?0:r,a=e.media,s=void 0===a?"":a,o=e.sourceDuration,u=e.timescale,l=void 0===u?1:u,d=e.startNumber,c=void 0===d?1:d,f=e.periodStart,h=[],p=-1,m=0;m<t.length;m++){var g=t[m],y=g.d,v=g.r||0,_=g.t||0;p<0&&(p=_),_&&_>p&&(p=_);var T=void 0;if(v<0){var b=m+1;T=b===t.length?"dynamic"===n&&i>0&&s.indexOf("$Number$")>0?$(e,p,y):(o*l-p)/y:(t[b].t-p)/y}else T=v+1;for(var E=c+h.length+T,S=c+h.length;S<E;)h.push({number:S,duration:y/l,time:p,timeline:f}),p+=y,S++}return h},te=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ne=function(e,t){return e.replace(te,function(e){return function(t,n,r,i){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(i=r?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}}(t))},re=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,i=void 0===r?{sourceURL:"",range:""}:r,a=M({baseUrl:e.baseUrl,source:ne(i.sourceURL,n),range:i.range}),s=function(e,t){return e.duration||t?e.duration?x(e):ee(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return s.map((function(t){n.Number=t.number,n.Time=t.time;var r=ne(e.media||"",n),i=e.timescale||1,s=e.presentationTimeOffset||0,o=e.periodStart+(t.time-s)/i;return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:(0,l.Z)(e.baseUrl||"",r),map:a,number:t.number,presentationTime:o}}))},ie=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r,a=e.periodStart;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var s,o=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,a=M({baseUrl:n,source:i.sourceURL,range:i.range}),s=M({baseUrl:n,source:t.media,range:t.mediaRange});return s.map=a,s}(e,t)}));return n&&(s=x(e)),t&&(s=ee(e,t)),s.map((function(t,n){if(o[n]){var r=o[n],i=e.timescale||1,s=e.presentationTimeOffset||0;return r.timeline=t.timeline,r.duration=t.duration,r.number=t.number,r.presentationTime=a+(t.time-s)/i,r}})).filter((function(e){return e}))},ae=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=re,t=k(r,i.template)):i.base?(n=F,t=k(r,i.base)):i.list&&(n=ie,t=k(r,i.list));var a={attributes:r};if(!n)return a;var s=n(t,i.segmentTimeline);if(t.duration){var o=t,u=o.duration,l=o.timescale,d=void 0===l?1:l;t.duration=u/d}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=s,i.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},se=function(e,t){return D(e.childNodes).filter((function(e){return e.tagName===t}))},oe=function(e){return e.textContent.trim()},ue=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],a=n[2],s=n[3],o=n[4],u=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(s||0)+60*parseFloat(o||0)+parseFloat(u||0)},le={mediaPresentationDuration:function(e){return ue(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return ue(e)},suggestedPresentationDelay:function(e){return ue(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return ue(e)},start:function(e){return ue(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return function(e){return parseFloat(e.split("/").reduce((function(e,t){return e/t})))}(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?ue(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},de=function(e){return e&&e.attributes?D(e.attributes).reduce((function(e,t){var n=le[t.name]||le.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},ce={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},fe=function(e,t){return t.length?P(e.map((function(e){return t.map((function(t){return(0,l.Z)(e,oe(t))}))}))):e},he=function(e){var t=se(e,"SegmentTemplate")[0],n=se(e,"SegmentList")[0],r=n&&se(n,"SegmentURL").map((function(e){return k({tag:"SegmentURL"},de(e))})),i=se(e,"SegmentBase")[0],a=n||t,s=a&&se(a,"SegmentTimeline")[0],o=n||i||t,u=o&&se(o,"Initialization")[0],l=t&&de(t);l&&u?l.initialization=u&&de(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var d={template:l,segmentTimeline:s&&se(s,"S").map((function(e){return de(e)})),list:n&&k(de(n),{segmentUrls:r,initialization:de(u)}),base:i&&k(de(i),{initialization:de(u)})};return Object.keys(d).forEach((function(e){d[e]||delete d[e]})),d},pe=function(e,t){return function(n,r){var i=fe(t,se(n.node,"BaseURL")),a=k(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(a.periodDuration=n.attributes.duration);var s=se(n.node,"AdaptationSet"),o=he(n.node);return P(s.map(function(e,t,n){return function(r){var i,a=de(r),s=fe(t,se(r,"BaseURL")),o=se(r,"Role")[0],u={role:de(o)},l=k(e,a,u),d=se(r,"Accessibility")[0],c="urn:scte:dash:cc:cea-608:2015"===(i=de(d)).schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var r=e.split("=");t=r[0],n=r[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===i.schemeIdUri?("string"!=typeof i.value?[]:i.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var n=e.split("="),r=n[0],i=n[1],a=void 0===i?"":i;t.channel=r,t.language=e,a.split(",").forEach((function(e){var n=e.split(":"),r=n[0],i=n[1];"lang"===r?t.language=i:"er"===r?t.easyReader=Number(i):"war"===r?t.aspectRatio=Number(i):"3D"===r&&(t["3D"]=Number(i))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;c&&(l=k(l,{captionServices:c}));var f=se(r,"Label")[0];if(f&&f.childNodes.length){var p=f.childNodes[0].nodeValue.trim();l=k(l,{label:p})}var m=se(r,"ContentProtection").reduce((function(e,t){var n=de(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var r=ce[n.schemeIdUri];if(r){e[r]={attributes:n};var i=se(t,"cenc:pssh")[0];if(i){var a=oe(i);e[r].pssh=a&&(0,h.Z)(a)}}return e}),{});Object.keys(m).length&&(l=k(l,{contentProtection:m}));var g=he(r),y=se(r,"Representation"),v=k(n,g);return P(y.map(function(e,t,n){return function(r){var i=se(r,"BaseURL"),a=fe(t,i),s=k(e,de(r)),o=he(r);return a.map((function(e){return{segmentInfo:k(n,o),attributes:k(s,{baseUrl:e})}}))}}(l,s,v)))}}(a,i,o)))}},me=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,n,r=new A.DOMParser;try{n=(t=r.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},ge=n(84221),ye=n.n(ge),ve=n(68925),_e=n(47530),Te=n(51489),be=l.Z,Ee=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},Se=function(e){return d.default.log.debug?d.default.log.debug.bind(d.default,"VHS:",e+" >"):function(){}},we=1/30,Ce=.1,Ae=function(e,t){var n,r=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return d.default.createTimeRanges(r)},Ie=function(e,t){return Ae(e,(function(e,n){return e-Ce<=t&&n+Ce>=t}))},ke=function(e,t){return Ae(e,(function(e){return e-we>=t}))},Re=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Pe=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},De=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},Oe=function(e,t){var n=0;if(!e||!e.length)return n;for(var r=0;r<e.length;r++){var i=e.start(r),a=e.end(r);t>a||(n+=t>i&&t<=a?a-t:a-i)}return n},Me=d.default.createTimeRange,Le=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},Ne=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(r,i){e.push({duration:r.duration,segmentIndex:n,partIndex:i,part:r,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},xe=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Fe=function(e){var t=e.preloadSegment;if(t){var n=t.parts;return(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0)+(n&&n.length?n.length:0)}},Ue=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=xe(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},je=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=Le(e,i),void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;var i=function(e,t){for(var n,r=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(n=e.segments[i]).start)return{result:n.start-r,precise:!0};if(r+=Le(e,n),void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},Be=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return u()[1/0]}return je(e,t,n)},Ve=function(e){var t=e.defaultDuration,n=e.durationList,r=e.startIndex,i=e.endIndex,a=0;if(r>i){var s=[i,r];r=s[0],i=s[1]}if(r<0){for(var o=r;o<Math.min(0,i);o++)a+=t;r=0}for(var u=r;u<i;u++)a+=n[u].duration;return a},qe=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return Be(e);if(null===t)return null;t=t||0;var i=je(e,e.mediaSequence+e.segments.length,t);return n&&(i-=r="number"==typeof r?r:Ue(null,e)),Math.max(0,i)},He=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Ge=function(e){return e.excludeUntil&&e.excludeUntil===1/0},ze=function(e){var t=He(e);return!e.disabled&&!t},We=function(e,t){return t.attributes&&t.attributes[e]},Ke=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!ze(e)&&(e.attributes.BANDWIDTH||0)<n})).length},Ye=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},Xe=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var i in n){for(var a in n[i])if(r=t(n[i][a]))break;if(r)break}return!!r},Qe=function(e){if(!e||!e.playlists||!e.playlists.length)return Xe(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],r=n.attributes&&n.attributes.CODECS;return r&&r.split(",").every((function(e){return(0,E.KL)(e)}))||Xe(e,(function(e){return Ye(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var r=t(n);if("continue"!==r&&"object"==typeof r)return r.v}return!0},Ze={liveEdgeDelay:Ue,duration:Be,seekable:function(e,t,n){var r=t||0,i=qe(e,t,!0,n);return null===i?Me():Me(r,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,r=e.startingSegmentIndex,i=e.startingPartIndex,a=e.startTime,s=e.experimentalExactManifestTimings,o=n-a,u=Ne(t),l=0,d=0;d<u.length;d++){var c=u[d];if(r===c.segmentIndex&&("number"!=typeof i||"number"!=typeof c.partIndex||i===c.partIndex)){l=d;break}}if(o<0){if(l>0)for(var f=l-1;f>=0;f--){var h=u[f];if(o+=h.duration,s){if(o<0)continue}else if(o+we<=0)continue;return{partIndex:h.partIndex,segmentIndex:h.segmentIndex,startTime:a-Ve({defaultDuration:t.targetDuration,durationList:u,startIndex:l,endIndex:f})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n}}if(l<0){for(var p=l;p<0;p++)if((o-=t.targetDuration)<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n};l=0}for(var m=l;m<u.length;m++){var g=u[m];if(o-=g.duration,s){if(o>0)continue}else if(o-we>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:a+Ve({defaultDuration:t.targetDuration,durationList:u,startIndex:l,endIndex:m})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:n}},isEnabled:ze,isDisabled:function(e){return e.disabled},isBlacklisted:He,isIncompatible:Ge,playlistEnd:qe,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:We,estimateSegmentRequestTime:function(e,t,n,r){return void 0===r&&(r=0),We("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:Ke,isAudioOnly:Qe,playlistMatch:Ye,segmentDurationWithParts:Le},Je=d.default.log,$e=function(e,t){return e+"-"+t},et=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var a=e.mediaGroups[n][r][i];t(a,n,r,i)}}))},tt=function(e){var t=e.playlist,n=e.uri,r=e.id;t.id=r,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},nt=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var r="placeholder-uri-"+n;e.playlists[n].uri=r}var i=Qe(e);et(e,(function(t,n,r,a){var s="placeholder-uri-"+n+"-"+r+"-"+a;if(!t.playlists||!t.playlists.length){if(i&&"AUDIO"===n&&!t.uri)for(var o=0;o<e.playlists.length;o++){var u=e.playlists[o];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===r)return}t.playlists=[(0,c.Z)({},t)]}t.playlists.forEach((function(t,n){var r=$e(n,s);t.uri?t.resolvedUri=t.resolvedUri||be(e.uri,t.uri):(t.uri=0===n?s:r,t.resolvedUri=t.uri),t.id=t.id||r,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];tt({playlist:n,id:$e(t,n.uri)}),n.resolvedUri=be(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||Je.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){et(e,(function(t){t.uri&&(t.resolvedUri=be(e.uri,t.uri))}))}(e)},rt=d.default.mergeOptions,it=d.default.EventTarget,at=function(e,t){if(!e)return t;var n=rt(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(n.parts[r]=rt(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},st=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=be(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=be(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=be(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=be(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=be(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=be(t,e.uri))}))},ot=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var r=0;r<n.preloadHints.length;r++)if("MAP"===n.preloadHints[r].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},ut=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},lt=function(e,t,n){void 0===n&&(n=ut);var r=rt(e,{}),i=r.playlists[t.id];if(!i)return null;if(n(i,t))return null;t.segments=ot(t);var a=rt(i,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(var s=0;s<t.skip.skippedSegments;s++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var r=e.slice(),i=t.slice();n=n||0;for(var a,s=[],o=0;o<i.length;o++){var u=r[o+n],l=i[o];u?(a=u.map||a,s.push(at(u,l))):(a&&!l.map&&(l.map=a),s.push(l))}return s}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}a.segments.forEach((function(e){st(e,a.resolvedUri)}));for(var o=0;o<r.playlists.length;o++)r.playlists[o].id===t.id&&(r.playlists[o]=a);return r.playlists[t.id]=a,r.playlists[t.uri]=a,et(e,(function(e,n,r,i){if(e.playlists)for(var s=0;s<e.playlists.length;s++)t.id===e.playlists[s].id&&(e.playlists[s]=a)})),r},dt=function(e,t){var n=e.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],a=i&&i.duration||r&&r.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},ct=function(e){function t(t,n,i){var a;if(void 0===i&&(i={}),a=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");a.logger_=Se("PlaylistLoader");var s=i,o=s.withCredentials,u=void 0!==o&&o,l=s.handleManifestRedirects,c=void 0!==l&&l;a.src=t,a.vhs_=n,a.withCredentials=u,a.handleManifestRedirects=c;var f=n.options_;return a.customTagParsers=f&&f.customTagParsers||[],a.customTagMappers=f&&f.customTagMappers||[],a.experimentalLLHLS=f&&f.experimentalLLHLS||!1,d.default.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind((0,r.Z)(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}(0,i.Z)(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=be(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var r=t.preloadSegment,i=t.mediaSequence+t.segments.length;if(r){var a=r.parts||[],s=Fe(t)-1;s>-1&&s!==a.length-1&&(n._HLS_part=s),(s>-1||a.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var o=new(u().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&o.searchParams.set(e,n[e])})),e=o.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var r=t.uri,i=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+r+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,r=e.manifestString,i=e.customTagParsers,a=void 0===i?[]:i,s=e.customTagMappers,o=void 0===s?[]:s,u=e.experimentalLLHLS,l=new b;t&&l.on("warn",t),n&&l.on("info",n),a.forEach((function(e){return l.addParser(e)})),o.forEach((function(e){return l.addTagMapper(e)})),l.push(r),l.end();var d=l.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){d.hasOwnProperty(e)&&delete d[e]})),d.segments&&d.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!d.targetDuration){var c=10;d.segments&&d.segments.length&&(c=d.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+c),d.targetDuration=c}var f=xe(d);if(f.length&&!d.partTargetDuration){var h=f.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+h),Je.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),d.partTargetDuration=h}return d}({onwarn:function(e){var r=e.message;return t.logger_("m3u8-parser warn for "+n+": "+r)},oninfo:function(e){var r=e.message;return t.logger_("m3u8-parser info for "+n+": "+r)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,r=e.url,i=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:r,manifestString:t});a.lastRequest=Date.now(),tt({playlist:a,uri:r,id:i});var s=lt(this.master,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,s?(this.master=s,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(dt(this.media(),!!s)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),u().clearTimeout(this.mediaUpdateTimeout),u().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(u().clearTimeout(this.finalRenditionTimeout),t){var r=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=u().setTimeout(this.media.bind(this,e,!1),r)}else{var i=this.state,a=!this.media_||e.id!==this.media_.id,s=this.master.playlists[e.id];if(s&&s.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(dt(e,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,r){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=Ee(n.handleManifestRedirects,e.resolvedUri,r),t)return n.playlistRequestError(n.request,e,i);n.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===i?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=u().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=u().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=u().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=Ee(e.handleManifestRedirects,e.src,n);var r=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(r)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,nt(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=ot(e),e.segments.forEach((function(t){st(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||u().location.href;this.master=function(e,t){var n=$e(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:u().location.href,resolvedUri:u().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(it),ft=d.default.xhr,ht=d.default.mergeOptions,pt=function(e,t,n,r){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},mt=function(){var e=function e(t,n){t=ht({timeout:45e3},t);var r=e.beforeRequest||d.default.Vhs.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(t);i&&(t=i)}var a=(!0===d.default.Vhs.xhr.original?ft:d.default.Vhs.xhr)(t,(function(e,t){return pt(a,e,t,n)})),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},gt=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?u().BigInt(t.offset)+u().BigInt(t.length)-u().BigInt(1):t.offset+t.length-1)),n},yt=function(e,t){return e.start(t)+"-"+e.end(t)},vt=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},_t=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Tt=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];(0,w.Au)(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},bt=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Et=function(e){return e.resolvedUri},St=function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",i=0;i<t.length/n;i++)r+=t.slice(i*n,i*n+n).map(vt).join("")+" "+t.slice(i*n,i*n+n).map(_t).join("")+"\n";return r},wt=Object.freeze({__proto__:null,createTransferableMessage:Tt,initSegmentId:bt,segmentKeyId:Et,hexDump:St,tagDump:function(e){var t=e.bytes;return St(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=yt(e,t)+" ";return n}}),Ct=function e(t){var n=t.programTime,r=t.playlist,i=t.retryCount,a=void 0===i?2:i,s=t.seekTo,o=t.pauseAfterSeek,u=void 0===o||o,l=t.tech,d=t.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!s)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!l.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(r))return d({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var c=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(n<r.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(r=t.segments[i],!(n<t.segments[i+1].dateTimeObject));i++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return n>new Date(o.getTime()+1e3*u)?null:(n>o&&(r=s),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Ze.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!c)return d({message:n+" was not found in the stream"});var f=c.segment,h=function(e,t){var n,r;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3}(f.dateTimeObject,n);if("estimate"===c.type)return 0===a?d({message:n+" is not buffered yet. Try again"}):(s(c.estimatedStart+h),void l.one("seeked",(function(){e({programTime:n,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:d})})));var p=f.start+h;l.one("seeked",(function(){return d(null,l.currentTime())})),u&&l.pause(),s(p)},At=function(e,t){if(4===e.readyState)return t()},It=d.default.EventTarget,kt=d.default.mergeOptions,Rt=function(e,t){if(!ut(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var r=e.segments[n],i=t.segments[n];if(r.uri!==i.uri)return!1;if(r.byterange||i.byterange){var a=r.byterange,s=i.byterange;if(a&&!s||!a&&s)return!1;if(a.offset!==s.offset||a.length!==s.length)return!1}}return!0},Pt=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Dt=function(e,t){var n={};for(var r in e){var i=e[r].sidx;if(i){var a=H(i);if(!t[a])break;var s=t[a].sidxInfo;Pt(s,i)&&(n[a]=t[a])}}return n},Ot=function(e){function t(t,n,i,a){var s;void 0===i&&(i={}),(s=e.call(this)||this).masterPlaylistLoader_=a||(0,r.Z)(s),a||(s.isMaster_=!0);var o=i,u=o.withCredentials,l=void 0!==u&&u,d=o.handleManifestRedirects,c=void 0!==d&&d;if(s.vhs_=n,s.withCredentials=l,s.handleManifestRedirects=c,!t)throw new Error("A non-empty playlist URL or object is required");return s.on("minimumUpdatePeriod",(function(){s.refreshXml_()})),s.on("mediaupdatetimeout",(function(){s.refreshMedia_(s.media().id)})),s.state="HAVE_NOTHING",s.loadedPlaylists_={},s.logger_=Se("DashPlaylistLoader"),s.isMaster_?(s.masterPlaylistLoader_.srcUrl=t,s.masterPlaylistLoader_.sidxMapping_={}):s.childPlaylist_=t,s}(0,i.Z)(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var r=this,i=e.sidx&&H(e.sidx);if(e.sidx&&i&&!this.masterPlaylistLoader_.sidxMapping_[i]){var a=Ee(this.handleManifestRedirects,e.sidx.resolvedUri),s=function(a,s){if(!r.requestErrored_(a,s,t)){var o,u=r.masterPlaylistLoader_.sidxMapping_;try{o=ye()((0,w.Ki)(s.response).subarray(8))}catch(e){return void r.requestErrored_(e,s,t)}return u[i]={sidxInfo:e.sidx,sidx:o},U(e,o,e.sidx.resolvedUri),n(!0)}};this.request=function(e,t,n){var r,i=[],a=!1,s=function(e,t,r,i){return t.abort(),a=!0,n(e,t,r,i)},o=function(e,t){if(!a){if(e)return s(e,t,"",i);var n=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=(0,w.lx)(i,(0,w.qX)(n,!0)),r=r||(0,ve.c)(i),i.length<10||r&&i.length<r+2)return At(t,(function(){return s(e,t,"",i)}));var o=(0,_e.Xm)(i);return"ts"===o&&i.length<188||!o&&i.length<376?At(t,(function(){return s(e,t,"",i)})):s(null,t,o,i)}},u={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,pt(e,null,{statusCode:e.status},o)}))}},l=t(u,(function(e,t){return pt(l,e,t,o)}));return l}(a,this.vhs_.xhr,(function(t,n,i,o){if(t)return s(t,n);if(!i||"mp4"!==i)return s({status:n.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var u=e.sidx.byterange,l=u.offset,d=u.length;if(o.length>=d+l)return s(t,{response:o.subarray(l,l+d),status:n.status,uri:n.uri});r.request=r.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:gt({byterange:e.sidx.byterange})},s)}))}else this.mediaRequest_=u().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},u().clearTimeout(this.minimumUpdatePeriodTimeout_),u().clearTimeout(this.mediaRequest_),u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(r){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(u().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;u().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=u().setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=u().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,r){if(!t.requestErrored_(n,r)){var i=r.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?t.masterLoaded_=Date.parse(r.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=Ee(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,r),i?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(r,i)}))):e(r,i)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t,n=this,r=(t=this.masterPlaylistLoader_.masterXml_,function(e){var t=se(e,"UTCTiming")[0];if(!t)return null;var n=de(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(me(t)));return null===r?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===r.method?(this.masterPlaylistLoader_.clientOffset_=r.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:be(this.masterPlaylistLoader_.srcUrl,r.value),method:r.method,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(t)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var a;a="HEAD"===r.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):n.masterLoaded_:Date.parse(i.responseText),n.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,n,r=this.masterPlaylistLoader_.master,i=(n=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,i=void 0===r?"":r,a=n.NOW,s=void 0===a?Date.now():a,o=n.clientOffset,u=void 0===o?0:o,l=se(e,"Period");if(!l.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var d=se(e,"Location"),c=de(e),f=fe([i],se(e,"BaseURL"));c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=u,d.length&&(c.locations=d.map(oe));var h=[];return l.forEach((function(e,t){var n=de(e),r=h[t-1];n.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes,r=e.mpdType;return"number"==typeof t.start?t.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==r?null:0}({attributes:n,priorPeriodAttributes:r?r.attributes:null,mpdType:c.type}),h.push({node:e,attributes:n})})),{locations:c.locations,representationInfo:P(h.map(pe(c,f)))}}(me(e),t),r=n.representationInfo.map(ae);return J({dashPlaylists:r,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})}((e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:r}).masterXml,{manifestUri:t=e.srcUrl,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest}),nt(n,t),n);r&&(i=function(e,t,n){for(var r=!0,i=kt(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var s=t.playlists[a];if(s.sidx){var o=H(s.sidx);n&&n[o]&&n[o].sidx&&U(s,n[o].sidx,s.sidx.resolvedUri)}var u=lt(i,s,Rt);u&&(i=u,r=!1)}return et(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=lt(i,e.playlists[0],Rt);o&&((i=o).mediaGroups[t][n][a].playlists[0]=i.playlists[s],r=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:i}(r,i,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=i||r;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!r||i&&i.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(i)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(u().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=u().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var r,i,a;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(r=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,a=Dt(r.playlists,i),et(r,(function(e,t,n,r){if(e.playlists&&e.playlists.length){var s=e.playlists;a=kt(a,Dt(s,i))}})),a),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,r=!this.media_||this.media_!==n[e];r?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=u().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),dt(t.media(),Boolean(r))))}(),this.trigger("loadedplaylist")},t}(It),Mt={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Lt=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Nt=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=Lt(new Worker(t));n.objURL=t;var r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},xt=function(e){return"var browserWorkerPolyFill = "+Lt.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},Ft=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Ut=xt(Ft((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,r,i,a,s,o,u,l,d,c,f,h,p,m,g,y,v,_,T,b,E,S,w,C,A,I,k,R,P,D,O,M,L,N,x,F,U,j,B,V,q=e,H=Math.pow(2,32),G={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*H+n.getUint32(4)},MAX_UINT32:H},z=G.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),k=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),R={video:I,audio:k},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),L=M,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),x=M,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return t(S.dinf,t(S.dref,O))},i=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(S.hdlr,R[e])},m=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},p=function(e){return t(S.mdia,m(e),g(e.type),o(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,P):t(S.smhd,D),r(),v(e))},u=function(e,n){for(var r=[],i=n.length;i--;)r[i]=T(n[i]);return t.apply(null,[S.moof,s(e)].concat(r))},l=function(e){for(var n=e.length,r=[];n--;)r[n]=f(e[n]);return t.apply(null,[S.moov,c(4294967295)].concat(r).concat(d(e)))},d=function(e){for(var n=e.length,r=[];n--;)r[n]=b(e[n]);return t.apply(null,[S.mvex].concat(r))},c=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},y=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},v=function(e){return t(S.stbl,_(e),t(S.stts,x),t(S.stsc,L),t(S.stsz,N),t(S.stco,M))},_=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?F(e):U(e))},F=function(e){var n,r,i=e.sps||[],a=e.pps||[],s=[],o=[];for(n=0;n<i.length;n++)s.push((65280&i[n].byteLength)>>>8),s.push(255&i[n].byteLength),s=s.concat(Array.prototype.slice.call(i[n]));for(n=0;n<a.length;n++)o.push((65280&a[n].byteLength)>>>8),o.push(255&a[n].byteLength),o=o.concat(Array.prototype.slice.call(a[n]));if(r=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],s,[a.length],o))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var u=e.sarRatio[0],l=e.sarRatio[1];r.push(t(S.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return t.apply(null,r)},U=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},h=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},T=function(e){var n,r,i,a,s,o;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/z),o=Math.floor(e.baseMediaDecodeTime%z),r=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(i=E(e,92),t(S.traf,n,r,i)):(a=y(e),i=E(e,a.length+92),t(S.traf,n,r,i,a))},f=function(e){return e.duration=e.duration||4294967295,t(S.trak,h(e),p(e))},b=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},V=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,n){var r,i,a,s,o,u;for(n+=20+16*(s=e.samples||[]).length,a=V(s,n),(i=new Uint8Array(a.length+16*s.length)).set(a),r=a.length,u=0;u<s.length;u++)o=s[u],i[r++]=(4278190080&o.duration)>>>24,i[r++]=(16711680&o.duration)>>>16,i[r++]=(65280&o.duration)>>>8,i[r++]=255&o.duration,i[r++]=(4278190080&o.size)>>>24,i[r++]=(16711680&o.size)>>>16,i[r++]=(65280&o.size)>>>8,i[r++]=255&o.size,i[r++]=o.flags.isLeading<<2|o.flags.dependsOn,i[r++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,i[r++]=61440&o.flags.degradationPriority,i[r++]=15&o.flags.degradationPriority,i[r++]=(4278190080&o.compositionTimeOffset)>>>24,i[r++]=(16711680&o.compositionTimeOffset)>>>16,i[r++]=(65280&o.compositionTimeOffset)>>>8,i[r++]=255&o.compositionTimeOffset;return t(S.trun,i)},j=function(e,n){var r,i,a,s,o,u;for(n+=20+8*(s=e.samples||[]).length,a=V(s,n),(r=new Uint8Array(a.length+8*s.length)).set(a),i=a.length,u=0;u<s.length;u++)o=s[u],r[i++]=(4278190080&o.duration)>>>24,r[i++]=(16711680&o.duration)>>>16,r[i++]=(65280&o.duration)>>>8,r[i++]=255&o.duration,r[i++]=(4278190080&o.size)>>>24,r[i++]=(16711680&o.size)>>>16,r[i++]=(65280&o.size)>>>8,r[i++]=255&o.size;return t(S.trun,r)},E=function(e,t){return"audio"===e.type?j(e,t):B(e,t)},a=function(){return t(S.ftyp,w,C,w,A)};var W,K,Y,X,Q,Z,J,$,ee=function(e){return t(S.mdat,e)},te=u,ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},re=[33,16,5,32,164,27],ie=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae=function(e){for(var t=[];e--;)t.push(0);return t},se=9e4;Z=function(e,t){return K(Q(e,t))},J=function(e,t){return Y(X(e),t)},$=function(e,t,n){return X(n?e:e-t)};var oe=se,ue=K=function(e){return e*se},le=(Y=function(e,t){return e*t},X=function(e){return e/se}),de=(Q=function(e,t){return e/t},Z),ce=J,fe=$,he=function(e,t,n,r){var i,a,s,o,u,l=0,d=0,c=0;if(t.length&&(i=de(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(oe/(e.samplerate/1024)),n&&r&&(l=i-Math.max(n,r),c=(d=Math.floor(l/a))*a),!(d<1||c>45e3))){for((s=function(){if(!W){var e={96e3:[re,[227,64],ae(154),[56]],88200:[re,[231],ae(170),[56]],64e3:[re,[248,192],ae(240),[56]],48e3:[re,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[re,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[re,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[ie,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[ie,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[ie,ae(268),[3,121,16],ae(47),[7]]};t=e,W=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return W}()[e.samplerate])||(s=t[0].data),o=0;o<d;o++)u=t[0],t.splice(0,0,{data:s,dts:u.dts-a,pts:u.pts-a});return e.baseMediaDecodeTime-=Math.floor(ce(c,e.samplerate)),c}},pe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},me=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},ge=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ye=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ie(0,0),new Ie(0,1),new Ie(1,0),new Ie(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ee({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ye.prototype=new q).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=function(e,t){var n,r,i,a,s=[];if(!(64&t[0]))return s;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ye.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ye.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ye.prototype.flush=function(){return this.flushStream("flush")},ye.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ye.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ye.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ye.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ye.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ye.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ye.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ve={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},_e=function(e){return 32<=e&&e<=127||160<=e&&e<=255},Te=function(e){this.windowNum=e,this.reset()};Te.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Te.prototype.getText=function(){return this.rows.join("\n")},Te.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Te.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Te.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Te.prototype.addText=function(e){this.rows[this.rowIdx]+=e},Te.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var be=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new Te(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};be.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new Te(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},be.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},be.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var Ee=function e(t){t=t||{},e.prototype.init.call(this);var n,r=this,i=t.captionServices||{},a={};Object.keys(i).forEach((function(e){n=i[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(r.new708Packet(),r.add708Bytes(e)):(null===r.current708Packet&&r.new708Packet(),r.add708Bytes(e))}};Ee.prototype=new q,Ee.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ee.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},Ee.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,a=t[i++];for(e.seq=a>>6,e.sizeCode=63&a;i<t.length;i++)r=31&(a=t[i++]),7==(n=a>>5)&&r>0&&(n=a=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},Ee.prototype.pushServiceBlock=function(e,t,n){var r,i=t,a=this.current708Packet.data,s=this.services[e];for(s||(s=this.initService(e,i));i<t+n&&i<a.length;i++)r=a[i],_e(r)?i=this.handleText(i,s):24===r?i=this.multiByteCharacter(i,s):16===r?i=this.extendedCommands(i,s):128<=r&&r<=135?i=this.setCurrentWindow(i,s):152<=r&&r<=159?i=this.defineWindow(i,s):136===r?i=this.clearWindows(i,s):140===r?i=this.deleteWindows(i,s):137===r?i=this.displayWindows(i,s):138===r?i=this.hideWindows(i,s):139===r?i=this.toggleWindows(i,s):151===r?i=this.setWindowAttributes(i,s):144===r?i=this.setPenAttributes(i,s):145===r?i=this.setPenColor(i,s):146===r?i=this.setPenLocation(i,s):143===r?s=this.reset(i,s):8===r?s.currentWindow.backspace():12===r?s.currentWindow.clearText():13===r?s.currentWindow.pendingNewLine=!0:14===r?s.currentWindow.clearText():141===r&&i++},Ee.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return _e(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},Ee.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Ee.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new be(e,r,i),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},Ee.prototype.handleText=function(e,t,n){var r,i,a,s,o=n&&n.isExtended,u=n&&n.isMultiByte,l=this.current708Packet.data,d=o?4096:0,c=l[e],f=l[e+1],h=t.currentWindow;return t.textDecoder_&&!o?(u?(i=[c,f],e++):i=[c],r=t.textDecoder_.decode(new Uint8Array(i))):(s=ve[a=d|c]||a,r=4096&a&&a===s?"":String.fromCharCode(s)),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(r),e},Ee.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return _e(r)&&_e(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Ee.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},Ee.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var a=t.currentWindow;return r=n[++e],a.visible=(32&r)>>5,a.rowLock=(16&r)>>4,a.columnLock=(8&r)>>3,a.priority=7&r,r=n[++e],a.relativePositioning=(128&r)>>7,a.anchorVertical=127&r,r=n[++e],a.anchorHorizontal=r,r=n[++e],a.anchorPoint=(240&r)>>4,a.rowCount=15&r,r=n[++e],a.columnCount=63&r,r=n[++e],a.windowStyle=(56&r)>>3,a.penStyle=7&r,a.virtualRowCount=a.rowCount+1,e},Ee.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},Ee.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},Ee.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Ee.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},Ee.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},Ee.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},Ee.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},Ee.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},Ee.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},Ee.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},Ee.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},Ee.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},we=function(e){return null===e?"":(e=Se[e]||e,String.fromCharCode(e))},Ce=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ae=function(){for(var e=[],t=15;t--;)e.push("");return e},Ie=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ae();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ae();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ae()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=we((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=we((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var s=Ce.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=we(r),a+=we(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ie.prototype=new q,Ie.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ie.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ae(),this.nonDisplayed_=Ae(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ie.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ie.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ie.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ie.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ie.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ie.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ie.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ie.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ie.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ae(),this.displayed_=Ae()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ie.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ie.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ie.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ie.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ie.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ie.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var ke={CaptionStream:ye,Cea608Stream:Ie,Cea708Stream:Ee},Re={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pe="shared",De=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Oe=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||Pe,this.push=function(e){this.type_!==Pe&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=De(e.dts,r),e.pts=De(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Oe.prototype=new q;var Me,Le=Oe,Ne=De,xe=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Fe=function(e,t,n){return decodeURIComponent(xe(e,t,n))},Ue=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},je={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.value=Fe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.url=Fe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(xe(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Me=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],a=0;if(Me.prototype.init.call(this),this.dispatchType=Re.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,s,o,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=Ue(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<r;)t.data.set(i[0].data.subarray(0,r-u),u),u+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=Ue(t.data.subarray(10,14)),r-=Ue(t.data.subarray(16,20)));do{if((s=Ue(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((o={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+s+10)}).key=o.id,je[o.id]&&(je[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var l=o.data,d=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;d*=4,d+=3&l[7],o.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)}t.frames.push(o),n+=10,n+=s}while(n<r);this.trigger("data",t)}}}).prototype=new q;var Be,Ve,qe,He=Me,Ge=Le,ze=188;(Be=function(){var e=new Uint8Array(ze),t=0;Be.prototype.init.call(this),this.push=function(n){var r,i=0,a=ze;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=ze,a+=ze);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===ze&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new q,(Ve=function(){var e,t,n,r;Ve.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],s=(31&e[i+1])<<8|e[i+2];a===Re.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=s:a===Re.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=s:a===Re.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][s]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Re.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Re.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new q,Ve.STREAM_TYPES={h264:27,adts:15},qe=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},a={data:[],size:0},s=function(e,n,r){var i,a,s=new Uint8Array(e.size),o={type:n},u=0,l=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,u=0;u<e.data.length;u++)a=e.data[u],s.set(a.data,l),l+=a.data.byteLength;var d,c,f,h;c=o,h=(d=s)[0]<<16|d[1]<<8|d[2],c.data=new Uint8Array,1===h&&(c.packetLength=6+(d[4]<<8|d[5]),c.dataAlignmentIndicator=0!=(4&d[6]),192&(f=d[7])&&(c.pts=(14&d[9])<<27|(255&d[10])<<20|(254&d[11])<<12|(255&d[12])<<5|(254&d[13])>>>3,c.pts*=4,c.pts+=(6&d[13])>>>1,c.dts=c.pts,64&f&&(c.dts=(14&d[14])<<27|(255&d[15])<<20|(254&d[16])<<12|(255&d[17])<<5|(254&d[18])>>>3,c.dts*=4,c.dts+=(6&d[18])>>>1)),c.data=d.subarray(9+d[8])),i="video"===n||o.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",o)}};qe.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case Re.H264_STREAM_TYPE:e=r,t="video";break;case Re.ADTS_STREAM_TYPE:e=i,t="audio";break;case Re.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=o.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[o.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(r,"video"),s(i,"audio"),s(a,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}},qe.prototype=new q;var We={PAT_PID:0,MP2T_PACKET_LENGTH:ze,TransportPacketStream:Be,TransportParseStream:Ve,ElementaryStream:qe,TimestampRolloverStream:Ge,CaptionStream:ke.CaptionStream,Cea608Stream:ke.Cea608Stream,Cea708Stream:ke.Cea708Stream,MetadataStream:He};for(var Ke in Re)Re.hasOwnProperty(Ke)&&(We[Ke]=Re[Ke]);var Ye,Xe=We,Qe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ye=function(e){var t,n=0;Ye.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(r){var i,a,s,o,u,l=0;if(e||(n=0),"audio"===r.type){var d;for(t&&t.length?(s=t,(t=new Uint8Array(s.byteLength+r.data.byteLength)).set(s),t.set(r.data,s.byteLength)):t=r.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof d&&(this.skipWarn_(d,l),d=null),a=2*(1&~t[l+1]),i=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,u=9e4*(o=1024*(1+(3&t[l+6])))/Qe[(60&t[l+2])>>>2],t.byteLength-l<i)break;this.trigger("data",{pts:r.pts+n*u,dts:r.dts+n*u,sampleCount:o,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:Qe[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,l+i)}),n++,l+=i}else"number"!=typeof d&&(d=l),l++;"number"==typeof d&&(this.skipWarn_(d,l),d=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new q;var Ze,Je,$e,et=Ye,tt=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(i,i+s)),n=new DataView(a.buffer).getUint32(0),r=8*s,t-=s},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Je=function(){var e,t,n=0;Je.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new q,$e={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ze=function(){var e,t,n,r,i,a,s,o=new Je;Ze.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:n,dts:r,data:s,nalUnitTypeCode:31&s[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=i(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=i(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},a=function(e){var t,n,r,i,a,o,u,l,d,c,f,h,p=0,m=0,g=0,y=0,v=[1,1];if(n=(t=new tt(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),$e[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(f=3!==a?8:12,h=0;h<f;h++)t.readBoolean()&&s(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),h=0;h<u;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(l+1)-2*p-2*m,height:(2-c)*(d+1)*16-2*g-2*y,sarRatio:v}}},Ze.prototype=new q;var nt,rt={H264Stream:Ze,NalByteStream:Je},it=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],at=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},st=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=at(t,n))},ot=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},ut={isLikelyAacData:function(e){var t=st(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:at,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return it[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=ot(e.subarray(10,14)));do{if((n=ot(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){var a=unescape(function(e,t,n){var r,i="";for(r=0;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i));if("com.apple.streaming.transportStreamTimestamp"===a){var s=r.subarray(i+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(o*=4)+(3&s[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(nt=function(){var e=new Uint8Array,t=0;nt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,s,o=0,u=0;for(e.length?(s=e.length,(e=new Uint8Array(n.byteLength+s)).set(e.subarray(0,s)),e.set(n,s)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(u+(o=ut.parseAdtsSize(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+o),pts:t,dts:t},this.trigger("data",a),u+=o}else{if(e.length-u<10)break;if(u+(o=ut.parseId3TagSize(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+o)},this.trigger("data",i),u+=o}r=e.length-u,e=r>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new q;var lt,dt,ct,ft,ht=nt,pt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],gt=rt.H264Stream,yt=ut.isLikelyAacData,vt=function(e,t){t.stream=e,this.trigger("log",t)},_t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",vt.bind(e,i))}},Tt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},bt=function(e,t,n,r,i,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};dt=function(e,t){var n,r=[],i=0,a=0,s=1/0;n=(t=t||{}).firstSequenceNumber||0,dt.prototype.init.call(this),this.push=function(t){ge(e,t),e&&pt.forEach((function(n){e[n]=t[n]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,u,l,d,c,f,h;0!==r.length?(o=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(r,e,i),e.baseMediaDecodeTime=me(e,t.keepOriginalTimestamps),h=he(e,o,a,s),e.samples=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r}(o),l=ee(function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}(o)),r=[],u=te(n,[e]),d=new Uint8Array(u.byteLength+l.byteLength),n++,d.set(u),d.set(l,u.byteLength),pe(e),c=Math.ceil(9216e4/e.samplerate),o.length&&(f=o.length*c,this.trigger("segmentTimingInfo",bt(de(e.baseMediaDecodeTime,e.samplerate),o[0].dts,o[0].pts,o[0].dts+f,o[0].pts+f,h||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+f})),this.trigger("data",{track:e,boxes:d}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){pe(e),r=[],this.trigger("reset")}},dt.prototype=new q,lt=function(e,t){var n,r,i,a=[],s=[];n=(t=t||{}).firstSequenceNumber||0,lt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ge(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],mt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var r,i,o,u,l,d,c,f,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i}(a),(o=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i}(r))[0][0].keyFrame||((i=this.getGopForFusion_(a[0],e))?(h=i.duration,o.unshift(i),o.byteLength+=i.byteLength,o.nalCount+=i.nalCount,o.pts=i.pts,o.dts=i.dts,o.duration+=i.duration):o=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(o)),s.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");pe(e),o=p}ge(e,o),e.samples=function(e,t){var n,r,i,a,s,o=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)s=a[r],o+=(i=ne(s,o)).size,u.push(i);return u}(o),l=ee(function(e){var t,n,r,i,a,s,o=0,u=e.byteLength,l=e.nalCount,d=new Uint8Array(u+4*l),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)s=a[r],c.setUint32(o,s.data.byteLength),o+=4,d.set(s.data,o),o+=s.data.byteLength;return d}(o)),e.baseMediaDecodeTime=me(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),c=o[0],f=o[o.length-1],this.trigger("segmentTimingInfo",bt(e.baseMediaDecodeTime,c.dts,c.pts,f.dts+f.duration,f.pts+f.duration,h)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=te(n,[e]),d=new Uint8Array(u.byteLength+l.byteLength),n++,d.set(u),d.set(l,u.byteLength),this.trigger("data",{track:e,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){pe(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)i=(a=this.gopCache_[s]).gop,e.pps&&Tt(e.pps[0],a.pps[0])&&e.sps&&Tt(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||o>n)&&(r=a,o=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,o,u,l;for(a=e.byteLength,o=e.nalCount,u=e.duration,t=n=0;t<s.length&&n<e.length&&(r=s[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,o-=i.nalCount,u-=i.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=u,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,o,u;for(t=s.length-1,n=e.length-1,a=null,o=!1;t>=0&&n>=0;){if(r=s[t],i=e[n],r.pts===i.pts){o=!0;break}r.pts>i.pts?t--:(t===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(u=o?n:a))return e;var l=e.slice(u),d=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=d.byteLength,l.duration=d.duration,l.nalCount=d.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){s=e}},lt.prototype=new q,ft=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ft.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},ft.prototype=new q,ft.prototype.flush=function(e){var t,n,r,i,s,o,u,d,c=0,f={captions:[],captionStreams:{},metadata:[],info:{}},h=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(h=this.videoTrack.timelineStartInfo.pts,mt.forEach((function(e){f.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts,pt.forEach((function(e){f.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?f.type=this.pendingTracks[0].type:f.type="combined",this.emittedTracks+=this.pendingTracks.length,s=this.pendingTracks,o=void 0,u=void 0,d=void 0,u=a(),d=l(s),(o=new Uint8Array(u.byteLength+d.byteLength)).set(u),o.set(d,u.byteLength),r=o,f.initSegment=new Uint8Array(r.byteLength),f.initSegment.set(r),f.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)f.data.set(this.pendingBoxes[i],c),c+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=fe(t.startPts,h,this.keepOriginalTimestamps),t.endTime=fe(t.endPts,h,this.keepOriginalTimestamps),f.captionStreams[t.stream]=!0,f.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=fe(n.pts,h,this.keepOriginalTimestamps),f.metadata.push(n);for(f.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",f),i=0;i<f.captions.length;i++)t=f.captions[i],this.trigger("caption",t);for(i=0;i<f.metadata.length;i++)n=f.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ft.prototype.setRemux=function(e){this.remuxTracks=e},(ct=function(e){var t,n,r=this,i=!0;ct.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Xe.MetadataStream,i.aacStream=new ht,i.audioTimestampRolloverStream=new Xe.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Xe.TimestampRolloverStream("timed-metadata"),i.adtsStream=new et,i.coalesceStream=new ft(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new dt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Xe.MetadataStream,i.packetStream=new Xe.TransportPacketStream,i.parseStream=new Xe.TransportParseStream,i.elementaryStream=new Xe.ElementaryStream,i.timestampRolloverStream=new Xe.TimestampRolloverStream,i.adtsStream=new et,i.h264Stream=new gt,i.captionStream=new Xe.CaptionStream(e),i.coalesceStream=new ft(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?n||"audio"!==a.tracks[s].type||((n=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new lt(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new dt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,i)},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,pe(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,pe(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=yt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new q;var Et,St,wt,Ct={Transmuxer:ct,VideoSegmentStream:lt,AudioSegmentStream:dt,AUDIO_PROPERTIES:pt,VIDEO_PROPERTIES:mt,generateSegmentTimingInfo:bt},At=function(e){return e>>>0},It=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},kt=At,Rt=function e(t,n){var r,i,a,s,o,u=[];if(!n.length)return null;for(r=0;r<t.byteLength;)i=kt(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),a=It(t.subarray(r+4,r+8)),s=i>1?r+i:t.byteLength,a===n[0]&&(1===n.length?u.push(t.subarray(r+8,s)):(o=e(t.subarray(r+8,s),n.slice(1))).length&&(u=u.concat(o))),r=s;return u},Pt=At,Dt=G.getUint64,Ot=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Lt="undefined"!=typeof window?window:void 0!==Mt?Mt:"undefined"!=typeof self?self:{},Nt=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},xt=ke.CaptionStream,Ft=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},Ut=function(e,t){var n=Rt(e,["moof","traf"]),r=Rt(e,["mdat"]),i={},a=[];return r.forEach((function(e,t){var r=n[t];a.push({mdat:e,traf:r})})),a.forEach((function(e){var n,r,a=e.mdat,s=e.traf,o=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],s=8&r.flags[2],o=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],d=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(r.defaultSampleDuration=n.getUint32(t),t+=4),o&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),l&&(r.durationIsEmpty=!0),!i&&d&&(r.baseDataOffsetIsMoof=!0),r}(Rt(s,["tfhd"])[0]),u=o.trackId,l=Rt(s,["tfdt"]),d=l.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Dt(e.subarray(4)):t.baseMediaDecodeTime=Pt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(l[0]).baseMediaDecodeTime:0,c=Rt(s,["trun"]);t===u&&c.length>0&&(n=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,o=[];return e.forEach((function(e){var t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],d=r.getUint32(4),c=8;for(i&&(n.dataOffset=r.getInt32(c),c+=4),a&&d&&(t={flags:Ot(e.subarray(c,c+4))},c+=4,s&&(t.duration=r.getUint32(c),c+=4),o&&(t.size=r.getUint32(c),c+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(c):t.compositionTimeOffset=r.getUint32(c),c+=4),n.samples.push(t),d--);d--;)t={},s&&(t.duration=r.getUint32(c),c+=4),o&&(t.size=r.getUint32(c),c+=4),u&&(t.flags=Ot(e.subarray(c,c+4)),c+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(c):t.compositionTimeOffset=r.getUint32(c),c+=4),n.samples.push(t);return n}(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+Lt.BigInt(e.compositionTimeOffset),r+=Lt.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)})),o=o.concat(t)})),o}(c,d,o),r=function(e,t,n){var r,i,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),u={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=a)if(a=o.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var l=e.subarray(i+1,i+1+a),d=Ft(i,t);if(r={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:Nt(l),trackId:n},d)r.pts=d.pts,r.dts=d.dts,s=d;else{if(!s){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=s.pts,r.dts=s.dts}u.seiNals.push(r)}return u}(a,n,u),i[u]||(i[u]={seiNals:[],logs:[]}),i[u].seiNals=i[u].seiNals.concat(r.seiNals),i[u].logs=i[u].logs.concat(r.logs))})),i},jt=function(){var e,t,n,r,i,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new xt,s=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})),e.on("log",(function(e){i.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=a[0],r=s[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var u=t.shift();this.parse(u,a,s)}return o=function(e,t,n){if(null===t)return null;var r=Ut(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r),o&&o.logs&&(i.logs=i.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Bt=At,Vt=function(e){return("00"+e.toString(16)).slice(-2)},qt=G.getUint64;Et=function(e,t){var n=Rt(t,["moof","traf"]).reduce((function(t,n){var r,i,a=Rt(n,["tfhd"])[0],s=Bt(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),o=e[s]||9e4,u=Rt(n,["tfdt"])[0],l=new DataView(u.buffer,u.byteOffset,u.byteLength);return"bigint"==typeof(r=1===u[0]?qt(u.subarray(4,12)):l.getUint32(4))?i=r/Lt.BigInt(o):"number"!=typeof r||isNaN(r)||(i=r/o),i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i<t&&(t=i),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},wt=function(e){var t=0===e[0]?12:20;return Bt(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},St=function(e){var t=Rt(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},a=Rt(e,["tkhd"])[0];a&&(r=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var s=Rt(e,["mdia","hdlr"])[0];if(s){var o=It(s.subarray(8,12));i.type="vide"===o?"video":"soun"===o?"audio":o}var u=Rt(e,["mdia","minf","stbl","stsd"])[0];if(u){var l=u.subarray(8);i.codec=It(l.subarray(4,8));var d,c=Rt(l,[i.codec])[0];c&&(/^[asm]vc[1-9]$/i.test(i.codec)?(d=c.subarray(78),"avcC"===It(d.subarray(4,8))&&d.length>11?(i.codec+=".",i.codec+=Vt(d[9]),i.codec+=Vt(d[10]),i.codec+=Vt(d[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(d=c.subarray(28),"esds"===It(d.subarray(4,8))&&d.length>20&&0!==d[19]?(i.codec+="."+Vt(d[19]),i.codec+="."+Vt(d[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var f=Rt(e,["mdia","mdhd"])[0];f&&(i.timescale=wt(f)),n.push(i)})),n};var Ht=Et,Gt=St,zt=function(e){var t=31&e[1];return(t<<=8)|e[2]},Wt=function(e){return!!(64&e[1])},Kt=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Yt=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Xt={parseType:function(e,t){var n=zt(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Wt(e),n=4+Kt(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Wt(e),r=4+Kt(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var a=12+((15&e[r+10])<<8|e[r+11]);a<i;){var s=r+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Wt,parsePesType:function(e,t){switch(t[zt(e)]){case Re.H264_STREAM_TYPE:return"video";case Re.ADTS_STREAM_TYPE:return"audio";case Re.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Wt(e))return null;var t=4+Kt(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+Kt(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Yt(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Yt(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Yt(31&n[i+3])&&(a=!0),a}},Qt=Ne,Zt={};Zt.ts=Xt,Zt.aac=ut;var Jt=oe,$t=188,en=71,tn=function(e,t,n){for(var r,i,a,s,o=0,u=$t,l=!1;u<=e.byteLength;)if(e[o]!==en||e[u]!==en&&u!==e.byteLength)o++,u++;else{if(r=e.subarray(o,u),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(s=Zt.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),l=!0)),l)break;o+=$t,u+=$t}for(o=(u=e.byteLength)-$t,l=!1;o>=0;)if(e[o]!==en||e[u]!==en&&u!==e.byteLength)o--,u--;else{if(r=e.subarray(o,u),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(s=Zt.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),l=!0)),l)break;o-=$t,u-=$t}},nn=function(e,t,n){for(var r,i,a,s,o,u,l,d=0,c=$t,f=!1,h={data:[],size:0};c<e.byteLength;)if(e[d]!==en||e[c]!==en)d++,c++;else{if(r=e.subarray(d,c),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!f&&(s=Zt.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),f=!0),!n.firstKeyFrame))){if(a&&0!==h.size){for(o=new Uint8Array(h.size),u=0;h.data.length;)l=h.data.shift(),o.set(l,u),u+=l.byteLength;if(Zt.ts.videoPacketContainsKeyFrame(o)){var p=Zt.ts.parsePesTime(o);p?(n.firstKeyFrame=p,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(r),h.size+=r.byteLength}if(f&&n.firstKeyFrame)break;d+=$t,c+=$t}for(d=(c=e.byteLength)-$t,f=!1;d>=0;)if(e[d]!==en||e[c]!==en)d--,c--;else{if(r=e.subarray(d,c),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(s=Zt.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),f=!0)),f)break;d-=$t,c-=$t}},rn=function(e,t){var n;return n=Zt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,a=null,s=0,o=0;e.length-o>=3;){switch(Zt.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=Zt.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=Zt.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Zt.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===i&&(t=e.subarray(o,o+s),i=Zt.aac.parseSampleRate(t)),r++,o+=s;break;default:o++}if(n)return null}if(null===i||null===a)return null;var u=Jt/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*u,pts:a+1024*r*u}]}}(e):function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=$t;i<e.byteLength;)if(e[r]!==en||e[i]!==en)r++,i++;else{switch(n=e.subarray(r,i),Zt.ts.parseType(n,t.pid)){case"pat":t.pid=Zt.ts.parsePat(n);break;case"pmt":var a=Zt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}r+=$t,i+=$t}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case Re.H264_STREAM_TYPE:n.video=[],nn(e,t,n),0===n.video.length&&delete n.video;break;case Re.ADTS_STREAM_TYPE:n.audio=[],tn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Qt(e.dts,n),e.pts=Qt(e.pts,n),e.dtsTime=e.dts/Jt,e.ptsTime=e.pts/Jt}))}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=Qt(e.dts,r),e.pts=Qt(e.pts,r),e.dtsTime=e.dts/Jt,e.ptsTime=e.pts/Jt})),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=Qt(i.dts,r),i.pts=Qt(i.pts,r),i.dtsTime=i.dts/Jt,i.ptsTime=i.pts/Jt}}}(n,t),n):null},an=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ct.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new jt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,r=Ht(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:r,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=Gt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,r="number"!=typeof n||isNaN(n)?void 0:n*oe,i=rn(t,r),a=null;i&&((a={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1}).hasVideo&&(a.videoStart=i.video[0].ptsTime),a.hasAudio&&(a.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ue(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(ue(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new an(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new an(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),jt=Nt(Ut),Bt=function(e){var t=e.transmuxer,n=e.bytes,r=e.audioAppendStart,i=e.gopsToAlignWith,a=e.remux,s=e.onData,o=e.onTrackInfo,u=e.onAudioTimingInfo,l=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,f=e.onId3,h=e.onCaptions,p=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,y=e.isEndOfTimeline,v={buffer:[]},_=y;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var r=e.data.segment,i=r.type,a=r.initSegment,s=r.captions,o=r.captionStreams,u=r.metadata,l=r.videoFrameDtsTime,d=r.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:u});var c=e.data.segment.boxes||{data:e.data.segment.data},f={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==l&&(f.videoFrameDtsTime=l),void 0!==d&&(f.videoFramePtsTime=d),n(f)}(n,v,s),"trackinfo"===n.data.action&&o(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,v),"audioTimingInfo"===n.data.action&&u(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&d(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&c(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&f([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&h(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:v,callback:p}),Vt(t))))},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var T=n instanceof ArrayBuffer?n:n.buffer,b=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:T,byteOffset:b,byteLength:n.byteLength},[T])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Vt=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():Bt(e.currentTransmux))},qt=function(e,t){e.postMessage({action:t}),Vt(e)},Ht=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void qt(t,e);t.transmuxQueue.push(qt.bind(null,t,e))}("reset",e)},Gt=function(e){var t=e.transmuxer,n=e.endAction||e.action,r=e.callback,i=(0,c.Z)({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function i(a){a.data.action===n&&(t.removeEventListener("message",i),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),r(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;i.byteOffset=a?0:e.data.byteOffset,i.byteLength=e.data.byteLength;var s=[a?e.data:e.data.buffer];t.postMessage(i,s)}else t.postMessage(i)},zt=-101,Wt=-102,Kt=function(e){e.forEach((function(e){e.abort()}))},Yt=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:zt,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Wt,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},Xt=function(e,t,n){return function(r,i){var a=i.response,s=Yt(r,i);if(s)return n(s,e);if(16!==a.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},e);for(var o=new DataView(a),u=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),l=0;l<t.length;l++)t[l].bytes=u;return n(null,e)}},Qt=function(e,t){var n=(0,_e.Xm)(e.map.bytes);if("mp4"!==n){var r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+r,code:2})}Gt({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var r=n.tracks,i=n.data;return e.map.bytes=i,r.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},Zt=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog,p=t.map&&t.map.tracks||{},m=Boolean(p.audio&&p.video),g=i.bind(null,t,"audio","start"),y=i.bind(null,t,"audio","end"),v=i.bind(null,t,"video","start"),_=i.bind(null,t,"video","end");Gt({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var i=e.result;i&&(r(t,{hasAudio:i.hasAudio,hasVideo:i.hasVideo,isMuxed:m}),r=null,i.hasAudio&&!m&&g(i.audioStart),i.hasVideo&&v(i.videoStart),g=null,v=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void Bt(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:m,onData:function(e){e.type="combined"===e.type?"video":e.type,c(t,e)},onTrackInfo:function(e){r&&(m&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){g&&void 0!==e.start&&(g(e.start),g=null),y&&void 0!==e.end&&y(e.end)},onVideoTimingInfo:function(e){v&&void 0!==e.start&&(v(e.start),v=null),_&&void 0!==e.end&&_(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,n){o(t,e,n)},onCaptions:function(e){u(t,[e])},isEndOfTimeline:l,onEndedTimeline:function(){d()},onTransmuxerLog:h,onDone:function(e){f&&(e.type="combined"===e.type?"video":e.type,f(null,t,e))}})}})},Jt=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,c=e.endedTimelineFn,f=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog,m=new Uint8Array(n);if((0,_e.cz)(m)){t.isFmp4=!0;var g=t.map.tracks,y={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(y.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(y.videoCodec=g.video.codec),g.video&&g.audio&&(y.isMuxed=!0),r(t,y);var v=function(e){f(t,{data:m,type:y.hasAudio&&!y.isMuxed?"audio":"video"}),e&&e.length&&u(t,e),h(null,t,{})};Gt({action:"probeMp4StartTime",timescales:t.map.timescales,data:m,transmuxer:t.transmuxer,callback:function(e){var r=e.data,a=e.startTime;n=r.buffer,t.bytes=m=r,y.hasAudio&&!y.isMuxed&&i(t,"audio","start",a),y.hasVideo&&i(t,"video","start",a),g.video&&r.byteLength&&t.transmuxer?Gt({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:m,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){n=e.data.buffer,t.bytes=m=e.data,e.logs.forEach((function(e){p(d.default.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=(0,_e.Xm)(m)),"ts"!==t.container&&"aac"!==t.container)return r(t,{hasAudio:!1,hasVideo:!1}),void h(null,t,{});Zt({segment:t,bytes:n,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:f,doneFn:h,onTransmuxerLog:p})}else h(null,t,{})},$t=function(e,t){var n,r=e.id,i=e.key,a=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener("message",(function e(n){if(n.data.source===r){s.removeEventListener("message",e);var i=n.data.decrypted;t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength))}})),n=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),s.postMessage(Tt({source:r,encrypted:a,key:n,iv:i.iv}),[a.buffer,n.buffer])},en=function(e){var t=e.xhr,n=e.xhrOptions,r=e.decryptionWorker,i=e.segment,a=e.abortFn,s=e.progressFn,o=e.trackInfoFn,u=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,c=e.audioSegmentTimingInfoFn,f=e.id3Fn,h=e.captionsFn,p=e.isEndOfTimeline,m=e.endedTimelineFn,g=e.dataFn,y=e.doneFn,v=e.onTransmuxerLog,_=[],T=function(e){var t=e.activeXhrs,n=e.decryptionWorker,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog,p=0,m=!1;return function(e,g){if(!m){if(e)return m=!0,Kt(t),f(e,g);if((p+=1)===t.length){var y=function(){if(g.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog;$t({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,Jt({segment:n,bytes:n.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h})}))}({decryptionWorker:n,segment:g,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h});Jt({segment:g,bytes:g.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return $t({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(e){g.map.bytes=e,Qt(g,(function(e){if(e)return Kt(t),f(e,g);y()}))}));y()}}}}({activeXhrs:_,decryptionWorker:r,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:m,dataFn:g,doneFn:y,onTransmuxerLog:v});if(i.key&&!i.key.bytes){var b=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&b.push(i.map.key);var E=t(d.default.mergeOptions(n,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),Xt(i,b,T));_.push(E)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){var S=t(d.default.mergeOptions(n,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),Xt(i,[i.map.key],T));_.push(S)}var w=d.default.mergeOptions(n,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:gt(i.map)}),C=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,r){var i=Yt(e,r);if(i)return n(i,t);var a=new Uint8Array(r.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,Qt(t,(function(e){if(e)return e.xhr=r,e.status=r.status,n(e,t);n(null,t)}))}}({segment:i,finishProcessingFn:T}),A=t(w,C);_.push(A)}var I=d.default.mergeOptions(n,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:gt(i)}),k=t(I,function(e){var t=e.segment,n=e.finishProcessingFn,r=e.responseType;return function(e,i){var a=Yt(e,i);if(a)return n(a,t);var s="arraybuffer"!==r&&i.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(i.responseText.substring(t.lastReachedChar||0)):i.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),t.key?t.encryptedBytes=new Uint8Array(s):t.bytes=new Uint8Array(s),n(null,t)}}({segment:i,finishProcessingFn:T,responseType:I.responseType}));k.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=d.default.mergeOptions(t.stats,(i=(r=e).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=r.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t);var r,i,a}}({segment:i,progressFn:s,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:f,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:m,dataFn:g})),_.push(k);var R={};return _.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:R,abortFn:a}))})),function(){return Kt(_)}},tn=Se("CodecUtils"),nn=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},rn=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,r=e.type,i=e.details;t[n]=t[n]||[],t[n].push((0,E.ws)(""+r+i))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return tn("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},an=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},sn=function(e,t){var n=t.attributes||{},r=rn(function(e){var t=e.attributes||{};if(t.CODECS)return(0,E.kS)(t.CODECS)}(t)||[]);if(nn(e,t)&&!r.audio&&!function(e,t){if(!nn(e,t))return!0;var n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(var i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1}(e,t)){var i=rn((0,E.Jg)(e,n.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},on=Se("PlaylistSelector"),un=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},ln=function(e,t){if(!e)return"";var n=u().getComputedStyle(e);return n?n[t]:""},dn=function(e,t){var n=e.slice();e.sort((function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},cn=function(e,t){var n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||u().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r||u().Number.MAX_VALUE)},fn=function(e,t,n,r,i,a){if(e){var s={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:i},o=e.playlists;Ze.isAudioOnly(e)&&(o=a.getAudioTrackPlaylists_(),s.audioOnly=!0);var l=o.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||u().Number.MAX_VALUE,width:t,height:n,playlist:e}}));dn(l,(function(e,t){return e.bandwidth-t.bandwidth}));var d=(l=l.filter((function(e){return!Ze.isIncompatible(e.playlist)}))).filter((function(e){return Ze.isEnabled(e.playlist)}));d.length||(d=l.filter((function(e){return!Ze.isDisabled(e.playlist)})));var c=d.filter((function(e){return e.bandwidth*Mt.BANDWIDTH_VARIANCE<t})),f=c[c.length-1],h=c.filter((function(e){return e.bandwidth===f.bandwidth}))[0];if(!1===i){var p=h||d[0]||l[0];if(p&&p.playlist){var m="sortedPlaylistReps";return h&&(m="bandwidthBestRep"),d[0]&&(m="enabledPlaylistReps"),on("choosing "+un(p)+" using "+m+" with options",s),p.playlist}return on("could not choose a playlist with options",s),null}var g=c.filter((function(e){return e.width&&e.height}));dn(g,(function(e,t){return e.width-t.width}));var y=g.filter((function(e){return e.width===n&&e.height===r}));f=y[y.length-1];var v,_,T,b,E=y.filter((function(e){return e.bandwidth===f.bandwidth}))[0];if(E||(_=(v=g.filter((function(e){return e.width>n||e.height>r}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),f=_[_.length-1],T=_.filter((function(e){return e.bandwidth===f.bandwidth}))[0]),a.experimentalLeastPixelDiffSelector){var S=g.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-r),e}));dn(S,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),b=S[0]}var w=b||T||E||h||d[0]||l[0];if(w&&w.playlist){var C="sortedPlaylistReps";return b?C="leastPixelDiffRep":T?C="resolutionPlusOneRep":E?C="resolutionBestRep":h?C="bandwidthBestRep":d[0]&&(C="enabledPlaylistReps"),on("choosing "+un(w)+" using "+C+" with options",s),w.playlist}return on("could not choose a playlist with options",s),null}},hn=function(){var e=this.useDevicePixelRatio&&u().devicePixelRatio||1;return fn(this.playlists.master,this.systemBandwidth,parseInt(ln(this.tech_.el(),"width"),10)*e,parseInt(ln(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},pn=function(e,t,n){var r,i;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime>=e&&i.endTime<=t&&n.removeCue(i)},mn=function(e){return"number"==typeof e&&isFinite(e)},gn=1/60,yn=function(e){var t=e.startOfSegment,n=e.duration,r=e.segment,i=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=void 0===u?[]:u,d=e.mediaIndex,c=e.partIndex,f=e.timeline,h=l.length-1,p="mediaIndex/partIndex increment";e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=" with independent "+e.independent);var m="number"==typeof c,g=e.segment.uri?"segment":"pre-segment",y=m?Fe({preloadSegment:r})-1:0;return g+" ["+(s+d)+"/"+(s+h)+"]"+(m?" part ["+c+"/"+y+"]":"")+" segment start/end ["+r.start+" => "+r.end+"]"+(m?" part start/end ["+i.start+" => "+i.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+f+"] selected by ["+p+"] playlist ["+o+"]"},vn=function(e){return e+"TimingInfo"},_n=function(e){var t=e.timelineChangeController,n=e.currentTimeline,r=e.segmentTimeline,i=e.loaderType,a=e.audioDisabled;if(n===r)return!1;if("audio"===i){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==r}if("main"===i&&a){var o=t.pendingTimelineChange({type:"audio"});return!o||o.to!==r}return!1},Tn=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+we},bn=function(e){function t(t,n){var i;if(i=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,i.captionServices_=t.captionServices,i.experimentalExactManifestTimings=t.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=d.default.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=Se("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty((0,r.Z)(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}(0,i.Z)(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new jt;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&u().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,u().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Ht(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return d.default.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,r=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=bt(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Et(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){var o=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=o}}r&&(r.mediaIndex-=a,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(u().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&Ht(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,r){if(void 0===n&&(n=function(){}),void 0===r&&(r=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var i=1,a=function(){0==--i&&n()};for(var s in!r&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,a)),(r||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,r){for(var i=Math.ceil((t-r)*Te.ONE_SECOND_IN_TS),a=Math.ceil((n-r)*Te.ONE_SECOND_IN_TS),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var u=o+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),s.splice(u,o-u+1),s}(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)pn(e,t,this.inbandTextTracks_[s]);pn(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&u().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=u().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&u().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=u().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var r="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,a=!r||!r.parts||n+1===r.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&a},n.chooseNextRequest_=function(){var e=this.buffered_(),t=De(e)||0,n=Oe(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,i=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||r||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var s={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(s.isSyncRequest)s.mediaIndex=function(e,t,n){t=t||[];for(var r=[],i=0,a=0;a<t.length;a++){var s=t[a];if(e===s.timeline&&(r.push(a),(i+=s.duration)>n))return a}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var o=a[this.mediaIndex],u="number"==typeof this.partIndex?this.partIndex:-1;s.startOfSegment=o.end?o.end:t,o.parts&&o.parts[u+1]?(s.mediaIndex=this.mediaIndex,s.partIndex=u+1):s.mediaIndex=this.mediaIndex+1}else{var l=Ze.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),d=l.segmentIndex,c=l.startTime,f=l.partIndex;s.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),s.mediaIndex=d,s.startOfSegment=c,s.partIndex=f}var h=a[s.mediaIndex],p=h&&"number"==typeof s.partIndex&&h.parts&&h.parts[s.partIndex];if(!h||"number"==typeof s.partIndex&&!p)return null;if("number"!=typeof s.partIndex&&h.parts&&(s.partIndex=0,p=h.parts[0]),!n&&p&&!p.independent)if(0===s.partIndex){var m=a[s.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(s.mediaIndex-=1,s.partIndex=m.parts.length-1,s.independent="previous segment")}else h.parts[s.partIndex-1].independent&&(s.partIndex-=1,s.independent="previous part");var y=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return s.mediaIndex>=a.length-1&&y&&!this.seeking_()?null:this.generateSegmentInfo_(s)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,r=e.mediaIndex,i=e.startOfSegment,a=e.isSyncRequest,s=e.partIndex,o=e.forceTimestampOffset,u=e.getMediaInfoForTime,l=n.segments[r],d="number"==typeof s&&l.parts[s],c={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||l.resolvedUri,mediaIndex:r,partIndex:d?s:null,isSyncRequest:a,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:d&&d.duration||l.duration,segment:l,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},f=void 0!==o?o:this.isPendingTimestampOffset_;c.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:f});var h=De(this.sourceUpdater_.audioBuffered());return"number"==typeof h&&(c.audioAppendStart=h-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(c.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var r,i=Math.ceil((t-n+3)*Te.ONE_SECOND_IN_TS);for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),c},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,r=t.currentTimeline,i=t.startOfSegment,a=t.buffered,t.overrideCheck||n!==r?n<r?i:a.length?a.end(a.length-1):i:null;var t,n,r,i,a},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=Ze.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(i<=a)){var s=function(e){var t=e.currentTime,n=e.bandwidth,r=e.duration,i=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,u=e.master.playlists.filter((function(e){return!Ze.isIncompatible(e)})),l=u.filter(Ze.isEnabled);l.length||(l=u.filter((function(e){return!Ze.isDisabled(e)})));var d=l.filter(Ze.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var u=o.getSyncPoint(e,r,s,t)?1:2;return{playlist:e,rebufferingImpact:Ze.estimateSegmentRequestTime(i,n,e)*u-a}})),c=d.filter((function(e){return e.rebufferingImpact<=0}));return dn(c,(function(e,t){return cn(t.playlist,e.playlist)})),c.length?c[0]:(dn(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=i-a-s.rebufferingImpact,u=.5;a<=we&&(u=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<u||(this.bandwidth=s.playlist.attributes.BANDWIDTH*Mt.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+yn(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(a!==r[i])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,r){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var i=this.pendingSegment_,a=vn(t);i[a]=i[a]||{},i[a][n]=r,this.logger_("timinginfo: "+t+" - "+n+" - "+r),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)})),Object.keys(i).forEach((function(e){var t=i[e],a=t.startTime,s=t.endTime,o=t.captions,l=n.inbandTextTracks_;n.logger_("adding cues from "+a+" -> "+s+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);var i=t.textTracks().getTrackById(r);if(i)e[n]=i;else{var a=n,s=n,o=!1,u=(t.options_.vhs&&t.options_.vhs.captionServices||{})[r];u&&(a=u.label,s=u.language,o=u.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:o,label:a,language:s},!1).track}}}(l,n.vhs_.tech_,e),pn(a,s,l[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var i=u().WebKitDataCue||u().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new i(e.startTime+r,e.endTime+r,e.text))}))}}({captionArray:o,inbandTextTracks:l,timestampOffset:r})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,r=e.timestampOffset,i=e.videoDuration;if(n){var a=u().WebKitDataCue||u().VTTCue,s=t.metadataTrack_;if(s&&(n.forEach((function(e){var t=e.cueTime+r;!("number"!=typeof t||u().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new a(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return d.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return d.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return d.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),s.addCue(n)}))})),s.cues&&s.cues.length)){for(var o=s.cues,l=[],c=0;c<o.length;c++)o[c]&&l.push(o[c]);var f=l.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),h=Object.keys(f).sort((function(e,t){return Number(e)-Number(t)}));h.forEach((function(e,t){var n=f[e],r=Number(h[t+1])||i;n.forEach((function(e){e.endTime=r}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&_n({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||_n({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[vn(t.type)].start;else{var r,i=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&i&&i.hasVideo;a&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=this.chooseNextRequest_();if(s.mediaIndex!==n.mediaIndex||s.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,r=e.map,i=e.playlist;if(r){var a=bt(r);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,r=e.segmentInfo,i=e.type,a=e.bytes,s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Pe(s).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Pe(o).join(", "));var l=s.length?s.start(0):0,d=s.length?s.end(s.length-1):0,c=o.length?o.start(0):0,f=o.length?o.end(o.length-1):0;if(d-l<=1&&f-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+Pe(s).join(", ")+", video buffer: "+Pe(o).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:r,type:i,bytes:a}));var h=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+h),this.remove(0,h,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=u().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,r=e.type,i=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(r+" append of "+i.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:r,bytes:i}))},n.appendToSourceBuffer_=function(e){var t,n,r,i=e.segmentInfo,a=e.type,s=e.initSegment,o=e.data,u=e.bytes;if(!u){var l=[o],d=o.byteLength;s&&(l.unshift(s),d+=s.byteLength),r=0,(t={bytes:d,segments:l}).bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach((function(e){n.set(e,r),r+=e.byteLength}))),u=n}this.sourceUpdater_.appendBuffer({segmentInfo:i,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:i,type:a,bytes:u}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var r=this.pendingSegment_.segment,i=e+"TimingInfo";r[i]||(r[i]={}),r[i].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[i].transmuxedPresentationStart=n.start.presentation,r[i].transmuxedDecodeStart=n.start.decode,r[i].transmuxedPresentationEnd=n.end.presentation,r[i].transmuxedDecodeEnd=n.end.decode,r[i].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,r=t.data;if(r&&r.byteLength&&("audio"!==n||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=(0,c.Z)({},e,{forceTimestampOffset:!0});(0,c.Z)(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,s=r||i&&a;this.logger_("Requesting "+yn(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=en({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var r=n.message,i=n.level,a=n.stream;t.logger_(yn(e)+" logged from transmuxer stream "+a+" as a "+i+": "+r)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var r=t-Mt.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var i=t-n;return Math.min(i,r)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,r={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];if(i&&i.timeline===t.timeline&&(i.videoTimingInfo?r.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(r.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=a}return t.map&&(r.map=this.initSegmentForMap(t.map)),r},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<gn?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record 0.016666666666666666"):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Wt)return;return this.pause(),e.code===zt?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,r=e.mediaIndex,i=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return u.start;var l=n.segments[r-1];return 0!==r&&l&&void 0!==l.start&&l.end===i+a?o.start:i},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed,a="main"===this.loaderType_&&r,s=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,r=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:r.start:r.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,r,i=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},r=0,["video","audio"].forEach((function(e){var t=n[e+"TimingInfo"];if(t){var i,a=t.start,s=t.end;"bigint"==typeof a||"bigint"==typeof s?i=u().BigInt(s)-u().BigInt(a):"number"==typeof a&&"number"==typeof s&&(i=s-a),void 0!==i&&i>r&&(r=i)}})),"bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r);if(!i)return null;var a=e.playlist.targetDuration,s=Tn({segmentDuration:i,maxDuration:2*a}),o=Tn({segmentDuration:i,maxDuration:a}),l="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+i+" when the reported duration is "+e.duration+" and the target duration is "+a+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||o?{severity:s?"warn":"info",message:l}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?d.default.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+yn(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,r=e.part,i=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,a=r&&r.end&&this.currentTime_()-r.end>3*e.playlist.partTargetDuration;if(i||a)return this.logger_("bad "+(i?"segment":"part")+" "+yn(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+yn(e))},n.recordThroughput_=function(e){if(e.duration<gn)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record 0.016666666666666666");else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(mn(n)&&mn(r)){pn(n,r,this.segmentMetadataTrack_);var i=u().WebKitDataCue||u().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},s=new i(n,r,JSON.stringify(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}},t}(d.default.EventTarget);function En(){}var Sn,wn=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},Cn=["video","audio"],An=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},In=function e(t,n){if(0!==n.queue.length){var r=0,i=n.queue[r];if("mediaSource"!==i.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!An(t,n)){if(i.type!==t){if(r=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null}(t,n.queue),null===r)return;i=n.queue[r]}return n.queue.splice(r,1),n.queuePending[t]=i,i.action(t,n),i.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),i.action(n),i.doneFn&&i.doneFn(),e("audio",n),e("video",n))}},kn=function(e,t){var n=t[e+"Buffer"],r=wn(e);n&&(n.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),n.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},Rn=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},Pn=function(e,t,n){return function(r,i){var a=i[r+"Buffer"];if(Rn(i.mediaSource,a)){i.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{a.appendBuffer(e)}catch(e){i.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+r+"Buffer"),i.queuePending[r]=null,n(e)}}}},Dn=function(e,t){return function(n,r){var i=r[n+"Buffer"];if(Rn(r.mediaSource,i)){r.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{i.remove(e,t)}catch(i){r.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},On=function(e){return function(t,n){var r=n[t+"Buffer"];Rn(n.mediaSource,r)&&(n.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},Mn=function(e){return function(t,n){e()}},Ln=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){d.default.log.warn("Failed to call media source endOfStream",e)}}}},Nn=function(e,t){return function(n){var r=wn(e),i=(0,E._5)(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(i);a.addEventListener("updateend",n["on"+r+"UpdateEnd_"]),a.addEventListener("error",n["on"+r+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},xn=function(e){return function(t){var n=t[e+"Buffer"];if(kn(e,t),Rn(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){d.default.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},Fn=function(e){return function(t,n){var r=n[t+"Buffer"],i=(0,E._5)(e);Rn(n.mediaSource,r)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),r.changeType(i),n.codecs[t]=e)}},Un=function(e){var t=e.type,n=e.sourceUpdater,r=e.action,i=e.doneFn,a=e.name;n.queue.push({type:t,action:r,doneFn:i,name:a}),In(t,n)},jn=function(e,t){return function(n){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}In(e,t)}},Bn=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return In("mediaSource",(0,r.Z)(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=Se("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=jn("video",(0,r.Z)(n)),n.onAudioUpdateEnd_=jn("audio",(0,r.Z)(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}(0,i.Z)(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){Un({type:"mediaSource",sourceUpdater:this,action:Nn(e,t),name:"addSourceBuffer"})},n.abort=function(e){Un({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(Rn(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){d.default.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?Un({type:"mediaSource",sourceUpdater:this,action:xn(e),name:"removeSourceBuffer"}):d.default.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!d.default.browser.IE_VERSION&&!d.default.browser.IS_FIREFOX&&u().MediaSource&&u().MediaSource.prototype&&"function"==typeof u().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return u().SourceBuffer&&u().SourceBuffer.prototype&&"function"==typeof u().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?Un({type:e,sourceUpdater:this,action:Fn(t),name:"changeType"}):d.default.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var r=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,r);t.canChangeType()&&t.changeType(n,r)}))},n.appendBuffer=function(e,t){var n=this,r=e.segmentInfo,i=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(Un({type:i,sourceUpdater:this,action:Pn(a,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return Rn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:d.default.createTimeRange()},n.videoBuffered=function(){return Rn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:d.default.createTimeRange()},n.buffered=function(){var e=Rn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=Rn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,r=null,i=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return d.default.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),o=0;o<a.length;o++)"start"===a[o].type?2==++i&&(n=a[o].time):"end"===a[o].type&&1==--i&&(r=a[o].time),null!==n&&null!==r&&(s.push([n,r]),n=null,r=null);return d.default.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){var n;void 0===t&&(t=En),Un({type:"mediaSource",sourceUpdater:this,action:(n=e,function(e){e.logger_("Setting mediaSource duration to "+n);try{e.mediaSource.duration=n}catch(e){d.default.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=En),"string"!=typeof e&&(e=void 0),Un({type:"mediaSource",sourceUpdater:this,action:Ln(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=En),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?Un({type:"audio",sourceUpdater:this,action:Dn(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=En),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?Un({type:"video",sourceUpdater:this,action:Dn(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!An("audio",this)&&!An("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Un({type:"audio",sourceUpdater:this,action:On(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Un({type:"video",sourceUpdater:this,action:On(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&Un({type:"audio",sourceUpdater:this,action:Mn(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&Un({type:"video",sourceUpdater:this,action:Mn(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),Cn.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return kn(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(d.default.EventTarget),Vn=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},qn=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),Hn=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).mediaSource_=null,r.subtitlesTrack_=null,r.loaderType_="subtitle",r.featuresNativeTextTracks_=t.featuresNativeTextTracks,r.shouldSaveSegmentTimingInfo_=!1,r}(0,i.Z)(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return d.default.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return d.default.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=bt(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=qn.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(qn,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){pn(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var r=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===zt&&this.handleTimeout_(),e.code===Wt?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var a=i.segment;if(a.map&&(a.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof u().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var s,o=function(){r.subtitlesTrack_.tech_.off("vttjsloaded",s),r.stopForError({message:"Error loading vtt.js"})};return s=function(){r.subtitlesTrack_.tech_.off("vttjserror",o),r.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",s),void this.subtitlesTrack_.tech_.one("vttjserror",o)}a.requested=!0;try{this.parseVTTCues_(i)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,i.cues.forEach((function(e){r.subtitlesTrack_.addCue(r.featuresNativeTextTracks_?new(u().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var r=[],i=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++i>1&&r.push(t[a]);r.length&&r.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;"function"==typeof u().TextDecoder?t=new(u().TextDecoder)("utf8"):(t=u().WebVTT.StringDecoder(),n=!0);var r=new(u().WebVTT.Parser)(u(),u().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){e.timestampmap=t},r.onparsingerror=function(e){d.default.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var i=e.segment.map.bytes;n&&(i=Vn(i)),r.parse(i)}var a=e.bytes;n&&(a=Vn(a)),r.parse(a),r.flush()},n.updateTimeMapping_=function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/Te.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-r.duration)}}}else r.empty=!0},t}(bn),Gn=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},zn=[{name:"VOD",run:function(e,t,n,r,i){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,s=null,o=Ne(t);i=i||0;for(var u=0;u<o.length;u++){var l=o[t.endList||0===i?u:o.length-(u+1)],d=l.segment,c=e.timelineToDatetimeMappings[d.timeline];if(c&&d.dateTimeObject){var f=d.dateTimeObject.getTime()/1e3+c;if(d.parts&&"number"==typeof l.partIndex)for(var h=0;h<l.partIndex;h++)f+=d.parts[h].duration;var p=Math.abs(i-f);if(null!==s&&(0===p||s<p))break;s=p,a={time:f,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,r,i){var a=null,s=null;i=i||0;for(var o=Ne(t),u=0;u<o.length;u++){var l=o[t.endList||0===i?u:o.length-(u+1)],d=l.segment,c=l.part&&l.part.start||d&&d.start;if(d.timeline===r&&void 0!==c){var f=Math.abs(i-c);if(null!==s&&s<f)break;(!a||null===s||s>=f)&&(s=f,a={time:c,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,d=e.discontinuities[l];if(d){var c=Math.abs(i-d.time);if(null!==s&&s<c)break;(!a||null===s||s>=c)&&(s=c,a={time:d.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],Wn=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=Se("SyncController"),n}(0,i.Z)(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+Ve({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,r){for(var i=[],a=0;a<zn.length;a++){var s=zn[a],o=s.run(this,e,t,n,r);o&&(o.strategy=s.name,i.push({strategy:s.name,syncPoint:o}))}return i},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<r&&(r=s,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)d.default.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var r=n-1;r>=0;r--){var i=e.segments[r];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,r=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),i=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:i.start}));var a=i.dateTimeObject;i.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[i.timeline]=-a.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var r,i,a=e.segment,s=e.part,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+o.time+"] [mapping: "+o.mapping+"]")),r=e.startOfSegment,i=t.end+o.mapping;else{if(!o)return!1;r=t.start+o.mapping,i=t.end+o.mapping}return s&&(s.start=r,s.end=i),(!a.start||r<a.start)&&(a.start=r),a.end=i,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,s=i-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var u;u=s<0?n.start-Ve({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:i}):n.end+Ve({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[a]={time:u,accuracy:o}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(d.default.EventTarget),Kn=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}(0,i.Z)(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.lastTimelineChanges_[t]={type:t,from:n,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(d.default.EventTarget),Yn=xt(Ft((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var r=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),i=t((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),s=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),o=null,u=function(){function e(e){var t,n,r;o||(o=function(){var e,t,n,r,i,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],l=u[0],d=u[1],c=l[4],f=d[4],h=[],p=[];for(e=0;e<256;e++)p[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=r||1,n=p[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,c[t]=a,f[a]=t,o=16843009*h[i=h[r=h[t]]]^65537*i^257*r^16843008*t,s=257*h[a]^16843008*a,e=0;e<4;e++)l[e][t]=s=s<<24^s>>>8,d[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)l[e]=l[e].slice(0),d[e]=d[e].slice(0);return u}()),this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var i=this._tables[0][4],a=this._tables[1],s=e.length,u=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var l=e.slice(0),d=[];for(this._key=[l,d],t=s;t<4*s+28;t++)r=l[t-1],(t%s==0||8===s&&t%s==4)&&(r=i[r>>>24]<<24^i[r>>16&255]<<16^i[r>>8&255]<<8^i[255&r],t%s==0&&(r=r<<8^r>>>24^u<<24,u=u<<1^283*(u>>7))),l[t]=l[t-s]^r;for(n=0;t;n++,t--)r=l[3&n?t:t-4],d[n]=t<=4||n<4?r:a[0][i[r>>>24]]^a[1][i[r>>16&255]]^a[2][i[r>>8&255]]^a[3][i[255&r]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var s,o,u,l,d=this._key[1],c=e^d[0],f=r^d[1],h=n^d[2],p=t^d[3],m=d.length/4-2,g=4,y=this._tables[1],v=y[0],_=y[1],T=y[2],b=y[3],E=y[4];for(l=0;l<m;l++)s=v[c>>>24]^_[f>>16&255]^T[h>>8&255]^b[255&p]^d[g],o=v[f>>>24]^_[h>>16&255]^T[p>>8&255]^b[255&c]^d[g+1],u=v[h>>>24]^_[p>>16&255]^T[c>>8&255]^b[255&f]^d[g+2],p=v[p>>>24]^_[c>>16&255]^T[f>>8&255]^b[255&h]^d[g+3],g+=4,c=s,f=o,h=u;for(l=0;l<4;l++)i[(3&-l)+a]=E[c>>>24]<<24^E[f>>16&255]<<16^E[h>>8&255]<<8^E[255&p]^d[g++],s=c,c=f,f=h,h=p,p=s},e}(),l=function(e){function t(){var t;return(t=e.call(this,s)||this).jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(s),d=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(){function e(t,n,r,i){var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),n,r,o)),u=a;u<s.length;u+=a)r=new Uint32Array([d(s[u-4]),d(s[u-3]),d(s[u-2]),d(s[u-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),n,r,o));this.asyncStream_.push((function(){var e;i(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=function(e,t,n){var r,i,a,s,o,l,c,f,h,p=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new u(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),y=new Int32Array(g.buffer);for(r=n[0],i=n[1],a=n[2],s=n[3],h=0;h<p.length;h+=4)o=d(p[h]),l=d(p[h+1]),c=d(p[h+2]),f=d(p[h+3]),m.decrypt(o,l,c,f,y,h),y[h]=d(y[h]^r),y[h+1]=d(y[h+1]^i),y[h+2]=d(y[h+2]^a),y[h+3]=d(y[h+3]^s),r=o,i=l,a=c,s=f;return g}(e,t,n);r.set(i,e.byteOffset)}},r(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),f=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;f("0x1"),f("0x100"),f("0x10000"),f("0x1000000"),f("0x100000000"),f("0x10000000000"),f("0x1000000000000"),f("0x100000000000000"),f("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new c(n,r,i,(function(e,n){var r,i;self.postMessage((r={source:t.source,decrypted:n},i={},Object.keys(r).forEach((function(e){var t,n=r[e];t=n,("function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer)?i[e]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:i[e]=n})),i),[n.buffer])}))}}))),Xn=Nt(Yn),Qn=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},Zn=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},Jn=function(e,t){t.activePlaylistLoader=e,e.load()},$n={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;Zn(n,r);var a=r.activeTrack(),s=r.activeGroup(),o=(s.filter((function(e){return e.default}))[0]||s[0]).id,u=r.tracks[o];if(a!==u){for(var l in d.default.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[l].enabled=r.tracks[l]===u;r.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];d.default.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Zn(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},er={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",$n[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),a.track(s.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",$n[e](e,n))}},tr={AUDIO:function(e,t){var n=t.vhs,r=t.sourceType,i=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],u=o.groups,l=o.tracks,c=o.logger_,f=t.masterPlaylistLoader,h=Qe(f.master);for(var p in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}},h&&(s[e].main.default.playlists=f.master.playlists)),s[e])for(var m in u[p]||(u[p]=[]),s[e][p]){var g=s[e][p][m],y=void 0;if(h?(c("AUDIO group '"+p+"' label '"+m+"' is a master playlist"),g.isMasterPlaylist=!0,y=null):y="vhs-json"===r&&g.playlists?new ct(g.playlists[0],n,a):g.resolvedUri?new ct(g.resolvedUri,n,a):g.playlists&&"dash"===r?new Ot(g.playlists[0],n,a,f):null,g=d.default.mergeOptions({id:m,playlistLoader:y},g),er[e](e,g.playlistLoader,t),u[p].push(g),void 0===l[m]){var v=new d.default.AudioTrack({id:m,kind:Qn(g),enabled:!1,language:g.language,default:g.default,label:m});l[m]=v}}i.on("error",$n[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.vhs,i=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,u=t.mediaTypes[e],l=u.groups,c=u.tracks,f=t.masterPlaylistLoader;for(var h in o[e])for(var p in l[h]||(l[h]=[]),o[e][h])if(!o[e][h][p].forced){var m=o[e][h][p],g=void 0;if("hls"===i)g=new ct(m.resolvedUri,r,s);else if("dash"===i){if(!m.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;g=new Ot(m.playlists[0],r,s,f)}else"vhs-json"===i&&(g=new ct(m.playlists?m.playlists[0]:m.resolvedUri,r,s));if(m=d.default.mergeOptions({id:p,playlistLoader:g},m),er[e](e,m.playlistLoader,t),l[h].push(m),void 0===c[p]){var y=n.addRemoteTextTrack({id:p,kind:"subtitles",default:m.default&&m.autoselect,language:m.language,label:p},!1).track;c[p]=y}}a.on("error",$n[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],a=i.groups,s=i.tracks;for(var o in r[e])for(var u in a[o]||(a[o]=[]),r[e][o]){var l=r[e][o][u];if(/^(?:CC|SERVICE)/.test(l.instreamId)){var c=n.options_.vhs&&n.options_.vhs.captionServices||{},f={label:u,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(c[f.instreamId]&&(f=d.default.mergeOptions(f,c[f.instreamId])),void 0===f.default&&delete f.default,a[o].push(d.default.mergeOptions({id:u},l)),void 0===s[u]){var h=n.addRemoteTextTrack({id:f.instreamId,kind:"captions",default:f.default,language:f.language,label:f.label},!1).track;s[u]=h}}}}},nr=function e(t,n){for(var r=0;r<t.length;r++){if(Ye(n,t[r]))return!0;if(t[r].playlists&&e(t[r].playlists,n))return!0}return!1},rr={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode||"hidden"===n[r].mode)return n[r];return null}}},ir=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ar=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},sr=function(e){function t(t){var n;n=e.call(this)||this;var i=t.src,a=t.handleManifestRedirects,s=t.withCredentials,o=t.tech,l=t.bandwidth,c=t.externVhs,f=t.useCueTags,h=t.blacklistDuration,p=t.enableLowInitialPlaylist,m=t.sourceType,g=t.cacheEncryptionKeys,y=t.experimentalBufferBasedABR,v=t.experimentalLeastPixelDiffSelector,_=t.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var T,b=t.maxPlaylistRetries;null==b&&(b=1/0),Sn=c,n.experimentalBufferBasedABR=Boolean(y),n.experimentalLeastPixelDiffSelector=Boolean(v),n.withCredentials=s,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=m,n.useCueTags_=f,n.blacklistDuration=h,n.maxPlaylistRetries=b,n.enableLowInitialPlaylist=p,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:s,handleManifestRedirects:a,maxPlaylistRetries:b,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(T={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){T[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:En,activeTrack:En,getActiveGroup:En,onGroupChanged:En,onTrackChanged:En,lastTrack_:null,logger_:Se("MediaGroups["+e+"]")}})),T),n.mediaSource=new(u().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind((0,r.Z)(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind((0,r.Z)(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind((0,r.Z)(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=d.default.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new Wn(t),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Xn,n.sourceUpdater_=new Bn(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new Kn;var E={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:_,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:l,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:g,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new Ot(i,n.vhs_,n.requestOptions_):new ct(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new bn(d.default.mergeOptions(E,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new bn(d.default.mergeOptions(E,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new Hn(d.default.mergeOptions(E,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),ir.forEach((function(e){n[e+"_"]=ar.bind((0,r.Z)(n),e)})),n.logger_=Se("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var S="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(S,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}(0,i.Z)(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var r=this.media(),i=r&&(r.id||r.uri),a=e.id||e.uri;i&&i!==a&&(this.logger_("switch media "+i+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=u().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(u().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,r=e.mediaGroups.AUDIO,i=Object.keys(r);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=r.main||i.length&&r[i[0]];for(var s in a)if(a[s].default){n={label:s};break}}if(!n)return t;var o=[];for(var u in r)if(r[u][n.label]){var l=r[u][n.label];if(l.playlists&&l.playlists.length)o.push.apply(o,l.playlists);else if(l.uri)o.push(l);else if(e.playlists.length)for(var d=0;d<e.playlists.length;d++){var c=e.playlists[d];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===u&&o.push(c)}}return o.length?o:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ke(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){tr[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.vhs,a=e.segmentLoaders,s=a.AUDIO,o=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var s=null;a.attributes[e]&&(s=i[a.attributes[e]]);var o=Object.keys(i);if(!s)if("AUDIO"===e&&o.length>1&&Qe(t.master))for(var u=0;u<o.length;u++){var l=i[o[u]];if(nr(l,a)){s=l;break}}else i.main?s=i.main:1===o.length&&(s=i[o[0]]);return void 0===n?s:null!==n&&s&&s.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=rr[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.getActiveGroup(),u=a.activePlaylistLoader,l=a.lastGroup_;o&&l&&o.id===l.id||(a.lastGroup_=o,a.lastTrack_=s,Zn(r,a),o&&!o.isMasterPlaylist&&(o.playlistLoader?(r.resyncLoader(),Jn(o.playlistLoader,a)):u&&i.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,r=t.segmentLoaders,i=r[e],a=r.main,s=t.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),l=s.activePlaylistLoader,d=s.lastTrack_;if((!d||!o||d.id!==o.id)&&(s.lastGroup_=u,s.lastTrack_=o,Zn(i,s),u)){if(u.isMasterPlaylist){if(!o||!d||o.id===d.id)return;var c=t.vhs.masterPlaylistController_,f=c.selectPlaylist();if(c.media()===f)return;return s.logger_("track change. Switching master audio from "+d.id+" to "+o.id),n.pause(),a.resetEverything(),void c.fastQualityChange_(f)}if("AUDIO"===e){if(!u.playlistLoader)return a.setAudio(!0),void a.resetEverything();i.setAudio(!0),a.setAudio(!1)}l!==u.playlistLoader?(i.track&&i.track(o),i.resetEverything(),Jn(u.playlistLoader,s)):Jn(u.playlistLoader,s)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var u=t.AUDIO.activeGroup();if(u){var l=(u.filter((function(e){return e.default}))[0]||u[0]).id;t.AUDIO.tracks[l].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var d=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};for(var c in r.audioTracks().addEventListener("change",d),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){r.audioTracks().removeEventListener("change",d),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[c])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ke(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a])n.AUDIO[a][s].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Sn.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,r=e.currentTime,i=e.nextPlaylist,a=e.bufferLowWaterLine,s=e.bufferHighWaterLine,o=e.duration,u=e.experimentalBufferBasedABR,l=e.log;if(!i)return d.default.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t)return l(c+" as current playlist is not set"),!0;if(i.id===t.id)return!1;var f=Boolean(Ie(n,r).length);if(!t.endList)return f||"number"!=typeof t.partTargetDuration?(l(c+" as current playlist is live"),!0):(l("not "+c+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var h=Oe(n,r),p=u?Mt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Mt.MAX_BUFFER_LOW_WATER_LINE;if(o<p)return l(c+" as duration < max low water line ("+o+" < "+p+")"),!0;var m=i.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(m<g&&(!u||h<s)){var y=c+" as next bandwidth < current bandwidth ("+m+" < "+g+")";return u&&(y+=" and forwardBuffer < bufferHighWaterLine ("+h+" < "+s+")"),l(y),!0}if((!u||m>g)&&h>=a){var v=c+" as forwardBuffer >= bufferLowWaterLine ("+h+" >= "+a+")";return u&&(v+=" and next bandwidth > current bandwidth ("+m+" > "+g+")"),l(v),!0}return l("not "+c+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:i,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){d.default.browser.IE_VERSION||d.default.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(d.default.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=Sn.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=Ce;var a=i.end(i.length-1);return a-r<=Ce&&n-a<=Ce},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var r,i=this.masterPlaylistLoader_.master.playlists,a=i.filter(ze),s=1===a.length&&a[0]===n;if(1===i.length&&t!==1/0)return d.default.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var o=!1;i.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(o=!0,delete e.excludeUntil)}})),o&&(d.default.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}r=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=r,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var u=this.selectPlaylist();if(!u)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=e.internal?this.logger_:d.default.log.warn,c=e.message?" "+e.message:"";l((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+c+" Switching to playlist "+u.id+"."),u.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var f=u.targetDuration/2*1e3||5e3,h="number"==typeof u.lastRequest&&Date.now()-u.lastRequest<=f;return this.switchMedia_(u,"exclude",s||h)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,r=[],i="all"===e;(i||"main"===e)&&r.push(this.masterPlaylistLoader_);var a=[];(i||"audio"===e)&&a.push("AUDIO"),(i||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&r.push(t)})),["main","audio","subtitle"].forEach((function(t){var i=n[t+"SegmentLoader_"];!i||e!==t&&"all"!==e||r.push(i)})),r.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=Ie(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Sn.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var r=this.masterPlaylistLoader_.master,i=Sn.Playlist.seekable(t,n,Sn.Playlist.liveEdgeDelay(r,t));if(0!==i.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=Sn.Playlist.seekable(t,n,Sn.Playlist.liveEdgeDelay(r,t))).length)return}var a,s;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>i.end(0)||i.start(0)>e.end(0)?this.seekable_=i:this.seekable_=d.default.createTimeRanges([[e.start(0)>i.start(0)?e.start(0):i.start(0),e.end(0)<i.end(0)?e.end(0):i.end(0)]]):this.seekable_=i,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+Re(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),r=Sn.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=sn(this.master(),this.media()),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=n.video||t.main.videoCodec||E.xz),t.main.isMuxed&&(r.video+=","+(n.audio||t.main.audioCodec||E.lA)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(r.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||E.lA,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.video){var a,s={};if(["video","audio"].forEach((function(e){if(r.hasOwnProperty(e)&&(i=t[e].isFmp4,o=r[e],!(i?(0,E.p7)(o):(0,E.Hi)(o)))){var n=t[e].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(r[e]),"audio"===e&&(a=n)}var i,o})),i&&a&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=((0,E.kS)(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=((0,E.kS)(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+r[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var l=Object.keys(s).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+s[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:l,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(r){var i=t[r];if(-1===n.indexOf(i.id)){n.push(i.id);var a=sn(e.master,i),s=[];!a.audio||(0,E.Hi)(a.audio)||(0,E.p7)(a.audio)||s.push("audio codec "+a.audio),!a.video||(0,E.Hi)(a.video)||(0,E.p7)(a.video)||s.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&s.push("text codec "+a.text),s.length&&(i.excludeUntil=1/0,e.logger_("excluding "+i.id+" for unsupported: "+s.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],r=this.master().playlists,i=rn((0,E.kS)(e)),a=an(i),s=i.video&&(0,E.kS)(i.video)[0]||null,o=i.audio&&(0,E.kS)(i.audio)[0]||null;Object.keys(r).forEach((function(e){var i=r[e];if(-1===n.indexOf(i.id)&&i.excludeUntil!==1/0){n.push(i.id);var u=[],l=sn(t.masterPlaylistLoader_.master,i),d=an(l);if(l.audio||l.video){if(d!==a&&u.push('codec count "'+d+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var c=l.video&&(0,E.kS)(l.video)[0]||null,f=l.audio&&(0,E.kS)(l.audio)[0]||null;c&&s&&c.type.toLowerCase()!==s.type.toLowerCase()&&u.push('video codec "'+c.type+'" !== "'+s.type+'"'),f&&o&&f.type.toLowerCase()!==o.type.toLowerCase()&&u.push('audio codec "'+f.type+'" !== "'+o.type+'"')}u.length&&(i.excludeUntil=1/0,t.logger_("blacklisting "+i.id+": "+u.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var r,i=n,a=0;a<e.segments.length;a++){var s=e.segments[a];if(r||(r=Gn(t,i+s.duration/2)),r){if("cueIn"in s){r.endTime=i,r.adEndTime=i,i+=s.duration,r=null;continue}if(i<r.endTime){i+=s.duration;continue}r.endTime+=s.duration}else if("cueOut"in s&&((r=new(u().VTTCue)(i,i+s.duration,s.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(s.cueOut),t.addCue(r)),"cueOutCont"in s){var o=s.cueOutCont.split("/").map(parseFloat),l=o[0],d=o[1];(r=new(u().VTTCue)(i,i+s.duration,"")).adStartTime=i-l,r.adEndTime=r.adStartTime+d,t.addCue(r)}i+=s.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=Mt.GOAL_BUFFER_LENGTH,n=Mt.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Mt.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=Mt.BUFFER_LOW_WATER_LINE,n=Mt.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Mt.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,Mt.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?i:r)},n.bufferHighWaterLine=function(){return Mt.BUFFER_HIGH_WATER_LINE},t}(d.default.EventTarget),or=function(e,t,n){var r,i,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes){var u=t.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=sn(s.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,i=t.id,a=o,function(e){var t=r.master.playlists[i],n=Ge(t),s=ze(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||n||(a(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},ur=["seeking","seeked","pause","playing","error"],lr=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Se("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},r=function(){return t.monitorCurrentTime_()},i=function(){return t.techWaiting_()},a=function(){return t.cancelTimer_()},s=this.masterPlaylistController_,o=["main","subtitle","audio"],l={};o.forEach((function(e){l[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},s[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),t.tech_.on(["seeked","seeking"],l[e].reset)}));var d=function(e){["main","audio"].forEach((function(n){s[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=function(){return d("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(ur,a),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",i),t.tech_.off(ur,a),t.tech_.off("canplay",r),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),o.forEach((function(e){s[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),s[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),t.tech_.off(["seeked","seeking"],l[e].reset)})),t.checkCurrentTimeTimeout_&&u().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&u().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=u().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],r);this[e+"Buffered_"]=r,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:Pe(r)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Ce>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){var r=t.start(0);e=r+(r===t.end(0)?0:Ce)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+Re(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var i=this.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),s=i.audioBuffer?i.audioBuffered():null,o=i.videoBuffer?i.videoBuffered():null,u=this.media(),l=u.partTargetDuration?u.partTargetDuration:2*(u.targetDuration-we),d=[s,o],c=0;c<d.length;c++)if(d[c]&&Oe(d[c],n)<l)return!1;var f=ke(a,n);return 0!==f.length&&(e=f.start(0)+Ce,this.logger_("Buffered region starts ("+f.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Ie(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=ke(i,t);if(a.length>0){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,r){if(void 0===r&&(r=!1),!e.length)return!1;var i=e.end(e.length-1)+Ce;return!n.endList&&r&&(i=e.end(e.length-1)+3*n.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,r=e.currentTime;if(t){var i;if(t.length&&n.length){var a=Ie(t,r-3),s=Ie(t,r),o=Ie(n,r);o.length&&!s.length&&a.length&&(i={start:a.end(0),end:o.end(0)})}else ke(t,r).length||(i=this.gapFromVideoUnderflow_(t,r));return!!i&&(this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+r),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=ke(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+we),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return d.default.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return d.default.createTimeRanges(t)}(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:a}}return null},e}(),dr={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},cr=function e(t,n){var r=0,i=0,a=d.default.mergeOptions(dr,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var s=function(){i&&t.currentTime(i)},o=function(e){null!=e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},u=function(){return Date.now()-r<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(r=Date.now(),a.getSource.call(t,o)):void d.default.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function e(){t.off("loadedmetadata",s),t.off("error",u),t.off("dispose",e)};t.on("error",u),t.on("dispose",l),t.reloadSourceOnError=function(n){l(),e(t,n)}},fr="2.15.0",hr={PlaylistLoader:ct,Playlist:Ze,utils:wt,STANDARD_PLAYLIST_SELECTOR:hn,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Ze.isEnabled);return dn(t,(function(e,t){return cn(e,t)})),t.filter((function(t){return!!sn(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:hn,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&u().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),fn(this.playlists.master,t,parseInt(ln(this.tech_.el(),"width"),10)*r,parseInt(ln(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:cn,comparePlaylistResolution:function(e,t){var n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||u().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||u().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:mt()};Object.keys(Mt).forEach((function(e){Object.defineProperty(hr,e,{get:function(){return d.default.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),Mt[e]},set:function(t){d.default.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?d.default.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):Mt[e]=t}})}));var pr="videojs-vhs",mr=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.id){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};hr.canPlaySource=function(){return d.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var gr=function(e,t,n){if(!e)return e;var r={};t&&t.attributes&&t.attributes.CODECS&&(r=rn((0,E.kS)(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);var i=(0,E._5)(r.video),a=(0,E._5)(r.audio),s={};for(var o in e)s[o]={},a&&(s[o].audioContentType=a),i&&(s[o].videoContentType=i),t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(s[o].pssh=t.contentProtection[o].pssh),"string"==typeof e[o]&&(s[o].url=e[o]);return d.default.mergeOptions(e,s)},yr=function(e,t){return e.reduce((function(e,n){if(!n.contentProtection)return e;var r=t.reduce((function(e,t){var r=n.contentProtection[t];return r&&r.pssh&&(e[t]={pssh:r.pssh}),e}),{});return Object.keys(r).length&&e.push(r),e}),[])},vr=function(e){var t=e.player,n=e.sourceKeySystems,r=e.audioMedia,i=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=r?i.concat([r]):i,s=yr(a,Object.keys(n)),o=[],u=[];return s.forEach((function(e){u.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),o.push(new Promise((function(n,r){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?r(e):n()}))})))})),Promise.race([Promise.all(o),Promise.race(u)])},_r=function(e){var t=e.player,n=e.sourceKeySystems,r=e.media,i=e.audioMedia,a=gr(n,r,i);return!(!a||(t.currentSource().keySystems=a,a&&!t.eme&&(d.default.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1)))},Tr=function(){if(!u().localStorage)return null;var e=u().localStorage.getItem(pr);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},br=function(e){return 0===e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(e.substring(e.indexOf(",")+1)):e};hr.supportsNativeHls=function(){if(!s()||!s().createElement)return!1;var e=s().createElement("video");return!!d.default.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),hr.supportsNativeDash=!!(s()&&s().createElement&&d.default.getTech("Html5").isSupported())&&/maybe|probably/i.test(s().createElement("video").canPlayType("application/dash+xml")),hr.supportsTypeNatively=function(e){return"hls"===e?hr.supportsNativeHls:"dash"===e&&hr.supportsNativeDash},hr.isSupported=function(){return d.default.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Er=function(e){function t(t,n,i){var a;if(a=e.call(this,n,d.default.mergeOptions(i.hls,i.vhs))||this,i.hls&&Object.keys(i.hls).length&&d.default.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof i.initialBandwidth&&(a.options_.bandwidth=i.initialBandwidth),a.logger_=Se("VhsHandler"),n.options_&&n.options_.playerId){var o=(0,d.default)(n.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return d.default.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),(0,r.Z)(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return d.default.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),(0,r.Z)(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return d.default.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),(0,r.Z)(a)},configurable:!0}),a.player_=o}if(a.tech_=n,a.source_=t,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(s(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=s().fullscreenElement||s().webkitFullscreenElement||s().mozFullScreenElement||s().msFullscreenElement;t&&t.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()})),a.on(a.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),a.on(a.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),a.on(a.tech_,"play",a.play),a}(0,i.Z)(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Tr();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Mt.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Mt.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){this.setOptions_(),this.options_.src=br(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=hr,this.options_.sourceType=(0,S.t)(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&d.default.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new sr(this.options_);var r=d.default.mergeOptions({liveRangeSafeTimeDelta:Ce},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new lr(r),this.masterPlaylistController_.on("error",(function(){var e=d.default.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var i=this.options_.experimentalBufferBasedABR?hr.movingAverageBandwidthSelector(.55):hr.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):i.bind(this),this.masterPlaylistController_.selectInitialPlaylist=hr.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=u().navigator.connection||u().navigator.mozConnection||u().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var r=1e3*t.downlink*1e3;e=r>=n&&e>=n?Math.max(e,r):r}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){d.default.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Pe(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Pe(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!u().localStorage)return!1;var t=Tr();t=t?d.default.mergeOptions(t,e):e;try{u().localStorage.setItem(pr,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=Qe(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!Ge(e)})).map((function(t,n){return new or(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=u().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),vr({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=_r({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",(function(t){if("output-restricted"===t.status){var n=e.masterPlaylistController_.master();if(n&&n.playlists){var r,i=[];n.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,i.push(e))})),i.length&&((r=d.default.log).warn.apply(r,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(i)),e.masterPlaylistController_.fastQualityChange_())}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==d.default.browser.IE_VERSION&&n?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=d.default.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),mr(t,n.playlists)})),this.playlists.on("mediachange",(function(){mr(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":fr,"mux.js":"6.0.1","mpd-parser":"0.22.0","m3u8-parser":"4.8.0","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return Bn.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&u().URL.revokeObjectURL&&(u().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===r)return i({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,r=0,i=0;i<t.segments.length&&!(e<=(r=(n=t.segments[i]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration));i++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(r,t);if(!a)return i({message:"valid programTime was not found"});if("estimate"===a.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:r},o=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)}(r,a.segment);return o&&(s.programDateTime=o.toISOString()),i(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=2),Ct({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(d.default.getComponent("Component")),Sr={name:"videojs-http-streaming",VERSION:fr,canHandleSource:function(e,t){void 0===t&&(t={});var n=d.default.mergeOptions(d.default.options,t);return Sr.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var r=d.default.mergeOptions(d.default.options,n);return t.vhs=new Er(e,t,r),d.default.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return d.default.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=mt(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=d.default.mergeOptions(d.default.options,t),r=n.vhs,i=(r=void 0===r?{}:r).overrideNative,a=void 0===i?!d.default.browser.IS_ANY_SAFARI:i,s=n.hls,o=(s=void 0===s?{}:s).overrideNative,u=void 0!==o&&o,l=(0,S.t)(e);return l&&(!hr.supportsTypeNatively(l)||u||a)?"maybe":""}};(0,E.p7)("avc1.4d400d,mp4a.40.2")&&d.default.getTech("Html5").registerSourceHandler(Sr,0),d.default.VhsHandler=Er,Object.defineProperty(d.default,"HlsHandler",{get:function(){return d.default.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Er},configurable:!0}),d.default.VhsSourceHandler=Sr,Object.defineProperty(d.default,"HlsSourceHandler",{get:function(){return d.default.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Sr},configurable:!0}),d.default.Vhs=hr,Object.defineProperty(d.default,"Hls",{get:function(){return d.default.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),hr},configurable:!0}),d.default.use||(d.default.registerComponent("Hls",hr),d.default.registerComponent("Vhs",hr)),d.default.options.vhs=d.default.options.vhs||{},d.default.options.hls=d.default.options.hls||{},d.default.getPlugin&&d.default.getPlugin("reloadSourceOnError")||(d.default.registerPlugin||d.default.plugin)("reloadSourceOnError",(function(e){cr(this,e)}))},60562:(e,t,n)=>{"use strict";n.d(t,{Au:()=>i,G3:()=>h,Ki:()=>a,d3:()=>d,hL:()=>l,lx:()=>f,qX:()=>c,tm:()=>u});var r=n(58908),i=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},a=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||i(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},s=n.n(r)().BigInt||Number,o=[s("0x1"),s("0x100"),s("0x10000"),s("0x1000000"),s("0x100000000"),s("0x10000000000"),s("0x1000000000000"),s("0x100000000000000"),s("0x10000000000000000")],u=(function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}(),function(e,t){var n=void 0===t?{}:t,r=n.signed,i=void 0!==r&&r,u=n.le,l=void 0!==u&&u;e=a(e);var d=l?"reduce":"reduceRight",c=(e[d]?e[d]:Array.prototype[d]).call(e,(function(t,n,r){var i=l?r:Math.abs(r+1-e.length);return t+s(n)*o[i]}),s(0));if(i){var f=o[e.length]/s(2)-s(1);(c=s(c))>f&&(c-=f,c-=f,c-=s(2))}return Number(c)}),l=function(e,t){var n=(void 0===t?{}:t).le,r=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var i,a=(i=e=s(e),Math.ceil(function(e){return e.toString(2).length}(i)/8)),u=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var d=r?l:Math.abs(l+1-u.length);u[d]=Number(e/o[l]&s(255)),e<0&&(u[d]=Math.abs(~u[d]),u[d]-=0===l?1:2)}return u},d=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,a(e));try{return decodeURIComponent(escape(t))}catch(e){}return t},c=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n},f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if((t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e}))).length<=1)return a(t[0]);var r=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),i=new Uint8Array(r),s=0;return t.forEach((function(e){e=a(e),i.set(e,s),s+=e.byteLength})),i},h=function(e,t,n){var r=void 0===n?{}:n,i=r.offset,s=void 0===i?0:i,o=r.mask,u=void 0===o?[]:o;e=a(e);var l=(t=a(t)).every?t.every:Array.prototype.every;return t.length&&e.length-s>=t.length&&l.call(t,(function(t,n){return t===(u[n]?u[n]&e[s+n]:e[s+n])}))}},92260:(e,t,n)=>{"use strict";n.d(t,{Hi:()=>p,Jg:()=>d,KL:()=>c,_5:()=>f,kS:()=>l,lA:()=>m,p7:()=>h,ws:()=>u,xz:()=>g});var r=n(58908),i=n.n(r),a={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},s=["video","audio","text"],o=["Video","Audio","Text"],u=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},l=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),s.forEach((function(r){var i=a[r].exec(e.toLowerCase());if(i&&!(i.length<=1)){t=r;var s=e.substring(0,i[1].length),o=e.replace(s,"");n.push({type:s,details:o,mediaType:r})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},d=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return l(i.playlists[0].attributes.CODECS)}return null},c=function(e){return void 0===e&&(e=""),a.audio.test(e.trim().toLowerCase())},f=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return u(e.trim())})),r="video";1===n.length&&c(n[0])?r="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),a.text.test(t.trim().toLowerCase()))&&(r="application");var i="mp4";return n.every((function(e){return a.mp4.test(e)}))?i="mp4":n.every((function(e){return a.webm.test(e)}))?i="webm":n.every((function(e){return a.ogg.test(e)}))&&(i="ogg"),r+"/"+i+';codecs="'+e+'"'}},h=function(e){return void 0===e&&(e=""),i().MediaSource&&i().MediaSource.isTypeSupported&&i().MediaSource.isTypeSupported(f(e))||!1},p=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<o.length;t++)if(a["muxer"+o[t]].test(e))return!0;return!1}))},m="mp4a.40.2",g="avc1.4d400d"},47530:(e,t,n)=>{"use strict";n.d(t,{Xm:()=>w,cz:()=>C});var r,i=n(60562),a=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?(0,i.qX)(e):e}),s=function(e){e=(0,i.Ki)(e);for(var t=[],n=0;e.length>n;){var a=e[n],s=0,o=0,u=e[++o];for(o++;128&u;)s=(127&u)<<7,u=e[o],o++;s+=127&u;for(var l=0;l<r.length;l++){var d=r[l],c=d.id,f=d.parser;if(a===c){t.push(f(e.subarray(o,o+s)));break}}n+=s+o}return t};r=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=(0,i.d3)(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=s(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:s(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var o=function e(t,n,r){void 0===r&&(r=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return a(e)})):[a(e)]}(n),t=(0,i.Ki)(t);var s=[];if(!n.length)return s;for(var o=0;o<t.length;){var u=(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3])>>>0,l=t.subarray(o+4,o+8);if(0===u)break;var d=o+u;if(d>t.length){if(r)break;d=t.length}var c=t.subarray(o+8,d);(0,i.G3)(l,n[0])&&(1===n.length?s.push(c):s.push.apply(s,e(c,n.slice(1),r))),o=d}return s},u={EBML:(0,i.Ki)([26,69,223,163]),DocType:(0,i.Ki)([66,130]),Segment:(0,i.Ki)([24,83,128,103]),SegmentInfo:(0,i.Ki)([21,73,169,102]),Tracks:(0,i.Ki)([22,84,174,107]),Track:(0,i.Ki)([174]),TrackNumber:(0,i.Ki)([215]),DefaultDuration:(0,i.Ki)([35,227,131]),TrackEntry:(0,i.Ki)([174]),TrackType:(0,i.Ki)([131]),FlagDefault:(0,i.Ki)([136]),CodecID:(0,i.Ki)([134]),CodecPrivate:(0,i.Ki)([99,162]),VideoTrack:(0,i.Ki)([224]),AudioTrack:(0,i.Ki)([225]),Cluster:(0,i.Ki)([31,67,182,117]),Timestamp:(0,i.Ki)([231]),TimestampScale:(0,i.Ki)([42,215,177]),BlockGroup:(0,i.Ki)([160]),BlockDuration:(0,i.Ki)([155]),Block:(0,i.Ki)([161]),SimpleBlock:(0,i.Ki)([163])},l=[128,64,32,16,8,4,2,1],d=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var a=function(e){for(var t=1,n=0;n<l.length&&!(e&l[n]);n++)t++;return t}(e[t]),s=e.subarray(t,t+a);return n&&((s=Array.prototype.slice.call(e,t,t+a))[0]^=l[a-1]),{length:a,value:(0,i.tm)(s,{signed:r}),bytes:s}},c=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?(0,i.hL)(t):t},f=function e(t,n,r){if(r>=n.length)return n.length;var a=d(n,r,!1);if((0,i.G3)(t.bytes,a.bytes))return r;var s=d(n,r+a.length);return e(t,n,r+s.length+s.value+a.length)},h=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return c(e)})):[c(e)]}(n),t=(0,i.Ki)(t);var r=[];if(!n.length)return r;for(var a=0;a<t.length;){var s=d(t,a,!1),o=d(t,a+s.length),u=a+s.length+o.length;127===o.value&&(o.value=f(s,t,u),o.value!==t.length&&(o.value-=u));var l=u+o.value>t.length?t.length:u+o.value,h=t.subarray(u,l);(0,i.G3)(n[0],s.bytes)&&(1===n.length?r.push(h):r=r.concat(e(h,n.slice(1)))),a+=s.length+o.length+h.length}return r},p=n(68925),m=(0,i.Ki)([0,0,0,1]),g=(0,i.Ki)([0,0,1]),y=(0,i.Ki)([0,0,3]),v=function(e){for(var t=[],n=1;n<e.length-2;)(0,i.G3)(e.subarray(n,n+3),y)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var r=e.length-t.length,a=new Uint8Array(r),s=0;for(n=0;n<r;s++,n++)s===t[0]&&(s++,t.shift()),a[n]=e[s];return a},_=function(e,t,n,r){void 0===r&&(r=1/0),e=(0,i.Ki)(e),n=[].concat(n);for(var a,s=0,o=0;s<e.length&&(o<r||a);){var u=void 0;if((0,i.G3)(e.subarray(s),m)?u=4:(0,i.G3)(e.subarray(s),g)&&(u=3),u){if(o++,a)return v(e.subarray(a,s));var l=void 0;"h264"===t?l=31&e[s+u]:"h265"===t&&(l=e[s+u]>>1&63),-1!==n.indexOf(l)&&(a=s+u),s+=u+("h264"===t?1:2)}else s++}return e.subarray(0,0)},T={webm:(0,i.Ki)([119,101,98,109]),matroska:(0,i.Ki)([109,97,116,114,111,115,107,97]),flac:(0,i.Ki)([102,76,97,67]),ogg:(0,i.Ki)([79,103,103,83]),ac3:(0,i.Ki)([11,119]),riff:(0,i.Ki)([82,73,70,70]),avi:(0,i.Ki)([65,86,73]),wav:(0,i.Ki)([87,65,86,69]),"3gp":(0,i.Ki)([102,116,121,112,51,103]),mp4:(0,i.Ki)([102,116,121,112]),fmp4:(0,i.Ki)([115,116,121,112]),mov:(0,i.Ki)([102,116,121,112,113,116]),moov:(0,i.Ki)([109,111,111,118]),moof:(0,i.Ki)([109,111,111,102])},b={aac:function(e){var t=(0,p.c)(e);return(0,i.G3)(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=(0,p.c)(e);return(0,i.G3)(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=h(e,[u.EBML,u.DocType])[0];return(0,i.G3)(t,T.webm)},mkv:function(e){var t=h(e,[u.EBML,u.DocType])[0];return(0,i.G3)(t,T.matroska)},mp4:function(e){return!b["3gp"](e)&&!b.mov(e)&&(!(!(0,i.G3)(e,T.mp4,{offset:4})&&!(0,i.G3)(e,T.fmp4,{offset:4}))||!(!(0,i.G3)(e,T.moof,{offset:4})&&!(0,i.G3)(e,T.moov,{offset:4}))||void 0)},mov:function(e){return(0,i.G3)(e,T.mov,{offset:4})},"3gp":function(e){return(0,i.G3)(e,T["3gp"],{offset:4})},ac3:function(e){var t=(0,p.c)(e);return(0,i.G3)(e,T.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=(0,p.c)(e);return(0,i.G3)(e,T.flac,{offset:t})},ogg:function(e){return(0,i.G3)(e,T.ogg)},avi:function(e){return(0,i.G3)(e,T.riff)&&(0,i.G3)(e,T.avi,{offset:8})},wav:function(e){return(0,i.G3)(e,T.riff)&&(0,i.G3)(e,T.wav,{offset:8})},h264:function(e){return function(e,t,n){return _(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return _(e,"h265",[32,33],3)}(e).length}},E=Object.keys(b).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);E.forEach((function(e){var t=b[e];b[e]=function(e){return t((0,i.Ki)(e))}}));var S=b,w=function(e){e=(0,i.Ki)(e);for(var t=0;t<E.length;t++){var n=E[t];if(S[n](e))return n}return""},C=function(e){return o(e,["moof"]).length>0}},36722:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(58908),i=n.n(r),a=n(48764).Buffer;function s(e){for(var t=function(e){return i().atob?i().atob(e):a.from(e,"base64").toString("binary")}(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}},68925:(e,t,n)=>{"use strict";n.d(t,{c:()=>a});var r=n(60562),i=(0,r.Ki)([73,68,51]),a=function e(t,n){return void 0===n&&(n=0),(t=(0,r.Ki)(t)).length-n<10||!(0,r.G3)(t,i,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=(0,r.Ki)(e))[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))}},6723:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var r=function(e,t,n){t.forEach((function(t){for(var r in e.mediaGroups[t])for(var i in e.mediaGroups[t][r]){var a=e.mediaGroups[t][r][i];n(a,t,r,i)}}))}},8485:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,i=/^application\/dash\+xml/i,a=function(e){return r.test(e)?"hls":i.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null}},80779:(e,t,n)=>{"use strict";n.d(t,{Z:()=>u});var r=n(49945),i=n.n(r),a=n(58908),s=n.n(a),o="http://example.com";const u=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=s().location&&s().location.href||"");var n="function"==typeof s().URL,r=/^\/\//.test(e),a=!s().location&&!/\/\//i.test(e);if(n?e=new(s().URL)(e,s().location||o):/\/\//i.test(e)||(e=i().buildAbsoluteURL(s().location&&s().location.href||"",e)),n){var u=new URL(t,e);return a?u.href.slice(o.length):r?u.href.slice(u.protocol.length):u.href}return i().buildAbsoluteURL(e,t)}},80976:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var r=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}()},13490:(e,t,n)=>{"use strict";var r=n(58908);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,i,a){if(n)e(n);else if(i.statusCode>=400&&i.statusCode<=599){var s=a;if(t)if(r.TextDecoder){var o=(void 0===(u=i.headers&&i.headers["content-type"])&&(u=""),u.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),r=n[0],i=n[1];return"charset"===r.trim()?i.trim():e}),"utf-8"));try{s=new TextDecoder(o).decode(a)}catch(e){}}else s=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:s})}else e(null,a);var u}}},9603:(e,t,n)=>{"use strict";var r=n(58908),i=n(10434),a=n(27376);function s(e,t,n){var r=e;return a(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=i({},t,{uri:e}),r.callback=n,r}function o(e,t,n){return u(t=s(e,t,n))}function u(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),g)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function a(){if(!u){var t;clearTimeout(d),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var i=y,a=null;return 0!==t?(i={body:r(),statusCode:t,method:f,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(i.headers=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),r=e.slice(0,n).trim().toLowerCase(),i=e.slice(n+1).trim();void 0===t[r]?t[r]=i:Array.isArray(t[r])?t[r].push(i):t[r]=[t[r],i]})),t):t}(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,i,i.body)}}var s,u,l=e.xhr||null;l||(l=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var d,c=l.url=e.uri||e.url,f=l.method=e.method||"GET",h=e.body||e.data,p=l.headers=e.headers||{},m=!!e.sync,g=!1,y={body:void 0,headers:{},statusCode:0,method:f,url:c,rawRequest:l};if("json"in e&&!1!==e.json&&(g=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=i,l.onprogress=function(){},l.onabort=function(){u=!0},l.ontimeout=i,l.open(f,c,!m,e.username,e.password),m||(l.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(d=setTimeout((function(){if(!u){u=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),l.setRequestHeader)for(s in p)p.hasOwnProperty(s)&&l.setRequestHeader(s,p[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}o.httpHandler=n(13490),e.exports=o,e.exports.default=o,o.XMLHttpRequest=r.XMLHttpRequest||function(){},o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){o["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),u(n)}}))},85215:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>zo});for(var r,i=n(58908),a=n.n(i),s=n(89144),o=n.n(s),u=n(87462),l=n(27537),d=n.n(l),c=n(97326),f=n(94578),h=n(75974),p=n.n(h),m=n(9603),g=n.n(m),y=n(13407),v=n.n(y),_=n(5647),T=n(60136),b=n(80779),E=n(54758),S=n(92260),w=n(8485),C=n(60562),A=n(40973),I=n(84221),k=n.n(I),R=n(68925),P=n(47530),D=n(51489),O="7.20.3",M={},L=function(e,t){return M[e]=M[e]||[],t&&(M[e]=M[e].concat(t)),M[e]},N=function(e,t){var n=L(e).indexOf(t);return!(n<=-1||(M[e]=M[e].slice(),M[e].splice(n,1),0))},x={prefixed:!0},F=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],U=F[0],j=0;j<F.length;j++)if(F[j][1]in o()){r=F[j];break}if(r){for(var B=0;B<r.length;B++)x[U[B]]=r[B];x.prefixed=r[0]!==U[0]}var V=[],q=function e(t){var n,r="info",i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n("log",r,t)};return n=function(e,t){return function(n,r,i){var s=t.levels[r],o=new RegExp("^("+s+")$");if("log"!==n&&i.unshift(n.toUpperCase()+":"),i.unshift(e+":"),V){V.push([].concat(i));var u=V.length-1e3;V.splice(0,u>0?u:0)}if(a().console){var l=a().console[n];l||"debug"!==n||(l=a().console.info||a().console.log),l&&s&&o.test(n)&&l[Array.isArray(i)?"apply":"call"](a().console,i)}}}(t,i),i.createLogger=function(n){return e(t+": "+n)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},i.level=function(e){if("string"==typeof e){if(!i.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(i.history=function(){return V?[].concat(V):[]}).filter=function(e){return(V||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},i.history.clear=function(){V&&(V.length=0)},i.history.disable=function(){null!==V&&(V.length=0,V=null)},i.history.enable=function(){null===V&&(V=[])},i.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("error",r,t)},i.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("warn",r,t)},i.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("debug",r,t)},i}("VIDEOJS"),H=q.createLogger,G=Object.prototype.toString,z=function(e){return Y(e)?Object.keys(e):[]};function W(e,t){z(e).forEach((function(n){return t(e[n],n)}))}function K(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?u.Z.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&W(t,(function(t,n){e[n]=t}))})),e)}function Y(e){return!!e&&"object"==typeof e}function X(e){return Y(e)&&"[object Object]"===G.call(e)&&e.constructor===Object}function Q(e,t){if(!e||!t)return"";if("function"==typeof a().getComputedStyle){var n;try{n=a().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var Z,J,$,ee=a().navigator&&a().navigator.userAgent||"",te=/AppleWebKit\/([\d.]+)/i.exec(ee),ne=te?parseFloat(te.pop()):null,re=/iPod/i.test(ee),ie=(Z=ee.match(/OS (\d+)_/i))&&Z[1]?Z[1]:null,ae=/Android/i.test(ee),se=function(){var e=ee.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),oe=ae&&se<5&&ne<537,ue=/Firefox/i.test(ee),le=/Edg/i.test(ee),de=!le&&(/Chrome/i.test(ee)||/CriOS/i.test(ee)),ce=function(){var e=ee.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),fe=(J=/MSIE\s(\d+)\.\d/.exec(ee),!($=J&&parseFloat(J[1]))&&/Trident\/7.0/i.test(ee)&&/rv:11.0/.test(ee)&&($=11),$),he=/Safari/i.test(ee)&&!de&&!ae&&!le,pe=/Windows/i.test(ee),me=Boolean(Se()&&("ontouchstart"in a()||a().navigator.maxTouchPoints||a().DocumentTouch&&a().document instanceof a().DocumentTouch)),ge=/iPad/i.test(ee)||he&&me&&!/iPhone/i.test(ee),ye=/iPhone/i.test(ee)&&!ge,ve=ye||ge||re,_e=(he||ve)&&!de,Te=Object.freeze({__proto__:null,IS_IPOD:re,IOS_VERSION:ie,IS_ANDROID:ae,ANDROID_VERSION:se,IS_NATIVE_ANDROID:oe,IS_FIREFOX:ue,IS_EDGE:le,IS_CHROME:de,CHROME_VERSION:ce,IE_VERSION:fe,IS_SAFARI:he,IS_WINDOWS:pe,TOUCH_ENABLED:me,IS_IPAD:ge,IS_IPHONE:ye,IS_IOS:ve,IS_ANY_SAFARI:_e});function be(e){return"string"==typeof e&&Boolean(e.trim())}function Ee(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Se(){return o()===a().document}function we(e){return Y(e)&&1===e.nodeType}function Ce(){try{return a().parent!==a().self}catch(e){return!0}}function Ae(e){return function(t,n){if(!be(t))return o()[e](null);be(n)&&(n=o().querySelector(n));var r=we(n)?n:o();return r[e]&&r[e](t)}}function Ie(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=o().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(q.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),i.setAttribute(e,n)):"textContent"===e?ke(i,n):i[e]===n&&"tabIndex"!==e||(i[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){i.setAttribute(e,n[e])})),r&&Ke(i,r),i}function ke(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Re(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Pe(e,t){return Ee(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function De(e,t){return e.classList?e.classList.add(t):Pe(e,t)||(e.className=(e.className+" "+t).trim()),e}function Oe(e,t){return e?(e.classList?e.classList.remove(t):(Ee(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(q.warn("removeClass was called with an element that doesn't exist"),null)}function Me(e,t,n){var r=Pe(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?De(e,t):Oe(e,t),e}function Le(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)}))}function Ne(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,r=n.length-1;r>=0;r--){var i=n[r].name,a=n[r].value;"boolean"!=typeof e[i]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+i+",")||(a=null!==a),t[i]=a}return t}function xe(e,t){return e.getAttribute(t)}function Fe(e,t,n){e.setAttribute(t,n)}function Ue(e,t){e.removeAttribute(t)}function je(){o().body.focus(),o().onselectstart=function(){return!1}}function Be(){o().onselectstart=function(){return!0}}function Ve(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(Q(e,"height"))),n.width||(n.width=parseFloat(Q(e,"width"))),n}}function qe(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,r=0,i=0;e.offsetParent&&e!==o()[x.fullscreenElement];)r+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;return{left:r,top:i,width:t,height:n}}function He(e,t){var n={x:0,y:0};if(ve)for(var r=e;r&&"html"!==r.nodeName.toLowerCase();){var i=Q(r,"transform");if(/^matrix/.test(i)){var a=i.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(i)){var s=i.slice(9,-1).split(/,\s/).map(Number);n.x+=s[12],n.y+=s[13]}r=r.parentNode}var o={},u=qe(t.target),l=qe(e),d=l.width,c=l.height,f=t.offsetY-(l.top-u.top),h=t.offsetX-(l.left-u.left);return t.changedTouches&&(h=t.changedTouches[0].pageX-l.left,f=t.changedTouches[0].pageY+l.top,ve&&(h-=n.x,f-=n.y)),o.y=1-Math.max(0,Math.min(1,f/c)),o.x=Math.max(0,Math.min(1,h/d)),o}function Ge(e){return Y(e)&&3===e.nodeType}function ze(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function We(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),we(e)||Ge(e)?e:"string"==typeof e&&/\S/.test(e)?o().createTextNode(e):void 0})).filter((function(e){return e}))}function Ke(e,t){return We(t).forEach((function(t){return e.appendChild(t)})),e}function Ye(e,t){return Ke(ze(e),t)}function Xe(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var Qe,Ze=Ae("querySelector"),Je=Ae("querySelectorAll"),$e=Object.freeze({__proto__:null,isReal:Se,isEl:we,isInFrame:Ce,createEl:Ie,textContent:ke,prependTo:Re,hasClass:Pe,addClass:De,removeClass:Oe,toggleClass:Me,setAttributes:Le,getAttributes:Ne,getAttribute:xe,setAttribute:Fe,removeAttribute:Ue,blockTextSelection:je,unblockTextSelection:Be,getBoundingClientRect:Ve,findPosition:qe,getPointerPosition:He,isTextNode:Ge,emptyEl:ze,normalizeContent:We,appendContent:Ke,insertContent:Ye,isSingleLeftClick:Xe,$:Ze,$$:Je}),et=!1,tt=function(){if(!1!==Qe.options.autoSetup){var e=Array.prototype.slice.call(o().getElementsByTagName("video")),t=Array.prototype.slice.call(o().getElementsByTagName("audio")),n=Array.prototype.slice.call(o().getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(var i=0,a=r.length;i<a;i++){var s=r[i];if(!s||!s.getAttribute){nt(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&Qe(s)}else et||nt(1)}};function nt(e,t){Se()&&(t&&(Qe=t),a().setTimeout(tt,e))}function rt(){et=!0,a().removeEventListener("load",rt)}Se()&&("complete"===o().readyState?rt():a().addEventListener("load",rt));var it,at=function(e){var t=o().createElement("style");return t.className=e,t},st=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},ot=3;function ut(){return ot++}a().WeakMap||(it=function(){function e(){this.vdata="vdata"+Math.floor(a().performance&&a().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||ut();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];q("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var lt,dt=a().WeakMap?new WeakMap:new it;function ct(e,t){if(dt.has(e)){var n=dt.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&dt.delete(e)}}function ft(e,t,n,r){n.forEach((function(n){e(t,n,r)}))}function ht(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var r=e||a().event;for(var i in e={},r)"layerX"!==i&&"layerY"!==i&&"keyLocation"!==i&&"webkitMovementX"!==i&&"webkitMovementY"!==i&&"path"!==i&&("returnValue"===i&&r.preventDefault||(e[i]=r[i]));if(e.target||(e.target=e.srcElement||o()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var s=o().documentElement,u=o().body;e.pageX=e.clientX+(s&&s.scrollLeft||u&&u.scrollLeft||0)-(s&&s.clientLeft||u&&u.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||u&&u.scrollTop||0)-(s&&s.clientTop||u&&u.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var pt=["touchstart","touchmove"];function mt(e,t,n){if(Array.isArray(t))return ft(mt,e,t,n);dt.has(e)||dt.set(e,{});var r=dt.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=ut()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=ht(t);var i=r.handlers[t.type];if(i)for(var a=i.slice(0),s=0,o=a.length;s<o&&!t.isImmediatePropagationStopped();s++)try{a[s].call(e,t,n)}catch(e){q.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var i=!1;(function(){if("boolean"!=typeof lt){lt=!1;try{var e=Object.defineProperty({},"passive",{get:function(){lt=!0}});a().addEventListener("test",null,e),a().removeEventListener("test",null,e)}catch(e){}}return lt})()&&pt.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,r.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function gt(e,t,n){if(dt.has(e)){var r=dt.get(e);if(r.handlers){if(Array.isArray(t))return ft(gt,e,t,n);var i=function(e,t){r.handlers[t]=[],ct(e,t)};if(void 0!==t){var a=r.handlers[t];if(a)if(n){if(n.guid)for(var s=0;s<a.length;s++)a[s].guid===n.guid&&a.splice(s--,1);ct(e,t)}else i(e,t)}else for(var o in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},o)&&i(e,o)}}}function yt(e,t,n){var r=dt.has(e)?dt.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=ht(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)yt.call(null,i,t,n);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){dt.has(t.target)||dt.set(t.target,{});var a=dt.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function vt(e,t,n){if(Array.isArray(t))return ft(vt,e,t,n);var r=function r(){gt(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||ut(),mt(e,t,r)}function _t(e,t,n){var r=function r(){gt(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||ut(),mt(e,t,r)}var Tt,bt=Object.freeze({__proto__:null,fixEvent:ht,on:mt,off:gt,trigger:yt,one:vt,any:_t}),Et=30,St=function(e,t,n){t.guid||(t.guid=ut());var r=t.bind(e);return r.guid=n?n+"_"+t.guid:t.guid,r},wt=function(e,t){var n=a().performance.now();return function(){var r=a().performance.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}},Ct=function(){};Ct.prototype.allowedEvents_={},Ct.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},mt(this,e,t),this.addEventListener=n},Ct.prototype.addEventListener=Ct.prototype.on,Ct.prototype.off=function(e,t){gt(this,e,t)},Ct.prototype.removeEventListener=Ct.prototype.off,Ct.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},vt(this,e,t),this.addEventListener=n},Ct.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},_t(this,e,t),this.addEventListener=n},Ct.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=ht(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),yt(this,e)},Ct.prototype.dispatchEvent=Ct.prototype.trigger,Ct.prototype.queueTrigger=function(e){var t=this;Tt||(Tt=new Map);var n=e.type||e,r=Tt.get(this);r||(r=new Map,Tt.set(this,r));var i=r.get(n);r.delete(n),a().clearTimeout(i);var s=a().setTimeout((function(){0===r.size&&(r=null,Tt.delete(t)),t.trigger(e)}),0);r.set(n,s)};var At=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},It=function(e){return e instanceof Ct||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},kt=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Rt=function(e,t,n){if(!e||!e.nodeName&&!It(e))throw new Error("Invalid target for "+At(t)+"#"+n+"; must be a DOM node or evented object.")},Pt=function(e,t,n){if(!kt(e))throw new Error("Invalid event type for "+At(t)+"#"+n+"; must be a non-empty string or array.")},Dt=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+At(t)+"#"+n+"; must be a function.")},Ot=function(e,t,n){var r,i,a,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return s?(r=e.eventBusEl_,t.length>=3&&t.shift(),i=t[0],a=t[1]):(r=t[0],i=t[1],a=t[2]),Rt(r,e,n),Pt(i,e,n),Dt(a,e,n),{isTargetingSelf:s,target:r,type:i,listener:a=St(e,a)}},Mt=function(e,t,n,r){Rt(e,e,t),e.nodeName?bt[t](e,n,r):e[t](n,r)},Lt={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ot(this,n,"on"),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(Mt(s,"on",o,u),!a){var l=function(){return e.off(s,o,u)};l.guid=u.guid;var d=function(){return e.off("dispose",l)};d.guid=u.guid,Mt(this,"on","dispose",l),Mt(s,"on","dispose",d)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ot(this,n,"one"),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(a)Mt(s,"one",o,u);else{var l=function t(){e.off(s,o,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)};l.guid=u.guid,Mt(s,"one",o,l)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ot(this,n,"any"),a=i.isTargetingSelf,s=i.target,o=i.type,u=i.listener;if(a)Mt(s,"any",o,u);else{var l=function t(){e.off(s,o,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)};l.guid=u.guid,Mt(s,"any",o,l)}},off:function(e,t,n){if(!e||kt(e))gt(this.eventBusEl_,e,t);else{var r=e,i=t;Rt(r,this,"off"),Pt(i,this,"off"),Dt(n,this,"off"),n=St(this,n),this.off("dispose",n),r.nodeName?(gt(r,i,n),gt(r,"dispose",n)):It(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){Rt(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!kt(n)){var r="Invalid event type for "+At(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(r);(this.log||q).error(r)}return yt(this.eventBusEl_,e,t)}};function Nt(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=Ie("span",{className:"vjs-event-bus"});return K(e,Lt),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&dt.has(e)&&dt.delete(e)})),a().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var xt={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),W(e,(function(e,r){n.state[r]!==e&&((t=t||{})[r]={from:n.state[r],to:e}),n.state[r]=e})),t&&It(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function Ft(e,t){return K(e,xt),e.state=K({},e.state,t),"function"==typeof e.handleStateChanged&&It(e)&&e.on("statechanged",e.handleStateChanged),e}var Ut=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},jt=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function Bt(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&W(t,(function(t,n){X(t)?(X(e[n])||(e[n]={}),e[n]=Bt(e[n],t)):e[n]=t}))})),e}var Vt=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),qt=a().Map?a().Map:Vt,Ht=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),Gt=a().Set?a().Set:Ht,zt=function(){function e(e,t,n){var r=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Bt({},this.options_),t=this.options_=Bt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+ut()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return r.addClass(e)})),!1!==t.evented&&(Nt(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Ft(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Gt,this.setIntervalIds_=new Gt,this.rafIds_=new Gt,this.namedRafs_=new qt,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=Bt(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return Ie(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[r],s=r&&r.split("-")[0],o=i&&i[s],u=n;return a&&a[e]?u=a[e]:o&&o[e]&&(u=o[e]),t&&(u=u.replace(/\{(\d+)\}/g,(function(e,n){var r=t[n-1],i=r;return void 0===r&&(i=e),i}))),u},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var r=this,i=0;i<t.length;i++)if(!(r=r.getChild(t[i]))||!r.getChild)return;return r},t.addChild=function(t,n,r){var i,a;if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){a=jt(t);var s=n.componentClass||a;n.name=a;var o=e.getComponent(s);if(!o)throw new Error("Component "+s+" does not exist");if("function"!=typeof o)return null;i=new o(this.player_||this,n)}else i=t;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(a=a||i.name&&jt(i.name()))&&(this.childNameIndex_[a]=i,this.childNameIndex_[Ut(a)]=i),"function"==typeof i.el&&i.el()){var u=null;this.children_[r+1]&&(this.children_[r+1].el_?u=this.children_[r+1].el_:we(this.children_[r+1])&&(u=this.children_[r+1])),this.contentEl().insertBefore(i.el(),u)}return i},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[jt(e.name())]=null,this.childNameIndex_[Ut(e.name())]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var r,i=this.options_,a=e.getComponent("Tech");(r=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!r.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var r,i;return"string"==typeof e?i=n[r=e]||t.options_[r]||{}:(r=e.name,i=e),{name:r,opts:i}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||jt(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var a=t.addChild(n,r);a&&(t[n]=a)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return Ze(e,t||this.contentEl())},t.$$=function(e,t){return Je(e,t||this.contentEl())},t.hasClass=function(e){return Pe(this.el_,e)},t.addClass=function(e){De(this.el_,e)},t.removeClass=function(e){Oe(this.el_,e)},t.toggleClass=function(e,t){Me(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return xe(this.el_,e)},t.setAttribute=function(e,t){Fe(this.el_,e,t)},t.removeAttribute=function(e){Ue(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+jt(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Q(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+jt(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(d().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=a().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var r=t.touches[0].pageX-n.pageX,i=t.touches[0].pageY-n.pageY;Math.sqrt(r*r+i*i)>10&&(e=!1)}}));var r=function(){e=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){n=null,!0===e&&a().performance.now()-t<200&&(r.preventDefault(),this.trigger("tap"))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=St(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,r=this;return e=St(this,e),this.clearTimersOnDispose_(),n=a().setTimeout((function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),a().clearTimeout(e)),e},t.setInterval=function(e,t){e=St(this,e),this.clearTimersOnDispose_();var n=a().setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),a().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=St(this,e),t=a().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=St(this,t);var r=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,r),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),a().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],r=t[1];e[n].forEach((function(t,n){return e[r](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r=e.getComponent("Tech"),i=r&&r.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(i||!a)throw new Error('Illegal component, "'+t+'"; '+(i?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=jt(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var o=s.players,u=Object.keys(o);if(o&&u.length>0&&u.map((function(e){return o[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[Ut(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function Wt(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function Kt(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Wt.bind(null,"start",0,e),end:Wt.bind(null,"end",1,e)},a().Symbol&&a().Symbol.iterator&&(t[a().Symbol.iterator]=function(){return(e||[]).values()}),t}function Yt(e,t){return Array.isArray(e)?Kt(e):void 0===e||void 0===t?Kt():Kt([[e,t]])}function Xt(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=Yt(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(r=e.end(a))>t&&(r=t),i+=r-n;return i/t}function Qt(e){if(e instanceof Qt)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:Y(e)&&("number"==typeof e.code&&(this.code=e.code),K(this,e)),this.message||(this.message=Qt.defaultMessages[this.code]||"")}zt.prototype.supportsRaf_="function"==typeof a().requestAnimationFrame&&"function"==typeof a().cancelAnimationFrame,zt.registerComponent("Component",zt),Qt.prototype.code=0,Qt.prototype.message="",Qt.prototype.status=null,Qt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Qt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Zt=0;Zt<Qt.errorTypes.length;Zt++)Qt[Qt.errorTypes[Zt]]=Zt,Qt.prototype[Qt.errorTypes[Zt]]=Zt;function Jt(e){return null!=e&&"function"==typeof e.then}function $t(e){Jt(e)&&e.then(null,(function(e){}))}var en=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,r){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},tn=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleKeyDown_=function(e){return r.handleKeyDown(e)},r.close_=function(e){return r.close(e)},r.opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=Ie("div",{className:"vjs-modal-dialog-content"},{role:"document"}),r.descEl_=Ie("p",{className:"vjs-modal-dialog-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),ke(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Ye(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},n.empty=function(){this.trigger("beforemodalempty"),ze(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=o().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),d().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(d().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}o().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof a().HTMLAnchorElement||e instanceof a().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof a().HTMLInputElement||e instanceof a().HTMLSelectElement||e instanceof a().HTMLTextAreaElement||e instanceof a().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof a().HTMLIFrameElement||e instanceof a().HTMLObjectElement||e instanceof a().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(zt);tn.prototype.options_={pauseOnOpen:!0,temporary:!0},zt.registerComponent("ModalDialog",tn);var nn=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty((0,c.Z)(n),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}(0,f.Z)(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},It(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(Ct);for(var rn in nn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},nn.prototype.allowedEvents_)nn.prototype["on"+rn]=null;var an=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},sn=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].enabled){an(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}(0,f.Z)(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&an(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,an(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(nn),on=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},un=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].selected){on(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty((0,c.Z)(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}(0,f.Z)(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&on(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,on(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(nn),ln=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(nn),dn=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),cn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),fn={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},hn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},pn={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},mn={disabled:"disabled",hidden:"hidden",showing:"showing"},gn=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+ut(),kind:t.kind||"",language:t.language||""},i=t.label||"",a=function(e){Object.defineProperty((0,c.Z)(n),e,{get:function(){return r[e]},set:function(){}})};for(var s in r)a(s);return Object.defineProperty((0,c.Z)(n),"label",{get:function(){return i},set:function(e){e!==i&&(i=e,this.trigger("labelchange"))}}),n}return(0,f.Z)(t,e),t}(Ct),yn=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=o().createElement("a");n.href=e;for(var r={},i=0;i<t.length;i++)r[t[i]]=n[t[i]];return"http:"===r.protocol&&(r.host=r.host.replace(/:80$/,"")),"https:"===r.protocol&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=a().location.protocol),r.host||(r.host=a().location.host),r},vn=function(e){if(!e.match(/^https?:\/\//)){var t=o().createElement("a");t.href=e,e=t.href}return e},_n=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},Tn=function(e,t){void 0===t&&(t=a().location);var n=yn(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},bn=Object.freeze({__proto__:null,parseUrl:yn,getAbsoluteURL:vn,getFileExtension:_n,isCrossOrigin:Tn}),En=function(e,t){var n=new(a().WebVTT.Parser)(a(),a().vttjs,a().WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(a().console&&a().console.groupCollapsed&&a().console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach((function(e){return q.error(e)})),a().console&&a().console.groupEnd&&a().console.groupEnd()),n.flush()},Sn=function(e,t){var n={uri:e},r=Tn(e);r&&(n.cors=r);var i="use-credentials"===t.tech_.crossOrigin();i&&(n.withCredentials=i),g()(n,St(this,(function(e,n,r){if(e)return q.error(e,n);t.loaded_=!0,"function"!=typeof a().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return En(r,t);q.error("vttjs failed to load, stopping trying to process "+t.src)})):En(r,t)})))},wn=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var r=Bt(t,{kind:pn[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=mn[r.mode]||"disabled",a=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(i="hidden"),(n=e.call(this,r)||this).tech_=r.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var s=new cn(n.cues_),o=new cn(n.activeCues_),u=!1;return n.timeupdateHandler=St((0,c.Z)(n),(function(e){void 0===e&&(e={}),this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))})),n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==i&&n.startTracking(),Object.defineProperties((0,c.Z)(n),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return i},set:function(e){mn[e]&&i!==e&&(i=e,this.preload_||"disabled"===i||0!==this.cues.length||Sn(this.src,this),this.stopTracking(),"disabled"!==i&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];(i.startTime<=e&&i.endTime>=e||i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e)&&t.push(i)}if(u=!1,t.length!==this.activeCues_.length)u=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(u=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),r.src?(n.src=r.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==r.kind&&"captions"!==r.kind)&&Sn(n.src,(0,c.Z)(n))):n.loaded_=!0,n}(0,f.Z)(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},n.addCue=function(e){var t=e;if(a().vttjs&&!(e instanceof a().vttjs.VTTCue)){for(var n in t=new(a().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),i=0;i<r.length;i++)r[i]!==this&&r[i].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(gn);wn.prototype.allowedEvents_={cuechange:"cuechange"};var Cn=function(e){function t(t){var n;void 0===t&&(t={});var r=Bt(t,{kind:hn[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty((0,c.Z)(n),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return(0,f.Z)(t,e),t}(gn),An=function(e){function t(t){var n;void 0===t&&(t={});var r=Bt(t,{kind:fn[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty((0,c.Z)(n),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return(0,f.Z)(t,e),t}(gn),In=function(e){function t(t){var n,r;void 0===t&&(t={}),n=e.call(this)||this;var i=new wn(t);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties((0,c.Z)(n),{readyState:{get:function(){return r}},track:{get:function(){return i}}}),r=0,i.addEventListener("loadeddata",(function(){r=2,n.trigger({type:"load",target:(0,c.Z)(n)})})),n}return(0,f.Z)(t,e),t}(Ct);In.prototype.allowedEvents_={load:"load"},In.NONE=0,In.LOADING=1,In.LOADED=2,In.ERROR=3;var kn={audio:{ListClass:sn,TrackClass:Cn,capitalName:"Audio"},video:{ListClass:un,TrackClass:An,capitalName:"Video"},text:{ListClass:ln,TrackClass:wn,capitalName:"Text"}};Object.keys(kn).forEach((function(e){kn[e].getterName=e+"Tracks",kn[e].privateName=e+"Tracks_"}));var Rn={remoteText:{ListClass:ln,TrackClass:wn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:dn,TrackClass:In,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Pn=(0,u.Z)({},kn,Rn);Rn.names=Object.keys(Rn),kn.names=Object.keys(kn),Pn.names=[].concat(Rn.names).concat(kn.names);var Dn=function(e){function t(t,n){var r;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).onDurationChange_=function(e){return r.onDurationChange(e)},r.trackProgress_=function(e){return r.trackProgress(e)},r.trackCurrentTime_=function(e){return r.trackCurrentTime(e)},r.stopTrackingCurrentTime_=function(e){return r.stopTrackingCurrentTime(e)},r.disposeSourceHandler_=function(e){return r.disposeSourceHandler(e)},r.queuedHanders_=new Set,r.hasStarted_=!1,r.on("playing",(function(){this.hasStarted_=!0})),r.on("loadstart",(function(){this.hasStarted_=!1})),Pn.names.forEach((function(e){var n=Pn[e];t&&t[n.getterName]&&(r[n.privateName]=t[n.getterName])})),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.preloadTextTracks=!1!==t.preloadTextTracks,r.autoRemoteTextTracks_=new Pn.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}(0,f.Z)(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(St(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return Yt(0,0)},n.bufferedPercent=function(){return Xt(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(kn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new Qt(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Yt(0,0):Yt()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;kn.names.forEach((function(t){var n=kn[t],r=function(){e.trigger(t+"trackchange")},i=e[n.getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),e.on("dispose",(function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}))}))},n.addWebVttScript_=function(){var e=this;if(!a().WebVTT)if(o().body.contains(this.el())){if(!this.options_["vtt.js"]&&X(v())&&Object.keys(v()).length>0)return void this.trigger("vttjsloaded");var t=o().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),a().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},s=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};s(),t.addEventListener("change",s),t.addEventListener("addtrack",s),t.addEventListener("removetrack",s),this.on("dispose",(function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",s),t.removeEventListener("addtrack",s),t.removeEventListener("removetrack",s);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){void 0===i&&(i={});var a=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var s=new Pn.text.TrackClass(i);return a.addTrack(s),s}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=Bt(e,{tech:this});return new Rn.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var r=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(q.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(r.track)})),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||a().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=ut();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=jt(e),t.techs_[e]=n,t.techs_[Ut(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=jt(e),a()&&a().videojs&&a().videojs[e]?(q.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),a().videojs[e]):void 0)},t}(zt);Pn.names.forEach((function(e){var t=Pn[e];Dn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Dn.prototype.featuresVolumeControl=!0,Dn.prototype.featuresMuteControl=!0,Dn.prototype.featuresFullscreenResize=!1,Dn.prototype.featuresPlaybackRate=!1,Dn.prototype.featuresProgressEvents=!1,Dn.prototype.featuresSourceset=!1,Dn.prototype.featuresTimeupdateEvents=!1,Dn.prototype.featuresNativeTextTracks=!1,Dn.prototype.featuresVideoFrameCallback=!1,Dn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:q.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},zt.registerComponent("Tech",Dn),Dn.registerTech("Tech",Dn),Dn.defaultTechOrder_=[];var On={},Mn={},Ln={};function Nn(e,t,n){e.setTimeout((function(){return Vn(t,On[t.type],n,e)}),1)}function xn(e,t,n,r){void 0===r&&(r=null);var i="call"+jt(n),a=e.reduce(Bn(i),r),s=a===Ln,o=s?null:t[n](a);return function(e,t,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a[t]&&a[t](r,n)}}(e,n,o,s),o}var Fn={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Un={setCurrentTime:1,setMuted:1,setVolume:1},jn={play:1,pause:1};function Bn(e){return function(t,n){return t===Ln?Ln:n[e]?n[e](t):t}}function Vn(e,t,n,r,i,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===i&&(i=[]),void 0===a&&(a=!1);var s=t,o=s[0],u=s.slice(1);if("string"==typeof o)Vn(e,On[o],n,r,i,a);else if(o){var l=function(e,t){var n=Mn[e.id()],r=null;if(null==n)return r=t(e),Mn[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var a=n[i],s=a[0],o=a[1];s===t&&(r=o)}return null===r&&(r=t(e),n.push([t,r])),r}(r,o);if(!l.setSource)return i.push(l),Vn(e,u,n,r,i,a);l.setSource(K({},e),(function(t,s){if(t)return Vn(e,u,n,r,i,a);i.push(l),Vn(s,e.type===s.type?u:On[s.type],n,r,i,a)}))}else u.length?Vn(e,u,n,r,i,a):a?n(e,i):Vn(e,On["*"],n,r,i,!0)}var qn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Hn=function(e){void 0===e&&(e="");var t=_n(e);return qn[t.toLowerCase()]||""},Gn=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):Y(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[zn({src:t})]:Y(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[zn(t)]:[];return t};function zn(e){if(!e.type){var t=Hn(e.src);t&&(e.type=t)}return e}var Wn=function(e){function t(t,n,r){var i,a=Bt({createEl:!1},n);if(i=e.call(this,t,a,r)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var s=0,o=n.playerOptions.techOrder;s<o.length;s++){var u=jt(o[s]),l=Dn.getTech(u);if(u||(l=zt.getComponent(u)),l&&l.isSupported()){t.loadTech_(u);break}}return i}return(0,f.Z)(t,e),t}(zt);zt.registerComponent("MediaLoader",Wn);var Kn=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).options_.controlText&&r.controlText(r.options_.controlText),r.handleMouseOver_=function(e){return r.handleMouseOver(e)},r.handleMouseOut_=function(e){return r.handleMouseOut(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.emitTapEvents(),r.enable(),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=K({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&q.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=K({role:"button"},n),this.tabIndex_=t.tabIndex;var r=Ie(e,t,n);return r.appendChild(Ie("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=Ie("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,ke(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){d().isEventKey(t,"Space")||d().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(zt);zt.registerComponent("ClickableComponent",Kn);var Yn=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update(),r.update_=function(e){return r.update(e)},t.on("posterchange",r.update_),r}(0,f.Z)(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return Ie("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(fe||le)&&t||this.player_.tech(!0).focus(),this.player_.paused()?$t(this.player_.play()):this.player_.pause()}},t}(Kn);zt.registerComponent("PosterImage",Yn);var Xn={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Qn(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Zn(e,t,n){try{e.style[t]=n}catch(e){return}}var Jn=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var s=function(e){return i.updateDisplay(e)};return t.on("loadstart",(function(e){return i.toggleDisplay(e)})),t.on("texttrackchange",s),t.on("loadedmetadata",(function(e){return i.preselectTrack(e)})),t.ready(St((0,c.Z)(i),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",s),t.on("playerresize",s),a().addEventListener("orientationchange",s),t.on("dispose",(function(){return a().removeEventListener("orientationchange",s)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),i}(0,f.Z)(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,s=0;s<i.length;s++){var o=i[s];a&&a.enabled&&a.language&&a.language===o.language&&o.kind in r?o.kind===a.kind?n=o:n||(n=o):a&&!a.enabled?(n=null,e=null,t=null):o.default&&("descriptions"!==o.kind||e?o.kind in r&&!t&&(t=o):e=o)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof a().WebVTT&&a().WebVTT.processCues(a(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var a=null,s=null,o=e.length;o--;){var u=e[o];"showing"===u.mode&&("descriptions"===u.kind?a=u:s=u)}s?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(s)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var i=n[r];if(i){var s=i.displayState;if(t.color&&(s.firstChild.style.color=t.color),t.textOpacity&&Zn(s.firstChild,"color",Qn(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(s.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&Zn(s.firstChild,"backgroundColor",Qn(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?Zn(s,"backgroundColor",Qn(t.windowColor,t.windowOpacity)):s.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?s.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?s.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(s.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var o=a().parseFloat(s.style.fontSize);s.style.fontSize=o*t.fontPercent+"px",s.style.height="auto",s.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?s.firstChild.style.fontVariant="small-caps":s.firstChild.style.fontFamily=Xn[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof a().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=0;i<r.activeCues.length;++i)t.push(r.activeCues[i]);a().WebVTT.processCues(a(),t,this.el_);for(var s=0;s<e.length;++s){for(var o=e[s],u=0;u<o.activeCues.length;++u){var l=o.activeCues[u].displayState;De(l,"vjs-text-track-cue"),De(l,"vjs-text-track-cue-"+(o.language?o.language:s)),o.language&&Fe(l,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(zt);zt.registerComponent("TextTrackDisplay",Jn);var $n=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=Ie("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},t}(zt);zt.registerComponent("LoadingSpinner",$n);var er=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=Ie("button",t=K({className:this.buildCSSClass()},t),n=K({type:"button"},n));return r.appendChild(Ie("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(r),r},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return q.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),zt.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){d().isEventKey(t,"Space")||d().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Kn);zt.registerComponent("Button",er);var tr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).mouseused_=!1,r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return $t(t),void(!this.player_.tech(!0)||(fe||le)&&n||this.player_.tech(!0).focus())}var r=this.player_.getChild("controlBar"),i=r&&r.getChild("playToggle");if(i){var a=function(){return i.focus()};Jt(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(er);tr.prototype.controlText_="Play Video",zt.registerComponent("BigPlayButton",tr);var nr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).controlText(n&&n.controlText||r.localize("Close")),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){d().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(er);zt.registerComponent("CloseButton",nr);var rr=function(e){function t(t,n){var r;return void 0===n&&(n={}),r=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,r.on(t,"play",(function(e){return r.handlePlay(e)})),r.on(t,"pause",(function(e){return r.handlePause(e)})),n.replay&&r.on(t,"ended",(function(e){return r.handleEnded(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?$t(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(er);rr.prototype.controlText_="Play",zt.registerComponent("PlayToggle",rr);var ir=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),s=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),(i=i>0||s>0?i+":":"")+(r=((i||a>=10)&&r<10?"0"+r:r)+":")+(n<10?"0"+n:n)},ar=ir;function sr(e,t){return void 0===t&&(t=e),ar(e,t)}var or=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["timeupdate","ended"],(function(e){return r.updateContent(e)})),r.updateTextNode_(),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),r=Ie("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return n.appendChild(r),this.contentEl_=Ie("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=sr(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,q.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=o().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},n.updateContent=function(e){},t}(zt);or.prototype.labelText_="Time",or.prototype.controlText_="Time",zt.registerComponent("TimeDisplay",or);var ur=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(or);ur.prototype.labelText_="Current Time",ur.prototype.controlText_="Current Time",zt.registerComponent("CurrentTimeDisplay",ur);var lr=function(e){function t(t,n){var r,i=function(e){return r.updateContent(e)};return(r=e.call(this,t,n)||this).on(t,"durationchange",i),r.on(t,"loadstart",i),r.on(t,"loadedmetadata",i),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(or);lr.prototype.labelText_="Duration",lr.prototype.controlText_="Duration",zt.registerComponent("DurationDisplay",lr);var dr=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),r=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(r),t.appendChild(n),t},t}(zt);zt.registerComponent("TimeDivider",dr);var cr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"durationchange",(function(e){return r.updateContent(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Ie("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(or);cr.prototype.labelText_="Remaining Time",cr.prototype.controlText_="Remaining Time",zt.registerComponent("RemainingTimeDisplay",cr);var fr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateShowing(),r.on(r.player(),"durationchange",(function(e){return r.updateShowing(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ie("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ie("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(o().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(zt);zt.registerComponent("LiveDisplay",fr);var hr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateLiveEdgeStatus(),r.player_.liveTracker&&(r.updateLiveEdgeStatusHandler_=function(e){return r.updateLiveEdgeStatus(e)},r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatusHandler_)),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Ie("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(er);hr.prototype.controlText_="Seek to live, currently playing live",zt.registerComponent("SeekToLive",hr);var pr=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},mr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseDown_=function(e){return r.handleMouseDown(e)},r.handleMouseUp_=function(e){return r.handleMouseUp(e)},r.handleKeyDown_=function(e){return r.handleKeyDown(e)},r.handleClick_=function(e){return r.handleClick(e)},r.handleMouseMove_=function(e){return r.handleMouseMove(e)},r.update_=function(e){return r.update(e)},r.bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}(0,f.Z)(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=K({tabIndex:0},n),r=K({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||de||e.preventDefault(),je(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;Be(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(pr(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=He(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){d().isEventKey(t,"Left")||d().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):d().isEventKey(t,"Right")||d().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(zt);zt.registerComponent("Slider",mr);var gr=function(e,t){return pr(e/t*100,0,100).toFixed(2)+"%"},yr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).partEls_=[],r.on(t,"progress",(function(e){return r.update(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=Ie("span",{className:"vjs-control-text"}),r=Ie("span",{textContent:this.localize("Loaded")}),i=o().createTextNode(": ");return this.percentageEl_=Ie("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(r),n.appendChild(i),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),r=e&&e.isLive()?e.seekableEnd():t.player_.duration(),i=t.player_.bufferedEnd(),a=t.partEls_,s=gr(i,r);t.percent_!==s&&(t.el_.style.width=s,ke(t.percentageEl_,s),t.percent_=s);for(var o=0;o<n.length;o++){var u=n.start(o),l=n.end(o),d=a[o];d||(d=t.el_.appendChild(Ie()),a[o]=d),d.dataset.start===u&&d.dataset.end===l||(d.dataset.start=u,d.dataset.end=l,d.style.left=gr(u,i),d.style.width=gr(l-u,i))}for(var c=a.length;c>n.length;c--)t.el_.removeChild(a[c-1]);a.length=n.length}))},t}(zt);zt.registerComponent("LoadProgressBar",yr);var vr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=wt(St((0,c.Z)(r),r.update),Et),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var r=qe(this.el_),i=Ve(this.player_.el()),a=e.width*t;if(i&&r){var s=e.left-i.left+a,o=e.width-a+(i.right-e.right),u=r.width/2;s<u?u+=u-s:o<u&&(u=o),u<0?u=0:u>r.width&&(u=r.width),u=Math.round(u),this.el_.style.right="-"+u+"px",this.write(n)}},n.write=function(e){ke(this.el_,e)},n.updateTime=function(e,t,n,r){var i=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,s=i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var o=i.player_.liveTracker.liveWindow(),u=o-t*o;a=(u<1?"":"-")+sr(u,o)}else a=sr(n,s);i.update(e,t,a),r&&r()}))},t}(zt);zt.registerComponent("TimeTooltip",vr);var _r=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=wt(St((0,c.Z)(r),r.update),Et),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}},t}(zt);_r.prototype.options_={children:[]},ve||ae||_r.prototype.options_.children.push("timeTooltip"),zt.registerComponent("PlayProgressBar",_r);var Tr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=wt(St((0,c.Z)(r),r.update),Et),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,(function(){n.el_.style.left=e.width*t+"px"}))},t}(zt);Tr.prototype.options_={children:["timeTooltip"]},zt.registerComponent("MouseTimeDisplay",Tr);var br=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).setEventHandlers_(),r}(0,f.Z)(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=St(this,this.update),this.update=wt(this.update_,Et),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in o()&&"visibilityState"in o()&&this.on(o(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===o().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Et))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==o().visibilityState){var r=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,i=n.player_.duration();t&&t.isLive()&&(i=n.player_.liveTracker.liveCurrentTime()),n.percent_!==r&&(n.el_.setAttribute("aria-valuenow",(100*r).toFixed(2)),n.percent_=r),n.currentTime_===e&&n.duration_===i||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[sr(e,i),sr(i,i)],"{1} of {2}")),n.currentTime_=e,n.duration_=i),n.bar&&n.bar.update(Ve(n.el()),n.getProgress())})),r}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){Xe(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),Xe(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var r=this.calculateDistance(e),i=this.player_.liveTracker;if(i&&i.isLive()){if(r>=.99)return void i.seekToLiveEdge();var a=i.seekableStart(),s=i.liveCurrentTime();if((n=a+r*i.liveWindow())>=s&&(n=s),n<=a&&(n=a+.1),n===1/0)return}else(n=r*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?$t(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n=this.player_.liveTracker;if(d().isEventKey(t,"Space")||d().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(d().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(d().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(d()(t))){t.preventDefault(),t.stopPropagation();var r=10*(d().codes[d()(t)]-d().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else d().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):d().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in o()&&"visibilityState"in o()&&this.off(o(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(mr);br.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},ve||ae||br.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),zt.registerComponent("SeekBar",br);var Er=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseMove=wt(St((0,c.Z)(r),r.handleMouseMove),Et),r.throttledHandleMouseSeek=wt(St((0,c.Z)(r),r.handleMouseSeek),Et),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.handleMouseDownHandler_=function(e){return r.handleMouseDown(e)},r.enable(),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),r=t.getChild("mouseTimeDisplay");if(n||r){var i=t.el(),a=qe(i),s=He(i,e).x;s=pr(s,0,1),r&&r.update(a,s),n&&n.update(a,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&$t(this.player_.play())}},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(zt);Er.prototype.options_={children:["seekBar"]},zt.registerComponent("ProgressControl",Er);var Sr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return r.handlePictureInPictureChange(e)})),r.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return r.handlePictureInPictureEnabledChange(e)})),r.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),r.hide()):r.show()})),r.disable(),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){o().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(er);Sr.prototype.controlText_="Picture-in-Picture",zt.registerComponent("PictureInPictureToggle",Sr);var wr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"fullscreenchange",(function(e){return r.handleFullscreenChange(e)})),!1===o()[t.fsApi_.fullscreenEnabled]&&r.disable(),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(er);wr.prototype.controlText_="Fullscreen",zt.registerComponent("FullscreenToggle",wr);var Cr=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(zt);zt.registerComponent("VolumeLevel",Cr);var Ar=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=wt(St((0,c.Z)(r),r.update),Et),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,r){if(!n){var i=Ve(this.el_),a=Ve(this.player_.el()),s=e.width*t;if(!a||!i)return;var o=e.left-a.left+s,u=e.width-s+(a.right-e.right),l=i.width/2;o<l?l+=l-o:u<l&&(l=u),l<0?l=0:l>i.width&&(l=i.width),this.el_.style.right="-"+l+"px"}this.write(r+"%")},n.write=function(e){ke(this.el_,e)},n.updateVolume=function(e,t,n,r,i){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,r.toFixed(0)),i&&i()}))},t}(zt);zt.registerComponent("VolumeLevelTooltip",Ar);var Ir=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=wt(St((0,c.Z)(r),r.update),Et),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var r=this,i=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,i,(function(){n?r.el_.style.bottom=e.height*t+"px":r.el_.style.left=e.width*t+"px"}))},t}(zt);Ir.prototype.options_={children:["volumeLevelTooltip"]},zt.registerComponent("MouseVolumeLevelDisplay",Ir);var kr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on("slideractive",(function(e){return r.updateLastVolume_(e)})),r.on(t,"volumechange",(function(e){return r.updateARIAAttributes(e)})),t.ready((function(){return r.updateARIAAttributes()})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){Xe(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),r=Ve(n),i=this.vertical(),a=He(n,e);a=i?a.y:a.x,a=pr(a,0,1),t.update(r,a,i)}Xe(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(mr);kr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},ve||ae||kr.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),kr.prototype.playerEvent="volumechange",zt.registerComponent("VolumeBar",kr);var Rr=function(e){function t(t,n){var r;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||X(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),r=e.call(this,t,n)||this,function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}((0,c.Z)(r),t),r.throttledHandleMouseMove=wt(St((0,c.Z)(r),r.handleMouseMove),Et),r.handleMouseUpHandler_=function(e){return r.handleMouseUp(e)},r.on("mousedown",(function(e){return r.handleMouseDown(e)})),r.on("touchstart",(function(e){return r.handleMouseDown(e)})),r.on("mousemove",(function(e){return r.handleMouseMove(e)})),r.on(r.volumeBar,["focus","slideractive"],(function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")})),r.on(r.volumeBar,["blur","sliderinactive"],(function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(zt);Rr.prototype.options_={children:["volumeBar"]},zt.registerComponent("VolumeControl",Rr);var Pr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}((0,c.Z)(r),t),r.on(t,["loadstart","volumechange"],(function(e){return r.update(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;ve&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)Oe(this.el_,"vjs-vol-"+n);De(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(er);Pr.prototype.controlText_="Mute",zt.registerComponent("MuteToggle",Pr);var Dr=function(e){function t(t,n){var r;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||X(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(r=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return r.handleKeyPress(e)},r.on(t,["loadstart"],(function(e){return r.volumePanelState_(e)})),r.on(r.muteToggle,"keyup",(function(e){return r.handleKeyPress(e)})),r.on(r.volumeControl,"keyup",(function(e){return r.handleVolumeControlKeyUp(e)})),r.on("keydown",(function(e){return r.handleKeyPress(e)})),r.on("mouseover",(function(e){return r.handleMouseOver(e)})),r.on("mouseout",(function(e){return r.handleMouseOut(e)})),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}(0,f.Z)(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){d().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),mt(o(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),gt(o(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){d().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(zt);Dr.prototype.options_={children:["muteToggle","volumeControl"]},zt.registerComponent("VolumePanel",Dr);var Or=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,n&&(r.menuButton_=n.menuButton),r.focusedChild_=-1,r.on("keydown",(function(e){return r.handleKeyDown(e)})),r.boundHandleBlur_=function(e){return r.handleBlur(e)},r.boundHandleTapClick_=function(e){return r.handleTapClick(e)},r}(0,f.Z)(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof zt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof zt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=Ie(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),mt(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||o().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){d().isEventKey(e,"Left")||d().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(d().isEventKey(e,"Right")||d().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(zt);zt.registerComponent("Menu",Or);var Mr=function(e){function t(t,n){var r;void 0===n&&(n={}),(r=e.call(this,t,n)||this).menuButton_=new er(t,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var i=er.prototype.buildCSSClass();r.menuButton_.el_.className=r.buildCSSClass()+" "+i,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0;var a=function(e){return r.handleClick(e)};return r.handleMenuKeyUp_=function(e){return r.handleMenuKeyUp(e)},r.on(r.menuButton_,"tap",a),r.on(r.menuButton_,"click",a),r.on(r.menuButton_,"keydown",(function(e){return r.handleKeyDown(e)})),r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover"),r.menu.show(),mt(o(),"keyup",r.handleMenuKeyUp_)})),r.on("mouseleave",(function(e){return r.handleMouseLeave(e)})),r.on("keydown",(function(e){return r.handleSubmenuKeyDown(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new Or(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=Ie("li",{className:"vjs-menu-title",textContent:jt(this.options_.title),tabIndex:-1}),n=new zt(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+er.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),gt(o(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){d().isEventKey(e,"Esc")||d().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),d().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(d().isEventKey(e,"Up")||d().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(d().isEventKey(e,"Esc")||d().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(d().isEventKey(e,"Esc")||d().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),d().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),ve&&Ce())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(zt);zt.registerComponent("MenuButton",Mr);var Lr=function(e){function t(t,n){var r,i=n.tracks;if((r=e.call(this,t,n)||this).items.length<=1&&r.hide(),!i)return(0,c.Z)(r);var a=St((0,c.Z)(r),r.update);return i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),i.addEventListener("labelchange",a),r.player_.on("ready",a),r.player_.on("dispose",(function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a),i.removeEventListener("labelchange",a)})),r}return(0,f.Z)(t,e),t}(Mr);zt.registerComponent("TrackButton",Lr);var Nr=["Tab","Esc","Up","Down","Right","Left"],xr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).selectable=n.selectable,r.isSelected_=n.selected||!1,r.multiSelectable=n.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(t,n,r){this.nonIconControl=!0;var i=e.prototype.createEl.call(this,"li",K({className:"vjs-menu-item",tabIndex:-1},n),r);return i.replaceChild(Ie("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),i.querySelector(".vjs-icon-placeholder")),i},n.handleKeyDown=function(t){Nr.some((function(e){return d().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Kn);zt.registerComponent("MenuItem",xr);var Fr=function(e){function t(t,n){var r,i=n.track,s=t.textTracks();n.label=i.label||i.language||"Unknown",n.selected="showing"===i.mode,(r=e.call(this,t,n)||this).track=i,r.kinds=(n.kinds||[n.kind||r.track.kind]).filter(Boolean);var u,l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply((0,c.Z)(r),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleSelectedLanguageChange.apply((0,c.Z)(r),t)};return t.on(["loadstart","texttrackchange"],l),s.addEventListener("change",l),s.addEventListener("selectedlanguagechange",d),r.on("dispose",(function(){t.off(["loadstart","texttrackchange"],l),s.removeEventListener("change",l),s.removeEventListener("selectedlanguagechange",d)})),void 0===s.onchange&&r.on(["tap","click"],(function(){if("object"!=typeof a().Event)try{u=new(a().Event)("change")}catch(e){}u||(u=o().createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(u)})),r.handleTracksChange(),r}(0,f.Z)(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var a=r[i];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(xr);zt.registerComponent("TextTrackMenuItem",Fr);var Ur=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}(0,f.Z)(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(Fr);zt.registerComponent("OffTextTrackMenuItem",Ur);var jr=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return(0,f.Z)(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=Fr),this.label_&&(n=this.label_+" off"),e.push(new Ur(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var a=r[i];if(this.kinds_.indexOf(a.kind)>-1){var s=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-"+a.kind+"-menu-item"),e.push(s)}}return e},t}(Lr);zt.registerComponent("TextTrackButton",jr);var Br=function(e){function t(t,n){var r,i=n.track,a=n.cue,s=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime,(r=e.call(this,t,n)||this).track=i,r.cue=a,r}return(0,f.Z)(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(xr);zt.registerComponent("ChaptersTrackMenuItem",Br);var Vr=function(e){function t(t,n,r){var i;return(i=e.call(this,t,n,r)||this).selectCurrentItem_=function(){i.items.forEach((function(e){e.selected(i.track_.activeCues[0]===e.cue)}))},i}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),e.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&e.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(jt(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],a=new Br(this.player_,{track:this.track_,cue:i});e.push(a)}return e},t}(jr);Vr.prototype.kind_="chapters",Vr.prototype.controlText_="Chapters",zt.registerComponent("ChaptersButton",Vr);var qr=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=t.textTracks(),s=St((0,c.Z)(i),i.handleTracksChange);return a.addEventListener("change",s),i.on("dispose",(function(){a.removeEventListener("change",s)})),i}(0,f.Z)(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var a=t[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(jr);qr.prototype.kind_="descriptions",qr.prototype.controlText_="Descriptions",zt.registerComponent("DescriptionsButton",qr);var Hr=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(jr);Hr.prototype.kind_="subtitles",Hr.prototype.controlText_="Subtitles",zt.registerComponent("SubtitlesButton",Hr);var Gr=function(e){function t(t,n){var r;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(r=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),r.controlText(", opens "+n.kind+" settings dialog"),r}return(0,f.Z)(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(Fr);zt.registerComponent("CaptionSettingsMenuItem",Gr);var zr=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Gr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(jr);zr.prototype.kind_="captions",zr.prototype.controlText_="Captions",zt.registerComponent("CaptionsButton",zr);var Wr=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.createEl=function(t,n,r){var i=e.prototype.createEl.call(this,t,n,r),a=i.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(Ie("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Ie("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),i},t}(Fr);zt.registerComponent("SubsCapsMenuItem",Wr);var Kr=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(jt(r.label_)),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Gr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,Wr)},t}(jr);Kr.prototype.kinds_=["captions","subtitles"],Kr.prototype.controlText_="Subtitles",zt.registerComponent("SubsCapsButton",Kr);var Yr=function(e){function t(t,n){var r,i=n.track,a=t.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,(r=e.call(this,t,n)||this).track=i,r.addClass("vjs-"+i.kind+"-menu-item");var s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply((0,c.Z)(r),t)};return a.addEventListener("change",s),r.on("dispose",(function(){a.removeEventListener("change",s)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(t,n,r){var i=e.prototype.createEl.call(this,t,n,r),a=i.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(a.appendChild(Ie("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Ie("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),i},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),r=0;r<n.length;r++){var i=n[r];i!==this.track&&(i.enabled=i===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(xr);zt.registerComponent("AudioTrackMenuItem",Yr);var Xr=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var r=t[n];e.push(new Yr(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},t}(Lr);Xr.prototype.controlText_="Audio Track",zt.registerComponent("AudioTrackButton",Xr);var Qr=function(e){function t(t,n){var r,i=n.rate,a=parseFloat(i,10);return n.label=i,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(r=e.call(this,t,n)||this).label=i,r.rate=a,r.on(t,"ratechange",(function(e){return r.update(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(xr);Qr.prototype.contentElType="button",zt.registerComponent("PlaybackRateMenuItem",Qr);var Zr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).menuButton_.el_.setAttribute("aria-describedby",r.labelElId_),r.updateVisibility(),r.updateLabel(),r.on(t,"loadstart",(function(e){return r.updateVisibility(e)})),r.on(t,"ratechange",(function(e){return r.updateLabel(e)})),r.on(t,"playbackrateschange",(function(e){return r.handlePlaybackRateschange(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ie("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new Qr(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates(),r=(n.indexOf(t)+1)%n.length;this.player().playbackRate(n[r])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(Mr);Zr.prototype.controlText_="Playback Rate",zt.registerComponent("PlaybackRateMenuButton",Zr);var Jr=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,r){return void 0===t&&(t="div"),void 0===n&&(n={}),void 0===r&&(r={}),n.className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,r)},t}(zt);zt.registerComponent("Spacer",Jr);var $r=function(e){function t(){return e.apply(this,arguments)||this}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},t}(Jr);zt.registerComponent("CustomControlSpacer",$r);var ei=function(e){function t(){return e.apply(this,arguments)||this}return(0,f.Z)(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(zt);ei.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in o()&&ei.prototype.options_.children.splice(ei.prototype.options_.children.length-1,0,"pictureInPictureToggle"),zt.registerComponent("ControlBar",ei);var ti=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"error",(function(e){return r.open(e)})),r}(0,f.Z)(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(tn);ti.prototype.options_=(0,u.Z)({},tn.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),zt.registerComponent("ErrorDisplay",ti);var ni="vjs-text-track-settings",ri=["#000","Black"],ii=["#00F","Blue"],ai=["#0FF","Cyan"],si=["#0F0","Green"],oi=["#F0F","Magenta"],ui=["#F00","Red"],li=["#FFF","White"],di=["#FF0","Yellow"],ci=["1","Opaque"],fi=["0.5","Semi-Transparent"],hi=["0","Transparent"],pi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ri,li,ui,si,ii,di,oi,ai]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ci,fi,hi]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[li,ri,ui,si,ii,di,oi,ai]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ci,fi]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[hi,fi,ci]}};function mi(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}pi.windowColor.options=pi.backgroundColor.options;var gi=function(e){function t(t,n){var r;return n.temporary=!1,(r=e.call(this,t,n)||this).updateDisplay=r.updateDisplay.bind((0,c.Z)(r)),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=Ie("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",(function(){r.saveSettings(),r.close()})),r.on(r.$(".vjs-default-button"),"click",(function(){r.setDefaults(),r.updateDisplay()})),W(pi,(function(e){r.on(r.$(e.selector),"change",r.updateDisplay)})),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}(0,f.Z)(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n="label");var i=pi[e],a=i.id.replace("%s",this.id_),s=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+s+'">'].concat(i.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+s+" "+t+'">',r.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return Ie("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return Ie("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Ie("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,r=this;return t=function(e,t,n){var i,a,s=(i=r.$(t.selector),a=t.parser,mi(i.options[i.options.selectedIndex].value,a));return void 0!==s&&(e[n]=s),e},void 0===(n={})&&(n=0),z(e=pi).reduce((function(n,r){return t(n,e[r],r)}),n)},n.setValues=function(e){var t=this;W(pi,(function(n,r){!function(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(mi(e.options[r].value,n)===t){e.selectedIndex=r;break}}(t.$(n.selector),e[r],n.parser)}))},n.setDefaults=function(){var e=this;W(pi,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(a().localStorage.getItem(ni))}catch(e){q.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?a().localStorage.setItem(ni,JSON.stringify(e)):a().localStorage.removeItem(ni)}catch(e){q.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(tn);zt.registerComponent("TextTrackSettings",gi);var yi=function(e){function t(t,n){var r,i=n.ResizeObserver||a().ResizeObserver;null===n.ResizeObserver&&(i=!1);var s=Bt({createEl:!i,reportTouchActivity:!1},n);return(r=e.call(this,t,s)||this).ResizeObserver=n.ResizeObserver||a().ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(e,t,n,r){var i;void 0===r&&(r=a());var s=function(){var t=this,n=arguments,a=function(){i=null,a=null,e.apply(t,n)};r.clearTimeout(i),i=r.setTimeout(a,100)};return s.cancel=function(){r.clearTimeout(i),i=null},s}((function(){r.resizeHandler()}),0,0,(0,c.Z)(r)),i?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(t.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){gt(this,"resize",e),gt(this,"unload",t),t=null};mt(r.el_.contentWindow,"unload",t),mt(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}(0,f.Z)(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(zt);zt.registerComponent("ResizeManager",yi);var vi={trackingThreshold:20,liveTolerance:15},_i=function(e){function t(t,n){var r,i=Bt(vi,n,{createEl:!1});return(r=e.call(this,t,i)||this).handleVisibilityChange_=function(e){return r.handleVisibilityChange(e)},r.trackLiveHandler_=function(){return r.trackLive_()},r.handlePlay_=function(e){return r.handlePlay(e)},r.handleFirstTimeupdate_=function(e){return r.handleFirstTimeupdate(e)},r.handleSeeked_=function(e){return r.handleSeeked(e)},r.seekToLiveEdge_=function(e){return r.seekToLiveEdge(e)},r.reset_(),r.on(r.player_,"durationchange",(function(e){return r.handleDurationchange(e)})),r.on(r.player_,"canplay",(function(){return r.toggleTracking()})),fe&&"hidden"in o()&&"visibilityState"in o()&&r.on(o(),"visibilitychange",r.handleVisibilityChange_),r}(0,f.Z)(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(o().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(a().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var r=this.liveCurrentTime(),i=this.player_.currentTime(),s=this.player_.paused()||this.seekedBehindLive_||Math.abs(r-i)>this.options_.liveTolerance;this.timeupdateSeen_&&r!==1/0||(s=!1),s!==this.behindLiveEdge_&&(this.behindLiveEdge_=s,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Et),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(o(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(zt);zt.registerComponent("LiveTracker",_i);var Ti,bi=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var s=n[a].src;s&&-1===r.indexOf(s)&&r.push(s)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},Ei=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=o().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=o().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",a().Element.prototype.appendChild.call(this,n),this.innerHTML}}),Si=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},wi=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},r=function(e){return Si([e.el(),a().HTMLMediaElement.prototype,a().Element.prototype,Ei],"innerHTML")}(e),i=function(n){return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var s=n.apply(t,i);return bi(e),s}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=i(n[e]))})),Object.defineProperty(t,"innerHTML",Bt(r,{set:i(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},Ci=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?vn(a().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return a().Element.prototype.setAttribute.call(this,"src",e),e}}),Ai=function(e,t,n,r){void 0===r&&(r=!0);var i=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=n();return i(e),e}};return r&&(a.set=i),Object.defineProperty(e,t,a)},Ii=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i=t.source,a=!1;if(r.featuresVideoFrameCallback=r.featuresVideoFrameCallback&&"VIDEO"===r.el_.tagName,i&&(r.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(i):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.isScrubbing_=!1,r.el_.hasChildNodes()){for(var s=r.el_.childNodes,o=s.length,u=[];o--;){var l=s[o];"track"===l.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(l),r.remoteTextTracks().addTrack(l.track),r.textTracks().addTrack(l.track),a||r.el_.hasAttribute("crossorigin")||!Tn(l.src)||(a=!0)):u.push(l))}for(var d=0;d<u.length;d++)r.el_.removeChild(u[d])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&a&&q.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(me||ye||oe)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}(0,f.Z)(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return Si([e.el(),a().HTMLMediaElement.prototype,Ci],"src")}(e),r=t.setAttribute,i=t.load;Object.defineProperty(t,"src",Bt(n,{set:function(r){var i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,i){var a=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=i.call(t);return bi(e)||(e.triggerSourceset(""),wi(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):bi(e)||wi(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=i,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var r=t[n];"metadata"===r.kind&&e.push({track:r,storedMode:r.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var r=function n(){for(var r=0;r<e.length;r++){var i=e[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",r),t.addEventListener("change",r)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",r)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach((function(e){n.el()[r+"Tracks"].removeEventListener(e,n[r+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=kn[e],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(n){var r={type:"change",target:i,currentTarget:i,srcElement:i};i.trigger(r),"text"===e&&t[Rn.remoteText.getterName]().trigger(r)},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},s=function(){for(var e=[],t=0;t<i.length;t++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===i[t]){n=!0;break}n||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];r.addEventListener(e,n),t.on("dispose",(function(t){return r.removeEventListener(e,n)}))})),this.on("loadstart",s),this.on("dispose",(function(e){return t.off("loadstart",s)}))}},n.proxyNativeTracks_=function(){var e=this;kn.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=o().createElement("video");var r=Bt({},this.options_.tag&&Ne(this.options_.tag));me&&!0===this.options_.nativeControlsForTouch||delete r.controls,Le(e,K(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&Fe(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var i=["loop","muted","playsinline","autoplay"],a=0;a<i.length;a++){var s=i[a],u=this.options_[s];void 0!==u&&(u?Fe(e,s,s):Ue(e,s),e[s]=u)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&_e?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){q(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&ae&&de&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=a().navigator&&a().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)$t(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=o().createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),a().performance&&"function"==typeof a().performance.now?e.creationTime=a().performance.now():a().performance&&a().performance.timing&&"number"==typeof a().performance.timing.navigationStart&&(e.creationTime=a().Date.now()-a().performance.timing.navigationStart),e},t}(Dn);Ai(Ii,"TEST_VID",(function(){if(Se()){var e=o().createElement("video"),t=o().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),Ii.isSupported=function(){try{Ii.TEST_VID.volume=.5}catch(e){return!1}return!(!Ii.TEST_VID||!Ii.TEST_VID.canPlayType)},Ii.canPlayType=function(e){return Ii.TEST_VID.canPlayType(e)},Ii.canPlaySource=function(e,t){return Ii.canPlayType(e.type)},Ii.canControlVolume=function(){try{var e=Ii.TEST_VID.volume;Ii.TEST_VID.volume=e/2+.1;var t=e!==Ii.TEST_VID.volume;return t&&ve?(a().setTimeout((function(){Ii&&Ii.prototype&&(Ii.prototype.featuresVolumeControl=e!==Ii.TEST_VID.volume)})),!1):t}catch(e){return!1}},Ii.canMuteVolume=function(){try{var e=Ii.TEST_VID.muted;return Ii.TEST_VID.muted=!e,Ii.TEST_VID.muted?Fe(Ii.TEST_VID,"muted","muted"):Ue(Ii.TEST_VID,"muted"),e!==Ii.TEST_VID.muted}catch(e){return!1}},Ii.canControlPlaybackRate=function(){if(ae&&de&&ce<58)return!1;try{var e=Ii.TEST_VID.playbackRate;return Ii.TEST_VID.playbackRate=e/2+.1,e!==Ii.TEST_VID.playbackRate}catch(e){return!1}},Ii.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(o().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(o().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(o().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(o().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ii.supportsNativeTextTracks=function(){return _e||ve&&de},Ii.supportsNativeVideoTracks=function(){return!(!Ii.TEST_VID||!Ii.TEST_VID.videoTracks)},Ii.supportsNativeAudioTracks=function(){return!(!Ii.TEST_VID||!Ii.TEST_VID.audioTracks)},Ii.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];Ai(Ii.prototype,t,(function(){return Ii[n]()}),!0)})),Ii.prototype.featuresVolumeControl=Ii.canControlVolume(),Ii.prototype.movingMediaElementInDOM=!ve,Ii.prototype.featuresFullscreenResize=!0,Ii.prototype.featuresProgressEvents=!0,Ii.prototype.featuresTimeupdateEvents=!0,Ii.prototype.featuresVideoFrameCallback=!(!Ii.TEST_VID||!Ii.TEST_VID.requestVideoFrameCallback),Ii.patchCanPlayType=function(){se>=4&&!ue&&!de&&(Ti=Ii.TEST_VID&&Ii.TEST_VID.constructor.prototype.canPlayType,Ii.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":Ti.call(this,e)})},Ii.unpatchCanPlayType=function(){var e=Ii.TEST_VID.constructor.prototype.canPlayType;return Ti&&(Ii.TEST_VID.constructor.prototype.canPlayType=Ti),e},Ii.patchCanPlayType(),Ii.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ii.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ii.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ii.prototype["set"+jt(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){Ii.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){Ii.prototype["set"+jt(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ii.prototype[e]=function(){return this.el_[e]()}})),Dn.withSourceHandlers(Ii),Ii.nativeSourceHandler={},Ii.nativeSourceHandler.canPlayType=function(e){try{return Ii.TEST_VID.canPlayType(e)}catch(e){return""}},Ii.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ii.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=_n(e.src);return Ii.nativeSourceHandler.canPlayType("video/"+n)}return""},Ii.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ii.nativeSourceHandler.dispose=function(){},Ii.registerSourceHandler(Ii.nativeSourceHandler),Dn.registerTech("Html5",Ii);var ki=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ri={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Pi=["tiny","xsmall","small","medium","large","xlarge","huge"],Di={};Pi.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Di[e]="vjs-layout-"+t}));var Oi={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Mi=function(e){function t(n,r,i){var a;if(n.id=n.id||r.id||"vjs_video_"+ut(),(r=K(t.getTagSettings(n),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var s=n.closest("[lang]");s&&s.getAttribute&&(r.language=s.getAttribute("lang"))}else for(var u=n;u&&1===u.nodeType;){if(Ne(u).hasOwnProperty("lang")){r.language=u.getAttribute("lang");break}u=u.parentNode}if((a=e.call(this,null,r,i)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=H(a.id_),a.fsApi_=x,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&Ne(n),a.language(a.options_.language),r.languages){var l={};Object.getOwnPropertyNames(r.languages).forEach((function(e){l[e.toLowerCase()]=r.languages[e]})),a.languages_=l}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=r.poster||"",a.controls_=!!r.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),Nt((0,c.Z)(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(mt(o(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var d=Bt(a.options_);r.plugins&&Object.keys(r.plugins).forEach((function(e){a[e](r.plugins[e])})),r.debug&&a.debug(!0),a.options_.playerOptions=d,a.middleware_=[],a.playbackRates(r.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),me&&a.addClass("vjs-touch-enabled"),ve||a.addClass("vjs-workinghover"),t.players[a.id_]=(0,c.Z)(a);var f=O.split(".")[0];return a.addClass("vjs-v"+f),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("stageclick",(function(e){return a.handleStageClick_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",(function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)})),a}(0,f.Z)(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),gt(o(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),gt(o(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Mn[this.id()]=null,Pn.names.forEach((function(e){var t=Pn[e],r=n[t.getterName]();r&&r.off&&r.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),i="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:i||(t=this.el_=e.prototype.createEl.call(this,"div"));var s=Ne(n);if(i){for(t=this.el_=n,n=this.tag=o().createElement("video");t.children.length;)n.appendChild(t.firstChild);Pe(t,"video-js")||De(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}if(n.setAttribute("tabindex","-1"),s.tabindex="-1",(fe||de&&pe)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(e){i&&"class"===e||t.setAttribute(e,s[e]),i&&n.setAttribute(e,s[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==a().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=at("vjs-styles-dimensions");var u=Ze(".vjs-styles-defaults"),l=Ze("head");l.insertBefore(this.styleEl_,u?u.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=n.getElementsByTagName("a"),c=0;c<d.length;c++){var f=d.item(c);De(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),Re(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):q.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?q.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.fluid=function(e){var t,n,r=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,It(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){r.on(["playerreset","resize"],r.boundUpdateStyleEl_)},It(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==a().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),i=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/i:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*i,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),st(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*i+"%;\n      }\n    ")}else{var s="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(s>=0&&(u.width=s),o>=0&&(u.height=o))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=jt(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(Dn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var s={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Pn.names.forEach((function(e){var t=Pn[e];s[t.getterName]=n[t.privateName]})),K(s,this.options_[r]),K(s,this.options_[i]),K(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);var o,u,l=Dn.getTech(e);if(!l)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new l(s),this.tech_.ready(St(this,this.handleTechReady_),!0),o=this.textTracksJson_||[],u=this.tech_,o.forEach((function(e){var t=u.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return t.addCue(e)}))})),u.textTracks(),ki.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+jt(e)+"_"](t)}))})),Object.keys(Ri).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ri[e]+"_"].bind(n),event:t}):n["handleTech"+Ri[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||Re(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e,t,n,r=this;Pn.names.forEach((function(e){var t=Pn[e];r[t.privateName]=r[t.getterName]()})),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track})),Array.prototype.map.call(t,(function(e){var t=en(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(en))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&q.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var r=t.play();if(Jt(r))return r.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():r():Jt(n=this.play())&&(n=n.catch(r)),Jt(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===t)return a.type}return Hn(t)}(this,t)),this.cache_.source=Bt({},e,{src:t,type:n});for(var r=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var u=Ne(a[o]);i.push(u),u.src&&u.src===t&&s.push(u.src)}s.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=function(){}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(q.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?$t(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),r=o()[this.fsApi_.fullscreenElement]===n;!r&&n.matches?r=n.matches(":"+this.fsApi_.fullscreen):!r&&n.msMatchesSelector&&(r=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(r)}},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in Un)return function(e,t,n,r){return t[n](e.reduce(Bn(n),r))}(this.middleware_,this.tech_,e,t);if(e in jn)return xn(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw q(e),e}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Fn)return function(e,t,n){return e.reduceRight(Bn(n),t[n]())}(this.middleware_,this.tech_,e);if(e in jn)return xn(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw q("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw q("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw q(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||a().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=$t),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!_e&&!ve||this.load());var r=this.techGet_("play");null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||Yt(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=Yt(0,0)),e},n.bufferedPercent=function(){return Xt(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||a().Promise;if(t){var n=this;return new t((function(t,r){function i(){n.off("fullscreenerror",s),n.off("fullscreenchange",a)}function a(){i(),t()}function s(e,t){i(),r(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",s);var o=n.requestFullscreenHelper_(e);o&&(o.then(i,i),o.then(t,r))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var r=this.el_[this.fsApi_.requestFullscreen](t);return r&&r.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),r}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||a().Promise;if(e){var t=this;return new e((function(e,n){function r(){t.off("fullscreenerror",a),t.off("fullscreenchange",i)}function i(){r(),e()}function a(e,t){r(),n(t)}t.one("fullscreenchange",i),t.one("fullscreenerror",a);var s=t.exitFullscreenHelper_();s&&(s.then(r,r),s.then(e,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=o()[this.fsApi_.exitFullscreen]();return t&&$t(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=o().documentElement.style.overflow,mt(o(),"keydown",this.boundFullWindowOnEscKey_),o().documentElement.style.overflow="hidden",De(o().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){d().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,gt(o(),"keydown",this.boundFullWindowOnEscKey_),o().documentElement.style.overflow=this.docOrigOverflow,Oe(o().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in o()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in o())return o().exitPictureInPicture()},n.handleKeyDown=function(e){var t,n,r=this.options_.userActions;r&&r.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof r.hotkeys?r.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,r=void 0===n?function(e){return d().isEventKey(e,"f")}:n,i=t.muteKey,a=void 0===i?function(e){return d().isEventKey(e,"m")}:i,s=t.playPauseKey,u=void 0===s?function(e){return d().isEventKey(e,"k")||d().isEventKey(e,"Space")}:s;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();var l=zt.getComponent("FullscreenToggle");!1!==o()[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),zt.getComponent("MuteToggle").prototype.handleClick.call(this,e)):u.call(this,e)&&(e.preventDefault(),e.stopPropagation(),zt.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=Dn.getTech(i);if(a||(a=zt.getComponent(i)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else q.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n=this,r=this.options_.techOrder.map((function(e){return[e,Dn.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(q.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),i=function(e,t,n){var r;return e.some((function(e){return t.some((function(t){if(r=n(e,t))return!0}))})),r},a=function(e,t){var r=e[0];if(e[1].canPlaySource(t,n.options_[r.toLowerCase()]))return{source:t,tech:r}};return(this.options_.sourceOrder?i(e,r,(t=a,function(e,n){return t(n,e)})):i(r,e,a))||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var r=Gn(e);if(r.length){if(this.changingSrc_=!0,t||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),Nn(this,r[0],(function(e,i){var a,s;if(n.middleware_=i,t||(n.cache_.sources=r),n.updateSourceCaches_(e),n.src_(e))return r.length>1?n.handleSrc_(r.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady());a=i,s=n.tech_,a.forEach((function(e){return e.setTech&&e.setTech(s)}))})),this.options_.retryOnError&&r.length>1){var i=function(){n.error(null),n.handleSrc_(r.slice(1),!0)},a=function(){n.off("error",i)};this.one("error",i),this.one("playing",a),this.resetRetryOnError_=function(){n.off("error",i),n.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,r=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,jt(t)!==jt(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready((function(){r.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||a().Promise;this.paused()||!t?this.doReset_():$t(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),It(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(L("beforeerror").forEach((function(n){var r=n(t,e);Y(r)&&!Array.isArray(r)||"string"==typeof r||"number"==typeof r||null===r?e=r:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Qt(e),this.addClass("vjs-error"),q.error("(CODE:"+this.error_.code+" "+Qt.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),L("error").forEach((function(e){return e(t,t.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=St(this,this.reportUserActivity),i=function(t){r(),this.clearInterval(e)};this.on("mousedown",(function(){r(),this.clearInterval(e),e=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())})),this.on("mouseup",i),this.on("mouseleave",i);var a,s=this.getChild("controlBar");!s||ve||ae||(s.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),s.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(r),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||a().Promise;if(n){if(e){var r=[];return this.isInPictureInPicture()&&r.push(this.exitPictureInPicture()),this.isFullscreen()&&r.push(this.exitFullscreen()),this.audioPosterMode()&&r.push(this.audioPosterMode(!1)),n.all(r).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||a().Promise;return n?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),It(this)&&this.trigger("languagechange"))},n.languages=function(){return Bt(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=Bt(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=Bt(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new tn(this,t);return this.addChild(r),r.on("dispose",(function(){n.removeChild(r)})),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Pi.length;n++){var r=Pi[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Di[e]),this.addClass(Di[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=K({},Oi,e),this.updateCurrentBreakpoint_()),K(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Di[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=Bt(e);var r=this.cache_.media,i=r.artwork,a=r.poster,s=r.src,o=r.textTracks;!i&&a&&(this.cache_.media.artwork=[{src:a,type:Hn(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&&o.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Hn(t.poster)}]),t}return Bt(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=Ne(e),r=n["data-setup"];if(Pe(e,"vjs-fill")&&(n.fill=!0),Pe(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=p()(r||"{}"),a=i[0],s=i[1];a&&q.error(a),K(n,s)}if(K(t,n),e.hasChildNodes())for(var o=e.childNodes,u=0,l=o.length;u<l;u++){var d=o[u],c=d.nodeName.toLowerCase();"source"===c?t.sources.push(Ne(d)):"track"===c&&t.tracks.push(Ne(d))}return t},n.flexNotSupported_=function(){var e=o().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(zt);Pn.names.forEach((function(e){var t=Pn[e];Mi.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Mi.prototype.crossorigin=Mi.prototype.crossOrigin,Mi.players={};var Li=a().navigator;Mi.prototype.options_={techOrder:Dn.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Li&&(Li.languages&&Li.languages[0]||Li.userLanguage||Li.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Mi.prototype[e]=function(){return this.techGet_(e)}})),ki.forEach((function(e){Mi.prototype["handleTech"+jt(e)+"_"]=function(){return this.trigger(e)}})),zt.registerComponent("Player",Mi);var Ni="plugin",xi={},Fi=function(e){return xi.hasOwnProperty(e)},Ui=function(e){return Fi(e)?xi[e]:void 0},ji=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},Bi=function(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},Vi=function(e,t){return t.prototype.name=e,function(){Bi(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=(0,_.Z)(t,[this].concat(r));return this[e]=function(){return a},Bi(this,a.getEventHash()),a}},qi=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Nt(this),delete this.trigger,Ft(this,this.constructor.defaultState),ji(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),yt(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=Vi(e,xi[e])},e.isBasic=function(t){var n="string"==typeof t?Ui(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Fi(t))q.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Mi.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return xi[t]=n,t!==Ni&&(e.isBasic(n)?Mi.prototype[t]=function(e,t){var n=function(){Bi(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return ji(this,e),Bi(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Mi.prototype[t]=Vi(t,n)),n},e.deregisterPlugin=function(e){if(e===Ni)throw new Error("Cannot de-register base plugin.");Fi(e)&&(delete xi[e],delete Mi.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(xi)),e.forEach((function(e){var n=Ui(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=Ui(e);return t&&t.VERSION||""},e}();qi.getPlugin=Ui,qi.BASE_PLUGIN_NAME=Ni,qi.registerPlugin(Ni,qi),Mi.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},Mi.prototype.hasPlugin=function(e){return!!Fi(e)};var Hi=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Gi(e,t,n){var r=Gi.getPlayer(e);if(r)return t&&q.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof e?Ze("#"+Hi(e)):e;if(!we(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");i.ownerDocument.defaultView&&i.ownerDocument.body.contains(i)||q.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(i.parentNode&&i.parentNode.hasAttribute("data-vjs-player")?i.parentNode:i).cloneNode(!0)),L("beforesetup").forEach((function(e){var n=e(i,Bt(t));Y(n)&&!Array.isArray(n)?t=Bt(t,n):q.error("please return an object in beforesetup hooks")}));var a=zt.getComponent("Player");return r=new a(i,t,n),L("setup").forEach((function(e){return e(r)})),r}if(Gi.hooks_=M,Gi.hooks=L,Gi.hook=function(e,t){L(e,t)},Gi.hookOnce=function(e,t){L(e,[].concat(t).map((function(t){return function n(){return N(e,n),t.apply(void 0,arguments)}})))},Gi.removeHook=N,!0!==a().VIDEOJS_NO_DYNAMIC_STYLE&&Se()){var zi=Ze(".vjs-styles-defaults");if(!zi){zi=at("vjs-styles-defaults");var Wi=Ze("head");Wi&&Wi.insertBefore(zi,Wi.firstChild),st(zi,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}nt(1,Gi),Gi.VERSION=O,Gi.options=Mi.prototype.options_,Gi.getPlayers=function(){return Mi.players},Gi.getPlayer=function(e){var t,n=Mi.players;if("string"==typeof e){var r=Hi(e),i=n[r];if(i)return i;t=Ze("#"+r)}else t=e;if(we(t)){var a=t,s=a.player,o=a.playerId;if(s||n[o])return s||n[o]}},Gi.getAllPlayers=function(){return Object.keys(Mi.players).map((function(e){return Mi.players[e]})).filter(Boolean)},Gi.players=Mi.players,Gi.getComponent=zt.getComponent,Gi.registerComponent=function(e,t){Dn.isTech(t)&&q.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),zt.registerComponent.call(zt,e,t)},Gi.getTech=Dn.getTech,Gi.registerTech=Dn.registerTech,Gi.use=function(e,t){On[e]=On[e]||[],On[e].push(t)},Object.defineProperty(Gi,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Gi.middleware,"TERMINATOR",{value:Ln,writeable:!1,enumerable:!0}),Gi.browser=Te,Gi.TOUCH_ENABLED=me,Gi.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},r={};for(var i in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),(0,T.Z)(n,e),e&&(n.super_=e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},Gi.mergeOptions=Bt,Gi.bind=St,Gi.registerPlugin=qi.registerPlugin,Gi.deregisterPlugin=qi.deregisterPlugin,Gi.plugin=function(e,t){return q.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),qi.registerPlugin(e,t)},Gi.getPlugins=qi.getPlugins,Gi.getPlugin=qi.getPlugin,Gi.getPluginVersion=qi.getPluginVersion,Gi.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Gi.options.languages=Bt(Gi.options.languages,((n={})[e]=t,n)),Gi.options.languages[e]},Gi.log=q,Gi.createLogger=H,Gi.createTimeRange=Gi.createTimeRanges=Yt,Gi.formatTime=sr,Gi.setFormatTime=function(e){ar=e},Gi.resetFormatTime=function(){ar=ir},Gi.parseUrl=yn,Gi.isCrossOrigin=Tn,Gi.EventTarget=Ct,Gi.on=mt,Gi.one=vt,Gi.off=gt,Gi.trigger=yt,Gi.xhr=g(),Gi.TextTrack=wn,Gi.AudioTrack=Cn,Gi.VideoTrack=An,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){Gi[e]=function(){return q.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),$e[e].apply(null,arguments)}})),Gi.computedStyle=Q,Gi.dom=$e,Gi.url=bn,Gi.defineLazyProperty=Ai,Gi.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Ki=b.Z,Yi=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},Xi=function(e){return Gi.log.debug?Gi.log.debug.bind(Gi,"VHS:",e+" >"):function(){}},Qi=1/30,Zi=.1,Ji=function(e,t){var n,r=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&r.push([e.start(n),e.end(n)]);return Gi.createTimeRanges(r)},$i=function(e,t){return Ji(e,(function(e,n){return e-Zi<=t&&n+Zi>=t}))},ea=function(e,t){return Ji(e,(function(e){return e-Qi>=t}))},ta=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},na=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},ra=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},ia=function(e,t){var n=0;if(!e||!e.length)return n;for(var r=0;r<e.length;r++){var i=e.start(r),a=e.end(r);t>a||(n+=t>i&&t<=a?a-t:a-i)}return n},aa=Gi.createTimeRange,sa=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},oa=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(r,i){e.push({duration:r.duration,segmentIndex:n,partIndex:i,part:r,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},ua=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},la=function(e){var t=e.preloadSegment;if(t){var n=t.parts;return(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0)+(n&&n.length?n.length:0)}},da=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=ua(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},ca=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=sa(e,i),void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(r.precise)return r.result;var i=function(e,t){for(var n,r=0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(n=e.segments[i]).start)return{result:n.start-r,precise:!0};if(r+=sa(e,n),void 0!==n.end)return{result:n.end-r,precise:!0}}return{result:-1,precise:!1}}(e,t);return i.precise?i.result:r.result+n},fa=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return a()[1/0]}return ca(e,t,n)},ha=function(e){var t=e.defaultDuration,n=e.durationList,r=e.startIndex,i=e.endIndex,a=0;if(r>i){var s=[i,r];r=s[0],i=s[1]}if(r<0){for(var o=r;o<Math.min(0,i);o++)a+=t;r=0}for(var u=r;u<i;u++)a+=n[u].duration;return a},pa=function(e,t,n,r){if(!e||!e.segments)return null;if(e.endList)return fa(e);if(null===t)return null;t=t||0;var i=ca(e,e.mediaSequence+e.segments.length,t);return n&&(i-=r="number"==typeof r?r:da(null,e)),Math.max(0,i)},ma=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},ga=function(e){return e.excludeUntil&&e.excludeUntil===1/0},ya=function(e){var t=ma(e);return!e.disabled&&!t},va=function(e,t){return t.attributes&&t.attributes[e]},_a=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!ya(e)&&(e.attributes.BANDWIDTH||0)<n})).length},Ta=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},ba=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var i in n){for(var a in n[i])if(r=t(n[i][a]))break;if(r)break}return!!r},Ea=function(e){if(!e||!e.playlists||!e.playlists.length)return ba(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],r=n.attributes&&n.attributes.CODECS;return r&&r.split(",").every((function(e){return(0,S.KL)(e)}))||ba(e,(function(e){return Ta(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var r=t(n);if("continue"!==r&&"object"==typeof r)return r.v}return!0},Sa={liveEdgeDelay:da,duration:fa,seekable:function(e,t,n){var r=t||0,i=pa(e,t,!0,n);return null===i?aa():aa(r,i)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,r=e.startingSegmentIndex,i=e.startingPartIndex,a=e.startTime,s=e.experimentalExactManifestTimings,o=n-a,u=oa(t),l=0,d=0;d<u.length;d++){var c=u[d];if(r===c.segmentIndex&&("number"!=typeof i||"number"!=typeof c.partIndex||i===c.partIndex)){l=d;break}}if(o<0){if(l>0)for(var f=l-1;f>=0;f--){var h=u[f];if(o+=h.duration,s){if(o<0)continue}else if(o+Qi<=0)continue;return{partIndex:h.partIndex,segmentIndex:h.segmentIndex,startTime:a-ha({defaultDuration:t.targetDuration,durationList:u,startIndex:l,endIndex:f})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n}}if(l<0){for(var p=l;p<0;p++)if((o-=t.targetDuration)<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n};l=0}for(var m=l;m<u.length;m++){var g=u[m];if(o-=g.duration,s){if(o>0)continue}else if(o-Qi>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:a+ha({defaultDuration:t.targetDuration,durationList:u,startIndex:l,endIndex:m})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:n}},isEnabled:ya,isDisabled:function(e){return e.disabled},isBlacklisted:ma,isIncompatible:ga,playlistEnd:pa,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:va,estimateSegmentRequestTime:function(e,t,n,r){return void 0===r&&(r=0),va("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*r)/t:NaN},isLowestEnabledRendition:_a,isAudioOnly:Ea,playlistMatch:Ta,segmentDurationWithParts:sa},wa=Gi.log,Ca=function(e,t){return e+"-"+t},Aa=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var a=e.mediaGroups[n][r][i];t(a,n,r,i)}}))},Ia=function(e){var t=e.playlist,n=e.uri,r=e.id;t.id=r,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},ka=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var r="placeholder-uri-"+n;e.playlists[n].uri=r}var i=Ea(e);Aa(e,(function(t,n,r,a){var s="placeholder-uri-"+n+"-"+r+"-"+a;if(!t.playlists||!t.playlists.length){if(i&&"AUDIO"===n&&!t.uri)for(var o=0;o<e.playlists.length;o++){var l=e.playlists[o];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===r)return}t.playlists=[(0,u.Z)({},t)]}t.playlists.forEach((function(t,n){var r=Ca(n,s);t.uri?t.resolvedUri=t.resolvedUri||Ki(e.uri,t.uri):(t.uri=0===n?s:r,t.resolvedUri=t.uri),t.id=t.id||r,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Ia({playlist:n,id:Ca(t,n.uri)}),n.resolvedUri=Ki(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||wa.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){Aa(e,(function(t){t.uri&&(t.resolvedUri=Ki(e.uri,t.uri))}))}(e)},Ra=Gi.mergeOptions,Pa=Gi.EventTarget,Da=function(e,t){if(!e)return t;var n=Ra(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(n.parts[r]=Ra(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},Oa=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=Ki(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Ki(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Ki(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=Ki(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=Ki(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=Ki(t,e.uri))}))},Ma=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var r=0;r<n.preloadHints.length;r++)if("MAP"===n.preloadHints[r].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},La=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},Na=function(e,t,n){void 0===n&&(n=La);var r=Ra(e,{}),i=r.playlists[t.id];if(!i)return null;if(n(i,t))return null;t.segments=Ma(t);var a=Ra(i,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,i.segments){if(t.skip){t.segments=t.segments||[];for(var s=0;s<t.skip.skippedSegments;s++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var r=e.slice(),i=t.slice();n=n||0;for(var a,s=[],o=0;o<i.length;o++){var u=r[o+n],l=i[o];u?(a=u.map||a,s.push(Da(u,l))):(a&&!l.map&&(l.map=a),s.push(l))}return s}(i.segments,t.segments,t.mediaSequence-i.mediaSequence)}a.segments.forEach((function(e){Oa(e,a.resolvedUri)}));for(var o=0;o<r.playlists.length;o++)r.playlists[o].id===t.id&&(r.playlists[o]=a);return r.playlists[t.id]=a,r.playlists[t.uri]=a,Aa(e,(function(e,n,r,i){if(e.playlists)for(var s=0;s<e.playlists.length;s++)t.id===e.playlists[s].id&&(e.playlists[s]=a)})),r},xa=function(e,t){var n=e.segments||[],r=n[n.length-1],i=r&&r.parts&&r.parts[r.parts.length-1],a=i&&i.duration||r&&r.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},Fa=function(e){function t(t,n,r){var i;if(void 0===r&&(r={}),i=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");i.logger_=Xi("PlaylistLoader");var a=r,s=a.withCredentials,o=void 0!==s&&s,u=a.handleManifestRedirects,l=void 0!==u&&u;i.src=t,i.vhs_=n,i.withCredentials=o,i.handleManifestRedirects=l;var d=n.options_;return i.customTagParsers=d&&d.customTagParsers||[],i.customTagMappers=d&&d.customTagMappers||[],i.experimentalLLHLS=d&&d.experimentalLLHLS||!1,Gi.browser.IE_VERSION&&(i.experimentalLLHLS=!1),i.state="HAVE_NOTHING",i.handleMediaupdatetimeout_=i.handleMediaupdatetimeout_.bind((0,c.Z)(i)),i.on("mediaupdatetimeout",i.handleMediaupdatetimeout_),i}(0,f.Z)(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=Ki(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var r=t.preloadSegment,i=t.mediaSequence+t.segments.length;if(r){var s=r.parts||[],o=la(t)-1;o>-1&&o!==s.length-1&&(n._HLS_part=o),(o>-1||s.length)&&i--}n._HLS_msn=i}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var u=new(a().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&u.searchParams.set(e,n[e])})),e=u.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var r=t.uri,i=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[i],status:e.status,message:"HLS playlist request error at URL: "+r+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,r=e.manifestString,i=e.customTagParsers,a=void 0===i?[]:i,s=e.customTagMappers,o=void 0===s?[]:s,u=e.experimentalLLHLS,l=new E._b;t&&l.on("warn",t),n&&l.on("info",n),a.forEach((function(e){return l.addParser(e)})),o.forEach((function(e){return l.addTagMapper(e)})),l.push(r),l.end();var d=l.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){d.hasOwnProperty(e)&&delete d[e]})),d.segments&&d.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!d.targetDuration){var c=10;d.segments&&d.segments.length&&(c=d.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+c),d.targetDuration=c}var f=ua(d);if(f.length&&!d.partTargetDuration){var h=f.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+h),wa.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),d.partTargetDuration=h}return d}({onwarn:function(e){var r=e.message;return t.logger_("m3u8-parser warn for "+n+": "+r)},oninfo:function(e){var r=e.message;return t.logger_("m3u8-parser info for "+n+": "+r)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,r=e.url,i=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:r,manifestString:t});a.lastRequest=Date.now(),Ia({playlist:a,uri:r,id:i});var s=Na(this.master,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,s?(this.master=s,this.media_=this.master.playlists[i]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(xa(this.media(),!!s)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),a().clearTimeout(this.mediaUpdateTimeout),a().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(a().clearTimeout(this.finalRenditionTimeout),t){var r=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=a().setTimeout(this.media.bind(this,e,!1),r)}else{var i=this.state,s=!this.media_||e.id!==this.media_.id,o=this.master.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(s&&(this.trigger("mediachanging"),"HAVE_MASTER"===i?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(xa(e,!0)),s){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,r){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=Yi(n.handleManifestRedirects,e.resolvedUri,r),t)return n.playlistRequestError(n.request,e,i);n.haveMetadata({playlistString:r.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===i?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=a().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=a().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=a().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=Yi(e.handleManifestRedirects,e.src,n);var r=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(r)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,ka(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=Ma(e),e.segments.forEach((function(t){Oa(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||a().location.href;this.master=function(e,t){var n=Ca(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:a().location.href,resolvedUri:a().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Pa),Ua=Gi.xhr,ja=Gi.mergeOptions,Ba=function(e,t,n,r){var i="arraybuffer"===e.responseType?e.response:e.responseText;!t&&i&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=i.byteLength||i.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(i||e.responseText)))),r(t,e)},Va=function(){var e=function e(t,n){t=ja({timeout:45e3},t);var r=e.beforeRequest||Gi.Vhs.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(t);i&&(t=i)}var a=(!0===Gi.Vhs.xhr.original?Ua:Gi.Vhs.xhr)(t,(function(e,t){return Ba(a,e,t,n)})),s=a.abort;return a.abort=function(){return a.aborted=!0,s.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},qa=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?a().BigInt(t.offset)+a().BigInt(t.length)-a().BigInt(1):t.offset+t.length-1)),n},Ha=function(e,t){return e.start(t)+"-"+e.end(t)},Ga=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},za=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Wa=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];(0,C.Au)(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},Ka=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Ya=function(e){return e.resolvedUri},Xa=function(e){for(var t=Array.prototype.slice.call(e),n=16,r="",i=0;i<t.length/n;i++)r+=t.slice(i*n,i*n+n).map(Ga).join("")+" "+t.slice(i*n,i*n+n).map(za).join("")+"\n";return r},Qa=Object.freeze({__proto__:null,createTransferableMessage:Wa,initSegmentId:Ka,segmentKeyId:Ya,hexDump:Xa,tagDump:function(e){var t=e.bytes;return Xa(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=Ha(e,t)+" ";return n}}),Za=function e(t){var n=t.programTime,r=t.playlist,i=t.retryCount,a=void 0===i?2:i,s=t.seekTo,o=t.pauseAfterSeek,u=void 0===o||o,l=t.tech,d=t.callback;if(!d)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!s)return d({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!l.hasStarted_)return d({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(r))return d({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var c=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(n<r.dateTimeObject)return null;for(var i=0;i<t.segments.length-1&&(r=t.segments[i],!(n<t.segments[i+1].dateTimeObject));i++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,u=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return n>new Date(o.getTime()+1e3*u)?null:(n>o&&(r=s),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Sa.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!c)return d({message:n+" was not found in the stream"});var f=c.segment,h=function(e,t){var n,r;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3}(f.dateTimeObject,n);if("estimate"===c.type)return 0===a?d({message:n+" is not buffered yet. Try again"}):(s(c.estimatedStart+h),void l.one("seeked",(function(){e({programTime:n,playlist:r,retryCount:a-1,seekTo:s,pauseAfterSeek:u,tech:l,callback:d})})));var p=f.start+h;l.one("seeked",(function(){return d(null,l.currentTime())})),u&&l.pause(),s(p)},Ja=function(e,t){if(4===e.readyState)return t()},$a=Gi.EventTarget,es=Gi.mergeOptions,ts=function(e,t){if(!La(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var r=e.segments[n],i=t.segments[n];if(r.uri!==i.uri)return!1;if(r.byterange||i.byterange){var a=r.byterange,s=i.byterange;if(a&&!s||!a&&s)return!1;if(a.offset!==s.offset||a.length!==s.length)return!1}}return!0},ns=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},rs=function(e,t){var n={};for(var r in e){var i=e[r].sidx;if(i){var a=(0,A.generateSidxKey)(i);if(!t[a])break;var s=t[a].sidxInfo;ns(s,i)&&(n[a]=t[a])}}return n},is=function(e){function t(t,n,r,i){var a;void 0===r&&(r={}),(a=e.call(this)||this).masterPlaylistLoader_=i||(0,c.Z)(a),i||(a.isMaster_=!0);var s=r,o=s.withCredentials,u=void 0!==o&&o,l=s.handleManifestRedirects,d=void 0!==l&&l;if(a.vhs_=n,a.withCredentials=u,a.handleManifestRedirects=d,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=Xi("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}(0,f.Z)(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var r=this,i=e.sidx&&(0,A.generateSidxKey)(e.sidx);if(e.sidx&&i&&!this.masterPlaylistLoader_.sidxMapping_[i]){var s=Yi(this.handleManifestRedirects,e.sidx.resolvedUri),o=function(a,s){if(!r.requestErrored_(a,s,t)){var o,u=r.masterPlaylistLoader_.sidxMapping_;try{o=k()((0,C.Ki)(s.response).subarray(8))}catch(e){return void r.requestErrored_(e,s,t)}return u[i]={sidxInfo:e.sidx,sidx:o},(0,A.addSidxSegmentsToPlaylist)(e,o,e.sidx.resolvedUri),n(!0)}};this.request=function(e,t,n){var r,i=[],a=!1,s=function(e,t,r,i){return t.abort(),a=!0,n(e,t,r,i)},o=function(e,t){if(!a){if(e)return s(e,t,"",i);var n=t.responseText.substring(i&&i.byteLength||0,t.responseText.length);if(i=(0,C.lx)(i,(0,C.qX)(n,!0)),r=r||(0,R.c)(i),i.length<10||r&&i.length<r+2)return Ja(t,(function(){return s(e,t,"",i)}));var o=(0,P.Xm)(i);return"ts"===o&&i.length<188||!o&&i.length<376?Ja(t,(function(){return s(e,t,"",i)})):s(null,t,o,i)}},u={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Ba(e,null,{statusCode:e.status},o)}))}},l=t(u,(function(e,t){return Ba(l,e,t,o)}));return l}(s,this.vhs_.xhr,(function(t,n,i,a){if(t)return o(t,n);if(!i||"mp4"!==i)return o({status:n.status,message:"Unsupported "+(i||"unknown")+" container type for sidx segment at URL: "+s,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var u=e.sidx.byterange,l=u.offset,d=u.length;if(a.length>=d+l)return o(t,{response:a.subarray(l,l+d),status:n.status,uri:n.uri});r.request=r.vhs_.xhr({uri:s,responseType:"arraybuffer",headers:qa({byterange:e.sidx.byterange})},o)}))}else this.mediaRequest_=a().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},a().clearTimeout(this.minimumUpdatePeriodTimeout_),a().clearTimeout(this.mediaRequest_),a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var r=!this.media_||e.id!==this.media_.id;if(r&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(r){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(a().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;a().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=a().setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=a().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,r){if(!t.requestErrored_(n,r)){var i=r.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=r.responseText,r.responseHeaders&&r.responseHeaders.date?t.masterLoaded_=Date.parse(r.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=Yi(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,r),i?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(r,i)}))):e(r,i)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t=this,n=(0,A.parseUTCTiming)(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:Ki(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(r,i){if(t.request){if(r)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,n,r,i,a,s,o=this.masterPlaylistLoader_.master,u=(t=(e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:o}).masterXml,n=e.srcUrl,r=e.clientOffset,i=e.sidxMapping,a=e.previousManifest,s=(0,A.parse)(t,{manifestUri:n,clientOffset:r,sidxMapping:i,previousManifest:a}),ka(s,n),s);o&&(u=function(e,t,n){for(var r=!0,i=es(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var s=t.playlists[a];if(s.sidx){var o=(0,A.generateSidxKey)(s.sidx);n&&n[o]&&n[o].sidx&&(0,A.addSidxSegmentsToPlaylist)(s,n[o].sidx,s.sidx.resolvedUri)}var u=Na(i,s,ts);u&&(i=u,r=!1)}return Aa(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,o=Na(i,e.playlists[0],ts);o&&((i=o).mediaGroups[t][n][a].playlists[0]=i.playlists[s],r=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:i}(o,u,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=u||o;var l=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return l&&l!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=l),(!o||u&&u.minimumUpdatePeriod!==o.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(u)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(a().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=a().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var r,i,a;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(r=e.masterPlaylistLoader_.master,i=e.masterPlaylistLoader_.sidxMapping_,a=rs(r.playlists,i),Aa(r,(function(e,t,n,r){if(e.playlists&&e.playlists.length){var s=e.playlists;a=es(a,rs(s,i))}})),a),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,r=!this.media_||this.media_!==n[e];r?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=a().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),xa(t.media(),Boolean(r))))}(),this.trigger("loadedplaylist")},t}($a),as={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ss=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},os=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=ss(new Worker(t));n.objURL=t;var r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},us=function(e){return"var browserWorkerPolyFill = "+ss.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},ls=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},ds=us(ls((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,r,i,a,s,o,u,l,d,c,f,h,p,m,g,y,v,_,T,b,E,S,w,C,A,I,k,R,P,D,O,M,L,N,x,F,U,j,B,V,q=e,H=Math.pow(2,32),G={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*H+n.getUint32(4)},MAX_UINT32:H},z=G.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);w=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),A=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new Uint8Array([0,0,0,1]),I=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),k=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),R={video:I,audio:k},O=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=new Uint8Array([0,0,0,0,0,0,0,0]),L=M,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),x=M,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return t(S.dinf,t(S.dref,O))},i=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return t(S.hdlr,R[e])},m=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},p=function(e){return t(S.mdia,m(e),g(e.type),o(e))},s=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,P):t(S.smhd,D),r(),v(e))},u=function(e,n){for(var r=[],i=n.length;i--;)r[i]=T(n[i]);return t.apply(null,[S.moof,s(e)].concat(r))},l=function(e){for(var n=e.length,r=[];n--;)r[n]=f(e[n]);return t.apply(null,[S.moov,c(4294967295)].concat(r).concat(d(e)))},d=function(e){for(var n=e.length,r=[];n--;)r[n]=b(e[n]);return t.apply(null,[S.mvex].concat(r))},c=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},y=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},v=function(e){return t(S.stbl,_(e),t(S.stts,x),t(S.stsc,L),t(S.stsz,N),t(S.stco,M))},_=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?F(e):U(e))},F=function(e){var n,r,i=e.sps||[],a=e.pps||[],s=[],o=[];for(n=0;n<i.length;n++)s.push((65280&i[n].byteLength)>>>8),s.push(255&i[n].byteLength),s=s.concat(Array.prototype.slice.call(i[n]));for(n=0;n<a.length;n++)o.push((65280&a[n].byteLength)>>>8),o.push(255&a[n].byteLength),o=o.concat(Array.prototype.slice.call(a[n]));if(r=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],s,[a.length],o))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var u=e.sarRatio[0],l=e.sarRatio[1];r.push(t(S.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return t.apply(null,r)},U=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},h=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},T=function(e){var n,r,i,a,s,o;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/z),o=Math.floor(e.baseMediaDecodeTime%z),r=t(S.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(i=E(e,92),t(S.traf,n,r,i)):(a=y(e),i=E(e,a.length+92),t(S.traf,n,r,i,a))},f=function(e){return e.duration=e.duration||4294967295,t(S.trak,h(e),p(e))},b=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},V=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,n){var r,i,a,s,o,u;for(n+=20+16*(s=e.samples||[]).length,a=V(s,n),(i=new Uint8Array(a.length+16*s.length)).set(a),r=a.length,u=0;u<s.length;u++)o=s[u],i[r++]=(4278190080&o.duration)>>>24,i[r++]=(16711680&o.duration)>>>16,i[r++]=(65280&o.duration)>>>8,i[r++]=255&o.duration,i[r++]=(4278190080&o.size)>>>24,i[r++]=(16711680&o.size)>>>16,i[r++]=(65280&o.size)>>>8,i[r++]=255&o.size,i[r++]=o.flags.isLeading<<2|o.flags.dependsOn,i[r++]=o.flags.isDependedOn<<6|o.flags.hasRedundancy<<4|o.flags.paddingValue<<1|o.flags.isNonSyncSample,i[r++]=61440&o.flags.degradationPriority,i[r++]=15&o.flags.degradationPriority,i[r++]=(4278190080&o.compositionTimeOffset)>>>24,i[r++]=(16711680&o.compositionTimeOffset)>>>16,i[r++]=(65280&o.compositionTimeOffset)>>>8,i[r++]=255&o.compositionTimeOffset;return t(S.trun,i)},j=function(e,n){var r,i,a,s,o,u;for(n+=20+8*(s=e.samples||[]).length,a=V(s,n),(r=new Uint8Array(a.length+8*s.length)).set(a),i=a.length,u=0;u<s.length;u++)o=s[u],r[i++]=(4278190080&o.duration)>>>24,r[i++]=(16711680&o.duration)>>>16,r[i++]=(65280&o.duration)>>>8,r[i++]=255&o.duration,r[i++]=(4278190080&o.size)>>>24,r[i++]=(16711680&o.size)>>>16,r[i++]=(65280&o.size)>>>8,r[i++]=255&o.size;return t(S.trun,r)},E=function(e,t){return"audio"===e.type?j(e,t):B(e,t)},a=function(){return t(S.ftyp,w,C,w,A)};var W,K,Y,X,Q,Z,J,$,ee=function(e){return t(S.mdat,e)},te=u,ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},re=[33,16,5,32,164,27],ie=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae=function(e){for(var t=[];e--;)t.push(0);return t},se=9e4;Z=function(e,t){return K(Q(e,t))},J=function(e,t){return Y(X(e),t)},$=function(e,t,n){return X(n?e:e-t)};var oe=se,ue=K=function(e){return e*se},le=(Y=function(e,t){return e*t},X=function(e){return e/se}),de=(Q=function(e,t){return e/t},Z),ce=J,fe=$,he=function(e,t,n,r){var i,a,s,o,u,l=0,d=0,c=0;if(t.length&&(i=de(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(oe/(e.samplerate/1024)),n&&r&&(l=i-Math.max(n,r),c=(d=Math.floor(l/a))*a),!(d<1||c>45e3))){for((s=function(){if(!W){var e={96e3:[re,[227,64],ae(154),[56]],88200:[re,[231],ae(170),[56]],64e3:[re,[248,192],ae(240),[56]],48e3:[re,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[re,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[re,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[re,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[ie,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[ie,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[ie,ae(268),[3,121,16],ae(47),[7]]};t=e,W=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return W}()[e.samplerate])||(s=t[0].data),o=0;o<d;o++)u=t[0],t.splice(0,0,{data:s,dts:u.dts-a,pts:u.pts-a});return e.baseMediaDecodeTime-=Math.floor(ce(c,e.samplerate)),c}},pe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},me=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},ge=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ye=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ie(0,0),new Ie(0,1),new Ie(1,0),new Ie(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ee({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ye.prototype=new q).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}n.payload=void 0}t+=i,r=0,i=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=function(e,t){var n,r,i,a,s=[];if(!(64&t[0]))return s;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[2+(i=3*n)],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],s.push(a));return s}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ye.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ye.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ye.prototype.flush=function(){return this.flushStream("flush")},ye.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ye.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ye.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ye.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ye.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ye.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ye.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ve={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},_e=function(e){return 32<=e&&e<=127||160<=e&&e<=255},Te=function(e){this.windowNum=e,this.reset()};Te.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Te.prototype.getText=function(){return this.rows.join("\n")},Te.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Te.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Te.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Te.prototype.addText=function(e){this.rows[this.rowIdx]+=e},Te.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var be=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new Te(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};be.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new Te(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},be.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},be.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var Ee=function e(t){t=t||{},e.prototype.init.call(this);var n,r=this,i=t.captionServices||{},a={};Object.keys(i).forEach((function(e){n=i[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(r.new708Packet(),r.add708Bytes(e)):(null===r.current708Packet&&r.new708Packet(),r.add708Bytes(e))}};Ee.prototype=new q,Ee.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ee.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,r=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(r)},Ee.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,r=null,i=0,a=t[i++];for(e.seq=a>>6,e.sizeCode=63&a;i<t.length;i++)r=31&(a=t[i++]),7==(n=a>>5)&&r>0&&(n=a=t[i++]),this.pushServiceBlock(n,i,r),r>0&&(i+=r-1)},Ee.prototype.pushServiceBlock=function(e,t,n){var r,i=t,a=this.current708Packet.data,s=this.services[e];for(s||(s=this.initService(e,i));i<t+n&&i<a.length;i++)r=a[i],_e(r)?i=this.handleText(i,s):24===r?i=this.multiByteCharacter(i,s):16===r?i=this.extendedCommands(i,s):128<=r&&r<=135?i=this.setCurrentWindow(i,s):152<=r&&r<=159?i=this.defineWindow(i,s):136===r?i=this.clearWindows(i,s):140===r?i=this.deleteWindows(i,s):137===r?i=this.displayWindows(i,s):138===r?i=this.hideWindows(i,s):139===r?i=this.toggleWindows(i,s):151===r?i=this.setWindowAttributes(i,s):144===r?i=this.setPenAttributes(i,s):145===r?i=this.setPenColor(i,s):146===r?i=this.setPenLocation(i,s):143===r?s=this.reset(i,s):8===r?s.currentWindow.backspace():12===r?s.currentWindow.clearText():13===r?s.currentWindow.pendingNewLine=!0:14===r?s.currentWindow.clearText():141===r&&i++},Ee.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return _e(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},Ee.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},Ee.prototype.initService=function(e,t){var n,r,i=this;return(n="SERVICE"+e)in this.serviceEncodings&&(r=this.serviceEncodings[n]),this.services[e]=new be(e,r,i),this.services[e].init(this.getPts(t),(function(t){i.flushDisplayed(t,i.services[e])})),this.services[e]},Ee.prototype.handleText=function(e,t,n){var r,i,a,s,o=n&&n.isExtended,u=n&&n.isMultiByte,l=this.current708Packet.data,d=o?4096:0,c=l[e],f=l[e+1],h=t.currentWindow;return t.textDecoder_&&!o?(u?(i=[c,f],e++):i=[c],r=t.textDecoder_.decode(new Uint8Array(i))):(s=ve[a=d|c]||a,r=4096&a&&a===s?"":String.fromCharCode(s)),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(r),e},Ee.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,r=n[e+1],i=n[e+2];return _e(r)&&_e(i)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Ee.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},Ee.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,r=n[e],i=7&r;t.setCurrentWindow(i);var a=t.currentWindow;return r=n[++e],a.visible=(32&r)>>5,a.rowLock=(16&r)>>4,a.columnLock=(8&r)>>3,a.priority=7&r,r=n[++e],a.relativePositioning=(128&r)>>7,a.anchorVertical=127&r,r=n[++e],a.anchorHorizontal=r,r=n[++e],a.anchorPoint=(240&r)>>4,a.rowCount=15&r,r=n[++e],a.columnCount=63&r,r=n[++e],a.windowStyle=(56&r)>>3,a.penStyle=7&r,a.virtualRowCount=a.rowCount+1,e},Ee.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.winAttr;return r=n[++e],i.fillOpacity=(192&r)>>6,i.fillRed=(48&r)>>4,i.fillGreen=(12&r)>>2,i.fillBlue=3&r,r=n[++e],i.borderType=(192&r)>>6,i.borderRed=(48&r)>>4,i.borderGreen=(12&r)>>2,i.borderBlue=3&r,r=n[++e],i.borderType+=(128&r)>>5,i.wordWrap=(64&r)>>6,i.printDirection=(48&r)>>4,i.scrollDirection=(12&r)>>2,i.justify=3&r,r=n[++e],i.effectSpeed=(240&r)>>4,i.effectDirection=(12&r)>>2,i.displayEffect=3&r,e},Ee.prototype.flushDisplayed=function(e,t){for(var n=[],r=0;r<8;r++)t.windows[r].visible&&!t.windows[r].isEmpty()&&n.push(t.windows[r].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},Ee.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},Ee.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=1);return e},Ee.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible=0);return e},Ee.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&(t.windows[i].visible^=1);return e},Ee.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].clearText();return e},Ee.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var i=0;i<8;i++)n&1<<i&&t.windows[i].reset();return e},Ee.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penAttr;return r=n[++e],i.textTag=(240&r)>>4,i.offset=(12&r)>>2,i.penSize=3&r,r=n[++e],i.italics=(128&r)>>7,i.underline=(64&r)>>6,i.edgeType=(56&r)>>3,i.fontStyle=7&r,e},Ee.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penColor;return r=n[++e],i.fgOpacity=(192&r)>>6,i.fgRed=(48&r)>>4,i.fgGreen=(12&r)>>2,i.fgBlue=3&r,r=n[++e],i.bgOpacity=(192&r)>>6,i.bgRed=(48&r)>>4,i.bgGreen=(12&r)>>2,i.bgBlue=3&r,r=n[++e],i.edgeRed=(48&r)>>4,i.edgeGreen=(12&r)>>2,i.edgeBlue=3&r,e},Ee.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,r=n[e],i=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,r=n[++e],i.row=15&r,r=n[++e],i.column=63&r,e},Ee.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},we=function(e){return null===e?"":(e=Se[e]||e,String.fromCharCode(e))},Ce=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ae=function(){for(var e=[],t=15;t--;)e.push("");return e},Ie=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ae();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ae();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ae()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=we((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=we((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var s=Ce.indexOf(7968&t);"rollUp"===this.mode_&&(s-this.rollUpRows_+1<0&&(s=this.rollUpRows_-1),this.setRollUp(e.pts,s)),s!==this.row_&&(this.clearFormatting(e.pts),this.row_=s),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=we(r),a+=we(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ie.prototype=new q,Ie.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ie.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ae(),this.nonDisplayed_=Ae(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ie.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ie.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ie.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ie.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ie.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ie.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ie.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ie.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ie.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ae(),this.displayed_=Ae()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ie.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ie.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ie.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ie.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ie.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ie.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var ke={CaptionStream:ye,Cea608Stream:Ie,Cea708Stream:Ee},Re={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pe="shared",De=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},Oe=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||Pe,this.push=function(e){this.type_!==Pe&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=De(e.dts,r),e.pts=De(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Oe.prototype=new q;var Me,Le=Oe,Ne=De,xe=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},Fe=function(e,t,n){return decodeURIComponent(xe(e,t,n))},Ue=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},je={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.value=Fe(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Fe(e.data,1,t),e.url=Fe(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(xe(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Me=function(e){var t,n={descriptor:e&&e.descriptor},r=0,i=[],a=0;if(Me.prototype.init.call(this),this.dispatchType=Re.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,s,o,u;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=Ue(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},u=0;u<r;)t.data.set(i[0].data.subarray(0,r-u),u),u+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();n=10,64&t.data[5]&&(n+=4,n+=Ue(t.data.subarray(10,14)),r-=Ue(t.data.subarray(16,20)));do{if((s=Ue(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((o={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+s+10)}).key=o.id,je[o.id]&&(je[o.id](o),"com.apple.streaming.transportStreamTimestamp"===o.owner)){var l=o.data,d=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;d*=4,d+=3&l[7],o.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=o.timeStamp,t.dts=o.timeStamp),this.trigger("timestamp",o)}t.frames.push(o),n+=10,n+=s}while(n<r);this.trigger("data",t)}}},Me.prototype=new q;var Be,Ve,qe,He=Me,Ge=Le,ze=188;(Be=function(){var e=new Uint8Array(ze),t=0;Be.prototype.init.call(this),this.push=function(n){var r,i=0,a=ze;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=ze,a+=ze);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){t===ze&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new q,Ve=function(){var e,t,n,r;Ve.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],s=(31&e[i+1])<<8|e[i+2];a===Re.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=s:a===Re.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=s:a===Re.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][s]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Re.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Re.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},Ve.prototype=new q,Ve.STREAM_TYPES={h264:27,adts:15},qe=function(){var e,t=this,n=!1,r={data:[],size:0},i={data:[],size:0},a={data:[],size:0},s=function(e,n,r){var i,a,s=new Uint8Array(e.size),o={type:n},u=0,l=0;if(e.data.length&&!(e.size<9)){for(o.trackId=e.data[0].pid,u=0;u<e.data.length;u++)a=e.data[u],s.set(a.data,l),l+=a.data.byteLength;var d,c,f,h;c=o,h=(d=s)[0]<<16|d[1]<<8|d[2],c.data=new Uint8Array,1===h&&(c.packetLength=6+(d[4]<<8|d[5]),c.dataAlignmentIndicator=0!=(4&d[6]),192&(f=d[7])&&(c.pts=(14&d[9])<<27|(255&d[10])<<20|(254&d[11])<<12|(255&d[12])<<5|(254&d[13])>>>3,c.pts*=4,c.pts+=(6&d[13])>>>1,c.dts=c.pts,64&f&&(c.dts=(14&d[14])<<27|(255&d[15])<<20|(254&d[16])<<12|(255&d[17])<<5|(254&d[18])>>>3,c.dts*=4,c.dts+=(6&d[18])>>>1)),c.data=d.subarray(9+d[8])),i="video"===n||o.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",o)}};qe.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case Re.H264_STREAM_TYPE:e=r,t="video";break;case Re.ADTS_STREAM_TYPE:e=i,t="audio";break;case Re.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var r={type:"metadata",tracks:[]};null!==(e=o.programMapTable).video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",r)}})[o.type]()},this.reset=function(){r.size=0,r.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(r,"video"),s(i,"audio"),s(a,"timed-metadata")},this.flush=function(){if(!n&&e){var r={type:"metadata",tracks:[]};null!==e.video&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&r.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",r)}n=!1,this.flushStreams_(),this.trigger("done")}},qe.prototype=new q;var We={PAT_PID:0,MP2T_PACKET_LENGTH:ze,TransportPacketStream:Be,TransportParseStream:Ve,ElementaryStream:qe,TimestampRolloverStream:Ge,CaptionStream:ke.CaptionStream,Cea608Stream:ke.Cea608Stream,Cea708Stream:ke.Cea708Stream,MetadataStream:He};for(var Ke in Re)Re.hasOwnProperty(Ke)&&(We[Ke]=Re[Ke]);var Ye,Xe=We,Qe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ye=function(e){var t,n=0;Ye.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(r){var i,a,s,o,u,l=0;if(e||(n=0),"audio"===r.type){var d;for(t&&t.length?(s=t,(t=new Uint8Array(s.byteLength+r.data.byteLength)).set(s),t.set(r.data,s.byteLength)):t=r.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof d&&(this.skipWarn_(d,l),d=null),a=2*(1&~t[l+1]),i=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,u=9e4*(o=1024*(1+(3&t[l+6])))/Qe[(60&t[l+2])>>>2],t.byteLength-l<i)break;this.trigger("data",{pts:r.pts+n*u,dts:r.dts+n*u,sampleCount:o,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:Qe[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,l+i)}),n++,l+=i}else"number"!=typeof d&&(d=l),l++;"number"==typeof d&&(this.skipWarn_(d,l),d=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Ye.prototype=new q;var Ze,Je,$e,et=Ye,tt=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),s=Math.min(4,t);if(0===s)throw new Error("no bytes available");a.set(e.subarray(i,i+s)),n=new DataView(a.buffer).getUint32(0),r=8*s,t-=s},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};Je=function(){var e,t,n=0;Je.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Je.prototype=new q,$e={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Ze=function(){var e,t,n,r,i,a,s,o=new Je;Ze.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,o.push(e))},o.on("data",(function(s){var o={trackId:t,pts:n,dts:r,data:s,nalUnitTypeCode:31&s[0]};switch(o.nalUnitTypeCode){case 5:o.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:o.nalUnitType="sei_rbsp",o.escapedRBSP=i(s.subarray(1));break;case 7:o.nalUnitType="seq_parameter_set_rbsp",o.escapedRBSP=i(s.subarray(1)),o.config=a(o.escapedRBSP);break;case 8:o.nalUnitType="pic_parameter_set_rbsp";break;case 9:o.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",o)})),o.on("done",(function(){e.trigger("done")})),o.on("partialdone",(function(){e.trigger("partialdone")})),o.on("reset",(function(){e.trigger("reset")})),o.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){o.flush()},this.partialFlush=function(){o.partialFlush()},this.reset=function(){o.reset()},this.endTimeline=function(){o.endTimeline()},s=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},a=function(e){var t,n,r,i,a,o,u,l,d,c,f,h,p=0,m=0,g=0,y=0,v=[1,1];if(n=(t=new tt(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),$e[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(f=3!==a?8:12,h=0;h<f;h++)t.readBoolean()&&s(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(o=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===o)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),h=0;h<u;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),d=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(p=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:16*(l+1)-2*p-2*m,height:(2-c)*(d+1)*16-2*g-2*y,sarRatio:v}}},Ze.prototype=new q;var nt,rt={H264Stream:Ze,NalByteStream:Je},it=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],at=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},st=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=at(t,n))},ot=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},ut={isLikelyAacData:function(e){var t=st(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:at,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return it[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=ot(e.subarray(10,14)));do{if((n=ot(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var i=0;i<r.byteLength;i++)if(0===r[i]){var a=unescape(function(e,t,n){var r,i="";for(r=0;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,i));if("com.apple.streaming.transportStreamTimestamp"===a){var s=r.subarray(i+1),o=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return(o*=4)+(3&s[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(nt=function(){var e=new Uint8Array,t=0;nt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,s,o=0,u=0;for(e.length?(s=e.length,(e=new Uint8Array(n.byteLength+s)).set(e.subarray(0,s)),e.set(n,s)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(u+(o=ut.parseAdtsSize(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+o),pts:t,dts:t},this.trigger("data",a),u+=o}else{if(e.length-u<10)break;if(u+(o=ut.parseId3TagSize(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+o)},this.trigger("data",i),u+=o}r=e.length-u,e=r>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new q;var lt,dt,ct,ft,ht=nt,pt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],gt=rt.H264Stream,yt=ut.isLikelyAacData,vt=function(e,t){t.stream=e,this.trigger("log",t)},_t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];"headOfPipeline"!==i&&t[i].on&&t[i].on("log",vt.bind(e,i))}},Tt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},bt=function(e,t,n,r,i,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};dt=function(e,t){var n,r=[],i=0,a=0,s=1/0;n=(t=t||{}).firstSequenceNumber||0,dt.prototype.init.call(this),this.push=function(t){ge(e,t),e&&pt.forEach((function(n){e[n]=t[n]})),r.push(t)},this.setEarliestDts=function(e){i=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var o,u,l,d,c,f,h;0!==r.length?(o=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(r,e,i),e.baseMediaDecodeTime=me(e,t.keepOriginalTimestamps),h=he(e,o,a,s),e.samples=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r}(o),l=ee(function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i}(o)),r=[],u=te(n,[e]),d=new Uint8Array(u.byteLength+l.byteLength),n++,d.set(u),d.set(l,u.byteLength),pe(e),c=Math.ceil(9216e4/e.samplerate),o.length&&(f=o.length*c,this.trigger("segmentTimingInfo",bt(de(e.baseMediaDecodeTime,e.samplerate),o[0].dts,o[0].pts,o[0].dts+f,o[0].pts+f,h||0)),this.trigger("timingInfo",{start:o[0].pts,end:o[0].pts+f})),this.trigger("data",{track:e,boxes:d}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){pe(e),r=[],this.trigger("reset")}},dt.prototype=new q,lt=function(e,t){var n,r,i,a=[],s=[];n=(t=t||{}).firstSequenceNumber||0,lt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){ge(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.config,e.sps=[t.data],mt.forEach((function(t){e[t]=r[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var r,i,o,u,l,d,c,f,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(r=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i}(a),(o=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i}(r))[0][0].keyFrame||((i=this.getGopForFusion_(a[0],e))?(h=i.duration,o.unshift(i),o.byteLength+=i.byteLength,o.nalCount+=i.nalCount,o.pts=i.pts,o.dts=i.dts,o.duration+=i.duration):o=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(o)),s.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(o):this.alignGopsAtStart_(o)))return this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");pe(e),o=p}ge(e,o),e.samples=function(e,t){var n,r,i,a,s,o=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)s=a[r],o+=(i=ne(s,o)).size,u.push(i);return u}(o),l=ee(function(e){var t,n,r,i,a,s,o=0,u=e.byteLength,l=e.nalCount,d=new Uint8Array(u+4*l),c=new DataView(d.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)s=a[r],c.setUint32(o,s.data.byteLength),o+=4,d.set(s.data,o),o+=s.data.byteLength;return d}(o)),e.baseMediaDecodeTime=me(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",o.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),c=o[0],f=o[o.length-1],this.trigger("segmentTimingInfo",bt(e.baseMediaDecodeTime,c.dts,c.pts,f.dts+f.duration,f.pts+f.duration,h)),this.trigger("timingInfo",{start:o[0].pts,end:o[o.length-1].pts+o[o.length-1].duration}),this.gopCache_.unshift({gop:o.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=te(n,[e]),d=new Uint8Array(u.byteLength+l.byteLength),n++,d.set(u),d.set(l,u.byteLength),this.trigger("data",{track:e,boxes:d}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,s.length=0,this.trigger("reset")},this.resetStream_=function(){pe(e),r=void 0,i=void 0},this.getGopForFusion_=function(t){var n,r,i,a,s,o=1/0;for(s=0;s<this.gopCache_.length;s++)i=(a=this.gopCache_[s]).gop,e.pps&&Tt(e.pps[0],a.pps[0])&&e.sps&&Tt(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||o>n)&&(r=a,o=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,o,u,l;for(a=e.byteLength,o=e.nalCount,u=e.duration,t=n=0;t<s.length&&n<e.length&&(r=s[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,o-=i.nalCount,u-=i.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=u,l.nalCount=o,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,o,u;for(t=s.length-1,n=e.length-1,a=null,o=!1;t>=0&&n>=0;){if(r=s[t],i=e[n],r.pts===i.pts){o=!0;break}r.pts>i.pts?t--:(t===s.length-1&&(a=n),n--)}if(!o&&null===a)return null;if(0===(u=o?n:a))return e;var l=e.slice(u),d=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=d.byteLength,l.duration=d.duration,l.nalCount=d.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){s=e}},lt.prototype=new q,ft=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ft.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},ft.prototype=new q,ft.prototype.flush=function(e){var t,n,r,i,s=0,o={captions:[],captionStreams:{},metadata:[],info:{}},u=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(u=this.videoTrack.timelineStartInfo.pts,mt.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(u=this.audioTrack.timelineStartInfo.pts,pt.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=function(e){var t,n=a(),r=l(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t}(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],s),s+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=fe(t.startPts,u,this.keepOriginalTimestamps),t.endTime=fe(t.endPts,u,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=fe(n.pts,u,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),i=0;i<o.captions.length;i++)t=o.captions[i],this.trigger("caption",t);for(i=0;i<o.metadata.length;i++)n=o.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ft.prototype.setRemux=function(e){this.remuxTracks=e},ct=function(e){var t,n,r=this,i=!0;ct.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Xe.MetadataStream,i.aacStream=new ht,i.audioTimestampRolloverStream=new Xe.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Xe.TimestampRolloverStream("timed-metadata"),i.adtsStream=new et,i.coalesceStream=new ft(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new dt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,i)},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Xe.MetadataStream,i.packetStream=new Xe.TransportPacketStream,i.parseStream=new Xe.TransportParseStream,i.elementaryStream=new Xe.ElementaryStream,i.timestampRolloverStream=new Xe.TimestampRolloverStream,i.adtsStream=new et,i.h264Stream=new gt,i.captionStream=new Xe.CaptionStream(e),i.coalesceStream=new ft(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var s;if("metadata"===a.type){for(s=a.tracks.length;s--;)t||"video"!==a.tracks[s].type?n||"audio"!==a.tracks[s].type||((n=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[s]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new lt(t,e),i.videoSegmentStream.on("log",r.getLogTrigger_("videoSegmentStream")),i.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,i.audioSegmentStream.setEarliestDts(t.dts-r.baseMediaDecodeTime))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new dt(n,e),i.audioSegmentStream.on("log",r.getLogTrigger_("audioSegmentStream")),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.audioSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"audioSegmentTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,i)},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,pe(n),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,pe(t),i.captionStream.reset()),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(i){var t=yt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},ct.prototype=new q;var Et,St,wt,Ct={Transmuxer:ct,VideoSegmentStream:lt,AudioSegmentStream:dt,AUDIO_PROPERTIES:pt,VIDEO_PROPERTIES:mt,generateSegmentTimingInfo:bt},At=function(e){return e>>>0},It=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},kt=At,Rt=function e(t,n){var r,i,a,s,o,u=[];if(!n.length)return null;for(r=0;r<t.byteLength;)i=kt(t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3]),a=It(t.subarray(r+4,r+8)),s=i>1?r+i:t.byteLength,a===n[0]&&(1===n.length?u.push(t.subarray(r+8,s)):(o=e(t.subarray(r+8,s),n.slice(1))).length&&(u=u.concat(o))),r=s;return u},Pt=At,Dt=G.getUint64,Ot=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Mt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Lt="undefined"!=typeof window?window:void 0!==Mt?Mt:"undefined"!=typeof self?self:{},Nt=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var s=0;for(a=0;a<t;s++,a++)s===i[0]&&(s++,i.shift()),n[a]=e[s];return n},xt=ke.CaptionStream,Ft=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},Ut=function(e,t){var n=Rt(e,["moof","traf"]),r=Rt(e,["mdat"]),i={},a=[];return r.forEach((function(e,t){var r=n[t];a.push({mdat:e,traf:r})})),a.forEach((function(e){var n,r,a=e.mdat,s=e.traf,o=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],s=8&r.flags[2],o=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],d=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),s&&(r.defaultSampleDuration=n.getUint32(t),t+=4),o&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),l&&(r.durationIsEmpty=!0),!i&&d&&(r.baseDataOffsetIsMoof=!0),r}(Rt(s,["tfhd"])[0]),u=o.trackId,l=Rt(s,["tfdt"]),d=l.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Dt(e.subarray(4)):t.baseMediaDecodeTime=Pt(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(l[0]).baseMediaDecodeTime:0,c=Rt(s,["trun"]);t===u&&c.length>0&&(n=function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,o=[];return e.forEach((function(e){var t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],s=1&n.flags[1],o=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],d=r.getUint32(4),c=8;for(i&&(n.dataOffset=r.getInt32(c),c+=4),a&&d&&(t={flags:Ot(e.subarray(c,c+4))},c+=4,s&&(t.duration=r.getUint32(c),c+=4),o&&(t.size=r.getUint32(c),c+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(c):t.compositionTimeOffset=r.getUint32(c),c+=4),n.samples.push(t),d--);d--;)t={},s&&(t.duration=r.getUint32(c),c+=4),o&&(t.size=r.getUint32(c),c+=4),u&&(t.flags=Ot(e.subarray(c,c+4)),c+=4),l&&(1===n.version?t.compositionTimeOffset=r.getInt32(c):t.compositionTimeOffset=r.getUint32(c),c+=4),n.samples.push(t);return n}(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof r?(e.pts=r+Lt.BigInt(e.compositionTimeOffset),r+=Lt.BigInt(e.duration)):(e.pts=r+e.compositionTimeOffset,r+=e.duration)})),o=o.concat(t)})),o}(c,d,o),r=function(e,t,n){var r,i,a,s,o=new DataView(e.buffer,e.byteOffset,e.byteLength),u={logs:[],seiNals:[]};for(i=0;i+4<e.length;i+=a)if(a=o.getUint32(i),i+=4,!(a<=0))switch(31&e[i]){case 6:var l=e.subarray(i+1,i+1+a),d=Ft(i,t);if(r={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:Nt(l),trackId:n},d)r.pts=d.pts,r.dts=d.dts,s=d;else{if(!s){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+i+" for trackId "+n+". See mux.js#223."});break}r.pts=s.pts,r.dts=s.dts}u.seiNals.push(r)}return u}(a,n,u),i[u]||(i[u]={seiNals:[],logs:[]}),i[u].seiNals=i[u].seiNals.concat(r.seiNals),i[u].logs=i[u].logs.concat(r.logs))})),i},jt=function(){var e,t,n,r,i,a,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new xt,s=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,i.captions.push(e),i.captionStreams[e.stream]=!0})),e.on("log",(function(e){i.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&r===t[n])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=a[0],r=s[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var u=t.shift();this.parse(u,a,s)}return o=function(e,t,n){if(null===t)return null;var r=Ut(e,t)[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}}(e,n,r),o&&o.logs&&(i.logs=i.logs.concat(o.logs)),null!==o&&o.seiNals?(this.pushNals(o.seiNals),this.flushStream(),i):i.logs.length?{logs:i.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){i.captions=[],i.captionStreams={},i.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,i?this.clearParsedCaptions():i={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Bt=At,Vt=function(e){return("00"+e.toString(16)).slice(-2)},qt=G.getUint64;Et=function(e,t){var n=Rt(t,["moof","traf"]).reduce((function(t,n){var r,i,a=Rt(n,["tfhd"])[0],s=Bt(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),o=e[s]||9e4,u=Rt(n,["tfdt"])[0],l=new DataView(u.buffer,u.byteOffset,u.byteLength);return"bigint"==typeof(r=1===u[0]?qt(u.subarray(4,12)):l.getUint32(4))?i=r/Lt.BigInt(o):"number"!=typeof r||isNaN(r)||(i=r/o),i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i<t&&(t=i),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},wt=function(e){var t=0===e[0]?12:20;return Bt(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},St=function(e){var t=Rt(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,r,i={},a=Rt(e,["tkhd"])[0];a&&(r=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),i.id=0===r?t.getUint32(12):t.getUint32(20));var s=Rt(e,["mdia","hdlr"])[0];if(s){var o=It(s.subarray(8,12));i.type="vide"===o?"video":"soun"===o?"audio":o}var u=Rt(e,["mdia","minf","stbl","stsd"])[0];if(u){var l=u.subarray(8);i.codec=It(l.subarray(4,8));var d,c=Rt(l,[i.codec])[0];c&&(/^[asm]vc[1-9]$/i.test(i.codec)?(d=c.subarray(78),"avcC"===It(d.subarray(4,8))&&d.length>11?(i.codec+=".",i.codec+=Vt(d[9]),i.codec+=Vt(d[10]),i.codec+=Vt(d[11])):i.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(i.codec)?(d=c.subarray(28),"esds"===It(d.subarray(4,8))&&d.length>20&&0!==d[19]?(i.codec+="."+Vt(d[19]),i.codec+="."+Vt(d[20]>>>2&63).replace(/^0/,"")):i.codec="mp4a.40.2"):i.codec=i.codec.toLowerCase())}var f=Rt(e,["mdia","mdhd"])[0];f&&(i.timescale=wt(f)),n.push(i)})),n};var Ht=Et,Gt=St,zt=function(e){var t=31&e[1];return(t<<=8)|e[2]},Wt=function(e){return!!(64&e[1])},Kt=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Yt=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Xt={parseType:function(e,t){var n=zt(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Wt(e),n=4+Kt(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Wt(e),r=4+Kt(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var a=12+((15&e[r+10])<<8|e[r+11]);a<i;){var s=r+a;t[(31&e[s+1])<<8|e[s+2]]=e[s],a+=5+((15&e[s+3])<<8|e[s+4])}return t}},parsePayloadUnitStartIndicator:Wt,parsePesType:function(e,t){switch(t[zt(e)]){case Re.H264_STREAM_TYPE:return"video";case Re.ADTS_STREAM_TYPE:return"audio";case Re.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Wt(e))return null;var t=4+Kt(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+Kt(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===Yt(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Yt(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Yt(31&n[i+3])&&(a=!0),a}},Qt=Ne,Zt={};Zt.ts=Xt,Zt.aac=ut;var Jt=oe,$t=188,en=71,tn=function(e,t,n){for(var r,i,a,s,o=0,u=$t,l=!1;u<=e.byteLength;)if(e[o]!==en||e[u]!==en&&u!==e.byteLength)o++,u++;else{if(r=e.subarray(o,u),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(s=Zt.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),l=!0)),l)break;o+=$t,u+=$t}for(o=(u=e.byteLength)-$t,l=!1;o>=0;)if(e[o]!==en||e[u]!==en&&u!==e.byteLength)o--,u--;else{if(r=e.subarray(o,u),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&a&&(s=Zt.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),l=!0)),l)break;o-=$t,u-=$t}},nn=function(e,t,n){for(var r,i,a,s,o,u,l,d=0,c=$t,f=!1,h={data:[],size:0};c<e.byteLength;)if(e[d]!==en||e[c]!==en)d++,c++;else{if(r=e.subarray(d,c),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(a&&!f&&(s=Zt.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),f=!0),!n.firstKeyFrame))){if(a&&0!==h.size){for(o=new Uint8Array(h.size),u=0;h.data.length;)l=h.data.shift(),o.set(l,u),u+=l.byteLength;if(Zt.ts.videoPacketContainsKeyFrame(o)){var p=Zt.ts.parsePesTime(o);p?(n.firstKeyFrame=p,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(r),h.size+=r.byteLength}if(f&&n.firstKeyFrame)break;d+=$t,c+=$t}for(d=(c=e.byteLength)-$t,f=!1;d>=0;)if(e[d]!==en||e[c]!==en)d--,c--;else{if(r=e.subarray(d,c),"pes"===Zt.ts.parseType(r,t.pid)&&(i=Zt.ts.parsePesType(r,t.table),a=Zt.ts.parsePayloadUnitStartIndicator(r),"video"===i&&a&&(s=Zt.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),f=!0)),f)break;d-=$t,c-=$t}},rn=function(e,t){var n;return n=Zt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,a=null,s=0,o=0;e.length-o>=3;){switch(Zt.aac.parseType(e,o)){case"timed-metadata":if(e.length-o<10){n=!0;break}if((s=Zt.aac.parseId3TagSize(e,o))>e.length){n=!0;break}null===a&&(t=e.subarray(o,o+s),a=Zt.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Zt.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===i&&(t=e.subarray(o,o+s),i=Zt.aac.parseSampleRate(t)),r++,o+=s;break;default:o++}if(n)return null}if(null===i||null===a)return null;var u=Jt/i;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*r*u,pts:a+1024*r*u}]}}(e):function(e){var t={pid:null,table:null},n={};for(var r in function(e,t){for(var n,r=0,i=$t;i<e.byteLength;)if(e[r]!==en||e[i]!==en)r++,i++;else{switch(n=e.subarray(r,i),Zt.ts.parseType(n,t.pid)){case"pat":t.pid=Zt.ts.parsePat(n);break;case"pmt":var a=Zt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}r+=$t,i+=$t}}(e,t),t.table)if(t.table.hasOwnProperty(r))switch(t.table[r]){case Re.H264_STREAM_TYPE:n.video=[],nn(e,t,n),0===n.video.length&&delete n.video;break;case Re.ADTS_STREAM_TYPE:n.audio=[],tn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Qt(e.dts,n),e.pts=Qt(e.pts,n),e.dtsTime=e.dts/Jt,e.ptsTime=e.pts/Jt}))}if(e.video&&e.video.length){var r=t;if((void 0===r||isNaN(r))&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=Qt(e.dts,r),e.pts=Qt(e.pts,r),e.dtsTime=e.dts/Jt,e.ptsTime=e.pts/Jt})),e.firstKeyFrame){var i=e.firstKeyFrame;i.dts=Qt(i.dts,r),i.pts=Qt(i.pts,r),i.dtsTime=i.dts/Jt,i.ptsTime=i.pts/Jt}}}(n,t),n):null},an=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ct.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new jt,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,r=Ht(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:r,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=Gt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,r="number"!=typeof n||isNaN(n)?void 0:n*oe,i=rn(t,r),a=null;i&&((a={hasVideo:i.video&&2===i.video.length||!1,hasAudio:i.audio&&2===i.audio.length||!1}).hasVideo&&(a.videoStart=i.video[0].ptsTime),a.hasAudio&&(a.audioStart=i.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ue(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(ue(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new an(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new an(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),cs=os(ds),fs=function(e){var t=e.transmuxer,n=e.bytes,r=e.audioAppendStart,i=e.gopsToAlignWith,a=e.remux,s=e.onData,o=e.onTrackInfo,u=e.onAudioTimingInfo,l=e.onVideoTimingInfo,d=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,f=e.onId3,h=e.onCaptions,p=e.onDone,m=e.onEndedTimeline,g=e.onTransmuxerLog,y=e.isEndOfTimeline,v={buffer:[]},_=y;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var r=e.data.segment,i=r.type,a=r.initSegment,s=r.captions,o=r.captionStreams,u=r.metadata,l=r.videoFrameDtsTime,d=r.videoFramePtsTime;t.buffer.push({captions:s,captionStreams:o,metadata:u});var c=e.data.segment.boxes||{data:e.data.segment.data},f={type:i,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==l&&(f.videoFrameDtsTime=l),void 0!==d&&(f.videoFramePtsTime=d),n(f)}(n,v,s),"trackinfo"===n.data.action&&o(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,v),"audioTimingInfo"===n.data.action&&u(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&d(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&c(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&f([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&h(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:v,callback:p}),hs(t))))},r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(i)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:i}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var T=n instanceof ArrayBuffer?n:n.buffer,b=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:T,byteOffset:b,byteLength:n.byteLength},[T])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},hs=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():fs(e.currentTransmux))},ps=function(e,t){e.postMessage({action:t}),hs(e)},ms=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void ps(t,e);t.transmuxQueue.push(ps.bind(null,t,e))}("reset",e)},gs=function(e){var t=e.transmuxer,n=e.endAction||e.action,r=e.callback,i=(0,u.Z)({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function i(a){a.data.action===n&&(t.removeEventListener("message",i),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),r(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;i.byteOffset=a?0:e.data.byteOffset,i.byteLength=e.data.byteLength;var s=[a?e.data:e.data.buffer];t.postMessage(i,s)}else t.postMessage(i)},ys=-101,vs=-102,_s=function(e){e.forEach((function(e){e.abort()}))},Ts=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:ys,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:vs,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},bs=function(e,t,n){return function(r,i){var a=i.response,s=Ts(r,i);if(s)return n(s,e);if(16!==a.byteLength)return n({status:i.status,message:"Invalid HLS key at URL: "+i.uri,code:2,xhr:i},e);for(var o=new DataView(a),u=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),l=0;l<t.length;l++)t[l].bytes=u;return n(null,e)}},Es=function(e,t){var n=(0,P.Xm)(e.map.bytes);if("mp4"!==n){var r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+r,code:2})}gs({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var r=n.tracks,i=n.data;return e.map.bytes=i,r.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},Ss=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog,p=t.map&&t.map.tracks||{},m=Boolean(p.audio&&p.video),g=i.bind(null,t,"audio","start"),y=i.bind(null,t,"audio","end"),v=i.bind(null,t,"video","start"),_=i.bind(null,t,"video","end");gs({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var i=e.result;i&&(r(t,{hasAudio:i.hasAudio,hasVideo:i.hasVideo,isMuxed:m}),r=null,i.hasAudio&&!m&&g(i.audioStart),i.hasVideo&&v(i.videoStart),g=null,v=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void fs(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:m,onData:function(e){e.type="combined"===e.type?"video":e.type,c(t,e)},onTrackInfo:function(e){r&&(m&&(e.isMuxed=!0),r(t,e))},onAudioTimingInfo:function(e){g&&void 0!==e.start&&(g(e.start),g=null),y&&void 0!==e.end&&y(e.end)},onVideoTimingInfo:function(e){v&&void 0!==e.start&&(v(e.start),v=null),_&&void 0!==e.end&&_(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,n){o(t,e,n)},onCaptions:function(e){u(t,[e])},isEndOfTimeline:l,onEndedTimeline:function(){d()},onTransmuxerLog:h,onDone:function(e){f&&(e.type="combined"===e.type?"video":e.type,f(null,t,e))}})}})},ws=function(e){var t=e.segment,n=e.bytes,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog,p=new Uint8Array(n);if((0,P.cz)(p)){t.isFmp4=!0;var m=t.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),r(t,g);var y=function(e){c(t,{data:p,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),e&&e.length&&u(t,e),f(null,t,{})};gs({action:"probeMp4StartTime",timescales:t.map.timescales,data:p,transmuxer:t.transmuxer,callback:function(e){var r=e.data,a=e.startTime;n=r.buffer,t.bytes=p=r,g.hasAudio&&!g.isMuxed&&i(t,"audio","start",a),g.hasVideo&&i(t,"video","start",a),m.video&&r.byteLength&&t.transmuxer?gs({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:p,timescales:t.map.timescales,trackIds:[m.video.id],callback:function(e){n=e.data.buffer,t.bytes=p=e.data,e.logs.forEach((function(e){h(Gi.mergeOptions(e,{stream:"mp4CaptionParser"}))})),y(e.captions)}}):y()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=(0,P.Xm)(p)),"ts"!==t.container&&"aac"!==t.container)return r(t,{hasAudio:!1,hasVideo:!1}),void f(null,t,{});Ss({segment:t,bytes:n,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h})}else f(null,t,{})},Cs=function(e,t){var n,r=e.id,i=e.key,a=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener("message",(function e(n){if(n.data.source===r){s.removeEventListener("message",e);var i=n.data.decrypted;t(new Uint8Array(i.bytes,i.byteOffset,i.byteLength))}})),n=i.bytes.slice?i.bytes.slice():new Uint32Array(Array.prototype.slice.call(i.bytes)),s.postMessage(Wa({source:r,encrypted:a,key:n,iv:i.iv}),[a.buffer,n.buffer])},As=function(e){var t=e.xhr,n=e.xhrOptions,r=e.decryptionWorker,i=e.segment,a=e.abortFn,s=e.progressFn,o=e.trackInfoFn,u=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,d=e.audioSegmentTimingInfoFn,c=e.id3Fn,f=e.captionsFn,h=e.isEndOfTimeline,p=e.endedTimelineFn,m=e.dataFn,g=e.doneFn,y=e.onTransmuxerLog,v=[],_=function(e){var t=e.activeXhrs,n=e.decryptionWorker,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog,p=0,m=!1;return function(e,g){if(!m){if(e)return m=!0,_s(t),f(e,g);if((p+=1)===t.length){var y=function(){if(g.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,r=e.trackInfoFn,i=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,u=e.captionsFn,l=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,f=e.doneFn,h=e.onTransmuxerLog;Cs({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,ws({segment:n,bytes:n.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h})}))}({decryptionWorker:n,segment:g,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h});ws({segment:g,bytes:g.bytes,trackInfoFn:r,timingInfoFn:i,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:s,id3Fn:o,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:d,dataFn:c,doneFn:f,onTransmuxerLog:h})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Cs({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(e){g.map.bytes=e,Es(g,(function(e){if(e)return _s(t),f(e,g);y()}))}));y()}}}}({activeXhrs:v,decryptionWorker:r,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:c,captionsFn:f,isEndOfTimeline:h,endedTimelineFn:p,dataFn:m,doneFn:g,onTransmuxerLog:y});if(i.key&&!i.key.bytes){var T=[i.key];i.map&&!i.map.bytes&&i.map.key&&i.map.key.resolvedUri===i.key.resolvedUri&&T.push(i.map.key);var b=t(Gi.mergeOptions(n,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),bs(i,T,_));v.push(b)}if(i.map&&!i.map.bytes){if(i.map.key&&(!i.key||i.key.resolvedUri!==i.map.key.resolvedUri)){var E=t(Gi.mergeOptions(n,{uri:i.map.key.resolvedUri,responseType:"arraybuffer"}),bs(i,[i.map.key],_));v.push(E)}var S=Gi.mergeOptions(n,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:qa(i.map)}),w=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,r){var i=Ts(e,r);if(i)return n(i,t);var a=new Uint8Array(r.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,Es(t,(function(e){if(e)return e.xhr=r,e.status=r.status,n(e,t);n(null,t)}))}}({segment:i,finishProcessingFn:_}),C=t(S,w);v.push(C)}var A=Gi.mergeOptions(n,{uri:i.part&&i.part.resolvedUri||i.resolvedUri,responseType:"arraybuffer",headers:qa(i)}),I=t(A,function(e){var t=e.segment,n=e.finishProcessingFn,r=e.responseType;return function(e,i){var a=Ts(e,i);if(a)return n(a,t);var s="arraybuffer"!==r&&i.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(i.responseText.substring(t.lastReachedChar||0)):i.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),t.key?t.encryptedBytes=new Uint8Array(s):t.bytes=new Uint8Array(s),n(null,t)}}({segment:i,finishProcessingFn:_,responseType:A.responseType}));I.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=Gi.mergeOptions(t.stats,(i=(r=e).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=r.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t);var r,i,a}}({segment:i,progressFn:s,trackInfoFn:o,timingInfoFn:u,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:c,captionsFn:f,isEndOfTimeline:h,endedTimelineFn:p,dataFn:m})),v.push(I);var k={};return v.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:k,abortFn:a}))})),function(){return _s(v)}},Is=Xi("CodecUtils"),ks=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Rs=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,r=e.type,i=e.details;t[n]=t[n]||[],t[n].push((0,S.ws)(""+r+i))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return Is("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},Ps=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},Ds=function(e,t){var n=t.attributes||{},r=Rs(function(e){var t=e.attributes||{};if(t.CODECS)return(0,S.kS)(t.CODECS)}(t)||[]);if(ks(e,t)&&!r.audio&&!function(e,t){if(!ks(e,t))return!0;var n=t.attributes||{},r=e.mediaGroups.AUDIO[n.AUDIO];for(var i in r)if(!r[i].uri&&!r[i].playlists)return!0;return!1}(e,t)){var i=Rs((0,S.Jg)(e,n.AUDIO)||[]);i.audio&&(r.audio=i.audio)}return r},Os=Xi("PlaylistSelector"),Ms=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Ls=function(e,t){if(!e)return"";var n=a().getComputedStyle(e);return n?n[t]:""},Ns=function(e,t){var n=e.slice();e.sort((function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},xs=function(e,t){var n,r;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||a().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r||a().Number.MAX_VALUE)},Fs=function(e,t,n,r,i,s){if(e){var o={bandwidth:t,width:n,height:r,limitRenditionByPlayerDimensions:i},u=e.playlists;Sa.isAudioOnly(e)&&(u=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var l=u.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||a().Number.MAX_VALUE,width:t,height:n,playlist:e}}));Ns(l,(function(e,t){return e.bandwidth-t.bandwidth}));var d=(l=l.filter((function(e){return!Sa.isIncompatible(e.playlist)}))).filter((function(e){return Sa.isEnabled(e.playlist)}));d.length||(d=l.filter((function(e){return!Sa.isDisabled(e.playlist)})));var c=d.filter((function(e){return e.bandwidth*as.BANDWIDTH_VARIANCE<t})),f=c[c.length-1],h=c.filter((function(e){return e.bandwidth===f.bandwidth}))[0];if(!1===i){var p=h||d[0]||l[0];if(p&&p.playlist){var m="sortedPlaylistReps";return h&&(m="bandwidthBestRep"),d[0]&&(m="enabledPlaylistReps"),Os("choosing "+Ms(p)+" using "+m+" with options",o),p.playlist}return Os("could not choose a playlist with options",o),null}var g=c.filter((function(e){return e.width&&e.height}));Ns(g,(function(e,t){return e.width-t.width}));var y=g.filter((function(e){return e.width===n&&e.height===r}));f=y[y.length-1];var v,_,T,b,E=y.filter((function(e){return e.bandwidth===f.bandwidth}))[0];if(E||(_=(v=g.filter((function(e){return e.width>n||e.height>r}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),f=_[_.length-1],T=_.filter((function(e){return e.bandwidth===f.bandwidth}))[0]),s.experimentalLeastPixelDiffSelector){var S=g.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-r),e}));Ns(S,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),b=S[0]}var w=b||T||E||h||d[0]||l[0];if(w&&w.playlist){var C="sortedPlaylistReps";return b?C="leastPixelDiffRep":T?C="resolutionPlusOneRep":E?C="resolutionBestRep":h?C="bandwidthBestRep":d[0]&&(C="enabledPlaylistReps"),Os("choosing "+Ms(w)+" using "+C+" with options",o),w.playlist}return Os("could not choose a playlist with options",o),null}},Us=function(){var e=this.useDevicePixelRatio&&a().devicePixelRatio||1;return Fs(this.playlists.master,this.systemBandwidth,parseInt(Ls(this.tech_.el(),"width"),10)*e,parseInt(Ls(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},js=function(e,t,n){var r,i;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime>=e&&i.endTime<=t&&n.removeCue(i)},Bs=function(e){return"number"==typeof e&&isFinite(e)},Vs=1/60,qs=function(e){var t=e.startOfSegment,n=e.duration,r=e.segment,i=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,u=a.segments,l=void 0===u?[]:u,d=e.mediaIndex,c=e.partIndex,f=e.timeline,h=l.length-1,p="mediaIndex/partIndex increment";e.getMediaInfoForTime?p="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(p="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(p+=" with independent "+e.independent);var m="number"==typeof c,g=e.segment.uri?"segment":"pre-segment",y=m?la({preloadSegment:r})-1:0;return g+" ["+(s+d)+"/"+(s+h)+"]"+(m?" part ["+c+"/"+y+"]":"")+" segment start/end ["+r.start+" => "+r.end+"]"+(m?" part start/end ["+i.start+" => "+i.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+f+"] selected by ["+p+"] playlist ["+o+"]"},Hs=function(e){return e+"TimingInfo"},Gs=function(e){var t=e.timelineChangeController,n=e.currentTimeline,r=e.segmentTimeline,i=e.loaderType,a=e.audioDisabled;if(n===r)return!1;if("audio"===i){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==r}if("main"===i&&a){var o=t.pendingTimelineChange({type:"audio"});return!o||o.to!==r}return!1},zs=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+Qi},Ws=function(e){function t(t,n){var r;if(r=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return r.bandwidth=t.bandwidth,r.throughput={rate:0,count:0},r.roundTrip=NaN,r.resetStats_(),r.mediaIndex=null,r.partIndex=null,r.hasPlayed_=t.hasPlayed,r.currentTime_=t.currentTime,r.seekable_=t.seekable,r.seeking_=t.seeking,r.duration_=t.duration,r.mediaSource_=t.mediaSource,r.vhs_=t.vhs,r.loaderType_=t.loaderType,r.currentMediaInfo_=void 0,r.startingMediaInfo_=void 0,r.segmentMetadataTrack_=t.segmentMetadataTrack,r.goalBufferLength_=t.goalBufferLength,r.sourceType_=t.sourceType,r.sourceUpdater_=t.sourceUpdater,r.inbandTextTracks_=t.inbandTextTracks,r.state_="INIT",r.timelineChangeController_=t.timelineChangeController,r.shouldSaveSegmentTimingInfo_=!0,r.parse708captions_=t.parse708captions,r.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,r.captionServices_=t.captionServices,r.experimentalExactManifestTimings=t.experimentalExactManifestTimings,r.checkBufferTimeout_=null,r.error_=void 0,r.currentTimeline_=-1,r.pendingSegment_=null,r.xhrOptions_=null,r.pendingSegments_=[],r.audioDisabled_=!1,r.isPendingTimestampOffset_=!1,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=Gi.browser.IE_VERSION>=11,r.appendInitSegment_={audio:!0,video:!0},r.playlistOfLastInitSegment_={audio:null,video:null},r.callQueue_=[],r.loadQueue_=[],r.metadataQueue_={id3:[],caption:[]},r.waitingOnRemove_=!1,r.quotaExceededErrorRetryTimeout_=null,r.activeInitSegmentId_=null,r.initSegments_={},r.cacheEncryptionKeys_=t.cacheEncryptionKeys,r.keyCache_={},r.decrypter_=t.decrypter,r.syncController_=t.syncController,r.syncPoint_={segmentIndex:0,time:0},r.transmuxer_=r.createTransmuxer_(),r.triggerSyncInfoUpdate_=function(){return r.trigger("syncinfoupdate")},r.syncController_.on("syncinfoupdate",r.triggerSyncInfoUpdate_),r.mediaSource_.addEventListener("sourceopen",(function(){r.isEndOfStream_()||(r.ended_=!1)})),r.fetchAtBuffer_=!1,r.logger_=Xi("SegmentLoader["+r.loaderType_+"]"),Object.defineProperty((0,c.Z)(r),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),r.sourceUpdater_.on("ready",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"main"===r.loaderType_&&r.timelineChangeController_.on("pendingtimelinechange",(function(){r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),"audio"===r.loaderType_&&r.timelineChangeController_.on("timelinechange",(function(){r.hasEnoughInfoToLoad_()&&r.processLoadQueue_(),r.hasEnoughInfoToAppend_()&&r.processCallQueue_()})),r}(0,f.Z)(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new cs;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&a().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,a().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&ms(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return Gi.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,r=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!r)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Ka(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),r||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Ya(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){var o=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=o}}r&&(r.mediaIndex-=a,r.mediaIndex<0?(r.mediaIndex=null,r.partIndex=null):(r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex]),r.partIndex>=0&&r.segment.parts&&(r.part=r.segment.parts[r.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(a().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&ms(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,r){if(void 0===n&&(n=function(){}),void 0===r&&(r=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var i=1,a=function(){0==--i&&n()};for(var s in!r&&this.audioDisabled_||(i++,this.sourceUpdater_.removeAudio(e,t,a)),(r||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,r){for(var i=Math.ceil((t-r)*D.ONE_SECOND_IN_TS),a=Math.ceil((n-r)*D.ONE_SECOND_IN_TS),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var u=o+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),s.splice(u,o-u+1),s}(this.gopBuffer_,e,t,this.timeMapping_),i++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)js(e,t,this.inbandTextTracks_[s]);js(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&a().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=a().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&a().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=a().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var r="number"==typeof e&&t.segments[e],i=e+1===t.segments.length,a=!r||!r.parts||n+1===r.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&i&&a},n.chooseNextRequest_=function(){var e=this.buffered_(),t=ra(e)||0,n=ia(e,this.currentTime_()),r=!this.hasPlayed_()&&n>=1,i=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||r||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var s={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(s.isSyncRequest)s.mediaIndex=function(e,t,n){t=t||[];for(var r=[],i=0,a=0;a<t.length;a++){var s=t[a];if(e===s.timeline&&(r.push(a),(i+=s.duration)>n))return a}return 0===r.length?0:r[r.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var o=a[this.mediaIndex],u="number"==typeof this.partIndex?this.partIndex:-1;s.startOfSegment=o.end?o.end:t,o.parts&&o.parts[u+1]?(s.mediaIndex=this.mediaIndex,s.partIndex=u+1):s.mediaIndex=this.mediaIndex+1}else{var l=Sa.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),d=l.segmentIndex,c=l.startTime,f=l.partIndex;s.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),s.mediaIndex=d,s.startOfSegment=c,s.partIndex=f}var h=a[s.mediaIndex],p=h&&"number"==typeof s.partIndex&&h.parts&&h.parts[s.partIndex];if(!h||"number"==typeof s.partIndex&&!p)return null;if("number"!=typeof s.partIndex&&h.parts&&(s.partIndex=0,p=h.parts[0]),!n&&p&&!p.independent)if(0===s.partIndex){var m=a[s.mediaIndex-1],g=m.parts&&m.parts.length&&m.parts[m.parts.length-1];g&&g.independent&&(s.mediaIndex-=1,s.partIndex=m.parts.length-1,s.independent="previous segment")}else h.parts[s.partIndex-1].independent&&(s.partIndex-=1,s.independent="previous part");var y=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return s.mediaIndex>=a.length-1&&y&&!this.seeking_()?null:this.generateSegmentInfo_(s)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,r=e.mediaIndex,i=e.startOfSegment,a=e.isSyncRequest,s=e.partIndex,o=e.forceTimestampOffset,u=e.getMediaInfoForTime,l=n.segments[r],d="number"==typeof s&&l.parts[s],c={requestId:"segment-loader-"+Math.random(),uri:d&&d.resolvedUri||l.resolvedUri,mediaIndex:r,partIndex:d?s:null,isSyncRequest:a,startOfSegment:i,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:d&&d.duration||l.duration,segment:l,part:d,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:u,independent:t},f=void 0!==o?o:this.isPendingTimestampOffset_;c.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:f});var h=ra(this.sourceUpdater_.audioBuffered());return"number"==typeof h&&(c.audioAppendStart=h-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(c.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var r,i=Math.ceil((t-n+3)*D.ONE_SECOND_IN_TS);for(r=0;r<e.length&&!(e[r].pts>i);r++);return e.slice(r)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),c},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,r=t.currentTimeline,i=t.startOfSegment,a=t.buffered,t.overrideCheck||n!==r?n<r?i:a.length?a.end(a.length-1):i:null;var t,n,r,i,a},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=Sa.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(i<=a)){var s=function(e){var t=e.currentTime,n=e.bandwidth,r=e.duration,i=e.segmentDuration,a=e.timeUntilRebuffer,s=e.currentTimeline,o=e.syncController,u=e.master.playlists.filter((function(e){return!Sa.isIncompatible(e)})),l=u.filter(Sa.isEnabled);l.length||(l=u.filter((function(e){return!Sa.isDisabled(e)})));var d=l.filter(Sa.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var u=o.getSyncPoint(e,r,s,t)?1:2;return{playlist:e,rebufferingImpact:Sa.estimateSegmentRequestTime(i,n,e)*u-a}})),c=d.filter((function(e){return e.rebufferingImpact<=0}));return Ns(c,(function(e,t){return xs(t.playlist,e.playlist)})),c.length?c[0]:(Ns(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(s){var o=i-a-s.rebufferingImpact,u=.5;a<=Qi&&(u=1),!s.playlist||s.playlist.uri===this.playlist_.uri||o<u||(this.bandwidth=s.playlist.attributes.BANDWIDTH*as.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+qs(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++){var a=n[i];if(a!==r[i])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,r){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var i=this.pendingSegment_,a=Hs(t);i[a]=i[a]||{},i[a][n]=r,this.logger_("timinginfo: "+t+" - "+n+" - "+r),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),i={};t.forEach((function(e){i[e.stream]=i[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=i[e.stream];t.startTime=Math.min(t.startTime,e.startTime+r),t.endTime=Math.max(t.endTime,e.endTime+r),t.captions.push(e)})),Object.keys(i).forEach((function(e){var t=i[e],s=t.startTime,o=t.endTime,u=t.captions,l=n.inbandTextTracks_;n.logger_("adding cues from "+s+" -> "+o+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);var i=t.textTracks().getTrackById(r);if(i)e[n]=i;else{var a=n,s=n,o=!1,u=(t.options_.vhs&&t.options_.vhs.captionServices||{})[r];u&&(a=u.label,s=u.language,o=u.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:o,label:a,language:s},!1).track}}}(l,n.vhs_.tech_,e),js(s,o,l[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var i=a().WebKitDataCue||a().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new i(e.startTime+r,e.endTime+r,e.text))}))}}({captionArray:u,inbandTextTracks:l,timestampOffset:r})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var r=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,r=e.timestampOffset,i=e.videoDuration;if(n){var s=a().WebKitDataCue||a().VTTCue,o=t.metadataTrack_;if(o&&(n.forEach((function(e){var t=e.cueTime+r;!("number"!=typeof t||a().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new s(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Gi.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Gi.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Gi.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),o.addCue(n)}))})),o.cues&&o.cues.length)){for(var u=o.cues,l=[],d=0;d<u.length;d++)u[d]&&l.push(u[d]);var c=l.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),f=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));f.forEach((function(e,t){var n=c[e],r=Number(f[t+1])||i;n.forEach((function(e){e.endTime=r}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:r,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&Gs({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed;return!(r&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!i&&!e.audioTimingInfo||Gs({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Hs(t.type)].start;else{var r,i=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&i&&i.hasVideo;a&&(r=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:r,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var s=this.chooseNextRequest_();if(s.mediaIndex!==n.mediaIndex||s.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,r=e.map,i=e.playlist;if(r){var a=Ka(r);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=i,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,r=e.segmentInfo,i=e.type,s=e.bytes,o=this.sourceUpdater_.audioBuffered(),u=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+na(o).join(", ")),u.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+na(u).join(", "));var l=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0,c=u.length?u.start(0):0,f=u.length?u.end(u.length-1):0;if(d-l<=1&&f-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+s.byteLength+", audio buffer: "+na(o).join(", ")+", video buffer: "+na(u).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:r,type:i,bytes:s}));var h=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+h),this.remove(0,h,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=a().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,r=e.type,i=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(r+" append of "+i.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:r,bytes:i}))},n.appendToSourceBuffer_=function(e){var t,n,r,i=e.segmentInfo,a=e.type,s=e.initSegment,o=e.data,u=e.bytes;if(!u){var l=[o],d=o.byteLength;s&&(l.unshift(s),d+=s.byteLength),r=0,(t={bytes:d,segments:l}).bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach((function(e){n.set(e,r),r+=e.byteLength}))),u=n}this.sourceUpdater_.appendBuffer({segmentInfo:i,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:i,type:a,bytes:u}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var r=this.pendingSegment_.segment,i=e+"TimingInfo";r[i]||(r[i]={}),r[i].transmuxerPrependedSeconds=n.prependedContentDuration||0,r[i].transmuxedPresentationStart=n.start.presentation,r[i].transmuxedDecodeStart=n.start.decode,r[i].transmuxedPresentationEnd=n.end.presentation,r[i].transmuxedDecodeEnd=n.end.decode,r[i].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,r=t.data;if(r&&r.byteLength&&("audio"!==n||!this.audioDisabled_)){var i=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:i,data:r})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=(0,u.Z)({},e,{forceTimestampOffset:!0});(0,u.Z)(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),r=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),i=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,s=r||i&&a;this.logger_("Requesting "+qs(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=As({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:s,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var r=n.message,i=n.level,a=n.stream;t.logger_(qs(e)+" logged from transmuxer stream "+a+" as a "+i+": "+r)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var r=t-as.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var i=t-n;return Math.min(i,r)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,r={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},i=e.playlist.segments[e.mediaIndex-1];if(i&&i.timeline===t.timeline&&(i.videoTimingInfo?r.baseStartTime=i.videoTimingInfo.transmuxedDecodeEnd:i.audioTimingInfo&&(r.baseStartTime=i.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);r.key=this.segmentKey(t.key),r.key.iv=a}return t.map&&(r.map=this.initSegmentForMap(t.map)),r},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<Vs?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record 0.016666666666666666"):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===vs)return;return this.pause(),e.code===ys?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),r.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(r)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,r=e.mediaIndex,i=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,u=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return u.start;var l=n.segments[r-1];return 0!==r&&l&&void 0!==l.start&&l.end===i+a?o.start:i},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,r=t.hasVideo,i=t.isMuxed,a="main"===this.loaderType_&&r,s=!this.audioDisabled_&&n&&!i;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,r=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:r.start:r.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,r,i=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},r=0,["video","audio"].forEach((function(e){var t=n[e+"TimingInfo"];if(t){var i,s=t.start,o=t.end;"bigint"==typeof s||"bigint"==typeof o?i=a().BigInt(o)-a().BigInt(s):"number"==typeof s&&"number"==typeof o&&(i=o-s),void 0!==i&&i>r&&(r=i)}})),"bigint"==typeof r&&r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r);if(!i)return null;var s=e.playlist.targetDuration,o=zs({segmentDuration:i,maxDuration:2*s}),u=zs({segmentDuration:i,maxDuration:s}),l="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+i+" when the reported duration is "+e.duration+" and the target duration is "+s+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return o||u?{severity:o?"warn":"info",message:l}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?Gi.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+qs(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,r=e.part,i=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,s=r&&r.end&&this.currentTime_()-r.end>3*e.playlist.partTargetDuration;if(i||s)return this.logger_("bad "+(i?"segment":"part")+" "+qs(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+qs(e))},n.recordThroughput_=function(e){if(e.duration<Vs)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record 0.016666666666666666");else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(Bs(n)&&Bs(r)){js(n,r,this.segmentMetadataTrack_);var i=a().WebKitDataCue||a().VTTCue,s={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:r},o=new i(n,r,JSON.stringify(s));o.value=s,this.segmentMetadataTrack_.addCue(o)}}},t}(Gi.EventTarget);function Ks(){}var Ys,Xs=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},Qs=["video","audio"],Zs=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},Js=function e(t,n){if(0!==n.queue.length){var r=0,i=n.queue[r];if("mediaSource"!==i.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!Zs(t,n)){if(i.type!==t){if(r=function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("mediaSource"===r.type)return null;if(r.type===e)return n}return null}(t,n.queue),null===r)return;i=n.queue[r]}return n.queue.splice(r,1),n.queuePending[t]=i,i.action(t,n),i.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),i.action(n),i.doneFn&&i.doneFn(),e("audio",n),e("video",n))}},$s=function(e,t){var n=t[e+"Buffer"],r=Xs(e);n&&(n.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),n.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},eo=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},to=function(e,t,n){return function(r,i){var a=i[r+"Buffer"];if(eo(i.mediaSource,a)){i.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{a.appendBuffer(e)}catch(e){i.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+r+"Buffer"),i.queuePending[r]=null,n(e)}}}},no=function(e,t){return function(n,r){var i=r[n+"Buffer"];if(eo(r.mediaSource,i)){r.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{i.remove(e,t)}catch(i){r.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},ro=function(e){return function(t,n){var r=n[t+"Buffer"];eo(n.mediaSource,r)&&(n.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},io=function(e){return function(t,n){e()}},ao=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){Gi.log.warn("Failed to call media source endOfStream",e)}}}},so=function(e,t){return function(n){var r=Xs(e),i=(0,S._5)(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(i);a.addEventListener("updateend",n["on"+r+"UpdateEnd_"]),a.addEventListener("error",n["on"+r+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},oo=function(e){return function(t){var n=t[e+"Buffer"];if($s(e,t),eo(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){Gi.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},uo=function(e){return function(t,n){var r=n[t+"Buffer"],i=(0,S._5)(e);eo(n.mediaSource,r)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),r.changeType(i),n.codecs[t]=e)}},lo=function(e){var t=e.type,n=e.sourceUpdater,r=e.action,i=e.doneFn,a=e.name;n.queue.push({type:t,action:r,doneFn:i,name:a}),Js(t,n)},co=function(e,t){return function(n){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}Js(e,t)}},fo=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return Js("mediaSource",(0,c.Z)(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=Xi("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=co("video",(0,c.Z)(n)),n.onAudioUpdateEnd_=co("audio",(0,c.Z)(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}(0,f.Z)(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){lo({type:"mediaSource",sourceUpdater:this,action:so(e,t),name:"addSourceBuffer"})},n.abort=function(e){lo({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(eo(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){Gi.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?lo({type:"mediaSource",sourceUpdater:this,action:oo(e),name:"removeSourceBuffer"}):Gi.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!Gi.browser.IE_VERSION&&!Gi.browser.IS_FIREFOX&&a().MediaSource&&a().MediaSource.prototype&&"function"==typeof a().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return a().SourceBuffer&&a().SourceBuffer.prototype&&"function"==typeof a().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?lo({type:e,sourceUpdater:this,action:uo(t),name:"changeType"}):Gi.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var r=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,r);t.canChangeType()&&t.changeType(n,r)}))},n.appendBuffer=function(e,t){var n=this,r=e.segmentInfo,i=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===i&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(lo({type:i,sourceUpdater:this,action:to(a,r||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===i){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+s.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return eo(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Gi.createTimeRange()},n.videoBuffered=function(){return eo(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Gi.createTimeRange()},n.buffered=function(){var e=eo(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=eo(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,r=null,i=0,a=[],s=[];if(!(e&&e.length&&t&&t.length))return Gi.createTimeRange();for(var o=e.length;o--;)a.push({time:e.start(o),type:"start"}),a.push({time:e.end(o),type:"end"});for(o=t.length;o--;)a.push({time:t.start(o),type:"start"}),a.push({time:t.end(o),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),o=0;o<a.length;o++)"start"===a[o].type?2==++i&&(n=a[o].time):"end"===a[o].type&&1==--i&&(r=a[o].time),null!==n&&null!==r&&(s.push([n,r]),n=null,r=null);return Gi.createTimeRanges(s)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){var n;void 0===t&&(t=Ks),lo({type:"mediaSource",sourceUpdater:this,action:(n=e,function(e){e.logger_("Setting mediaSource duration to "+n);try{e.mediaSource.duration=n}catch(e){Gi.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=Ks),"string"!=typeof e&&(e=void 0),lo({type:"mediaSource",sourceUpdater:this,action:ao(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=Ks),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?lo({type:"audio",sourceUpdater:this,action:no(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=Ks),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?lo({type:"video",sourceUpdater:this,action:no(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!Zs("audio",this)&&!Zs("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(lo({type:"audio",sourceUpdater:this,action:ro(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(lo({type:"video",sourceUpdater:this,action:ro(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&lo({type:"audio",sourceUpdater:this,action:io(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&lo({type:"video",sourceUpdater:this,action:io(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),Qs.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return $s(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(Gi.EventTarget),ho=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},po=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),mo=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).mediaSource_=null,r.subtitlesTrack_=null,r.loaderType_="subtitle",r.featuresNativeTextTracks_=t.featuresNativeTextTracks,r.shouldSaveSegmentTimingInfo_=!1,r}(0,f.Z)(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Gi.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Gi.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=Ka(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=po.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(po,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){js(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var r=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===ys&&this.handleTimeout_(),e.code===vs?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),t.key&&this.segmentKey(t.key,!0),this.state="APPENDING",this.trigger("appending");var s=i.segment;if(s.map&&(s.map.bytes=t.map.bytes),i.bytes=t.bytes,"function"!=typeof a().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,u=function(){r.subtitlesTrack_.tech_.off("vttjsloaded",o),r.stopForError({message:"Error loading vtt.js"})};return o=function(){r.subtitlesTrack_.tech_.off("vttjserror",u),r.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",u)}s.requested=!0;try{this.parseVTTCues_(i)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(i,this.syncController_.timelines[i.timeline],this.playlist_),i.cues.length?i.timingInfo={start:i.cues[0].startTime,end:i.cues[i.cues.length-1].endTime}:i.timingInfo={start:i.startOfSegment,end:i.startOfSegment+i.duration},i.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");i.byteLength=i.bytes.byteLength,this.mediaSecondsLoaded+=s.duration,i.cues.forEach((function(e){r.subtitlesTrack_.addCue(r.featuresNativeTextTracks_?new(a().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var r=[],i=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++i>1&&r.push(t[a]);r.length&&r.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;"function"==typeof a().TextDecoder?t=new(a().TextDecoder)("utf8"):(t=a().WebVTT.StringDecoder(),n=!0);var r=new(a().WebVTT.Parser)(a(),a().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){e.timestampmap=t},r.onparsingerror=function(e){Gi.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var i=e.segment.map.bytes;n&&(i=ho(i)),r.parse(i)}var s=e.bytes;n&&(s=ho(s)),r.parse(s),r.flush()},n.updateTimeMapping_=function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/D.ONE_SECOND_IN_TS-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var s=e.cues[0].startTime,o=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(s,o-r.duration)}}}else r.empty=!0},t}(Ws),go=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},yo=[{name:"VOD",run:function(e,t,n,r,i){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,s=null,o=oa(t);i=i||0;for(var u=0;u<o.length;u++){var l=o[t.endList||0===i?u:o.length-(u+1)],d=l.segment,c=e.timelineToDatetimeMappings[d.timeline];if(c&&d.dateTimeObject){var f=d.dateTimeObject.getTime()/1e3+c;if(d.parts&&"number"==typeof l.partIndex)for(var h=0;h<l.partIndex;h++)f+=d.parts[h].duration;var p=Math.abs(i-f);if(null!==s&&(0===p||s<p))break;s=p,a={time:f,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,r,i){var a=null,s=null;i=i||0;for(var o=oa(t),u=0;u<o.length;u++){var l=o[t.endList||0===i?u:o.length-(u+1)],d=l.segment,c=l.part&&l.part.start||d&&d.start;if(d.timeline===r&&void 0!==c){var f=Math.abs(i-c);if(null!==s&&s<f)break;(!a||null===s||s>=f)&&(s=f,a={time:c,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var s=null,o=0;o<t.discontinuityStarts.length;o++){var u=t.discontinuityStarts[o],l=t.discontinuitySequence+o+1,d=e.discontinuities[l];if(d){var c=Math.abs(i-d.time);if(null!==s&&s<c)break;(!a||null===s||s>=c)&&(s=c,a={time:d.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],vo=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=Xi("SyncController"),n}(0,f.Z)(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+ha({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:r.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,r){for(var i=[],a=0;a<yo.length;a++){var s=yo[a],o=s.run(this,e,t,n,r);o&&(o.strategy=s.name,i.push({strategy:s.name,syncPoint:o}))}return i},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var s=Math.abs(e[a].syncPoint[t.key]-t.value);s<r&&(r=s,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)Gi.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var r=n-1;r>=0;r--){var i=e.segments[r];if(i&&void 0!==i.start){t.syncInfo={mediaSequence:e.mediaSequence+r,time:i.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,r=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),i=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:i.start}));var a=i.dateTimeObject;i.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[i.timeline]=-a.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var r,i,a=e.segment,s=e.part,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+o.time+"] [mapping: "+o.mapping+"]")),r=e.startOfSegment,i=t.end+o.mapping;else{if(!o)return!1;r=t.start+o.mapping,i=t.end+o.mapping}return s&&(s.start=r,s.end=i),(!a.start||r<a.start)&&(a.start=r),a.end=i,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,s=i-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var u;u=s<0?n.start-ha({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:i}):n.end+ha({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:i}),this.discontinuities[a]={time:u,accuracy:o}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(Gi.EventTarget),_o=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}(0,f.Z)(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,r=e.to;return"number"==typeof n&&"number"==typeof r&&(this.lastTimelineChanges_[t]={type:t,from:n,to:r},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(Gi.EventTarget),To=us(ls((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var r=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0})),i=t((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,r)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,i(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),s=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,s=0;s<a;++s)t[s].apply(this,i)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),o=null,u=function(){function e(e){var t,n,r;o||(o=function(){var e,t,n,r,i,a,s,o,u=[[[],[],[],[],[]],[[],[],[],[],[]]],l=u[0],d=u[1],c=l[4],f=d[4],h=[],p=[];for(e=0;e<256;e++)p[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=r||1,n=p[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,c[t]=a,f[a]=t,o=16843009*h[i=h[r=h[t]]]^65537*i^257*r^16843008*t,s=257*h[a]^16843008*a,e=0;e<4;e++)l[e][t]=s=s<<24^s>>>8,d[e][a]=o=o<<24^o>>>8;for(e=0;e<5;e++)l[e]=l[e].slice(0),d[e]=d[e].slice(0);return u}()),this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var i=this._tables[0][4],a=this._tables[1],s=e.length,u=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var l=e.slice(0),d=[];for(this._key=[l,d],t=s;t<4*s+28;t++)r=l[t-1],(t%s==0||8===s&&t%s==4)&&(r=i[r>>>24]<<24^i[r>>16&255]<<16^i[r>>8&255]<<8^i[255&r],t%s==0&&(r=r<<8^r>>>24^u<<24,u=u<<1^283*(u>>7))),l[t]=l[t-s]^r;for(n=0;t;n++,t--)r=l[3&n?t:t-4],d[n]=t<=4||n<4?r:a[0][i[r>>>24]]^a[1][i[r>>16&255]]^a[2][i[r>>8&255]]^a[3][i[255&r]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var s,o,u,l,d=this._key[1],c=e^d[0],f=r^d[1],h=n^d[2],p=t^d[3],m=d.length/4-2,g=4,y=this._tables[1],v=y[0],_=y[1],T=y[2],b=y[3],E=y[4];for(l=0;l<m;l++)s=v[c>>>24]^_[f>>16&255]^T[h>>8&255]^b[255&p]^d[g],o=v[f>>>24]^_[h>>16&255]^T[p>>8&255]^b[255&c]^d[g+1],u=v[h>>>24]^_[p>>16&255]^T[c>>8&255]^b[255&f]^d[g+2],p=v[p>>>24]^_[c>>16&255]^T[f>>8&255]^b[255&h]^d[g+3],g+=4,c=s,f=o,h=u;for(l=0;l<4;l++)i[(3&-l)+a]=E[c>>>24]<<24^E[f>>16&255]<<16^E[h>>8&255]<<8^E[255&p]^d[g++],s=c,c=f,f=h,h=p,p=s},e}(),l=function(e){function t(){var t;return(t=e.call(this,s)||this).jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(s),d=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(){function e(t,n,r,i){var a=e.STEP,s=new Int32Array(t.buffer),o=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),n,r,o)),u=a;u<s.length;u+=a)r=new Uint32Array([d(s[u-4]),d(s[u-3]),d(s[u-2]),d(s[u-1])]),this.asyncStream_.push(this.decryptChunk_(s.subarray(u,u+a),n,r,o));this.asyncStream_.push((function(){var e;i(null,(e=o).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=function(e,t,n){var r,i,a,s,o,l,c,f,h,p=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),m=new u(Array.prototype.slice.call(t)),g=new Uint8Array(e.byteLength),y=new Int32Array(g.buffer);for(r=n[0],i=n[1],a=n[2],s=n[3],h=0;h<p.length;h+=4)o=d(p[h]),l=d(p[h+1]),c=d(p[h+2]),f=d(p[h+3]),m.decrypt(o,l,c,f,y,h),y[h]=d(y[h]^r),y[h+1]=d(y[h+1]^i),y[h+2]=d(y[h+2]^a),y[h+3]=d(y[h+3]^s),r=o,i=l,a=c,s=f;return g}(e,t,n);r.set(i,e.byteOffset)}},r(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),f=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;f("0x1"),f("0x100"),f("0x10000"),f("0x1000000"),f("0x100000000"),f("0x10000000000"),f("0x1000000000000"),f("0x100000000000000"),f("0x10000000000000000");self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),r=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),i=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new c(n,r,i,(function(e,n){var r,i;self.postMessage((r={source:t.source,decrypted:n},i={},Object.keys(r).forEach((function(e){var t,n=r[e];t=n,("function"===ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer)?i[e]={bytes:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength}:i[e]=n})),i),[n.buffer])}))}}))),bo=os(To),Eo=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},So=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},wo=function(e,t){t.activePlaylistLoader=e,e.load()},Co={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;So(n,r);var a=r.activeTrack(),s=r.activeGroup(),o=(s.filter((function(e){return e.default}))[0]||s[0]).id,u=r.tracks[o];if(a!==u){for(var l in Gi.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[l].enabled=r.tracks[l]===u;r.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];Gi.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),So(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},Ao={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",Co[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),a.track(s.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",Co[e](e,n))}},Io={AUDIO:function(e,t){var n=t.vhs,r=t.sourceType,i=t.segmentLoaders[e],a=t.requestOptions,s=t.master.mediaGroups,o=t.mediaTypes[e],u=o.groups,l=o.tracks,d=o.logger_,c=t.masterPlaylistLoader,f=Ea(c.master);for(var h in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}},f&&(s[e].main.default.playlists=c.master.playlists)),s[e])for(var p in u[h]||(u[h]=[]),s[e][h]){var m=s[e][h][p],g=void 0;if(f?(d("AUDIO group '"+h+"' label '"+p+"' is a master playlist"),m.isMasterPlaylist=!0,g=null):g="vhs-json"===r&&m.playlists?new Fa(m.playlists[0],n,a):m.resolvedUri?new Fa(m.resolvedUri,n,a):m.playlists&&"dash"===r?new is(m.playlists[0],n,a,c):null,m=Gi.mergeOptions({id:p,playlistLoader:g},m),Ao[e](e,m.playlistLoader,t),u[h].push(m),void 0===l[p]){var y=new Gi.AudioTrack({id:p,kind:Eo(m),enabled:!1,language:m.language,default:m.default,label:p});l[p]=y}}i.on("error",Co[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.vhs,i=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.master.mediaGroups,u=t.mediaTypes[e],l=u.groups,d=u.tracks,c=t.masterPlaylistLoader;for(var f in o[e])for(var h in l[f]||(l[f]=[]),o[e][f])if(!o[e][f][h].forced){var p=o[e][f][h],m=void 0;if("hls"===i)m=new Fa(p.resolvedUri,r,s);else if("dash"===i){if(!p.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;m=new is(p.playlists[0],r,s,c)}else"vhs-json"===i&&(m=new Fa(p.playlists?p.playlists[0]:p.resolvedUri,r,s));if(p=Gi.mergeOptions({id:h,playlistLoader:m},p),Ao[e](e,p.playlistLoader,t),l[f].push(p),void 0===d[h]){var g=n.addRemoteTextTrack({id:h,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:h},!1).track;d[h]=g}}a.on("error",Co[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],a=i.groups,s=i.tracks;for(var o in r[e])for(var u in a[o]||(a[o]=[]),r[e][o]){var l=r[e][o][u];if(/^(?:CC|SERVICE)/.test(l.instreamId)){var d=n.options_.vhs&&n.options_.vhs.captionServices||{},c={label:u,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(d[c.instreamId]&&(c=Gi.mergeOptions(c,d[c.instreamId])),void 0===c.default&&delete c.default,a[o].push(Gi.mergeOptions({id:u},l)),void 0===s[u]){var f=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;s[u]=f}}}}},ko=function e(t,n){for(var r=0;r<t.length;r++){if(Ta(n,t[r]))return!0;if(t[r].playlists&&e(t[r].playlists,n))return!0}return!1},Ro={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode||"hidden"===n[r].mode)return n[r];return null}}},Po=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Do=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Oo=function(e){function t(t){var n;n=e.call(this)||this;var r=t.src,i=t.handleManifestRedirects,s=t.withCredentials,o=t.tech,u=t.bandwidth,l=t.externVhs,d=t.useCueTags,f=t.blacklistDuration,h=t.enableLowInitialPlaylist,p=t.sourceType,m=t.cacheEncryptionKeys,g=t.experimentalBufferBasedABR,y=t.experimentalLeastPixelDiffSelector,v=t.captionServices;if(!r)throw new Error("A non-empty playlist URL or JSON manifest string is required");var _,T=t.maxPlaylistRetries;null==T&&(T=1/0),Ys=l,n.experimentalBufferBasedABR=Boolean(g),n.experimentalLeastPixelDiffSelector=Boolean(y),n.withCredentials=s,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=p,n.useCueTags_=d,n.blacklistDuration=f,n.maxPlaylistRetries=T,n.enableLowInitialPlaylist=h,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:s,handleManifestRedirects:i,maxPlaylistRetries:T,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=(_={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){_[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ks,activeTrack:Ks,getActiveGroup:Ks,onGroupChanged:Ks,onTrackChanged:Ks,lastTrack_:null,logger_:Xi("MediaGroups["+e+"]")}})),_),n.mediaSource=new(a().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind((0,c.Z)(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind((0,c.Z)(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind((0,c.Z)(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=Gi.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new vo(t),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new bo,n.sourceUpdater_=new fo(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new _o;var b={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:v,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:u,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new is(r,n.vhs_,n.requestOptions_):new Fa(r,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new Ws(Gi.mergeOptions(b,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new Ws(Gi.mergeOptions(b,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new mo(Gi.mergeOptions(b,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),Po.forEach((function(e){n[e+"_"]=Do.bind((0,c.Z)(n),e)})),n.logger_=Xi("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var E="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(E,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}(0,f.Z)(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var r=this.media(),i=r&&(r.id||r.uri),a=e.id||e.uri;i&&i!==a&&(this.logger_("switch media "+i+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=a().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(a().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,r=e.mediaGroups.AUDIO,i=Object.keys(r);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=r.main||i.length&&r[i[0]];for(var s in a)if(a[s].default){n={label:s};break}}if(!n)return t;var o=[];for(var u in r)if(r[u][n.label]){var l=r[u][n.label];if(l.playlists&&l.playlists.length)o.push.apply(o,l.playlists);else if(l.uri)o.push(l);else if(e.playlists.length)for(var d=0;d<e.playlists.length;d++){var c=e.playlists[d];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===u&&o.push(c)}}return o.length?o:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;_a(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Io[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.vhs,a=e.segmentLoaders,s=a.AUDIO,o=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var s=null;a.attributes[e]&&(s=i[a.attributes[e]]);var o=Object.keys(i);if(!s)if("AUDIO"===e&&o.length>1&&Ea(t.master))for(var u=0;u<o.length;u++){var l=i[o[u]];if(ko(l,a)){s=l;break}}else i.main?s=i.main:1===o.length&&(s=i[o[0]]);return void 0===n?s:null!==n&&s&&s.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=Ro[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.getActiveGroup(),u=a.activePlaylistLoader,l=a.lastGroup_;o&&l&&o.id===l.id||(a.lastGroup_=o,a.lastTrack_=s,So(r,a),o&&!o.isMasterPlaylist&&(o.playlistLoader?(r.resyncLoader(),wo(o.playlistLoader,a)):u&&i.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,r=t.segmentLoaders,i=r[e],a=r.main,s=t.mediaTypes[e],o=s.activeTrack(),u=s.getActiveGroup(),l=s.activePlaylistLoader,d=s.lastTrack_;if((!d||!o||d.id!==o.id)&&(s.lastGroup_=u,s.lastTrack_=o,So(i,s),u)){if(u.isMasterPlaylist){if(!o||!d||o.id===d.id)return;var c=t.vhs.masterPlaylistController_,f=c.selectPlaylist();if(c.media()===f)return;return s.logger_("track change. Switching master audio from "+d.id+" to "+o.id),n.pause(),a.resetEverything(),void c.fastQualityChange_(f)}if("AUDIO"===e){if(!u.playlistLoader)return a.setAudio(!0),void a.resetEverything();i.setAudio(!0),a.setAudio(!1)}l!==u.playlistLoader?(i.track&&i.track(o),i.resetEverything(),wo(u.playlistLoader,s)):wo(u.playlistLoader,s)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var u=t.AUDIO.activeGroup();if(u){var l=(u.filter((function(e){return e.default}))[0]||u[0]).id;t.AUDIO.tracks[l].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var d=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};for(var c in r.audioTracks().addEventListener("change",d),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){r.audioTracks().removeEventListener("change",d),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[c])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;_a(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a])n.AUDIO[a][s].uri||(r=!1);r&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Ys.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),r=this.bufferLowWaterLine(),i=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,r=e.currentTime,i=e.nextPlaylist,a=e.bufferLowWaterLine,s=e.bufferHighWaterLine,o=e.duration,u=e.experimentalBufferBasedABR,l=e.log;if(!i)return Gi.log.warn("We received no playlist to switch to. Please check your stream."),!1;var d="allowing switch "+(t&&t.id||"null")+" -> "+i.id;if(!t)return l(d+" as current playlist is not set"),!0;if(i.id===t.id)return!1;var c=Boolean($i(n,r).length);if(!t.endList)return c||"number"!=typeof t.partTargetDuration?(l(d+" as current playlist is live"),!0):(l("not "+d+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var f=ia(n,r),h=u?as.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:as.MAX_BUFFER_LOW_WATER_LINE;if(o<h)return l(d+" as duration < max low water line ("+o+" < "+h+")"),!0;var p=i.attributes.BANDWIDTH,m=t.attributes.BANDWIDTH;if(p<m&&(!u||f<s)){var g=d+" as next bandwidth < current bandwidth ("+p+" < "+m+")";return u&&(g+=" and forwardBuffer < bufferHighWaterLine ("+f+" < "+s+")"),l(g),!0}if((!u||p>m)&&f>=a){var y=d+" as forwardBuffer >= bufferLowWaterLine ("+f+" >= "+a+")";return u&&(y+=" and next bandwidth > current bandwidth ("+p+" > "+m+")"),l(y),!0}return l("not "+d+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:r,bufferHighWaterLine:i,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){Gi.browser.IE_VERSION||Gi.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Gi.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=Ys.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=Zi;var a=i.end(i.length-1);return a-r<=Zi&&n-a<=Zi},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var r,i=this.masterPlaylistLoader_.master.playlists,a=i.filter(ya),s=1===a.length&&a[0]===n;if(1===i.length&&t!==1/0)return Gi.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(s);if(s){var o=!1;i.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(o=!0,delete e.excludeUntil)}})),o&&(Gi.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}r=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=r,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var u=this.selectPlaylist();if(!u)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=e.internal?this.logger_:Gi.log.warn,d=e.message?" "+e.message:"";l((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+d+" Switching to playlist "+u.id+"."),u.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var c=u.targetDuration/2*1e3||5e3,f="number"==typeof u.lastRequest&&Date.now()-u.lastRequest<=c;return this.switchMedia_(u,"exclude",s||f)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,r=[],i="all"===e;(i||"main"===e)&&r.push(this.masterPlaylistLoader_);var a=[];(i||"audio"===e)&&a.push("AUDIO"),(i||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&r.push(t)})),["main","audio","subtitle"].forEach((function(t){var i=n[t+"SegmentLoader_"];!i||e!==t&&"all"!==e||r.push(i)})),r.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=$i(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Ys.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var r=this.masterPlaylistLoader_.master,i=Ys.Playlist.seekable(t,n,Ys.Playlist.liveEdgeDelay(r,t));if(0!==i.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=Ys.Playlist.seekable(t,n,Ys.Playlist.liveEdgeDelay(r,t))).length)return}var a,s;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>i.end(0)||i.start(0)>e.end(0)?this.seekable_=i:this.seekable_=Gi.createTimeRanges([[e.start(0)>i.start(0)?e.start(0):i.start(0),e.end(0)<i.end(0)?e.end(0):i.end(0)]]):this.seekable_=i,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated ["+ta(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),r=Ys.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=Ds(this.master(),this.media()),r={},i=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=n.video||t.main.videoCodec||S.xz),t.main.isMuxed&&(r.video+=","+(n.audio||t.main.audioCodec||S.lA)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||i)&&(r.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||S.lA,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.video){var a,s={};if(["video","audio"].forEach((function(e){if(r.hasOwnProperty(e)&&(i=t[e].isFmp4,o=r[e],!(i?(0,S.p7)(o):(0,S.Hi)(o)))){var n=t[e].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(r[e]),"audio"===e&&(a=n)}var i,o})),i&&a&&this.media().attributes.AUDIO){var o=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===o&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+o+" as "+a+' does not support codec(s): "'+r.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=((0,S.kS)(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=((0,S.kS)(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&u.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+r[t]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return r}var l=Object.keys(s).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+s[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:l,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(r){var i=t[r];if(-1===n.indexOf(i.id)){n.push(i.id);var a=Ds(e.master,i),s=[];!a.audio||(0,S.Hi)(a.audio)||(0,S.p7)(a.audio)||s.push("audio codec "+a.audio),!a.video||(0,S.Hi)(a.video)||(0,S.p7)(a.video)||s.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&s.push("text codec "+a.text),s.length&&(i.excludeUntil=1/0,e.logger_("excluding "+i.id+" for unsupported: "+s.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],r=this.master().playlists,i=Rs((0,S.kS)(e)),a=Ps(i),s=i.video&&(0,S.kS)(i.video)[0]||null,o=i.audio&&(0,S.kS)(i.audio)[0]||null;Object.keys(r).forEach((function(e){var i=r[e];if(-1===n.indexOf(i.id)&&i.excludeUntil!==1/0){n.push(i.id);var u=[],l=Ds(t.masterPlaylistLoader_.master,i),d=Ps(l);if(l.audio||l.video){if(d!==a&&u.push('codec count "'+d+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var c=l.video&&(0,S.kS)(l.video)[0]||null,f=l.audio&&(0,S.kS)(l.audio)[0]||null;c&&s&&c.type.toLowerCase()!==s.type.toLowerCase()&&u.push('video codec "'+c.type+'" !== "'+s.type+'"'),f&&o&&f.type.toLowerCase()!==o.type.toLowerCase()&&u.push('audio codec "'+f.type+'" !== "'+o.type+'"')}u.length&&(i.excludeUntil=1/0,t.logger_("blacklisting "+i.id+": "+u.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var r,i=n,s=0;s<e.segments.length;s++){var o=e.segments[s];if(r||(r=go(t,i+o.duration/2)),r){if("cueIn"in o){r.endTime=i,r.adEndTime=i,i+=o.duration,r=null;continue}if(i<r.endTime){i+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&((r=new(a().VTTCue)(i,i+o.duration,o.cueOut)).adStartTime=i,r.adEndTime=i+parseFloat(o.cueOut),t.addCue(r)),"cueOutCont"in o){var u=o.cueOutCont.split("/").map(parseFloat),l=u[0],d=u[1];(r=new(a().VTTCue)(i,i+o.duration,"")).adStartTime=i-l,r.adEndTime=r.adStartTime+d,t.addCue(r)}i+=o.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=as.GOAL_BUFFER_LENGTH,n=as.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,as.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=as.BUFFER_LOW_WATER_LINE,n=as.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,as.MAX_BUFFER_LOW_WATER_LINE),i=Math.max(t,as.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?i:r)},n.bufferHighWaterLine=function(){return as.BUFFER_HIGH_WATER_LINE},t}(Gi.EventTarget),Mo=function(e,t,n){var r,i,a,s=e.masterPlaylistController_,o=s[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(t.attributes){var u=t.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=Ds(s.master(),t),this.playlist=t,this.id=n,this.enabled=(r=e.playlists,i=t.id,a=o,function(e){var t=r.master.playlists[i],n=ga(t),s=ya(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||n||(a(),e?r.trigger("renditionenabled"):r.trigger("renditiondisabled")),e)})},Lo=["seeking","seeked","pause","playing","error"],No=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Xi("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},r=function(){return t.monitorCurrentTime_()},i=function(){return t.techWaiting_()},s=function(){return t.cancelTimer_()},o=this.masterPlaylistController_,u=["main","subtitle","audio"],l={};u.forEach((function(e){l[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",l[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",l[e].reset),t.tech_.on(["seeked","seeking"],l[e].reset)}));var d=function(e){["main","audio"].forEach((function(n){o[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),d("off"))},this.clearSeekingAppendCheck_=function(){return d("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),d("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",i),this.tech_.on(Lo,s),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",i),t.tech_.off(Lo,s),t.tech_.off("canplay",r),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),u.forEach((function(e){o[e+"SegmentLoader_"].off("appendsdone",l[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",l[e].reset),t.tech_.off(["seeked","seeking"],l[e].reset)})),t.checkCurrentTimeTimeout_&&a().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&a().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=a().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],r=n.buffered_(),i=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],r);this[e+"Buffered_"]=r,i?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:na(r)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+Zi>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){var r=t.start(0);e=r+(r===t.end(0)?0:Zi)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+ta(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var i=this.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),s=i.audioBuffer?i.audioBuffered():null,o=i.videoBuffer?i.videoBuffered():null,u=this.media(),l=u.partTargetDuration?u.partTargetDuration:2*(u.targetDuration-Qi),d=[s,o],c=0;c<d.length;c++)if(d[c]&&ia(d[c],n)<l)return!1;var f=ea(a,n);return 0!==f.length&&(e=f.start(0)+Zi,this.logger_("Buffered region starts ("+f.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=$i(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,i=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=ea(i,t);if(a.length>0){var s=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+s+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*s,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,r){if(void 0===r&&(r=!1),!e.length)return!1;var i=e.end(e.length-1)+Zi;return!n.endList&&r&&(i=e.end(e.length-1)+3*n.targetDuration),t>i},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,r=e.currentTime;if(t){var i;if(t.length&&n.length){var a=$i(t,r-3),s=$i(t,r),o=$i(n,r);o.length&&!s.length&&a.length&&(i={start:a.end(0),end:o.end(0)})}else ea(t,r).length||(i=this.gapFromVideoUnderflow_(t,r));return!!i&&(this.logger_("Encountered a gap in video from "+i.start+" to "+i.end+". Seeking to current time "+r),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=ea(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.tech_.setCurrentTime(r.start(0)+Qi),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return Gi.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return Gi.createTimeRanges(t)}(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:a}}return null},e}(),xo={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Fo=function e(t,n){var r=0,i=0,a=Gi.mergeOptions(xo,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var s=function(){i&&t.currentTime(i)},o=function(e){null!=e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},u=function(){return Date.now()-r<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(r=Date.now(),a.getSource.call(t,o)):void Gi.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function e(){t.off("loadedmetadata",s),t.off("error",u),t.off("dispose",e)};t.on("error",u),t.on("dispose",l),t.reloadSourceOnError=function(n){l(),e(t,n)}},Uo="2.14.3",jo={PlaylistLoader:Fa,Playlist:Sa,utils:Qa,STANDARD_PLAYLIST_SELECTOR:Us,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Sa.isEnabled);return Ns(t,(function(e,t){return xs(e,t)})),t.filter((function(t){return!!Ds(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:Us,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&a().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),Fs(this.playlists.master,t,parseInt(Ls(this.tech_.el(),"width"),10)*r,parseInt(Ls(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:xs,comparePlaylistResolution:function(e,t){var n,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||a().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||a().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:Va()};Object.keys(as).forEach((function(e){Object.defineProperty(jo,e,{get:function(){return Gi.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),as[e]},set:function(t){Gi.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Gi.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):as[e]=t}})}));var Bo="videojs-vhs",Vo=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.id){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};jo.canPlaySource=function(){return Gi.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var qo=function(){if(!a().localStorage)return null;var e=a().localStorage.getItem(Bo);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};jo.supportsNativeHls=function(){if(!o()||!o().createElement)return!1;var e=o().createElement("video");return!!Gi.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),jo.supportsNativeDash=!!(o()&&o().createElement&&Gi.getTech("Html5").isSupported())&&/maybe|probably/i.test(o().createElement("video").canPlayType("application/dash+xml")),jo.supportsTypeNatively=function(e){return"hls"===e?jo.supportsNativeHls:"dash"===e&&jo.supportsNativeDash},jo.isSupported=function(){return Gi.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ho=function(e){function t(t,n,r){var i;if(i=e.call(this,n,Gi.mergeOptions(r.hls,r.vhs))||this,r.hls&&Object.keys(r.hls).length&&Gi.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof r.initialBandwidth&&(i.options_.bandwidth=r.initialBandwidth),i.logger_=Xi("VhsHandler"),n.options_&&n.options_.playerId){var a=Gi(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Gi.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),(0,c.Z)(i)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return Gi.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),(0,c.Z)(i)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return Gi.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),(0,c.Z)(i)},configurable:!0}),i.player_=a}if(i.tech_=n,i.source_=t,i.stats={},i.ignoreNextSeekingEvent_=!1,i.setOptions_(),i.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(o(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=o().fullscreenElement||o().webkitFullscreenElement||o().mozFullScreenElement||o().msFullscreenElement;t&&t.contains(i.tech_.el())?i.masterPlaylistController_.fastQualityChange_():i.masterPlaylistController_.checkABR_()})),i.on(i.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),i.on(i.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),i.on(i.tech_,"play",i.play),i}(0,f.Z)(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=qo();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=as.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===as.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){var r;this.setOptions_(),this.options_.src=0===(r=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(r.substring(r.indexOf(",")+1)):r,this.options_.tech=this.tech_,this.options_.externVhs=jo,this.options_.sourceType=(0,w.t)(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&Gi.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Oo(this.options_);var i=Gi.mergeOptions({liveRangeSafeTimeDelta:Zi},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new No(i),this.masterPlaylistController_.on("error",(function(){var e=Gi.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var s=this.options_.experimentalBufferBasedABR?jo.movingAverageBandwidthSelector(.55):jo.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):s.bind(this),this.masterPlaylistController_.selectInitialPlaylist=jo.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=a().navigator.connection||a().navigator.mozConnection||a().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var r=1e3*t.downlink*1e3;e=r>=n&&e>=n?Math.max(e,r):r}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){Gi.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return na(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return na(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!a().localStorage)return!1;var t=qo();t=t?Gi.mergeOptions(t,e):e;try{a().localStorage.setItem(Bo,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=Ea(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!ga(e)})).map((function(t,n){return new Mo(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=a().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,r=e.audioMedia,i=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a,s,o=(a=r?i.concat([r]):i,s=Object.keys(n),a.reduce((function(e,t){if(!t.contentProtection)return e;var n=s.reduce((function(e,n){var r=t.contentProtection[n];return r&&r.pssh&&(e[n]={pssh:r.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),u=[],l=[];return o.forEach((function(e){l.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),u.push(new Promise((function(n,r){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?r(e):n()}))})))})),Promise.race([Promise.all(u),Promise.race(l)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e,t,n,r=this,i=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:i&&i.media()},t=e.player,!(!(n=function(e,t,n){if(!e)return e;var r={};t&&t.attributes&&t.attributes.CODECS&&(r=Rs((0,S.kS)(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);var i=(0,S._5)(r.video),a=(0,S._5)(r.audio),s={};for(var o in e)s[o]={},a&&(s[o].audioContentType=a),i&&(s[o].videoContentType=i),t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(s[o].pssh=t.contentProtection[o].pssh),"string"==typeof e[o]&&(s[o].url=e[o]);return Gi.mergeOptions(e,s)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=n,n&&!t.eme&&(Gi.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",(function(e){if("output-restricted"===e.status){var t=r.masterPlaylistController_.master();if(t&&t.playlists){var n,i=[];t.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUntil||e.excludeUntil<1/0)&&(e.excludeUntil=1/0,i.push(e))})),i.length&&((n=Gi.log).warn.apply(n,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(i)),r.masterPlaylistController_.fastQualityChange_())}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==Gi.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=Gi.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),Vo(t,n.playlists)})),this.playlists.on("mediachange",(function(){Vo(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":Uo,"mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return fo.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&a().URL.revokeObjectURL&&(a().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===r)return i({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,r=0,i=0;i<t.segments.length&&!(e<=(r=(n=t.segments[i]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:r+n.duration));i++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>r){if(e>r+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:r-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(r,t);if(!a)return i({message:"valid programTime was not found"});if("estimate"===a.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:r},o=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)}(r,a.segment);return o&&(s.programDateTime=o.toISOString()),i(null,s)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=2),Za({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(Gi.getComponent("Component")),Go={name:"videojs-http-streaming",VERSION:Uo,canHandleSource:function(e,t){void 0===t&&(t={});var n=Gi.mergeOptions(Gi.options,t);return Go.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var r=Gi.mergeOptions(Gi.options,n);return t.vhs=new Ho(e,t,r),Gi.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return Gi.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Va(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=Gi.mergeOptions(Gi.options,t),r=n.vhs,i=(r=void 0===r?{}:r).overrideNative,a=void 0===i?!Gi.browser.IS_ANY_SAFARI:i,s=n.hls,o=(s=void 0===s?{}:s).overrideNative,u=void 0!==o&&o,l=(0,w.t)(e);return l&&(!jo.supportsTypeNatively(l)||u||a)?"maybe":""}};(0,S.p7)("avc1.4d400d,mp4a.40.2")&&Gi.getTech("Html5").registerSourceHandler(Go,0),Gi.VhsHandler=Ho,Object.defineProperty(Gi,"HlsHandler",{get:function(){return Gi.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Ho},configurable:!0}),Gi.VhsSourceHandler=Go,Object.defineProperty(Gi,"HlsSourceHandler",{get:function(){return Gi.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Go},configurable:!0}),Gi.Vhs=jo,Object.defineProperty(Gi,"Hls",{get:function(){return Gi.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),jo},configurable:!0}),Gi.use||(Gi.registerComponent("Hls",jo),Gi.registerComponent("Vhs",jo)),Gi.options.vhs=Gi.options.vhs||{},Gi.options.hls=Gi.options.hls||{},Gi.getPlugin&&Gi.getPlugin("reloadSourceOnError")||(Gi.registerPlugin||Gi.plugin)("reloadSourceOnError",(function(e){Fo(this,e)}));const zo=Gi},2232:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>I});var r,i,o,u=n(85215),l=n(58908),d=n.n(l),c=n(89144),f=n.n(c),h=(r=function(e,t){var n;window,n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s="./index.js")}({"./externals/base64.js":function(e,t,n){var r,i,o,u,l,d=function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},c=function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")},f={};r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=function(e){for(var t=0,n=[],i=0|e.length/3;0<i--;){var a=(e[t]<<16)+(e[t+1]<<8)+e[t+2];t+=3,n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push(r.charAt(63&a))}return 2==e.length-t?(a=(e[t]<<16)+(e[t+1]<<8),n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push(r.charAt(63&a>>6)),n.push("=")):1==e.length-t&&(a=e[t]<<16,n.push(r.charAt(63&a>>18)),n.push(r.charAt(63&a>>12)),n.push("==")),n.join("")},o=function(){for(var e=[],t=0;t<r.length;++t)e[r.charCodeAt(t)]=t;return e["=".charCodeAt(0)]=0,e}(),u=function(e){for(var t=0,n=[],r=0|e.length/4;0<r--;){var i=(o[e.charCodeAt(t)]<<18)+(o[e.charCodeAt(t+1)]<<12)+(o[e.charCodeAt(t+2)]<<6)+o[e.charCodeAt(t+3)];n.push(255&i>>16),n.push(255&i>>8),n.push(255&i),t+=4}return n&&("="==e.charAt(t-2)?(n.pop(),n.pop()):"="==e.charAt(t-1)&&n.pop()),n},l={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}},f.decodeArray=function(e){var t=u(e);return new Uint8Array(t)},f.encodeASCII=function(e){var t=l.encode(e);return i(t)},f.decodeASCII=function(e){var t=u(e);return l.decode(t)},f.encode=function(e){var t=d(e);return i(t)},f.decode=function(e){var t=u(e);return c(t)},t.decode=f.decode,t.decodeArray=f.decodeArray,t.encode=f.encode,t.encodeASCII=f.encodeASCII},"./externals/cea608-parser.js":function(e,t,n){!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r=15,i=32,a={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},s={17:2,18:4,21:6,22:8,23:10,19:13,20:15},o={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},l=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],d={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},c=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},f=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};f.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var h=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new f(t,n,r,i,a)};h.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var p=function(){this.chars=[];for(var e=0;e<i;e++)this.chars.push(new h);this.pos=0,this.currPenState=new f};p.prototype={equals:function(e){for(var t=!0,n=0;n<i;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<i;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<i;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(d.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>i&&(d.log("ERROR","Too large cursor position "+this.pos),this.pos=i)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);this.pos>=i?d.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<i;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<i;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var m=function(){this.rows=[];for(var e=0;e<r;e++)this.rows.push(new p);this.currRow=14,this.nrRollUpRows=null,this.reset()};m.prototype={reset:function(){for(var e=0;e<r;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<r;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<r;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<r;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){d.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){d.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){d.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){d.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),d.log("INFO","Rolling up")}else d.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",i=-1,a=0;a<r;a++){var s=this.rows[a].getTextString();s&&(i=a+1,e?t.push("Row "+i+': "'+s+'"'):t.push(s.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var g=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new m,this.nonDisplayedMemory=new m,this.lastOutputScreen=new m,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};g.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,d.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";d.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(d.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){d.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){d.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){d.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){d.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){d.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){d.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){d.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){d.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){d.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){d.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){d.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(d.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,d.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){d.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}d.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=d.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var y=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new g(1,t),new g(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};y.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,d.setTime(e);for(var s=0;s<t.length;s+=2)r=127&t[s],i=127&t[s+1],r>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB?(this.lastCmdA=null,this.lastCmdB=null,d.log("DEBUG","Repeated command ("+c([r,i])+") is dropped")):0!==r||0!==i?(d.log("DATA","["+c([t[s],t[s+1]])+"] -> ("+c([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),n||(a=this.parseChars(r,i))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(a):d.log("WARNING","No channel found yet. TEXT-MODE?")),n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,d.log("WARNING","Couldn't parse cleaned data "+c([r,i])+" orig: "+c([t[s],t[s+1]])))):this.dataCounters.padding+=2},parseCmd:function(e,t){var n;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47||(23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return d.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),d.log("DEBUG","MIDROW ("+c([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,r;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127||(16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,r=64<=t&&t<=95?1===n?a[e]:o[e]:1===n?s[e]:u[e];var i=this.interpretPAC(r,t);return this.channels[n-1].setPAC(i),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var s;s=17===a?t+80:18===a?t+112:t+144,d.log("INFO","Special char '"+n(s)+"' in channel "+r),i=[s],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var o=c(i);d.log("DEBUG","Char codes =  "+o.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,r,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=l[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}},e.logger=d,e.PenState=f,e.CaptionScreen=m,e.Cea608Parser=y,e.findCea608Nalus=function(e,t,n){for(var r=0,i=t,a=[],s=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),s=n.getUint32(r+3),o=n.getUint8(r+7);return 181==i&&49==a&&1195456820==s&&3==o};i<t+n;){if(r=e.getUint32(i),6==(31&e.getUint8(i+4)))for(var o=i+5,u=-1;o<i+4+r-1;){u=0;for(var l=255;255===l;)u+=l=e.getUint8(o),o++;var d=0;for(l=255;255===l;)d+=l=e.getUint8(o),o++;s(u,d,e,o)&&a.push([o,d]),o+=d}i+=r+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var s=e.getUint8(n),o=4&s,u=3&s;n++;var l=e.getUint8(n);n++;var d=e.getUint8(n);n++,o&&(127&l)+(127&d)!=0&&(0===u?(r[0].push(l),r[0].push(d)):1===u&&(r[1].push(l),r[1].push(d)))}return r}}(t)},"./externals/xml2json.js":function(e,t,n){n.r(t),t.default=function(e){void 0===(e=e||{}).escapeMode&&(e.escapeMode=!0),void 0===e.attributePrefix&&(e.attributePrefix="_"),e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1),void 0===e.ignoreRoot&&(e.ignoreRoot=!1);function t(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function n(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function r(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function i(t,n,i){"property"===e.arrayAccessForm&&(t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]),!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&r(e.arrayAccessFormPaths,t,n,i)&&(t[n]=[t[n]])}function a(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function s(t,n,i,a){return!(1==n&&e.xmlElementsFilter.length>0)||r(e.xmlElementsFilter,t,i,a)}function o(n,u){if(9==n.nodeType){for(var l=new Object,d=n.childNodes,c=0;c<d.length;c++)1==(h=d[c]).nodeType&&(e.ignoreRoot?l=o(h):(l={})[p=t(h)]=o(h));return l}if(1==n.nodeType){(l=new Object).__cnt=0;var f=[];for(d=n.childNodes,c=0;c<d.length;c++){var h,p=t(h=d[c]);if(8!=h.nodeType){var m=u+"."+p;if(s(l,h.nodeType,p,m))if(l.__cnt++,null==l[p]){var g=o(h,m);("#text"!=p||/[^\s]/.test(g))&&((y={})[p]=g,f.push(y)),l[p]=g,i(l,p,m)}else{var y;null!=l[p]&&(l[p]instanceof Array||(l[p]=[l[p]],i(l,p,m))),g=o(h,m),("#text"!=p||/[^\s]/.test(g))&&((y={})[p]=g,f.push(y)),l[p][l[p].length]=g}}}l.__children=f;for(var v=t(n),_=0;_<n.attributes.length;_++){var T=n.attributes[_];l.__cnt++;for(var b=T.value,E=0,S=e.matchers.length;E<S;E++){var w=e.matchers[E];w.test(T,v)&&(b=w.converter(T.value))}l[e.attributePrefix+T.name]=b}var C=function(e){return e.prefix}(n);return null!=C&&""!=C&&(l.__cnt++,l.__prefix=C),null!=l["#text"]&&(l.__text=l["#text"],l.__text instanceof Array&&(l.__text=l.__text.join("\n")),e.stripWhitespaces&&(l.__text=l.__text.trim()),delete l["#text"],"property"==e.arrayAccessForm&&delete l["#text_asArray"],l.__text=function(t,n,i){if(e.datetimeAccessFormPaths.length>0){var s=i.split(".#")[0];return r(e.datetimeAccessFormPaths,t,n,s)?a(t):t}return t}(l.__text,p,u+"."+p)),null!=l["#cdata-section"]&&(l.__cdata=l["#cdata-section"],delete l["#cdata-section"],"property"==e.arrayAccessForm&&delete l["#cdata-section_asArray"]),0==l.__cnt&&"text"==e.emptyNodeForm?l="":1==l.__cnt&&null!=l.__text?l=l.__text:1!=l.__cnt||null==l.__cdata||e.keepCData?l.__cnt>1&&null!=l.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==l.__text||""==l.__text.trim())&&delete l.__text:l=l.__cdata,delete l.__cnt,!e.enableToStringFunc||null==l.__text&&null==l.__cdata||(l.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),l}if(3==n.nodeType||4==n.nodeType)return n.nodeValue}function u(t,r,i,a){var s="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+r;if(null!=i)for(var o=0;o<i.length;o++){var u=i[o],l=t[u];e.escapeMode&&(l=n(l)),s+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?s+='"'+l+'"':s+="'"+l+"'"}return s+(a?"/>":">")}function l(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function d(t,n){return"property"==e.arrayAccessForm&&(i="_asArray",-1!==(r=n.toString()).indexOf(i,r.length-i.length))||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var r,i}function c(e){var t=0;if(e instanceof Object)for(var n in e)d(e,n)||t++;return t}function f(t,n,i){return 0==e.jsonPropertiesFilter.length||""==i||r(e.jsonPropertiesFilter,t,n,i)}function h(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function p(t){var r="";return t instanceof Object?r+=function(t){var r="";return null!=t.__cdata&&(r+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?r+=n(t.__text):r+=t.__text),r}(t):null!=t&&(e.escapeMode?r+=n(t):r+=t),r}function m(e,t){return""===e?t:e+"."+t}function g(e,t,n,r){var i="";if(0==e.length)i+=u(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=u(e[a],t,h(e[a]),!1),i+=y(e[a],m(r,t)),i+=l(e[a],t);return i}function y(e,t){var n="";if(c(e)>0)for(var r in e)if(!d(e,r)&&(""==t||f(e,r,m(t,r)))){var i=e[r],a=h(i);null==i||null==i?n+=u(i,r,a,!0):i instanceof Object?i instanceof Array?n+=g(i,r,a,t):i instanceof Date?(n+=u(i,r,a,!1),n+=i.toISOString(),n+=l(i,r)):c(i)>0||null!=i.__text||null!=i.__cdata?(n+=u(i,r,a,!1),n+=y(i,m(t,r)),n+=l(i,r)):n+=u(i,r,a,!0):(n+=u(i,r,a,!1),n+=p(i),n+=l(i,r))}return n+p(e)}this.parseXmlString=function(e){var t;if(window.ActiveXObject||window,void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?a(e):e},this.xml2json=function(e){return o(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return y(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}},"./index.js":function(e,t,n){n.r(t);var r=n("./index_mediaplayerOnly.js");n.d(t,"MediaPlayer",(function(){return r.MediaPlayer}));var i=n("./src/streaming/utils/Capabilities.js");n.d(t,"supportsMediaSource",(function(){return i.supportsMediaSource}));var a=n("./src/streaming/metrics/MetricsReporting.js");n.d(t,"MetricsReporting",(function(){return a.default}));var s=n("./src/streaming/protection/Protection.js");n.d(t,"Protection",(function(){return s.default}));var o=n("./src/streaming/MediaPlayerFactory.js");n.d(t,"MediaPlayerFactory",(function(){return o.default}));var u=n("./src/core/Debug.js");n.d(t,"Debug",(function(){return u.default})),dashjs.Protection=s.default,dashjs.MetricsReporting=a.default,dashjs.MediaPlayerFactory=o.default,dashjs.Debug=u.default,dashjs.supportsMediaSource=i.supportsMediaSource,t.default=dashjs},"./index_mediaplayerOnly.js":function(e,t,n){n.r(t),function(e){var r=n("./src/streaming/MediaPlayer.js");n.d(t,"MediaPlayer",(function(){return r.default}));var i=n("./src/core/FactoryMaker.js");n.d(t,"FactoryMaker",(function(){return i.default}));var a=n("./src/core/Debug.js");n.d(t,"Debug",(function(){return a.default}));var s=n("./src/core/Version.js"),o=(n("./node_modules/es6-promise/auto.js"),"undefined"!=typeof window&&window||e),u=o.dashjs;u||(u=o.dashjs={}),u.MediaPlayer=r.default,u.FactoryMaker=i.default,u.Debug=a.default,u.Version=Object(s.getVersionString)(),t.default=u}.call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(e,t,n){t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){for(var t,n=l(e),r=n[0],s=n[1],o=new a(function(e,t,n){return 3*(t+n)/4-n}(0,r,s)),u=0,d=s>0?r-4:r,c=0;c<d;c+=4)t=i[e.charCodeAt(c)]<<18|i[e.charCodeAt(c+1)]<<12|i[e.charCodeAt(c+2)]<<6|i[e.charCodeAt(c+3)],o[u++]=t>>16&255,o[u++]=t>>8&255,o[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(c)]<<2|i[e.charCodeAt(c+1)]>>4,o[u++]=255&t),1===s&&(t=i[e.charCodeAt(c)]<<10|i[e.charCodeAt(c+1)]<<4|i[e.charCodeAt(c+2)]>>2,o[u++]=t>>8&255,o[u++]=255&t),o},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],s=16383,o=0,u=n-i;o<u;o+=s)a.push(d(e,o,o+s>u?u:o+s));return 1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)r[o]=s[o],i[s.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function d(e,t,n){for(var i,a,s=[],o=t;o<n;o+=3)i=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(e,t,n){var r={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){var r=a.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new r.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},a.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},a.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},a.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},a.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(a.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},a.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},a.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},a.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},a.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},a.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/es6-promise/auto.js":function(e,t,n){e.exports=n("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(e,t,n){(function(t,n){var r;r=function(){function e(e){return"function"==typeof e}var r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=0,a=void 0,s=void 0,o=function(e,t){p[i]=e,p[i+1]=t,2===(i+=2)&&(s?s(m):T())},u="undefined"!=typeof window?window:void 0,l=u||{},d=l.MutationObserver||l.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var e=setTimeout;return function(){return e(m,1)}}var p=new Array(1e3);function m(){for(var e=0;e<i;e+=2)(0,p[e])(p[e+1]),p[e]=void 0,p[e+1]=void 0;i=0}var g,y,v,_,T=void 0;function b(e,t){var n=this,r=new this.constructor(w);void 0===r[S]&&N(r);var i=n._state;if(i){var a=arguments[i-1];o((function(){return M(i,r,a,n._result)}))}else D(n,r,e,t);return r}function E(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(w);return I(t,e),t}c?T=function(){return t.nextTick(m)}:d?(y=0,v=new d(m),_=document.createTextNode(""),v.observe(_,{characterData:!0}),T=function(){_.data=y=++y%2}):f?((g=new MessageChannel).port1.onmessage=m,T=function(){return g.port2.postMessage(0)}):T=void 0===u?function(){try{var e=Function("return this")().require("vertx");return void 0!==(a=e.runOnLoop||e.runOnContext)?function(){a(m)}:h()}catch(e){return h()}}():h();var S=Math.random().toString(36).substring(2);function w(){}var C=void 0;function A(t,n,r){n.constructor===t.constructor&&r===b&&n.constructor.resolve===E?function(e,t){1===t._state?R(e,t._result):2===t._state?P(e,t._result):D(t,void 0,(function(t){return I(e,t)}),(function(t){return P(e,t)}))}(t,n):void 0===r?R(t,n):e(r)?function(e,t,n){o((function(e){var r=!1,i=function(n,i,a,s){try{n.call(i,(function(n){r||(r=!0,t!==n?I(e,n):R(e,n))}),(function(t){r||(r=!0,P(e,t))}))}catch(e){return e}}(n,t,0,0,e._label);!r&&i&&(r=!0,P(e,i))}),e)}(t,n,r):R(t,n)}function I(e,t){if(e===t)P(e,new TypeError("You cannot resolve a promise with itself"));else if(i=typeof(r=t),null===r||"object"!==i&&"function"!==i)R(e,t);else{var n=void 0;try{n=t.then}catch(t){return void P(e,t)}A(e,t,n)}var r,i}function k(e){e._onerror&&e._onerror(e._result),O(e)}function R(e,t){e._state===C&&(e._result=t,e._state=1,0!==e._subscribers.length&&o(O,e))}function P(e,t){e._state===C&&(e._state=2,e._result=t,o(k,e))}function D(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+1]=n,i[a+2]=r,0===a&&e._state&&o(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,s=0;s<t.length;s+=3)r=t[s],i=t[s+n],r?M(n,r,i,a):i(a);e._subscribers.length=0}}function M(t,n,r,i){var a=e(r),s=void 0,o=void 0,u=!0;if(a){try{s=r(i)}catch(e){u=!1,o=e}if(n===s)return void P(n,new TypeError("A promises callback cannot return that same promise."))}else s=i;n._state!==C||(a&&u?I(n,s):!1===u?P(n,o):1===t?R(n,s):2===t&&P(n,s))}var L=0;function N(e){e[S]=L++,e._state=void 0,e._result=void 0,e._subscribers=[]}var x=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(w),this.promise[S]||N(this.promise),r(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&R(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===C&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===E){var i=void 0,a=void 0,s=!1;try{i=e.then}catch(e){s=!0,a=e}if(i===b&&e._state!==C)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===F){var o=new n(w);s?P(o,a):A(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n((function(t){return t(e)})),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===C&&(this._remaining--,2===e?P(r,n):this._result[t]=n),0===this._remaining&&R(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;D(e,void 0,(function(e){return n._settledAt(1,t,e)}),(function(e){return n._settledAt(2,t,e)}))},e}(),F=function(){function t(e){this[S]=L++,this._result=this._state=void 0,this._subscribers=[],w!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){I(e,t)}),(function(t){P(e,t)}))}catch(t){P(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this,r=n.constructor;return e(t)?n.then((function(e){return r.resolve(t()).then((function(){return e}))}),(function(e){return r.resolve(t()).then((function(){throw e}))})):n.then(t,t)},t}();return F.prototype.then=b,F.all=function(e){return new x(this,e).promise},F.race=function(e){var t=this;return r(e)?new t((function(n,r){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,r)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},F.resolve=E,F.reject=function(e){var t=new this(w);return P(t,e),t},F._setScheduler=function(e){s=e},F._setAsap=function(e){o=e},F._asap=o,F.polyfill=function(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=F},F.Promise=F,F},e.exports=r()}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/webpack/buildin/global.js"))},"./node_modules/fast-deep-equal/index.js":function(e,t,n){var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var s,o,u,l=r(t),d=r(n);if(l&&d){if((o=t.length)!=n.length)return!1;for(s=o;0!=s--;)if(!e(t[s],n[s]))return!1;return!0}if(l!=d)return!1;var c=t instanceof Date,f=n instanceof Date;if(c!=f)return!1;if(c&&f)return t.getTime()==n.getTime();var h=t instanceof RegExp,p=n instanceof RegExp;if(h!=p)return!1;if(h&&p)return t.toString()==n.toString();var m=i(t);if((o=m.length)!==i(n).length)return!1;for(s=o;0!=s--;)if(!a.call(n,m[s]))return!1;for(s=o;0!=s--;)if(!e(t[u=m[s]],n[u]))return!1;return!0}return t!=t&&n!=n}},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,r,i){var a,s,o=8*i-r-1,u=(1<<o)-1,l=u>>1,d=-7,c=n?i-1:0,f=n?-1:1,h=e[t+c];for(c+=f,a=h&(1<<-d)-1,h>>=-d,d+=o;d>0;a=256*a+e[t+c],c+=f,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=r;d>0;s=256*s+e[t+c],c+=f,d-=8);if(0===a)a=1-l;else{if(a===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,r),a-=l}return(h?-1:1)*s*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var s,o,u,l=8*a-i-1,d=(1<<l)-1,c=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),(t+=s+c>=1?f/u:f*Math.pow(2,1-c))*u>=2&&(s++,u/=2),s+c>=d?(o=0,s=d):s+c>=1?(o=(t*u-1)*Math.pow(2,i),s+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),s=0));i>=8;e[n+h]=255&o,h+=p,o/=256,i-=8);for(s=s<<i|o,l+=i;l>0;e[n+h]=255&s,h+=p,s/=256,l-=8);e[n+h-p]|=128*m}},"./node_modules/imsc/src/main/js/doc.js":function(e,t,n){!function(e,t,n,r,i){function a(e,t,n,r){var i=r&&"seq"===r.timeContainer,s=0;r&&(s=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+s:s;var o=t.begin,u=null;for(var l in t.sets)a(e,t.sets[l],u,t),o="seq"===t.timeContainer?t.sets[l].end:Math.max(o,t.sets[l].end),u=t.sets[l];if("contents"in t)for(var d in t.contents)a(e,t.contents[d],u,t),o="seq"===t.timeContainer?t.contents[d].end:Math.max(o,t.contents[d].end),u=t.contents[d];else o=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,s+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=s+t.explicit_end:t.end=o,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function s(e){this.node=e}function o(){this.events=[],this.head=null,this.body=null}function u(){this.styling=null,this.layout=null}function l(){this.styles={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function c(){this.regions={}}function f(e){this.kind=e}function h(e){this.id=e}function p(e){this.regionID=e}function m(e){this.styleAttrs=e}function g(e){this.sets=e}function y(e){this.contents=e}function v(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function _(){f.call(this,"body")}function T(){f.call(this,"div")}function b(){f.call(this,"p")}function E(){f.call(this,"span")}function S(){f.call(this,"span")}function w(){f.call(this,"br")}function C(){}function A(){}function I(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function k(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function R(e,t){var n={};if(null!==e)for(var i in e.attributes){var a=e.attributes[i].uri+" "+e.attributes[i].local,s=r.byQName[a];if(void 0!==s){var o=s.parse(e.attributes[i].value);null!==o?(n[a]=o,s===r.byName.zIndex&&N(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):x(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[i].value)}}return n}function P(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function D(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function O(e,t,n){for(;t.styleRefs.length>0;){var r=t.styleRefs.pop();r in e.styles?(O(e,e.styles[r],n),L(e.styles[r].styleAttrs,t.styleAttrs)):x(n,"Non-existant style id referenced")}}function M(e,t,n,r){for(var i=t.length-1;i>=0;i--){var a=t[i];a in e.styles?L(e.styles[a].styleAttrs,n):x(r,"Non-existant style id referenced")}}function L(e,t){for(var n in e)n in t||(t[n]=e[n])}function N(e,t){if(e&&e.warn&&e.warn(t))throw t}function x(e,t){if(e&&e.error&&e.error(t))throw t}function F(e,t){throw e&&e.fatal&&e.fatal(t),t}function U(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(a>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,r,i){var f=t.parser(!0,{xmlns:!0}),h=[],p=[],m=[],g=0,y=null;f.onclosetag=function(e){if(h[0]instanceof l)for(var t in h[0].styles)O(h[0],h[0].styles[t],r);else if(h[0]instanceof b||h[0]instanceof E){if(h[0].contents.length>1){var a,o=[h[0].contents[0]];for(a=1;a<h[0].contents.length;a++)h[0].contents[a]instanceof S&&o[o.length-1]instanceof S?o[o.length-1].text+=h[0].contents[a].text:o.push(h[0].contents[a]);h[0].contents=o}h[0]instanceof E&&1===h[0].contents.length&&h[0].contents[0]instanceof S&&(h[0].text=h[0].contents[0].text,delete h[0].contents)}else h[0]instanceof s&&(h[0].node.uri===n.ns_tt&&"metadata"===h[0].node.local?g--:g>0&&i&&"onCloseTag"in i&&i.onCloseTag());m.shift(),p.shift(),h.shift()},f.ontext=function(e){if(void 0===h[0]);else if(h[0]instanceof E||h[0]instanceof b){var t=new S;t.initFromText(y,h[0],e,m[0],r),h[0].contents.push(t)}else h[0]instanceof s&&g>0&&i&&"onText"in i&&i.onText(e)},f.onopentag=function(e){var t=e.attributes["xml:space"];t?m.unshift(t.value):0===m.length?m.unshift("default"):m.unshift(m[0]);var a=e.attributes["xml:lang"];if(a?p.unshift(a.value):0===p.length?p.unshift(""):p.unshift(p[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==y&&F(r,"Two <tt> elements at ("+this.line+","+this.column+")"),(y=new o).initFromNode(e,r),h.unshift(y);else if("head"===e.local)h[0]instanceof o||F(r,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),null!==y.head&&F("Second <head> element at ("+this.line+","+this.column+")"),y.head=new u,h.unshift(y.head);else if("styling"===e.local)h[0]instanceof u||F(r,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),null!==y.head.styling&&F("Second <styling> element at ("+this.line+","+this.column+")"),y.head.styling=new l,h.unshift(y.head.styling);else if("style"===e.local){var f;h[0]instanceof l?((f=new d).initFromNode(e,r),f.id?y.head.styling.styles[f.id]=f:x(r,"<style> element missing @id attribute"),h.unshift(f)):h[0]instanceof C?((f=new d).initFromNode(e,r),L(f.styleAttrs,h[0].styleAttrs),h.unshift(f)):F(r,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("layout"===e.local)h[0]instanceof u||F(r,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),null!==y.head.layout&&F(r,"Second <layout> element at "+this.line+","+this.column+")"),y.head.layout=new c,h.unshift(y.head.layout);else if("region"===e.local){h[0]instanceof c||F(r,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var v=new C;v.initFromNode(y,e,r),!v.id||v.id in y.head.layout.regions?x(r,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):y.head.layout.regions[v.id]=v,h.unshift(v)}else if("body"===e.local){h[0]instanceof o||F(r,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==y.body&&F(r,"Second <body> element at "+this.line+","+this.column+")");var S=new _;S.initFromNode(y,e,r),y.body=S,h.unshift(S)}else if("div"===e.local){h[0]instanceof T||h[0]instanceof _||F(r,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var I=new T;I.initFromNode(y,h[0],e,r),h[0].contents.push(I),h.unshift(I)}else if("p"===e.local){h[0]instanceof T||F(r,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var k=new b;k.initFromNode(y,h[0],e,r),h[0].contents.push(k),h.unshift(k)}else if("span"===e.local){h[0]instanceof E||h[0]instanceof b||F(r,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var R=new E;R.initFromNode(y,h[0],e,m[0],r),h[0].contents.push(R),h.unshift(R)}else if("br"===e.local){h[0]instanceof E||h[0]instanceof b||F(r,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var P=new w;P.initFromNode(y,h[0],e,r),h[0].contents.push(P),h.unshift(P)}else if("set"===e.local){h[0]instanceof E||h[0]instanceof b||h[0]instanceof T||h[0]instanceof _||h[0]instanceof C||h[0]instanceof w||F(r,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var D=new A;D.initFromNode(y,h[0],e,r),h[0].sets.push(D),h.unshift(D)}else h.unshift(new s(e));else h.unshift(new s(e));if(h[0]instanceof s)if(e.uri===n.ns_tt&&"metadata"===e.local)g++;else if(g>0&&i&&"onOpenTag"in i){var O=[];for(var M in e.attributes)O[e.attributes[M].uri+" "+e.attributes[M].local]={uri:e.attributes[M].uri,local:e.attributes[M].local,value:e.attributes[M].value};i.onOpenTag(e.uri,e.local,O)}},f.write(e).close(),null!==y.head?delete y.head.styling:y.head=new u,null===y.head.layout&&(y.head.layout=new c);var v=!1;for(var I in y.head.layout.regions){v=!0;break}if(!v){var k=C.prototype.createDefaultRegion();y.head.layout.regions[k.id]=k}for(var R in y.head.layout.regions)a(y,y.head.layout.regions[R],null,null);return y.body&&a(y,y.body,null,null),y},o.prototype.initFromNode=function(e,t){this.cellResolution=function(e,t){var r=P(e,n.ns_ttp,"cellResolution"),i=15,a=32;if(null!==r){var s=/(\d+) (\d+)/.exec(r);null!==s?(a=parseInt(s[1]),i=parseInt(s[2])):N(t,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:i}}(e,t);var r=function(e,t){var r,i=P(e,n.ns_ttp,"frameRate"),a=30;null!==i&&(null!==(r=/(\d+)/.exec(i))?a=parseInt(r[1]):N(t,"Malformed frame rate attribute (using initial value instead)"));var s=P(e,n.ns_ttp,"frameRateMultiplier"),o=1;null!==s&&(null!==(r=/(\d+) (\d+)/.exec(s))?o=parseInt(r[1])/parseInt(r[2]):N(t,"Malformed frame rate multiplier attribute (using initial value instead)"));var u=o*a,l=1,d=P(e,n.ns_ttp,"tickRate");return null===d?null!==i&&(l=u):null!==(r=/(\d+)/.exec(d))?l=parseInt(r[1]):N(t,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:u,tickRate:l}}(e,t);this.effectiveFrameRate=r.effectiveFrameRate,this.tickRate=r.tickRate,this.aspectRatio=function(e,t){var r=P(e,n.ns_ittp,"aspectRatio"),i=null;if(null!==r){var a=/(\d+) (\d+)/.exec(r);if(null!==a){var s=parseInt(a[1]),o=parseInt(a[2]);0!==s&&0!==o?i=s/o:x(t,"Illegal aspectRatio values (ignoring)")}else x(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,t);var a=P(e,n.ns_ttp,"timeBase");null!==a&&"media"!==a&&F(t,"Unsupported time base");var s=function(e,t){var r=P(e,n.ns_tts,"extent");if(null===r)return null;var a=r.split(" ");if(2!==a.length)return N(t,"Malformed extent (ignoring)"),null;var s=i.parseLength(a[0]),o=i.parseLength(a[1]);return o&&s?{h:o,w:s}:(N(t,"Malformed extent values (ignoring)"),null)}(e,t);null===s?this.pxDimensions={h:480,w:640}:("px"===s.h.unit&&"px"===s.w.unit||F(t,"Extent on TT must be in px or absent"),this.pxDimensions={h:s.h.value,w:s.w.value})},o.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=U(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=U(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},o.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},o.prototype.getMediaTimeEvents=function(){return this.events},d.prototype.initFromNode=function(e,t){this.id=I(e),this.styleAttrs=R(e,t),this.styleRefs=k(e)},h.prototype.initFromNode=function(e,t,n,r){this.id=I(n)},p.prototype.initFromNode=function(e,t,n,r){this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(n)},m.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=R(n,r),null!==e.head&&null!==e.head.styling&&M(e.head.styling,k(n),this.styleAttrs,r)},g.prototype.initFromNode=function(e,t,n,r){this.sets=[]},y.prototype.initFromNode=function(e,t,n,r){this.contents=[]},v.prototype.initFromNode=function(e,t,n,r){var i=function(e,t,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=D(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&N(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var a=null;n&&"dur"in n.attributes&&null===(a=D(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&N(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var s=null;return n&&"end"in n.attributes&&null===(s=D(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&N(r,"Malformed end value (ignoring)"),{explicit_begin:i,explicit_end:s,explicit_dur:a}}(e,0,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(x(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},_.prototype.initFromNode=function(e,t,n){m.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),p.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n)},T.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r)},b.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r),g.prototype.initFromNode.call(this,e,t,n,r),p.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r)},E.prototype.initFromNode=function(e,t,n,r,i){m.prototype.initFromNode.call(this,e,t,n,i),v.prototype.initFromNode.call(this,e,t,n,i),g.prototype.initFromNode.call(this,e,t,n,i),p.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),this.space=r},S.prototype.initFromText=function(e,t,n,r,i){v.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},w.prototype.initFromNode=function(e,t,n,r){p.prototype.initFromNode.call(this,e,t,n,r),v.prototype.initFromNode.call(this,e,t,n,r)},C.prototype.createDefaultRegion=function(){var e=new C;return h.call(e,""),m.call(e,{}),g.call(e,[]),v.call(e,0,Number.POSITIVE_INFINITY,null),e},C.prototype.initFromNode=function(e,t,n){h.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),g.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&M(e.head.styling,k(t),this.styleAttrs,n)},A.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,t,n,r);var i=R(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){x(r,"More than one style specified on set");break}this.qname=a,this.value=i[a]}}}(t,"undefined"==typeof sax?n("./node_modules/sax/lib/sax.js"):sax,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(e,t,n){!function(e,t,n){function r(e,t,o){var l;if("region"===o.kind?(l=document.createElement("div")).style.position="absolute":"body"===o.kind||"div"===o.kind?l=document.createElement("div"):"p"===o.kind?l=document.createElement("p"):"span"===o.kind?l=document.createElement("span"):"br"===o.kind&&(l=document.createElement("br")),l){for(var d in l.style.margin="0",u){var c=u[d],f=o.styleAttrs[c.qname];void 0!==f&&null!==c.map&&c.map(e,l,o,f)}var h=l;if("region"===o.kind){var p=o.styleAttrs[n.byName.writingMode.qname];"lrtb"===p||"lr"===p?(e.ipd="lr",e.bpd="tb"):"rltb"===p||"rl"===p?(e.ipd="rl",e.bpd="tb"):"tblr"===p?(e.ipd="tb",e.bpd="lr"):"tbrl"!==p&&"tb"!==p||(e.ipd="tb",e.bpd="rl")}var m=o.styleAttrs[n.byName.linePadding.qname];if(m&&m>0){var g=Math.ceil(m*e.h)+"px";"tb"===e.bpd?(h.style.paddingLeft=g,h.style.paddingRight=g):(h.style.paddingTop=g,h.style.paddingBottom=g),e.lp=m}var y=o.styleAttrs[n.byName.multiRowAlign.qname];if(y&&"auto"!==y){var v=document.createElement("span");v.style.display="inline-block",v.style.textAlign=y,l.appendChild(v),h=v,e.mra=y}if(o.styleAttrs[n.byName.fillLineGap.qname]&&(e.flg=!0),"span"===o.kind&&o.text)if(e.lp||e.mra||e.flg)for(var _="",T=0;T<o.text.length;T++){_+=o.text.charAt(T);var b=o.text.charCodeAt(T);if(b<55296||b>56319||T===o.text.length){var E=document.createElement("span");E.textContent=_,l.appendChild(E),_=""}}else l.textContent=o.text;for(var S in t.appendChild(l),o.contents)r(e,h,o.contents[S]);var w=[];if((e.lp||e.mra||e.flg)&&"p"===o.kind&&(s(e,h,w,null),e.mra&&(function(e){for(var t=0;t<e.length-1;t++){var n=e[t].elements.length;if(0!==n&&!1===e[t].br){var r=document.createElement("br"),i=e[t].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(w),e.mra=null),e.lp&&(function(e,t,n){for(var r in e){var i=e[r].elements.length,a=e[r].elements[e[r].start_elem],s=e[r].elements[e[r].end_elem],o=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=o,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=o,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=o,a.node.style.marginTop=u),"lr"===n.ipd?(s.node.style.borderRightColor=s.bgcolor||"#00000000",s.node.style.borderRightStyle="solid",s.node.style.borderRightWidth=o,s.node.style.marginRight=u):"rl"===n.ipd?(s.node.style.borderLeftColor=s.bgcolor||"#00000000",s.node.style.borderLeftStyle="solid",s.node.style.borderLeftWidth=o,s.node.style.marginLeft=u):"tb"===n.ipd&&(s.node.style.borderBottomColor=s.bgcolor||"#00000000",s.node.style.borderBottomStyle="solid",s.node.style.borderBottomWidth=o,s.node.style.marginBottom=u))}}(w,e.lp*e.h,e),e.lp=null),e.flg)){var C=a(h.getBoundingClientRect(),e);!function(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var s,o,u;if(s=0===a?t:a===e.length?n:(e[a].before+e[a-1].after)/2,a>0)for(var l=0;l<e[a-1].elements.length;l++)null!==e[a-1].elements[l].bgcolor&&i*((u=e[a-1].elements[l]).after-s)<0&&(o=Math.ceil(Math.abs(s-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=o:"rl"===r.bpd?u.node.style.paddingLeft=o:"tb"===r.bpd&&(u.node.style.paddingBottom=o));if(a<e.length)for(var d=0;d<e[a].elements.length;d++)null!==(u=e[a].elements[d]).bgcolor&&i*(u.before-s)>0&&(o=Math.ceil(Math.abs(u.before-s))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=o:"rl"===r.bpd?u.node.style.paddingRight=o:"tb"===r.bpd&&(u.node.style.paddingTop=o))}}(w,C.before,C.after,e),e.flg=null}if("region"===o.kind&&(s(e,h,w),"tb"===e.bpd&&e.enableRollUp&&o.contents.length>0&&"after"===o.styleAttrs[n.byName.displayAlign.qname])){var A=new i(""===o.id?"_":o.id,w);if(e.currentISDState[A.id]=A,e.previousISDState&&A.id in e.previousISDState&&e.previousISDState[A.id].plist.length>0&&A.plist.length>1&&A.plist[A.plist.length-2].text===e.previousISDState[A.id].plist[e.previousISDState[A.id].plist.length-1].text){var I=l.firstElementChild,k=A.plist[A.plist.length-1].after-A.plist[A.plist.length-1].before;I.style.bottom="-"+k+"px",I.style.transition="transform 0.4s",I.style.position="relative",I.style.transform="translateY(-"+k+"px)"}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+o.kind)}function i(e,t){this.id=e,this.plist=t}function a(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function s(e,t,n,r){var i,o,u,l,d=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName){var c=t.getBoundingClientRect();if(0===c.height||0===c.width)return;var f=a(c,e);if(0!==n.length&&(i=f.before,o=f.after,u=n[n.length-1].before,o<(l=n[n.length-1].after)&&i>u||l<=o&&u>=i)){var h=Math.sign(f.after-f.before),p=Math.sign(f.end-f.start);h*(f.before-n[n.length-1].before)<0&&(n[n.length-1].before=f.before),h*(f.after-n[n.length-1].after)>0&&(n[n.length-1].after=f.after),p*(f.start-n[n.length-1].start)<0&&(n[n.length-1].start=f.start,n[n.length-1].start_elem=n[n.length-1].elements.length),p*(f.end-n[n.length-1].end)>0&&(n[n.length-1].end=f.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:f.before,after:f.after,start:f.start,end:f.end,start_elem:0,end_elem:0,elements:[],text:"",br:!1});n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:d,before:f.before,after:f.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var m=t.firstChild;m;)m.nodeType===Node.ELEMENT_NODE&&s(e,m,n,d),m=m.nextSibling}function o(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,i,a,s,o,u,l){var d=i||t.clientHeight,c=a||t.clientWidth;if(null!==e.aspectRatio){var f=d*e.aspectRatio;f>c?d=Math.round(c/e.aspectRatio):c=f}var h=document.createElement("div");h.style.position="relative",h.style.width=c+"px",h.style.height=d+"px",h.style.margin="auto",h.style.top=0,h.style.bottom=0,h.style.left=0,h.style.right=0,h.style.zIndex=0;var p={h:d,w:c,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:s||!1,isd:e,errorHandler:o,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null};for(var m in t.appendChild(h),e.contents)r(p,h,e.contents[m]);return p.currentISDState};var u=[new o("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new o("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new o("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,r){t.style.direction=r})),new o("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,r){})),new o("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")})),new o("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,r){e.regionH=r.h*e.h,e.regionW=r.w*e.w;var i=0,a=0,s=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];s&&(i=(s[0]+s[2])*e.h,a=(s[1]+s[3])*e.w),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px"})),new o("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",")})),new o("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,r){t.style.fontSize=r*e.h+"px"})),new o("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,r){t.style.fontStyle=r})),new o("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,r){t.style.fontWeight=r})),new o("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r*e.h+"px"})),new o("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,r){t.style.opacity=r})),new o("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,r){t.style.top=r.h*e.h+"px",t.style.left=r.w*e.w+"px"})),new o("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,r){t.style.overflow=r})),new o("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,r){var i=[];i[0]=r[0]*e.h+"px",i[1]=r[3]*e.w+"px",i[2]=r[2]*e.h+"px",i[3]=r[1]*e.w+"px",t.style.padding=i.join(" ")})),new o("http://www.w3.org/ns/ttml#styling showBackground",null),new o("http://www.w3.org/ns/ttml#styling textAlign",(function(e,t,r,i){var a,s=r.styleAttrs[n.byName.direction.qname];a="start"===i?"rtl"===s?"right":"left":"end"===i?"rtl"===s?"left":"right":i,t.style.textAlign=a})),new o("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new o("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,r){t.style.textShadow="none"===r?"":"rgba("+r.color[0].toString()+","+r.color[1].toString()+","+r.color[2].toString()+","+(r.color[3]/255).toString()+") 0px 0px "+r.thickness*e.h+"px"})),new o("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i})),new o("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,r){t.style.visibility=r})),new o("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new o("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,r){"lrtb"===r||"lr"===r||"rltb"===r||"rl"===r?t.style.writingMode="horizontal-tb":"tblr"===r?t.style.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(t.style.writingMode="vertical-rl")})),new o("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,r){t.style.zIndex=r})),new o("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt backgroundImage",(function(e,t,n,r){if(null!==e.imgResolver&&null!==r){var i=document.createElement("img"),a=e.imgResolver(r,i);a&&(i.src=a),i.height=e.regionH,i.width=e.regionW,t.appendChild(i)}})),new o("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")}))],l={};for(var d in u)l[u[d].qname]=u[d]}(t,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/isd.js":function(e,t,n){!function(e,t,n){function r(e,t,s,l,d,c,f,h,p){if(t<f.begin||t>=f.end)return null;var m="regionID"in f&&""!==f.regionID?f.regionID:c;if(null!==d&&m!==s.id&&(!("contents"in f)||"contents"in f&&0===f.contents.length||""!==m))return null;var g=new o(f);for(var y in f.sets)t<f.sets[y].begin||t>=f.sets[y].end||(g.styleAttrs[f.sets[y].qname]=f.sets[y].value);var v,_={};for(var T in g.styleAttrs)if(_[T]=!0,T===n.byName.writingMode.qname&&!(n.byName.direction.qname in g.styleAttrs)){var b=g.styleAttrs[T];"lrtb"===b||"lr"===b?g.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==b&&"rl"!==b||(g.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==d)for(var E in n.all){var S=n.all[E];if(S.qname===n.byName.textDecoration.qname){var w=d.styleAttrs[S.qname],C=g.styleAttrs[S.qname],A=[];void 0===C?A=w:-1===C.indexOf("none")?((-1===C.indexOf("noUnderline")&&-1!==w.indexOf("underline")||-1!==C.indexOf("underline"))&&A.push("underline"),(-1===C.indexOf("noLineThrough")&&-1!==w.indexOf("lineThrough")||-1!==C.indexOf("lineThrough"))&&A.push("lineThrough"),(-1===C.indexOf("noOverline")&&-1!==w.indexOf("overline")||-1!==C.indexOf("overline"))&&A.push("overline")):A.push("none"),g.styleAttrs[S.qname]=A}else S.inherit&&S.qname in d.styleAttrs&&!(S.qname in g.styleAttrs)&&(g.styleAttrs[S.qname]=d.styleAttrs[S.qname])}for(var I in n.all){var k=n.all[I];k.qname in g.styleAttrs||("region"===g.kind||!1===k.inherit&&null!==k.initial)&&(g.styleAttrs[k.qname]=k.parse(k.initial),_[k.qname]=!0)}for(var R in n.all){var P=n.all[R];if(P.qname in _&&null!==P.compute){var D=P.compute(e,d,g,g.styleAttrs[P.qname],p);null!==D?g.styleAttrs[P.qname]=D:u(h,"Style '"+P.qname+"' on element '"+g.kind+"' cannot be computed")}}if("none"===g.styleAttrs[n.byName.display.qname])return null;for(var O in null===d?v=null===l?[]:[l]:"contents"in f&&(v=f.contents),v){var M=r(e,t,s,l,g,m,v[O],h,p);null!==M&&g.contents.push(M.element)}for(var L in g.styleAttrs)-1===n.byQName[L].applies.indexOf(g.kind)&&delete g.styleAttrs[L];if("span"===g.kind&&g.text&&"default"===g.space){var N=g.text.replace(/\s+/g," ");g.text=N}if("p"===g.kind){var x=[];i(g,x);for(var F=0,U="after_br",j=0;;)if("after_br"===U)F>=x.length||"br"===x[F].kind?(U="before_br",j=F,F--):("preserve"!==x[F].space&&(x[F].text=x[F].text.replace(/^\s+/g,"")),x[F].text.length>0?(U="looking_br",F++):x.splice(F,1));else if("before_br"===U)if(F<0||"br"===x[F].kind){if(U="after_br",(F=j+1)>=x.length)break}else if("preserve"!==x[F].space&&(x[F].text=x[F].text.replace(/\s+$/g,"")),x[F].text.length>0){if(U="after_br",(F=j+1)>=x.length)break}else x.splice(F,1),F--;else F>=x.length||"br"===x[F].kind?(U="before_br",j=F,F--):F++;a(g)}return"div"===g.kind&&n.byName.backgroundImage.qname in g.styleAttrs||"br"===g.kind||"contents"in g&&g.contents.length>0||"span"===g.kind&&null!==g.text||"region"===g.kind&&"always"===g.styleAttrs[n.byName.showBackground.qname]?{region_id:m,element:g}:null}function i(e,t){if("contents"in e)for(var n in e.contents)i(e.contents[n],t);else t.push(e)}function a(e){if("br"===e.kind)return!1;if("text"in e)return 0===e.text.length;if("contents"in e){for(var t=e.contents.length;t--;)a(e.contents[t])&&e.contents.splice(t,1);return 0===e.contents.length}}function s(e){this.contents=[],this.aspectRatio=e.aspectRatio}function o(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"text"in e?this.text=e.text:"br"!==e.kind&&(this.contents=[]),"space"in e&&(this.space=e.space)}function u(e,t){if(e&&e.error&&e.error(t))throw t}e.generateISD=function(e,t,n){var i=new s(e),a={};for(var o in e.head.layout.regions){var u=r(e,t,e.head.layout.regions[o],e.body,null,"",e.head.layout.regions[o],n,a);null!==u&&i.contents.push(u.element)}return i}}(t,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscStyles?n("./node_modules/imsc/src/main/js/styles.js"):imscStyles)},"./node_modules/imsc/src/main/js/main.js":function(e,t,n){t.generateISD=n("./node_modules/imsc/src/main/js/isd.js").generateISD,t.fromXML=n("./node_modules/imsc/src/main/js/doc.js").fromXML,t.renderHTML=n("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(e,t,n){!function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"}(t)},"./node_modules/imsc/src/main/js/styles.js":function(e,t,n){!function(e,t,n){function r(e,t,n,r,i,a,s,o){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=s,this.compute=o}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,n,r,i){var a,s;if("auto"===r)a=1;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h}if("auto"===r)s=1;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/e.pxDimensions.w}return{h:a,w:s}})),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n}),null),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(t,n,r,i,a){var s;if("%"===i.unit)s=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value/100:i.value/100/t.cellResolution.h;else if("em"===i.unit)s=null!==n?n.styleAttrs[e.byName.fontSize.qname]*i.value:i.value/t.cellResolution.h;else if("c"===i.unit)s=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/t.pxDimensions.h}return s})),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:n.parseLength(e)}),(function(t,n,r,i,a){var s;if("normal"===i)s=i;else if("%"===i.unit)s=r.styleAttrs[e.byName.fontSize.qname]*i.value/100;else if("em"===i.unit)s=r.styleAttrs[e.byName.fontSize.qname]*i.value;else if("c"===i.unit)s=i.value/t.cellResolution.h;else{if("px"!==i.unit)return null;s=i.value/t.pxDimensions.h}return s})),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,n,r,i){var a,s;if("auto"===r)a=0;else if("%"===r.h.unit)a=r.h.value/100;else{if("px"!==r.h.unit)return null;a=r.h.value/e.pxDimensions.h}if("auto"===r)s=0;else if("%"===r.w.unit)s=r.w.value/100;else{if("px"!==r.w.unit)return null;s=r.w.value/e.pxDimensions.w}return{h:a,w:s}})),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(t.length>4)return null;var r=[];for(var i in t){var a=n.parseLength(t[i]);if(!a)return null;r.push(a)}return r}),(function(t,n,r,i,a){var s;if(1===i.length)s=[i[0],i[0],i[0],i[0]];else if(2===i.length)s=[i[0],i[1],i[0],i[1]];else if(3===i.length)s=[i[0],i[1],i[2],i[1]];else{if(4!==i.length)return null;s=[i[0],i[1],i[2],i[3]]}var o=r.styleAttrs[e.byName.writingMode.qname];if("lrtb"===o||"lr"===o)s=[s[0],s[3],s[2],s[1]];else if("rltb"===o||"rl"===o)s=[s[0],s[1],s[2],s[3]];else if("tblr"===o)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==o&&"tb"!==o)return null;s=[s[3],s[2],s[1],s[0]]}var u=[];for(var l in s)if(0===s[l].value)u[l]=0;else if("%"===s[l].unit)u[l]="0"===l||"2"===l?r.styleAttrs[e.byName.extent.qname].h*s[l].value/100:r.styleAttrs[e.byName.extent.qname].w*s[l].value/100;else if("em"===s[l].unit)u[l]=r.styleAttrs[e.byName.fontSize.qname]*s[l].value;else if("c"===s[l].unit)u[l]=s[l].value/t.cellResolution.h;else{if("px"!==s[l].unit)return null;u[l]="0"===l||"2"===l?s[l].value/t.pxDimensions.h:s[l].value/t.pxDimensions.w}return u})),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var a=n.parseLength(r[0]);return a?(t.thickness=a,t):null}),(function(t,n,r,i,a){if("none"===i)return i;var s={};if(null===i.color?s.color=r.styleAttrs[e.byName.color.qname]:s.color=i.color,"%"===i.thickness.unit)s.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value/100;else if("em"===i.thickness.unit)s.thickness=r.styleAttrs[e.byName.fontSize.qname]*i.thickness.value;else if("c"===i.thickness.unit)s.thickness=i.thickness.value/t.cellResolution.h;else{if("px"!==i.thickness.unit)return null;s.thickness=i.thickness.value/t.pxDimensions.h}return s})),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(e,t,n,r,i){return"c"===r.unit?r.value/e.cellResolution.h:null})),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var a in e.byName={},e.all)e.byName[e.all[a].name]=e.all[a]}(t,"undefined"==typeof imscNames?n("./node_modules/imsc/src/main/js/names.js"):imscNames,"undefined"==typeof imscUtils?n("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var a,s=null,o=i[e.toLowerCase()];return void 0!==o?s=o:null!==(a=t.exec(e))?s=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(e))?s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=r.exec(e))&&(s=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),s};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%)$/;e.parseLength=function(e){var t,n=null;return null!==(t=a.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n}}(t)},"./node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"./node_modules/node-libs-browser/node_modules/buffer/index.js":function(e,t,n){(function(e){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),a=n("./node_modules/isarray/index.js");function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=f(e,t),e}(e,t,n,r):"string"==typeof t?function(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=o(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|h(t.length);return 0===(e=o(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?o(e,0):f(e,t);if("Buffer"===t.type&&a(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t){if(d(t),e=o(e,t<0?0:0|h(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|h(t.length);e=o(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return B(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return R(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:v(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):v(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,n,r,i){var a,s=1,o=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,o/=2,u/=2,n/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var d=-1;for(a=n;a<o;a++)if(l(e,a)===l(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===u)return d*s}else-1!==d&&(a-=a-d),d=-1}else for(n+u>o&&(n=o-u),a=n;a>=0;a--){for(var c=!0,f=0;f<u;f++)if(l(e,a+f)!==l(t,f)){c=!1;break}if(c)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var s=0;s<r;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[n+s]=o}return s}function T(e,t,n,r){return q(B(t,e.length-n),e,n,r)}function b(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return b(e,t,n,r)}function S(e,t,n,r){return q(V(t),e,n,r)}function w(e,t,n,r){return q(function(e,t){for(var n,r,i,a=[],s=0;s<e.length&&!((t-=2)<0);++s)r=(n=e.charCodeAt(s))>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function C(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,s,o,u,l=e[i],d=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c<=n)switch(c){case 1:l<128&&(d=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(d=u);break;case 3:a=e[i+1],s=e[i+2],128==(192&a)&&128==(192&s)&&(u=(15&l)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:a=e[i+1],s=e[i+2],o=e[i+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&l)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(d=u)}null===d?(d=65533,c=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=c}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){return+e!=e&&(e=0),u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return d(t),t<=0?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return c(null,e)},u.allocUnsafeSlow=function(e){return c(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):m.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),o=Math.min(a,s),l=this.slice(r,i),d=e.slice(t,n),c=0;c<o;++c)if(l[c]!==d[c]){a=l[c],s=d[c];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return b(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function R(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function P(e,t,n){var r,i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var a="",s=t;s<n;++s)a+=(r=e[s])<16?"0"+r.toString(16):r.toString(16);return a}function D(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function x(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||x(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,a){return a||x(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||O(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=0,s=1,o=0;for(this[t]=255&e;++a<n&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=n-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=u.isBuffer(e)?e:B(new u(e,r).toString()),o=s.length;for(a=0;a<n-t;++a)this[a+t]=s[a%o]}return this};var j=/[^+\/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(j,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t,n){var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,a),r(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,a,s,o;if(l(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"==typeof s?s=a[t]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),(i=d(e))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,o=u,console&&console.warn&&console.warn(o)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=f.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):g(i,i.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(a){r.once&&e.removeEventListener(t,i),n(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var l=u.length,d=g(u,l);for(n=0;n<l;++n)a(d[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return l(t),this.on(e,h(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,h(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,a,s;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"./node_modules/node-libs-browser/node_modules/timers-browserify/main.js":function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n("./node_modules/setimmediate/setImmediate.js"),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/path-browserify/index.js":function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var s=a>=0?arguments[a]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,i="/"===s.charAt(0))}return(i?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!i).join("/"))||"."},t.normalize=function(e){var a=t.isAbsolute(e),s="/"===i(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!a).join("/"))||a||(e="."),e&&s&&(e+="/"),(a?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),a=r(n.split("/")),s=Math.min(i.length,a.length),o=s,u=0;u<s;u++)if(i[u]!==a[u]){o=u;break}var l=[];for(u=o;u<i.length;u++)l.push("..");return(l=l.concat(a.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){r=a;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!=typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,a=0,s=e.length-1;s>=0;--s){var o=e.charCodeAt(s);if(47!==o)-1===r&&(i=!1,r=s+1),46===o?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=s+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)};var i=function(e,t,n){return e.substr(t,n)}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(e,t,n){(function(t){!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,l=[],d=!1,c=-1;function f(){d&&u&&(d=!1,u.length?l=u.concat(l):c=-1,l.length&&h())}function h(){if(!d){var e=o(f);d=!0;for(var t=l.length;t;){for(u=l,l=[];++c<t;)u&&u[c].run();c=-1,t=l.length}u=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||d||o(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(e,t,n){var r=n("./node_modules/process-nextick-args/index.js"),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=c;var a=n("./node_modules/core-util-is/lib/util.js");a.inherits=n("./node_modules/inherits/inherits_browser.js");var s=n("./node_modules/readable-stream/lib/_stream_readable.js"),o=n("./node_modules/readable-stream/lib/_stream_writable.js");a.inherits(c,s);for(var u=i(o.prototype),l=0;l<u.length;l++){var d=u[l];c.prototype[d]||(c.prototype[d]=o.prototype[d])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||r.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(e,t,n){e.exports=a;var r=n("./node_modules/readable-stream/lib/_stream_transform.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(e,t,n){(function(t,r){var i=n("./node_modules/process-nextick-args/index.js");e.exports=_;var a,s=n("./node_modules/isarray/index.js");_.ReadableState=v,n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;var o=function(e,t){return e.listeners(t).length},u=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),l=n("./node_modules/safe-buffer/index.js").Buffer,d=t.Uint8Array||function(){},c=n("./node_modules/core-util-is/lib/util.js");c.inherits=n("./node_modules/inherits/inherits_browser.js");var f=n(0),h=void 0;h=f&&f.debuglog?f.debuglog("stream"):function(){};var p,m=n("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),g=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");c.inherits(_,u);var y=["error","close","destroy","pause","resume"];function v(e,t){e=e||{};var r=t instanceof(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function _(e){if(a=a||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof _))return new _(e);this._readableState=new v(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function T(e,t,n,r,i){var a,s=e._readableState;return null===t?(s.reading=!1,function(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,w(e)}}(e,s)):(i||(a=function(e,t){var n,r;return r=t,l.isBuffer(r)||r instanceof d||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):b(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?b(e,s,t,!1):A(e,s)):b(e,s,t,!1))):r||(s.reading=!1)),function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function b(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&w(e)),A(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=g.destroy,_.prototype._undestroy=g.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},_.prototype.unshift=function(e){return T(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return p||(p=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var E=8388608;function S(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=E?e=E:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function w(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(h("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(C,e):C(e))}function C(e){h("emit readable"),e.emit("readable"),P(e)}function A(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(I,e,t))}function I(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(h("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function k(e){h("readable nexttick read 0"),e.read(0)}function R(e,t){t.reading||(h("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),P(e),t.flowing&&!t.reading&&e.read(0)}function P(e){var t=e._readableState;for(h("flow",t.flowing);t.flowing&&null!==e.read(););}function D(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(s===a.length?i+=a:i+=a.slice(0,e),0==(e-=s)){s===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(s));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,s),0==(e-=s)){s===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++i}return t.length-=i,n}(e,t),r}(e,t.buffer,t.decoder),n);var n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(M,t,e))}function M(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){h("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return h("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):w(this),null;if(0===(e=S(e,t))&&t.ended)return 0===t.length&&O(this),null;var r,i=t.needReadable;return h("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&h("length less than watermark",i=!0),t.ended||t.reading?h("reading or ended",i=!1):i&&(h("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=S(n,t))),null===(r=e>0?D(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,h("pipe count=%d opts=%j",a.pipesCount,t);var u=t&&!1===t.end||e===r.stdout||e===r.stderr?v:l;function l(){h("onend"),e.end()}a.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",(function t(r,i){h("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,h("cleanup"),e.removeListener("close",g),e.removeListener("finish",y),e.removeListener("drain",d),e.removeListener("error",m),e.removeListener("unpipe",t),n.removeListener("end",l),n.removeListener("end",v),n.removeListener("data",p),c=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}));var d=function(e){return function(){var t=e._readableState;h("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,P(e))}}(n);e.on("drain",d);var c=!1,f=!1;function p(t){h("ondata"),f=!1,!1!==e.write(t)||f||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==L(a.pipes,e))&&!c&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,f=!0),n.pause())}function m(t){h("onerror",t),v(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",y),v()}function y(){h("onfinish"),e.removeListener("close",g),v()}function v(){h("unpipe"),n.unpipe(e)}return n.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?s(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",m),e.once("close",g),e.once("finish",y),e.emit("pipe",n),a.flowing||(h("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var s=L(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},_.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&w(this):i.nextTick(k,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(h("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(R,e,t))}(this,e)),this},_.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(h("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<y.length;a++)e.on(y[a],this.emit.bind(this,y[a]));return this._read=function(t){h("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=D}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(e,t,n){e.exports=s;var r=n("./node_modules/readable-stream/lib/_stream_duplex.js"),i=n("./node_modules/core-util-is/lib/util.js");function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n("./node_modules/inherits/inherits_browser.js"),i.inherits(s,r),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},"./node_modules/readable-stream/lib/_stream_writable.js":function(e,t,n){(function(t,r,i){var a=n("./node_modules/process-nextick-args/index.js");function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(undefined),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=v;var o,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;v.WritableState=y;var l=n("./node_modules/core-util-is/lib/util.js");l.inherits=n("./node_modules/inherits/inherits_browser.js");var d,c={deprecate:n("./node_modules/util-deprecate/browser.js")},f=n("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),h=n("./node_modules/safe-buffer/index.js").Buffer,p=i.Uint8Array||function(){},m=n("./node_modules/readable-stream/lib/internal/streams/destroy.js");function g(){}function y(e,t){o=o||n("./node_modules/readable-stream/lib/_stream_duplex.js"),e=e||{};var r=t instanceof o;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===e.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(w,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),w(e,t))}(e,n,r,t,i);else{var s=E(n);s||n.corked||n.bufferProcessing||!n.bufferedRequest||b(e,n),r?u(T,e,n,s,i):T(e,n,s,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(e){if(o=o||n("./node_modules/readable-stream/lib/_stream_duplex.js"),!(d.call(v,this)||this instanceof o))return new v(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),f.call(this)}function _(e,t,n,r,i,a,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),w(e,t)}function b(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var o=0,u=!0;n;)i[o]=n,n.isBuf||(u=!1),n=n.next,o+=1;i.allBuffers=u,_(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,d=n.encoding,c=n.callback;if(_(e,t,!1,t.objectMode?1:l.length,l,d,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function E(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),w(e,t)}))}function w(e,t){var n=E(t);return n&&(function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(S,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(v,f),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!d.call(this,e)||this===v&&e&&e._writableState instanceof y}})):d=function(e){return e instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(e,t,n){var r,i=this._writableState,s=!1,o=!i.objectMode&&(r=e,h.isBuffer(r)||r instanceof p);return o&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=g),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(o||function(e,t,n,r){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),a.nextTick(r,s),i=!1),i}(this,i,e,n))&&(i.pendingcb++,s=function(e,t,n,r,i,a){if(!n){var s=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n)),t}(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var o=t.objectMode?1:r.length;t.length+=o;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,o,r,i,a);return u}(this,i,o,e,t,n)),s},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||b(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=m.destroy,v.prototype._undestroy=m.undestroy,v.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("./node_modules/process/browser.js"),n("./node_modules/node-libs-browser/node_modules/timers-browserify/main.js").setImmediate,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(e,t,n){var r=n("./node_modules/safe-buffer/index.js").Buffer,i=n(1);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i=r.allocUnsafe(e>>>0),a=this.head,s=0;a;)t=i,n=s,a.data.copy(t,n),s+=a.data.length,a=a.next;return i},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(e,t,n){var r=n("./node_modules/process-nextick-args/index.js");function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(e,t,n){e.exports=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/passthrough.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(e,t,n){(t=e.exports=n("./node_modules/readable-stream/lib/_stream_readable.js")).Stream=t,t.Readable=t,t.Writable=n("./node_modules/readable-stream/lib/_stream_writable.js"),t.Duplex=n("./node_modules/readable-stream/lib/_stream_duplex.js"),t.Transform=n("./node_modules/readable-stream/lib/_stream_transform.js"),t.PassThrough=n("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(e,t,n){e.exports=n("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(e,t,n){var r=n("./node_modules/node-libs-browser/node_modules/buffer/index.js"),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function s(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=s),a(i,s),s.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},"./node_modules/sax/lib/sax.js":function(e,t,n){(function(e){!function(t){t.parser=function(e,t){return new a(e,t)},t.SAXParser=a,t.SAXStream=o,t.createStream=function(e,t){return new o(e,t)},t.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,n){if(!(this instanceof a))return new a(e,n);var r=this;!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(r),r.q=r.c="",r.bufferCheckPosition=t.MAX_BUFFER_LENGTH,r.opt=n||{},r.opt.lowercase=r.opt.lowercase||r.opt.lowercasetags,r.looseCase=r.opt.lowercase?"toLowerCase":"toUpperCase",r.tags=[],r.closed=r.closedRoot=r.sawRoot=!1,r.tag=r.error=null,r.strict=!!e,r.noscript=!(!e&&!r.opt.noscript),r.state=A.BEGIN,r.strictEntities=r.opt.strictEntities,r.ENTITIES=r.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),r.attribList=[],r.opt.xmlns&&(r.ns=Object.create(m)),r.trackPosition=!1!==r.opt.position,r.trackPosition&&(r.position=r.line=r.column=0),k(r,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),a.prototype={end:function(){M(this)},write:function(e){var n=this;if(this.error)throw this.error;if(n.closed)return O(n,"Cannot write after close. Assign an onready handler.");if(null===e)return M(n);"object"==typeof e&&(e=e.toString());for(var r=0,a="";a=q(e,r++),n.c=a,a;)switch(n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++),n.state){case A.BEGIN:if(n.state=A.BEGIN_WHITESPACE,"\ufeff"===a)continue;V(n,a);continue;case A.BEGIN_WHITESPACE:V(n,a);continue;case A.TEXT:if(n.sawRoot&&!n.closedRoot){for(var s=r-1;a&&"<"!==a&&"&"!==a;)(a=q(e,r++))&&n.trackPosition&&(n.position++,"\n"===a?(n.line++,n.column=0):n.column++);n.textNode+=e.substring(s,r-1)}"<"!==a||n.sawRoot&&n.closedRoot&&!n.strict?(!E(u,a)||n.sawRoot&&!n.closedRoot||L(n,"Text data outside of root node."),"&"===a?n.state=A.TEXT_ENTITY:n.textNode+=a):(n.state=A.OPEN_WAKA,n.startTagPosition=n.position);continue;case A.SCRIPT:"<"===a?n.state=A.SCRIPT_ENDING:n.script+=a;continue;case A.SCRIPT_ENDING:"/"===a?n.state=A.CLOSE_TAG:(n.script+="<"+a,n.state=A.SCRIPT);continue;case A.OPEN_WAKA:if("!"===a)n.state=A.SGML_DECL,n.sgmlDecl="";else if(b(u,a));else if(b(g,a))n.state=A.OPEN_TAG,n.tagName=a;else if("/"===a)n.state=A.CLOSE_TAG,n.tagName="";else if("?"===a)n.state=A.PROC_INST,n.procInstName=n.procInstBody="";else{if(L(n,"Unencoded <"),n.startTagPosition+1<n.position){var o=n.position-n.startTagPosition;a=new Array(o).join(" ")+a}n.textNode+="<"+a,n.state=A.TEXT}continue;case A.SGML_DECL:"[CDATA["===(n.sgmlDecl+a).toUpperCase()?(R(n,"onopencdata"),n.state=A.CDATA,n.sgmlDecl="",n.cdata=""):n.sgmlDecl+a==="--"?(n.state=A.COMMENT,n.comment="",n.sgmlDecl=""):"DOCTYPE"===(n.sgmlDecl+a).toUpperCase()?(n.state=A.DOCTYPE,(n.doctype||n.sawRoot)&&L(n,"Inappropriately located doctype declaration"),n.doctype="",n.sgmlDecl=""):">"===a?(R(n,"onsgmldeclaration",n.sgmlDecl),n.sgmlDecl="",n.state=A.TEXT):b(c,a)?(n.state=A.SGML_DECL_QUOTED,n.sgmlDecl+=a):n.sgmlDecl+=a;continue;case A.SGML_DECL_QUOTED:a===n.q&&(n.state=A.SGML_DECL,n.q=""),n.sgmlDecl+=a;continue;case A.DOCTYPE:">"===a?(n.state=A.TEXT,R(n,"ondoctype",n.doctype),n.doctype=!0):(n.doctype+=a,"["===a?n.state=A.DOCTYPE_DTD:b(c,a)&&(n.state=A.DOCTYPE_QUOTED,n.q=a));continue;case A.DOCTYPE_QUOTED:n.doctype+=a,a===n.q&&(n.q="",n.state=A.DOCTYPE);continue;case A.DOCTYPE_DTD:n.doctype+=a,"]"===a?n.state=A.DOCTYPE:b(c,a)&&(n.state=A.DOCTYPE_DTD_QUOTED,n.q=a);continue;case A.DOCTYPE_DTD_QUOTED:n.doctype+=a,a===n.q&&(n.state=A.DOCTYPE_DTD,n.q="");continue;case A.COMMENT:"-"===a?n.state=A.COMMENT_ENDING:n.comment+=a;continue;case A.COMMENT_ENDING:"-"===a?(n.state=A.COMMENT_ENDED,n.comment=D(n.opt,n.comment),n.comment&&R(n,"oncomment",n.comment),n.comment=""):(n.comment+="-"+a,n.state=A.COMMENT);continue;case A.COMMENT_ENDED:">"!==a?(L(n,"Malformed comment"),n.comment+="--"+a,n.state=A.COMMENT):n.state=A.TEXT;continue;case A.CDATA:"]"===a?n.state=A.CDATA_ENDING:n.cdata+=a;continue;case A.CDATA_ENDING:"]"===a?n.state=A.CDATA_ENDING_2:(n.cdata+="]"+a,n.state=A.CDATA);continue;case A.CDATA_ENDING_2:">"===a?(n.cdata&&R(n,"oncdata",n.cdata),R(n,"onclosecdata"),n.cdata="",n.state=A.TEXT):"]"===a?n.cdata+="]":(n.cdata+="]]"+a,n.state=A.CDATA);continue;case A.PROC_INST:"?"===a?n.state=A.PROC_INST_ENDING:b(u,a)?n.state=A.PROC_INST_BODY:n.procInstName+=a;continue;case A.PROC_INST_BODY:if(!n.procInstBody&&b(u,a))continue;"?"===a?n.state=A.PROC_INST_ENDING:n.procInstBody+=a;continue;case A.PROC_INST_ENDING:">"===a?(R(n,"onprocessinginstruction",{name:n.procInstName,body:n.procInstBody}),n.procInstName=n.procInstBody="",n.state=A.TEXT):(n.procInstBody+="?"+a,n.state=A.PROC_INST_BODY);continue;case A.OPEN_TAG:b(y,a)?n.tagName+=a:(N(n),">"===a?U(n):"/"===a?n.state=A.OPEN_TAG_SLASH:(E(u,a)&&L(n,"Invalid character in tag name"),n.state=A.ATTRIB));continue;case A.OPEN_TAG_SLASH:">"===a?(U(n,!0),j(n)):(L(n,"Forward-slash in opening tag not followed by >"),n.state=A.ATTRIB);continue;case A.ATTRIB:if(b(u,a))continue;">"===a?U(n):"/"===a?n.state=A.OPEN_TAG_SLASH:b(g,a)?(n.attribName=a,n.attribValue="",n.state=A.ATTRIB_NAME):L(n,"Invalid attribute name");continue;case A.ATTRIB_NAME:"="===a?n.state=A.ATTRIB_VALUE:">"===a?(L(n,"Attribute without value"),n.attribValue=n.attribName,F(n),U(n)):b(u,a)?n.state=A.ATTRIB_NAME_SAW_WHITE:b(y,a)?n.attribName+=a:L(n,"Invalid attribute name");continue;case A.ATTRIB_NAME_SAW_WHITE:if("="===a)n.state=A.ATTRIB_VALUE;else{if(b(u,a))continue;L(n,"Attribute without value"),n.tag.attributes[n.attribName]="",n.attribValue="",R(n,"onattribute",{name:n.attribName,value:""}),n.attribName="",">"===a?U(n):b(g,a)?(n.attribName=a,n.state=A.ATTRIB_NAME):(L(n,"Invalid attribute name"),n.state=A.ATTRIB)}continue;case A.ATTRIB_VALUE:if(b(u,a))continue;b(c,a)?(n.q=a,n.state=A.ATTRIB_VALUE_QUOTED):(L(n,"Unquoted attribute value"),n.state=A.ATTRIB_VALUE_UNQUOTED,n.attribValue=a);continue;case A.ATTRIB_VALUE_QUOTED:if(a!==n.q){"&"===a?n.state=A.ATTRIB_VALUE_ENTITY_Q:n.attribValue+=a;continue}F(n),n.q="",n.state=A.ATTRIB_VALUE_CLOSED;continue;case A.ATTRIB_VALUE_CLOSED:b(u,a)?n.state=A.ATTRIB:">"===a?U(n):"/"===a?n.state=A.OPEN_TAG_SLASH:b(g,a)?(L(n,"No whitespace between attributes"),n.attribName=a,n.attribValue="",n.state=A.ATTRIB_NAME):L(n,"Invalid attribute name");continue;case A.ATTRIB_VALUE_UNQUOTED:if(E(f,a)){"&"===a?n.state=A.ATTRIB_VALUE_ENTITY_U:n.attribValue+=a;continue}F(n),">"===a?U(n):n.state=A.ATTRIB;continue;case A.CLOSE_TAG:if(n.tagName)">"===a?j(n):b(y,a)?n.tagName+=a:n.script?(n.script+="</"+n.tagName,n.tagName="",n.state=A.SCRIPT):(E(u,a)&&L(n,"Invalid tagname in closing tag"),n.state=A.CLOSE_TAG_SAW_WHITE);else{if(b(u,a))continue;E(g,a)?n.script?(n.script+="</"+a,n.state=A.SCRIPT):L(n,"Invalid tagname in closing tag."):n.tagName=a}continue;case A.CLOSE_TAG_SAW_WHITE:if(b(u,a))continue;">"===a?j(n):L(n,"Invalid characters in closing tag");continue;case A.TEXT_ENTITY:case A.ATTRIB_VALUE_ENTITY_Q:case A.ATTRIB_VALUE_ENTITY_U:var l,d;switch(n.state){case A.TEXT_ENTITY:l=A.TEXT,d="textNode";break;case A.ATTRIB_VALUE_ENTITY_Q:l=A.ATTRIB_VALUE_QUOTED,d="attribValue";break;case A.ATTRIB_VALUE_ENTITY_U:l=A.ATTRIB_VALUE_UNQUOTED,d="attribValue"}";"===a?(n[d]+=B(n),n.entity="",n.state=l):b(n.entity.length?_:v,a)?n.entity+=a:(L(n,"Invalid character in entity name"),n[d]+="&"+n.entity+a,n.entity="",n.state=l);continue;default:throw new Error(n,"Unknown state: "+n.state)}return n.position>=n.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,a=0,s=i.length;a<s;a++){var o=e[i[a]].length;if(o>n)switch(i[a]){case"textNode":P(e);break;case"cdata":R(e,"oncdata",e.cdata),e.cdata="";break;case"script":R(e,"onscript",e.script),e.script="";break;default:O(e,"Max buffer length exceeded: "+i[a])}r=Math.max(r,o)}var u=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}(n),n},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;P(e=this),""!==e.cdata&&(R(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(R(e,"onscript",e.script),e.script="")}};try{r=n("./node_modules/stream-browserify/index.js").Stream}catch(e){r=function(){}}var s=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function o(e,t){if(!(this instanceof o))return new o(e,t);r.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,s.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}o.prototype=Object.create(r.prototype,{constructor:{value:o}}),o.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},o.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},o.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===s.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var u="\r\n\t ",l="0124356789",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="'\"",f=u+">",h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",m={xml:h,xmlns:p};u=T(u),l=T(l),d=T(d);var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function T(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function b(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function E(e,t){return!b(e,t)}c=T(c),f=T(f);var S,w,C,A=0;for(var I in t.STATE={BEGIN:A++,BEGIN_WHITESPACE:A++,TEXT:A++,TEXT_ENTITY:A++,OPEN_WAKA:A++,SGML_DECL:A++,SGML_DECL_QUOTED:A++,DOCTYPE:A++,DOCTYPE_QUOTED:A++,DOCTYPE_DTD:A++,DOCTYPE_DTD_QUOTED:A++,COMMENT_STARTING:A++,COMMENT:A++,COMMENT_ENDING:A++,COMMENT_ENDED:A++,CDATA:A++,CDATA_ENDING:A++,CDATA_ENDING_2:A++,PROC_INST:A++,PROC_INST_BODY:A++,PROC_INST_ENDING:A++,OPEN_TAG:A++,OPEN_TAG_SLASH:A++,ATTRIB:A++,ATTRIB_NAME:A++,ATTRIB_NAME_SAW_WHITE:A++,ATTRIB_VALUE:A++,ATTRIB_VALUE_QUOTED:A++,ATTRIB_VALUE_CLOSED:A++,ATTRIB_VALUE_UNQUOTED:A++,ATTRIB_VALUE_ENTITY_Q:A++,ATTRIB_VALUE_ENTITY_U:A++,CLOSE_TAG:A++,CLOSE_TAG_SAW_WHITE:A++,SCRIPT:A++,SCRIPT_ENDING:A++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[I]]=I;function k(e,t,n){e[t]&&e[t](n)}function R(e,t,n){e.textNode&&P(e),k(e,t,n)}function P(e){e.textNode=D(e.opt,e.textNode),e.textNode&&k(e,"ontext",e.textNode),e.textNode=""}function D(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function O(e,t){return P(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,k(e,"onerror",t),e}function M(e){return e.sawRoot&&!e.closedRoot&&L(e,"Unclosed root tag"),e.state!==A.BEGIN&&e.state!==A.BEGIN_WHITESPACE&&e.state!==A.TEXT&&O(e,"Unexpected end"),P(e),e.c="",e.closed=!0,k(e,"onend"),a.call(e,e.strict,e.opt),e}function L(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&O(e,t)}function N(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,R(e,"onopentagstart",n)}function x(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function F(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=x(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==h)L(e,"xml: prefix must be bound to "+h+"\nActual: "+e.attribValue);else if("xmlns"===r&&e.attribValue!==p)L(e,"xmlns: prefix must be bound to "+p+"\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,R(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function U(e,t){if(e.opt.xmlns){var n=e.tag,r=x(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(L(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){R(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,s=e.attribList.length;a<s;a++){var o=e.attribList[a],u=o[0],l=o[1],d=x(u,!0),c=d.prefix,f=d.local,h=""===c?"":n.ns[c]||"",p={name:u,value:l,prefix:c,local:f,uri:h};c&&"xmlns"!==c&&!h&&(L(e,"Unbound namespace prefix: "+JSON.stringify(c)),p.uri=c),e.tag.attributes[u]=p,R(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),R(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=A.TEXT:e.state=A.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function j(e){if(!e.tagName)return L(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=A.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=A.SCRIPT);R(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--&&e.tags[t].name!==r;)L(e,"Unexpected close tag");if(t<0)return L(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=A.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,R(e,"onclosetag",e.tagName);var s={};for(var o in a.ns)s[o]=a.ns[o];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];R(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=A.TEXT}function B(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(L(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function V(e,t){"<"===t?(e.state=A.OPEN_WAKA,e.startTagPosition=e.position):E(u,t)&&(L(e,"Non-whitespace before first tag."),e.textNode=t,e.state=A.TEXT)}function q(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}A=t.STATE,String.fromCodePoint||(S=String.fromCharCode,w=Math.floor,C=function(){var e,t,n=16384,r=[],i=-1,a=arguments.length;if(!a)return"";for(var s="";++i<a;){var o=Number(arguments[i]);if(!isFinite(o)||o<0||o>1114111||w(o)!==o)throw RangeError("Invalid code point: "+o);o<=65535?r.push(o):(e=55296+((o-=65536)>>10),t=o%1024+56320,r.push(e,t)),(i+1===a||r.length>n)&&(s+=S.apply(null,r),r.length=0)}return s},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:C,configurable:!0,writable:!0}):String.fromCodePoint=C)}(t)}).call(this,n("./node_modules/node-libs-browser/node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,i,a,s,o,u=1,l={},d=!1,c=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",o=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&p(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o),r=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(i=c.documentElement,r=function(e){var t=c.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)},f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},f.clearImmediate=h}function h(e){delete l[e]}function p(e){if(d)setTimeout(p,0,e);else{var t=l[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n("./node_modules/webpack/buildin/global.js"),n("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(e,t,n){e.exports=i;var r=n("./node_modules/node-libs-browser/node_modules/events/events.js").EventEmitter;function i(){r.call(this)}n("./node_modules/inherits/inherits_browser.js")(i,r),i.Readable=n("./node_modules/readable-stream/readable-browser.js"),i.Writable=n("./node_modules/readable-stream/writable-browser.js"),i.Duplex=n("./node_modules/readable-stream/duplex-browser.js"),i.Transform=n("./node_modules/readable-stream/transform.js"),i.PassThrough=n("./node_modules/readable-stream/passthrough.js"),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",o),n.on("close",u));var s=!1;function o(){s||(s=!0,e.end())}function u(){s||(s=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(d(),0===r.listenerCount(this,"error"))throw e}function d(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",o),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",d),n.removeListener("close",d),e.removeListener("close",d)}return n.on("error",l),e.on("error",l),n.on("end",d),n.on("close",d),e.on("close",d),e.emit("pipe",n),e}},"./node_modules/string_decoder/lib/string_decoder.js":function(e,t,n){var r=n("./node_modules/safe-buffer/index.js").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=c,t=3;break;default:return this.write=f,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function s(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function d(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function f(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=s(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=s(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"./node_modules/util-deprecate/browser.js":function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},"./src/core/Debug.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=1,o=2,u=3,l=4,d=5;function c(e){e=e||{};var t,n,a,c,f=this.context,h=Object(r.default)(f).getInstance(),p=e.settings,m=[];function g(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function y(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[s,this].concat(t))}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[o,this].concat(t))}function _(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[u,this].concat(t))}function T(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[l,this].concat(t))}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[d,this].concat(t))}function E(e,t){var r="",s=null;n&&(s=(new Date).getTime(),r+="["+(s-c)+"]"),a&&t&&t.getClassName&&(r+="["+t.getClassName()+"]",t.getType&&(r+="["+t.getType()+"]")),r.length>0&&(r+=" ");for(var o=arguments.length,u=new Array(o>2?o-2:0),l=2;l<o;l++)u[l-2]=arguments[l];Array.apply(null,u).forEach((function(e){r+=e+" "})),m[e]&&p.get().debug.logLevel>=e&&m[e](r),p&&p.get().debug.dispatchEvent&&h.trigger(i.default.LOG,{message:r,level:e})}return t={getLogger:function(e){return{fatal:y.bind(e),error:v.bind(e),warn:_.bind(e),info:T.bind(e),debug:b.bind(e)}},setLogTimestampVisible:function(e){n=e},setCalleeNameVisible:function(e){a=e}},n=!0,a=!0,c=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(m[s]=g(window.console.error),m[o]=g(window.console.error),m[u]=g(window.console.warn),m[l]=g(window.console.info),m[d]=g(window.console.debug)),t}c.__dashjs_factory_name="Debug";var f=a.default.getSingletonFactory(c);f.LOG_LEVEL_NONE=0,f.LOG_LEVEL_FATAL=s,f.LOG_LEVEL_ERROR=o,f.LOG_LEVEL_WARNING=u,f.LOG_LEVEL_INFO=l,f.LOG_LEVEL_DEBUG=d,a.default.updateSingletonFactory(c.__dashjs_factory_name,f),t.default=f},"./src/core/EventBus.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/MediaPlayerEvents.js");function a(){var e={};function t(t,n,r){var i=-1;return e[t]?(e[t].some((function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0})),i):i}var n={on:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);var s=a.priority||0;if(!(t(n,r,i)>=0)){e[n]=e[n]||[];var o={callback:r,scope:i,priority:s};i&&i.getStreamId&&(o.streamId=i.getStreamId()),i&&i.getType&&(o.mediaType=i.getType()),a&&a.mode&&(o.mode=a.mode);var u=e[n].some((function(t,r){if(t&&s>t.priority)return e[n].splice(r,0,o),!0}));u||e[n].push(o)}},off:function(n,r,i){if(n&&r&&e[n]){var a=t(n,r,i);a<0||(e[n][a]=null)}},trigger:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e[t]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,r.streamId&&(n.streamId=r.streamId),r.mediaType&&(n.mediaType=r.mediaType),e[t].filter((function(e){return!(!e||r.streamId&&e.streamId&&e.streamId!==r.streamId||r.mediaType&&e.mediaType&&e.mediaType!==r.mediaType||r.mode&&e.mode&&e.mode!==r.mode||!e.mode&&r.mode&&r.mode===i.default.EVENT_MODE_ON_RECEIVE)})).forEach((function(e){return e&&e.callback.call(e.scope,n)}))}},reset:function(){e={}}};return n}a.__dashjs_factory_name="EventBus";var s=r.default.getSingletonFactory(a);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(a.__dashjs_factory_name,s),t.default=s},"./src/core/FactoryMaker.js":function(e,t,n){n.r(t);var r=function(){var e,t=[],n={},r={};function i(e,n){for(var r in t){var i=t[r];if(i.context===e&&i.name===n)return i.instance}return null}function a(e,t){return t[e]}function s(e,t,n){e in n&&(n[e]=t)}function o(t,n,r){var i,a=t.__dashjs_factory_name,s=n[a];if(s){var o=s.instance;if(!s.override)return o.apply({context:n,factory:e},r);for(var u in i=t.apply({context:n},r),o=o.apply({context:n,factory:e,parent:i},r))i.hasOwnProperty(u)&&(i[u]=o[u])}else i=t.apply({context:n},r);return i.getClassName=function(){return a},i}return e={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,n,r){for(var i in t){var a=t[i];if(a.context===e&&a.name===n)return void(t[i].instance=r)}t.push({name:n,context:e,instance:r})},deleteSingletonInstances:function(e){t=t.filter((function(t){return t.context!==e}))},getSingletonFactory:function(e){var r=a(e.__dashjs_factory_name,n);return r||(r=function(n){var r;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,e.__dashjs_factory_name)),r||(r=o(e,n,arguments),t.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},n[e.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(e){return a(e,n)},updateSingletonFactory:function(e,t){s(e,t,n)},getClassFactory:function(e){var t=a(e.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return o(e,t,arguments)}}},r[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return a(e,r)},updateClassFactory:function(e,t){s(e,t,r)}},e}();t.default=r},"./src/core/Settings.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Utils.js"),a=n("./src/core/Debug.js"),s=n("./src/streaming/constants/Constants.js"),o=n("./src/streaming/vo/metrics/HTTPRequest.js");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){var e,t,n={debug:{logLevel:a.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,lowLatencyEnabled:!1,lowLatencyEnabledByManifest:!0,manifestUpdateRetryInterval:100,cacheInitSegments:!1,eventControllerRefreshDelay:150,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0,applyServiceDescription:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0},liveCatchup:{minDrift:.02,maxDrift:12,playbackRate:.5,latencyThreshold:60,playbackBufferMin:.5,enabled:!1,mode:s.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:s.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:s.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:s.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:0,retryIntervals:(e={},l(e,o.HTTPRequest.MPD_TYPE,500),l(e,o.HTTPRequest.XLINK_EXPANSION_TYPE,500),l(e,o.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),l(e,o.HTTPRequest.INIT_SEGMENT_TYPE,1e3),l(e,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),l(e,o.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),l(e,o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),l(e,o.HTTPRequest.LICENSE,1e3),l(e,o.HTTPRequest.OTHER_TYPE,1e3),l(e,"lowLatencyReductionFactor",10),e),retryAttempts:(t={},l(t,o.HTTPRequest.MPD_TYPE,3),l(t,o.HTTPRequest.XLINK_EXPANSION_TYPE,1),l(t,o.HTTPRequest.MEDIA_SEGMENT_TYPE,3),l(t,o.HTTPRequest.INIT_SEGMENT_TYPE,3),l(t,o.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),l(t,o.HTTPRequest.INDEX_SEGMENT_TYPE,3),l(t,o.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),l(t,o.HTTPRequest.LICENSE,3),l(t,o.HTTPRequest.OTHER_TYPE,3),l(t,"lowLatencyMultiplyFactor",5),t),abr:{movingAverageMethod:s.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:s.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!1},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:s.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:s.default.CMCD_MODE_QUERY}},errors:{recoverAttempts:{mediaErrorDecode:5}}},r=i.default.clone(n);function d(e,t,n){for(var r in e)e.hasOwnProperty(r)&&t.hasOwnProperty(r)&&("object"===u(e[r])&&null!==e[r]?d(e[r],t[r],n.slice()+r+"."):t[r]=i.default.clone(e[r]))}return{get:function(){return r},update:function(e){"object"===u(e)&&d(e,r,"")},reset:function(){r=i.default.clone(n)}}}d.__dashjs_factory_name="Settings";var c=r.default.getSingletonFactory(d);t.default=c},"./src/core/Utils.js":function(e,t,n){n.r(t);var r=n("./node_modules/path-browserify/index.js"),i=n.n(r);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"mixin",value:function(t,n,r){var i,s={};if(t)for(var o in n)n.hasOwnProperty(o)&&(i=n[o],o in t&&(t[o]===i||o in s&&s[o]===i)||("object"===a(t[o])&&null!==t[o]?t[o]=e.mixin(t[o],i,r):t[o]=r(i)));return t}},{key:"clone",value:function(t){if(!t||"object"!==a(t))return t;var n;if(t instanceof Array){n=[];for(var r=0,i=t.length;r<i;++r)r in t&&n.push(e.clone(t[r]))}else n={};return e.mixin(n,t,e.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(e,t){try{if(!t||0===t.length)return e;var n=new URL(e);return t.forEach((function(e){e.key&&e.value&&n.searchParams.set(e.key,e.value)})),n.href}catch(t){return e}}},{key:"parseHttpHeaders",value:function(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],s=a.indexOf(": ");s>0&&(t[a.substring(0,s)]=a.substring(s+2))}return t}},{key:"generateUuid",value:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}},{key:"generateHashCode",value:function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},{key:"getRelativeUrl",value:function(e,t){try{var n=new URL(e),r=new URL(t);if(n.protocol=r.protocol,n.origin!==r.origin)return t;var a=i.a.relative(n.pathname.substr(0,n.pathname.lastIndexOf("/")),r.pathname.substr(0,r.pathname.lastIndexOf("/"))),s=0===a.length?1:0;return a+=r.pathname.substr(r.pathname.lastIndexOf("/")+s,r.pathname.length-1),r.pathname.length<a.length?r.pathname:a}catch(e){return t}}}],null&&s(t.prototype,null),n&&s(t,n),e}();t.default=o},"./src/core/Version.js":function(e,t,n){function r(){return"4.2.0"}n.r(t),n.d(t,"getVersionString",(function(){return r}))},"./src/core/errors/Errors.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e}return o}(n("./src/core/errors/ErrorsBase.js").default));t.default=o},"./src/core/errors/ErrorsBase.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(t.prototype,n),e}();t.default=i},"./src/core/events/CoreEvents.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.INBAND_EVENTS="inbandEvents",e.INITIAL_STREAM_SWITCH="initialStreamSwitch",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_FRAGMENT_NEEDED="initFragmentNeeded",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",e.QUOTA_EXCEEDED="quotaExceeded",e.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",e.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",e.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",e.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",e.SOURCE_BUFFER_ERROR="sourceBufferError",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e.SEEK_TARGET="seekTarget",e}return o}(n("./src/core/events/EventsBase.js").default);t.default=o},"./src/core/events/Events.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n.r(t);var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,r=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return s(this,e)});function u(){return i(this,u),r.apply(this,arguments)}return u}(n("./src/core/events/CoreEvents.js").default),l=new u;t.default=l},"./src/core/events/EventsBase.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}])&&r(t.prototype,n),e}();t.default=i},"./src/dash/DashAdapter.js":function(e,t,n){n.r(t);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/dash/vo/RepresentationInfo.js"),a=n("./src/dash/vo/MediaInfo.js"),s=n("./src/dash/vo/StreamInfo.js"),o=n("./src/dash/vo/ManifestInfo.js"),u=n("./src/dash/vo/Event.js"),l=n("./src/core/FactoryMaker.js"),d=n("./src/dash/models/DashManifestModel.js"),c=n("./src/dash/models/PatchManifestModel.js");function f(){var e,t,n,l,f,h,p,m=this.context;function g(e,n,i){var a,s=t.getAdaptationsForType(l[0].mpd.manifest,e,n);if(!s||0===s.length)return null;if(s.length>1&&i){var o=_(i,n);if(f[i.id]&&f[i.id][n])for(var u=0,d=s.length;u<d;u++)if(y(f[i.id][n],o[u]))return s[u];for(var c=0,h=s.length;c<h;c++)if(a=s[c],t.getRolesForAdaptation(a).filter((function(e){return e.value===r.default.MAIN}))[0])return s[c]}return s[0]}function y(e,t){if(!e||!t)return!1;var n=e.id===t.id,r=e.codec===t.codec,i=e.viewpoint===t.viewpoint,a=e.lang===t.lang,s=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),u=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&s&&o&&u}function v(e,n,r,i,a,s){var o,u,l,d,c,f,p=[];if(!i||0===i.length)return[];var m=t.getAdaptationsForPeriod(n);for(d=0,f=i.length;d<f;d++)if(o=i[d],u=A(m[l=t.getIndexForAdaptation(o,e,r.index)]),s){var g=u.accessibility.length;for(c=0;c<g;c++)if(u){var y=u.accessibility[c];if(0===y.indexOf("cea-608:")){var v=y.substring(8).split(";");if("CC"===v[0].substring(0,2))for(c=0;c<v.length;c++)u||(u=A.call(this,m[l])),I(u,v[c].substring(0,3),v[c].substring(4)),p.push(u),u=null;else for(c=0;c<v.length;c++)u||(u=A.call(this,m[l])),I(u,"CC"+(c+1),v[c]),p.push(u),u=null}else 0===y.indexOf("cea-608")&&(I(u,h.CC1,"eng"),p.push(u),u=null)}}else a===h.IMAGE?(u.type=h.IMAGE,p.push(u),u=null):u&&p.push(u);return p}function _(e,n,r){var i=l,a=r,s=[];if(a)R(),i=T(a);else{if(!(l.length>0))return s;a=l[0].mpd.manifest}var o=C(e,i),u=t.getAdaptationsForType(a,e?e.index:null,n);return s=v(a,o,e,u,n),n===h.TEXT&&(u=t.getAdaptationsForType(a,e?e.index:null,h.VIDEO),s=s.concat(v(a,o,e,u,n,!0))),s}function T(e){var n=b(e);return t.getRegularPeriods(n)}function b(e){var n=S(e);return t.getMpd(n)}function E(){l=[],f={}}function S(e){return e||(l.length>0?l[0].mpd.manifest:null)}function w(e){try{var n=C(e.streamInfo,l),r=t.getAdaptationsForPeriod(n);return e&&e.streamInfo&&void 0!==e.streamInfo.id&&r?r[e.index]:null}catch(e){return null}}function C(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function A(e){if(!e)return null;var n,r=new a.default,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];if(r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=k(e.period),r.representationCount=t.getRepresentationCount(i),r.labels=t.getLabelsForAdaptation(i),r.lang=t.getLanguageForAdaptation(i),n=t.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=t.getAccessibilityForAdaptation(i).map((function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==p&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n})),r.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(i).map((function(e){return e.value})),0===r.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&i.Representation_asArray.length>0&&(r.audioChannelConfiguration=t.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map((function(e){return e.value}))),r.roles=t.getRolesForAdaptation(i).map((function(e){return e.value})),r.codec=t.getCodec(i),r.mimeType=t.getMimeType(i),r.contentProtection=t.getContentProtectionData(i),r.bitrateList=t.getBitrateListForAdaptation(i),r.selectionPriority=t.getSelectionPriority(i),r.contentProtection){var s=r.contentProtection.map((function(e){return t.getKID(e)})).filter((function(e){return null!==e}));if(s.length){var o=s[0];r.contentProtection.forEach((function(e){e.keyId=o}))}}return r.isText=t.getIsText(i),r.supplementalProperties=t.getSupplementalProperties(i),r.isFragmented=t.getIsFragmented(i),r.isEmbedded=!1,r}function I(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=h.TEXT,e.codec="cea-608-in-SEI",e.isEmbedded=!0,e.isFragmented=!1,e.lang=n,e.roles=["caption"]}function k(e){var n,r,i=new s.default;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(n=e.mpd,(r=new o.default).dvrWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=t.getDuration(n.manifest),r.isDynamic=t.getIsDynamic(n.manifest),r.serviceDescriptions=t.getServiceDescriptions(n.manifest),r.protocol=n.manifest.protocol,r),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function R(){if(!h)throw new Error("setConfig function has to be called previously")}function P(e){return l.length>0?l[0].mpd.manifest.Period_asArray[e]:null}function D(e,t,n){var r,i,a,s,o;if(e)for(r=e.AdaptationSet_asArray,s=0;s<r.length;s+=1)for(a=r[s].Representation_asArray,o=0;o<a.length;o+=1)if(t===(i=a[o]).id)return n?o:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return(n=D(P(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){var n=D(e,t,!0);return null!==n?n:-1}(P(t),e)},getMaxIndexForBufferType:function(e,n){return function(e,n){var r,i,a,s;if(!e||!n)return-1;for(i=e.AdaptationSet_asArray,s=0;s<i.length;s+=1)if(a=(r=i[s]).Representation_asArray,t.getIsTypeOf(r,n))return a.length;return-1}(P(n),e)},convertRepresentationToRepresentationInfo:function(e){if(e){var n=new i.default,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],a=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(a),n.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.mediaInfo=A(e.adaptation),n}return null},getStreamsInfo:function(e,t){var n=[],r=l;if(e&&(R(),r=T(e)),r.length>0){(!t||t>r.length)&&(t=r.length);for(var i=0;i<t;i++)n.push(k(r[i]))}return n},getMediaInfoForType:function(e,n){if(0===l.length||!e)return null;var r=C(e,l);if(!r)return null;var i=t.getAdaptationsForPeriod(r),a=g(e.index,n,e);return a?A(i[t.getIndexForAdaptation(a,l[0].mpd.manifest,e.index)]):null},getAllMediaInfoForType:_,getAdaptationForType:g,getRealAdaptation:function(e,n){var r,i,a=C(e,l);return r=n?n.id:null,l.length>0&&a&&(i=r?t.getAdaptationForId(r,l[0].mpd.manifest,a.index):t.getAdaptationForIndex(n?n.index:null,l[0].mpd.manifest,a.index)),i},getRealPeriodByIndex:function(e){return t.getRealPeriodForIndex(e,l[0].mpd.manifest)},getEssentialPropertiesForRepresentation:function(e){try{return t.getEssentialPropertiesForRepresentation(e)}catch(e){return[]}},getVoRepresentations:function(e){var n=w(e);return t.getRepresentationsForAdaptation(n)},getEventsFor:function(e,n){var r=[];if(l.length>0){var o=l[0].mpd.manifest;e instanceof s.default?r=t.getEventsForPeriod(C(e,l)):e instanceof a.default?r=t.getEventStreamForAdaptationSet(o,w(e)):e instanceof i.default&&(r=t.getEventStreamForRepresentation(o,n))}return r},getEvent:function(e,t,n,r){try{if(!e||!t||isNaN(n)||!r)return null;var i=e.scheme_id_uri,a=e.value;if(!t[i+"/"+a])return null;var s,o=new u.default,l=e.timescale||1,d=r.adaptation.period.start,c=t[i+"/"+a],f=isNaN(r.presentationTimeOffset)?isNaN(c.presentationTimeOffset)?0:c.presentationTimeOffset:r.presentationTimeOffset,h=e.presentation_time_delta/l;s=0===e.version?d+n-f+h:d-f+h;var p=e.event_duration,m=e.id,g=e.message_data;return o.eventStream=c,o.eventStream.value=a,o.eventStream.timescale=l,o.duration=p,o.id=m,o.calculatedPresentationTime=s,o.messageData=g,o.presentationTimeDelta=h,o}catch(e){return null}},getMpd:b,setConfig:function(e){e&&(e.constants&&(h=e.constants),e.cea608parser&&(p=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;R(),l=T(e)},getIsTextTrack:function(e){return t.getIsText(e)},getUTCTimingSources:function(){var e=S();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=l.length>0?l[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var n=b(e);return t.getAvailabilityStartTime(n)},getIsTypeOf:function(e,n){return t.getIsTypeOf(e,n)},getIsDynamic:function(e){var n=S(e);return t.getIsDynamic(n)},getDuration:function(e){var n=S(e);return t.getDuration(n)},getRegularPeriods:T,getLocation:function(e){return t.getLocation(e)},getPatchLocation:function(e){var n=t.getPatchLocation(e),r=t.getPublishTime(e);if(!n||!r)return null;if(n.hasOwnProperty("ttl")&&r){var i=1e3*parseFloat(n.ttl);if(r.getTime()+i<=(new Date).getTime())return null}return n.__text},getManifestUpdatePeriod:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.getManifestUpdatePeriod(e,n)},getPublishTime:function(e){return t.getPublishTime(e)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getIsPatch:function(e){return n.getIsPatch(e)},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,n,r){return t.getCodec(e,n,r)},getPeriodById:function(e){if(!e||0===l.length)return null;var t=l.filter((function(t){return t.id===e}));return t&&t.length>0?t[0]:null},setCurrentMediaInfo:function(e,t,n){f[e]=f[e]||{},f[e][t]=f[e][t]||{},f[e][t]=n},isPatchValid:function(e,r){var i=t.getId(e),a=n.getMpdId(r),s=t.getPublishTime(e),o=n.getPublishTime(r),u=n.getOriginalPublishTime(r);return!!(i&&a&&i==a&&s&&u&&s.getTime()==u.getTime()&&o&&s.getTime()<o.getTime())},applyPatchToManifest:function(e,t){n.getPatchOperations(t).forEach((function(t){var n=t.getMpdTarget(e);if(null!==n){var r=n.name,i=n.target,a=n.leaf;if(t.xpath.findsAttribute())switch(t.action){case"add":case"replace":i[r]=t.value;break;case"remove":delete i[r]}else{var s=(i[r+"_asArray"]||[]).indexOf(a),o="prepend"===t.position||"before"===t.position;if(("remove"===t.action||"replace"===t.action)&&(delete i[r],-1!=s)){var u=i[r+"_asArray"];u.splice(s,1),u.length>1?i[r]=u:1==u.length?i[r]=u[0]:delete i[r+"_asArray"]}"add"!==t.action&&"replace"!==t.action||Object.keys(t.value).forEach((function(e){var n=t.value[e],a=i[e+"_asArray"]||[];if(0===a.length&&i[e]&&a.push(i[e]),0===a.length)a=n;else{var u=a.length;u=e==r&&-1!=s?s+(o?0:1)+("replace"==t.action?-1:0):o?0:a.length,a.splice.apply(a,[u,0].concat(n))}i[e+"_asArray"]=a,i[e]=1==a.length?a[0]:a}))}}}))},areMediaInfosEqual:y,reset:E},t=Object(d.default)(m).getInstance(),n=Object(c.default)(m).getInstance(),E(),e}f.__dashjs_factory_name="DashAdapter",t.default=l.default.getSingletonFactory(f)},"./src/dash/DashHandler.js":function(e,t,n){n.r(t);var r=n("./src/streaming/vo/FragmentRequest.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/dash/utils/SegmentsUtils.js"),u=n("./src/dash/constants/DashConstants.js");function l(e){var t,n,a,l,d,c=(e=e||{}).eventBus,f=e.debug,h=e.urlUtils,p=e.type,m=e.streamInfo,g=e.segmentsController,y=e.timelineConverter,v=e.baseURLController;function _(){return p}function T(){a=null}function b(e,t,n){var r,i,a=v.resolve(n.path);return a&&t!==a.url&&h.isRelative(t)?(r=a.url,i=a.serviceLocation,t&&(r=h.resolve(t,r))):r=t,!h.isRelative(r)&&(e.url=r,e.serviceLocation=i,!0)}function E(e,t){if(null==t)return null;var n=new r.default,a=t.representation,s=a.adaptation.period.mpd.manifest.Period_asArray[a.adaptation.period.index].AdaptationSet_asArray[a.adaptation.index].Representation_asArray[a.index].bandwidth,u=t.media;return u=Object(o.replaceTokenForTemplate)(u,"Number",t.replacementNumber),u=Object(o.replaceTokenForTemplate)(u,"Time",t.replacementTime),u=Object(o.replaceTokenForTemplate)(u,"Bandwidth",s),u=Object(o.replaceIDForTemplate)(u,a.id),u=Object(o.unescapeDollarsInTemplate)(u),n.mediaType=_(),n.type=i.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.mediaStartTime=t.mediaStartTime,n.duration=t.duration,n.timescale=a.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=a.index,n.index=t.index,n.mediaInfo=e,n.adaptationIndex=a.adaptation.index,n.representationId=a.id,b(n,u,a)?n:void 0}function S(e,t,r){var i=null;if(!t||!t.segmentInfoType)return i;var s=g.getSegmentByTime(t,r);return s&&(a=s,n.debug("Index for time "+r+" is "+s.index),i=E(e,s)),i}function w(){n.debug("Dynamic stream complete"),d=!0}return t={initialize:function(e){l=e,d=!1,g.initialize(e)},getStreamId:function(){return m.id},getType:_,getStreamInfo:function(){return m},getInitRequest:function(e,t){return t?function(e,t,n){var a=new r.default,s=t.adaptation.period,u=s.start;if(a.mediaType=n,a.type=i.HTTPRequest.INIT_SEGMENT_TYPE,a.range=t.range,a.availabilityStartTime=y.calcAvailabilityStartTimeFromPresentationTime(u,t,l),a.availabilityEndTime=y.calcAvailabilityEndTimeFromPresentationTime(u+s.duration,t,l),a.quality=t.index,a.mediaInfo=e,a.representationId=t.id,b(a,t.initialization,t))return a.url=Object(o.replaceTokenForTemplate)(a.url,"Bandwidth",t.bandwidth),a}(e,t,_()):null},getSegmentRequestForTime:S,getCurrentIndex:function(){return a?a.index:-1},getNextSegmentRequest:function(e,t){var r=null;if(!t||!t.segmentInfoType)return null;var i=a?a.index+1:0,s=g.getSegmentByIndex(t,i,a?a.mediaStartTime:-1);if(s)r=E(e,s),a=s;else{if(l&&!d)return n.debug(_()+" No segment found at index: "+i+". Wait for next loop"),null;d=!0}return r},isLastSegmentRequested:function(e,t){if(!e||!a)return!1;if(d)return!0;if(!isFinite(e.adaptation.period.duration))return!1;if(a.presentationStartTime+a.duration>t)return!1;if(e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.numberOfSegments)&&!isNaN(a.index)&&a.index>=e.mediaFinishedInformation.numberOfSegments-1){if(!l||e.segmentInfoType===u.default.SEGMENT_TEMPLATE)return!0;if(l&&e.segmentInfoType===u.default.SEGMENT_LIST&&e.adaptation.period.nextPeriodId)return!0}return!!(l&&e.adaptation.period.nextPeriodId&&e.segmentInfoType===u.default.SEGMENT_TIMELINE&&e.mediaFinishedInformation&&!isNaN(e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&a&&!isNaN(a.mediaStartTime)&&!isNaN(a.duration)&&a.mediaStartTime+a.duration>=e.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},reset:function(){T(),c.off(s.default.DYNAMIC_TO_STATIC,w,t)},getNextSegmentRequestIdempotent:function(e,t){var n=a?a.index+1:0,r=g.getSegmentByIndex(t,n,a?a.mediaStartTime:-1);return r?E(e,r):null},getValidSeekTimeCloseToTargetTime:function(e,t,n,r){try{if(isNaN(e)||!t||!n)return NaN;if(e<0&&(e=0),isNaN(r)&&(r=.5),S(t,n,e))return e;for(var i=n.adaptation.period.start,a=n.adaptation.period.start+n.adaptation.period.duration,s=Math.min(e+r,a),o=Math.max(e-r,i),u=NaN,l=null;s<=a||o>=i;){var d=null,c=null;if(s<=a&&(d=S(t,n,s)),o>=i&&(c=S(t,n,o)),c){u=o,l=c;break}if(d){u=s,l=d;break}s+=r,o-=r}if(l){var f=l.startTime+l.duration;return e>=l.startTime&&f-e>r?e:e<l.startTime?l.startTime:Math.min(f-r,u)}return u}catch(e){return NaN}}},n=f.getLogger(t),T(),c.on(s.default.DYNAMIC_TO_STATIC,w,t),t}l.__dashjs_factory_name="DashHandler",t.default=a.default.getClassFactory(l)},"./src/dash/DashMetrics.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/constants/MetricsConstants.js"),o=n("./src/dash/utils/Round10.js"),u=n("./src/streaming/models/MetricsModel.js"),l=n("./src/core/Utils.js"),d=n("./src/streaming/vo/metrics/PlayList.js");function c(e){e=e||{};var t,n,a,c,f=this.context,h=e.metricsModel;function p(e){var t=h.getMetricsFor(e,!0);if(!t)return null;var n,r=t.HttpList,i=null;if(!r||r.length<=0)return null;for(n=r.length-1;n>=0;){if(r[n].responsecode){i=r[n];break}n--}return i}function m(e){var t=h.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function g(e,t){if(!e)return null;var n=e[t];return n&&0!==n.length?n[n.length-1]:null}return t={getCurrentRepresentationSwitch:function(e){return g(h.getMetricsFor(e,!0),s.default.TRACK_SWITCH)},getCurrentBufferState:function(e){return g(h.getMetricsFor(e,!0),s.default.BUFFER_STATE)},getCurrentBufferLevel:function(e){var t=g(h.getMetricsFor(e,!0),s.default.BUFFER_LEVEL);return t?o.default.round10(t.level/1e3,-3):0},getCurrentHttpRequest:p,getHttpRequests:m,getCurrentDroppedFrames:function(){return g(h.getMetricsFor(r.default.VIDEO,!0),s.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return g(h.getMetricsFor(e,!0),s.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return g(e?h.getMetricsFor(e,!0):h.getMetricsFor(r.default.VIDEO,!0)||h.getMetricsFor(r.default.AUDIO,!0),s.default.DVR_INFO)},getCurrentManifestUpdate:function(){return g(h.getMetricsFor(r.default.STREAM),s.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){if(!t)return null;var n={},r=p(e);r&&(n=l.default.parseHttpHeaders(r._responseHeaders));var i=n[t.toLowerCase()];return void 0===i?null:i},getLatestMPDRequestHeaderValueByID:function(e){if(!e)return null;var t,n,a,s={};for(a=(t=m(r.default.STREAM)).length-1;a>=0;a--)if((n=t[a]).type===i.HTTPRequest.MPD_TYPE){s=l.default.parseHttpHeaders(n._responseHeaders);break}var o=s[e.toLowerCase()];return void 0===o?null:o},addRepresentationSwitch:function(e,t,n,r,i){h.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){h.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){var t=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){var n=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType)}},addManifestUpdate:function(e){h.addManifestUpdate(r.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,r,i){h.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i)},addSchedulingInfo:function(e,t){h.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){h.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){h.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){h.addBufferState(e,t,n)},addDroppedFrames:function(e){h.addDroppedFrames(r.default.VIDEO,e)},addPlayList:function(){c&&(h.addPlayList(c),c=null)},addDVBErrors:function(e){h.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(c=new d.PlayList).start=new Date,c.mstart=e,c.starttype=t},createPlaylistTraceMetrics:function(e,t,r){!0===n&&(n=!1,(a=new d.PlayListTrace).representationid=e,a.start=new Date,a.mstart=t,a.playbackspeed=null!==r?r.toString():null)},updatePlayListTraceMetrics:function(e){if(a)for(var t in a)a[t]=e[t]},pushPlayListTraceMetrics:function(e,t){if(!1===n&&c&&a&&a.start){var r=a.start,i=e.getTime()-r.getTime();a.duration=i,a.stopreason=t,c.trace.push(a),n=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||Object(u.default)(f).getInstance({settings:e.settings}),n=!0,a=null,c=null,t}c.__dashjs_factory_name="DashMetrics",t.default=a.default.getSingletonFactory(c)},"./src/dash/SegmentBaseLoader.js":function(e,t,n){n.r(t);var r=n("./src/dash/vo/Segment.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/FragmentRequest.js"),o=n("./src/streaming/net/URLLoader.js");function u(){var e,t,n,a,u,l,d,c,f,h,p,m,g,y=this.context;function v(e,n,r,i){var s=null,o=e?g.resolve(e.path):null,u=i||{init:!0,url:o?o.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n};t.debug("Start searching for initialization.");var l=b(u);c.load({request:l,success:function(t){if(u.bytesLoaded=u.range.end,!(s=a.findInitRange(t)))return u.range.end=u.bytesLoaded+u.bytesToLoad,v(e,n,r,u);e.range=s,r(e)},error:function(){r(e)}}),t.debug("Perform init search: "+u.url)}function _(e,n,i,s,o,u){if(i&&(void 0===i.start||void 0===i.end)){var l=i?i.toString().split("-"):null;i=l?{start:parseFloat(l[0]),end:parseFloat(l[1])}:null}o=o||T;var d=null,f=null,h=!!i,p=e?g.resolve(e.path):null,m={init:!1,url:p?p.url:void 0,range:h?i:{start:0,end:1500},searching:!h,bytesLoaded:u?u.bytesLoaded:0,bytesToLoad:1500,mediaType:n},y=b(m);c.load({request:y,success:function(i){var u=m.bytesToLoad,l=i.byteLength;if(m.bytesLoaded=m.range.end-m.range.start,d=a.parse(i),(f=d.getBox("sidx"))&&f.isComplete){var c,h,p=f.references;if(null!=p&&p.length>0&&(c=1===p[0].reference_type),c){var g,y,v,T;t.debug("Initiate multiple SIDX load."),m.range.end=m.range.start+f.size;var b=[],E=0,S=(f.offset||m.range.start)+f.size,w=function(t){t?(b=b.concat(t),++E>=y&&(b.sort((function(e,t){return e.startTime-t.startTime<0?-1:0})),o(b,e,s))):o(null,e,s)};for(g=0,y=p.length;g<y;g++)v=S,T=S+p[g].referenced_size-1,S+=p[g].referenced_size,_(e,n,{start:v,end:T},s,w,m)}else t.debug("Parsing segments from SIDX. representation "+n+" - id: "+e.id+" for range : "+m.range.start+" - "+m.range.end),h=function(e,t){for(var n,i,a,s,o=e.references,u=o.length,l=e.timescale,d=e.earliest_presentation_time,c=t.range.start+e.offset+e.first_offset+e.size,f=[],h=0;h<u;h++)a=o[h].subsegment_duration,s=o[h].referenced_size,(n=new r.default).duration=a,n.startTime=d,n.timescale=l,i=c+s-1,n.mediaRange=c+"-"+i,f.push(n),d+=a,c+=s;return f}(f,m),o(h,e,s)}else{if(f)m.range.start=f.offset||m.range.start,m.range.end=m.range.start+(f.size||u);else{if(l<m.bytesLoaded)return void o(null,e,s);var C=d.getLastBox();C&&C.size?(m.range.start=C.offset+C.size,m.range.end=m.range.start+u):m.range.end+=u}_(e,n,m.range,s,null,m)}},error:function(){o(null,e,s)}}),t.debug("Perform SIDX load for type ".concat(n," : ").concat(m.url," with range ").concat(m.range.start," - ").concat(m.range.end))}function T(e,t,n){n({segments:e,representation:t,error:e?void 0:new i.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function b(e){if(e.url){var t=new s.default;return t.setInfo(e),t}}return e={setConfig:function(r){r.baseURLController&&(g=r.baseURLController),r.dashMetrics&&(l=r.dashMetrics),r.mediaPlayerModel&&(d=r.mediaPlayerModel),r.errHandler&&(n=r.errHandler),r.boxParser&&(a=r.boxParser),r.debug&&(t=r.debug.getLogger(e)),r.requestModifier&&(u=r.requestModifier),r.errors&&(f=r.errors),r.urlUtils&&(m=r.urlUtils),r.constants&&(h=r.constants),r.dashConstants&&(p=r.dashConstants)},initialize:function(){c=Object(o.default)(y).create({errHandler:n,dashMetrics:l,mediaPlayerModel:d,requestModifier:u,boxParser:a,errors:f,urlUtils:m,constants:h,dashConstants:p})},loadInitialization:function(e,t){return new Promise((function(n){v(e,t,n)}))},loadSegments:function(e,t,n){return new Promise((function(r){_(e,t,n,r)}))},reset:function(){c&&(c.abort(),c=null)}}}u.__dashjs_factory_name="SegmentBaseLoader",t.default=a.default.getSingletonFactory(u)},"./src/dash/WebmSegmentBaseLoader.js":function(e,t,n){n.r(t);var r=n("./src/streaming/utils/EBMLParser.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/dash/vo/Segment.js"),o=n("./src/streaming/vo/FragmentRequest.js"),u=n("./src/streaming/net/URLLoader.js"),l=n("./src/streaming/vo/DashJSError.js");function d(){var e,t,n,a,d,c,f,h,p,m,g=this.context;function y(e){var t=new o.default;return t.setInfo(e),t}return e={setConfig:function(n){if(!(n.baseURLController&&n.dashMetrics&&n.mediaPlayerModel&&n.errHandler))throw new Error(i.default.MISSING_CONFIG_ERROR);m=n.baseURLController,c=n.dashMetrics,f=n.mediaPlayerModel,a=n.errHandler,p=n.errors,t=n.debug.getLogger(e),d=n.requestModifier},initialize:function(){h=Object(u.default)(g).create({errHandler:a,dashMetrics:c,mediaPlayerModel:f,requestModifier:d,errors:p})},loadInitialization:function(e,n){return new Promise((function(r){var i=null,a=e?m.resolve(e.path):null,s=e?e.range.split("-"):null,o={range:{start:s?parseFloat(s[0]):null,end:s?parseFloat(s[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:n};t.info("Start loading initialization."),i=y(o),h.load({request:i,success:function(){r(e)},error:function(){r(e)}}),t.debug("Perform init load: "+o.url)}))},loadSegments:function(e,i,a){return new Promise((function(o){var u=null,d=e?m.resolve(e.path):null,c=d?d.url:void 0;u=y({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:u,url:c,init:!1,mediaType:i}),t.debug("Parsing ebml header"),h.load({request:u,success:function(i){!function(e,i,a,o){if(e&&0!==e.byteLength){var u,l,d,c,f=Object(r.default)(g).create({data:e}),p=a?a.split("-"):null,m=null,v={url:i,range:{start:p?parseFloat(p[0]):null,end:p?parseFloat(p[1]):null},request:m};for(t.debug("Parse EBML header: "+v.url),f.skipOverElement(n.EBML),f.consumeTag(n.Segment),d=f.getMatroskaCodedNum(),d+=f.getPos(),c=f.getPos();f.moreData()&&!f.consumeTagAndSize(n.Segment.Info,!0);)if(!(f.skipOverElement(n.Segment.SeekHead,!0)||f.skipOverElement(n.Segment.Tracks,!0)||f.skipOverElement(n.Segment.Cues,!0)||f.skipOverElement(n.Void,!0)))throw new Error("no valid top level element found");for(;void 0===u;){var _=f.getMatroskaCodedNum(!0),T=f.getMatroskaCodedNum();_===n.Segment.Info.Duration.tag?u=f[n.Segment.Info.Duration.parse](T):f.setPos(f.getPos()+T)}m=y(v),h.load({request:m,success:function(e){l=function(e,i,a,o){var u,l,d,c,f,h,p,m;for(d=[],f=0,h=(l=function(e){var t,i,a=[],s=Object(r.default)(g).create({data:e});for(s.consumeTagAndSize(n.Segment.Cues);s.moreData()&&s.consumeTagAndSize(n.Segment.Cues.CuePoint,!0);){for((t={}).CueTime=s.parseTag(n.Segment.Cues.CuePoint.CueTime),t.CueTracks=[];s.moreData()&&s.consumeTag(n.Segment.Cues.CuePoint.CueTrackPositions,!0);){var o=s.getMatroskaCodedNum(),u=s.getPos();if((i={}).Track=s.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===i.Track)throw new Error("Cue track cannot be 0");i.ClusterPosition=s.parseTag(n.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),t.CueTracks.push(i),s.setPos(u+o)}if(0===t.CueTracks.length)throw new Error("Mandatory cuetrack not found");a.push(t)}if(0===a.length)throw new Error("mandatory cuepoint not found");return a}(e)).length;f<h;f+=1)c=new s.default,u=f<l.length-1?l[f+1].CueTime-l[f].CueTime:o-l[f].CueTime,c.duration=u,c.startTime=l[f].CueTime,c.timescale=1e3,p=l[f].CueTracks[0].ClusterPosition+i,m=f<l.length-1?l[f+1].CueTracks[0].ClusterPosition+i-1:a-1,c.mediaRange=p+"-"+m,d.push(c);return t.debug("Parsed cues: "+d.length+" cues."),d}(e,c,d,u),o(l)},error:function(){t.error("Download Error: Cues "+v.url),o(null)}}),t.debug("Perform cues load: "+v.url+" bytes="+v.range.start+"-"+v.range.end)}else o(null)}(i,c,a,(function(t){o({segments:t,representation:e,error:t?void 0:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){o({representation:e,error:new l.default(p.SEGMENT_BASE_LOADER_ERROR_CODE,p.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){h&&(h.abort(),h=null)}},n={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},e}d.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=a.default.getSingletonFactory(d)},"./src/dash/constants/DashConstants.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId"}}])&&r(t.prototype,n),e}());t.default=i},"./src/dash/controllers/RepresentationController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/dash/utils/SegmentsUtils.js");function o(e){var t,n,i,o,u,l=(e=e||{}).eventBus,d=e.events,c=e.abrController,f=e.dashMetrics,h=e.playbackController,p=e.timelineConverter,m=e.type,g=e.streamInfo,y=e.dashConstants,v=e.segmentsController,_=e.isDynamic;function T(){return m}function b(){if(!(c&&f&&h&&p))throw new Error(r.default.MISSING_CONFIG_ERROR)}function E(){return i}function S(){return u}function w(){n=null,i=!0,o=[]}function C(e){return new Promise((function(t,n){var r=e.hasInitialization(),i=e.hasSegments(),a=[];a.push(v.updateInitData(e,r)),a.push(v.updateSegmentData(e,i)),Promise.all(a).then((function(n){var r;n[0]&&!n[0].error&&(e=function(e,t){return t&&!t.error&&t.representation?t.representation:e}(e,n[0])),n[1]&&!n[1].error&&(e=function(e,t){if(t&&!t.error){var n,r,i,a,o=t.segments,u=[],l=0;for(n=0,r=o?o.length:0;n<r;n++)i=o[n],(a=Object(s.getTimeBasedSegment)(p,_,e,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,l))&&(u.push(a),a=null,l++);return u.length>0&&(e.segments=u),e}}(e,n[1])),(r=e).mediaFinishedInformation=v.getMediaFinishedInformation(r),function(e){if(E()){var t,n,r=f.getCurrentManifestUpdate(),i=!1;if(r){for(var a=0;a<r.representationInfo.length;a++)if((t=r.representationInfo[a]).index===e.index&&t.mediaType===T()){i=!0;break}i||f.addManifestUpdateRepresentationInfo(e,T())}if(function(){for(var e=0,t=o.length;e<t;e++){var n=o[e].segmentInfoType;if(!o[e].hasInitialization()||(n===y.SEGMENT_BASE||n===y.BASE_URL)&&!o[e].segments)return!1}return!0}()){c.setPlaybackQuality(m,g,(n=u,o.indexOf(n)));var s=f.getCurrentDVRInfo(m);s&&f.updateManifestUpdateInfo({latency:s.range.end-h.getTime()}),f.getCurrentRepresentationSwitch(S().adaptation.type)||A(),k()}}}(e),t()})).catch((function(e){n(e)}))}))}function A(){b();var e=new Date,t=S(),n=1e3*h.getTime();t&&f.addRepresentationSwitch(t.adaptation.type,e,n,t.id),l.trigger(a.default.REPRESENTATION_SWITCH,{mediaType:m,streamId:g.id,currentRepresentation:t,numberOfRepresentations:o.length},{streamId:g.id,mediaType:m})}function I(e){return null==e||e>=o.length?null:o[e]}function k(e){i=!1,l.trigger(d.DATA_UPDATE_COMPLETED,{data:n,currentRepresentation:u,error:e},{streamId:g.id,mediaType:m})}function R(e){u=e}function P(e){if(e.newDuration){var t=S();t&&t.adaptation.period&&(t.adaptation.period.duration=e.newDuration)}}return t={getStreamId:function(){return g.id},getType:T,getData:function(){return n},isUpdating:E,updateData:function(e,t,a,s,u){if(b(),i=!0,o=t,R(I(u)),n=e,a!==r.default.VIDEO&&a!==r.default.AUDIO&&(a!==r.default.TEXT||!s))return k(),Promise.resolve();for(var l=[],d=0,c=o.length;d<c;d++){var f=o[d];l.push(C(f))}return Promise.all(l)},getCurrentRepresentation:S,getRepresentationForQuality:I,prepareQualityChange:function(e){R(I(e)),A()},reset:function(){l.off(a.default.MANIFEST_VALIDITY_CHANGED,P,t),w()}},w(),l.on(a.default.MANIFEST_VALIDITY_CHANGED,P,t),t}o.__dashjs_factory_name="RepresentationController",t.default=i.default.getClassFactory(o)},"./src/dash/controllers/SegmentBaseController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/SegmentBaseLoader.js"),a=n("./src/dash/WebmSegmentBaseLoader.js");function s(e){e=e||{};var t,n,r,s=this.context,o=e.eventBus,u=e.events,l=e.dashMetrics,d=e.mediaPlayerModel,c=e.errHandler,f=e.baseURLController,h=e.debug,p=e.boxParser,m=e.requestModifier,g=e.errors;function y(e){return"webm"===(e?e.split("/")[1]:"").toLowerCase()}return t={initialize:function(){n.initialize(),r.initialize()},getSegmentBaseInitSegment:function(e){return y(e.representation.mimeType)?r.loadInitialization(e.representation,e.mediaType):n.loadInitialization(e.representation,e.mediaType)},getSegmentList:function(e){return y(e.mimeType)?r.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null):n.loadSegments(e.representation,e.mediaType,e.representation?e.representation.indexRange:null)},reset:function(){n.reset(),r.reset()}},n=Object(i.default)(s).getInstance(),r=Object(a.default)(s).getInstance(),n.setConfig({baseURLController:f,dashMetrics:l,mediaPlayerModel:d,errHandler:c,eventBus:o,events:u,errors:g,debug:h,boxParser:p,requestModifier:m}),r.setConfig({baseURLController:f,dashMetrics:l,mediaPlayerModel:d,errHandler:c,eventBus:o,events:u,errors:g,debug:h,requestModifier:m}),t}s.__dashjs_factory_name="SegmentBaseController";var o=r.default.getSingletonFactory(s);t.default=o},"./src/dash/controllers/SegmentsController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/utils/TimelineSegmentsGetter.js"),a=n("./src/dash/utils/TemplateSegmentsGetter.js"),s=n("./src/dash/utils/ListSegmentsGetter.js"),o=n("./src/dash/utils/SegmentBaseGetter.js");function u(e){e=e||{};var t,n,r=this.context,u=e.dashConstants,l=e.type,d=e.segmentBaseController;function c(e){return e?e.segments?n[u.SEGMENT_BASE]:n[e.segmentInfoType]:null}return t={initialize:function(t){n[u.SEGMENT_TIMELINE]=Object(i.default)(r).create(e,t),n[u.SEGMENT_TEMPLATE]=Object(a.default)(r).create(e,t),n[u.SEGMENT_LIST]=Object(s.default)(r).create(e,t),n[u.SEGMENT_BASE]=Object(o.default)(r).create(e,t)},updateInitData:function(e,t){return t?Promise.resolve():d.getSegmentBaseInitSegment({representation:e,mediaType:l})},updateSegmentData:function(e,t){return t?Promise.resolve():d.getSegmentList({mimeType:e.mimeType,representation:e,mediaType:l})},getSegmentByIndex:function(e,t,n){var r=c(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=c(e);return n?n.getSegmentByTime(e,t):null},getMediaFinishedInformation:function(e){var t=c(e);return t?t.getMediaFinishedInformation(e):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},n={},t}u.__dashjs_factory_name="SegmentsController";var l=r.default.getClassFactory(u);t.default=l},"./src/dash/models/DashManifestModel.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/dash/vo/Representation.js"),s=n("./src/dash/vo/AdaptationSet.js"),o=n("./src/dash/vo/Period.js"),u=n("./src/dash/vo/Mpd.js"),l=n("./src/dash/vo/UTCTiming.js"),d=n("./src/dash/vo/Event.js"),c=n("./src/dash/vo/BaseURL.js"),f=n("./src/dash/vo/EventStream.js"),h=n("./src/streaming/utils/ObjectUtils.js"),p=n("./src/streaming/utils/URLUtils.js"),m=n("./src/core/FactoryMaker.js"),g=n("./src/core/Debug.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/errors/Errors.js"),_=n("./src/streaming/thumbnail/ThumbnailTracks.js");function T(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(){var e,t,n,m,b=this.context,E=Object(p.default)(b).getInstance(),S=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function w(e,t){if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.Representation_asArray&&e.Representation_asArray.length){var n=M(e.Representation_asArray[0]);if(n&&n.length>0&&_.THUMBNAILS_SCHEME_ID_URIS.indexOf(n[0].schemeIdUri)>=0)return t===r.default.IMAGE}if(e.ContentComponent_asArray&&e.ContentComponent_asArray.length>0){if(e.ContentComponent_asArray.length>1)return t===r.default.MUXED;if(e.ContentComponent_asArray[0].contentType===t)return!0}var a=t===r.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(t);if(e.Representation_asArray&&e.Representation_asArray.length){var s=e.Representation_asArray[0].codecs;if(a.test(s))return!0}if(e.hasOwnProperty(i.default.MIME_TYPE))return a.test(e.mimeType);if(e.Representation_asArray)for(var o,u=0;u<e.Representation_asArray.length;u++)if((o=e.Representation_asArray[u]).hasOwnProperty(i.default.MIME_TYPE))return a.test(o.mimeType);return!1}function C(e){if(!e)throw new Error("adaptation is not defined");if(e.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||e.hasOwnProperty(i.default.SEGMENT_TIMELINE)||e.hasOwnProperty(i.default.SEGMENT_LIST)||e.hasOwnProperty(i.default.SEGMENT_BASE))return!0;if(e.Representation_asArray&&e.Representation_asArray.length>0){var t=e.Representation_asArray[0];if(t.hasOwnProperty(i.default.SEGMENT_TEMPLATE)||t.hasOwnProperty(i.default.SEGMENT_TIMELINE)||t.hasOwnProperty(i.default.SEGMENT_LIST)||t.hasOwnProperty(i.default.SEGMENT_BASE))return!0}return!1}function A(e){return w(e,r.default.VIDEO)}function I(e){return w(e,r.default.TEXT)}function k(e){return w(e,r.default.IMAGE)}function R(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function P(e,t){return e&&e.Period_asArray&&S(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function D(e){return e&&e.Period_asArray?e.Period_asArray:[]}function O(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===i.default.DYNAMIC),t}function M(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function L(e){if(!e||!e.S_asArray)return NaN;var t=e.S_asArray[0],n=e.S_asArray[1];return t.hasOwnProperty("d")?t.d:n.t-t.t}function N(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=o.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(i.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function x(e,t){var n,a=[];if(!e)return a;for(n=0;n<e.length;n++){var s=new f.default;if(s.timescale=1,s.representation=t,!e[n].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");s.schemeIdUri=e[n].schemeIdUri,e[n].hasOwnProperty(i.default.TIMESCALE)&&(s.timescale=e[n].timescale),e[n].hasOwnProperty(i.default.VALUE)&&(s.value=e[n].value),a.push(s)}return a}function F(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some((function(n){if(n){var a=new c.default,s=n.__text||n;return E.isRelative(s)&&(r=!0,e.baseUri&&(s=E.resolve(s,e.baseUri))),a.url=s,n.hasOwnProperty(i.default.SERVICE_LOCATION)&&n.serviceLocation.length?a.serviceLocation=n.serviceLocation:a.serviceLocation=s,n.hasOwnProperty(i.default.DVB_PRIORITY)&&(a.dvb_priority=n[i.default.DVB_PRIORITY]),n.hasOwnProperty(i.default.DVB_WEIGHT)&&(a.dvb_weight=n[i.default.DVB_WEIGHT]),n.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=n[i.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete="false"!==n[i.default.AVAILABILITY_TIME_COMPLETE]),t.push(a),r}})),t}return e={getIsTypeOf:w,getIsText:I,getIsFragmented:C,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(i.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=P(t,n);return r.length>0&&S(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;for(var r=P(t,n),i=0;i<r.length;i++)if(Object(h.default)(b).getInstance().areEqual(r[i],e))return i;return-1},getAdaptationForId:function(e,t,n){var r,a,s=P(t,n);for(r=0,a=s.length;r<a;r++)if(s[r].hasOwnProperty(i.default.ID)&&s[r].id===e)return s[r];return null},getAdaptationsForType:function(e,t,n){var r,i,a=P(e,t),s=[];for(r=0,i=a.length;r<i;r++)w(a[r],n)&&s.push(R(a[r]));return s},getRealPeriods:D,getRealPeriodForIndex:function(e,t){var n=D(t);return n.length>0&&S(e)?n[e]:null},getCodec:function(e,t,n){var r=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=S(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r&&(r=r.replace(/\sprofiles=[^;]*/g,"")),r},getSelectionPriority:function(e){try{var t=e&&void 0!==e.selectionPriority?parseInt(e.selectionPriority):1;return isNaN(t)?1:t}catch(e){return 1}},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(i.default.CENC_DEFAULT_KID)?e[i.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(i.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:O,getId:function(e){return e&&e[i.default.ID]||null},hasProfile:function(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getPublishTime:function(e){return e&&e.hasOwnProperty(i.default.PUBLISH_TIME)?new Date(e[i.default.PUBLISH_TIME]):null},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=R(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null,id:e.id||null}}))},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&S(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r,s,o=[],u=function(e){if(e&&e.period&&S(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&S(e.index))return R(t.AdaptationSet_asArray[e.index])}}(e);if(u&&u.Representation_asArray){if(e&&e.period&&S(e.period.index)){var l=F(e.period.mpd.manifest);l&&(n=l[0])}for(var d=0,c=u.Representation_asArray.length;d<c;++d){var f=u.Representation_asArray[d],h=new a.default;if(h.index=d,h.adaptation=e,f.hasOwnProperty(i.default.ID)&&(h.id=f.id),f.hasOwnProperty(i.default.CODECS)&&(h.codecs=f.codecs),f.hasOwnProperty(i.default.MIME_TYPE)&&(h.mimeType=f[i.default.MIME_TYPE]),f.hasOwnProperty(i.default.CODEC_PRIVATE_DATA)&&(h.codecPrivateData=f.codecPrivateData),f.hasOwnProperty(i.default.BANDWITH)&&(h.bandwidth=f.bandwidth),f.hasOwnProperty(i.default.WIDTH)&&(h.width=f.width),f.hasOwnProperty(i.default.HEIGHT)&&(h.height=f.height),f.hasOwnProperty(i.default.SCAN_TYPE)&&(h.scanType=f.scanType),f.hasOwnProperty(i.default.MAX_PLAYOUT_RATE)&&(h.maxPlayoutRate=f.maxPlayoutRate),f.hasOwnProperty(i.default.SEGMENT_BASE)?(t=f.SegmentBase,h.segmentInfoType=i.default.SEGMENT_BASE):f.hasOwnProperty(i.default.SEGMENT_LIST)?(t=f.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)?h.segmentInfoType=i.default.SEGMENT_TIMELINE:h.segmentInfoType=i.default.SEGMENT_LIST:f.hasOwnProperty(i.default.SEGMENT_TEMPLATE)?((t=f.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)?h.segmentInfoType=i.default.SEGMENT_TIMELINE:h.segmentInfoType=i.default.SEGMENT_TEMPLATE,t.hasOwnProperty(i.default.INITIALIZATION_MINUS)&&(h.initialization=t.initialization.split("$Bandwidth$").join(f.bandwidth).split("$RepresentationID$").join(f.id))):h.segmentInfoType=i.default.BASE_URL,h.essentialProperties=M(f),t){if(t.hasOwnProperty(i.default.INITIALIZATION)){var p=t.Initialization;p.hasOwnProperty(i.default.SOURCE_URL)&&(h.initialization=p.sourceURL),p.hasOwnProperty(i.default.RANGE)&&(h.range=p.range)}else I(u)&&C(u)&&u.mimeType&&-1===u.mimeType.indexOf("application/mp4")&&(h.range=0);t.hasOwnProperty(i.default.TIMESCALE)&&(h.timescale=t.timescale),t.hasOwnProperty(i.default.DURATION)?h.segmentDuration=t.duration/h.timescale:f.hasOwnProperty(i.default.SEGMENT_TEMPLATE)&&(t=f.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)&&(h.segmentDuration=L(t.SegmentTimeline)/h.timescale),t.hasOwnProperty(i.default.MEDIA)&&(h.media=t.media),t.hasOwnProperty(i.default.START_NUMBER)&&(h.startNumber=t.startNumber),t.hasOwnProperty(i.default.INDEX_RANGE)&&(h.indexRange=t.indexRange),t.hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(h.presentationTimeOffset=t.presentationTimeOffset/h.timescale),t.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)?h.availabilityTimeOffset=t.availabilityTimeOffset:n&&void 0!==n.availabilityTimeOffset&&(h.availabilityTimeOffset=n.availabilityTimeOffset),t.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)?h.availabilityTimeComplete="false"!==t.availabilityTimeComplete:n&&void 0!==n.availabilityTimeComplete&&(h.availabilityTimeComplete=n.availabilityTimeComplete)}h.MSETimeOffset=(void 0,s=(r=h).presentationTimeOffset,r.adaptation.period.start-s),h.path=[e.period.index,e.index,d],o.push(h)}}return o},getAdaptationsForPeriod:function(e){var n,a,o,u=e&&S(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,l=[];if(u&&u.AdaptationSet_asArray)for(o=0;o<u.AdaptationSet_asArray.length;o++)a=u.AdaptationSet_asArray[o],n=new s.default,a.hasOwnProperty(i.default.ID)&&(n.id=a.id),n.index=o,n.period=e,w(a,r.default.MUXED)?n.type=r.default.MUXED:w(a,r.default.AUDIO)?n.type=r.default.AUDIO:A(a)?n.type=r.default.VIDEO:I(a)?n.type=r.default.TEXT:k(a)?n.type=r.default.IMAGE:t.warn("Unknown Adaptation stream type"),l.push(n);return l},getRegularPeriods:function(e){var a,s,u=!!e&&O(e.manifest),l=[],d=null,c=null,f=null,h=null;for(s=0,a=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;s<a;s++)(c=e.manifest.Period_asArray[s]).hasOwnProperty(i.default.START)?(h=new o.default).start=c.start:null!==d&&d.hasOwnProperty(i.default.DURATION)&&null!==f?(h=new o.default).start=parseFloat((f.start+f.duration).toFixed(5)):0!==s||u||((h=new o.default).start=0),null!==f&&isNaN(f.duration)&&(null!==h?f.duration=parseFloat((h.start-f.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==h&&(h.id=N(c,s),h.index=s,h.mpd=e,c.hasOwnProperty(i.default.DURATION)&&(h.duration=c.duration),f&&(f.nextPeriodId=h.id),l.push(h),d=c,f=h),c=null,h=null;return 0===l.length||null!==f&&isNaN(f.duration)&&(f.duration=parseFloat((function(e){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var t,i=O(e.mpd.manifest);return e.mpd.manifest.mediaPresentationDuration?t=e.mpd.manifest.mediaPresentationDuration:e.duration?t=e.duration:i?t=Number.POSITIVE_INFINITY:n.error(new y.default(v.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e)),t}(f)-f.start).toFixed(5))),l},getMpd:function(e){var t=new u.default;return e&&(t.manifest=e,e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(i.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(i.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(i.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration),e.hasOwnProperty(i.default.PUBLISH_TIME)&&(t.publishTime=new Date(e.publishTime))),t},getEventsForPeriod:function(e){var t,n,a=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,s=a?a.Period_asArray:null,o=s&&e&&S(e.index)?s[e.index].EventStream_asArray:null,u=[];if(o)for(t=0;t<o.length;t++){var l=new f.default;if(l.period=e,l.timescale=1,!o[t].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=o[t][r.default.SCHEME_ID_URI],o[t].hasOwnProperty(i.default.TIMESCALE)&&(l.timescale=o[t][i.default.TIMESCALE]),o[t].hasOwnProperty(i.default.VALUE)&&(l.value=o[t][i.default.VALUE]),o[t].hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(l.presentationTimeOffset=o[t][i.default.PRESENTATION_TIME_OFFSET]),n=0;o[t].Event_asArray&&n<o[t].Event_asArray.length;n++){var c=o[t].Event_asArray[n],h=new d.default;if(h.presentationTime=0,h.eventStream=l,c.hasOwnProperty(i.default.PRESENTATION_TIME)){h.presentationTime=c.presentationTime;var p=l.presentationTimeOffset?l.presentationTimeOffset/l.timescale:0;h.calculatedPresentationTime=h.presentationTime/l.timescale+e.start-p}c.hasOwnProperty(i.default.DURATION)&&(h.duration=c.duration/l.timescale),c.hasOwnProperty(i.default.ID)&&(h.id=c.id),c.Signal&&c.Signal.Binary?h.messageData=m.decodeArray(c.Signal.Binary.toString()):h.messageData=c.messageData||c.__text,u.push(h)}}return u},getEssentialPropertiesForRepresentation:M,getEventStreamForAdaptationSet:function(e,t){var n,r,i;return e&&e.Period_asArray&&t&&t.period&&S(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&S(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),x(n,null)},getEventStreamForRepresentation:function(e,t){var n,r,i,a;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&S(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&S(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&S(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),x(n,t)},getUTCTimingSources:function(e){var t=O(e),n=!!e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME),a=e?e.UTCTiming_asArray:null,s=[];return(t||n)&&a&&a.forEach((function(e){var t=new l.default;e.hasOwnProperty(r.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(i.default.VALUE)&&(t.value=e.value.toString(),s.push(t)))})),s},getBaseURLsFromElement:F,getRepresentationSortFunction:function(){return function(e,t){return e.bandwidth-t.bandwidth}},getLocation:function(e){if(e&&e.hasOwnProperty(r.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getPatchLocation:function(e){if(e&&e.hasOwnProperty(i.default.PATCH_LOCATION))return e.PatchLocation=e.PatchLocation_asArray[0],e.PatchLocation},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(i.default.SERVICE_DESCRIPTION)){var n,a=T(e.ServiceDescription_asArray);try{for(a.s();!(n=a.n()).done;){var s=n.value,o=void 0,u=void 0,l=void 0,d=void 0;for(var c in s)s.hasOwnProperty(c)&&(c===i.default.ID?o=s[c]:c===i.default.SERVICE_DESCRIPTION_SCOPE?u=s[c].schemeIdUri:c===i.default.SERVICE_DESCRIPTION_LATENCY?l={target:s[c].target,max:s[c].max,min:s[c].min}:c===i.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(d={max:s[c].max,min:s[c].min}));u===r.default.SERVICE_DESCRIPTION_LL_SCHEME&&(l||d)&&t.push({id:o,schemeIdUri:u,latency:l,playbackRate:d})}}catch(e){a.e(e)}finally{a.f()}}return t},getSupplementalProperties:function(e){var t={};if(e&&e.hasOwnProperty(i.default.SUPPLEMENTAL_PROPERTY)){var n,a=T(e.SupplementalProperty_asArray);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.hasOwnProperty(r.default.SCHEME_ID_URI)&&s.hasOwnProperty(i.default.VALUE)&&(t[s[r.default.SCHEME_ID_URI]]=s[i.default.VALUE])}}catch(e){a.e(e)}finally{a.f()}}return t},setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64&&(m=e.BASE64))}},t=Object(g.default)(b).getInstance().getLogger(e),e}E.__dashjs_factory_name="DashManifestModel",t.default=m.default.getSingletonFactory(E)},"./src/dash/models/PatchManifestModel.js":function(e,t,n){n.r(t);var r=n("./src/dash/constants/DashConstants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js"),s=n("./src/dash/vo/SimpleXPath.js"),o=n("./src/dash/vo/PatchOperation.js");function u(){var e,t,n=this.context;return e={getIsPatch:function(e){return e&&e.hasOwnProperty(r.default.ORIGINAL_MPD_ID)||!1},getPublishTime:function(e){return e&&e.hasOwnProperty(r.default.PUBLISH_TIME)?new Date(e[r.default.PUBLISH_TIME]):null},getOriginalPublishTime:function(e){return e&&e.hasOwnProperty(r.default.ORIGINAL_PUBLISH_TIME)?new Date(e[r.default.ORIGINAL_PUBLISH_TIME]):null},getMpdId:function(e){return e&&e[r.default.ORIGINAL_MPD_ID]||null},getPatchOperations:function(e){return e?(e.__children||[]).map((function(e){var n=Object.keys(e)[0];if("add"!==n&&"remove"!==n&&"replace"!==n)return t.warn("Ignoring node of invalid action: ".concat(n)),null;var r=e[n],i=r.sel;if("add"===n&&r.type){if(!r.type.startsWith("@"))return t.warn("Ignoring add action for prefixed namespace declaration: ".concat(r.type,"=").concat(r.__text)),null;i="".concat(i,"/").concat(r.type)}var a=new s.default(i);if(!a.isValid())return t.warn("Ignoring action with invalid selector: ".concat(n," - ").concat(i)),null;var u=null;a.findsAttribute()?u=r.__text||"":"remove"!==n&&(u=r.__children.reduce((function(e,t){var n=Object.keys(t)[0];return"#text"!==n&&(e[n]=e[n]||[],e[n].push(t[n])),e}),{}));var l=new o.default(n,a,u);return"add"===n&&(l.position=r.pos),l})).filter((function(e){return!!e})):[]}},t=Object(a.default)(n).getInstance().getLogger(e),e}u.__dashjs_factory_name="PatchManifestModel",t.default=i.default.getSingletonFactory(u)},"./src/dash/parser/DashParser.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/dash/parser/objectiron.js"),a=n("./externals/xml2json.js"),s=n("./src/dash/parser/matchers/StringMatcher.js"),o=n("./src/dash/parser/matchers/DurationMatcher.js"),u=n("./src/dash/parser/matchers/DateTimeMatcher.js"),l=n("./src/dash/parser/matchers/NumericMatcher.js"),d=n("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),c=n("./src/dash/parser/maps/SegmentValuesMap.js");function f(e){e=e||{};var t,n,r,f,h,p=this.context,m=e.debug;return t={parse:function(e){var t,r=window.performance.now();if(!(t=f.xml_str2json(e)))throw new Error("parsing the manifest failed");var i=window.performance.now();t.Patch?((t=t.Patch).add_asArray&&t.add_asArray.forEach((function(e){return h.run(e)})),t.replace_asArray&&t.replace_asArray.forEach((function(e){return h.run(e)}))):(t=t.MPD,h.run(t));var a=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(i-r).toPrecision(3)+"ms, objectiron: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),t.protocol="DASH",t},getMatchers:function(){return r},getIron:function(){return h}},n=m.getLogger(t),r=[new o.default,new u.default,new l.default,new s.default],f=new a.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:r}),h=Object(i.default)(p).create({adaptationset:new d.default,period:new c.default}),t}f.__dashjs_factory_name="DashParser",t.default=r.default.getClassFactory(f)},"./src/dash/parser/maps/CommonProperty.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t,this._merge=(n=t)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}var t,n;return t=e,(n=[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}])&&r(t.prototype,n),e}();t.default=i},"./src/dash/parser/maps/MapNode.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/maps/CommonProperty.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n,i){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t||"",this._properties=[],this._children=i||[],Array.isArray(n)&&n.forEach((function(e){a._properties.push(new r.default(e))}))}var t,n;return t=e,(n=[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}])&&i(t.prototype,n),e}();t.default=a},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=u(t);if(n){var i=u(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return o(this,e)});function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var e=[i.default.PROFILES,i.default.WIDTH,i.default.HEIGHT,i.default.SAR,i.default.FRAMERATE,i.default.AUDIO_SAMPLING_RATE,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.MAXIMUM_SAP_PERIOD,i.default.START_WITH_SAP,i.default.MAX_PLAYOUT_RATE,i.default.CODING_DEPENDENCY,i.default.SCAN_TYPE,i.default.FRAME_PACKING,i.default.AUDIO_CHANNEL_CONFIGURATION,i.default.CONTENT_PROTECTION,i.default.ESSENTIAL_PROPERTY,i.default.SUPPLEMENTAL_PROPERTY,i.default.INBAND_EVENT_STREAM];return a.call(this,i.default.ADAPTATION_SET,e,[new r.default(i.default.REPRESENTATION,e,[new r.default(i.default.SUB_REPRESENTATION,e)])])}return l}(r.default);t.default=l},"./src/dash/parser/maps/SegmentValuesMap.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/maps/MapNode.js"),i=n("./src/dash/constants/DashConstants.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function o(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(l,e);var t,n,a=(t=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=u(t);if(n){var i=u(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return o(this,e)});function l(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var e=[i.default.SEGMENT_BASE,i.default.SEGMENT_TEMPLATE,i.default.SEGMENT_LIST];return a.call(this,i.default.PERIOD,e,[new r.default(i.default.ADAPTATION_SET,e,[new r.default(i.default.REPRESENTATION,e)])])}return l}(r.default);t.default=l},"./src/dash/parser/matchers/BaseMatcher.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._test=t,this._converter=n}var t,n;return t=e,(n=[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}])&&r(t.prototype,n),e}();t.default=i},"./src/dash/parser/matchers/DateTimeMatcher.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}var u=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return s(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,(function(e){return u.test(e.value)}),(function(e){var t,n=u.exec(e);if(t=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0),n[9]&&n[10]){var r=60*parseInt(n[9],10)+parseInt(n[10],10);t+=("+"===n[8]?-1:1)*r*60*1e3}return new Date(t)}))}return i}(r.default);t.default=l},"./src/dash/parser/matchers/DurationMatcher.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/constants/DashConstants.js");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,e);var t,n,r=(t=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var i=l(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.call(this,(function(e){for(var t=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,a.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,i.default.START_TIME,a.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return d.test(e.value);return!1}),(function(e){var t=d.exec(e),n=31536e3*parseFloat(t[3]||0)+2592e3*parseFloat(t[5]||0)+86400*parseFloat(t[7]||0)+3600*parseFloat(t[9]||0)+60*parseFloat(t[11]||0)+parseFloat(t[13]||0);return void 0!==t[1]&&(n=-n),n}))}return s}(r.default);t.default=c},"./src/dash/parser/matchers/NumericMatcher.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}var u=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return s(this,e)});function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r.call(this,(function(e){return u.test(e.value)}),(function(e){return parseFloat(e)}))}return i}(r.default);t.default=l},"./src/dash/parser/matchers/StringMatcher.js":function(e,t,n){n.r(t);var r=n("./src/dash/parser/matchers/BaseMatcher.js"),i=n("./src/dash/constants/DashConstants.js");function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(a,e);var t,n,r=(t=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=l(t);if(n){var i=l(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return u(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.call(this,(function(e,t){var n,r=(s(n={},i.default.MPD,[i.default.ID,i.default.PROFILES]),s(n,i.default.PERIOD,[i.default.ID]),s(n,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),s(n,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),s(n,i.default.INITIALIZATION,[i.default.RANGE]),s(n,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),s(n,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),s(n,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),s(n,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),s(n,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),s(n,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),s(n,i.default.EVENT_STREAM,[i.default.VALUE]),s(n,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),s(n,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),s(n,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),s(n,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),s(n,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),s(n,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),s(n,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),s(n,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),s(n,i.default.ROLE,[i.default.VALUE,i.default.ID]),s(n,i.default.RATING,[i.default.VALUE,i.default.ID]),s(n,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),s(n,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),s(n,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),s(n,i.default.SUBSET,[i.default.ID]),s(n,i.default.METRICS,[i.default.METRICS_MINUS]),s(n,i.default.REPORTING,[i.default.VALUE,i.default.ID]),n);if(r.hasOwnProperty(t)){var a=r[t];return void 0!==a&&a.indexOf(e.name)>=0}return!1}),(function(e){return String(e)}))}return a}(r.default);t.default=d},"./src/dash/parser/objectiron.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,r){for(var a=0,s=e.length;a<s;++a){var o=e[a];if(n[o.name])if(r[o.name]){if(o.merge){var u=n[o.name],l=r[o.name];"object"===i(u)&&"object"===i(l)?t(u,l):r[o.name]=u+l}}else r[o.name]=n[o.name]}}function r(e,t){for(var i=0,a=e.children.length;i<a;++i){var s=e.children[i],o=t[s.name+"_asArray"];if(o)for(var u=0,l=o.length;u<l;++u){var d=o[u];n(e.properties,t,d),r(s,d)}}}return{run:function(t){if(null===t||"object"!==i(t))return t;if(t.Period_asArray&&"period"in e)for(var n=e.period,a=t.Period_asArray,s=0,o=a.length;s<o;++s){var u=a[s];if(r(n,u),"adaptationset"in e){var l=u.AdaptationSet_asArray;if(l)for(var d=e.adaptationset,c=0,f=l.length;c<f;++c)r(d,l[c])}}return t}}}a.__dashjs_factory_name="ObjectIron";var s=r.default.getClassFactory(a);t.default=s},"./src/dash/utils/ListSegmentsGetter.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function s(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function s(e,i){if(r(),!e)return null;var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,o=s.SegmentURL_asArray.length,u=e&&!isNaN(e.startNumber)?e.startNumber:1,l=Math.max(u-1,0),d=Math.max(i-l,0),c=null;if(d<o){var f=s.SegmentURL_asArray[d];(c=Object(a.getIndexBasedSegment)(n,t,e,i))&&(c.replacementTime=(u+i-1)*e.segmentDuration,c.media=f.media?f.media:"",c.mediaRange=f.mediaRange,c.indexRange=f.indexRange)}return c}return{getSegmentByIndex:s,getSegmentByTime:function(e,t){if(r(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return s(e,Math.floor(a/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var n=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,r=e&&!isNaN(e.startNumber)?e.startNumber:1,i=Math.max(r-1,0);return t.numberOfSegments=i+n.SegmentURL_asArray.length,t}}}s.__dashjs_factory_name="ListSegmentsGetter";var o=r.default.getClassFactory(s);t.default=o},"./src/dash/utils/Round10.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"default",(function(){return i}));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"round10",value:function(e,t){return function(e,t,n){return void 0===n||0==+n?Math.round(t):(n=+n,null===(t=+t)||isNaN(t)||"number"!=typeof n||n%1!=0?NaN:(t=t.toString().split("e"),+((t=(t=Math.round(+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))))}(0,e,t)}}],null&&r(t.prototype,null),n&&r(t,n),e}()},"./src/dash/utils/SegmentBaseGetter.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js");function a(e){var t=(e=e||{}).timelineConverter;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(e,t){if(n(),!e)return null;var r,i=e.segments?e.segments.length:-1;if(t<i&&(r=e.segments[t])&&r.index===t)return r;for(var a=0;a<i;a++)if((r=e.segments[a])&&r.index===t)return r;return null}return{getSegmentByIndex:r,getSegmentByTime:function(e,t){n();var i=function(e,t){if(!e)return-1;var n,r,i,a,s,o=e.segments,u=o?o.length:null,l=-1;if(o&&u>0)for(s=0;s<u;s++)if(i=(r=o[s]).presentationStartTime,t+(n=(a=r.duration)/2)>=i&&t-n<i+a){l=r.index;break}return l}(e,t);return r(e,i)},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return e&&e.segments?(t.numberOfSegments=e.segments.length,t):t}}}a.__dashjs_factory_name="SegmentBaseGetter";var s=r.default.getClassFactory(a);t.default=s},"./src/dash/utils/SegmentsUtils.js":function(e,t,n){n.r(t),n.d(t,"unescapeDollarsInTemplate",(function(){return a})),n.d(t,"replaceIDForTemplate",(function(){return s})),n.d(t,"replaceTokenForTemplate",(function(){return o})),n.d(t,"getIndexBasedSegment",(function(){return d})),n.d(t,"getTimeBasedSegment",(function(){return c}));var r=n("./src/dash/vo/Segment.js");function i(e,t){for(;e.length<t;)e="0"+e;return e}function a(e){return e?e.split("$$").join("$"):e}function s(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)}function o(e,t,n){var r,a,s,o,u,l,d=t.length,c="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((a=e.indexOf("$",r+d))<0)return e;if((s=e.indexOf("%0",r+d))>r&&s<a)switch(o=e.charAt(a-1),u=parseInt(e.substring(s+c,a-1),10),o){case"d":case"i":case"u":l=i(n.toString(),u);break;case"x":l=i(n.toString(16),u);break;case"X":l=i(n.toString(16),u).toUpperCase();break;case"o":l=i(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(a+1)}}function u(e,t,n,i,a,s,o,u){var l,d=new r.default;return d.representation=e,d.duration=t,d.presentationStartTime=n,d.mediaStartTime=i,d.availabilityStartTime=a.calcAvailabilityStartTimeFromPresentationTime(s,e,o),d.availabilityEndTime=a.calcAvailabilityEndTimeFromPresentationTime(s+t,e,o),d.wallStartTime=a.calcWallTimeForSegment(d,o),d.replacementNumber=(l=u,d.representation.startNumber+l),d.index=u,d}function l(e,t,n,r){var i=t.adaptation.period;if(isFinite(i.duration)&&i.start+i.duration<=n.presentationStartTime)return!1;if(r){if("INF"===t.availabilityTimeOffset)return!0;var a=e.getClientReferenceTime();return n.availabilityStartTime.getTime()<=a&&(!isFinite(n.availabilityEndTime)||n.availabilityEndTime.getTime()>=a)}return!0}function d(e,t,n,r){var i,a,s;i=n.segmentDuration,isNaN(i)&&(i=n.adaptation.period.duration),a=parseFloat((n.adaptation.period.start+r*i).toFixed(5)),s=parseFloat((a+i).toFixed(5));var o=u(n,i,a,e.calcMediaTimeFromPresentationTime(a,n),e,s,t,r);return l(e,n,o,t)?o:null}function c(e,t,n,r,i,a,s,d,c,f){var h,p,m=r/a,g=i/a;return h=e.calcPresentationTimeFromMediaTime(m,n),l(e,n,p=u(n,g,h,m,e,h+g,t,c),t)?(p.replacementTime=f||r,s=o(s,"Number",p.replacementNumber),s=o(s,"Time",p.replacementTime),p.media=s,p.mediaRange=d,p):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function s(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function s(e,i){if(r(),!e)return null;var s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;i=Math.max(i,0);var o=Object(a.getIndexBasedSegment)(n,t,e,i);if(o){o.replacementTime=Math.round((i-1)*e.segmentDuration*e.timescale,10);var u=s.media;u=Object(a.replaceTokenForTemplate)(u,"Number",o.replacementNumber),u=Object(a.replaceTokenForTemplate)(u,"Time",o.replacementTime),o.media=u}return o}return{getSegmentByIndex:s,getSegmentByTime:function(e,t){if(r(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return s(e,Math.floor(a/i))},getMediaFinishedInformation:function(e){var t={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!e)return t;var n=e.segmentDuration;return isNaN(n)?t.numberOfSegments=1:t.numberOfSegments=Math.ceil(e.adaptation.period.duration/n),t}}}s.__dashjs_factory_name="TemplateSegmentsGetter";var o=r.default.getClassFactory(s);t.default=o},"./src/dash/utils/TimelineConverter.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/dash/constants/DashConstants.js"),o=n("./src/dash/models/DashManifestModel.js"),u=n("./src/core/Settings.js"),l=n("./src/streaming/constants/Constants.js"),d=n("./src/streaming/MediaPlayerEvents.js"),c=n("./src/streaming/constants/ConformanceViolationConstants.js");function f(){var e,t,n,a,f=this.context,h=Object(r.default)(f).getInstance(),p=Object(u.default)(f).getInstance();function m(e){a=e}function g(e,t,n,r){var i,a=t.adaptation.period.mpd,s=a.availabilityStartTime;if(r)i=n&&a.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(s.getTime()+1e3*(e+a.timeShiftBufferDepth)):a.availabilityEndTime;else if(n){var o=t.availabilityTimeOffset;i=new Date(s.getTime()+1e3*(e-o))}else i=s;return i}function y(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*a)/1e3}function v(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)}function _(e){var n={start:NaN,end:NaN},r=e[0].getAdapter().getRegularPeriods()[0],i=y(new Date,r);if(!e||0===e.length)return{range:n,now:i};e.forEach((function(e){var r=e.getAdapter(),a=r.getMediaInfoForType(e.getStreamInfo(),l.default.VIDEO)||r.getMediaInfoForType(e.getStreamInfo(),l.default.AUDIO),o=r.getVoRepresentations(a)[0],u={start:NaN,end:NaN};if(o)if(o.segmentInfoType===s.default.SEGMENT_TIMELINE)u=function(e){var n,r,i,a,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],o=t.getRepresentationFor(e.index,s),u=o.SegmentTemplate.SegmentTimeline,l=o.SegmentTemplate.timescale,d=u.S_asArray,c={start:0,end:0},f=0;for(c.start=v(d[0].t/l,e),i=0,a=d.length;i<a;i++)r=0,(n=d[i]).hasOwnProperty("r")&&(r=n.r),f+=n.d/l*(1+r);return c.end=c.start+f,c}(o);else{var d=o.adaptation.period;u.start=d.start,u.end=Math.max(i,d.start+d.duration)}!isNaN(u.start)&&(isNaN(n.start)||n.start>u.start)&&(n.start=u.start),!isNaN(u.end)&&(isNaN(n.end)||n.end<u.end)&&(n.end=u.end)})),n.end=Math.min(i,n.end);var a=b(e,n.end,!0);return n.end=isNaN(a)?n.end:a,n.start=r&&r.mpd&&r.mpd.timeShiftBufferDepth&&!isNaN(r.mpd.timeShiftBufferDepth)&&!isNaN(n.end)?Math.max(n.end-r.mpd.timeShiftBufferDepth,n.start):n.start,n.start=b(e,n.start),{range:n,now:i}}function T(e,t){n=e-t.end}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{for(var r=0,i=!1,a=NaN;!i&&r<e.length;){var s=e[r].getStreamInfo();s.start<=t&&(!isFinite(s.duration)||s.start+s.duration>=t)?(a=t,i=!0):!n&&s.start>t&&(isNaN(a)||s.start<a)?a=s.start:n&&s.start+s.duration<t&&(isNaN(a)||s.start+s.duration>a)&&(a=s.start+s.duration),r+=1}return a}catch(e){return t}}function E(e){void 0===e.offset||isNaN(e.offset)||m(e.offset/1e3)}function S(){a=0,n=0}function w(){h.off(i.default.UPDATE_TIME_SYNC_OFFSET,E,this),S()}return e={initialize:function(){S(),h.on(i.default.UPDATE_TIME_SYNC_OFFSET,E,this)},getClientTimeOffset:function(){return a},setClientTimeOffset:m,getClientReferenceTime:function(){return Date.now()-1e3*n+1e3*a},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return g(e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return g(e,t,n,!0)},calcPresentationTimeFromWallTime:y,calcPresentationTimeFromMediaTime:v,calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcWallTimeForSegment:function(e,t){var n,r,i;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},calcTimeShiftBufferWindow:function(e,t){if(!t)return function(e){var t={start:NaN,end:NaN},n=0,r=NaN;return e.forEach((function(e){var t=e.getStreamInfo();n+=t.duration,(isNaN(r)||t.start<r)&&(r=t.start)})),t.start=r,t.end=r+n,t}(e);if(p.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var n=_(e);return T(n.now,n.range),n.range}return function(e){var t={start:NaN,end:NaN};if(!e||0===e.length)return t;var n=e[0].getAdapter().getRegularPeriods()[0],r=y(new Date,n),i=n.mpd.timeShiftBufferDepth,a=isNaN(i)?0:r-i;if(t.start=b(e,a),t.end=!isNaN(t.start)&&r<t.start?r:b(e,r,!0),!isNaN(i)&&t.end<r-i&&(t.end=NaN),p.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var s=_(e);if(s.range.end<t.start)return h.trigger(d.default.CONFORMANCE_VIOLATION,{level:c.default.LEVELS.WARNING,event:c.default.EVENTS.INVALID_DVR_WINDOW}),T(s.now,s.range),s.range}return t}(e)},reset:w},t=Object(o.default)(f).getInstance(),w(),e}f.__dashjs_factory_name="TimelineConverter",t.default=a.default.getSingletonFactory(f)},"./src/dash/utils/TimelineSegmentsGetter.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/dash/utils/SegmentsUtils.js");function s(e,t){var n=(e=e||{}).timelineConverter,r=e.dashMetrics;function s(){if(!n)throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(e,t){var n,r,i,a,s,o,l,d=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,c=d.SegmentTimeline,f=d.SegmentURL_asArray,h=0,p=0,m=-1;l=e.timescale;var g=!1;for(i=0,a=(n=c.S_asArray).length;i<a&&!g;i++)for(o=0,(r=n[i]).hasOwnProperty("r")&&(o=r.r),r.hasOwnProperty("t")&&(p=(h=r.t)/l),o<0&&(o=u(e,n[i+1],r,l,p)),s=0;s<=o&&!g;s++)(g=t(h,p,d,f,r,l,++m,i))&&(e.segmentDuration=r.d/l),p=(h+=r.d)/l}function u(e,t,i,a,s){var o;if(t&&t.hasOwnProperty("t"))o=t.t/a;else try{var u=0;if(isNaN(e.adaptation.period.start)||isNaN(e.adaptation.period.duration)||!isFinite(e.adaptation.period.duration)){var l=r.getCurrentDVRInfo();u=isNaN(l.end)?0:l.end}else u=e.adaptation.period.start+e.adaptation.period.duration;o=n.calcMediaTimeFromPresentationTime(u,e),e.segmentDuration=i.d/a}catch(e){o=0}return Math.max(Math.ceil((o-s)/(i.d/a))-1,0)}return{getSegmentByIndex:function(e,r,i){if(s(),!e)return null;var u=null,l=!1;return o(e,(function(r,s,o,d,c,f,h,p){if(l||i<0){var m=o.media,g=c.mediaRange;return d&&(m=d[p].media||"",g=d[p].mediaRange),u=Object(a.getTimeBasedSegment)(n,t,e,r,c.d,f,m,g,h,c.tManifest),!0}return s>=i-.5*c.d/f&&(l=!0),!1})),u},getSegmentByTime:function(e,r){if(s(),!e)return null;void 0===r&&(r=null);var i=null,u=n.calcMediaTimeFromPresentationTime(r,e);return o(e,(function(r,s,o,l,d,c,f,h){if(u<s+d.d/c){var p=o.media,m=d.mediaRange;return l&&(p=l[h].media||"",m=l[h].mediaRange),i=Object(a.getTimeBasedSegment)(n,t,e,r,d.d,c,p,m,f,d.tManifest),!0}return!1})),i},getMediaFinishedInformation:function(e){if(!e)return 0;var t,n,r,i,a,s,o,l=(e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList).SegmentTimeline,d=0,c=0,f=0;for(o=e.timescale,i=(t=l.S_asArray).length,r=0;r<i;r++)for(s=0,(n=t[r]).hasOwnProperty("r")&&(s=n.r),n.hasOwnProperty("t")&&(c=(d=n.t)/o),s<0&&(s=u(e,t[r+1],n,o,c)),a=0;a<=s;a++)f++,c=(d+=n.d)/o;return{numberOfSegments:f,mediaTimeOfLastSignaledSegment:c}}}}s.__dashjs_factory_name="TimelineSegmentsGetter";var o=r.default.getClassFactory(s);t.default=o},"./src/dash/vo/AdaptationSet.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null}},"./src/dash/vo/BaseURL.js":function(e,t,n){n.r(t);var r=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=r||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,t.default=r},"./src/dash/vo/Event.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},"./src/dash/vo/EventStream.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},"./src/dash/vo/ManifestInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},"./src/dash/vo/MediaInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1}},"./src/dash/vo/Mpd.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},"./src/dash/vo/PatchOperation.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=t,this.xpath=n,this.value=r,this.position=null}var t,n;return t=e,(n=[{key:"getMpdTarget",value:function(e){var t="remove"===this.action||"replace"===this.action||"before"===this.position||"after"===this.position;return this.xpath.getMpdTarget(e,t)}}])&&r(t.prototype,n),e}();t.default=i},"./src/dash/vo/Period.js":function(e,t,n){n.r(t);var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null};r.DEFAULT_ID="defaultId",t.default=r},"./src/dash/vo/Representation.js":function(e,t,n){n.r(t);var r=n("./src/dash/constants/DashConstants.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}var t,n;return t=e,(n=[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==r.default.BASE_URL&&this.segmentInfoType!==r.default.SEGMENT_BASE&&!this.indexRange}}])&&i(t.prototype,n),e}();t.default=a},"./src/dash/vo/RepresentationInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},"./src/dash/vo/Segment.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null}},"./src/dash/vo/SimpleXPath.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.valid="/"==t[0],this.path=t.split("/").filter((function(e){return 0!==e.length})).map((function(e){var t={name:e},r=e.indexOf("[");if(-1!=r){t.name=e.substring(0,r);var i=e.substring(r+1,e.length-1);n.valid=n.valid&&-1==i.indexOf("[");var a=i.indexOf("=");-1!=a?(t.attribute={name:i.substring(1,a),value:i.substring(a+1)},-1!=["'",'"'].indexOf(t.attribute.value[0])&&(t.attribute.value=t.attribute.value.substring(1,t.attribute.value.length-1))):t.position=parseInt(i,10)-1}return t}))}var t,n;return t=e,(n=[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(e,t){for(var n=null,r=e,i=1,a="MPD";i<this.path.length&&null!==r;){n=r;var s=this.path[i];if(a=s.name,i!==this.path.length-1||!a.startsWith("@")){var o=n[a+"_asArray"]||[];0===o.length&&n[a]&&o.push(n[a]),s.position?r=o[s.position]||null:s.attribute?function(){var e=s.attribute;r=o.filter((function(t){return t[e.name]==e.value}))[0]||null}():r=o[0]||null}i++}return null===r?null:a.startsWith("@")?{name:a.substring(1),leaf:r,target:r}:{name:a,leaf:r,target:t?n:r}}}])&&r(t.prototype,n),e}();t.default=i},"./src/dash/vo/StreamInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},"./src/dash/vo/UTCTiming.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""}},"./src/streaming/FragmentLoader.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/HeadRequest.js"),s=n("./src/streaming/vo/DashJSError.js"),o=n("./src/core/FactoryMaker.js");function u(e){e=e||{};var t,n,o=this.context,u=e.eventBus,l=e.events,d=e.urlUtils,c=e.errors,f=e.streamId;return t={checkForExistence:function(e){var t=function(t){u.trigger(l.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var r=new a.default(e.url);n.load({request:r,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){var r=function(n,r){u.trigger(l.LOADING_COMPLETED,{request:e,response:n||null,error:r||null,sender:t})};e?n.load({request:e,progress:function(n){u.trigger(l.LOADING_PROGRESS,{request:e,stream:n.stream,streamId:f}),n.data&&u.trigger(l.LOADING_DATA_PROGRESS,{request:e,response:n.data||null,error:null,sender:t})},success:function(e){r(e)},error:function(e,t,n){r(void 0,new s.default(c.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,n,t))},abort:function(e){e&&u.trigger(l.LOADING_ABANDONED,{mediaType:e.mediaType,request:e,sender:t})}}):r(void 0,new s.default(c.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,c.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){n&&n.abort()},reset:function(){n&&(n.abort(),n=null)}},n=Object(i.default)(o).create({errHandler:e.errHandler,errors:c,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:d,constants:r.default,boxParser:e.boxParser,dashConstants:e.dashConstants,requestTimeout:e.settings.get().streaming.fragmentRequestTimeout}),t}u.__dashjs_factory_name="FragmentLoader",t.default=o.default.getClassFactory(u)},"./src/streaming/ManifestLoader.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/controllers/XlinkController.js"),s=n("./src/streaming/net/URLLoader.js"),o=n("./src/streaming/utils/URLUtils.js"),u=n("./src/streaming/vo/TextRequest.js"),l=n("./src/streaming/vo/DashJSError.js"),d=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/core/EventBus.js"),f=n("./src/core/events/Events.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/core/FactoryMaker.js"),m=n("./src/dash/parser/DashParser.js");function g(e){e=e||{};var t,n,p,g,y,v=this.context,_=e.debug,T=Object(c.default)(v).getInstance(),b=Object(o.default)(v).getInstance(),E=e.mssHandler,S=e.errHandler;function w(e){T.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return t={load:function(e){var t=new u.default(e,d.HTTPRequest.MPD_TYPE);p.load({request:t,success:function(t,i,a){var s,o,u;if(g)if(a&&a!==e?(o=b.parseBaseUrl(a),s=a):(b.isRelative(e)&&(e=b.resolve(e,window.location.href)),o=b.parseBaseUrl(e)),"No Content"!=i)if(null===y&&(y=function(e){var t=null;return e.indexOf("SmoothStreamingMedia")>-1?(E&&(t=E.createMssParser(),E.registerEvents()),t):e.indexOf("MPD")>-1||e.indexOf("Patch")>-1?Object(m.default)(v).create({debug:_}):t}(t)),null!==y){g.setMatchers(y.getMatchers()),g.setIron(y.getIron());try{u=y.parse(t)}catch(t){return void T.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}u?(u.url=s||e,u.originalUrl||(u.originalUrl=u.url),u.hasOwnProperty(r.default.LOCATION)&&(o=b.parseBaseUrl(u.Location_asArray[0]),n.debug("BaseURI set by Location to: "+o)),u.baseUri=o,u.loadedTime=new Date,g.resolveManifestOnLoad(u),T.trigger(f.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:t})):T.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))})}else T.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(e))});else T.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(t,n,r){T.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new l.default(h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(e,", ").concat(r))})}})},reset:function(){T.off(f.default.XLINK_READY,w,t),E&&E.reset(),g&&(g.reset(),g=null),p&&(p.abort(),p=null)}},n=_.getLogger(t),T.on(f.default.XLINK_READY,w,t),p=Object(s.default)(v).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,urlUtils:b,constants:r.default,dashConstants:i.default,errors:h.default}),g=Object(a.default)(v).create({errHandler:S,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),y=null,t}g.__dashjs_factory_name="ManifestLoader";var y=p.default.getClassFactory(g);t.default=y},"./src/streaming/ManifestUpdater.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/streaming/MediaPlayerEvents.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/core/Debug.js"),u=n("./src/core/errors/Errors.js"),l=n("./src/dash/constants/DashConstants.js"),d=n("./src/streaming/utils/URLUtils.js");function c(){var e,t,n,s,c,f,h,p,m,g,y,v,_=this.context,T=Object(r.default)(_).getInstance(),b=Object(d.default)(_).getInstance();function E(){n=NaN,h=!1,c=!0,f=!1,S()}function S(){null!==s&&(clearTimeout(s),s=null)}function w(e){S(),f||(isNaN(e)&&!isNaN(n)&&(e=1e3*n),isNaN(e)||(t.debug("Refresh manifest in "+e+" milliseconds."),s=setTimeout(I,e)))}function C(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h=!0;var t=m.getValue(),n=t.url,r=g.getPatchLocation(t),i=g.getLocation(t);r&&!e?n=r:i&&(n=i),b.isRelative(n)&&(n=b.resolve(n,t.url)),p.load(n)}function A(e){if(e){if(g.getIsPatch(e)){var r=e;e=m.getValue();var a=g.isPatchValid(e,r),s=a;if(a){var o=g.getPublishTime(e);s=g.applyPatchToManifest(e,r);var u=g.getPublishTime(e);s=o.getTime()!=u.getTime()}if(!s)return t.debug("Patch provided is invalid, performing full manifest refresh"),void C(!0);e.loadedTime=new Date}}else(e=m.getValue()).loadedTime=new Date;if(m.getValue()&&m.getValue().type===l.default.DYNAMIC&&e.type===l.default.STATIC)return T.trigger(i.default.DYNAMIC_TO_STATIC),h=!1,void(f=!0);m.setValue(e);var d=new Date,p=(d.getTime()-e.loadedTime.getTime())/1e3;1e3*(n=g.getManifestUpdatePeriod(e,p))>2147483647&&(n=2147483.647),T.trigger(i.default.MANIFEST_UPDATED,{manifest:e}),t.info("Manifest has been refreshed at "+d+"["+d.getTime()/1e3+"] "),c||w()}function I(){c||(h?w(v.get().streaming.manifestUpdateRetryInterval):C())}function k(e){e.error?e.error.code===u.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&y.error(e.error):A(e.manifest)}function R(){c=!1,w()}function P(){(c=!v.get().streaming.scheduling.scheduleWhilePaused)&&S()}function D(){h=!1}return e={initialize:function(){E(),T.on(i.default.STREAMS_COMPOSED,D,this),T.on(a.default.PLAYBACK_STARTED,R,this),T.on(a.default.PLAYBACK_PAUSED,P,this),T.on(i.default.INTERNAL_MANIFEST_LOADED,k,this)},setManifest:function(e){A(e)},refreshManifest:C,getIsUpdating:function(){return h},setConfig:function(e){e&&(e.manifestModel&&(m=e.manifestModel),e.adapter&&(g=e.adapter),e.manifestLoader&&(p=e.manifestLoader),e.errHandler&&(y=e.errHandler),e.settings&&(v=e.settings))},reset:function(){T.off(a.default.PLAYBACK_STARTED,R,this),T.off(a.default.PLAYBACK_PAUSED,P,this),T.off(i.default.STREAMS_COMPOSED,D,this),T.off(i.default.INTERNAL_MANIFEST_LOADED,k,this),E()}},t=Object(o.default)(_).getInstance().getLogger(e),e}c.__dashjs_factory_name="ManifestUpdater",t.default=s.default.getClassFactory(c)},"./src/streaming/MediaPlayer.js":function(e,t,n){n.r(t);var r=n("./externals/cea608-parser.js"),i=n.n(r),a=n("./src/streaming/constants/Constants.js"),s=n("./src/dash/constants/DashConstants.js"),o=n("./src/streaming/constants/MetricsConstants.js"),u=n("./src/streaming/controllers/PlaybackController.js"),l=n("./src/streaming/controllers/StreamController.js"),d=n("./src/streaming/controllers/GapController.js"),c=n("./src/streaming/controllers/MediaController.js"),f=n("./src/streaming/controllers/BaseURLController.js"),h=n("./src/streaming/ManifestLoader.js"),p=n("./src/streaming/utils/ErrorHandler.js"),m=n("./src/streaming/utils/Capabilities.js"),g=n("./src/streaming/utils/CapabilitiesFilter.js"),y=n("./src/streaming/utils/RequestModifier.js"),v=n("./src/streaming/models/URIFragmentModel.js"),_=n("./src/streaming/models/ManifestModel.js"),T=n("./src/streaming/models/MediaPlayerModel.js"),b=n("./src/streaming/controllers/AbrController.js"),E=n("./src/streaming/net/SchemeLoaderFactory.js"),S=n("./src/streaming/models/VideoModel.js"),w=n("./src/streaming/models/CmcdModel.js"),C=n("./src/streaming/utils/DOMStorage.js"),A=n("./src/core/Debug.js"),I=n("./src/core/errors/Errors.js"),k=n("./src/core/EventBus.js"),R=n("./src/core/events/Events.js"),P=n("./src/streaming/MediaPlayerEvents.js"),D=n("./src/core/FactoryMaker.js"),O=n("./src/core/Settings.js"),M=n("./src/core/Version.js"),L=n("./src/dash/controllers/SegmentBaseController.js"),N=n("./src/dash/DashAdapter.js"),x=n("./src/dash/DashMetrics.js"),F=n("./src/dash/utils/TimelineConverter.js"),U=n("./src/streaming/vo/metrics/HTTPRequest.js"),j=n("./externals/base64.js"),B=n.n(j),V=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),q=n.n(V),H=n("./src/streaming/vo/DashJSError.js"),G=n("./src/streaming/utils/SupervisorTools.js"),z=n("./src/streaming/ManifestUpdater.js"),W=n("./src/streaming/utils/URLUtils.js"),K=n("./src/streaming/utils/BoxParser.js"),Y=n("./src/streaming/text/TextController.js");function X(){var e,t,n,r,j,V,X,Q,Z,J,$,ee,te,ne,re,ie,ae,se,oe,ue,le,de,ce,fe,he,pe,me,ge,ye,ve,_e,Te,be,Ee,Se,we,Ce="You must first call initialize() and set a source before calling this method",Ae="You must first call initialize() and set a valid source and view before calling this method",Ie="You must first call attachView() to set the video element before calling this method",ke="MediaPlayer not initialized!",Re=this.context,Pe=Object(k.default)(Re).getInstance(),De=Object(O.default)(Re).getInstance(),Oe=Object(A.default)(Re).getInstance({settings:De});function Me(){Ke(null),Ge(null),r=null,te&&(te.reset(),te=null),ne&&(ne.reset(),ne=null),De.reset(),ie&&(ie.reset(),ie=null)}function Le(){return!!n&&!!ve.getElement()}function Ne(){return Object(M.getVersionString)()}function xe(){if(!X)throw Ae;return pe.isPaused()}function Fe(e){var t=ce&&ce.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=me.getCurrentDVRInfo(t);if(!n)return 0;var r=pe.getLiveDelay(),i=n.range.start+e;return i>n.range.end-r&&(i=n.range.end-r),i}function Ue(e){if(!X)throw Ae;var t=He().currentTime;if(void 0!==e)t=ce.getTimeRelativeToStreamId(t,e);else if(pe.getIsDynamic()){var n=ce&&ce.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,r=me.getCurrentDVRInfo(n);t=null===r||0===t?0:Math.max(0,t-r.range.start)}return t}function je(){if(!X)throw Ae;var e=He().duration;if(pe.getIsDynamic()){var t=ce&&ce.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=me.getCurrentDVRInfo(t);e=n?n.range.end-n.range.start:0}return e}function Be(e){Object(G.checkParameterType)(e,"boolean"),Q=e}function Ve(){se.restoreDefaultUTCTimingSources()}function qe(){return me}function He(){if(!ve.getElement())throw Ie;return ve.getElement()}function Ge(e){if(!j)throw ke;ve.setElement(e),e&&(Ze(),function(){if(!ne){var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(Re).create();ne=t.createMetricsReporting({debug:Oe,eventBus:Pe,mediaElement:He(),adapter:ae,dashMetrics:me,events:R.default,constants:a.default,metricsConstants:o.default})}}}(),function(){if(!re){var e=dashjs.MssHandler;"function"==typeof e&&(I.default.extend(e.errors),re=e(Re).create({eventBus:Pe,mediaPlayerModel:se,dashMetrics:me,manifestModel:ge,playbackController:pe,streamController:ce,protectionController:te,baseURLController:ue,errHandler:oe,events:R.default,constants:a.default,debug:Oe,initSegmentType:U.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:B.a,ISOBoxer:q.a,settings:De}))}}(),ce&&ce.switchToVideoElement()),X&&Xe(),et()}function ze(e){if(!V)throw Ce;var t=ce.getActiveStreamInfo();return t?ee.getTracksFor(e,t.id):[]}function We(e,t){var n=-1;e.some((function(e,r){if(e===t)return n=r,!0})),n<0||e.splice(n,1)}function Ke(e){if(!j)throw ke;"string"==typeof e&&_e.initialize(e),n=e,(V||X)&&Xe(),Le()&&et()}function Ye(){if(!V)throw Ce;var e=ce.getActiveStreamInfo();return e?ce.getStreamById(e.id):null}function Xe(){X=!1,V=!1,ae.reset(),ce.reset(),he.reset(),pe.reset(),Z.reset(),ee.reset(),be.reset(),te&&(De.get().streaming.protection.keepProtectionMediaKeys?te.stop():(te.reset(),te=null,Ze())),fe.reset(),ye.reset()}function Qe(){return Object(h.default)(Re).create({debug:Oe,errHandler:oe,dashMetrics:me,mediaPlayerModel:se,requestModifier:Object(y.default)(Re).getInstance(),mssHandler:re,settings:De})}function Ze(){if(te)return te;var e=dashjs.Protection;if("function"==typeof e){var t=e(Re).create();return R.default.extend(e.events),P.default.extend(e.events,{publicOnly:!0}),I.default.extend(e.errors),le||(le=Object(m.default)(Re).getInstance()),(te=t.createProtectionSystem({debug:Oe,errHandler:oe,videoModel:ve,capabilities:le,eventBus:Pe,events:R.default,BASE64:B.a,constants:a.default,cmcdModel:ye,settings:De}))&&(te.setLicenseRequestFilters(Ee),te.setLicenseResponseFilters(Se)),te}return null}function Je(){if(!j)throw ke;if(ie)return ie;var e=dashjs.OfflineController;if("function"==typeof e){R.default.extend(e.events),P.default.extend(e.events,{publicOnly:!0}),I.default.extend(e.errors);var t=Qe(),n=Object(z.default)(Re).create();return n.setConfig({manifestModel:ge,adapter:ae,manifestLoader:t,errHandler:oe}),ie=e(Re).create({debug:Oe,manifestUpdater:n,baseURLController:ue,manifestLoader:t,manifestModel:ge,mediaPlayerModel:se,abrController:Z,playbackController:pe,adapter:ae,errHandler:oe,dashMetrics:me,timelineConverter:$,segmentBaseController:be,schemeLoaderFactory:J,eventBus:Pe,events:R.default,errors:I.default,constants:a.default,settings:De,dashConstants:s.default,urlUtils:Object(W.default)(Re).getInstance()})}return null}function $e(e){var t=ce&&ce.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,n=me.getCurrentDVRInfo(t);return n?e+(n.manifestInfo.availableFrom.getTime()/1e3+n.range.start):0}function et(){var e;ie&&ie.resetRecords(),!V&&n&&(V=!0,t.info("Streaming Initialized"),e=Qe(),ce||(ce=Object(l.default)(Re).getInstance()),fe||(fe=Object(Y.default)(Re).create({errHandler:oe,manifestModel:ge,adapter:ae,mediaController:ee,videoModel:ve,settings:De})),de.setConfig({capabilities:le,adapter:ae,settings:De,manifestModel:ge,errHandler:oe}),de.setCustomCapabilitiesFilters(we),ce.setConfig({capabilities:le,capabilitiesFilter:de,manifestLoader:e,manifestModel:ge,mediaPlayerModel:se,protectionController:te,textController:fe,adapter:ae,dashMetrics:me,errHandler:oe,timelineConverter:$,videoModel:ve,playbackController:pe,abrController:Z,mediaController:ee,settings:De,baseURLController:ue,uriFragmentModel:_e,segmentBaseController:be}),he.setConfig({settings:De,playbackController:pe,streamController:ce,videoModel:ve,timelineConverter:$,adapter:ae}),pe.setConfig({streamController:ce,dashMetrics:me,mediaPlayerModel:se,adapter:ae,videoModel:ve,timelineConverter:$,settings:De}),Z.setConfig({streamController:ce,domStorage:Te,mediaPlayerModel:se,dashMetrics:me,adapter:ae,videoModel:ve,settings:De}),ye.setConfig({abrController:Z,dashMetrics:me,playbackController:pe}),Z.initialize(),ce.initialize(Q,r),fe.initialize(),he.initialize(),ye.initialize(),be.initialize(),"string"==typeof n?ce.load(n):ce.loadWithManifest(n)),!X&&Le()&&(X=!0,t.info("Playback Initialized"))}return e={initialize:function(e,n,r){le||(le=Object(m.default)(Re).getInstance()).setConfig({settings:De}),oe||(oe=Object(p.default)(Re).getInstance()),le.supportsMediaSource()?(j||(j=!0,$=Object(F.default)(Re).getInstance(),Z||(Z=Object(b.default)(Re).getInstance()).setConfig({settings:De}),J||(J=Object(E.default)(Re).getInstance()),pe||(pe=Object(u.default)(Re).getInstance()),ee||(ee=Object(c.default)(Re).getInstance()),ce||(ce=Object(l.default)(Re).getInstance()),he||(he=Object(d.default)(Re).getInstance()),de||(de=Object(g.default)(Re).getInstance()),ae=Object(N.default)(Re).getInstance(),ge=Object(_.default)(Re).getInstance(),ye=Object(w.default)(Re).getInstance(),me=Object(x.default)(Re).getInstance({settings:De}),Te=Object(C.default)(Re).getInstance({settings:De}),ae.setConfig({constants:a.default,cea608parser:i.a,errHandler:oe,BASE64:B.a}),ue||(ue=Object(f.default)(Re).create()),ue.setConfig({adapter:ae}),be||(be=Object(L.default)(Re).getInstance({dashMetrics:me,mediaPlayerModel:se,errHandler:oe,baseURLController:ue,events:R.default,eventBus:Pe,debug:Oe,boxParser:Object(K.default)(Re).getInstance(),requestModifier:Object(y.default)(Re).getInstance(),errors:I.default})),ee.setConfig({domStorage:Te,settings:De}),Ve(),Be(void 0===r||r),Je()),e&&Ge(e),n&&Ke(n),t.info("[dash.js "+Ne()+"] MediaPlayer has been initialized")):oe.error(new H.default(I.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,I.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(le=e.capabilities),e.capabilitiesFilter&&(de=e.capabilitiesFilter),e.streamController&&(ce=e.streamController),e.textController&&(fe=e.textController),e.gapController&&(he=e.gapController),e.playbackController&&(pe=e.playbackController),e.mediaPlayerModel&&(se=e.mediaPlayerModel),e.abrController&&(Z=e.abrController),e.schemeLoaderFactory&&(J=e.schemeLoaderFactory),e.mediaController&&(ee=e.mediaController),e.settings&&(De=e.settings))},on:function(e,t,n,r){Pe.on(e,t,n,r)},off:function(e,t,n){Pe.off(e,t,n)},extend:function(e,t,n){D.default.extend(e,t,n,Re)},attachView:Ge,attachSource:Ke,isReady:Le,play:function(){if(!X)throw Ae;(!Q||xe()&&X)&&pe.play()},isPaused:xe,pause:function(){if(!X)throw Ae;pe.pause()},isSeeking:function(){if(!X)throw Ae;return pe.isSeeking()},isDynamic:function(){if(!X)throw Ae;return pe.getIsDynamic()},seek:function(e){if(!X)throw Ae;if(Object(G.checkParameterType)(e,"number"),isNaN(e))throw a.default.BAD_ARGUMENT_ERROR;var t=pe.getIsDynamic()?Fe(e):e;pe.seek(t)},setPlaybackRate:function(e){He().playbackRate=e},getPlaybackRate:function(){return He().playbackRate},setMute:function(e){Object(G.checkParameterType)(e,"boolean"),He().muted=e},isMuted:function(){return He().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw a.default.BAD_ARGUMENT_ERROR;He().volume=e},getVolume:function(){return He().volume},time:Ue,duration:je,timeAsUTC:function(){if(!X)throw Ae;return Ue()<0?NaN:$e(Ue())},durationAsUTC:function(){if(!X)throw Ae;return $e(je())},getActiveStream:Ye,getDVRWindowSize:function(){var e=ce&&ce.hasVideoTrack()?a.default.VIDEO:a.default.AUDIO,t=me.getCurrentDVRInfo(e);return t?t.manifestInfo.dvrWindowSize:0},getDVRSeekOffset:Fe,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),s=i.toLocaleTimeString(t,{hour12:n});return r?s+" "+a:s},getVersion:Ne,getDebug:function(){return Oe},getBufferLength:function(e){var n=[a.default.VIDEO,a.default.AUDIO,a.default.TEXT];if(e)return-1!==n.indexOf(e)?qe().getCurrentBufferLevel(e)||NaN:(t.warn("getBufferLength requested for invalid type"),NaN);var r=n.map((function(e){return ze(e).length>0?qe().getCurrentBufferLevel(e):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)}));return r===Number.MAX_VALUE?NaN:r},getTTMLRenderingDiv:function(){return ve?ve.getTTMLRenderingDiv():null},getVideoElement:He,getSource:function(){if(!n)throw"You must first call attachSource() with a valid source before calling this method";return n},getCurrentLiveLatency:function(){if(!j)throw ke;return X?pe.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(e){if(!V)throw Ce;return Z.getTopBitrateInfoFor(e)},setAutoPlay:Be,getAutoPlay:function(){return Q},getDashMetrics:qe,getQualityFor:function(e){if(!V)throw Ce;if(e===a.default.IMAGE){var t=Ye();if(!t)return-1;var n=t.getThumbnailController();return n?n.getCurrentTrackIndex():-1}return Z.getQualityFor(e)},setQualityFor:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!V)throw Ce;if(e===a.default.IMAGE){var r=Ye();if(!r)return;var i=r.getThumbnailController();i&&i.setTrackByIndex(t)}Z.setPlaybackQuality(e,ce.getActiveStreamInfo(),t,{forceReplace:n})},updatePortalSize:function(){Z.setElementSize(),Z.setWindowResizeEventCalled(!0)},enableText:function(e){var t=ce.getActiveStreamInfo();return!(!t||!fe)&&fe.enableText(t.id,e)},enableForcedTextStreaming:function(e){return!(!ce.getActiveStreamInfo()||!fe)&&fe.enableForcedTextStreaming(e)},isTextEnabled:function(){var e=ce.getActiveStreamInfo();return!(!e||!fe)&&fe.isTextEnabled(e)},setTextTrack:function(e){if(!X)throw Ae;var t=ce.getActiveStreamInfo();t&&fe&&fe.setTextTrack(t.id,e)},getBitrateInfoListFor:function(e){if(!V)throw Ce;var t=Ye();return t?t.getBitrateListFor(e):[]},getStreamsFromManifest:function(e){if(!V)throw Ce;return ae.getStreamsInfo(e)},getTracksFor:ze,getTracksForTypeFromManifest:function(e,t,n){if(!V)throw Ce;return(n=n||ae.getStreamsInfo(t,1)[0])?ae.getAllMediaInfoForType(n,e,t):[]},getCurrentTrackFor:function(e){if(!V)throw Ce;var t=ce.getActiveStreamInfo();return ee.getCurrentTrackFor(e,t.id)},setInitialMediaSettingsFor:function(e,t){if(!j)throw ke;ee.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!j)throw ke;return ee.getInitialSettings(e)},setCurrentTrack:function(e){if(!V)throw Ce;ee.setTrack(e)},addABRCustomRule:function(e,t,n){se.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){se.removeABRCustomRule(e)},removeAllABRCustomRule:function(){se.removeABRCustomRule()},getAverageThroughput:function(e){var t=Z.getThroughputHistory(),n=pe.getIsDynamic();return t?t.getAverageThroughput(e,n):0},retrieveManifest:function(e,t){var n=Qe(),r=this;Pe.on(R.default.INTERNAL_MANIFEST_LOADED,(function e(i){i.error?t(null,i.error):t(i.manifest),Pe.off(R.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()}),r),_e.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){se.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){se.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){se.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Ve,setXHRWithCredentialsForType:function(e,t){se.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return se.getXHRWithCredentialsForType(e)},getProtectionController:function(){return Ze()},attachProtectionController:function(e){te=e},setProtectionData:function(e){r=e,ce&&ce.setProtectionData(r)},registerLicenseRequestFilter:function(e){Ee.push(e),te&&te.setLicenseRequestFilters(Ee)},registerLicenseResponseFilter:function(e){Se.push(e),te&&te.setLicenseResponseFilters(Se)},unregisterLicenseRequestFilter:function(e){We(Ee,e),te&&te.setLicenseRequestFilters(Ee)},unregisterLicenseResponseFilter:function(e){We(Se,e),te&&te.setLicenseResponseFilters(Se)},registerCustomCapabilitiesFilter:function(e){we.push(e),de&&de.setCustomCapabilitiesFilters(we)},unregisterCustomCapabilitiesFilter:function(e){We(we,e),de&&de.setCustomCapabilitiesFilters(we)},setCustomInitialTrackSelectionFunction:function(e){ee&&ee.setCustomInitialTrackSelectionFunction(e)},resetCustomInitialTrackSelectionFunction:function(){ee&&ee.setCustomInitialTrackSelectionFunction(null)},attachTTMLRenderingDiv:function(e){if(!ve.getElement())throw Ie;ve.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=ce.getActiveStreamInfo();if(e&&fe)return fe.getCurrentTrackIdx(e.id)},provideThumbnail:function(e,t){if("function"==typeof t)if(e<0)t(null);else{var n=pe.getIsDynamic()?Fe(e):e,r=ce.getStreamForTime(n);if(null!==r){var i=r.getThumbnailController();if(i){var a=ce.getTimeRelativeToStreamId(n,r.getId());return i.provide(a,t)}t(null)}else t(null)}},getDashAdapter:function(){return ae},getOfflineController:function(){return Je()},getSettings:function(){return De.get()},updateSettings:function(e){De.update(e)},resetSettings:function(){De.reset()},reset:Me,destroy:function(){Me(),Ee=[],Se=[],we=[],D.default.deleteSingletonInstances(Re)}},t=Oe.getLogger(e),j=!1,X=!1,V=!1,Q=!0,te=null,ie=null,r=null,ae=null,be=null,R.default.extend(P.default),se=Object(T.default)(Re).getInstance(),ve=Object(S.default)(Re).getInstance(),_e=Object(v.default)(Re).getInstance(),Ee=[],Se=[],we=[],e}X.__dashjs_factory_name="MediaPlayer";var Q=D.default.getClassFactory(X);Q.events=P.default,Q.errors=I.default,D.default.updateClassFactory(X.__dashjs_factory_name,Q),t.default=Q},"./src/streaming/MediaPlayerEvents.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.DYNAMIC_TO_STATIC="dynamicToStatic",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_UPDATED="streamUpdated",e.STREAM_ACTIVATED="streamActivated",e.STREAM_DEACTIVATED="streamDeactivated",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.CAN_PLAY_THROUGH="canPlayThrough",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_LOADED_DATA="playbackLoadedData",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_SEEK_ASKED="playbackSeekAsked",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e.EVENT_MODE_ON_START="eventModeOnStart",e.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",e.CONFORMANCE_VIOLATION="conformanceViolation",e.REPRESENTATION_SWITCH="representationSwitch",e}return o}(n("./src/core/events/EventsBase.js").default));t.default=o},"./src/streaming/MediaPlayerFactory.js":function(e,t,n){n.r(t);var r,i=n("./src/streaming/MediaPlayer.js"),a=function(){var e;function t(t,n,r){if(!t||!/^VIDEO$/i.test(t.nodeName))return null;if(t._dashjs_player)return t._dashjs_player;var a,s=t.id||t.name||"video element";if(!(n=n||[].slice.call(t.querySelectorAll("source")).filter((function(e){return"application/dash+xml"==e.type}))[0])&&t.src)(n=document.createElement("source")).src=t.src;else if(!n&&!t.src)return null;return r=r||{},(a=Object(i.default)(r).create()).initialize(t,n.src,t.autoplay),e||(e=a.getDebug().getLogger()),e.debug("Converted "+s+" to dash.js player and added content: "+n.src),t._dashjs_player=a,a}function n(e){return/^VIDEO$/i.test(e.nodeName)?e:n(e.parentNode)}return{create:t,createAll:function(e,r){var i=[];e=e||"[data-dashjs-player]";for(var a=(r=r||document).querySelectorAll(e),s=0;s<a.length;s++){var o=t(a[s],null);i.push(o)}for(var u=r.querySelectorAll('source[type="application/dash+xml"]'),l=0;l<u.length;l++){var d=t(n(u[l]),null);i.push(d)}return i}}}();!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?a.createAll():r=window.setInterval((function(){window.dashjs&&(window.clearInterval(r),a.createAll())}),500):window.addEventListener("load",(function e(){window.removeEventListener("load",e),a.createAll()}))),t.default=a},"./src/streaming/SourceBufferSink.js":function(e,t,n){n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/streaming/vo/DashJSError.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/core/errors/Errors.js"),o=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),d=n("./src/core/events/Events.js");function c(e){var t,n,a,c,f,h,p=this.context,m=Object(o.default)(p).getInstance(),g=e.textController,y=e.eventBus,v=[],_=[],T=!1,b=e.mediaSource,E=null;function S(e){return new Promise((function(t){M((function(){c.changeType&&c.changeType(e),t()}))}))}function w(e){return c=g.getTextSourceBuffer(e),Promise.resolve()}function C(){if("function"==typeof c.addEventListener)try{c.addEventListener("updateend",D,!1),c.addEventListener("error",O,!1),c.addEventListener("abort",O,!1)}catch(e){h=setInterval(D,50)}else h=setInterval(D,50)}function A(e){return new Promise((function(t){c&&m.get().streaming.buffer.useAppendWindow?M((function(){try{if(!c)return void t();var n=b.duration,r=0;e&&!isNaN(e.start)&&!isNaN(e.duration)&&isFinite(e.duration)&&(n=e.start+e.duration),e&&!isNaN(e.start)&&(r=e.start),c.appendWindowEnd===n&&c.appendWindowStart===r||(c.appendWindowStart=0,c.appendWindowEnd=n+.01,c.appendWindowStart=Math.max(r-.1,0),a.debug("Updated append window for ".concat(f.type,". Set start to ").concat(c.appendWindowStart," and end to ").concat(c.appendWindowEnd))),t()}catch(e){a.warn("Failed to set append window"),t()}})):t()}))}function I(e){return new Promise((function(t){c?M((function(){try{c.timestampOffset===e||isNaN(e)||(c.timestampOffset=e,a.debug("Set MSE timestamp offset to ".concat(e))),t()}catch(e){t()}})):t()}))}function k(){return new Promise((function(e){M((function(){var t=c.appendWindowStart,n=c.appendWindowEnd;c&&(c.abort(),c.appendWindowStart=t,c.appendWindowEnd=n),e()}))}))}function R(){if(!T&&_.length>0){T=!0;var e=_[0];_.splice(0,1);var t=function(){T=!1,_.length>0&&R.call(this),e&&e.data&&e.data.segmentType&&e.data.segmentType!==l.HTTPRequest.INIT_SEGMENT_TYPE&&delete e.data.bytes,e.promise.resolve({chunk:e.data})};try{E=e.request,0===e.data.bytes.byteLength?t.call(this):(c.appendBuffer?c.appendBuffer(e.data.bytes):c.append(e.data.bytes,e.data),M(t.bind(this)))}catch(t){a.fatal('SourceBuffer append failed "'+t+'"'),_.length>0?R():T=!1,delete e.data.bytes,e.promise.reject({chunk:e.data,error:new i.default(t.code,t.message)})}}}function P(){v.length>0&&(c.updating||(v.shift()(),P()))}function D(){c.updating||P()}function O(e){var t,r,i=e.target||{};t=d.default.SOURCE_BUFFER_ERROR,r={error:i,lastRequestAppended:E}||{},y.trigger(t,r,{streamId:f.streamInfo.id,mediaType:n})}function M(e){v.push(e),c.updating||P()}return t={getType:function(){return n},getAllBufferRanges:function(){try{return c.buffered}catch(e){return a.error("getAllBufferRanges exception: "+e.message),null}},getBuffer:function(){return c},append:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,a){e?(_.push({data:e,promise:{resolve:r,reject:a},request:n}),M(R.bind(t))):a({chunk:e,error:new i.default(s.default.APPEND_ERROR_CODE,s.default.APPEND_ERROR_MESSAGE)})}))},remove:function(e){return new Promise((function(t,n){var r=e.start,a=e.end;r>=0&&a>r?M((function(){try{c.remove(r,a),M((function(){t({from:r,to:a,unintended:!1}),e.resolve&&e.resolve()}))}catch(t){n({from:r,to:a,unintended:!1,error:new i.default(s.default.REMOVE_ERROR_CODE,s.default.REMOVE_ERROR_MESSAGE)}),e.reject&&e.reject(t)}})):t()}))},abort:function(){return new Promise((function(e){try{_=[],"open"===b.readyState?M((function(){try{c&&c.abort(),e()}catch(t){e()}})):c&&c.setTextTrack&&"ended"===b.readyState?(c.abort(),e()):e()}catch(t){e()}}))},reset:function(){if(c){try{v=[],function(){try{"function"==typeof c.removeEventListener&&(c.removeEventListener("updateend",D,!1),c.removeEventListener("error",O,!1),c.removeEventListener("abort",O,!1)),clearInterval(h)}catch(e){a.error(e)}}(),T=!1,_=[],c.getClassName&&"TextSourceBuffer"===c.getClassName()||(a.debug("Removing sourcebuffer from media source"),b.removeSourceBuffer(c))}catch(e){}c=null}E=null},updateTimestampOffset:I,initializeForStreamSwitch:function(e,t,r){n=(f=e).type;var i=f.codec;!function(e){c=e.getBuffer()}(r),C();var a=[];return a.push(k),a.push(A(f.streamInfo)),a.push(S(i)),t&&void 0!==t.MSETimeOffset&&a.push(I(t.MSETimeOffset)),Promise.all(a)},initializeForFirstUse:function(e,t,r){n=(f=t).type;var i=f.codec;try{if(i.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return w(e);c=b.addSourceBuffer(i),C();var a=[];return a.push(A(f.streamInfo)),r&&void 0!==r.MSETimeOffset&&a.push(I(r.MSETimeOffset)),Promise.all(a)}catch(t){return f.type==u.default.TEXT&&!f.isFragmented||-1!==i.indexOf('codecs="stpp')||-1!==i.indexOf('codecs="vtt')?w(e):Promise.reject(t)}},updateAppendWindow:A,changeType:S},a=Object(r.default)(p).getInstance().getLogger(t),t}c.__dashjs_factory_name="SourceBufferSink";var f=a.default.getClassFactory(c);t.default=f},"./src/streaming/Stream.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/StreamProcessor.js"),s=n("./src/streaming/controllers/FragmentController.js"),o=n("./src/streaming/thumbnail/ThumbnailController.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),d=n("./src/core/Debug.js"),c=n("./src/core/errors/Errors.js"),f=n("./src/core/FactoryMaker.js"),h=n("./src/streaming/vo/DashJSError.js"),p=n("./src/streaming/utils/BoxParser.js"),m=n("./src/streaming/utils/URLUtils.js"),g=n("./src/streaming/controllers/BlacklistController.js"),y=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT,r.default.MUXED,r.default.IMAGE];function v(e){e=e||{};var t,n,f,v,_,T,b,E,S,w,C,A,I,k,R,P,D,O,M=this.context,L=Object(u.default)(M).getInstance(),N=Object(m.default)(M).getInstance(),x=e.manifestModel,F=e.mediaPlayerModel,U=e.dashMetrics,j=e.manifestUpdater,B=e.adapter,V=e.timelineConverter,q=e.capabilities,H=e.errHandler,G=e.abrController,z=e.playbackController,W=e.eventController,K=e.mediaController,Y=e.protectionController,X=e.textController,Q=e.videoModel,Z=e.streamInfo,J=e.settings;function $(t,s){return new Promise((function(u,d){oe(),w=!0,le();var p,m=Q.getElement();y.forEach((function(s){(s!==r.default.VIDEO||!m||m&&/^VIDEO$/i.test(m.nodeName))&&function(t,s){var u,d=B.getAllMediaInfoForType(Z,t),c=[],h=null;if(d&&0!==d.length){t===r.default.VIDEO&&(b=!0),t===r.default.AUDIO&&(E=!0);for(var p=0,m=d.length;p<m;p++)h=d[p],t===r.default.TEXT&&h.isEmbedded&&(X.addEmbeddedTrack(Z,h),c.push(h)),ee(h)&&K.addTrack(h);if(c.length>0&&(K.setInitialMediaSettingsForType(t,Z),X.setInitialSettings(K.getInitialSettings(t)),X.addMediaInfosToBuffer(Z,t,c)),d=d.filter((function(e){return!e.isEmbedded})),0!==d.length)if(t!==r.default.IMAGE){L.trigger(l.default.STREAM_INITIALIZING,{streamInfo:Z,mediaInfo:h}),K.setInitialMediaSettingsForType(t,Z);var g=function(t,n){var i=t&&t.length>0?t[0]:null,s=C.getModel(i?i.type:null),o=i?i.type:null,u=i?i.mimeType:null,l=i?i.isFragmented:null,d=Object(a.default)(M).create({streamInfo:Z,type:o,mimeType:u,timelineConverter:V,adapter:B,manifestModel:x,mediaPlayerModel:F,fragmentModel:s,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,segmentBaseController:e.segmentBaseController,abrController:G,playbackController:z,mediaController:K,textController:X,errHandler:H,settings:J,boxParser:R,segmentBlacklistController:I});d.initialize(n,b,l),f.push(d);for(var c=0;c<t.length;c++)d.addMediaInfo(t[c]);return o===r.default.TEXT&&X.addMediaInfosToBuffer(Z,o,t,s),d}(d,s);(u=K.getCurrentTrackFor(t,Z.id))&&(G.updateTopQualityIndex(u),g.selectMediaInfo(t===r.default.TEXT&&u.isEmbedded?d[0]:u))}else(A=Object(o.default)(M).create({streamInfo:Z,adapter:B,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:P,eventBus:L,events:l.default,dashConstants:i.default,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController})).initialize()}else n.info("No "+t+" data.")}(s,t)})),(p=s,new Promise((function(e){var t={},n=f.map((function(e){return e.createBufferSinks(p)}));Promise.all(n).then((function(n){n.forEach((function(e){e&&(t[e.getType()]=e)})),e(t)})).catch((function(){e(t)}))}))).then((function(e){if(w=!1,0===f.length){var t="No streams to play.";H.error(new h.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,t,x.getValue())),n.fatal(t)}else de();X.createTracks(Z),u(e)})).catch((function(e){d(e)}))}))}function ee(e){var t,i=e?e.type:null;return i===r.default.MUXED?(t="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",n.fatal(t),H.error(new h.default(c.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,t,x.getValue())),!1):!(i!==r.default.TEXT&&i!==r.default.IMAGE&&e.contentProtection&&!q.supportsEncryptedMedia()&&(H.error(new h.default(c.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,c.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function te(e){for(var t=f?f.length:0,n=0;n<t;n++){var r=f[n].getFragmentModel();r.abortRequests(),r.resetInitialSettings(),f[n].reset(!1,e)}X&&X.deactivateStream(Z),f=[],_=!1,T=!1,Te(!1),re(!1),L.trigger(l.default.STREAM_DEACTIVATED,{streamInfo:Z})}function ne(e){te(e),v=!1,b=!1,E=!1,S={},w=!1,D=!1,O=[]}function re(e){D=e}function ie(){return Z?Z.start:NaN}function ae(){return Z?Z.id:null}function se(){return Z}function oe(){if(!Q||!G)throw new Error(r.default.MISSING_CONFIG_ERROR)}function ue(e){e.error&&(H.error(e.error),n.fatal(e.error.message))}function le(){if(W){var e=B.getEventsFor(Z);W.addInlineEvents(e)}}function de(){for(var e=f.length,t=S.audio||S.video?new h.default(c.default.DATA_UPDATE_FAILED_ERROR_CODE,c.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,n=0;n<e;n++)if(f[n].isUpdating()||w)return;if(Y){Y.clearMediaInfoArray();for(var i=0;i<e&&f[i];i++){var a=f[i].getType(),s=f[i].getMediaInfo();if(a===r.default.AUDIO||a===r.default.VIDEO||a===r.default.TEXT&&s.isFragmented){var o=f[i].getMediaInfo();o&&Y.initializeForMedia(o)}}}t?H.error(t):v||(v=!0,L.trigger(l.default.STREAM_INITIALIZED,{streamInfo:Z}))}function ce(){var e=ge(),t=e.length;if(0!==t){for(var i=0;i<t;i++)if(!e[i].isBufferingCompleted()&&(e[i].getType()===r.default.AUDIO||e[i].getType()===r.default.VIDEO))return void n.debug("onBufferingCompleted - One streamProcessor has finished but",e[i].getType(),"one is not buffering completed");n.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),T=!0,L.trigger(l.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Z},{streamInfo:Z})}else n.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function fe(e){S[e.mediaType]=e.error,de()}function he(e){W&&W.addInbandEvents(e.events)}function pe(e){return e&&e.type?me(e.type):null}function me(e){return e?ge().filter((function(t){return t.getType()===e}))[0]:null}function ge(){for(var e,t,n=[],i=0;i<f.length;i++)(e=(t=f[i]).getType())!==r.default.AUDIO&&e!==r.default.VIDEO&&e!==r.default.TEXT||n.push(t);return n}function ye(e,t){var n=se(),r=t.getStreamInfo();if(!r||!n)return!0;var i=B.getAdaptationForType(r.index,e,r),a=B.getAdaptationForType(n.index,e,n);return i&&a?!(!ve(a)&&ve(i)):!i&&!a}function ve(e){return!!e&&!!(e.ContentProtection||e.Representation&&e.Representation.length>0&&e.Representation[0].ContentProtection)}function _e(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var r=e.getStreamInfo(),i=n?n.getStreamInfo():se();if(!r||!i)return!1;var a=B.getAdaptationForType(r.index,t,r),s=B.getAdaptationForType(i.index,t,i);if(!a||!s)return!a&&!s;var o=a&&s&&a.mimeType===s.mimeType,u=s.Representation_asArray.map((function(e){return e.codecs})),l=a.Representation_asArray.map((function(e){return e.codecs})),d=l.some((function(e){return u.indexOf(e)>-1})),c=l.some((function(e){return u.some((function(t){return q.codecRootCompatibleWithCodec(t,e)}))}));return d||c&&o}function Te(e){k=e}function be(){return k}return t={initialize:function(){L.on(l.default.BUFFERING_COMPLETED,ce,t),L.on(l.default.DATA_UPDATE_COMPLETED,fe,t),L.on(l.default.INBAND_EVENTS,he,t),Y&&(L.on(l.default.KEY_ERROR,ue,t),L.on(l.default.SERVER_CERTIFICATE_UPDATED,ue,t),L.on(l.default.LICENSE_REQUEST_COMPLETE,ue,t),L.on(l.default.KEY_SYSTEM_SELECTED,ue,t),L.on(l.default.KEY_SESSION_CREATED,ue,t),L.on(l.default.KEY_STATUSES_CHANGED,ue,t)),X.initializeForStream(Z),L.trigger(l.default.STREAM_UPDATED,{streamInfo:Z})},getStreamId:function(){return Z?Z.id:null},activate:function(e,t){return new Promise((function(n,r){if(!_)return be()?(_=!0,L.trigger(l.default.STREAM_ACTIVATED,{streamInfo:Z}),void n(t)):void function(e,t){return $(e,t)}(e,t).then((function(e){_=!0,L.trigger(l.default.STREAM_ACTIVATED,{streamInfo:Z}),n(e)})).catch((function(e){r(e)}));n(t)}))},deactivate:te,getIsActive:function(){return _},getDuration:function(){return Z?Z.duration:NaN},getStartTime:ie,getId:ae,getStreamInfo:se,getHasAudioTrack:function(){return E},getHasVideoTrack:function(){return b},startPreloading:function(e,t){return new Promise((function(r,i){be()?i():(n.info("[startPreloading] Preloading next stream with id ".concat(ae())),Te(!0),$(e,t).then((function(){for(var e=0;e<f.length&&f[e];e++)f[e].setExplicitBufferingTime(ie()),f[e].getScheduleController().startScheduleTimer();r()})).catch((function(){Te(!1),i()})))}))},getThumbnailController:function(){return A},getBitrateListFor:function(e){if(oe(),e===r.default.IMAGE)return A?A.getBitrateList():[];var t=function(e){for(var t=null,n=0;n<f.length;n++)if((t=f[n]).getType()===e)return t.getMediaInfo();return null}(e);return G.getBitrateList(t)},updateData:function(e){return new Promise((function(t){w=!0,Z=e,W&&le();for(var n=[],r=0,i=f.length;r<i;r++){var a=f[r],s=a.getMediaInfo();n.push(a.updateStreamInfo(Z));var o=B.getAllMediaInfoForType(Z,a.getType());if(o){a.clearMediaInfoArray();for(var u=0;u<o.length;u++){var d=o[u];a.addMediaInfo(o[u]),B.areMediaInfosEqual(s,d)&&(G.updateTopQualityIndex(d),n.push(a.selectMediaInfo(d)))}}}Promise.all(n).then((function(){for(n=[];O.length>0;){var e=O.pop(),t=e.newMediaInfo,r=pe(e.oldMediaInfo);if(!r)return;n.push(r.prepareTrackSwitch()),r.selectMediaInfo(t)}return Promise.all(n)})).then((function(){w=!1,de(),L.trigger(l.default.STREAM_UPDATED,{streamInfo:Z}),t()}))}))},reset:function(e){C&&(C.reset(),C=null),G&&Z&&G.clearDataForStream(Z.id),I&&(I.reset(),I=null),ne(e),Z=null,L.off(l.default.DATA_UPDATE_COMPLETED,fe,t),L.off(l.default.BUFFERING_COMPLETED,ce,t),L.off(l.default.INBAND_EVENTS,he,t),Y&&(L.off(l.default.KEY_ERROR,ue,t),L.off(l.default.SERVER_CERTIFICATE_UPDATED,ue,t),L.off(l.default.LICENSE_REQUEST_COMPLETE,ue,t),L.off(l.default.KEY_SYSTEM_SELECTED,ue,t),L.off(l.default.KEY_SESSION_CREATED,ue,t),L.off(l.default.KEY_STATUSES_CHANGED,ue,t))},getProcessors:ge,setMediaSource:function(e){for(var t=0;t<f.length;)ee(f[t].getMediaInfo())?(f[t].setMediaSource(e),t++):(f[t].reset(),f.splice(t,1));if(0===f.length){var r="No streams to play.";H.error(new h.default(c.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r+"nostreams",x.getValue())),n.fatal(r)}},isMediaCodecCompatible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _e(e,r.default.VIDEO,t)&&_e(e,r.default.AUDIO,t)},isProtectionCompatible:function(e){return!e||ye(r.default.VIDEO,e)&&ye(r.default.AUDIO,e)},getPreloaded:be,getIsEndedEventSignaled:function(){return D},setIsEndedEventSignaled:re,getAdapter:function(){return B},getHasFinishedBuffering:function(){return T},setPreloaded:Te,startScheduleControllers:function(){for(var e=f.length,t=0;t<e&&f[t];t++)f[t].getScheduleController().startScheduleTimer()},prepareTrackChange:function(e){if(_&&Z){T=!1;var t=e.newMediaInfo,i=x.getValue();B.setCurrentMediaInfo(Z.id,t.type,t);var a=pe(t);if(a){var s=z.getTime();n.info("Stream -  Process track changed at current time "+s),i.refreshManifestOnSwitchTrack?(O.push(e),j.getIsUpdating()||(n.debug("Stream -  Refreshing manifest for switch track"),j.refreshManifest())):a.selectMediaInfo(t).then((function(){t.type!==r.default.VIDEO&&t.type!==r.default.AUDIO||G.updateTopQualityIndex(t),a.prepareTrackSwitch()}))}}},prepareQualityChange:function(e){var t=me(e.mediaType);t&&t.prepareQualityChange(e)}},function(){try{P=Object(d.default)(M).getInstance(),n=P.getLogger(t),ne(),R=Object(p.default)(M).getInstance(),I=Object(g.default)(M).create({updateEventName:l.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:l.default.SEGMENT_LOCATION_BLACKLIST_ADD}),C=Object(s.default)(M).create({streamInfo:Z,mediaPlayerModel:F,dashMetrics:U,errHandler:H,settings:J,boxParser:R,dashConstants:i.default,urlUtils:N})}catch(e){throw e}}(),t}v.__dashjs_factory_name="Stream",t.default=f.default.getClassFactory(v)},"./src/streaming/StreamProcessor.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),s=n("./src/streaming/models/FragmentModel.js"),o=n("./src/streaming/controllers/BufferController.js"),u=n("./src/streaming/text/NotFragmentedTextBufferController.js"),l=n("./src/streaming/controllers/ScheduleController.js"),d=n("./src/dash/controllers/RepresentationController.js"),c=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/utils/SupervisorTools.js"),h=n("./src/core/EventBus.js"),p=n("./src/core/events/Events.js"),m=n("./src/dash/DashHandler.js"),g=n("./src/core/errors/Errors.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/Debug.js"),_=n("./src/streaming/utils/RequestModifier.js"),T=n("./src/streaming/utils/URLUtils.js"),b=n("./src/streaming/utils/BoxParser.js"),E=n("./src/streaming/vo/metrics/PlayList.js"),S=n("./src/dash/controllers/SegmentsController.js"),w=n("./src/streaming/vo/metrics/HTTPRequest.js");function C(e){e=e||{};var t,n,c,C,A,I,k,R,P,D,O,M,L,N=this.context,x=Object(h.default)(N).getInstance(),F=e.streamInfo,U=e.type,j=e.errHandler,B=e.mimeType,V=e.timelineConverter,q=e.adapter,H=e.manifestModel,G=e.mediaPlayerModel,z=e.fragmentModel,W=e.abrController,K=e.playbackController,Y=e.mediaController,X=e.textController,Q=e.dashMetrics,Z=e.settings,J=e.boxParser,$=e.segmentBlacklistController;function ee(){return F.id}function te(){return U}function ne(){return q.getIsTextTrack(R.getData())}function re(){A=[],C=null,L=0,P=!1,D=!1}function ie(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.sender)if(K.getIsManifestUpdateInProgress())le();else if((!ne()||X.isTextEnabled())&&I&&e.representationId&&!I.appendInitSegmentFromCache(e.representationId)){var n=R.getCurrentRepresentation();if(0===n.range)return void ae();var r=O?O.getInitRequest(C,n):null;r?z.executeRequest(r):t&&(k.setInitSegmentRequired(!0),le())}}function ae(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(K.getIsManifestUpdateInProgress()||I.getIsPruningInProgress())le();else{var n=ue();n?(P=!1,se(n)):oe(t)}}function se(e){isNaN(e.startTime+e.duration)||(L=e.startTime+e.duration),e.delayLoadingTime=(new Date).getTime()+k.getTimeToLoadDelay(),k.setTimeToLoadDelay(0),function(e){var t=e.url;return e.range&&(t=t.concat("_",e.range)),$.contains(t)}(e)?(n.warn("Fragment request url ".concat(e.url," for stream id ").concat(F.id," and media type ").concat(U," is on the ignore list and will be skipped")),le()):(n.debug("Next fragment request url for stream id ".concat(F.id," and media type ").concat(U," is ").concat(e.url)),z.executeRequest(e))}function oe(e){var t=R.getCurrentRepresentation();if(Z.get().streaming.gaps.enableSeekFix&&!c&&P&&K.isSeeking()){var r=O.getValidSeekTimeCloseToTargetTime(L,C,t,Z.get().streaming.gaps.threshold);if(!isNaN(r))return void K.seek(r,!1,!1)}if(O.isLastSegmentRequested(t,L)){var i=O.getCurrentIndex();return n.debug("Segment requesting for stream ".concat(F.id," has finished")),x.trigger(p.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:i},{streamId:F.id,mediaType:U}),I.segmentRequestingCompleted(i),void k.clearScheduleTimer()}e&&le()}function ue(){var e,t=Se();if(isNaN(L)||te()===r.default.TEXT&&!X.isTextEnabled())return null;var n=P;if(O){var i=R&&t?R.getRepresentationForQuality(t.quality):null;e=n?O.getSegmentRequestForTime(C,i,L):O.getNextSegmentRequest(C,i)}return e}function le(){k.startScheduleTimer(Z.get().streaming.lowLatencyEnabled?Z.get().streaming.scheduling.lowLatencyTimeout:Z.get().streaming.scheduling.defaultTimeout)}function de(e){e.error||(k.setCurrentRepresentation(q.convertRepresentationToRepresentationInfo(e.currentRepresentation)),I.getIsBufferingCompleted()||I.updateBufferTimestampOffset(e.currentRepresentation))}function ce(e){Q.addBufferState(U,e.state,k.getBufferTarget()),e.state!==a.default.BUFFER_EMPTY||K.isSeeking()||(n.info("Buffer is empty! Stalling!"),Q.pushPlayListTraceMetrics(new Date,E.PlayListTrace.REBUFFERING_REASON))}function fe(e){z.syncExecutedRequestsWithBufferedRange(I.getBuffer().getAllBufferRanges(),F.duration),e.quotaExceeded&&e.from>K.getTime()&&Re(e.from),e.hasEnoughSpaceToAppend&&e.quotaExceeded&&k.startScheduleTimer()}function he(e){if(e&&e.lastRequestAppended&&e.lastRequestAppended.url){var t=e.lastRequestAppended.url;e.lastRequestAppended.range&&(t=t.concat("_",e.lastRequestAppended.range)),n.warn("Blacklisting segment with url ".concat(t)),$.add(t)}}function pe(){Ie(),D=!1}function me(e){n.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),K.isSeeking()||k.getSwitchStrack()||D||(n.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),e.request&&e.request.isInitializationRequest()?k.setInitSegmentRequired(!0):Re(e.request.startTime+e.request.duration/2),k.startScheduleTimer(0))}function ge(e){n.info("OnFragmentLoadingCompleted for stream id "+F.id+" and media type "+U+" - Url:",e.request?e.request.url:"undefined",e.request.range?", Range:"+e.request.range:""),ne()&&k.startScheduleTimer(0),e.error&&e.request.serviceLocation&&function(e){n.info("Fragment loading completed with an error"),e&&e.request&&e.request.type&&(e.request.type===w.HTTPRequest.INIT_SEGMENT_TYPE?ie({representationId:e.request.representationId,sender:{}},!1):e.request.type===w.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Re(e.request.startTime+e.request.duration/2),ae({},!1)))}(e)}function ye(){Re(K.getTime()),Ee().startScheduleTimer()}function ve(e){var t=e.currentTrackInfo;if(t){var n=A.find((function(e){return e.index===t.index&&e.lang===t.lang}));n&&be(n).then((function(){I.setIsBufferingCompleted(!1),Re(K.getTime()),k.setInitSegmentRequired(!0),k.startScheduleTimer()}))}}function _e(e){Re(e.quotaExceededTime),k.clearScheduleTimer()}function Te(){return I?I.getBuffer():null}function be(e){e===C||e&&C&&e.type!==C.type||(C=e);var t=q.getRealAdaptation(F,C),n=q.getVoRepresentations(C);if(R){var i,a=R.getData(),s=W.getMaxAllowedIndexFor(U,F.id),o=W.getMinAllowedIndexFor(U,F.id),u=null;return null!==a&&a.id===t.id||U===r.default.TEXT?i=W.getQualityFor(U,F.id):(u=W.getThroughputHistory().getAverageThroughput(U,c)||W.getInitialBitrateFor(U,F.id),i=W.getQualityForBitrate(C,u,F.id)),void 0!==o&&i<o&&(i=o),i>s&&(i=s),R.updateData(t,n,U,C.isFragmented,i)}return Promise.resolve()}function Ee(){return k}function Se(e){var t;return void 0!==e?(Object(f.checkInteger)(e),t=R?R.getRepresentationForQuality(e):null):t=R?R.getCurrentRepresentation():null,q.convertRepresentationToRepresentationInfo(t)}function we(){return!!I&&I.getIsBufferingCompleted()}function Ce(e){var t=e.chunk,n=t.bytes,r=t.quality,i=Se(r),a=R&&i?R.getRepresentationForQuality(i.quality):null;if(i&&a){var o=q.getEventsFor(i.mediaInfo),u=q.getEventsFor(i,a);if(o&&o.length>0||u&&u.length>0){var l=function(e,t,n,r){try{for(var i={},a=[],s=n.concat(r),o=0,u=s.length;o<u;o++)i[s[o].schemeIdUri+"/"+s[o].value]=s[o];var l=Object(b.default)(N).getInstance().parse(e),d=l.getBoxes("emsg");if(!d||0===d.length)return a;for(var c=l.getBox("sidx"),f=!c||isNaN(c.earliest_presentation_time)||isNaN(c.timescale)?t&&!isNaN(t.mediaStartTime)?t.mediaStartTime:0:c.earliest_presentation_time/c.timescale,h=Math.max(f,0),p=R.getCurrentRepresentation(),m=0,g=d.length;m<g;m++){var y=q.getEvent(d[m],i,h,p);y&&a.push(y)}return a}catch(e){return[]}}(n,z.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,quality:r,index:t.index})[0],o,u);x.trigger(p.default.INBAND_EVENTS,{events:l},{streamId:F.id})}}}function Ae(){var e=K.getTime();Z.get().streaming.buffer.flushBufferAtTrackSwitch&&K.seek(e+.001,!1,!0),Re(e),I.setSeekTarget(e),k.startScheduleTimer()}function Ie(){var e=K.getTime();Re(I.getContinuousBufferTimeForTargetTime(e)),k.startScheduleTimer()}function ke(e){e&&!isNaN(e.time)&&(Re(e.time),I.setSeekTarget(e.time))}function Re(e){L=e,P=!0}return t={initialize:function(n,a,s){M=Object(S.default)(N).create({events:p.default,eventBus:x,streamInfo:F,timelineConverter:V,dashConstants:i.default,segmentBaseController:e.segmentBaseController,type:U}),O=Object(m.default)(N).create({streamInfo:F,type:U,timelineConverter:V,dashMetrics:Q,mediaPlayerModel:G,baseURLController:e.baseURLController,errHandler:j,segmentsController:M,settings:Z,boxParser:J,events:p.default,eventBus:x,errors:g.default,debug:Object(v.default)(N).getInstance(),requestModifier:Object(_.default)(N).getInstance(),dashConstants:i.default,constants:r.default,urlUtils:Object(T.default)(N).getInstance()}),c=F.manifestInfo.isDynamic,O.initialize(c),W.registerStreamType(U,t),R=Object(d.default)(N).create({streamInfo:F,type:U,abrController:W,dashMetrics:Q,playbackController:K,timelineConverter:V,dashConstants:i.default,events:p.default,eventBus:x,errors:g.default,isDynamic:c,segmentsController:M}),I=function(e,t){return e?e!==r.default.TEXT||t?Object(o.default)(N).create({streamInfo:F,type:e,mediaPlayerModel:G,manifestModel:H,fragmentModel:z,errHandler:j,mediaController:Y,representationController:R,adapter:q,textController:X,abrController:W,playbackController:K,settings:Z}):Object(u.default)(N).create({streamInfo:F,type:e,mimeType:B,fragmentModel:z,textController:X,errHandler:j,settings:Z}):(j.error(new y.default(g.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,g.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(U,s),I&&I.initialize(n),(k=Object(l.default)(N).create({streamInfo:F,type:U,mimeType:B,adapter:q,dashMetrics:Q,mediaPlayerModel:G,fragmentModel:z,abrController:W,playbackController:K,textController:X,mediaController:Y,bufferController:I,settings:Z})).initialize(a),L=0,P=!1},getStreamId:ee,getType:te,isUpdating:function(){return!!R&&R.isUpdating()},getBufferController:function(){return I},getFragmentModel:function(){return z},getScheduleController:Ee,getRepresentationController:function(){return R},getRepresentationInfo:Se,getBufferLevel:function(){return I?I.getBufferLevel():0},isBufferingCompleted:we,createBufferSinks:function(e){var t=Te();return t?Promise.resolve(t):I?I.createBufferSink(C,e):Promise.resolve(null)},updateStreamInfo:function(e){return F=e,we()?Promise.resolve():I.updateAppendWindow()},getStreamInfo:function(){return F},selectMediaInfo:be,clearMediaInfoArray:function(){A=[]},addMediaInfo:function(e){-1===A.indexOf(e)&&A.push(e)},prepareTrackSwitch:function(){return new Promise((function(e){n.debug("Preparing track switch for type ".concat(U));var t=U===r.default.TEXT||Z.get().streaming.trackSwitchMode[U]===r.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&K.getTimeToStreamEnd(F)>Z.get().streaming.buffer.stallThreshold;if(I.getIsBufferingCompleted()&&!t)return I.prepareForNonReplacementTrackSwitch(C.codec).then((function(){x.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:F.id,mediaType:U})})).catch((function(){x.trigger(p.default.BUFFERING_COMPLETED,{},{streamId:F.id,mediaType:U})})),void e();k.clearScheduleTimer(),k.setSwitchTrack(!0),t?(x.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:U,streamId:F.id},{mediaType:U,streamId:F.id}),z.abortRequests(),I.prepareForReplacementTrackSwitch(C.codec).then((function(){var e=Se();return I.updateBufferTimestampOffset(e)})).then((function(){Ae(),e()})).catch((function(){Ae(),e()}))):I.prepareForNonReplacementTrackSwitch(C.codec).then((function(){Ie(),e()})).catch((function(){Ie(),e()}))}))},prepareQualityChange:function(e){n.debug("Preparing quality switch for type ".concat(U));var t=e.newQuality;D=!0,k.clearScheduleTimer();var r=Se(t);k.setCurrentRepresentation(r),R.prepareQualityChange(t),z.abortRequests(),I.updateBufferTimestampOffset(r).then((function(){e.reason&&e.reason.forceReplace?(x.trigger(p.default.BUFFER_REPLACEMENT_STARTED,{mediaType:U,streamId:F.id},{mediaType:U,streamId:F.id}),I.prepareForReplacementQualitySwitch().then((function(){Ae(),D=!1})).catch((function(){Ae(),D=!1}))):Z.get().streaming.buffer.fastSwitchEnabled?function(e){var t=K.getTime(),n=z.getRequests({state:s.default.FRAGMENT_MODEL_EXECUTED,time:t+1.5,threshold:0})[0];if(n&&!ne()){var r=I.getBufferLevel(),i=W.getAbandonmentStateFor(F.id,U);n.quality<e.quality&&r>=1.5&&i!==a.default.ABANDON_LOAD?(Re(t+1.5),k.setCheckPlaybackQuality(!1),k.startScheduleTimer()):pe()}else k.startScheduleTimer();D=!1}(r):pe(),Q.pushPlayListTraceMetrics(new Date,E.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Q.createPlaylistTraceMetrics(r.id,1e3*K.getTime(),K.getPlaybackRate())}))},getMediaInfo:function(){return C},getMediaSource:function(){return I.getMediaSource()},setMediaSource:function(e){I.setMediaSource(e)},getBuffer:Te,setExplicitBufferingTime:Re,finalisePlayList:function(e,t){Q.pushPlayListTraceMetrics(e,t)},probeNextRequest:function(){var e=Se(),t=R&&e?R.getRepresentationForQuality(e.quality):null;return O.getNextSegmentRequestIdempotent(C,t)},prepareInnerPeriodPlaybackSeeking:function(e){return new Promise((function(t){k.clearScheduleTimer(),z.abortRequests(),I.prepareForPlaybackSeek().then((function(){var t=I.getAllRangesWithSafetyFactor(e.seekTime);return I.clearBuffers(t)})).then((function(){var n=I.getContinuousBufferTimeForTargetTime(e.seekTime);if(!isNaN(F.duration)&&isFinite(F.duration)&&n>=F.start+F.duration)I.setIsBufferingCompleted(!0),t();else{Re(n),I.setSeekTarget(n);var r=[];r.push(I.updateAppendWindow());var i=Se();r.push(I.updateBufferTimestampOffset(i)),Promise.all(r).then((function(){k.setInitSegmentRequired(!0),k.setCheckPlaybackQuality(!1),k.startScheduleTimer(),t()}))}})).catch((function(e){n.error(e)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((function(e,t){try{k.clearScheduleTimer(),z.abortRequests(),I.prepareForPlaybackSeek().then((function(){return I.pruneAllSafely()})).then((function(){e()}))}catch(e){t(e)}}))},reset:function(e,n){O&&O.reset(),I&&(I.reset(e,n),I=null),k&&(k.reset(),k=null),R&&(R.reset(),R=null),M&&(M=null),W&&W.unRegisterStreamType(ee(),U),x.off(p.default.DATA_UPDATE_COMPLETED,de,t),x.off(p.default.INIT_FRAGMENT_NEEDED,ie,t),x.off(p.default.MEDIA_FRAGMENT_NEEDED,ae,t),x.off(p.default.MEDIA_FRAGMENT_LOADED,Ce,t),x.off(p.default.BUFFER_LEVEL_STATE_CHANGED,ce,t),x.off(p.default.BUFFER_CLEARED,fe,t),x.off(p.default.SEEK_TARGET,ke,t),x.off(p.default.FRAGMENT_LOADING_ABANDONED,me,t),x.off(p.default.FRAGMENT_LOADING_COMPLETED,ge,t),x.off(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ye,t),x.off(p.default.SET_NON_FRAGMENTED_TEXT,ve,t),x.off(p.default.QUOTA_EXCEEDED,_e,t),x.off(p.default.SOURCE_BUFFER_ERROR,he,t),re(),U=null,F=null}},n=Object(v.default)(N).getInstance().getLogger(t),re(),x.on(p.default.DATA_UPDATE_COMPLETED,de,t,{priority:h.default.EVENT_PRIORITY_HIGH}),x.on(p.default.INIT_FRAGMENT_NEEDED,ie,t),x.on(p.default.MEDIA_FRAGMENT_NEEDED,ae,t),x.on(p.default.MEDIA_FRAGMENT_LOADED,Ce,t),x.on(p.default.BUFFER_LEVEL_STATE_CHANGED,ce,t),x.on(p.default.BUFFER_CLEARED,fe,t),x.on(p.default.SEEK_TARGET,ke,t),x.on(p.default.FRAGMENT_LOADING_ABANDONED,me,t),x.on(p.default.FRAGMENT_LOADING_COMPLETED,ge,t),x.on(p.default.QUOTA_EXCEEDED,_e,t),x.on(p.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,ye,t),x.on(p.default.SET_NON_FRAGMENTED_TEXT,ve,t),x.on(p.default.SOURCE_BUFFER_ERROR,he,t),t}C.__dashjs_factory_name="StreamProcessor",t.default=c.default.getClassFactory(C)},"./src/streaming/XlinkLoader.js":function(e,t,n){n.r(t);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/net/URLLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/streaming/vo/TextRequest.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),d=n("./src/core/errors/Errors.js");function c(e){e=e||{};var t=this.context,n=Object(o.default)(t).getInstance(),l=Object(i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,errors:d.default});return{load:function(e,t,i){var o=function(a,s){t.resolved=!0,t.resolvedContent=a||null,n.trigger(u.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:i,error:a||s?null:new r.default(d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,d.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if("urn:mpeg:dash:resolve-to-zero:2013"===e)o(null,!0);else{var c=new s.default(e,a.HTTPRequest.XLINK_EXPANSION_TYPE);l.load({request:c,success:function(e){o(e)},error:function(){o(null)}})}},reset:function(){l&&(l.abort(),l=null)}}}c.__dashjs_factory_name="XlinkLoader",t.default=l.default.getClassFactory(c)},"./src/streaming/constants/ConformanceViolationConstants.js":function(e,t,n){n.r(t),t.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4}}}])&&r(t.prototype,n),e}());t.default=i},"./src/streaming/constants/MetricsConstants.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}])&&r(t.prototype,n),e}());t.default=i},"./src/streaming/constants/ProtectionConstants.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}])&&r(t.prototype,n),e}());t.default=i},"./src/streaming/controllers/AbrController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/rules/abr/ABRRulesCollection.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/constants/MetricsConstants.js"),s=n("./src/streaming/vo/BitrateInfo.js"),o=n("./src/streaming/models/FragmentModel.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),d=n("./src/core/FactoryMaker.js"),c=n("./src/streaming/rules/RulesContext.js"),f=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/rules/SwitchRequestHistory.js"),p=n("./src/streaming/rules/DroppedFramesHistory.js"),m=n("./src/streaming/rules/ThroughputHistory.js"),g=n("./src/core/Debug.js"),y=n("./src/streaming/vo/metrics/HTTPRequest.js"),v=n("./src/streaming/utils/SupervisorTools.js"),_=n("./src/streaming/MediaPlayerEvents.js");function T(){var e,t,n,d,T,b,E,S,w,C,A,I,k,R,P,D,O,M,L,N,x,F,U,j,B,V=this.context,q=Object(g.default)(V).getInstance(),H=Object(u.default)(V).getInstance();function G(){T={},b={},S={},E={},M={},x={},F={},U={},void 0===C&&(C=!1),L&&L.reset(),O=void 0,L=void 0,N=void 0,clearTimeout(w),w=null}function z(t){var r=t.request.mediaType,i=t.streamId;if(r&&i&&E[i]&&B.get().streaming.abr.autoSwitchBitrate[r]){var s=E[i][r];if(s){var u=Object(c.default)(V).create({abrController:e,streamProcessor:s,currentRequest:t.request,useBufferOccupancyABR:x[r],useL2AABR:F[r],useLoLPABR:U[r],videoModel:R}),l=n.shouldAbandonFragment(u,i);if(l.quality>f.default.NO_CHANGE){var h=s.getFragmentModel();h.getRequests({state:o.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(h.abortRequests(),S[i][r].state=a.default.ABANDON_LOAD,M[i][r].reset(),M[i][r].push({oldValue:Q(r,i),newValue:l.quality,confidence:1,reason:l.reason}),Z(r,d.getActiveStreamInfo(),l.quality,l.reason),clearTimeout(w),w=setTimeout((function(){S[i][r].state=a.default.ALLOW_LOAD,w=null}),B.get().streaming.abandonLoadTimeout))}}}}function W(e){e.mediaType===i.default.VIDEO&&(void 0!==O&&L.push(e.streamId,O,R.getPlaybackQuality()),O=e.newQuality)}function K(e){var n,r;e.metric!==a.default.HTTP_REQUEST||!e.value||e.value.type!==y.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||N.push(e.mediaType,e.value,B.get().streaming.abr.useDeadTimeLatency),e.metric!==a.default.BUFFER_LEVEL||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||(n=e.mediaType,r=.001*e.value.level,B.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_DYNAMIC&&function(e,n){var r=P.getStableBufferTime(),i=r,a=.5*r,s=x[e],o=n>(s?a:i);x[e]=o,o!==s&&(o?t.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+n.toFixed(3)+")."):t.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+n.toFixed(3)+")."))}(n,r))}function Y(e,t){try{var n;return T[t]=T[t]||{},T[t].hasOwnProperty(e)||(T[t][e]=0),n=function(e,t){var n=T[t][e],r=n;if(!E[t]||!E[t][e])return r;var i=X(e,t);void 0!==i&&(r=Math.max(n,i));var a=function(e,t){try{var n=B.get().streaming.abr.maxBitrate[e];return n>-1?$(E[t][e].getMediaInfo(),n,t):void 0}catch(e){return}}(e,t);return void 0!==a&&(r=Math.min(r,a)),r}(e,t),n=function(e,t,n){var r=T[n][t],i=B.get().streaming.abr.maxRepresentationRatio[t];return isNaN(i)||i>=1||i<0?e:Math.min(e,Math.round(r*i))}(n,e,t),n=function(e,t,n){if(t!==i.default.VIDEO||!B.get().streaming.abr.limitBitrateByPortal||!E[n]||!E[n][t])return e;C||te();var r=E[n][t].getStreamInfo(),a=k.getAdaptationForType(r.index,t,r).Representation,s=e;if(A>0&&I>0){for(;s>0&&a[s]&&A<a[s].width&&A-a[s-1].width<a[s].width-A;)s-=1;for(;s<a.length-1&&a[s].width===a[s+1].width;)s+=1}return s}(n,e,t),n}catch(e){return}}function X(e,t){try{return function(e,t){try{var n=B.get().streaming.abr.minBitrate[e];if(n>-1){var r=E[t][e].getMediaInfo(),i=ee(r),a=$(r,n,t);return i[a]&&a<i.length-1&&i[a].bitrate<1e3*n&&a++,a}return}catch(e){return}}(e,t)}catch(e){return}}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return t||(t=d.getActiveStreamInfo().id),e&&E[t]&&E[t][e]&&t?(b[t]=b[t]||{},b[t].hasOwnProperty(e)||(b[t][e]=0),b[t][e]):0}catch(e){return 0}}function Z(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(t&&t.id&&e){var i=t.id,a=Q(e,i);Object(v.checkInteger)(n);var s=Y(e,i);n!==a&&n>=0&&n<=s&&J(e,a,n,s,r,i)}}function J(e,n,r,i,a,s){if(e&&E[s]&&E[s][e]){var o=E[s][e].getStreamInfo(),u=o&&o.manifestInfo&&o.manifestInfo.isDynamic,d=j.getCurrentBufferLevel(e);t.info("Stream ID: "+s+" ["+e+"] switch from "+n+" to "+r+"/"+i+" (buffer: "+d+") "+(a?JSON.stringify(a):".")),b[s]=b[s]||{},b[s][e]=r;var c=function(e,t,n){if(t&&E&&E[e]&&E[e][t]){var r=ee(E[e][t].getMediaInfo());return r[n]?r[n]:null}return null}(s,e,r);H.trigger(l.default.QUALITY_CHANGE_REQUESTED,{oldQuality:n,newQuality:r,reason:a,streamInfo:o,bitrateInfo:c,maxIdx:i,mediaType:e},{streamId:o.id,mediaType:e});var f=N.getAverageThroughput(e,u);isNaN(f)||D.setSavedBitrateSettings(e,f)}}function $(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e&&e.type?E[n][e.type].getRepresentationInfo():null;if(B.get().streaming.abr.useDeadTimeLatency&&r&&i&&i.fragmentDuration){r/=1e3;var a=i.fragmentDuration;if(r>a)return 0;var s=r/a;t*=1-s}for(var o=ee(e),u=o.length-1;u>=0;u--){var l=o[u];if(1e3*t>=l.bitrate)return u}return 0}function ee(e){var t=[];if(!e||!e.bitrateList)return t;for(var n,r=e.bitrateList,i=e.type,a=0,o=r.length;a<o;a++)(n=new s.default).mediaType=i,n.qualityIndex=a,n.bitrate=r[a].bandwidth,n.width=r[a].width,n.height=r[a].height,n.scanType=r[a].scanType,t.push(n);return t}function te(){if(R){var e=B.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;A=R.getClientWidth()*e,I=R.getClientHeight()*e}}return e={initialize:function(){L=Object(p.default)(V).create(),N=Object(m.default)(V).create({settings:B}),(n=Object(r.default)(V).create({dashMetrics:j,mediaPlayerModel:P,settings:B})).initialize(),H.on(_.default.QUALITY_CHANGE_RENDERED,W,e),H.on(_.default.METRIC_ADDED,K,e),H.on(l.default.LOADING_PROGRESS,z,e)},isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=Q(i.default.AUDIO,t),r=Q(i.default.VIDEO,t);return n===Y(i.default.AUDIO,t)&&r===Y(i.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return T[n]=T[n]||{},T[n][t]=r,r},clearDataForStream:function(e){L&&L.clearForStream(e),E[e]&&delete E[e],M[e]&&delete M[e],S[e]&&delete S[e]},getThroughputHistory:function(){return N},getBitrateList:ee,getQualityForBitrate:$,getTopBitrateInfoFor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t||(t=d.getActiveStreamInfo().id),e&&E&&E[t]&&E[t][e]){var n=Y(e,t),r=ee(E[t][e].getMediaInfo());return r[n]?r[n]:null}return null},getMinAllowedIndexFor:X,getMaxAllowedIndexFor:Y,getInitialBitrateFor:function(e,t){if(function(){if(!D||!D.hasOwnProperty("getSavedBitrateSettings"))throw new Error(i.default.MISSING_CONFIG_ERROR)}(),e===i.default.TEXT)return NaN;var n=D.getSavedBitrateSettings(e),r=B.get().streaming.abr.initialBitrate[e],a=B.get().streaming.abr.initialRepresentationRatio[e];if(-1===r)if(a>-1){var s=E[t][e].getStreamInfo(),o=k.getAdaptationForType(s.index,e,s).Representation;r=Array.isArray(o)?o[Math.max(Math.round(o.length*a)-1,0)].bandwidth/1e3:0}else r=isNaN(n)?e===i.default.VIDEO?1e3:100:n;return r},getQualityFor:Q,getAbandonmentStateFor:function(e,t){return S[e]&&S[e][t]?S[e][t].state:null},setPlaybackQuality:Z,checkPlaybackQuality:function(t,r){try{if(!(t&&E&&E[r]&&E[r][t]))return!1;if(L){var i=R.getPlaybackQuality();i&&L.push(r,O,i)}if(!B.get().streaming.abr.autoSwitchBitrate[t])return!1;var s=Q(t,r),o=Object(c.default)(V).create({abrController:e,switchHistory:M[r][t],droppedFramesHistory:L,streamProcessor:E[r][t],currentValue:s,useBufferOccupancyABR:x[t],useL2AABR:F[t],useLoLPABR:U[t],videoModel:R}),u=X(t,r),l=Y(t,r),d=n.getMaxQuality(o),h=d.quality;return void 0!==u&&(h>f.default.NO_CHANGE?h:s)<u&&(h=u),h>l&&(h=l),M[r][t].push({oldValue:s,newValue:h}),h>f.default.NO_CHANGE&&h!==s&&(S[r][t].state===a.default.ALLOW_LOAD||h>s)&&(J(t,s,h,l,d.reason,r),!0)}catch(e){return!1}},setElementSize:te,setWindowResizeEventCalled:function(e){C=e},registerStreamType:function(e,t){var n=t.getStreamInfo().id;E[n]||(E[n]={}),M[n]||(M[n]={}),S[n]||(S[n]={}),M[n][e]=Object(h.default)(V).create(),E[n][e]=t,S[n][e]={},S[n][e].state=a.default.ALLOW_LOAD,function(e){var t=B.get().streaming.abr.ABRStrategy;t===i.default.ABR_STRATEGY_L2A?(x[e]=!1,U[e]=!1,F[e]=!0):t===i.default.ABR_STRATEGY_LoLP?(x[e]=!1,U[e]=!0,F[e]=!1):t===i.default.ABR_STRATEGY_BOLA?(x[e]=!0,U[e]=!1,F[e]=!1):t===i.default.ABR_STRATEGY_THROUGHPUT?(x[e]=!1,U[e]=!1,F[e]=!1):t===i.default.ABR_STRATEGY_DYNAMIC&&(x[e]=!(!x||!x[e])&&x[e],U[e]=!1,F[e]=!1)}(e),e===i.default.VIDEO&&te()},unRegisterStreamType:function(e,t){try{E[e]&&E[e][t]&&delete E[e][t],M[e]&&M[e][t]&&delete M[e][t],S[e]&&S[e][t]&&delete S[e][t]}catch(e){}},setConfig:function(e){e&&(e.streamController&&(d=e.streamController),e.domStorage&&(D=e.domStorage),e.mediaPlayerModel&&(P=e.mediaPlayerModel),e.dashMetrics&&(j=e.dashMetrics),e.adapter&&(k=e.adapter),e.videoModel&&(R=e.videoModel),e.settings&&(B=e.settings))},reset:function(){G(),H.off(l.default.LOADING_PROGRESS,z,e),H.off(_.default.QUALITY_CHANGE_RENDERED,W,e),H.off(_.default.METRIC_ADDED,K,e),n&&n.reset()}},t=q.getLogger(e),G(),e}T.__dashjs_factory_name="AbrController";var b=d.default.getSingletonFactory(T);b.QUALITY_DEFAULT=0,d.default.updateSingletonFactory(T.__dashjs_factory_name,b),t.default=b},"./src/streaming/controllers/BaseURLController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/models/BaseURLTreeModel.js"),i=n("./src/streaming/utils/BaseURLSelector.js"),a=n("./src/streaming/utils/URLUtils.js"),s=n("./src/dash/vo/BaseURL.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js");function d(){var e,t,n,o,d=this.context,c=Object(u.default)(d).getInstance(),f=Object(a.default)(d).getInstance();return e={reset:function(){n.reset(),o.reset()},initialize:function(e){var r;n.setConfig({adapter:t}),r=e,n.update(r),o.chooseSelector(t.getIsDVB(r))},resolve:function(e){var t=n.getForPath(e).reduce((function(e,t){var n=o.select(t);return n?(f.isRelative(n.url)?e.url=f.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new s.default}),new s.default);if(!f.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(n=e.baseURLTreeModel),e.baseURLSelector&&(o=e.baseURLSelector),e.adapter&&(t=e.adapter)}},n=Object(r.default)(d).create(),o=Object(i.default)(d).create(),c.on(l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,(function(e){n.invalidateSelectedIndexes(e.entry)}),e),e}d.__dashjs_factory_name="BaseURLController",t.default=o.default.getClassFactory(d)},"./src/streaming/controllers/BlacklistController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js");function a(e){var t;e=e||{};var n=[],r=Object(i.default)(this.context).getInstance(),a=e.updateEventName,s=e.addBlacklistEventName;function o(e){-1===n.indexOf(e)&&(n.push(e),r.trigger(a,{entry:e}))}return t={add:o,contains:function(e){return!!(n.length&&e&&e.length)&&-1!==n.indexOf(e)},reset:function(){n=[]}},s&&r.on(s,(function(e){o(e.entry)}),t),t}a.__dashjs_factory_name="BlackListController",t.default=r.default.getClassFactory(a)},"./src/streaming/controllers/BufferController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/models/FragmentModel.js"),s=n("./src/streaming/SourceBufferSink.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),d=n("./src/core/Debug.js"),c=n("./src/streaming/utils/InitCache.js"),f=n("./src/streaming/vo/DashJSError.js"),h=n("./src/core/errors/Errors.js"),p=n("./src/streaming/vo/metrics/HTTPRequest.js"),m=n("./src/streaming/MediaPlayerEvents.js"),g=.01,y="BufferController";function v(e){e=e||{};var t,n,l,v,_,T,b,E,S,w,C,A,I,k,R,P,D,O,M=this.context,L=Object(o.default)(M).getInstance(),N=e.errHandler,x=e.fragmentModel,F=e.representationController,U=e.adapter,j=e.textController,B=e.abrController,V=e.playbackController,q=e.streamInfo,H=e.type,G=e.settings;function z(e){T=e}function W(e){return U.convertRepresentationToRepresentationInfo(F.getRepresentationForQuality(e))}function K(e,t,n){var i=W(n);return t&&t[H]&&(H===r.default.VIDEO||H===r.default.AUDIO)?S.initializeForStreamSwitch(e,i,t[H]):S.initializeForFirstUse(q,e,i)}function Y(e){G.get().streaming.cacheInitSegments&&(n.info("Init fragment finished loading saving to",H+"'s init cache"),R.save(e.chunk)),n.debug("Append Init fragment",H," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),Q(e.chunk)}function X(e){Q(e.chunk,e.request)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;S.append(e,t).then((function(e){J(e)})).catch((function(e){J(e)})),e.mediaInfo.type===r.default.VIDEO&&Te(u.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function Z(e){if(e&&e.length>0)for(var t=0,r=e.length;t<r;t++)n.debug("Buffered range: "+e.start(t)+" - "+e.end(t)+", currentTime = ",V.getTime())}function J(e){if(e.error)return 22===e.error.code&&function(){if(k=!0,_=.8*ve(),n.warn("Quota exceeded, Critical Buffer: "+_),_>0){var e=Math.max(.2*_,1),t=_-e,r=Math.min(G.get().streaming.buffer.bufferTimeAtTopQuality,.9*t),i=Math.min(G.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*t),a={streaming:{buffer:{bufferToKeep:parseFloat(e.toFixed(5)),bufferTimeAtTopQuality:parseFloat(r.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(i.toFixed(5))}}};G.update(a)}}(),void(22!==e.error.code&&_e()||(n.warn("Clearing playback buffer to overcome quota exceed situation"),Te(u.default.QUOTA_EXCEEDED,{criticalBufferLevel:_,quotaExceededTime:e.chunk.start}),de(le())));if(S&&(ae(),k=!1,(C=e.chunk)&&C.endFragment)){C&&!isNaN(C.index)&&(b=Math.max(C.index,b),se());var t=S.getAllBufferRanges();C.segmentType===p.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Z(t),te(),function(){if(!isNaN(O))if(H===r.default.AUDIO||H===r.default.VIDEO){var e=V.getTime(),t=ie(O,0);if(e===O&&t)O=NaN;else{var n=F.getCurrentRepresentation().segmentDuration;(t=ie(O,n))&&(G.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(e-O)>n?O<=t.end&&(V.seek(Math.max(O,t.start),!1,!0),O=NaN):e<t.start&&(V.seek(t.start,!1,!0),O=NaN))}}else O=NaN}()),C&&Te(u.default.BYTES_APPENDED_END_FRAGMENT,{quality:C.quality,startTime:C.start,index:C.index,bufferedRanges:t,segmentType:C.segmentType,mediaType:H})}}function $(){return new Promise((function(e,t){var n=ee();if(!n||0===n.length)return te(),void e();de(n).then((function(){e()})).catch((function(e){t(e)}))}))}function ee(e){var t=[],n=S.getAllBufferRanges();if(!n||0===n.length)return t;if(!e&&0!==e||isNaN(e))t.push({start:n.start(0),end:n.end(n.length-1)+.5});else{var r=function(e,t){var n=G.get().streaming.buffer.bufferToKeep,r=t.start(0);if(e-r>n){var i=Math.max(0,e-n),s=x.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:g})[0];if(s&&(i=Math.min(s.startTime,i)),i>0)return{start:r,end:i}}return null}(e,n),i=function(e,t){var n=t.end(t.length-1)+.5,r=q.manifestInfo.duration>=G.get().streaming.buffer.longFormContentDurationThreshold?G.get().streaming.buffer.bufferTimeAtTopQualityLongForm:G.get().streaming.buffer.bufferTimeAtTopQuality;if(n-e>r){var i=e+r,s=x.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:e,threshold:g})[0];if(s&&(i=Math.max(s.startTime+s.duration,i)),i<n)return{start:i,end:n}}return null}(e,n);r&&t.push(r),i&&t.push(i)}return t}function te(){(!D||H===r.default.TEXT&&j.isTextEnabled())&&ae()}function ne(){oe()}function re(){oe(),O=NaN}function ie(e,t){var n,r,i=S.getAllBufferRanges(),a=0,s=0,o=null,u=null,l=0,d=isNaN(t)?.15:t;if(null!=i){for(r=0,n=i.length;r<n;r++)if(a=i.start(r),s=i.end(r),null===o)l=Math.abs(a-e),(e>=a&&e<s||l<=d)&&(o=a,u=s);else{if(!((l=a-u)<=d))break;u=s}if(null!==o)return{start:o,end:u}}return null}function ae(){if(V){var e=G.get().streaming.gaps.jumpGaps&&!isNaN(G.get().streaming.gaps.smallGapLimit)?G.get().streaming.gaps.smallGapLimit:NaN;v=Math.max(function(e,t){var n;return G.get().streaming.gaps.jumpGaps&&(t=G.get().streaming.gaps.smallGapLimit),null===(n=ie(e,t))?0:n.end-e}(V.getTime()||0,e),0),Te(u.default.BUFFER_LEVEL_UPDATED,{mediaType:H,bufferLevel:v}),oe()}}function se(){var e=b>=E-1,t=V.getTimeToStreamEnd(q)-v<=0;!e&&!t||l||(ye(!0),n.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(q.id," and type ").concat(H)))}function oe(){H!==r.default.AUDIO&&H!==r.default.VIDEO||((!G.get().streaming.lowLatencyEnabled&&v<G.get().streaming.buffer.stallThreshold||0===v)&&!l?ue(i.default.BUFFER_EMPTY):(l||v>=G.get().streaming.buffer.stallThreshold||G.get().streaming.lowLatencyEnabled&&v>0)&&ue(i.default.BUFFER_LOADED))}function ue(e){w===e||e===i.default.BUFFER_EMPTY&&0===V.getTime()||H===r.default.TEXT&&!j.isTextEnabled()||(w=e,Te(u.default.BUFFER_LEVEL_STATE_CHANGED,{state:e}),Te(e===i.default.BUFFER_LOADED?u.default.BUFFER_LOADED:u.default.BUFFER_EMPTY),n.debug(e===i.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function le(){var e=[],t=S.getAllBufferRanges();if(!t||0===t.length)return e;var n=V.getTime(),r=Math.max(0,n-G.get().streaming.buffer.bufferToKeep),i=x.getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:g})[0];if(i)r=Math.min(i.startTime,r);else if(0===n&&V.getIsDynamic())return[];if(t.start(0)<=r){for(var s={start:0,end:r},o=0;o<t.length&&t.end(o)<=r;o++)s.end=t.end(o);s.start<s.end&&e.push(s)}return e}function de(e){return new Promise((function(t,n){if(e&&S&&0!==e.length){var r=[];e.forEach((function(e){r.push(function(e){return new Promise((function(t,n){e.resolve=t,e.reject=n,P.push(e)}))}(e))})),I||ce(),Promise.all(r).then((function(){t()})).catch((function(e){n(e)}))}else t()}))}function ce(){try{if(0===P.length||!S)return n.debug("Nothing to prune, halt pruning"),P=[],void(I=!1);var e=S.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return n.debug("SourceBuffer is empty (or does not exist), halt pruning"),P=[],void(I=!1);var t=P.shift();n.debug("".concat(H,": Removing buffer from: ").concat(t.start," to ").concat(t.end)),I=!0,V.getTime()<t.end&&ye(!1),S.remove(t).then((function(e){fe(e)})).catch((function(e){fe(e)}))}catch(e){I=!1}}function fe(e){n.debug("onRemoved buffer from:",e.from,"to",e.to),Z(S.getAllBufferRanges()),0===P.length&&(I=!1,ae()),e.unintended&&(n.warn("Detected unintended removal from:",e.from,"to",e.to,"setting streamprocessor time to",e.from),Te(u.default.SEEK_TARGET,{time:e.from})),I?ce():(D?D=!1:ae(),Te(u.default.BUFFER_CLEARED,{from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:_e(),quotaExceeded:k}))}function he(e){return new Promise((function(t){e&&void 0!==e.MSETimeOffset&&S&&S.updateTimestampOffset?S.updateTimestampOffset(e.MSETimeOffset).then((function(){t()})).catch((function(){t()})):t()}))}function pe(){return S&&!l?S.updateAppendWindow(q):Promise.resolve()}function me(){++A*(G.get().streaming.wallclockTimeUpdateInterval/1e3)>=G.get().streaming.buffer.bufferPruningInterval&&(A=0,S&&H!==r.default.TEXT&&(l||de(le())))}function ge(){oe()}function ye(e){l!==e&&((l=e)?Te(u.default.BUFFERING_COMPLETED):E=Number.POSITIVE_INFINITY)}function ve(){try{var e,t,n=S.getAllBufferRanges(),r=0;if(!n)return r;for(t=0,e=n.length;t<e;t++)r+=n.end(t)-n.start(t);return r}catch(e){return 0}}function _e(){var e=ve();return isNaN(e)||e<_}function Te(e,t){var n=t||{};L.trigger(e,n,{streamId:q.id,mediaType:H})}function be(e,t){_=Number.POSITIVE_INFINITY,w=void 0,E=Number.POSITIVE_INFINITY,b=0,C=null,l=!1,I=!1,k=!1,v=0,A=0,P=[],O=NaN,S&&(e||t?S=null:S.abort().then((function(){S.reset(t),S=null}))),D=!1}return t={initialize:function(e){z(e),L.on(u.default.INIT_FRAGMENT_LOADED,Y,t),L.on(u.default.MEDIA_FRAGMENT_LOADED,X,t),L.on(u.default.WALLCLOCK_TIME_UPDATED,me,t),L.on(m.default.PLAYBACK_PLAYING,re,t),L.on(m.default.PLAYBACK_PROGRESS,te,t),L.on(m.default.PLAYBACK_TIME_UPDATED,te,t),L.on(m.default.PLAYBACK_RATE_CHANGED,ge,t),L.on(m.default.PLAYBACK_STALLED,ne,t)},getStreamId:function(){return q.id},getType:function(){return H},getBufferControllerType:function(){return y},createBufferSink:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return new Promise((function(r,i){if(R&&e&&T){var a=B.getQualityFor(H,q.id);S=Object(s.default)(M).create({mediaSource:T,textController:j,eventBus:L}),K(e,t,a).then((function(){return he(W(a))})).then((function(){r(S)})).catch((function(e){n.fatal("Caught error on create SourceBuffer: "+e),N.error(new f.default(h.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,h.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+H)),i(e)}))}else r(null)}))},getBuffer:function(){return S},getBufferLevel:function(){return v},getRangeAt:ie,setMediaSource:z,getMediaSource:function(){return T},appendInitSegmentFromCache:function(e){var t=R.extract(q.id,e);return!!t&&(n.info("Append Init fragment",H," with representationId:",t.representationId," and quality:",t.quality,", data size:",t.bytes.byteLength),Q(t),!0)},getIsBufferingCompleted:function(){return l},setIsBufferingCompleted:ye,getIsPruningInProgress:function(){return I},reset:function(e,t){L.off(u.default.INIT_FRAGMENT_LOADED,Y,this),L.off(u.default.MEDIA_FRAGMENT_LOADED,X,this),L.off(u.default.WALLCLOCK_TIME_UPDATED,me,this),L.off(m.default.PLAYBACK_PLAYING,re,this),L.off(m.default.PLAYBACK_PROGRESS,te,this),L.off(m.default.PLAYBACK_TIME_UPDATED,te,this),L.off(m.default.PLAYBACK_RATE_CHANGED,ge,this),L.off(m.default.PLAYBACK_STALLED,ne,this),be(e,t)},prepareForPlaybackSeek:function(){return l&&ye(!1),S.abort()},prepareForReplacementTrackSwitch:function(e){return new Promise((function(t,n){S.abort().then((function(){return pe()})).then((function(){return S.changeType(e)})).then((function(){return $()})).then((function(){ye(!1),t()})).catch((function(e){n(e)}))}))},prepareForNonReplacementTrackSwitch:function(e){return new Promise((function(t,n){pe().then((function(){return S.changeType(e)})).then((function(){t()})).catch((function(e){n(e)}))}))},prepareForReplacementQualitySwitch:function(){return new Promise((function(e,t){S.abort().then((function(){return pe()})).then((function(){return $()})).then((function(){ye(!1),e()})).catch((function(e){t(e)}))}))},updateAppendWindow:pe,getAllRangesWithSafetyFactor:ee,getContinuousBufferTimeForTargetTime:function(e){try{var t=e,n=S.getAllBufferRanges();if(!n||0===n.length)return e;for(var r=0;t===e&&r<n.length;){var i=n.start(r),a=n.end(r);t>=i&&t<=a&&(t=a),r+=1}return t}catch(e){}},clearBuffers:de,pruneAllSafely:$,updateBufferTimestampOffset:he,setSeekTarget:function(e){O=e},segmentRequestingCompleted:function(e){isNaN(e)||(E=e,se())}},n=Object(d.default)(M).getInstance().getLogger(t),R=Object(c.default)(M).getInstance(),be(),t}v.__dashjs_factory_name=y,t.default=l.default.getClassFactory(v)},"./src/streaming/controllers/EventController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),s=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/streaming/net/XHRLoader.js");function u(){var e,t,n,r,u,l,d,c,f,h,p,m="urn:mpeg:dash:event:2012",g="discarded",y="updated",v="added",_=this.context,T=Object(a.default)(_).getInstance();function b(){if(!d||!c)throw new Error("setConfig function has to be called previously")}function E(){p=!1,n={},r={},u=null,h=!1,l=Date.now()/1e3}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.eventStream.schemeIdUri,i=e.eventStream.value,a=e.id,s=g;t[r]||(t[r]=[]);var o=t[r].findIndex((function(e){return(!i||e.eventStream.value&&e.eventStream.value===i)&&e.id===a}));return-1===o?(t[r].push(e),s=v):n&&(t[r][o]=e,s=y),s}function w(e){try{if(1==e.eventStream.value){var t,n=e.calculatedPresentationTime;t=4294967295==e.calculatedPresentationTime?NaN:e.calculatedPresentationTime+e.duration,T.trigger(s.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:n,newDuration:t,newManifestValidAfter:NaN},{mode:s.default.EVENT_MODE_ON_START})}}catch(e){}}function C(){try{if(!h){h=!0;var e=c.getTime(),t=e-l;t=l>0?Math.max(0,t):0,A(r,t,e),A(n,t,e),l=e,h=!1}}catch(e){h=!1}}function A(e,n,r){try{k(e,(function(i){if(void 0!==i){var a=isNaN(i.duration)?0:i.duration;i.calculatedPresentationTime<=r&&i.calculatedPresentationTime+n+a>=r?R(i,e,s.default.EVENT_MODE_ON_START):(function(e,t,n){try{return e-t>n}catch(e){return!1}}(r,a+n,i.calculatedPresentationTime)||function(e){try{var t=e.eventStream.period.start+e.eventStream.period.duration;return e.calculatedPresentationTime>t}catch(e){return!1}}(i))&&(t.debug("Deleting event ".concat(i.id," as it is expired or invalid")),P(e,i))}}))}catch(e){}}function I(e){try{var t=c.getTime();k(e,(function(n){var r=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.duration)?n.eventStream.period.duration:NaN,i=n.eventStream&&n.eventStream.period&&!isNaN(n.eventStream.period.start)?n.eventStream.period.start:NaN;if(!isNaN(r)&&!isNaN(i)){var a=n.calculatedPresentationTime;Math.abs(a-t)<300&&R(n,e,s.default.EVENT_MODE_ON_START)}}))}catch(e){}}function k(e,t){try{if(e)for(var n=Object.keys(e),r=0;r<n.length;r++)e[n[r]].forEach((function(e){void 0!==e&&t(e)}))}catch(e){}}function R(e,n,r){try{var i=c.getTime(),a=e.id;if(r===s.default.EVENT_MODE_ON_RECEIVE)return t.debug("Received event ".concat(a)),void T.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r});e.eventStream.schemeIdUri===m&&1==e.eventStream.value?0===e.duration&&0===e.presentationTimeDelta||(t.debug("Starting manifest refresh event ".concat(a," at ").concat(i)),P(n,e),function(){try{b(),d.refreshManifest()}catch(e){}}()):"urn:mpeg:dash:event:callback:2015"===e.eventStream.schemeIdUri&&1==e.eventStream.value?(t.debug("Starting callback event ".concat(a," at ").concat(i)),P(n,e),function(e){try{Object(o.default)(_).create({}).load({method:"get",url:e,request:{responseType:"arraybuffer"}})}catch(e){throw e}}(e.messageData)):(t.debug("Starting event ".concat(a," at ").concat(i)),P(n,e),T.trigger(e.eventStream.schemeIdUri,{event:e},{mode:r}))}catch(e){}}function P(e,t){var n=t.eventStream.schemeIdUri,r=t.eventStream.value,i=t.id;e[n]=e[n].filter((function(e){return r&&e.eventStream.value&&e.eventStream.value!==r||e.id!==i})),0===e[n].length&&delete e[n]}return e={addInlineEvents:function(e){try{if(b(),e)for(var r=0;r<e.length;r++){var i=e[r],a=S(i,n,!0);a===v?(t.debug("Added inline event with id ".concat(i.id)),R(i,e,s.default.EVENT_MODE_ON_RECEIVE)):a===y&&t.debug("Updated inline event with id ".concat(i.id))}}catch(e){throw e}},addInbandEvents:function(e){try{b();for(var n=0;n<e.length;n++){var i=e[n];S(i,r,!1)===v?(i.eventStream.schemeIdUri===m&&void 0===r[i.id]&&w(i),t.debug("Added inband event with id "+i.id),R(i,e,s.default.EVENT_MODE_ON_RECEIVE)):t.debug("Inband event with scheme_id_uri ".concat(i.eventStream.schemeIdUri,", value ").concat(i.eventStream.value," and id ").concat(i.id," was ignored because it has been added before."))}C()}catch(e){throw e}},getInbandEvents:function(){return r},getInlineEvents:function(){return n},start:function(){try{b(),t.debug("Start Event Controller");var e=f.get().streaming.eventControllerRefreshDelay;p||isNaN(e)||(p=!0,u=setInterval(C,e))}catch(e){throw e}},setConfig:function(e){try{if(!e)return;e.manifestUpdater&&(d=e.manifestUpdater),e.playbackController&&(c=e.playbackController),e.settings&&(f=e.settings)}catch(e){throw e}},reset:function(){(function(){try{null!==u&&p&&(clearInterval(u),u=null,p=!1,function(){try{I(r),I(n)}catch(e){}}())}catch(e){throw e}})(),E()}},t=Object(i.default)(_).getInstance().getLogger(e),E(),e}u.__dashjs_factory_name="EventController",t.default=r.default.getSingletonFactory(u)},"./src/streaming/controllers/FragmentController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/DataChunk.js"),a=n("./src/streaming/models/FragmentModel.js"),s=n("./src/streaming/FragmentLoader.js"),o=n("./src/streaming/utils/RequestModifier.js"),u=n("./src/core/EventBus.js"),l=n("./src/core/events/Events.js"),d=n("./src/streaming/MediaPlayerEvents.js"),c=n("./src/core/errors/Errors.js"),f=n("./src/core/FactoryMaker.js"),h=n("./src/core/Debug.js");function p(e){e=e||{};var t,n,f,p=this.context,m=Object(u.default)(p).getInstance(),g=e.errHandler,y=e.mediaPlayerModel,v=e.dashMetrics,_=Object(h.default)(p).getInstance(),T=e.streamInfo;function b(){return T.id}function E(){for(var e in f)f[e].reset();f={}}function S(e){if(e.sender){var t=e.request,a=e.response,s=t.isInitializationRequest(),o=t.mediaInfo.streamInfo;if(e.error&&(t.mediaType===r.default.AUDIO||t.mediaType===r.default.VIDEO||t.mediaType===r.default.TEXT&&t.mediaInfo.isFragmented)&&m.trigger(l.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation}),a&&o){var u=function(e,t,n,r){var a=new i.default;return a.streamId=n,a.mediaInfo=t.mediaInfo,a.segmentType=t.type,a.start=t.startTime,a.duration=t.duration,a.end=a.start+a.duration,a.bytes=e,a.index=t.index,a.quality=t.quality,a.representationId=t.representationId,a.endFragment=r,a}(a,t,T.id,e.type!==l.default.FRAGMENT_LOADING_PROGRESS);m.trigger(s?l.default.INIT_FRAGMENT_LOADED:l.default.MEDIA_FRAGMENT_LOADED,{chunk:u,request:t},{streamId:o.id,mediaType:t.mediaType})}else n.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return t={getStreamId:b,getModel:function(t){var n=f[t];return n||(n=Object(a.default)(p).create({streamInfo:T,type:t,dashMetrics:v,fragmentLoader:Object(s.default)(p).create({dashMetrics:v,mediaPlayerModel:y,errHandler:g,requestModifier:Object(o.default)(p).getInstance(),settings:e.settings,boxParser:e.boxParser,eventBus:m,events:l.default,errors:c.default,dashConstants:e.dashConstants,urlUtils:e.urlUtils,streamId:b()}),debug:_,eventBus:m,events:l.default}),f[t]=n),n},reset:function(){m.off(d.default.FRAGMENT_LOADING_COMPLETED,S,this),m.off(d.default.FRAGMENT_LOADING_PROGRESS,S,this),E()}},n=_.getLogger(t),E(),m.on(d.default.FRAGMENT_LOADING_COMPLETED,S,t),m.on(d.default.FRAGMENT_LOADING_PROGRESS,S,t),t}p.__dashjs_factory_name="FragmentController",t.default=f.default.getClassFactory(p)},"./src/streaming/controllers/GapController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/events/Events.js"),s=n("./src/core/EventBus.js");function o(){var e,t,n,r,o,u,l,d,c,f,h,p,m=this.context,g=Object(s.default)(m).getInstance();function y(){p.debug("Stopping the gap controller"),o&&(clearInterval(o),o=null),function(){g.off(a.default.WALLCLOCK_TIME_UPDATED,E,this),g.off(a.default.INITIAL_STREAM_SWITCH,b,this),g.off(a.default.PLAYBACK_SEEKING,v,this),g.off(a.default.BUFFER_REPLACEMENT_STARTED,_,e),g.off(a.default.TRACK_CHANGE_RENDERED,T,e)}(),o=null,u=NaN,r=0,f=null,h={}}function v(){f&&(clearTimeout(f),f=null)}function _(e){try{if(e.streamId!==d.getActiveStreamInfo().id||!e.mediaType)return;e.streamId===d.getActiveStreamInfo().id&&(h[e.mediaType]=!0)}catch(e){p.error(e)}}function T(e){e&&e.mediaType&&(h[e.mediaType]=!1)}function b(){o||function(){try{o||(p.debug("Starting the gap controller"),o=setInterval((function(){S()&&A(l.getTime())}),100))}catch(e){}}()}function E(){if(S(n.get().streaming.gaps.enableSeekFix)&&++r>=10){var e=l.getTime();t===e?A(e,!0):(t=e,u=NaN),r=0}}function S(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object.keys(h).some((function(e){return h[e]})),r=!!e&&w();return!t&&n.get().streaming.gaps.jumpGaps&&d.getActiveStreamProcessors().length>0&&(!l.isSeeking()||r)&&!l.isPaused()&&!d.getIsStreamSwitchInProgress()&&!d.getHasMediaOrInitialisationError()}function w(){var e=d.getActiveStream(),t=parseFloat((e.getStartTime()+e.getDuration()).toFixed(5));return l.getTime()+n.get().streaming.gaps.threshold>=t}function C(e,t){try{if(!e||e.length<=1&&t>0)return NaN;for(var r=NaN,i=0;isNaN(r)&&i<e.length;){var a=i>0?e.end(i-1):0;t<e.start(i)&&a-t<n.get().streaming.gaps.threshold&&(r=i),i+=1}return r}catch(e){return null}}function A(e){var t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=n.get().streaming.gaps.smallGapLimit,a=n.get().streaming.gaps.jumpLargeGaps,s=c.getBufferRange(),o=NaN,h=!1;if(t=C(s,e),!isNaN(t)){var m=s.start(t),g=m-e;g>0&&(g<=i||a)&&(o=m)}var y=l.getTimeToStreamEnd();if(isNaN(o)&&r&&isFinite(y)&&!isNaN(y)&&y<i&&(o=parseFloat(l.getStreamEndTime().toFixed(5)),h=!0),o>0&&u!==o&&o>e&&!f){var v=o-e;if(h){var _=d.getStreamForTime(o),T=_&&!!_.getPreloaded();p.warn("Jumping to end of stream because of gap from ".concat(e," to ").concat(o,". Gap duration: ").concat(v)),l.seek(o,!0,T)}else{var b=l.getIsDynamic(),E=t>0?s.end(t-1):e,S=b?1e3*Math.max(0,v-.1):0;f=window.setTimeout((function(){l.seek(o,!0,!0),p.warn("Jumping gap occuring in period ".concat(d.getActiveStream().getStreamId()," starting at ").concat(E," and ending at ").concat(o,". Jumping by: ").concat(v-S/1e3)),f=null}),S)}u=o}}return e={reset:y,setConfig:function(e){e&&(e.settings&&(n=e.settings),e.playbackController&&(l=e.playbackController),e.streamController&&(d=e.streamController),e.videoModel&&(c=e.videoModel))},initialize:function(){!function(){g.on(a.default.WALLCLOCK_TIME_UPDATED,E,this),g.on(a.default.INITIAL_STREAM_SWITCH,b,this),g.on(a.default.PLAYBACK_SEEKING,v,this),g.on(a.default.BUFFER_REPLACEMENT_STARTED,_,e),g.on(a.default.TRACK_CHANGE_RENDERED,T,e)}()}},p=Object(i.default)(m).getInstance().getLogger(e),y(),e}o.__dashjs_factory_name="GapController",t.default=r.default.getSingletonFactory(o)},"./src/streaming/controllers/MediaController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/core/Debug.js");function u(){var e,t,n,s,u,l,d,c,f=this.context,h=Object(a.default)(f).getInstance();function p(e,t){return e&&n[t]&&n[t][e]?n[t][e].list:[]}function m(e,t){return e&&n[t]&&n[t][e]?n[t][e].current:null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&e.streamInfo){var a=e.type,o=e.streamInfo,u=o.id,c=m(a,u);if(n[u]&&n[u][a]&&!_(e,c)&&(n[u][a].current=e,n[u][a].current&&(a!==r.default.TEXT||a===r.default.TEXT&&e.isFragmented)&&h.trigger(i.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:c,newMediaInfo:e,switchMode:s.get().streaming.trackSwitchMode[a]},{streamId:u}),!t)){var f=b(e);if(!f||!n[u][a].storeLastSettings)return;f.roles&&(f.role=f.roles[0],delete f.roles),f.accessibility&&(f.accessibility=f.accessibility[0]),f.audioChannelConfiguration&&(f.audioChannelConfiguration=f.audioChannelConfiguration[0]),l[a]=f,d.setSavedMediaSettings(a,f)}}}function y(e,t){e&&t&&(u[e]=t)}function v(e){return e?u[e]:null}function _(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.codec===t.codec,s=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),u=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&a&&r&&i&&s&&o&&u}function T(){n={},l={},c=null,u={audio:null,video:null,text:null}}function b(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!e.lang||t.lang.match(e.lang),a=void 0===e.index||null===e.index||t.index===e.index,s=!e.viewpoint||e.viewpoint===t.viewpoint,o=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],u=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],l=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return i&&a&&s&&(o||t.type===r.default.AUDIO&&n)&&u&&l}function S(e){var t,n=0,r=[];return e.forEach((function(e){(t=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))))>n?(n=t,r=[e]):t===n&&r.push(e)})),r}function w(e){var t,n=1/0,r=[];return e.forEach((function(e){var i=e.bitrateList.reduce((function(e,t){var n=Math.max(1,t.width*t.height);return e+t.bandwidth/n}),0);(t=i/e.bitrateList.length)<n?(n=t,r=[e]):t===n&&r.push(e)})),r}function C(e){var t,n=0,r=[];return e.forEach((function(e){(t=e.representationCount)>n?(n=t,r=[e]):t===n&&r.push(e)})),r}function A(e,n){if(e===r.default.TEXT)return n[0];var i,a=s.get().streaming.selectionModeForInitialTrack;if(c&&"function"==typeof c)i=c(n);else switch(a){case r.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:i=function(e){var t,n,r=(t=0,n=[],e.forEach((function(e){isNaN(e.selectionPriority)||(e.selectionPriority>t?(t=e.selectionPriority,n=[e]):e.selectionPriority===t&&n.push(e))})),n);return r.length>1&&(r=S(r)),r.length>1&&(r=C(r)),r}(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:i=function(e){var t=S(e);return t.length>1&&(t=C(t)),t}(n);break;case r.default.TRACK_SELECTION_MODE_FIRST_TRACK:i=I(n);break;case r.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:i=function(e){var t=w(e);return t.length>1&&(t=S(t)),t}(n);break;case r.default.TRACK_SELECTION_MODE_WIDEST_RANGE:i=function(e){var t=C(e);return t.length>1&&(t=S(e)),t}(n);break;default:t.warn("Track selection mode ".concat(a," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),i=I(n)}return i.length>0?i[0]:n[0]}function I(e){return e[0]}return e={setInitialMediaSettingsForType:function(e,t){var n=l[e]||v(e),r=p(e,t.id),i=[];n||(n=d.getSavedMediaSettings(e),y(e,n)),r&&0!==r.length&&(n&&r.forEach((function(t){E(n,t,!!l[e])&&i.push(t)})),0===i.length?g(A(e,r),!0):i.length>1?g(A(e,i,l[e])):g(i[0]))},addTrack:function(e){if(e){var t=e.type;if((i=t)===r.default.AUDIO||i===r.default.VIDEO||i===r.default.TEXT||i===r.default.IMAGE){var i,a=e.streamInfo.id;n[a]||(n[a]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var s=n[a][t].list,o=0,u=s.length;o<u;++o)if(_(s[o],e))return;s.push(e)}}},getTracksFor:p,getCurrentTrackFor:m,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,r=e.streamInfo.id;return n[r]&&n[r][t]&&_(n[r][t].current,e)},setTrack:g,selectInitialTrack:A,setCustomInitialTrackSelectionFunction:function(e){c=e},setInitialSettings:y,getInitialSettings:v,getTracksWithHighestBitrate:S,getTracksWithHighestEfficiency:w,getTracksWithWidestRange:C,isTracksEqual:_,matchSettings:E,saveTextSettingsDisabled:function(){d.setSavedMediaSettings(r.default.TEXT,null)},setConfig:function(e){e&&(e.domStorage&&(d=e.domStorage),e.settings&&(s=e.settings))},reset:T},t=Object(o.default)(f).getInstance().getLogger(e),T(),e}u.__dashjs_factory_name="MediaController";var l=s.default.getSingletonFactory(u);s.default.updateSingletonFactory(u.__dashjs_factory_name,l),t.default=l},"./src/streaming/controllers/MediaSourceController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var e,t,n,r=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?t=new MediaSource:e&&(t=new WebKitMediaSource),t},attachMediaSource:function(e){var n=window.URL.createObjectURL(t);return e.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function e(r){t&&"open"===t.readyState&&(null===r&&isNaN(r)||t.duration!==r&&(function(e){for(var t=e.sourceBuffers,n=0;n<t.length;n++)if(t[n].updating)return!0;return!1}(t)?setTimeout(e.bind(null,r),50):(n.info("Set MediaSource duration:"+r),t.duration=r)))},setSeekable:function(e,n){t&&"function"==typeof t.setLiveSeekableRange&&"function"==typeof t.clearLiveSeekableRange&&"open"===t.readyState&&e>=0&&e<n&&(t.clearLiveSeekableRange(),t.setLiveSeekableRange(e,n))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var t=e.sourceBuffers,r=0;r<t.length;r++){if(t[r].updating)return;if(0===t[r].buffered.length)return}n.info("call to mediaSource endOfStream"),e.endOfStream()}}},n=Object(i.default)(r).getInstance().getLogger(e),e}a.__dashjs_factory_name="MediaSourceController",t.default=r.default.getSingletonFactory(a)},"./src/streaming/controllers/PlaybackController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/MediaPlayerEvents.js");function d(){var e,t,n,o,d,c,f,h,p,m,g,y,v,_,T,b,E,S,w,C,A,I,k=this.context,R=Object(a.default)(k).getInstance();function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return parseFloat((D(e)-U()).toFixed(5))}function D(e){var t=e||m;return t.start+t.duration}function O(){m&&c&&c.getElement()?c.play():v=!0}function M(){return m&&c?c.isPaused():null}function L(){m&&c&&c.pause()}function N(){return m&&c?c.isSeeking():null}function x(){return m&&c?c.isStalled():null}function F(e,n,r){m&&c&&e!==(isNaN(b)?c.getTime():b)&&((E=!0===r)||(b=e,R.trigger(s.default.PLAYBACK_SEEK_ASKED)),t.info("Requesting seek to time: "+e+(E?" (internal)":"")),c.setCurrentTime(e,n))}function U(){return m&&c?c.getTime():null}function j(){var e=U();if(g&&!isNaN(T)){var t=T/1e3;e>t&&(e-=t)}return e}function B(){return m&&c?c.getPlaybackRate():null}function V(){return m&&c?c.getEnded():null}function q(){return g}function H(){if(!g||isNaN(T))return NaN;var e=j();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*f.getClientTimeOffset();return Math.max(((t-T-1e3*e)/1e3).toFixed(3),0)}function G(){L(),v=!1,p=0,T=0,A=!1,b=NaN,c&&(R.off(s.default.DATA_UPDATE_COMPLETED,X,e),R.off(s.default.LOADING_PROGRESS,ye,e),R.off(s.default.MANIFEST_UPDATED,Ee,e),R.off(s.default.STREAMS_COMPOSED,Se,e),R.off(l.default.BUFFER_LEVEL_STATE_CHANGED,ve,e),R.off(l.default.PLAYBACK_PROGRESS,fe,e),R.off(l.default.PLAYBACK_TIME_UPDATED,fe,e),R.off(l.default.PLAYBACK_ENDED,de,e),R.off(l.default.STREAM_INITIALIZING,Te,e),R.off(l.default.REPRESENTATION_SWITCH,be,e),c.setPlaybackRate(1,!0),K(),c.removeEventListener("canplay",Q),c.removeEventListener("canplaythrough",Z),c.removeEventListener("play",J),c.removeEventListener("waiting",$),c.removeEventListener("playing",ee),c.removeEventListener("pause",te),c.removeEventListener("error",ce),c.removeEventListener("seeking",ne),c.removeEventListener("seeked",re),c.removeEventListener("timeupdate",ie),c.removeEventListener("progress",ae),c.removeEventListener("ratechange",se),c.removeEventListener("loadedmetadata",oe),c.removeEventListener("loadeddata",ue),c.removeEventListener("stalled",_e),c.removeEventListener("ended",le)),h=null,c=null,m=null,g=null}function z(e,t){var n=o.getCurrentDVRInfo(t),r=n?n.range:null;return r?e>r.end?Math.max(r.end-p,r.start):e>0&&e+.25<r.start&&Math.abs(e-r.start)<31536e4?I.get().streaming.lowLatencyEnabled?Math.max(r.end-p,r.start):r.start:e:NaN}function W(){null===h&&(h=setInterval((function(){var e;R.trigger(s.default.WALLCLOCK_TIME_UPDATED,{isDynamic:g,time:new Date}),q()&&(n.addDVRMetric(),M()?(e=Date.now(),(!_||e>_+500)&&(_=e,ie())):Y())}),I.get().streaming.wallclockTimeUpdateInterval))}function K(){clearInterval(h),h=null}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!M()&&g&&0!==c.getReadyState()&&!N()&&!A){e||(e=n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO);var i=j(),a=z(i,e),s=!isNaN(a)&&a!==i;s&&!N()&&(x()||w||1===c.getReadyState())&&(t.debug("UpdateCurrentTime: Seek to actual time: ".concat(a," from currentTime: ").concat(i)),F(a))}}function X(e){var t=d.convertRepresentationToRepresentationInfo(e.currentRepresentation),n=t?t.mediaInfo.streamInfo:null;null!==n&&m.id===n.id&&(m=n)}function Q(){R.trigger(s.default.CAN_PLAY)}function Z(){R.trigger(s.default.CAN_PLAY_THROUGH)}function J(){t.info("Native video element event: play"),Y(),W(),R.trigger(s.default.PLAYBACK_STARTED,{startTime:U()})}function $(){t.info("Native video element event: waiting"),R.trigger(s.default.PLAYBACK_WAITING,{playingTime:U()})}function ee(){t.info("Native video element event: playing"),R.trigger(s.default.PLAYBACK_PLAYING,{playingTime:U()})}function te(){t.info("Native video element event: pause"),R.trigger(s.default.PLAYBACK_PAUSED,{ended:V()})}function ne(){if(E)E=!1;else{var e=U();isNaN(b)||b===e||(e=b),b=NaN,t.info("Seeking to: "+e),W(),R.trigger(s.default.PLAYBACK_SEEKING,{seekTime:e,streamId:m.id})}}function re(){t.info("Native video element event: seeked"),R.trigger(s.default.PLAYBACK_SEEKED)}function ie(){m&&R.trigger(s.default.PLAYBACK_TIME_UPDATED,{timeToEnd:P(),time:U(),streamId:m.id})}function ae(){R.trigger(s.default.PLAYBACK_PROGRESS,{streamId:m.id})}function se(){var e=B();t.info("Native video element event: ratechange: ",e),R.trigger(s.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function oe(){t.info("Native video element event: loadedmetadata"),R.trigger(s.default.PLAYBACK_METADATA_LOADED),W()}function ue(){t.info("Native video element event: loadeddata"),R.trigger(s.default.PLAYBACK_LOADED_DATA)}function le(){t.info("Native video element event: ended"),L(),K();var e=n?n.getActiveStreamInfo():null;e&&R.trigger(s.default.PLAYBACK_ENDED,{isLast:e.isLast})}function de(e){if(h&&e.isLast){t.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var n=e.seekTime?e.seekTime:D();c.setCurrentTime(n),L(),K()}}function ce(e){var t=e.target||e.srcElement;R.trigger(s.default.PLAYBACK_ERROR,{error:t.error})}function fe(){g&&he()&&I.get().streaming.liveCatchup.playbackRate>0&&!M()&&!N()&&(function(){try{if(he()&&I.get().streaming.liveCatchup.playbackRate>0&&U()>0){var e=me(),t=H(),n=y.getLiveDelay(),i=y.getLiveCatchupLatencyThreshold(),a=I.get().streaming.liveCatchup.minDrift;return e===r.default.LIVE_CATCHUP_MODE_LOLP?function(e,t,n,r,i,a){try{var s=Math.abs(e-t);return(isNaN(a)||e<=a)&&(s>n||r<i)}catch(e){return!1}}(t,n,a,pe(),I.get().streaming.liveCatchup.playbackBufferMin,i):function(e,t,n,r){try{return Math.abs(e-t)>r&&(isNaN(n)||e<=n)}catch(e){return!1}}(t,n,i,a)}}catch(e){return!1}}()?function(){if(c){var e,i=c.getPlaybackRate(),a=I.get().streaming.liveCatchup.playbackRate,s=H(),u=y.getLiveDelay(),l=pe();me()===r.default.LIVE_CATCHUP_MODE_LOLP?(I.get().streaming.liveCatchup.minDrift,e=function(e,n,r,i,a,s,o){var u,l=e;if(s<a){var d=5*(s-a);u=1-l+2*l/(1+Math.pow(Math.E,-d)),t.debug("[LoL+ playback control_buffer-based] bufferLevel: "+s+", newRate: "+u)}else{if(Math.abs(n-r)<=.02*r)u=1;else{var c=5*(n-r);u=1-l+2*l/(1+Math.pow(Math.E,-c))}t.debug("[LoL+ playback control_latency-based] latency: "+n+", newRate: "+u)}return w&&s>r/2&&(w=!1),Math.abs(o-u)<=C&&(u=null),{newRate:u}}(a,s,u,0,I.get().streaming.liveCatchup.playbackBufferMin,l,i)):e=function(e,t,n,r,i){var a=t-n,s=5*a,o=1-e+2*e/(1+Math.pow(Math.E,-s));return w&&(r>n/2?w=!1:a>0&&(o=1)),Math.abs(i-o)<=C&&(o=null),{newRate:o}}(a,s,u,l,i);var d=e.newRate;d&&c.setPlaybackRate(d);var f=s-u;I.get().streaming.liveCatchup.maxDrift>0&&!S&&f>I.get().streaming.liveCatchup.maxDrift?(t.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),S=!0,h=n&&n.hasVideoTrack()?r.default.VIDEO:r.default.AUDIO,(m=(p=o.getCurrentDVRInfo(h))?p.range:null)&&!isNaN(m.end)&&F(m.end-y.getLiveDelay(),!0,!1)):S=!1}var h,p,m}():ge())}function he(){return I.get().streaming.liveCatchup.enabled||I.get().streaming.lowLatencyEnabled}function pe(){var e=null;return n.getActiveStreamProcessors().forEach((function(t){var n=t.getBufferLevel();e=null===e?n:Math.min(e,n)})),e}function me(){var e=I.get().streaming.liveCatchup.playbackBufferMin;return I.get().streaming.liveCatchup.mode!==r.default.LIVE_CATCHUP_MODE_LOLP||null===e||isNaN(e)?r.default.LIVE_CATCHUP_MODE_DEFAULT:r.default.LIVE_CATCHUP_MODE_LOLP}function ge(){c&&c.setPlaybackRate(1)}function ye(e){if(!1===e.stream&&I.get().streaming.lowLatencyEnabled&&!isNaN(e.request.duration)){var n=1.2*e.request.duration;n>y.getLiveDelay()&&(t.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",n.toFixed(2)),I.update({streaming:{delay:{liveDelay:n}}}))}}function ve(e){e.streamId===m.id&&(he()?e.state!==i.default.BUFFER_EMPTY||N()||w||(w=!0,ge()):I.get().streaming.buffer.setStallState&&c.setStallState(e.mediaType,e.state===i.default.BUFFER_EMPTY))}function _e(e){R.trigger(s.default.PLAYBACK_STALLED,{e})}function Te(e){var n;(n=e.mediaInfo)&&n.supplementalProperties&&"true"===n.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(t.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),I.update({streaming:{lowLatencyEnabled:!0}}))}function be(e){var t=n.getActiveStreamInfo();if(I.get().streaming.lowLatencyEnabledByManifest&&e&&t&&e.currentRepresentation&&e.streamId&&e.streamId===t.id&&e.mediaType&&(e.mediaType===r.default.VIDEO||e.mediaType===r.default.AUDIO)){var i=!e.currentRepresentation.availabilityTimeComplete;i&&I.update({streaming:{lowLatencyEnabled:i}})}}function Ee(){A=!0}function Se(){A=!1}return e={initialize:function(t,n){m=t,!0!==n&&function(){c.addEventListener("canplay",Q),c.addEventListener("canplaythrough",Z),c.addEventListener("play",J),c.addEventListener("waiting",$),c.addEventListener("playing",ee),c.addEventListener("pause",te),c.addEventListener("error",ce),c.addEventListener("seeking",ne),c.addEventListener("seeked",re),c.addEventListener("timeupdate",ie),c.addEventListener("progress",ae),c.addEventListener("ratechange",se),c.addEventListener("loadedmetadata",oe),c.addEventListener("loadeddata",ue),c.addEventListener("stalled",_e),c.addEventListener("ended",le),g=m.manifestInfo.isDynamic,S=!1,w=!1,E=!1;var t="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",n=/safari/.test(t)&&!/chrome/.test(t);C=n?.25:.02,R.on(s.default.DATA_UPDATE_COMPLETED,X,e),R.on(s.default.LOADING_PROGRESS,ye,e),R.on(s.default.MANIFEST_UPDATED,Ee,e),R.on(s.default.STREAMS_COMPOSED,Se,e),R.on(l.default.BUFFER_LEVEL_STATE_CHANGED,ve,e),R.on(l.default.PLAYBACK_PROGRESS,fe,e),R.on(l.default.PLAYBACK_TIME_UPDATED,fe,e),R.on(l.default.PLAYBACK_ENDED,de,e,{priority:a.default.EVENT_PRIORITY_HIGH}),R.on(l.default.STREAM_INITIALIZING,Te,e),R.on(l.default.REPRESENTATION_SWITCH,be,e),v&&(v=!1,O())}()},setConfig:function(e){e&&(e.streamController&&(n=e.streamController),e.dashMetrics&&(o=e.dashMetrics),e.mediaPlayerModel&&(y=e.mediaPlayerModel),e.adapter&&(d=e.adapter),e.videoModel&&(c=e.videoModel),e.timelineConverter&&(f=e.timelineConverter),e.settings&&(I=e.settings))},getTimeToStreamEnd:P,getBufferLevel:pe,getTime:U,getNormalizedTime:j,getIsManifestUpdateInProgress:function(){return A},getPlaybackRate:B,getPlayedRanges:function(){return m&&c?c.getPlayedRanges():null},getEnded:V,getIsDynamic:q,getStreamController:function(){return n},computeAndSetLiveDelay:function(e,n){var i,a,s,o=!isNaN(e)&&isFinite(e)?e:NaN,u=d.getSuggestedPresentationDelay();if(I.get().streaming.delay.applyServiceDescription&&isNaN(I.get().streaming.delay.liveDelay)&&isNaN(I.get().streaming.delay.liveDelayFragmentCount)&&function(e){if(e&&e.serviceDescriptions){for(var n=null,i=0;i<e.serviceDescriptions.length;i++){var a=e.serviceDescriptions[i];if(a.schemeIdUri===r.default.SERVICE_DESCRIPTION_LL_SCHEME){n=a;break}}n&&(n.latency&&n.latency.target>0&&(t.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),I.update({streaming:{delay:{liveDelay:n.latency.target/1e3},liveCatchup:{minDrift:(n.latency.target+500)/1e3,maxDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target+500)/1e3:void 0}}})),n.playbackRate&&n.playbackRate.max>1&&(t.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),I.update({streaming:{liveCatchup:{playbackRate:n.playbackRate.max-1}}})))}}(n),i=y.getLiveDelay()?y.getLiveDelay():null===I.get().streaming.delay.liveDelayFragmentCount||isNaN(I.get().streaming.delay.liveDelayFragmentCount)||isNaN(o)?!0===I.get().streaming.delay.useSuggestedPresentationDelay&&null!==u&&!isNaN(u)&&u>0?u:isNaN(o)?n&&!isNaN(n.minBufferTime)?4*n.minBufferTime:4*m.manifestInfo.minBufferTime:4*o:o*I.get().streaming.delay.liveDelayFragmentCount,null!==(s=d.getAvailabilityStartTime())&&(T=s),n&&n.dvrWindowSize>0){var l=Math.max(n.dvrWindowSize-10,n.dvrWindowSize/2);a=Math.min(i,l)}else a=i;return p=a,a},getLiveDelay:function(){return p},getCurrentLiveLatency:H,play:O,isPaused:M,pause:L,isSeeking:N,getStreamEndTime:D,seek:F,reset:G,updateCurrentTime:Y,getAvailabilityStartTime:function(){return T}},t=Object(u.default)(k).getInstance().getLogger(e),G(),e}d.__dashjs_factory_name="PlaybackController",t.default=o.default.getSingletonFactory(d)},"./src/streaming/controllers/ScheduleController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/models/FragmentModel.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./src/streaming/constants/MetricsConstants.js"),d=n("./src/streaming/MediaPlayerEvents.js");function c(e){e=e||{};var t,n,o,c,f,h,p,m,g,y,v,_,T,b=this.context,E=Object(a.default)(b).getInstance(),S=e.dashMetrics,w=e.mediaPlayerModel,C=e.fragmentModel,A=e.abrController,I=e.playbackController,k=e.textController,R=e.type,P=e.bufferController,D=e.settings;function O(e){if(!P.getIsBufferingCompleted()){M();var t=isNaN(e)?0:e;h=setTimeout(L,t)}}function M(){h&&(clearTimeout(h),h=null)}function L(){try{if(function(){try{return R===r.default.TEXT&&!k.isTextEnabled()||I.isPaused()&&(!I.getStreamController().getInitialPlayback()||!I.getStreamController().getAutoPlay())&&!D.get().streaming.scheduling.scheduleWhilePaused}catch(e){return!1}}())return void M();if(function(){try{return c&&(isNaN(y)||v||(e=n.id,t=A.getMaxAllowedIndexFor(R,e),!(!isNaN(g)&&g==t||(o.info("Top quality "+R+" index has changed from "+g+" to "+t),g=t,0)))||!R||!c||S.getCurrentBufferLevel(R)<N())}catch(e){return!1}var e,t}()){var e=!1;T&&(e=A.checkPlaybackQuality(R,n.id)),e||(_||c.quality!==y||v?(v?(o.debug("Switch track for "+R+", representation id = "+c.id),v=!1):o.debug("Quality has changed, get init request for representationid = "+c.id),E.trigger(s.default.INIT_FRAGMENT_NEEDED,{representationId:c.id,sender:t},{streamId:n.id,mediaType:R}),T=!1,_=!1):(o.debug("Media segment needed for ".concat(R," and stream id ").concat(n.id)),E.trigger(s.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:n.id,mediaType:R}),T=!0))}else O(D.get().streaming.lowLatencyEnabled?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}catch(e){O(D.get().streaming.lowLatencyEnabled?D.get().streaming.scheduling.lowLatencyTimeout:D.get().streaming.scheduling.defaultTimeout)}}function N(){var e=NaN;return R&&c?e=R===r.default.TEXT?function(){try{if(k.isTextEnabled()){if(isNaN(c.fragmentDuration)){var e=S.getCurrentSchedulingInfo(l.default.SCHEDULING_INFO);return e?e.duration:0}return c.fragmentDuration}return 0}catch(e){return 0}}():R===r.default.AUDIO&&p?function(){try{var e=S.getCurrentBufferLevel(r.default.VIDEO);return isNaN(c.fragmentDuration)?e+1:Math.max(e+1,c.fragmentDuration)}catch(e){return 0}}():function(){try{var e=c.mediaInfo.streamInfo;return A.isPlayingAtTopQuality(e)?e.manifestInfo.duration>=D.get().streaming.buffer.longFormContentDurationThreshold?D.get().streaming.buffer.bufferTimeAtTopQualityLongForm:D.get().streaming.buffer.bufferTimeAtTopQuality:w.getStableBufferTime()}catch(e){return w.getStableBufferTime()}}():e}function x(){F(!0)}function F(e){if(I&&C){var t=C.getRequests({state:i.default.FRAGMENT_MODEL_EXECUTED,time:I.getTime(),threshold:0})[0];t&&I.getTime()>=t.startTime&&((!m.mediaInfo||t.mediaInfo.type===m.mediaInfo.type&&t.mediaInfo.id!==m.mediaInfo.id)&&e&&E.trigger(s.default.TRACK_CHANGE_RENDERED,{mediaType:R,oldMediaInfo:m.mediaInfo,newMediaInfo:t.mediaInfo,streamId:n.id}),t.quality===m.quality&&t.adaptationIndex===m.adaptationIndex||!e||(o.debug("Quality change rendered for streamId ".concat(n.id," and type ").concat(R)),E.trigger(s.default.QUALITY_CHANGE_RENDERED,{mediaType:R,oldQuality:m.quality,newQuality:t.quality,streamId:n.id})),m={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function U(e){o.debug("Appended bytes for ".concat(e.mediaType," and stream id ").concat(n.id)),(isNaN(e.index)||isNaN(y))&&(y=e.quality,o.info("["+R+"] lastInitializedRepresentationInfo changed to "+e.quality)),O(0)}function j(){C.abortRequests(),M()}function B(){D.get().streaming.scheduling.scheduleWhilePaused||O()}function V(e){S.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function q(){T=!0,f=0,y=NaN,m={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},g=NaN,v=!1,_=!1}return t={initialize:function(e){p=e,E.on(s.default.BYTES_APPENDED_END_FRAGMENT,U,t),E.on(s.default.URL_RESOLUTION_FAILED,j,t),E.on(d.default.PLAYBACK_STARTED,B,t),E.on(d.default.PLAYBACK_RATE_CHANGED,V,t),E.on(d.default.PLAYBACK_TIME_UPDATED,x,t)},getType:function(){return R},getStreamId:function(){return n.id},setCurrentRepresentation:function(e){c=e},setTimeToLoadDelay:function(e){f=e},getTimeToLoadDelay:function(){return f},setSwitchTrack:function(e){v=e},getSwitchStrack:function(){return v},startScheduleTimer:O,clearScheduleTimer:M,reset:function(){E.off(s.default.BYTES_APPENDED_END_FRAGMENT,U,t),E.off(s.default.URL_RESOLUTION_FAILED,j,t),E.off(d.default.PLAYBACK_STARTED,B,t),E.off(d.default.PLAYBACK_RATE_CHANGED,V,t),E.off(d.default.PLAYBACK_TIME_UPDATED,x,t),M(),F(!1),q(),n=null},getBufferTarget:N,getPlaybackController:function(){return I},setCheckPlaybackQuality:function(e){T=e},setInitSegmentRequired:function(e){_=e}},o=Object(u.default)(b).getInstance().getLogger(t),q(),n=e.streamInfo,t}c.__dashjs_factory_name="ScheduleController",t.default=o.default.getClassFactory(c)},"./src/streaming/controllers/StreamController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/Stream.js"),s=n("./src/streaming/ManifestUpdater.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/FactoryMaker.js"),d=n("./src/streaming/vo/metrics/PlayList.js"),c=n("./src/core/Debug.js"),f=n("./src/streaming/utils/InitCache.js"),h=n("./src/streaming/utils/URLUtils.js"),p=n("./src/streaming/MediaPlayerEvents.js"),m=n("./src/streaming/controllers/TimeSyncController.js"),g=n("./src/streaming/controllers/MediaSourceController.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/errors/Errors.js"),_=n("./src/streaming/controllers/EventController.js"),T=n("./src/streaming/constants/ConformanceViolationConstants.js");function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(){var e,t,n,l,E,S,w,C,A,I,k,R,P,D,O,M,L,N,x,F,U,j,B,V,q,H,G,z,W,K,Y,X,Q,Z,J,$,ee,te,ne,re,ie,ae,se,oe,ue=this.context,le=Object(o.default)(ue).getInstance();function de(){!function(){try{var e=C.getStreamsInfo();if(!B&&0===e.length)throw new Error("There are no streams");B&&A.updateManifestUpdateInfo({currentTime:Q.getTime(),buffered:X.getBufferRange(),presentationStartTime:e[0].start,clientTimeOffset:U.getClientTimeOffset()}),j.length>0&&function(e){j=j.filter((function(n){var r=e.filter((function(e){return e.id===n.getId()})).length>0||n.getId()===B.getId();return r||(t.debug("Removing stream ".concat(n.getId())),n.reset(!0)),r}))}(e);for(var n=[],r=0,i=e.length;r<i;r++){var a=e[r];n.push(fe(a)),A.addManifestUpdateStreamInfo(a)}Promise.all(n).then((function(){B||he(e),le.trigger(u.default.STREAMS_COMPOSED),De()})).catch((function(e){throw e}))}catch(e){F.error(new y.default(v.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",w.getValue())),K=!0,Ye()}}()}function ce(){ae=!0}function fe(e){var t=Ge(e.id);return t?t.updateData(e):(t=Object(a.default)(ue).create({manifestModel:w,mediaPlayerModel:Z,dashMetrics:A,manifestUpdater:E,adapter:C,timelineConverter:U,capabilities:n,capabilitiesFilter:l,errHandler:F,baseURLController:R,segmentBaseController:P,textController:q,abrController:O,playbackController:Q,eventController:L,mediaController:M,protectionController:V,videoModel:X,streamInfo:e,settings:ie}),j.push(t),t.initialize(),Promise.resolve())}function he(e){we();var n=A.getCurrentDVRInfo().range;if(n.end<n.start){se&&clearTimeout(se);var i=Math.min(1e3*(-1*(n.end-n.start)+2),2147483647);return t.debug("Waiting for ".concat(i," ms before playback can start")),le.trigger(u.default.AST_IN_FUTURE,{delay:i}),void(se=setTimeout((function(){he(e)}),i))}if(C.getIsDynamic()&&j.length){var a=e[0].manifestInfo,s=function(e,t){try{var n=NaN;if(t&&!isNaN(t.maxFragmentDuration)&&isFinite(t.maxFragmentDuration))return t.maxFragmentDuration;if(e&&1===e.length){var i=e[0],a=[r.default.VIDEO,r.default.AUDIO,r.default.TEXT].reduce((function(e,t){var n=C.getMediaInfoForType(i,t);return n&&!1!==n.isFragmented&&e.push(n),e}),[]).reduce((function(e,t){var n=C.getVoRepresentations(t);return n&&n.length>0&&n.forEach((function(t){t&&e.push(t)})),e}),[]).reduce((function(e,t){var n=C.convertRepresentationToRepresentationInfo(t);return n&&n.fragmentDuration&&!isNaN(n.fragmentDuration)&&e.push(n.fragmentDuration),e}),[]);n=Math.max.apply(Math,function(e){if(Array.isArray(e))return b(e)}(s=a)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(s)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}return isFinite(n)?n:NaN}catch(e){return NaN}var s}(e,a);Q.computeAndSetLiveDelay(s,a)}var o=function(){var e;if(C.getIsDynamic()){var n=A.getCurrentDVRInfo();e=(n&&n.range?n.range.end:0)-Q.getLiveDelay();var r=n?n.range:null;if(r){var i=xe(!0);isNaN(i)||(t.info("Start time from URI parameters: "+i),e=Math.max(Math.min(e,i),r.start))}}else{e=Qe()[0].getStreamInfo().start;var a=xe(!1);isNaN(a)||(t.info("Start time from URI parameters: "+a),e=Math.max(e,a))}return e}(),l=Se(o),d=null!==l?l:j[0];le.trigger(u.default.INITIAL_STREAM_SWITCH,{startTime:o}),pe(d,null,o),ee||(ee=setInterval((function(){!z&&Q.getTimeToStreamEnd()<=0&&!Q.isSeeking()&&le.trigger(u.default.PLAYBACK_ENDED,{isLast:He().isLast})}),200))}function pe(e,n,r){try{if(z||!e||n===e&&e.getIsActive())return;z=!0,le.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:n?n.getStreamInfo():null,toStreamInfo:e.getStreamInfo()});var i=!1;B=e,n&&(i=be(e,n),n.deactivate(i)),r=isNaN(r)?!i&&n?e.getStreamInfo().start:NaN:r,t.info("Switch to stream ".concat(e.getId(),". Seektime is ").concat(r,", current playback time is ").concat(Q.getTime(),". Seamless period switch is set to ").concat(i)),ne=ne.filter((function(e){return e.getId()!==B.getId()})),Q.initialize(He(),!!n),X.getElement()&&me(r,i)}catch(e){z=!1}}function me(e,n){var r;function i(){if(Y&&"open"===Y.readyState){t.debug("MediaSource is open!"),window.URL.revokeObjectURL(r),Y.removeEventListener("sourceopen",i),Y.removeEventListener("webkitsourceopen",i),Ne();var a=A.getCurrentDVRInfo();I.setSeekable(a.range.start,a.range.end),ge(e,n)}}function a(){Y.addEventListener("sourceopen",i,!1),Y.addEventListener("webkitsourceopen",i,!1),r=I.attachMediaSource(X),t.debug("MediaSource attached to element.  Waiting on open...")}Y?n?ge(e,n):(I.detachMediaSource(X),a()):(Y=I.createMediaSource(),a())}function ge(e,t){B.activate(Y,t?te:void 0,e).then((function(t){if(t){var n=Object.keys(t);n.length>0&&t[n[0]].getBuffer().changeType&&(re=!0),te=t}isNaN(e)||(le.trigger(u.default.SEEK_TARGET,{time:e},{streamId:B.getId()}),Q.seek(e,!1,!0),B.startScheduleControllers()),z=!1,le.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:He()})}))}function ye(e){var t=Q.getTime(),n=e.seekTime,r=Se(n);r&&r!==B?r&&r!==B&&(ve(t,n),function(e,t){var n=e&&!isNaN(e.seekTime)?e.seekTime:NaN,r=B.getProcessors().map((function(t){return t.prepareOuterPeriodPlaybackSeeking(e)}));Promise.all(r).then((function(){pe(t,B,n)})).catch((function(e){F.error(e)}))}(e,r)):(ve(t,n),function(e){B.getProcessors().forEach((function(t){return t.prepareInnerPeriodPlaybackSeeking(e)})),Be(d.PlayListTrace.USER_REQUEST_STOP_REASON)}(e)),Ve(d.PlayList.SEEK_START_REASON)}function ve(e,t){_e()}function _e(){ne&&ne.length>0&&(ne.forEach((function(e){e.deactivate(!0)})),ne=[])}function Te(e){e.newMediaInfo.streamInfo.id===B.getId()&&(_e(),B.prepareTrackChange(e))}function be(e,t){try{return ie.get().streaming.buffer.reuseExistingSourceBuffers&&(t.isProtectionCompatible(e)||ae)&&(re||t.isMediaCodecCompatible(e,t))}catch(e){return!1}}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Y&&!e.getPreloaded()){var n=be(e,t);n&&e.startPreloading(Y,te).then((function(){ne.push(e)}))}}function Se(e){if(isNaN(e))return null;for(var t=j.length,n=0;n<t;n++){var r=j[n];if(e<parseFloat((r.getStartTime()+r.getDuration()).toFixed(5)))return r}return null}function we(){try{var e=C.getIsDynamic(),t=C.getStreamsInfo()[0].manifestInfo,n=Q.getTime(),i=U.calcTimeShiftBufferWindow(j,e),a=Me();if(void 0===i.start||void 0===i.end)return;a&&0!==a.length?a.forEach((function(e){A.addDVRInfo(e.getType(),n,t,i)})):A.addDVRInfo(r.default.VIDEO,n,t,i)}catch(e){}}function Ce(e){if($&&G){var t=Z.getInitialBufferLevel();(isNaN(t)||t<=Q.getBufferLevel()||C.getIsDynamic()&&t>Q.getLiveDelay())&&($=!1,Ve(d.PlayList.INITIAL_PLAYOUT_START_REASON),Q.play())}e&&e.mediaType&&A.addBufferLevel(e.mediaType,new Date,1e3*e.bufferLevel)}function Ae(e){e.streamInfo.id===B.getId()&&e.reason&&e.reason.forceReplace&&_e(),Ge(e.streamInfo.id).prepareQualityChange(e)}function Ie(){if(Ue()){var e=X.getPlaybackQuality();e&&A.addDroppedFrames(e)}}function ke(){t.debug("[onPlaybackStarted]"),!$&&J&&Ve(d.PlayList.RESUME_FROM_PAUSE_START_REASON),$&&($=!1),J=!1}function Re(e){t.debug("[onPlaybackPaused]"),e.ended||(J=!0,Be(d.PlayListTrace.USER_REQUEST_STOP_REASON))}function Pe(e){t.debug("Stream with id ".concat(e.streamInfo.id," finished buffering"));var n=e.streamInfo.isLast;Y&&n?(t.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),I.signalEndOfStream(Y)):De()}function De(){if(B&&B.getHasFinishedBuffering())for(var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{var t=e||B||null;if(t){var n=t.getStreamInfo();return j.filter((function(e){var t=e.getStreamInfo();return t.start>n.start&&n.id!==t.id}))}}catch(e){return[]}}(B),t=0;t<e.length;){var n=e[t],r=0===t?B:e[t-1];!n.getPreloaded()&&r.getHasFinishedBuffering()&&Y&&Ee(n,r),t+=1}}function Oe(){ee&&(clearInterval(ee),ee=null)}function Me(){return B?B.getProcessors():[]}function Le(e){if(B&&!B.getIsEndedEventSignaled()){B.setIsEndedEventSignaled(!0);var n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||B||null;if(!t)return null;for(var n=t.getStreamInfo(),r=n.start,i=0,a=-1,s=NaN;i<j.length;){var o=j[i].getStreamInfo(),u=o.start-r;u>0&&(isNaN(s)||u<s)&&n.id!==o.id&&(s=u,a=i),i+=1}return a>=0?j[a]:null}();n?(t.debug("StreamController onEnded, found next stream with id ".concat(n.getStreamInfo().id,". Switching from ").concat(B.getStreamInfo().id," to ").concat(n.getStreamInfo().id)),pe(n,B,NaN)):(t.debug("StreamController no next stream found"),B.setIsEndedEventSignaled(!1)),Be(n?d.PlayListTrace.END_OF_PERIOD_STOP_REASON:d.PlayListTrace.END_OF_CONTENT_STOP_REASON)}e&&e.isLast&&Oe()}function Ne(e){var t=e||He().manifestInfo.duration;I.setDuration(t)}function xe(e){var t=D.getURIFragmentData();if(!t||!t.t)return NaN;var n=Qe()[0].getStreamInfo().start;t.t=t.t.split(",")[0];var r=-1!==t.t.indexOf("posix:")?"now"===t.t.substring(6)?Date.now()/1e3:parseInt(t.t.substring(6)):NaN;return e&&!isNaN(r)?r-Q.getAvailabilityStartTime()/1e3:parseInt(t.t)+n}function Fe(e){if(e.error)K=!0,Ye();else{t.info("Manifest updated... updating data system wide.");var n=e.manifest;C.updatePeriods(n);var r=C.getUTCTimingSources();!C.getIsDynamic()||r&&0!==r.length||le.trigger(p.default.CONFORMANCE_VIOLATION,{level:T.default.LEVELS.WARNING,event:T.default.EVENTS.NO_UTC_TIMING_ELEMENT});var i=C.getIsDynamic()?r.concat(Z.getUTCTimingSources()):r,a=x.isHTTPS(e.manifest.url);i.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===Z.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(a?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),a?"https://":"http://"),t.debug("Matching default timing source protocol to manifest protocol: ",e.value))})),l.filterUnsupportedFeatures(n).then((function(){R.initialize(n),k.attemptSync(i,C.getIsDynamic())}))}}function Ue(){return!!B&&B.getHasVideoTrack()}function je(){return!!B&&B.getHasAudioTrack()}function Be(e,t){t=t||new Date,Me().forEach((function(n){n.finalisePlayList(t,e)})),A.addPlayList()}function Ve(e){A.createPlaylistMetrics(1e3*Q.getTime(),e)}function qe(e){if(e.error){var n="";switch(e.error.code){case 1:n="MEDIA_ERR_ABORTED";break;case 2:n="MEDIA_ERR_NETWORK";break;case 3:n="MEDIA_ERR_DECODE",oe.counts.mediaErrorDecode+=1;break;case 4:n="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:n="MEDIA_ERR_ENCRYPTED";break;default:n="UNKNOWN"}"MEDIA_ERR_DECODE"===n&&ie.get().errors.recoverAttempts.mediaErrorDecode>=oe.counts.mediaErrorDecode?function(){t.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var e=Q.getTime();B.deactivate(!1),t.warn("MediaSource has been resetted. Resuming playback from time ".concat(e)),me(e,!1)}():(W=!0,e.error.message&&(n+=" ("+e.error.message+")"),e.error.msExtendedCode&&(n+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),t.fatal("Video Element Error: "+n),e.error&&t.fatal(e.error),F.error(new y.default(e.error.code,n)),Ye())}}function He(){return B?B.getStreamInfo():null}function Ge(e){for(var t=0,n=j.length;t<n;t++)if(j[t].getId()===e)return j[t];return null}function ze(){if(!(S&&S.hasOwnProperty("load")&&U&&U.hasOwnProperty("initialize")&&U.hasOwnProperty("reset")&&U.hasOwnProperty("getClientTimeOffset")&&w&&F&&A&&Q))throw new Error(r.default.MISSING_CONFIG_ERROR)}function We(e){isNaN(e.newDuration)||Ne(e.newDuration)}function Ke(){j=[],V=null,z=!1,B=null,W=!1,K=!1,$=!0,J=!1,G=!0,ee=null,ae=!1,re=!1,ne=[],se=null,oe={counts:{mediaErrorDecode:0}}}function Ye(){ze(),k.reset(),Be(W||K?d.PlayListTrace.FAILURE_STOP_REASON:d.PlayListTrace.USER_REQUEST_STOP_REASON);for(var t=0,n=j?j.length:0;t<n;t++)j[t].reset(W);le.off(p.default.PLAYBACK_TIME_UPDATED,Ie,e),le.off(p.default.PLAYBACK_SEEKING,ye,e),le.off(p.default.PLAYBACK_ERROR,qe,e),le.off(p.default.PLAYBACK_STARTED,ke,e),le.off(p.default.PLAYBACK_PAUSED,Re,e),le.off(p.default.PLAYBACK_ENDED,Le,e),le.off(p.default.METRIC_ADDED,Xe,e),le.off(p.default.MANIFEST_VALIDITY_CHANGED,We,e),le.off(p.default.BUFFER_LEVEL_UPDATED,Ce,e),le.off(p.default.QUALITY_CHANGE_REQUESTED,Ae,e),u.default.KEY_SESSION_UPDATED&&le.off(u.default.KEY_SESSION_UPDATED,ce,e),le.off(u.default.MANIFEST_UPDATED,Fe,e),le.off(u.default.STREAM_BUFFERING_COMPLETED,Pe,e),le.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,de,e),le.off(u.default.CURRENT_TRACK_CHANGED,Te,e),R.reset(),E.reset(),L.reset(),A.clearAllCurrentMetrics(),w.setValue(null),S.reset(),U.reset(),N.reset(),Y&&(I.detachMediaSource(X),Y=null),X=null,V&&(V=null,H=null,w.getValue()&&le.trigger(u.default.PROTECTION_DESTROYED,{data:w.getValue().url})),Oe(),le.trigger(u.default.STREAM_TEARDOWN_COMPLETE),Ke()}function Xe(e){if(e.metric===i.default.DVR_INFO){var t=je()?r.default.AUDIO:r.default.VIDEO;e.mediaType===t&&I.setSeekable(e.value.range.start,e.value.range.end)}}function Qe(){return j}return e={initialize:function(t,n){ze(),G=t,H=n,U.initialize(),(E=Object(s.default)(ue).create()).setConfig({manifestModel:w,adapter:C,manifestLoader:S,errHandler:F,settings:ie}),E.initialize(),(L=Object(_.default)(ue).getInstance()).setConfig({manifestUpdater:E,playbackController:Q,settings:ie}),L.start(),k.setConfig({dashMetrics:A,baseURLController:R,errHandler:F,settings:ie}),k.initialize(),V&&(le.trigger(u.default.PROTECTION_CREATED,{controller:V}),V.setMediaElement(X.getElement()),H&&V.setProtectionData(H)),le.on(p.default.PLAYBACK_TIME_UPDATED,Ie,e),le.on(p.default.PLAYBACK_SEEKING,ye,e),le.on(p.default.PLAYBACK_ERROR,qe,e),le.on(p.default.PLAYBACK_STARTED,ke,e),le.on(p.default.PLAYBACK_PAUSED,Re,e),le.on(p.default.PLAYBACK_ENDED,Le,e),le.on(p.default.METRIC_ADDED,Xe,e),le.on(p.default.MANIFEST_VALIDITY_CHANGED,We,e),le.on(p.default.BUFFER_LEVEL_UPDATED,Ce,e),le.on(p.default.QUALITY_CHANGE_REQUESTED,Ae,e),u.default.KEY_SESSION_UPDATED&&le.on(u.default.KEY_SESSION_UPDATED,ce,e),le.on(u.default.MANIFEST_UPDATED,Fe,e),le.on(u.default.STREAM_BUFFERING_COMPLETED,Pe,e),le.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,de,e),le.on(u.default.CURRENT_TRACK_CHANGED,Te,e)},getActiveStreamInfo:He,addDVRMetric:we,hasVideoTrack:Ue,hasAudioTrack:je,getStreamById:Ge,getStreamForTime:Se,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,s=0;s<j.length;s++){if(i=(n=j[s]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null},load:function(e){ze(),S.load(e)},loadWithManifest:function(e){!function(){if(!E||!E.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),E.setManifest(e)},getActiveStreamProcessors:Me,setConfig:function(e){e&&(e.capabilities&&(n=e.capabilities),e.capabilitiesFilter&&(l=e.capabilitiesFilter),e.manifestLoader&&(S=e.manifestLoader),e.manifestModel&&(w=e.manifestModel),e.mediaPlayerModel&&(Z=e.mediaPlayerModel),e.protectionController&&(V=e.protectionController),e.adapter&&(C=e.adapter),e.dashMetrics&&(A=e.dashMetrics),e.errHandler&&(F=e.errHandler),e.timelineConverter&&(U=e.timelineConverter),e.videoModel&&(X=e.videoModel),e.playbackController&&(Q=e.playbackController),e.textController&&(q=e.textController),e.abrController&&(O=e.abrController),e.mediaController&&(M=e.mediaController),e.settings&&(ie=e.settings),e.baseURLController&&(R=e.baseURLController),e.uriFragmentModel&&(D=e.uriFragmentModel),e.segmentBaseController&&(P=e.segmentBaseController))},setProtectionData:function(e){H=e,V&&V.setProtectionData(H)},getIsStreamSwitchInProgress:function(){return z},switchToVideoElement:function(e){B&&(Q.initialize(He()),me(e,!1))},getHasMediaOrInitialisationError:function(){return W||K},getStreams:Qe,getActiveStream:function(){return B},getInitialPlayback:function(){return $},getAutoPlay:function(){return G},reset:Ye},t=Object(c.default)(ue).getInstance().getLogger(e),k=Object(m.default)(ue).getInstance(),I=Object(g.default)(ue).getInstance(),N=Object(f.default)(ue).getInstance(),x=Object(h.default)(ue).getInstance(),Ke(),e}E.__dashjs_factory_name="StreamController",t.default=l.default.getSingletonFactory(E)},"./src/streaming/controllers/TimeSyncController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/vo/DashJSError.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./src/core/errors/Errors.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),d=n("./src/streaming/utils/URLUtils.js");function c(){var e,t,n,u,c,f,h,p,m,g,y,v,_,T,b,E,S=this.context,w=Object(a.default)(S).getInstance(),C=Object(d.default)(S).getInstance();function A(){p=[],m=[],g=null,y=null,_=null,v=NaN,n=!1,u=!1,T=c.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function I(){c.get().streaming.utcSynchronization.enabled&&!n&&!u&&_&&_.value&&_.schemeIdUri&&!isNaN(v)&&!isNaN(c.get().streaming.utcSynchronization.backgroundAttempts)&&(y&&(Date.now()-y)/1e3<30||(p=[],u=!0,k(isNaN(c.get().streaming.utcSynchronization.backgroundAttempts)?2:c.get().streaming.utcSynchronization.backgroundAttempts)))}function k(e){try{if(e<=0)return void V();var t=Date.now();f[_.schemeIdUri](_.value,(function(n){var r=Date.now(),i=P(t,r,n);p.push(i),k(e-1)}),(function(){V()}))}catch(e){V()}}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||0;if(!m||0===m.length||t>=m.length)D();else{var n=m[t];if(n)if(f.hasOwnProperty(n.schemeIdUri)){var r=(new Date).getTime();f[n.schemeIdUri](n.value,(function(e){var t=(new Date).getTime(),i=P(r,t,e);_=n,D(i)}),(function(){R(t+1)}))}else R(t+1);else D()}}function P(e,t,n){return n-(t-(t-e)/2)}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,t=isNaN(e);t&&c.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?j():B(t,e)}function O(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t,n,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function M(e){return Date.parse(e)}function L(e){return Date.parse(e)}function N(e,t,n){n()}function x(e,t,n){var r=O(e);isNaN(r)?n():t(r)}function F(e,t,n,r,a){var s,o,u=!1,l=new XMLHttpRequest,d=a?i.HTTPRequest.HEAD:i.HTTPRequest.GET,c=t.match(/\S+/g);if(t=c.shift(),s=function(){u||(u=!0,c.length?F(e,c.join(" "),n,r,a):r())},o=function(){var t,r;200===l.status&&(t=a?l.getResponseHeader("Date"):l.response,r=e(t),isNaN(r)||(n(r),u=!0))},C.isRelative(t)){var f=E.resolve();f&&(t=C.resolve(t,f.url))}l.open(d,t),l.timeout=5e3,l.onload=o,l.onloadend=s,l.send()}function U(e,t,n){F(L,e,t,n,!0)}function j(){var e=h.getLatestMPDRequestHeaderValueByID("Date"),t=null!==e?new Date(e).getTime():Number.NaN;isNaN(t)?B(!0):B(!1,t-Date.now())}function B(e,i){if(isNaN(v)||isNaN(i)||e||function(e){try{var n,r=q(e),i=isNaN(T)?30:T,a=isNaN(c.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:c.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,s=isNaN(c.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:c.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,o=isNaN(c.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:c.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;r?(n=Math.min(i*a,s),t.debug("Increasing timeBetweenSyncAttempts to ".concat(n))):(n=Math.max(i/a,o),t.debug("Decreasing timeBetweenSyncAttempts to ".concat(n))),T=n}catch(e){}}(i),!e&&!isNaN(i)){g=Date.now(),n=!1;var a=isNaN(v);v=i,a&&I(),t.debug("Completed UTC sync. Setting client - server offset to ".concat(i))}e&&(_=null,n=!1,b.error(new r.default(o.default.TIME_SYNC_FAILED_ERROR_CODE,o.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),w.trigger(s.default.UPDATE_TIME_SYNC_OFFSET,{offset:i}),w.trigger(s.default.TIME_SYNCHRONIZATION_COMPLETED)}function V(){if(p&&0!==p.length){var e=p.reduce((function(e,t){return e+t}),0)/p.length;q(e)?t.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(t.debug("Completed background UTC sync. Setting client - server offset to ".concat(e)),v=e,w.trigger(s.default.UPDATE_TIME_SYNC_OFFSET,{offset:v})),u=!1,y=Date.now()}}function q(e){try{if(isNaN(v))return!0;var t=c.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(c.get().streaming.utcSynchronization.maximumAllowedDrift)?c.get().streaming.utcSynchronization.maximumAllowedDrift:100;return e>=v-t&&e<=v+t}catch(e){return!0}}return e={initialize:function(){A(),f={"urn:mpeg:dash:utc:http-head:2014":U,"urn:mpeg:dash:utc:http-xsdate:2014":F.bind(null,O),"urn:mpeg:dash:utc:http-iso:2014":F.bind(null,M),"urn:mpeg:dash:utc:direct:2014":x,"urn:mpeg:dash:utc:http-head:2012":U,"urn:mpeg:dash:utc:http-xsdate:2012":F.bind(null,O),"urn:mpeg:dash:utc:http-iso:2012":F.bind(null,M),"urn:mpeg:dash:utc:direct:2012":x,"urn:mpeg:dash:utc:http-ntp:2014":N,"urn:mpeg:dash:utc:ntp:2014":N,"urn:mpeg:dash:utc:sntp:2014":N}},attemptSync:function(e,t){m=e,n||(function(e){try{if(!e||!c.get().streaming.utcSynchronization.enabled)return!1;var t=isNaN(T)?30:T;return!(g&&t&&!isNaN(t))||(Date.now()-g)/1e3>=t}catch(e){return!0}}(t)?(n=!0,R()):w.trigger(s.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(e){e&&(e.dashMetrics&&(h=e.dashMetrics),e.baseURLController&&(E=e.baseURLController),e.errHandler&&(b=e.errHandler),e.settings&&(c=e.settings))},reset:function(){A(),w.off(s.default.ATTEMPT_BACKGROUND_SYNC,I,e)}},t=Object(l.default)(S).getInstance().getLogger(e),w.on(s.default.ATTEMPT_BACKGROUND_SYNC,I,e),e}c.__dashjs_factory_name="TimeSyncController";var f=u.default.getSingletonFactory(c);f.HTTP_TIMEOUT_MS=5e3,u.default.updateSingletonFactory(c.__dashjs_factory_name,f),t.default=f},"./src/streaming/controllers/XlinkController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/XlinkLoader.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/core/FactoryMaker.js"),o=n("./externals/xml2json.js"),u=n("./src/streaming/utils/URLUtils.js"),l=n("./src/dash/constants/DashConstants.js"),d="onLoad";function c(e){e=e||{};var t,n,s,c,f,h,p=this.context,m=Object(i.default)(p).getInstance(),g=Object(u.default)(p).getInstance();function y(e,t,n){var r,i,a={};a.elements=e,a.type=t,a.resolveType=n,0===a.elements.length&&_(a);for(var s=0;s<a.elements.length;s++)r=a.elements[s],i=g.isHTTPURL(r.url)?r.url:r.originalContent.BaseURL+r.url,h.load(i,r,a)}function v(e){var t,n,r="";if(t=e.element,n=e.resolveObject,t.resolvedContent){var i=0;0===t.resolvedContent.indexOf("<?xml")&&(i=t.resolvedContent.indexOf("?>")+2),r=t.resolvedContent.substr(0,i)+"<response>"+t.resolvedContent.substr(i)+"</response>",t.resolvedContent=f.xml_str2json(r)}(function(e){var t;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(n)&&_(n)}function _(e){var t,n,r=[];if(function(e){var t,n,r,i,a,o,u=[];for(i=e.elements.length-1;i>=0;i--){if(n=(t=e.elements[i]).type+"_asArray",t.resolvedContent){if(t.resolvedContent)for(a=0;a<t.resolvedContent[n].length;a++)r=t.resolvedContent[n][a],u.push(r)}else delete t.originalContent["xlink:actuate"],delete t.originalContent["xlink:href"],u.push(t.originalContent);for(t.parentElement[n].splice(t.index,1),o=0;o<u.length;o++)t.parentElement[n].splice(t.index+o,0,u[o]);u=[]}e.elements.length>0&&s.run(c)}(e),"onActuate"===e.resolveType&&m.trigger(a.default.XLINK_READY,{manifest:c}),e.resolveType===d)switch(e.type){case l.default.PERIOD:for(t=0;t<c[l.default.PERIOD+"_asArray"].length;t++)(n=c[l.default.PERIOD+"_asArray"][t]).hasOwnProperty(l.default.ADAPTATION_SET+"_asArray")&&(r=r.concat(T(n[l.default.ADAPTATION_SET+"_asArray"],n,l.default.ADAPTATION_SET,d))),n.hasOwnProperty(l.default.EVENT_STREAM+"_asArray")&&(r=r.concat(T(n[l.default.EVENT_STREAM+"_asArray"],n,l.default.EVENT_STREAM,d)));y(r,l.default.ADAPTATION_SET,d);break;case l.default.ADAPTATION_SET:m.trigger(a.default.XLINK_READY,{manifest:c})}}function T(e,t,n,r){var i,a,s,o=[];for(a=e.length-1;a>=0;a--)(i=e[a]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===i["xlink:href"]&&e.splice(a,1);for(a=0;a<e.length;a++)(i=e[a]).hasOwnProperty("xlink:href")&&i.hasOwnProperty("xlink:actuate")&&i["xlink:actuate"]===r&&(s=b(i["xlink:href"],t,n,a,r,i),o.push(s));return o}function b(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return t={resolveManifestOnLoad:function(e){f=new o.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:n}),(c=e).Period_asArray?y(T(c.Period_asArray,c,l.default.PERIOD,d),l.default.PERIOD,d):m.trigger(a.default.XLINK_READY,{manifest:c})},setMatchers:function(e){e&&(n=e)},setIron:function(e){e&&(s=e)},reset:function(){m.off(a.default.XLINK_ELEMENT_LOADED,v,t),h&&(h.reset(),h=null)}},m.on(a.default.XLINK_ELEMENT_LOADED,v,t),h=Object(r.default)(p).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,settings:e.settings}),t}c.__dashjs_factory_name="XlinkController",t.default=s.default.getClassFactory(c)},"./src/streaming/metrics/MetricsReporting.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js"),a=n("./src/streaming/metrics/controllers/MetricsCollectionController.js"),s=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),o=n("./src/streaming/metrics/reporting/ReportingFactory.js");function u(){var e=this.context;return{createMetricsReporting:function(t){return Object(r.default)(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}).initialise(),Object(a.default)(e).create(t)},getReportingFactory:function(){return Object(o.default)(e).getInstance()},getMetricsHandlerFactory:function(){return Object(s.default)(e).getInstance()}}}u.__dashjs_factory_name="MetricsReporting";var l=dashjs.FactoryMaker.getClassFactory(u);l.events=i.default,dashjs.FactoryMaker.updateClassFactory(u.__dashjs_factory_name,l),t.default=l},"./src/streaming/metrics/MetricsReportingEvents.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e.CMCD_DATA_GENERATED="cmcdDataGenerated",e}return o}(n("./src/core/events/EventsBase.js").default));t.default=o},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/controllers/MetricsController.js"),i=n("./src/streaming/metrics/utils/ManifestParsing.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js");function s(e){var t;e=e||{};var n={},s=this.context,o=e.eventBus,u=e.events;function l(t){if(!t.error){var u=Object.keys(n);Object(i.default)(s).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(t.manifest).forEach((function(t){var i=JSON.stringify(t);if(n.hasOwnProperty(i))u.splice(i,1);else try{var a=Object(r.default)(s).create(e);a.initialize(t),n[i]=a}catch(e){}})),u.forEach((function(e){n[e].reset(),delete n[e]})),o.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function d(){Object.keys(n).forEach((function(e){n[e].reset()})),n={}}return t={reset:function(){o.off(u.MANIFEST_UPDATED,l,t),o.off(u.STREAM_TEARDOWN_COMPLETE,d,t)}},o.on(u.MANIFEST_UPDATED,l,t),o.on(u.STREAM_TEARDOWN_COMPLETE,d,t),t}s.__dashjs_factory_name="MetricsCollectionController",t.default=dashjs.FactoryMaker.getClassFactory(s)},"./src/streaming/metrics/controllers/MetricsController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/controllers/RangeController.js"),i=n("./src/streaming/metrics/controllers/ReportingController.js"),a=n("./src/streaming/metrics/controllers/MetricsHandlersController.js");function s(e){var t,n,s;e=e||{};var o=this.context;function u(){t&&t.reset(),n&&n.reset(),s&&s.reset()}return{initialize:function(l){try{(s=Object(r.default)(o).create({mediaElement:e.mediaElement})).initialize(l.Range),(n=Object(i.default)(o).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(l.Reporting,s),(t=Object(a.default)(o).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(l.metrics,n)}catch(e){throw u(),e}},reset:u}}s.__dashjs_factory_name="MetricsController",t.default=dashjs.FactoryMaker.getClassFactory(s)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function i(e){e=e||{};var t,n=[],i=this.context,a=e.eventBus,s=e.events,o=Object(r.default)(i).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){n.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}return t={initialize:function(e,r){e.split(",").forEach((function(e,t,i){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var s=i[t+1];s&&-1===s.indexOf("(")&&-1!==s.indexOf(")")&&(e+=","+s,delete i[t+1])}(a=o.create(e,r))&&n.push(a)})),a.on(s.METRIC_ADDED,u,t),a.on(s.METRIC_UPDATED,u,t)},reset:function(){a.off(s.METRIC_ADDED,u,t),a.off(s.METRIC_UPDATED,u,t),n.forEach((function(e){return e.reset()})),n=[]}}}i.__dashjs_factory_name="MetricsHandlersController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/RangeController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/utils/CustomTimeRanges.js");function i(e){e=e||{};var t,n,i=!1,a=this.context,s=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime,r=t+e.duration;n.add(t,r)})),i=!!e[0]._useWallClockTime)},reset:function(){n.clear()},isEnabled:function(){var e,t=n.length;if(!t)return!0;e=i?(new Date).getTime()/1e3:s.currentTime;for(var r=0;r<t;r+=1){var a=n.start(r),o=n.end(r);if(a<=e&&e<o)return!0}return!1}},n=Object(r.default)(a).create(),t}i.__dashjs_factory_name="RangeController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/controllers/ReportingController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/reporting/ReportingFactory.js");function i(e){var t=[],n=Object(r.default)(this.context).getInstance(e);return{initialize:function(e,r){e.some((function(e){var i=n.create(e,r);if(i)return t.push(i),!0}))},reset:function(){t.forEach((function(e){return e.reset()})),t=[]},report:function(e,n){t.forEach((function(t){return t.report(e,n)}))}}}i.__dashjs_factory_name="ReportingController",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),i=n("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),a=n("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),s=n("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function o(e){var t,n=(e=e||{}).debug?e.debug.getLogger(t):{},o=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,u=this.context,l={BufferLevel:r.default,DVBErrors:i.default,HttpList:a.default,PlayList:s.default,RepSwitchList:s.default,TcpList:s.default};return{create:function(t,r){var i,a=t.match(o);if(a){try{(i=l[a[1]](u).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(a[1],r,a[3],a[5])}catch(e){i=null,n.error("MetricsHandlerFactory: Could not create handler for type ".concat(a[1]," with args ").concat(a[3],", ").concat(a[5]," (").concat(e.message,")"))}return i}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}o.__dashjs_factory_name="MetricsHandlerFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(e){var t,n,i,a,s;e=e||{};var o=this.context,u=Object(r.default)(o).getInstance(),l=[],d=e.metricsConstants;function c(){var e=function(){try{return Object.keys(l).map((function(e){return l[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){return}}();e&&s!==e.t&&(s=e.t,t.report(i,e))}return{initialize:function(e,r,s){r&&(n=u.validateN(s),t=r,i=u.reconstructFullMetricName(e,s),a=setInterval(c,n))},reset:function(){clearInterval(a),a=null,n=0,t=null,s=null},handleNewMetric:function(e,t,n){e===d.BUFFER_LEVEL&&(l[n]=t)}}}i.__dashjs_factory_name="BufferLevelHandler",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/MetricsReportingEvents.js");t.default=dashjs.FactoryMaker.getClassFactory((function(e){var t,n=(e=e||{}).eventBus,i=e.metricsConstants;function a(){n.off(r.default.METRICS_INITIALISATION_COMPLETE,a,this),n.trigger(r.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,i){i&&(t=i,n.on(r.default.METRICS_INITIALISATION_COMPLETE,a,this))},reset:function(){t=null},handleNewMetric:function(e,n){e===i.DVB_ERRORS&&t&&t.report(e,n)}}}))},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(e,t,n){function r(){var e,t;return{initialize:function(n,r){e=n,t=r},reset:function(){t=null,e=void 0},handleNewMetric:function(n,r){n===e&&t&&t.report(e,r)}}}n.r(t),r.__dashjs_factory_name="GenericMetricHandler",t.default=dashjs.FactoryMaker.getClassFactory(r)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/utils/HandlerHelpers.js");function i(e){var t,n,i,a,s;e=e||{};var o=[],u=Object(r.default)(this.context).getInstance(),l=e.metricsConstants;function d(){var e=o;e.length&&t&&t.report(a,e),o=[]}return{initialize:function(e,r,o,l){r&&(n=u.validateN(o),t=r,l&&l.length&&(i=l),a=u.reconstructFullMetricName(e,o,l),s=setInterval(d,n))},reset:function(){clearInterval(s),s=null,n=null,i=null,o=[],t=null},handleNewMetric:function(e,t){e===l.HTTP_REQUEST&&(i&&i!==t.type||o.push(t))}}}i.__dashjs_factory_name="HttpListHandler",t.default=dashjs.FactoryMaker.getClassFactory(i)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function i(e){e=e||{};var t,n={"urn:dvb:dash:reporting:2014":r.default},i=this.context,a=e.debug?e.debug.getLogger(t):{},s=e.metricsConstants;return{create:function(e,t){var r;try{(r=n[e.schemeIdUri](i).create({metricsConstants:s})).initialize(e,t)}catch(t){r=null,a.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(e.schemeIdUri," (").concat(t.message,")"))}return r},register:function(e,t){n[e]=t},unregister:function(e){delete n[e]}}}i.__dashjs_factory_name="ReportingFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/utils/MetricSerialiser.js"),i=n("./src/streaming/metrics/utils/RNG.js");function a(e){var t;e=e||{};var n,a,s,o,u,l,d=this.context,c=[],f=e.metricsConstants;function h(){s=!1,o=!1,u=null,l=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),o&&l.isEnabled()&&t.forEach((function(t){var r=n.serialise(t);e!==f.DVB_ERRORS&&(r="metricname=".concat(e,"&").concat(r)),function(e,t,n){var r=new XMLHttpRequest,i=function(){var e=c.indexOf(r);-1!==e&&(c.splice(e,1),!(r.status>=200&&r.status<300)&&(n&&n()))};c.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}(r="".concat(u,"?").concat(r),0,(function(){o=!1}))}))},initialize:function(e,t){var n;if(l=t,!(u=e.dvb_reportingUrl))throw new Error("required parameter missing (dvb:reportingUrl)");s||((n=e.dvb_probability)&&(1e3===n||n/1e3>=a.random())&&(o=!0),s=!0)},reset:function(){h()}},n=Object(r.default)(d).getInstance(),a=Object(i.default)(d).getInstance(),h(),t}a.__dashjs_factory_name="DVBReporting",t.default=dashjs.FactoryMaker.getClassFactory(a)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/vo/DVBErrors.js"),i=n("./src/streaming/metrics/MetricsReportingEvents.js");function a(e){var t,n,a=(e=e||{}).eventBus,s=e.dashMetrics,o=e.metricsConstants,u=e.events;function l(e){var t=new r.default;if(n){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),s.addDVBErrors(t)}}function d(e){e.error||(n=e.manifest)}function c(e){l({errorcode:r.default.BASE_URL_CHANGED,servicelocation:e.entry})}function f(){l({errorcode:r.default.BECAME_REPORTER})}function h(e){var t;e.metric===o.HTTP_REQUEST&&(0===(t=e.value).responsecode||null==t.responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&l({errorcode:t.responsecode||r.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}function p(e){var t;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=r.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=r.default.CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:t})}return t={initialise:function(){a.on(u.MANIFEST_UPDATED,d,t),a.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),a.on(u.METRIC_ADDED,h,t),a.on(u.METRIC_UPDATED,h,t),a.on(u.PLAYBACK_ERROR,p,t),a.on(i.default.BECAME_REPORTING_PLAYER,f,t)},reset:function(){a.off(u.MANIFEST_UPDATED,d,t),a.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,c,t),a.off(u.METRIC_ADDED,h,t),a.off(u.METRIC_UPDATED,h,t),a.off(u.PLAYBACK_ERROR,p,t),a.off(i.default.BECAME_REPORTING_PLAYER,f,t)}}}a.__dashjs_factory_name="DVBErrorsTranslator",t.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(e,t,n){function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}n.r(t),r.__dashjs_factory_name="HandlerHelpers",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/ManifestParsing.js":function(e,t,n){n.r(t);var r=n("./src/streaming/metrics/vo/Metrics.js"),i=n("./src/streaming/metrics/vo/Range.js"),a=n("./src/streaming/metrics/vo/Reporting.js");function s(e){var t=(e=e||{}).adapter,n=e.constants;return{getMetrics:function(e){var s=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach((function(o){var u=new r.default,l=t.getIsDynamic(e);o.hasOwnProperty("metrics")&&(u.metrics=o.metrics,o.Range_asArray&&o.Range_asArray.forEach((function(r){var a=new i.default;a.starttime=function(e,r,i){var a,s,o=0;return r?o=t.getAvailabilityStartTime(e)/1e3:(a=t.getRegularPeriods(e)).length&&(o=a[0].start),s=o,i&&i.hasOwnProperty(n.START_TIME)&&(s+=i.starttime),s}(e,l,r),r.hasOwnProperty("duration")?a.duration=r.duration:a.duration=t.getDuration(e),a._useWallClockTime=l,u.Range.push(a)})),o.Reporting_asArray&&(o.Reporting_asArray.forEach((function(e){var t=new a.default;e.hasOwnProperty(n.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty("value")&&(t.value=e.value),e.hasOwnProperty(n.DVB_REPORTING_URL)&&(t.dvb_reportingUrl=e[n.DVB_REPORTING_URL]),e.hasOwnProperty(n.DVB_PROBABILITY)&&(t.dvb_probability=e[n.DVB_PROBABILITY]),u.Reporting.push(t))})),s.push(u)))})),s}}}s.__dashjs_factory_name="ManifestParsing",t.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(e,t,n){function r(){return{serialise:function e(t){var n,r,i=[],a=[];for(n in t)if(t.hasOwnProperty(n)&&0!==n.indexOf("_")){if(null==(r=t[n])&&(r=""),Array.isArray(r)){if(!r.length)continue;a=[],r.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);a.push(n?t:e(t))})),r=a.map(encodeURIComponent).join(",")}else"string"==typeof r?r=encodeURIComponent(r):r instanceof Date?r=r.toISOString():"number"==typeof r&&(r=Math.round(r));i.push(n+"="+r)}return i.join("&")}}}n.r(t),r.__dashjs_factory_name="MetricSerialiser",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/utils/RNG.js":function(e,t,n){function r(){var e,t,n,r=window.crypto||window.msCrypto,i=Uint32Array,a=Math.pow(2,8*i.BYTES_PER_ELEMENT)-1;function s(){r&&(e||(e=new i(10)),r.getRandomValues(e),t=0)}return n={random:function(n,i){var o;return n||(n=0),i||(i=1),r?(t===e.length&&s(),o=e[t]/a,t+=1):o=Math.random(),o*(i-n)+n}},s(),n}n.r(t),r.__dashjs_factory_name="RNG",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/metrics/vo/DVBErrors.js":function(e,t,n){n.r(t);var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",t.default=r},"./src/streaming/metrics/vo/Metrics.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]}},"./src/streaming/metrics/vo/Range.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},"./src/streaming/metrics/vo/Reporting.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=1e3}},"./src/streaming/models/BaseURLTreeModel.js":function(e,t,n){n.r(t);var r=n("./src/streaming/utils/ObjectUtils.js"),i=n("./src/core/FactoryMaker.js"),a=NaN,s=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={baseUrls:t||null,selectedIdx:n||a},this.children=[]};function o(){var e,t,n,i=this.context,o=Object(r.default)(i).getInstance();function u(e,t,r){var i=n.getBaseURLsFromElement(r);e[t]?o.areEqual(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=a):e[t]=new s(i)}function l(e,n){var r=n||t;e(r.data),r.children&&r.children.forEach((function(t){return l(e,t)}))}function d(){t=new s}return e={reset:d,update:function(e){!function(e){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var r=n.getBaseURLsFromElement(e);o.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=a),e&&e.Period_asArray&&e.Period_asArray.forEach((function(e,r){u(t.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,i){u(t.children[r].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(e,n){u(t.children[r].children[i].children,n,e)}))}))}))}(e)},getForPath:function(e){var n=t,r=[n.data];return e&&e.forEach((function(e){(n=n.children[e])&&r.push(n.data)})),r.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(e){l((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=a)}))},setConfig:function(e){e.adapter&&(n=e.adapter)}},d(),e}o.__dashjs_factory_name="BaseURLTreeModel",t.default=i.default.getClassFactory(o)},"./src/streaming/models/CmcdModel.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/streaming/MediaPlayerEvents.js"),a=n("./src/streaming/metrics/MetricsReportingEvents.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/core/Settings.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/vo/metrics/HTTPRequest.js"),d=n("./src/dash/models/DashManifestModel.js"),c=n("./src/core/Utils.js");function f(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){var e,t,n,s,h,p,m,g,y,v,_=this.context,T=Object(r.default)(_).getInstance(),b=Object(o.default)(_).getInstance();function E(){n={pr:1,nor:null,st:null,sf:null,sid:"".concat(c.default.generateUuid()),cid:null},y={},g={},v={},w()}function S(){w()}function w(){if(p){var e=p.getStreamController();if(e&&"function"==typeof e.getActiveStream){var t=e.getActiveStream();t&&(m=t.getProcessors())}}}function C(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;e[a]&&(r[a]=e[a])}}catch(e){i.e(e)}finally{i.f()}return r}function A(e){try{return e.type===l.HTTPRequest.MPD_TYPE?((r=I()).ot="m",r):e.type===l.HTTPRequest.MEDIA_SEGMENT_TYPE?(t=e.mediaType,v.hasOwnProperty(t)||(v[t]=!1),g.hasOwnProperty(t)||(g[t]=!1),y.hasOwnProperty(t)||(y[t]=!1),function(e){var t,r=I(),i=function(e){try{var t=e.quality,n=e.mediaInfo.bitrateList;return parseInt(n[t].bandwidth/1e3)}catch(e){return null}}(e),a=function(e){try{return isNaN(e.duration)?null:Math.round(1e3*e.duration)}catch(e){return null}}(e),o=function(e){try{return 100*parseInt(s.getThroughputHistory().getSafeAverageThroughput(e)/100)}catch(e){return null}}(e.mediaType),l=function(e){try{var t=n.pr,r=h.getCurrentBufferLevel(e);return isNaN(t)||isNaN(r)?null:100*parseInt(r/t*10)}catch(e){return null}}(e.mediaType),d=k(e.mediaType),_=function(e){try{var t=s.getTopBitrateInfoFor(e);return Math.round(t.bitrate/1e3)}catch(e){return null}}(e.mediaType),T=n.pr,E=function(e){if(m&&0!==m.length){var t,n=f(m);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.getType()===e)return r.probeNextRequest()}}catch(e){n.e(e)}finally{n.f()}}}(e.mediaType);e.mediaType===u.default.VIDEO&&(t="v"),e.mediaType===u.default.AUDIO&&(t="a"),e.mediaType===u.default.TEXT&&(t="application/mp4"===e.mediaInfo.mimeType?"tt":"c");var S=b.get().streaming.cmcd.rtp;return S||(S=function(e){var t=p.getPlaybackRate();t||(t=1);var n=e.quality,r=e.mediaType,i=e.mediaInfo,a=e.duration,s=k(r);0===s&&(s=500);var o=i.bitrateList[n].bandwidth*a/1e3/(s/t/1e3),u=b.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(b.get().streaming.cmcd.rtpSafetyFactor)?b.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(o*u/100)+1)}(e)),r.rtp=S,E&&(e.url!==E.url?r.nor=encodeURIComponent(c.default.getRelativeUrl(e.url,E.url)):E.range&&(r.nrr=E.range)),i&&(r.br=i),t&&(r.ot=t),isNaN(a)||(r.d=a),isNaN(o)||(r.mtp=o),isNaN(l)||(r.dl=l),isNaN(d)||(r.bl=d),isNaN(_)||(r.tb=_),isNaN(T)||1===T||(r.pr=T),y[e.mediaType]&&(r.bs=!0,y[e.mediaType]=!1),!g[e.mediaType]&&v[e.mediaType]||(r.su=!0,g[e.mediaType]=!1,v[e.mediaType]=!0),r}(e)):e.type===l.HTTPRequest.INIT_SEGMENT_TYPE?function(){var e=I();return e.ot="i",e.su=!0,e}():e.type===l.HTTPRequest.OTHER_TYPE||e.type===l.HTTPRequest.XLINK_EXPANSION_TYPE?function(){var e=I();return e.ot="o",e}():e.type===l.HTTPRequest.LICENSE?function(e){var t=I();return t.ot="k",t}():null}catch(e){return null}var t,r}function I(){var e={},t=b.get().streaming.cmcd.cid?b.get().streaming.cmcd.cid:n.cid;return e.v=1,e.sid=b.get().streaming.cmcd.sid?b.get().streaming.cmcd.sid:n.sid,e.sid="".concat(e.sid),t&&(e.cid="".concat(t)),isNaN(n.pr)||1===n.pr||null===n.pr||(e.pr=n.pr),n.st&&(e.st=n.st),n.sf&&(e.sf=n.sf),e}function k(e){try{var t=h.getCurrentBufferLevel(e);return isNaN(t)?null:100*parseInt(10*t)}catch(e){return null}}function R(e){try{n.pr=e.playbackRate}catch(e){}}function P(t){try{var r=e.getIsDynamic(t.data)?"l":"v",i=t.protocol&&"MSS"===t.protocol?"s":"d";n.st="".concat(r),n.sf="".concat(i)}catch(e){}}function D(e){try{e.state&&e.mediaType&&e.state===i.default.BUFFER_EMPTY&&(y[e.mediaType]||(y[e.mediaType]=!0),g[e.mediaType]||(g[e.mediaType]=!0))}catch(e){}}function O(){for(var e in y)y.hasOwnProperty(e)&&(y[e]=!0);for(var t in g)g.hasOwnProperty(t)&&(g[t]=!0)}function M(e){try{if(!e)return null;var t=Object.keys(e).sort((function(e,t){return e.localeCompare(t)})),n=t.length,r=t.reduce((function(t,r,i){if("v"===r&&1===e[r])return t;if("string"==typeof e[r]&&"ot"!==r&&"sf"!==r&&"st"!==r){var a=e[r].replace(/"/g,'"');t+="".concat(r,'="').concat(a,'"')}else t+="".concat(r,"=").concat(e[r]);return i<n-1&&(t+=","),t}),"");return(r=r.replace(/=true/g,"")).replace(/,\s*$/,"")}catch(e){return null}}return t={getQueryParameter:function(e){try{if(b.get().streaming.cmcd&&b.get().streaming.cmcd.enabled){var t=A(e),n=M(t);return T.trigger(a.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,cmcdString:n}),{key:"CMCD",value:n}}return null}catch(e){return null}},getHeaderParameters:function(e){try{if(b.get().streaming.cmcd&&b.get().streaming.cmcd.enabled){var t=A(e),n=C(t,["br","d","ot","tb"]),r=C(t,["bl","dl","mtp","nor","nrr","su"]),i=C(t,["bs","rtp"]),s=C(t,["cid","pr","sf","sid","st","v"]),o={"CMCD-Object":M(n),"CMCD-Request":M(r),"CMCD-Status":M(i),"CMCD-Session":M(s)};return T.trigger(a.default.CMCD_DATA_GENERATED,{url:e.url,mediaType:e.mediaType,cmcdData:t,headers:o}),o}return null}catch(e){return null}},setConfig:function(e){e&&(e.abrController&&(s=e.abrController),e.dashMetrics&&(h=e.dashMetrics),e.playbackController&&(p=e.playbackController))},reset:function(){T.off(i.default.PLAYBACK_RATE_CHANGED,R,this),T.off(i.default.MANIFEST_LOADED,P,this),T.off(i.default.BUFFER_LEVEL_STATE_CHANGED,D,t),T.off(i.default.PLAYBACK_SEEKED,O,t),E()},initialize:function(){T.on(i.default.PLAYBACK_RATE_CHANGED,R,t),T.on(i.default.MANIFEST_LOADED,P,t),T.on(i.default.BUFFER_LEVEL_STATE_CHANGED,D,t),T.on(i.default.PLAYBACK_SEEKED,O,t),T.on(i.default.PERIOD_SWITCH_COMPLETED,S,t)}},e=Object(d.default)(_).getInstance(),E(),t}p.__dashjs_factory_name="CmcdModel",t.default=s.default.getSingletonFactory(p)},"./src/streaming/models/FragmentModel.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/vo/FragmentRequest.js"),a="loading",s="executed",o="failed";function u(e){var t,n,r,u,l=(e=e||{}).eventBus,d=e.events,c=e.dashMetrics,f=e.fragmentLoader,h=e.debug,p=e.streamInfo,m=e.type;function g(e){var t;return!!e&&(t=!1,r.some((function(n){if(r=e,a=n,!isNaN(r.index)&&r.startTime===a.startTime&&r.adaptationIndex===a.adaptationIndex&&r.type===a.type||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,n)||function(e,t){return e.action===i.default.ACTION_COMPLETE&&e.action===t.action}(e,n))return t=!0;var r,a})),t)}function y(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function v(e){r=r.filter((function(t){var n=y(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function _(e,t){t<=e+.5||(r=r.filter((function(n){var r=y(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r})))}function T(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r],a=i.startTime,s=a+i.duration;if(n=isNaN(n)?y(i):n,!isNaN(a)&&!isNaN(s)&&t+n>=a&&t-n<s||isNaN(a)&&isNaN(t))return i}return null}function b(e,t){c.addSchedulingInfo(e,t),c.addRequestsQueue(e.mediaType,u,r)}function E(e){e.sender===f&&(u.splice(u.indexOf(e.request),1),e.response&&!e.error&&r.push(e.request),b(e.request,e.error?o:s),l.trigger(d.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:p.id,mediaType:m}))}function S(e){e.sender===f&&l.trigger(d.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this},{streamId:p.id,mediaType:m})}function w(e){e.sender===f&&l.trigger(d.FRAGMENT_LOADING_ABANDONED,{request:e.request},{streamId:p.id,mediaType:m})}function C(){r=[],u=[]}return t={getStreamId:function(){return p.id},getType:function(){return m},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach((function(t){var i=function(e){var t;switch(e){case a:t=u;break;case s:t=r;break;default:t=[]}return t}(t);n=n.concat(function(e,t){return t.hasOwnProperty("time")?[T(e,t.time,t.threshold)]:e.filter((function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}))}(i,e))})),n},isFragmentLoaded:g,isFragmentLoadedOrPending:function(e){var t,n=!1,r=0;if(!(n=g(e)))for(r=0;r<u.length;r++)t=u[r],e.url===t.url&&e.startTime===t.startTime&&(n=!0);return n},removeExecutedRequestsBeforeTime:v,removeExecutedRequestsAfterTime:function(e){r=r.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)_(n,e.start(r)),n=e.end(r);t>0&&_(n,t)}else v()},abortRequests:function(){n.debug("abort requests"),f.abort(),u=[]},executeRequest:function(e){e.action===i.default.ACTION_DOWNLOAD?(b(e,a),u.push(e),function(e){l.trigger(d.FRAGMENT_LOADING_STARTED,{request:e},{streamId:p.id,mediaType:m}),f.load(e)}(e)):n.warn("Unknown request action.")},reset:function(){l.off(d.LOADING_COMPLETED,E,this),l.off(d.LOADING_DATA_PROGRESS,S,this),l.off(d.LOADING_ABANDONED,w,this),f&&f.reset(),C()},resetInitialSettings:C,addExecutedRequest:function(e){r.push(e)}},n=h.getLogger(t),C(),l.on(d.LOADING_COMPLETED,E,t),l.on(d.LOADING_DATA_PROGRESS,S,t),l.on(d.LOADING_ABANDONED,w,t),t}u.__dashjs_factory_name="FragmentModel";var l=r.default.getClassFactory(u);l.FRAGMENT_MODEL_LOADING=a,l.FRAGMENT_MODEL_EXECUTED=s,l.FRAGMENT_MODEL_CANCELED="canceled",l.FRAGMENT_MODEL_FAILED=o,r.default.updateClassFactory(u.__dashjs_factory_name,l),t.default=l},"./src/streaming/models/LowLatencyThroughputModel.js":function(e,t,n){n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js");function a(){var e,t,n=this.context,i={};function a(){t=Object(r.default)(n).getInstance().getLogger(e)}function s(e){for(var t={},n=0,r=0,i=0,a=0,s=e.length,o=0;o<s;++o)n+=e[o].chunkDownloadTimeRelativeMS,r+=e[o].bufferLevel,i+=e[o].chunkDownloadTimeRelativeMS*e[o].bufferLevel,a+=e[o].chunkDownloadTimeRelativeMS*e[o].chunkDownloadTimeRelativeMS;return t.m=(i-n*r/s)/(a-n*n/s),t.b=r/s-t.m*n/s,function(e){return t.m*e+t.b}}function o(e){var t,n=!0,r=e.reduce((function(e,t){return e+t.bufferLevelAtSegmentEnd}),0)/e.length;return e.forEach((function(e){Math.abs(e.bufferLevelAtSegmentEnd/e.bufferLevelAtSegmentStart)<.95&&(n=!1),e.bufferLevelAtSegmentEnd/r<.8&&(n=!1),t?t>e.bitrate&&(n=!1):t=e.bitrate})),n}return e={setup:a,addMeasurement:function(e,t,n,r,a){e&&e.mediaType&&!i[e.mediaType]&&(i[e.mediaType]=[]);var o=e.mediaInfo.bitrateList.find((function(t){return t.id===e.representationId}));i[e.mediaType].push({index:e.index,repId:e.representationId,mediaType:e.mediaType,requestTimeMS:r,adjustedAvailabilityStartTimeMS:e.availabilityStartTime.getTime(),segDurationMS:1e3*e.duration,chunksDurationMS:n.reduce((function(e,t){return e+t.chunkDownloadDurationMS}),0),segmentBytes:n.reduce((function(e,t){return e+t.chunkBytes}),0),bitrate:o&&o.bandwidth,bitrateList:e.mediaInfo.bitrateList,chunkMeasurements:n,fetchDownloadDurationMS:t,throughputCapacityDelayMS:a,getEstimatedBufferLevel:s(n.slice(1))}),i[e.mediaType].length>10&&i[e.mediaType].shift()},getThroughputCapacityDelayMS:function(e,t){var n=i[e.mediaType]&&i[e.mediaType].slice(-3);return!n||n.length<3?0:o(n)?t/4>250?250:t/4:0},getEstimatedDownloadDurationMS:function(e){var n=i[e.mediaType].slice(-1).pop(),r=i[e.mediaType].slice(-3),a=n.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;n.bufferLevelAtSegmentStart=n.getEstimatedBufferLevel(a/2),n.bufferLevelAtSegmentEnd=n.getEstimatedBufferLevel(a);var s=o(r),u=s?.6:.8;if(n.isBufferStable&&1.05*n.segDurationMS<n.fetchDownloadDurationMS)return n.fetchDownloadDurationMS;if(!s||n.segDurationMS<n.fetchDownloadDurationMS)return.8*n.fetchDownloadDurationMS;if(n.adjustedAvailabilityStartTimeMS<=n.requestTimeMS+n.throughputCapacityDelayMS-n.segDurationMS)return.8*n.fetchDownloadDurationMS;for(var l=n.requestTimeMS+n.throughputCapacityDelayMS-n.adjustedAvailabilityStartTimeMS,d=0,c=0,f=0,h=0;h<n.chunkMeasurements.length;h++){var p=n.chunkMeasurements[h];if(l<c+p.chunkDownloadDurationMS)break;c+=p.chunkDownloadDurationMS,d+=p.chunkBytes,f++}if(l<0&&t.warn("request time was before adjusted availibitly start time"),d&&c&&f>.2*n.chunkMeasurements.length){var m=d/c,g=n.segmentBytes/m;return n.fetchDownloadDurationMS<g?n.fetchDownloadDurationMS*u:g*u}var y=n.bitrate;return n.bitrateList.some((function(e){if(e.bandwidth>n.bitrate)return y=e.bandwidth,!0})),y===n.bitrate?n.fetchDownloadDurationMS*u:u*n.segmentBytes*8*1e3/y}},a(),e}a.__dashjs_factory_name="LowLatencyThroughputModel",t.default=i.default.getSingletonFactory(a)},"./src/streaming/models/ManifestModel.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function s(){var e,t=this.context,n=Object(r.default)(t).getInstance();return{getValue:function(){return e},setValue:function(t){e=t,t&&n.trigger(i.default.MANIFEST_LOADED,{data:t})}}}s.__dashjs_factory_name="ManifestModel",t.default=a.default.getSingletonFactory(s)},"./src/streaming/models/MediaPlayerModel.js":function(e,t,n){n.r(t);var r=n("./src/dash/vo/UTCTiming.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/rules/abr/ABRRulesCollection.js"),o=n("./src/core/Settings.js"),u=n("./src/streaming/utils/SupervisorTools.js");function l(){var e,t,n,i,l=this.context,d=Object(o.default)(l).getInstance();function c(e){var t;for(t=0;t<i.length;t++)if(i[t].rulename===e)return t;return-1}function f(){if(d.get().streaming.lowLatencyEnabled)return h();var e=d.get().streaming.buffer.stableBufferTime;return e>0?e:d.get().streaming.buffer.fastSwitchEnabled?20:12}function h(){return d.get().streaming.lowLatencyEnabled?d.get().streaming.delay.liveDelay||3:d.get().streaming.delay.liveDelay}function p(e,n){m(e,n);var i=new r.default;i.schemeIdUri=e,i.value=n,t.push(i)}function m(e,n){Object(u.checkParameterType)(e,"string"),Object(u.checkParameterType)(n,"string"),t.forEach((function(r,i){r.schemeIdUri===e&&r.value===n&&t.splice(i,1)}))}return e={getABRCustomRules:function(){return i},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==s.default.ABANDON_FRAGMENT_RULES&&e!==s.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw a.default.BAD_ARGUMENT_ERROR;var r=c(t);-1===r?i.push({type:e,rulename:t,rule:n}):(i[r].type=e,i[r].rule=n)},removeABRCustomRule:function(e){if(e){var t=c(e);-1!==t&&i.splice(t,1)}else i=[]},getStableBufferTime:f,getInitialBufferLevel:function(){var e=d.get().streaming.buffer.initialBufferLevel;return isNaN(e)||e<0?0:Math.min(f(),e)},getRetryAttemptsForType:function(e){var t=isNaN(d.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:d.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return d.get().streaming.lowLatencyEnabled?d.get().streaming.retryAttempts[e]*t:d.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){var t=isNaN(d.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:d.get().streaming.retryIntervals.lowLatencyReductionFactor;return d.get().streaming.lowLatencyEnabled?d.get().streaming.retryIntervals[e]/t:d.get().streaming.retryIntervals[e]},getLiveDelay:h,getLiveCatchupLatencyThreshold:function(){try{var e=d.get().streaming.liveCatchup.latencyThreshold,t=h();if(null!==e&&!isNaN(e))return Math.max(e,t);var n=d.get().streaming.liveCatchup.minDrift,r=!isNaN(t)&&t?isNaN(n)?h():d.get().streaming.liveCatchup.minDrift+h():NaN;return r&&!isNaN(r)?Math.max(4*r,5):NaN}catch(e){return NaN}},addUTCTimingSource:p,removeUTCTimingSource:m,getUTCTimingSources:function(){return t},clearDefaultUTCTimingSources:function(){t=[]},restoreDefaultUTCTimingSources:function(){var e=d.get().streaming.utcSynchronization.defaultTimingSource;p(e.scheme,e.value)},setXHRWithCredentialsForType:function e(t,r){t?n[t]=!!r:Object.keys(n).forEach((function(t){e(t,r)}))},getXHRWithCredentialsForType:function(e){var t=n[e];return void 0===t?n.default:t},getDefaultUtcTimingSource:function(){return d.get().streaming.utcSynchronization.defaultTimingSource},reset:function(){}},t=[],n={default:!1},i=[],e}l.__dashjs_factory_name="MediaPlayerModel",t.default=i.default.getSingletonFactory(l)},"./src/streaming/models/MetricsModel.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/constants/MetricsConstants.js"),a=n("./src/streaming/vo/MetricsList.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/streaming/vo/metrics/RepresentationSwitch.js"),u=n("./src/streaming/vo/metrics/BufferLevel.js"),l=n("./src/streaming/vo/metrics/BufferState.js"),d=n("./src/streaming/vo/metrics/DVRInfo.js"),c=n("./src/streaming/vo/metrics/DroppedFrames.js"),f=n("./src/streaming/vo/metrics/ManifestUpdate.js"),h=n("./src/streaming/vo/metrics/SchedulingInfo.js"),p=n("./src/core/EventBus.js"),m=n("./src/streaming/vo/metrics/RequestsQueue.js"),g=n("./src/core/events/Events.js"),y=n("./src/core/FactoryMaker.js");function v(e){var t,n,y=(e=e||{}).settings,v=this.context,_=Object(p.default)(v).getInstance();function T(){_.trigger(g.default.METRICS_CHANGED)}function b(e){_.trigger(g.default.METRIC_CHANGED,{mediaType:e}),T()}function E(e,t,n){_.trigger(g.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),b(e)}function S(e,t,n){_.trigger(g.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),b(e)}function w(e,t){var r=null;return e?(n.hasOwnProperty(e)?r=n[e]:t||(r=new a.default,n[e]=r),r):r}function C(e,t,n){var r=w(e);null!==r&&(r[t].push(n),r[t].length>y.get().streaming.metrics.maxListDepth&&r[t].shift())}function A(e,t,n){C(e,t,n),S(e,t,n)}return t={clearCurrentMetricsForType:function(e){delete n[e],b(e)},clearAllCurrentMetrics:function(){n={},T()},getMetricsFor:w,addHttpRequest:function e(t,n,r,a,o,u,l,d,c,f,h,p,m,g,y){var v=new s.HTTPRequest;u&&u!==a&&(e(t,null,r,a,o,null,null,d,c,null,null,null,m,null,null),v.actualurl=u),v.tcpid=n,v.type=r,v.url=a,v.range=d,v.trequest=c,v.tresponse=f,v.responsecode=p,v._tfinish=h,v._stream=t,v._mediaduration=m,v._quality=o,v._responseHeaders=g,v._serviceLocation=l,y?y.forEach((function(e){!function(e,t,n,r,i){var a=new s.HTTPRequestTrace;a.s=t,a.d=n,a.b=r,a.t=i,e.trace.push(a),e.interval||(e.interval=0),e.interval+=n}(v,e.s,e.d,e.b,e.t)})):(delete v.interval,delete v.trace),A(t,i.default.HTTP_REQUEST,v)},addRepresentationSwitch:function(e,t,n,r,a){var s=new o.default;s.t=t,s.mt=n,s.to=r,a?s.lto=a:delete s.lto,A(e,i.default.TRACK_SWITCH,s)},addBufferLevel:function(e,t,n){var r=new u.default;r.t=t,r.level=n,A(e,i.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new l.default;r.target=n,r.state=t,A(e,i.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var a=new d.default;a.time=t,a.range=r,a.manifestInfo=n,A(e,i.default.DVR_INFO,a)},addDroppedFrames:function(e,t){var n=new c.default,r=w(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n||A(e,i.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,r,a,s,o,u,l){var d=new h.default;d.mediaType=e,d.t=t,d.type=n,d.startTime=r,d.availabilityStartTime=a,d.duration=s,d.quality=o,d.range=u,d.state=l,A(e,i.default.SCHEDULING_INFO,d)},addRequestsQueue:function(e,t,n){var r=new m.default;r.loadingRequests=t,r.executedRequests=n,w(e).RequestsQueue=r,S(e,i.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,a,s,o,u,l,d,c){var h=new f.ManifestUpdate;h.mediaType=e,h.type=t,h.requestTime=n,h.fetchTime=a,h.availabilityStartTime=s,h.presentationStartTime=o,h.clientTimeOffset=u,h.currentTime=l,h.buffered=d,h.latency=c,C(r.default.STREAM,i.default.MANIFEST_UPDATE,h),S(e,i.default.MANIFEST_UPDATE,h)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];E(e.mediaType,i.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,a){if(e){var s=new f.ManifestUpdateStreamInfo;s.id=t,s.index=n,s.start=r,s.duration=a,e.streamInfo.push(s),E(e.mediaType,i.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,n,r,a,s,o,u){if(e&&e.representationInfo){var l=new f.ManifestUpdateRepresentationInfo;l.id=t,l.index=n,l.streamIndex=r,l.mediaType=a,l.startNumber=o,l.fragmentInfoType=u,l.presentationTimeOffset=s,e.representationInfo.push(l),E(e.mediaType,i.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,A(r.default.STREAM,i.default.PLAY_LIST,e)},addDVBErrors:function(e){A(r.default.STREAM,i.default.DVB_ERRORS,e)}},n={},t}v.__dashjs_factory_name="MetricsModel",t.default=y.default.getSingletonFactory(v)},"./src/streaming/models/URIFragmentModel.js":function(e,t,n){n.r(t);var r=n("./src/streaming/vo/URIFragmentData.js"),i=n("./src/core/FactoryMaker.js");function a(){var e;return{initialize:function(t){if(e=new r.default,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var i=t.substr(n+1).split("&"),a=0,s=i.length;a<s;++a){var o=i[a],u=o.indexOf("=");if(-1!==u){var l=o.substring(0,u);e.hasOwnProperty(l)&&(e[l]=o.substr(u+1))}}},getURIFragmentData:function(){return e}}}a.__dashjs_factory_name="URIFragmentModel",t.default=i.default.getSingletonFactory(a)},"./src/streaming/models/VideoModel.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/core/Debug.js"),o=n("./src/streaming/constants/Constants.js"),u=new Map([[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[o.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function l(){var e,t,n,r,l=this.context,d=Object(i.default)(l).getInstance(),c=[];function f(){n&&(n.playbackRate=1,n.removeEventListener("canplay",f))}function h(){return c.length>0}function p(){if(n&&h()&&0===n.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),n.dispatchEvent(e)}}function m(e,t){n&&n.addEventListener(e,t)}function g(e,t){n&&n.removeEventListener(e,t)}function y(){return n?n.readyState:NaN}function v(){return n?n.buffered:null}function _(e,t,r,i,a){if(n)for(var s=0;s<n.textTracks.length;s++)if(n.textTracks[s].kind===e&&(!t||n.textTracks[s].label==t)&&n.textTracks[s].language===r&&n.textTracks[s].isTTML===i&&n.textTracks[s].isEmbedded===a)return n.textTracks[s];return null}return e={initialize:function(){d.on(a.default.PLAYBACK_PLAYING,p,this)},setCurrentTime:function(e,t){var r,i;i=function(){if(n){if(n.currentTime===e)return;try{e=t?function(e){var t=v(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),s=t.end(i),o=Math.abs(a-e),u=Math.abs(s-e);if(e>=a&&e<=s)return e;o<r&&(r=o,n=a),u<r&&(r=u,n=s)}return n}(e):e,n.currentTime=e}catch(t){0===n.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=e}),400)}}},(r=o.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA)===o.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||y()>=r?i():function(e,t){m(e,(function n(){g(e,n),t(e)}))}(u.get(r),i)},play:function(){if(n){n.autoplay=!0;var e=n.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch((function(e){"NotAllowedError"===e.name&&d.trigger(a.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing (".concat(e,")"))}))}},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isStalled:h,isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n&&(!t&&n.readyState<=2&&e>0?n.addEventListener("canplay",f):n.playbackRate=e)},getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(e,t){!function(e,t){t?function(e){null!==e&&n&&!n.seeking&&-1===c.indexOf(e)&&c.push(e)}(e):function(e){var t=c.indexOf(e);null!==e&&-1!==t&&c.splice(t,1)}(e)}(e,t)},getElement:function(){return n},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(n=e)&&(n.preload="auto")},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return r},setTTMLRenderingDiv:function(e){(r=e).style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0},getPlaybackQuality:function(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null;return"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:m,removeEventListener:g,getReadyState:y,getBufferRange:v,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:_,addTextTrack:function(e,t,r,i,a){if(!n)return null;var s=_(e,t,r,i,a);return s||((s=n.addTextTrack(e,t,r)).isEmbedded=a,s.isTTML=i),s},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){n&&n.removeChild(e)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().top-e.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){var e=n.parentNode.host||n.parentNode;return e?n.getBoundingClientRect().left-e.getBoundingClientRect().left:NaN},reset:function(){d.off(a.default.PLAYBACK_PLAYING,p,this)}},t=Object(s.default)(l).getInstance().getLogger(e),e}l.__dashjs_factory_name="VideoModel",t.default=r.default.getSingletonFactory(l)},"./src/streaming/net/FetchLoader.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Settings.js"),a=n("./src/streaming/constants/Constants.js");function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e){e=e||{};var t,n,r=this.context,o=e.requestModifier,u=e.lowLatencyThroughputModel,l=e.boxParser,d=Object(i.default)(r).getInstance();function c(e,t){e.reader.read().then(t).catch((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function f(e,t){try{if((e=e.filter((function(n){return n.bytes>t/4/e.length}))).length>1){var n=0,r=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach((function(t,i){var a=e[i+1];if(a){var s=a.ts-t.ts;n+=s<r?s:0}})),n}return null}catch(e){return null}}return t={load:function(e){var t,r=new Date,i=e.request,h=new Headers;if(i.range&&h.append("Range","bytes="+i.range),e.headers)for(var p in e.headers){var m=e.headers[p];m&&h.append(p,m)}i.requestStartDate||(i.requestStartDate=r),o&&o.modifyRequestHeader({setRequestHeader:function(e,t){h.append(e,t)}}),"function"==typeof window.AbortController&&(t=new AbortController,e.abortController=t,t.signal.onabort=e.onabort);var g={method:e.method,headers:h,credentials:e.withCredentials?"include":void 0,signal:t?t.signal:void 0},y=d.get().streaming.abr.fetchThroughputCalculationMode,v=Date.now(),_=0;new Promise((function(e){if(y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&u&&(_=u.getThroughputCapacityDelayMS(i,1e3*n.getCurrentBufferLevel(i.mediaType))))return setTimeout(e,_);e()})).then((function(){var t=Date.now();fetch(e.url,g).then((function(r){e.response||(e.response={}),e.response.status=r.status,e.response.statusText=r.statusText,e.response.responseURL=r.url,r.ok||e.onerror();var o,d="",h=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=s(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}(r.headers.keys());try{for(h.s();!(o=h.n()).done;){var p=o.value;d+=p+": "+r.headers.get(p)+"\r\n"}}catch(e){h.e(e)}finally{h.f()}if(e.response.responseHeaders=d,!r.body)return r.arrayBuffer().then((function(t){e.response.response=t;var n={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(n),e.onload(),e.onend()}));var m,g,T,b,E=parseInt(r.headers.get("Content-Length"),10),S=0,w=!1,C=new Uint8Array,A=0;if(y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&u){var I=t,k=0,R=(T=r.body.tee(),b=2,function(e){if(Array.isArray(e))return e}(T)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw a}}return n}}(T,b)||s(T,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),P=R[0],D=R[1];m=P.getReader(),g=[],m.read().then((function r(a){var s=a.value,o=a.done;if(k=Date.now(),s&&s.length){var l=k-I,c=s.length;g.push({chunkDownloadTimeRelativeMS:k-t,chunkDownloadDurationMS:l,chunkBytes:c,kbps:Math.round(8*c/(l/1e3)),bufferLevel:n.getCurrentBufferLevel(i.mediaType)})}if(o){var f=k-t,h=g.reduce((function(e,t){return e+t.chunkBytes}),0);return u.addMeasurement(i,f,g,v,_,d),void e.progress({loaded:h,total:h,lengthComputable:!0,time:u.getEstimatedDownloadDurationMS(i),stream:!0})}return I=Date.now(),m.read().then(r)})),e.reader=D.getReader()}else e.reader=r.body.getReader();var O=[],M=[],L=[],N=!0;c(e,(function t(n){var r=n.value;if(n.done){if(C){if(y!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var i=null;y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&(i=function(e,t){try{var n,r;n=e.filter((function(t,n){return n<e.length-1})),r=t.filter((function(e,n){return n<t.length-1}));var i=[];if(n.length>1){for(var a=0,s=0,o=0;o<n.length;o++)if(n[o]&&r[o]){var u=r[o].ts-n[o].ts;if(u>1)i.push(8*r[o].bytes/u);else{0===s&&(s=n[o].ts);var l=r[o].ts-s;l>1?(i.push(8*a/l),a=0,s=0):a+=r[o].bytes}}if(i.length>0)return i.reduce((function(e,t){return e+t}),0)/i.length}return null}catch(e){return null}}(M,L)),e.progress({loaded:S,total:isNaN(E)?S:E,lengthComputable:!0,time:f(O,S),throughput:i,stream:!0})}e.response.response=C.buffer}return e.onload(),void e.onend()}if(r&&r.length>0){C=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(C,r),S+=r.length,O.push({ts:Date.now(),bytes:r.length}),y===a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&N&&l.findLastTopIsoBoxCompleted(["moof"],C,A).found&&(N=!1,M.push({ts:performance.now(),bytes:r.length}));var s=l.findLastTopIsoBoxCompleted(["moov","mdat"],C,A);if(s.found){var o,u=s.lastCompletedOffset+s.size;y!==a.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING||N||(N=!0,L.push({ts:performance.now(),bytes:C.length})),u===C.length?(o=C,C=new Uint8Array):(o=new Uint8Array(C.subarray(0,u)),C=C.subarray(u)),e.progress({data:o.buffer,lengthComputable:!1,noTrace:!0}),A=0}else A=s.lastCompletedOffset,w||(e.progress({lengthComputable:!1,noTrace:!0}),w=!0)}c(e,t)}))})).catch((function(t){e.onerror&&e.onerror(t)}))}))},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel(),e.onabort()}catch(e){}},calculateDownloadedTime:f,setup:function(e){n=e.dashMetrics}},t}u.__dashjs_factory_name="FetchLoader";var l=r.default.getClassFactory(u);t.default=l},"./src/streaming/net/HTTPLoader.js":function(e,t,n){n.r(t);var r=n("./src/streaming/net/XHRLoader.js"),i=n("./src/streaming/net/FetchLoader.js"),a=n("./src/streaming/vo/metrics/HTTPRequest.js"),s=n("./src/core/FactoryMaker.js"),o=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/models/CmcdModel.js"),l=n("./src/core/Utils.js"),d=n("./src/core/Debug.js"),c=n("./src/core/EventBus.js"),f=n("./src/core/events/Events.js"),h=n("./src/core/Settings.js"),p=n("./src/streaming/constants/Constants.js"),m=n("./src/streaming/models/LowLatencyThroughputModel.js");function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){e=e||{};var t,n,s,y,v,_,T,b,E,S=this.context,w=e.errHandler,C=e.dashMetrics,A=e.mediaPlayerModel,I=e.requestModifier,k=e.boxParser,R=e.errors,P=e.requestTimeout||0,D=Object(c.default)(S).getInstance(),O=Object(h.default)(S).getInstance();function M(e,t){var u,d=e.request,c=[],h=!0,m=!0,g=new Date,E=g,R=0;if(!I||!C||!w)throw new Error("config object is not correct or missing");var L,N=function(e){if(m=!1,d.requestStartDate=g,d.requestEndDate=new Date,d.firstByteDate=d.firstByteDate||g,!d.checkExistenceOnly){var t=u.response?u.response.responseURL:null,n=u.response?u.response.status:null,r=u.response&&u.response.getAllResponseHeaders?u.response.getAllResponseHeaders():u.response?u.response.responseHeaders:[];C.addHttpRequest(d,t,n,r,e?c:null),d.type===a.HTTPRequest.MPD_TYPE&&C.addManifestUpdate(d)}},x=function(){if(-1!==n.indexOf(u)&&(n.splice(n.indexOf(u),1),m))if(N(!1),t>0){try{O.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&d.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE&&A.getRetryAttemptsForType(a.HTTPRequest.MEDIA_SEGMENT_TYPE)===t&&D.trigger(f.default.ATTEMPT_BACKGROUND_SYNC)}catch(e){}t--;var r={config:e};y.push(r),r.timeout=setTimeout((function(){-1!==y.indexOf(r)&&(y.splice(y.indexOf(r),1),M(e,t))}),A.getRetryIntervalsForType(d.type))}else{if(d.type===a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;w.error(new o.default(v[d.type],d.url+" is not available",{request:d,response:u.response})),e.error&&e.error(d,"error",u.response.statusText),e.complete&&e.complete(d,u.response.statusText)}};O.get().streaming.lowLatencyEnabled&&window.fetch&&"arraybuffer"===d.responseType&&d.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE?(L=Object(i.default)(S).create({requestModifier:I,lowLatencyThroughputModel:T,boxParser:k})).setup({dashMetrics:C}):L=Object(r.default)(S).create({requestModifier:I});var F=null,U=I.modifyRequestURL(d.url);if(O.get().streaming.cmcd&&O.get().streaming.cmcd.enabled){var j=O.get().streaming.cmcd.mode;if(j===p.default.CMCD_MODE_QUERY){var B=function(e){try{var t=[],n=_.getQueryParameter(e);return n&&t.push(n),t}catch(e){return[]}}(d);U=l.default.addAditionalQueryParameterToUrl(U,B)}else j===p.default.CMCD_MODE_HEADER&&(F=_.getHeaderParameters(d))}d.url=U;var V=d.checkExistenceOnly?a.HTTPRequest.HEAD:a.HTTPRequest.GET,q=A.getXHRWithCredentialsForType(d.type);u={url:U,method:V,withCredentials:q,request:d,onload:function(){u.response.status>=200&&u.response.status<=299&&(N(!0),e.success&&e.success(u.response.response,u.response.statusText,u.response.responseURL),e.complete&&e.complete(d,u.response.statusText))},onend:x,onerror:x,progress:function(t){var n=new Date;h&&(h=!1,(!t.lengthComputable||t.lengthComputable&&t.total!==t.loaded)&&(d.firstByteDate=n)),t.lengthComputable&&(d.bytesLoaded=t.loaded,d.bytesTotal=t.total),t.noTrace||(c.push({s:E,d:t.time?t.time:n.getTime()-E.getTime(),b:[t.loaded?t.loaded-R:0],t:t.throughput}),E=n,R=t.loaded),e.progress&&t&&e.progress(t)},onabort:function(){e.abort&&e.abort(d)},ontimeout:function(e){var t;if(e.lengthComputable){var n=e.loaded/e.total*100;t="Request timeout: loaded: "+e.loaded+", out of: "+e.total+" : "+n.toFixed(3)+"% Completed"}else t="Request timeout: non-computable download size";b.warn(t)},loader:L,timeout:P,headers:F};var H=(new Date).getTime();if(isNaN(d.delayLoadingTime)||H>=d.delayLoadingTime)n.push(u),L.load(u);else{var G={httpRequest:u};s.push(G),G.delayTimeout=setTimeout((function(){if(-1!==s.indexOf(G)){s.splice(s.indexOf(G),1);try{g=new Date,E=g,n.push(G.httpRequest),L.load(G.httpRequest)}catch(e){G.httpRequest.onerror()}}}),d.delayLoadingTime-H)}}return t={load:function(e){e.request?M(e,A.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){y.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),y=[],s.forEach((function(e){return clearTimeout(e.delayTimeout)})),s=[],n.forEach((function(e){e.request.type!==a.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e))})),n=[]}},b=Object(d.default)(S).getInstance().getLogger(t),n=[],s=[],y=[],_=Object(u.default)(S).getInstance(),T=Object(m.default)(S).getInstance(),g(E={},a.HTTPRequest.MPD_TYPE,R.DOWNLOAD_ERROR_ID_MANIFEST_CODE),g(E,a.HTTPRequest.XLINK_EXPANSION_TYPE,R.DOWNLOAD_ERROR_ID_XLINK_CODE),g(E,a.HTTPRequest.INIT_SEGMENT_TYPE,R.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),g(E,a.HTTPRequest.MEDIA_SEGMENT_TYPE,R.DOWNLOAD_ERROR_ID_CONTENT_CODE),g(E,a.HTTPRequest.INDEX_SEGMENT_TYPE,R.DOWNLOAD_ERROR_ID_CONTENT_CODE),g(E,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,R.DOWNLOAD_ERROR_ID_CONTENT_CODE),g(E,a.HTTPRequest.OTHER_TYPE,R.DOWNLOAD_ERROR_ID_CONTENT_CODE),v=E,t}y.__dashjs_factory_name="HTTPLoader";var v=s.default.getClassFactory(y);t.default=v},"./src/streaming/net/SchemeLoaderFactory.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/HTTPLoader.js");function a(){var e;function t(){e={}}function n(){t()}return n(),{getLoader:function(t){for(var n in e)if(e.hasOwnProperty(n)&&t.startsWith(n))return e[n];return i.default},registerLoader:function(t,n){e[t]=n},unregisterLoader:function(t){e[t]&&delete e[t]},unregisterAllLoader:t,reset:n}}a.__dashjs_factory_name="SchemeLoaderFactory";var s=r.default.getSingletonFactory(a);t.default=s},"./src/streaming/net/URLLoader.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/net/SchemeLoaderFactory.js");function a(e){e=e||{};var t,n,r=this.context;return t=Object(i.default)(r).getInstance(),{load:function(i){if(!n){var a=t.getLoader(i&&i.request?i.request.url:null);n=a(r).create({errHandler:e.errHandler,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,dashMetrics:e.dashMetrics,boxParser:e.boxParser?e.boxParser:null,constants:e.constants?e.constants:null,dashConstants:e.dashConstants?e.dashConstants:null,urlUtils:e.urlUtils?e.urlUtils:null,requestTimeout:isNaN(e.requestTimeout)?0:e.requestTimeout,errors:e.errors})}n.load(i)},abort:function(){n&&n.abort()}}}a.__dashjs_factory_name="URLLoader";var s=r.default.getClassFactory(a);t.default=s},"./src/streaming/net/XHRLoader.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).requestModifier;return{load:function(e){var n=new Date,r=e.request,i=new XMLHttpRequest;if(i.open(e.method,e.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&(i=t.modifyRequestHeader(i)),e.headers)for(var a in e.headers){var s=e.headers[a];s&&i.setRequestHeader(a,s)}i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.ontimeout=e.ontimeout,i.timeout=e.timeout,i.send(),e.response=i},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}i.__dashjs_factory_name="XHRLoader";var a=r.default.getClassFactory(i);t.default=a},"./src/streaming/protection/CommonEncryption.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"!==r.schemeIdUri.toLowerCase()||"cenc"!==r.value.toLowerCase()&&"cbcs"!==r.value.toLowerCase()||(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return t&&r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?(e.pssh.__text=e.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),t.decodeArray(e.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,s=void 0,o=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,s="";var u=void 0,l=void 0;for(u=0;u<4;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,s+="-",u=0;u<2;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<2;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<2;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,s+="-",u=0;u<6;u++)s+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,r+=4,n[s=s.toLowerCase()]=t.buffer.slice(o,i),r=i}else r=i;else r=i}return n}},{key:"getLicenseServerUrlFromMediaInfo",value:function(e,t){try{if(!e||0===e.length)return null;for(var n=0,r=null;n<e.length&&!r;){var a=e[n];if(a&&a.contentProtection&&a.contentProtection.length>0){var s=a.contentProtection.filter((function(e){return e.schemeIdUri&&e.schemeIdUri===t}));if(s&&s.length>0)for(var o=0;o<s.length&&!r;){for(var u=s[o],l=0;l<i.attributes.length&&!r;){for(var d=0,c=i.attributes[l];d<i.prefixes.length&&!r;){var f=i.prefixes[d];u[c]&&u[c].__prefix&&u[c].__prefix===f&&u[c].__text&&(r=u[c].__text),d+=1}l+=1}o+=1}}n+=1}return r}catch(e){return null}}}],null&&r(t.prototype,null),n&&r(t,n),e}();t.default=a},"./src/streaming/protection/Protection.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionController.js"),i=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),a=n("./src/streaming/protection/ProtectionEvents.js"),s=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),u=n("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),l=n("./src/streaming/protection/models/ProtectionModel_01b.js"),d=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],c=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function f(){var e,t=this.context;function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:function(a){var s=null,f=Object(i.default)(t).getInstance();f.setConfig({debug:a.debug,BASE64:a.BASE64}),f.initialize();var h=function(r){var i=r.debug,a=i.getLogger(e),s=r.eventBus,f=r.errHandler,h=r.videoModel?r.videoModel.getElement():null;return h&&void 0===h.onencrypted||h&&void 0===h.mediaKeys?n(h,c)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(u.default)(t).create({debug:i,eventBus:s,events:r.events,api:n(h,c)})):n(h,d)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(l.default)(t).create({debug:i,eventBus:s,errHandler:f,events:r.events,api:n(h,d)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(o.default)(t).create({debug:i,eventBus:s,events:r.events}))}(a);return!s&&h&&(s=Object(r.default)(t).create({protectionModel:h,protectionKeyController:f,eventBus:a.eventBus,debug:a.debug,events:a.events,BASE64:a.BASE64,constants:a.constants,cmcdModel:a.cmcdModel,settings:a.settings}),a.capabilities.setEncryptedMediaSupported(!0)),s}}}f.__dashjs_factory_name="Protection";var h=dashjs.FactoryMaker.getClassFactory(f);h.events=a.default,h.errors=s.default,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,h),t.default=h},"./src/streaming/protection/ProtectionEvents.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.LICENSE_REQUEST_SENDING="public_licenseRequestSending",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e.KEY_SESSION_UPDATED="public_keySessionUpdated",e}return o}(n("./src/core/events/EventsBase.js").default));t.default=o},"./src/streaming/protection/controllers/ProtectionController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/vo/MediaCapability.js"),a=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),s=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/vo/DashJSError.js"),u=n("./src/streaming/protection/vo/LicenseRequest.js"),l=n("./src/streaming/protection/vo/LicenseResponse.js"),d=n("./src/streaming/vo/metrics/HTTPRequest.js"),c=n("./src/core/Utils.js"),f=n("./src/streaming/constants/Constants.js"),h=n("./src/core/FactoryMaker.js");function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e){var t,n,h,m,g,y,v,_,T,b,E,S=(e=e||{}).protectionKeyController,w=e.protectionModel,C=e.eventBus,A=e.events,I=e.debug,k=e.BASE64,R=e.constants,P=[],D=e.cmcdModel,O=e.settings;function M(){if(!(C&&C.hasOwnProperty("on")&&S&&S.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function L(e,t){T?h.push(e):_?_&&function(e){var t=e.findIndex((function(e){return e.ks===_})),n=e[t];-1!==t&&n.initData&&N(n)}(e):function(e,t){T=!0;var r,i=[];h.push(e);for(var a=0;a<e.length;a++){var u=V(e[a]);i.push({ks:e[a].ks,configs:[u]})}w.requestKeySystemAccess(i).then((function(e){return r=e.data,n.info("DRM: KeySystem Access Granted ("+r.keySystem.systemString+")!  Selecting key system..."),w.selectKeySystem(r)})).then((function(e){if(_=e,T=!1,w){C.trigger(A.KEY_SYSTEM_SELECTED,{data:r});var t,n=U(_);n&&n.serverCertificate&&n.serverCertificate.length>0&&w.setServerCertificate(k.decodeArray(n.serverCertificate).buffer);for(var i=0;i<h.length;i++)for(t=0;t<h[i].length;t++)if(_===h[i][t].ks){N(h[i][t]);break}}})).catch((function(e){_=null,T=!1,t||C.trigger(A.KEY_SYSTEM_SELECTED,{data:null,error:new o.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+e.error)})}))}(e,t)}function N(e){if(S.isClearKey(_)&&e.protData&&e.protData.hasOwnProperty("clearkeys")){var t={kids:Object.keys(e.protData.clearkeys)};e.initData=(new TextEncoder).encode(JSON.stringify(t))}e.sessionId?x(e):null!==e.initData&&F(e)}function x(e){M(),w.loadKeySession(e)}function F(e){var t=r.default.getPSSHForKeySystem(_,e?e.initData:null);if(t){if(function(e){if(!e)return!1;try{for(var t=w.getSessions(),n=0;n<t.length;n++)if(t[n].getKeyId()===e)return!0;return!1}catch(e){return!1}}(e.keyId))return;if(j(t))return;try{e.initData=t,w.createKeySession(e)}catch(e){C.trigger(A.KEY_SESSION_CREATED,{data:null,error:new o.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e&&e.initData?w.createKeySession(e):C.trigger(A.KEY_SESSION_CREATED,{data:null,error:new o.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(_?_.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function U(e){if(e){var t=e.systemString;if(g)return t in g?g[t]:null}return null}function j(e){if(!e)return!1;try{for(var t=w.getAllInitData(),r=0;r<t.length;r++)if(S.initDataEquals(e,t[r]))return n.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch(e){return!1}}function B(e){M(),e?(w.setMediaElement(e),C.on(A.NEED_KEY,X,t)):null===e&&(w.setMediaElement(e),C.off(A.NEED_KEY,X,t))}function V(e){var t=e.protData,n=[],r=[],s=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:v,o=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:v,u=e.sessionType,l=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",d=t&&t.persistentState?t.persistentState:"temporary"===u?"optional":"required";return m.forEach((function(e){e.type===R.AUDIO?n.push(new i.default(e.codec,s)):e.type===R.VIDEO&&r.push(new i.default(e.codec,o))})),new a.default(n,r,l,d,[u])}function q(e){e.error?C.trigger(A.KEY_STATUSES_CHANGED,{data:null,error:e.error}):n.debug("DRM: key status = "+e.status)}function H(e){n.debug("DRM: onKeyMessage");var t=e.data;C.trigger(A.KEY_MESSAGE,{data:t});var i=t.messageType?t.messageType:"license-request",a=t.message,f=t.sessionToken,h=U(_),g=S.getLicenseServerModelInstance(_,h,i),y={sessionToken:f,messageType:i};if(a&&0!==a.byteLength){if(!g)return n.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+f.getSessionId()),void G(y);if(S.isClearKey(_)){var v=S.processClearKeyLicenseRequest(_,h,a);if(v)return n.debug("DRM: ClearKey license request handled by application!"),G(y),void w.updateKeySession(f,v)}!function(e,t,n){var i=e.sessionToken,a=e.messageType?e.messageType:"license-request",f={sessionToken:i,messageType:a},h=_?_.systemString:null,g=function(e,t,n,i,a){var s=null,o=i.message;if(e&&e.serverURL){var u=e.serverURL;"string"==typeof u&&""!==u?s=u:"object"===p(u)&&u.hasOwnProperty(t)&&(s=u[t])}else if(e&&e.laURL&&""!==e.laURL)s=e.laURL;else if(!(s=r.default.getLicenseServerUrlFromMediaInfo(m,_.schemeIdURI))&&!S.isClearKey(_)){var l=r.default.getPSSHData(n.initData);(s=_.getLicenseServerURLFromInitData(l))||(s=i.laURL)}return a.getServerURLFromMessage(s,o,t)}(n,a,i,e,t);if(g){var y={},v=!1;n&&W(y,n.httpRequestHeaders);var T=e.message;W(y,_.getRequestHeadersFromMessage(T)),Object.keys(y).forEach((function(e){"authorization"===e.toLowerCase()&&(v=!0)})),n&&"boolean"==typeof n.withCredentials&&(v=n.withCredentials);var C=function(e){if(w)if(e.status>=200&&e.status<=299){var n=c.default.parseHttpHeaders(e.getAllResponseHeaders?e.getAllResponseHeaders():null),r=new l.default(e.responseURL,n,e.response);Y(E,r).then((function(){var n=t.getLicenseMessage(r.data,h,a);null!==n?(G(f),w.updateKeySession(i,n)):K(e,f,h,a,t)}))}else K(e,f,h,a,t)},A=function(e){G(f,new o.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+h+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},I=function(e){G(f,new o.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+h+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))},k=_.getLicenseRequestFromMessage(T),R=t.getHTTPMethod(a),P=t.getResponseType(h,a),D=n&&!isNaN(n.httpTimeout)?n.httpTimeout:8e3,M=i.getSessionId()||null,L=new u.default(g,R,P,y,v,a,M,k),N=isNaN(O.get().streaming.retryAttempts[d.HTTPRequest.LICENSE])?3:O.get().streaming.retryAttempts[d.HTTPRequest.LICENSE];Y(b,L).then((function(){z(L,N,D,C,A,I)}))}else G(f,new o.default(s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}(t,g,h)}else G(y,new o.default(s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function G(e,t){C.trigger(A.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function z(e,t,r,i,a,s){var o=new XMLHttpRequest;if(O.get().streaming.cmcd&&O.get().streaming.cmcd.enabled&&O.get().streaming.cmcd.mode===f.default.CMCD_MODE_QUERY){var u=D.getQueryParameter({url:e.url,type:d.HTTPRequest.LICENSE});u&&(e.url=c.default.addAditionalQueryParameterToUrl(e.url,[u]))}for(var l in o.open(e.method,e.url,!0),o.responseType=e.responseType,o.withCredentials=e.withCredentials,r>0&&(o.timeout=r),e.headers)o.setRequestHeader(l,e.headers[l]);if(O.get().streaming.cmcd&&O.get().streaming.cmcd.enabled&&O.get().streaming.cmcd.mode===f.default.CMCD_MODE_HEADER){var h=D.getHeaderParameters({url:e.url,type:d.HTTPRequest.LICENSE});if(h)for(var p in h){var m=h[p];m&&o.setRequestHeader(p,m)}}var g=function(){t--;var n=isNaN(O.get().streaming.retryIntervals[d.HTTPRequest.LICENSE])?1e3:O.get().streaming.retryIntervals[d.HTTPRequest.LICENSE];setTimeout((function(){z(e,t,r,i,a,s)}),n)};o.onload=function(){this.status>=200&&this.status<=299||t<=0?i(this):(n.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+t),g())},o.ontimeout=o.onerror=function(){t<=0?s(this):(n.warn("License request network request failed . Retrying it... Pending retries: "+t),g())},o.onabort=function(){a(this)},C.trigger(A.LICENSE_REQUEST_SENDING,{url:e.url,headers:e.headers,payload:e.data,sessionId:e.sessionId}),o.send(e.data)}function W(e,t){if(t)for(var n in t)e[n]=t[n]}function K(e,t,n,r,i){var a=e.response?i.getErrorResponse(e.response,n,r):"NONE";G(t,new o.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+a))}function Y(e,t){return e?e.reduce((function(e,n){return e.then((function(){return n(t)}))}),Promise.resolve()):Promise.resolve()}function X(e,t){if(!O.get().streaming.protection.ignoreEmeEncryptedEvent){if(n.debug("DRM: onNeedKey"),"cenc"!==e.key.initDataType)return void n.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType);if(0===m.length&&(n.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(t=void 0===t?1:t+1)<5))return void P.push(setTimeout((function(){X(e,t)}),500));var i=e.key.initData;if(ArrayBuffer.isView(i)&&(i=i.buffer),_){var a=r.default.getPSSHForKeySystem(_,i);if(a&&j(a))return}n.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(i)));var s=S.getSupportedKeySystemsFromSegmentPssh(i,g,y);if(0===s.length)return void n.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");L(s,!1)}}return t={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");M(),m.push(e);var t=S.getSupportedKeySystemsFromContentProtection(e.contentProtection,g,y);(t=t.sort((function(e,n){return(g&&g[e.ks.systemString]&&g[e.ks.systemString].priority>=0?g[e.ks.systemString].priority:t.length)-(g&&g[n.ks.systemString]&&g[n.ks.systemString].priority>=0?g[n.ks.systemString].priority:t.length)})))&&t.length>0&&L(t,!0)},clearMediaInfoArray:function(){m=[]},createKeySession:F,loadKeySession:x,removeKeySession:function(e){M(),w.removeKeySession(e)},closeKeySession:function(e){M(),w.closeKeySession(e)},setServerCertificate:function(e){M(),w.setServerCertificate(e)},setMediaElement:B,setSessionType:function(e){y=e},setRobustnessLevel:function(e){v=e},setProtectionData:function(e){g=e,S.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return M(),S.getSupportedKeySystemsFromContentProtection(e,g,y)},getKeySystems:function(){return S?S.getKeySystems():[]},setKeySystems:function(e){S&&S.setKeySystems(e)},setLicenseRequestFilters:function(e){b=e},setLicenseResponseFilters:function(e){E=e},stop:function(){w&&w.stop()},reset:function(){C.off(A.INTERNAL_KEY_MESSAGE,H,t),C.off(A.INTERNAL_KEY_STATUS_CHANGED,q,t),M(),b=[],E=[],B(null),_=null,T=!1,w&&(w.reset(),w=null),P.forEach((function(e){return clearTimeout(e)})),P=[],m=[],h=[]}},n=I.getLogger(t),h=[],m=[],y="temporary",v="",b=[],E=[],C.on(A.INTERNAL_KEY_MESSAGE,H,t),C.on(A.INTERNAL_KEY_STATUS_CHANGED,q,t),t}m.__dashjs_factory_name="ProtectionController",t.default=h.default.getClassFactory(m)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/protection/drm/KeySystemClearKey.js"),a=n("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),s=n("./src/streaming/protection/drm/KeySystemWidevine.js"),o=n("./src/streaming/protection/drm/KeySystemPlayReady.js"),u=n("./src/streaming/protection/servers/DRMToday.js"),l=n("./src/streaming/protection/servers/PlayReady.js"),d=n("./src/streaming/protection/servers/Widevine.js"),c=n("./src/streaming/protection/servers/ClearKey.js"),f=n("./src/streaming/constants/ProtectionConstants.js");function h(){var e,t,n,h,p,m,g,y=this.context;function v(e,t){return t&&e in t?t[e]:null}function _(e,t){return e&&e.sessionId?e.sessionId:t&&t.sessionId?t.sessionId:null}function T(e,t){return e&&e.sessionType?e.sessionType:t}return e={initialize:function(){var e;h=[],e=Object(o.default)(y).getInstance({BASE64:p}),h.push(e),e=Object(s.default)(y).getInstance({BASE64:p}),h.push(e),e=Object(i.default)(y).getInstance({BASE64:p}),h.push(e),m=e,e=Object(a.default)(y).getInstance({BASE64:p,debug:t}),h.push(e),g=e},setProtectionData:function(e){for(var t,n,r=0;r<h.length;r++){var i=h[r];i.hasOwnProperty("init")&&i.init((t=i.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n))}},isClearKey:function(e){return e===m||e===g},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getKeySystems:function(){return h},setKeySystems:function(e){h=e},getKeySystemBySystemString:function(e){for(var t=0;t<h.length;t++)if(h[t].systemString===e)return h[t];return null},getSupportedKeySystemsFromContentProtection:function(e,t,n){var i,a,s,o,u=[];if(e){var l=r.default.findCencContentProtection(e);for(s=0;s<h.length;++s){var d=v((a=h[s]).systemString,t);for(o=0;o<e.length;++o)if((i=e[o]).schemeIdUri.toLowerCase()===a.schemeIdURI){var c=a.getInitData(i,l);u.push({ks:h[s],keyId:i.keyId,initData:c,protData:d,cdmData:a.getCDMData(d?d.cdmData:null),sessionId:_(d,i),sessionType:T(d,n)})}}}return u},getSupportedKeySystemsFromSegmentPssh:function(e,t,n){for(var i,a=[],s=r.default.parsePSSHList(e),o=0;o<h.length;++o){var u=v((i=h[o]).systemString,t);i.uuid in s&&a.push({ks:i,initData:s[i.uuid],protData:u,cdmData:i.getCDMData(u?u.cdmData:null),sessionId:_(u),sessionType:T(u,n)})}return a},getLicenseServerModelInstance:function(e,t,n){if("license-release"===n||"individualization-request"===n)return null;var r=null;return t&&t.hasOwnProperty("drmtoday")?r=Object(u.default)(y).getInstance({BASE64:p}):e.systemString===f.default.WIDEVINE_KEYSTEM_STRING?r=Object(d.default)(y).getInstance():e.systemString===f.default.PLAYREADY_KEYSTEM_STRING?r=Object(l.default)(y).getInstance():e.systemString===f.default.CLEARKEY_KEYSTEM_STRING&&(r=Object(c.default)(y).getInstance()),r},processClearKeyLicenseRequest:function(e,t,r){try{return e.getClearKeysFromProtectionData(t,r)}catch(e){return n.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(r){r&&(r.debug&&(t=r.debug,n=t.getLogger(e)),r.BASE64&&(p=r.BASE64))}}}h.__dashjs_factory_name="ProtectionKeyController",t.default=dashjs.FactoryMaker.getSingletonFactory(h)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),s=n("./src/streaming/constants/ProtectionConstants.js"),o=s.default.CLEARKEY_KEYSTEM_STRING;function u(e){var t=(e=e||{}).BASE64;return{uuid:"e2719d58-a985-b3c9-781a-b030af78d30e",schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:o,getInitData:function(e,n){try{var r=a.default.parseInitDataFromContentProtection(e,t);if(!r&&n){var i={kids:[function(e){try{var t=e.replace(/-/g,"");return(t=btoa(t.match(/\w{2}/g).map((function(e){return String.fromCharCode(parseInt(e,16))})).join(""))).replace(/=/g,"")}catch(e){return null}}(n["cenc:default_KID"])]};r=(new TextEncoder).encode(JSON.stringify(i))}return r}catch(e){return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(e){return JSON.parse(String.fromCharCode.apply(null,new Uint8Array(e)))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],o=0;o<a.kids.length;o++){var u=a.kids[o],l=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");s.push(new r.default(u,l))}n=new i.default(s)}return n}}}u.__dashjs_factory_name="KeySystemClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(u)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js"),a=i.default.PLAYREADY_KEYSTEM_STRING;function s(e){var t="utf-16",n=(e=e||{}).BASE64;function i(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:"9a04f079-9840-4286-ab92-e65be0885f95",schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:a,getInitData:function(e){var t,a,s,o,u,l=new Uint8Array([112,115,115,104,0,0,0,0]),d=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),c=0,f=null;if(i(),!e)return null;if("pssh"in e)return r.default.parseInitDataFromContentProtection(e,n);if("pro"in e)f=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;f=n.decodeArray(e.prheader.__text)}return t=f.length,a=4+l.length+d.length+4+t,s=new ArrayBuffer(a),o=new Uint8Array(s),(u=new DataView(s)).setUint32(c,a),c+=4,o.set(l,c),c+=l.length,o.set(d,c),c+=d.length,u.setUint32(c,t),c+=4,o.set(f,c),c+=t,o.buffer},getRequestHeadersFromMessage:function(e){var n,r,i={},a=new DOMParser,s="utf-16"===t?new Uint16Array(e):new Uint8Array(e);n=String.fromCharCode.apply(null,s);for(var o=(r=a.parseFromString(n,"application/xml")).getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<o.length;l++)i[o[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset=utf-8"),i},getLicenseRequestFromMessage:function(e){var r=null,a=new DOMParser,s="utf-16"===t?new Uint16Array(e):new Uint8Array(e);i();var o=String.fromCharCode.apply(null,s),u=a.parseFromString(o,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var l=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return l&&(r=n.decode(l)),r},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var s=t.getUint16(r,!0);r+=2;var o=t.getUint16(r,!0);if(r+=2,1===s){var u=e.slice(r,r+o),l=String.fromCharCode.apply(null,new Uint16Array(u)),d=i.parseFromString(l,"application/xml");if(d.getElementsByTagName("LA_URL")[0]){var c=d.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(c)return c}if(d.getElementsByTagName("LUI_URL")[0]){var f=d.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(f)return f}}else r+=o}return null},getCDMData:function(e){var t,r,a,s;if(i(),!e)return null;for(t=[],s=0;s<e.length;++s)t.push(e.charCodeAt(s)),t.push(0);for(t=String.fromCharCode.apply(null,t),t=n.encode(t),r='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",t),a=[],s=0;s<r.length;++s)a.push(r.charCodeAt(s)),a.push(0);return new Uint8Array(a).buffer},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e}}}s.__dashjs_factory_name="KeySystemPlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js"),a=n("./src/streaming/protection/CommonEncryption.js"),s=n("./src/streaming/constants/ProtectionConstants.js"),o=s.default.CLEARKEY_KEYSTEM_STRING;function u(e){var t,n=e.BASE64,s=e.debug.getLogger(t);return{uuid:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:o,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),o=[],u=0;u<a.kids.length;u++){var l=a.kids[u],d=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!d)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");o.push(new r.default(l,d))}n=new i.default(o),s.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}u.__dashjs_factory_name="KeySystemW3CClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(u)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/CommonEncryption.js"),i=n("./src/streaming/constants/ProtectionConstants.js"),a=i.default.WIDEVINE_KEYSTEM_STRING;function s(e){var t=(e=e||{}).BASE64;return{uuid:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:a,getInitData:function(e){return r.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}}}s.__dashjs_factory_name="KeySystemWidevine",t.default=dashjs.FactoryMaker.getSingletonFactory(s)},"./src/streaming/protection/errors/ProtectionErrors.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e}return o}(n("./src/core/errors/ErrorsBase.js").default));t.default=o},"./src/streaming/protection/models/ProtectionModel_01b.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),s=n("./src/streaming/protection/vo/KeyMessage.js"),o=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/protection/errors/ProtectionErrors.js");function d(e){e=e||{};var t,n,d,c,f,h,p,m,g,y=this.context,v=e.eventBus,_=e.events,T=e.debug,b=e.api,E=e.errHandler;function S(){d&&A();for(var e=0;e<p.length;e++)w(p[e]);v.trigger(_.TEARDOWN_COMPLETE)}function w(e){try{d[b.cancelKeyRequest](c.systemString,e.sessionId)}catch(t){v.trigger(_.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionId+") "+t.message})}}function C(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionId==t)return e[r];return null}return null}function A(){d.removeEventListener(b.keyerror,g),d.removeEventListener(b.needkey,g),d.removeEventListener(b.keymessage,g),d.removeEventListener(b.keyadded,g)}return t={getAllInitData:function(){for(var e=[],t=0;t<h.length;t++)e.push(h[t].initData);for(var n=0;n<p.length;n++)e.push(p[n].initData);return e},getSessions:function(){return p.concat(h)},requestKeySystemAccess:function(e){return new Promise((function(t,n){var r=d;r||(r=document.createElement("video"));for(var i=!1,a=0;a<e.length;a++)for(var s=e[a].ks.systemString,l=e[a].configs,c=null,h=0;h<l.length;h++){var p=l[h].videoCapabilities;if(p&&0!==p.length){c=[];for(var m=0;m<p.length;m++)""!==r.canPlayType(p[m].contentType,s)&&c.push(p[m])}if(c&&(!c||0!==c.length)){i=!0;var g=new o.default(null,c),y=f.getKeySystemBySystemString(s),T=new u.default(y,g);v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:T}),t({data:T});break}}if(!i){var b="Key system access denied! -- No valid audio/video content configurations detected!";v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:b}),n({error:b})}}))},selectKeySystem:function(e){return c=e.keySystem,Promise.resolve(c)},setMediaElement:function(e){if(d!==e){if(d){A();for(var t=0;t<p.length;t++)w(p[t]);p=[]}(d=e)&&(d.addEventListener(b.keyerror,g),d.addEventListener(b.needkey,g),d.addEventListener(b.keymessage,g),d.addEventListener(b.keyadded,g),v.trigger(_.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!c)throw new Error("Can not create sessions until you have selected a key system");if(m||0===p.length){var t={sessionId:null,keyId:e.keyId,initData:e.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return h.push(t),d[b.generateKeyRequest](c.systemString,new Uint8Array(e.initData)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionId;if(f.isClearKey(c))for(var r=0;r<t.keyPairs.length;r++)d[b.addKey](c.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else d[b.addKey](c.systemString,new Uint8Array(t),new Uint8Array(e.initData),n);v.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:w,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:S,reset:S},n=T.getLogger(t),d=null,c=null,h=[],p=[],f=Object(r.default)(y).getInstance(),g={handleEvent:function(e){var t=null;switch(e.type){case b.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;v.trigger(_.NEED_KEY,{key:new i.default(r,"cenc")});break;case b.keyerror:if((t=C(p,e.sessionId))||(t=C(h,e.sessionId)),t){var o=l.default.MEDIA_KEYERR_CODE,u="";switch(e.errorCode.code){case 1:o=l.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+l.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:o=l.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+l.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:o=l.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+l.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:o=l.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+l.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:o=l.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+l.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:o=l.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+l.default.MEDIA_KEYERR_DOMAIN_MESSAGE}u+="  System Code = "+e.systemCode,v.trigger(_.KEY_ERROR,{error:new a.default(o,u,t)})}else n.error("No session token found for key error");break;case b.keyadded:(t=C(p,e.sessionId))||(t=C(h,e.sessionId)),t?(n.debug("DRM: Key added."),v.trigger(_.KEY_ADDED,{data:t})):n.debug("No session token found for key added");break;case b.keymessage:if((m=null!==e.sessionId&&void 0!==e.sessionId)?!(t=C(p,e.sessionId))&&h.length>0&&(t=h.shift(),p.push(t),t.sessionId=e.sessionId,v.trigger(_.KEY_SESSION_CREATED,{data:t})):h.length>0&&(t=h.shift(),p.push(t),0!==h.length&&E.error(new a.default(l.default.MEDIA_KEY_MESSAGE_ERROR_CODE,l.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){var d=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=d,v.trigger(_.INTERNAL_KEY_MESSAGE,{data:new s.default(t,d,e.defaultURL)})}else n.warn("No session token found for key message")}}},t}d.__dashjs_factory_name="ProtectionModel_01b",t.default=dashjs.FactoryMaker.getClassFactory(d)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/protection/errors/ProtectionErrors.js"),s=n("./src/streaming/vo/DashJSError.js"),o=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemAccess.js"),l=n("./src/streaming/constants/ProtectionConstants.js");function d(e){e=e||{};var t,n,d,c,f,h,p,m,g=this.context,y=e.eventBus,v=e.events,_=e.debug;function T(e,t,n,r){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess){var i="Insecure origins are not allowed";return y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{error:i}),void r({error:i})}var a=e[t].ks,s=e[t].configs,o=a.systemString;o===l.default.PLAYREADY_KEYSTEM_STRING&&"required"===s[0].persistentState&&(o+=".recommendation"),navigator.requestMediaKeySystemAccess(o,s).then((function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new u.default(a,t);r.mksa=e,y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{data:r}),n({data:r})})).catch((function(i){if(t+1<e.length)T(e,t+1,n,r);else{var a="Key system access denied! ";y.trigger(v.KEY_SYSTEM_ACCESS_COMPLETE,{error:a+i.message}),r({error:a+i.message})}}))}function b(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function E(e){for(var t=0;t<h.length;t++)if(h[t]===e){h.splice(t,1);break}}function S(e){var t,n;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function w(e,t){var r={session:e,keyId:t.keyId,initData:t.initData,sessionId:t.sessionId,sessionType:t.sessionType,handleEvent:function(e){switch(e.type){case"keystatuseschange":y.trigger(v.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=S(arguments);"expired"===e.status?y.trigger(v.INTERNAL_KEY_STATUS_CHANGED,{error:new s.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)}):y.trigger(v.INTERNAL_KEY_STATUS_CHANGED,e)}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;y.trigger(v.INTERNAL_KEY_MESSAGE,{data:new o.default(this,t,void 0,e.messageType)})}},getKeyId:function(){return this.keyId},getSessionId:function(){return e.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){var e=S(arguments);"usable"===e.status&&(t=!0)})),t}};return e.addEventListener("keystatuseschange",r),e.addEventListener("message",r),e.closed.then((function(){E(r),n.debug("DRM: Session closed.  SessionID = "+r.getSessionId()),y.trigger(v.KEY_SESSION_CLOSED,{data:r.getSessionId()})})),h.push(r),r}return t={getAllInitData:function(){for(var e=[],t=0;t<h.length;t++)h[t].initData&&e.push(h[t].initData);return e},getSessions:function(){return h},requestKeySystemAccess:function(e){return new Promise((function(t,n){T(e,0,t,n)}))},selectKeySystem:function(e){return new Promise((function(t,n){e.mksa.createMediaKeys().then((function(t){return d=e.keySystem,f=t,c?c.setMediaKeys(f):Promise.resolve()})).then((function(){t(d)})).catch((function(){n({error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(e){c!==e&&(c&&(c.removeEventListener("encrypted",p),c.setMediaKeys&&c.setMediaKeys(null)),(c=e)&&(c.addEventListener("encrypted",p),c.setMediaKeys&&f&&c.setMediaKeys(f)))},setServerCertificate:function(e){if(!d||!f)throw new Error("Can not set server certificate until you have selected a key system");f.setServerCertificate(e).then((function(){n.info("DRM: License server certificate successfully updated."),y.trigger(v.SERVER_CERTIFICATE_UPDATED)})).catch((function(e){y.trigger(v.SERVER_CERTIFICATE_UPDATED,{error:new s.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))},createKeySession:function(e){if(!d||!f)throw new Error("Can not create sessions until you have selected a key system");var t=f.createSession(e.sessionType),r=w(t,e),i=d.systemString===l.default.CLEARKEY_KEYSTEM_STRING&&(e.initData||e.protData&&e.protData.clearkeys)?l.default.INITIALIZATION_DATA_TYPE_KEYIDS:l.default.INITIALIZATION_DATA_TYPE_CENC;t.generateRequest(i,e.initData).then((function(){n.debug("DRM: Session created.  SessionID = "+r.getSessionId()),y.trigger(v.KEY_SESSION_CREATED,{data:r})})).catch((function(e){E(r),y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))},updateKeySession:function(e,t){var n=e.session;m.isClearKey(d)&&(t=t.toJWK()),n.update(t).then((function(){y.trigger(v.KEY_SESSION_UPDATED)})).catch((function(t){y.trigger(v.KEY_ERROR,{error:new s.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))},loadKeySession:function(e){if(!d||!f)throw new Error("Can not load sessions until you have selected a key system");for(var t=e.sessionId,r=0;r<h.length;r++)if(t===h[r].sessionId)return void n.warn("DRM: Ignoring session ID because we have already seen it!");var i=f.createSession(e.sessionType),o=w(i,e);i.load(t).then((function(e){e?(n.debug("DRM: Session loaded.  SessionID = "+o.getSessionId()),y.trigger(v.KEY_SESSION_CREATED,{data:o})):(E(o),y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+t+")")}))})).catch((function(e){E(o),y.trigger(v.KEY_SESSION_CREATED,{data:null,error:new s.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+t+")! "+e.name)})}))},removeKeySession:function(e){e.session.remove().then((function(){n.debug("DRM: Session removed.  SessionID = "+e.getSessionId()),y.trigger(v.KEY_SESSION_REMOVED,{data:e.getSessionId()})}),(function(t){y.trigger(v.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionId()+"). "+t.name})}))},closeKeySession:function(e){b(e).catch((function(t){E(e),y.trigger(v.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionId()+") "+t.name})}))},stop:function(){for(var e,t=0;t<h.length;t++)(e=h[t]).getUsable()||b(e).catch((function(){E(e)}))},reset:function(){var e,t=h.length;0!==t?function(){for(var n=function(e){E(e),0===h.length&&(c?(c.removeEventListener("encrypted",p),c.setMediaKeys(null).then((function(){y.trigger(v.TEARDOWN_COMPLETE)}))):y.trigger(v.TEARDOWN_COMPLETE))},r=0;r<t;r++)!function(t){e.session.closed.then((function(){n(t)})),b(e).catch((function(){n(t)}))}(e=h[r])}():y.trigger(v.TEARDOWN_COMPLETE)}},n=_.getLogger(t),d=null,c=null,f=null,h=[],m=Object(r.default)(g).getInstance(),p={handleEvent:function(e){if("encrypted"===e.type&&e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;y.trigger(v.NEED_KEY,{key:new i.default(t,e.initDataType)})}}},t}d.__dashjs_factory_name="ProtectionModel_21Jan2015",t.default=dashjs.FactoryMaker.getClassFactory(d)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/controllers/ProtectionKeyController.js"),i=n("./src/streaming/protection/vo/NeedKey.js"),a=n("./src/streaming/vo/DashJSError.js"),s=n("./src/streaming/protection/errors/ProtectionErrors.js"),o=n("./src/streaming/protection/vo/KeyMessage.js"),u=n("./src/streaming/protection/vo/KeySystemConfiguration.js"),l=n("./src/streaming/protection/vo/KeySystemAccess.js");function d(e){e=e||{};var t,n,d,c,f,h,p,m,g,y=this.context,v=e.eventBus,_=e.events,T=e.debug,b=e.api;function E(){try{for(var e=0;e<p.length;e++)S(p[e]);d&&d.removeEventListener(b.needkey,m),v.trigger(_.TEARDOWN_COMPLETE)}catch(e){v.trigger(_.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function S(e){var t=e.session;t.removeEventListener(b.error,e),t.removeEventListener(b.message,e),t.removeEventListener(b.ready,e),t.removeEventListener(b.close,e);for(var n=0;n<p.length;n++)if(p[n]===e){p.splice(n,1);break}t[b.release]()}function w(){var e=null,t=function(){d.removeEventListener("loadedmetadata",e),d[b.setMediaKeys](f),v.trigger(_.VIDEO_ELEMENT_SELECTED)};d.readyState>=1?t():(e=t.bind(this),d.addEventListener("loadedmetadata",e))}return t={getAllInitData:function(){for(var e=[],t=0;t<p.length;t++)e.push(p[t].initData);return e},getSessions:function(){return p},requestKeySystemAccess:function(e){return new Promise((function(t,n){for(var r=!1,i=0;i<e.length;i++)for(var a=e[i].ks.systemString,s=e[i].configs,o=null,d=null,c=0;c<s.length;c++){var f=s[c].audioCapabilities,h=s[c].videoCapabilities;if(f&&0!==f.length){o=[];for(var p=0;p<f.length;p++)window[b.MediaKeys].isTypeSupported(a,f[p].contentType)&&o.push(f[p])}if(h&&0!==h.length){d=[];for(var m=0;m<h.length;m++)window[b.MediaKeys].isTypeSupported(a,h[m].contentType)&&d.push(h[m])}if(!(!o&&!d||o&&0===o.length||d&&0===d.length)){r=!0;var y=new u.default(o,d),T=g.getKeySystemBySystemString(a),E=new l.default(T,y);v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{data:E}),t({data:E});break}}if(!r){var S="Key system access denied! -- No valid audio/video content configurations detected!";v.trigger(_.KEY_SYSTEM_ACCESS_COMPLETE,{error:S}),n({error:S})}}))},selectKeySystem:function(e){return new Promise((function(t,n){try{f=e.mediaKeys=new window[b.MediaKeys](e.keySystem.systemString),c=e.keySystem,h=e,d&&w(),t(c)}catch(e){n({error:"Error selecting keys system ("+c.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(e){d!==e&&(d&&d.removeEventListener(b.needkey,m),(d=e)&&(d.addEventListener(b.needkey,m),f&&w()))},createKeySession:function(e){if(!c||!f||!h)throw new Error("Can not create sessions until you have selected a key system");var t=null;if(h.ksConfiguration.videoCapabilities&&h.ksConfiguration.videoCapabilities.length>0&&(t=h.ksConfiguration.videoCapabilities[0]),null===t&&h.ksConfiguration.audioCapabilities&&h.ksConfiguration.audioCapabilities.length>0&&(t=h.ksConfiguration.audioCapabilities[0]),null===t)throw new Error("Can not create sessions for unknown content types.");var r=t.contentType,i=f.createSession(r,new Uint8Array(e.initData),e.cdmData?new Uint8Array(e.cdmData):null),u=function(e,t){return{session:e,keyId:t.keyId,initData:t.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case b.error:v.trigger(_.KEY_ERROR,{error:new a.default(s.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case b.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;v.trigger(_.INTERNAL_KEY_MESSAGE,{data:new o.default(this,t,e.destinationURL)});break;case b.ready:n.debug("DRM: Key added."),v.trigger(_.KEY_ADDED);break;case b.close:n.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),v.trigger(_.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(i,e);i.addEventListener(b.error,u),i.addEventListener(b.message,u),i.addEventListener(b.ready,u),i.addEventListener(b.close,u),p.push(u),n.debug("DRM: Session created.  SessionID = "+u.getSessionId()),v.trigger(_.KEY_SESSION_CREATED,{data:u})},updateKeySession:function(e,t){var n=e.session;g.isClearKey(c)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t)),v.trigger(_.KEY_SESSION_UPDATED)},closeKeySession:S,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:E,reset:E},n=T.getLogger(t),d=null,c=null,f=null,h=null,p=[],g=Object(r.default)(y).getInstance(),m={handleEvent:function(e){if(e.type===b.needkey&&e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;v.trigger(_.NEED_KEY,{key:new i.default(t,"cenc")})}}},t}d.__dashjs_factory_name="ProtectionModel_3Feb2014",t.default=dashjs.FactoryMaker.getClassFactory(d)},"./src/streaming/protection/servers/ClearKey.js":function(e,t,n){n.r(t);var r=n("./src/streaming/protection/vo/KeyPair.js"),i=n("./src/streaming/protection/vo/ClearKeyKeySet.js");function a(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var a=e.keys[n],s=a.kid.replace(/=/g,""),o=a.k.replace(/=/g,"");t.push(new r.default(s,o))}return new i.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}a.__dashjs_factory_name="ClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(a)},"./src/streaming/protection/servers/DRMToday.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/ProtectionConstants.js");function i(e){var t=(e=e||{}).BASE64,n={};return n[r.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[r.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,r){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}i.__dashjs_factory_name="DRMToday",t.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/servers/PlayReady.js":function(e,t,n){function r(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function n(n){if(window.DOMParser){var r=t(n),i=(new window.DOMParser).parseFromString(r,"text/xml"),a=i?i.getElementsByTagNameNS(e,"Envelope")[0]:null,s=a?a.getElementsByTagNameNS(e,"Body")[0]:null;if(s&&s.getElementsByTagNameNS(e,"Fault")[0])return null}return n}function r(n){var r="",i="",a="",s=-1,o=-1;if(window.DOMParser){var u=t(n),l=(new window.DOMParser).parseFromString(u,"text/xml"),d=l?l.getElementsByTagNameNS(e,"Envelope")[0]:null,c=d?d.getElementsByTagNameNS(e,"Body")[0]:null,f=c?c.getElementsByTagNameNS(e,"Fault")[0]:null,h=f?f.getElementsByTagName("detail")[0]:null,p=h?h.getElementsByTagName("Exception")[0]:null,m=null;if(null===f)return u;r=(m=f.getElementsByTagName("faultstring")[0].firstChild)?m.nodeValue:null,null!==p&&(i=(m=p.getElementsByTagName("StatusCode")[0])?m.firstChild.nodeValue:null,s=(a=(m=p.getElementsByTagName("Message")[0])?m.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,o=a?a.indexOf("]"):-1,a=a?a.substring(s,o):"")}var g="code: ".concat(i,", name: ").concat(r);return a&&(g+=", message: ".concat(a)),g}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return n.call(this,e)},getErrorResponse:function(e){return r.call(this,e)}}}n.r(t),r.__dashjs_factory_name="PlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/servers/Widevine.js":function(e,t,n){function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}n.r(t),r.__dashjs_factory_name="Widevine",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}var t,n;return t=e,(n=[{key:"toJWK",value:function(){var e,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,s=new ArrayBuffer(a),o=new Uint8Array(s);for(e=0;e<a;e++)o[e]=i.charCodeAt(e);return s}}])&&r(t.prototype,n),e}();t.default=i},"./src/streaming/protection/vo/KeyMessage.js":function(e,t,n){n.r(t),t.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"}},"./src/streaming/protection/vo/KeyPair.js":function(e,t,n){n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n}},"./src/streaming/protection/vo/KeySystemAccess.js":function(e,t,n){n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n}},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(e,t,n){n.r(t),t.default=function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a}},"./src/streaming/protection/vo/LicenseRequest.js":function(e,t,n){n.r(t),t.default=function e(t,n,r,i,a,s,o,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.method=n,this.responseType=r,this.headers=i,this.withCredentials=a,this.messageType=s,this.sessionId=o,this.data=u}},"./src/streaming/protection/vo/LicenseResponse.js":function(e,t,n){n.r(t),t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.headers=n,this.data=r}},"./src/streaming/protection/vo/MediaCapability.js":function(e,t,n){n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n}},"./src/streaming/protection/vo/NeedKey.js":function(e,t,n){n.r(t),t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n}},"./src/streaming/rules/DroppedFramesHistory.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e={},t={},n={};return{push:function(r,i,a){if(i){e[r]||(e[r]=[],t[r]=0,n[r]=0);var s=a&&a.droppedVideoFrames?a.droppedVideoFrames:0,o=a&&a.totalVideoFrames?a.totalVideoFrames:0,u=s-t;t[r]=s;var l=o-n;n[r]=o;var d=e[r];isNaN(i)||(d[i]?(d[i].droppedVideoFrames+=u,d[i].totalVideoFrames+=l):d[i]={droppedVideoFrames:u,totalVideoFrames:l})}},getFrameHistory:function(t){return e[t]},clearForStream:function(r){try{delete e[r],delete t[r],delete n[r]}catch(e){}},reset:function(){e={},t={},n={}}}}i.__dashjs_factory_name="DroppedFramesHistory";var a=r.default.getClassFactory(i);t.default=a},"./src/streaming/rules/RulesContext.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,s=e.useL2AABR,o=e.useLoLPABR,u=e.streamProcessor?e.streamProcessor.getScheduleController():null,l=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null,d=e.videoModel?e.videoModel:null;function c(){return l?l.mediaInfo:null}return{getMediaType:function(){var e=c();return e?e.type:null},getMediaInfo:c,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=c();return e?e.streamInfo:null},getScheduleController:function(){return u},getAbrController:function(){return t},getRepresentationInfo:function(){return l},useBufferOccupancyABR:function(){return a},useL2AABR:function(){return s},useLoLPABR:function(){return o},getVideoModel:function(){return d}}}i.__dashjs_factory_name="RulesContext",t.default=r.default.getClassFactory(i)},"./src/streaming/rules/SwitchRequest.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i={DEFAULT:.5,STRONG:1,WEAK:0};function a(e,t,n){var r,a;return r=void 0===e?-1:e,a=function(e){var t=i.DEFAULT;return e!==i.DEFAULT&&e!==i.STRONG&&e!==i.WEAK||(t=e),t}(n),{quality:r,reason:void 0===t?null:t,priority:a}}a.__dashjs_factory_name="SwitchRequest";var s=r.default.getClassFactory(a);s.NO_CHANGE=-1,s.PRIORITY=i,r.default.updateClassFactory(a.__dashjs_factory_name,s),t.default=s},"./src/streaming/rules/SwitchRequestHistory.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js");function a(){var e=[],t=[];return{push:function(n){n.newValue===i.default.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,a=r<0?1:0,s=a?-r:0,o=a?0:1;if(e[n.oldValue].drops+=a,e[n.oldValue].dropSize+=s,e[n.oldValue].noDrops+=o,t.push({idx:n.oldValue,noDrop:o,drop:a,dropSize:s}),t.length>8){var u=t.shift();e[u.idx].drops-=u.drop,e[u.idx].dropSize-=u.dropSize,e[u.idx].noDrops-=u.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}a.__dashjs_factory_name="SwitchRequestHistory";var s=r.default.getClassFactory(a);t.default=s},"./src/streaming/rules/ThroughputHistory.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js");function a(e){var t,n,i,a,s,o=(e=e||{}).settings;function u(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function l(e,u,l){return o.get().streaming.abr.movingAverageMethod!==r.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?s.throughputHalfLife:s.latencyHalfLife,r=e?i[t]:a[t];if(!r||r.totalWeight<=0)return NaN;var o=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),u=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(o,u):Math.max(o,u)}(e,u):function(e,r,i){var a=function(e,r,i){var a,s;if(e?(a=t[r],s=i?3:4):(a=n[r],s=4),a){if(s>=a.length)s=a.length;else if(e)for(var o=1;o<s;++o){var u=a[a.length-o]/a[a.length-o-1];if((u>=1.3||u<=1/1.3)&&(s+=1)===a.length)break}}else s=0;return s}(e,r,i),s=(e?t:n)[r];return 0!==a&&s&&0!==s.length?(s=s.slice(-a)).reduce((function(e,t){return e+t}))/s.length:NaN}(e,u,l)}function d(e,t){return l(!0,e,t)}function c(e){t[e]=t[e]||[],n[e]=n[e]||[],i[e]=i[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},a[e]=a[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function f(){t={},n={},i={},a={}}var h={push:function(e,l,d){if(l.trace&&l.trace.length){var f=l.tresponse.getTime()-l.trequest.getTime()||1,h=l._tfinish.getTime()-l.tresponse.getTime()||1,p=l.trace.reduce((function(e,t){return e+t.b[0]}),0),m=0,g=0;if(o.get().streaming.lowLatencyEnabled){if(o.get().streaming.abr.fetchThroughputCalculationMode===r.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING){var y=l.trace.reduce((function(e,t){return e+t.t}),0);g=Math.round(y/l.trace.length)}0===g&&(m=l.trace.reduce((function(e,t){return e+t.d}),0))}else m=d?h:f+h;if(0!==m&&(g=Math.round(8*p/m)),c(e),function(e,t,n){return e===r.default.VIDEO?n<o.get().streaming.cacheLoadThresholds[r.default.VIDEO]:e===r.default.AUDIO?n<o.get().streaming.cacheLoadThresholds[r.default.AUDIO]:void 0}(e,0,h)){if(t[e].length>0&&!t[e].hasCachedEntries)return;t[e].hasCachedEntries=!0}else t[e]&&t[e].hasCachedEntries&&function(e){delete t[e],delete n[e],delete i[e],delete a[e],c(e)}(e);t[e].push(g),t[e].length>20&&t[e].shift(),n[e].push(f),n[e].length>20&&n[e].shift(),u(i[e],g,.001*h,s.throughputHalfLife),u(a[e],f,1,s.latencyHalfLife)}},getAverageThroughput:d,getSafeAverageThroughput:function(e,t){var n=d(e,t);return isNaN(n)||(n*=o.get().streaming.abr.bandwidthSafetyFactor),n},getAverageLatency:function(e){return l(!1,e)},reset:f};return s={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},f(),h}a.__dashjs_factory_name="ThroughputHistory",t.default=i.default.getClassFactory(a)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(e,t,n){n.r(t);var r=n("./src/streaming/rules/abr/ThroughputRule.js"),i=n("./src/streaming/rules/abr/InsufficientBufferRule.js"),a=n("./src/streaming/rules/abr/AbandonRequestsRule.js"),s=n("./src/streaming/rules/abr/DroppedFramesRule.js"),o=n("./src/streaming/rules/abr/SwitchHistoryRule.js"),u=n("./src/streaming/rules/abr/BolaRule.js"),l=n("./src/streaming/rules/abr/L2ARule.js"),d=n("./src/streaming/rules/abr/lolp/LoLpRule.js"),c=n("./src/core/FactoryMaker.js"),f=n("./src/streaming/rules/SwitchRequest.js"),h=n("./src/streaming/constants/Constants.js"),p="qualitySwitchRules",m="abandonFragmentRules";function g(e){e=e||{};var t,n,c=this.context,g=e.mediaPlayerModel,y=e.dashMetrics,v=e.settings;function _(e){return e.filter((function(e){return e.quality>f.default.NO_CHANGE}))}function T(e){var t,n,r,i,a,s={},o=null;if(0!==e.length){for(s[f.default.PRIORITY.STRONG]={quality:f.default.NO_CHANGE,reason:null},s[f.default.PRIORITY.WEAK]={quality:f.default.NO_CHANGE,reason:null},s[f.default.PRIORITY.DEFAULT]={quality:f.default.NO_CHANGE,reason:null},t=0,n=e.length;t<n;t+=1)(r=e[t]).quality!==f.default.NO_CHANGE&&(s[r.priority].quality===f.default.NO_CHANGE||s[r.priority].quality>r.quality)&&(s[r.priority].quality=r.quality,s[r.priority].reason=r.reason||null);return s[f.default.PRIORITY.WEAK].quality!==f.default.NO_CHANGE&&(o=s[f.default.PRIORITY.WEAK]),s[f.default.PRIORITY.DEFAULT].quality!==f.default.NO_CHANGE&&(o=s[f.default.PRIORITY.DEFAULT]),s[f.default.PRIORITY.STRONG].quality!==f.default.NO_CHANGE&&(o=s[f.default.PRIORITY.STRONG]),o&&(i=o.quality,a=o.reason),Object(f.default)(c).create(i,a)}}return{initialize:function(){t=[],n=[],v.get().streaming.abr.useDefaultABRRules&&(v.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_L2A?t.push(Object(l.default)(c).create({dashMetrics:y,mediaPlayerModel:g,settings:v})):v.get().streaming.abr.ABRStrategy===h.default.ABR_STRATEGY_LoLP?t.push(Object(d.default)(c).create({dashMetrics:y})):(t.push(Object(u.default)(c).create({dashMetrics:y,mediaPlayerModel:g,settings:v})),t.push(Object(r.default)(c).create({dashMetrics:y})),v.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&t.push(Object(i.default)(c).create({dashMetrics:y,settings:v})),v.get().streaming.abr.additionalAbrRules.switchHistoryRule&&t.push(Object(o.default)(c).create()),v.get().streaming.abr.additionalAbrRules.droppedFramesRule&&t.push(Object(s.default)(c).create()),v.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&n.push(Object(a.default)(c).create({dashMetrics:y,mediaPlayerModel:g,settings:v})))),g.getABRCustomRules().forEach((function(e){e.type===p&&t.push(e.rule(c).create()),e.type===m&&n.push(e.rule(c).create())}))},reset:function(){[t,n].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),t=[],n=[]},getMaxQuality:function(e){return T(_(t.map((function(t){return t.getMaxIndex(e)}))))||Object(f.default)(c).create()},getMinSwitchRequest:T,shouldAbandonFragment:function(e,t){return T(_(n.map((function(n){return n.shouldAbandon(e,t)}))))||Object(f.default)(c).create()},getQualitySwitchRules:function(){return t}}}g.__dashjs_factory_name="ABRRulesCollection";var y=c.default.getClassFactory(g);y.QUALITY_SWITCH_RULES=p,y.ABANDON_FRAGMENT_RULES=m,c.default.updateSingletonFactory(g.__dashjs_factory_name,y),t.default=y},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(e,t,n){n.r(t);var r=n("./src/streaming/rules/SwitchRequest.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/core/Debug.js");function s(e){e=e||{};var t,n,i,o,u,l=this.context,d=e.mediaPlayerModel,c=e.dashMetrics,f=e.settings;function h(){i={},o={},u=[]}return t={shouldAbandon:function(e){var t=Object(r.default)(l).create(r.default.NO_CHANGE,{name:s.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return t;var a,h,p=e.getMediaInfo(),m=e.getMediaType(),g=e.getStreamInfo(),y=g?g.id:null,v=e.getCurrentRequest();if(!isNaN(v.index)){a=m,h=v.index,i[a]=i[a]||{},i[a][h]=i[a][h]||{};var _=d.getStableBufferTime();if(c.getCurrentBufferLevel(m)>_)return t;var T=i[m][v.index];if(null===T||null===v.firstByteDate||o.hasOwnProperty(T.id))return t;if(void 0===T.firstByteTime&&(u[m]=[],T.firstByteTime=v.firstByteDate.getTime(),T.segmentDuration=v.duration,T.bytesTotal=v.bytesTotal,T.id=v.index),T.bytesLoaded=v.bytesLoaded,T.elapsedTime=(new Date).getTime()-T.firstByteTime,T.bytesLoaded>0&&T.elapsedTime>0&&function(e,t){u[e]=u[e]||[],u[e].push(t)}(m,Math.round(8*T.bytesLoaded/T.elapsedTime)),u[m].length>=5&&T.elapsedTime>500&&T.bytesLoaded<T.bytesTotal){var b=u[m].reduce((function(e,t){return e+t}),0);if(T.measuredBandwidthInKbps=Math.round(b/u[m].length),T.estimatedTimeOfDownload=+(8*T.bytesTotal/T.measuredBandwidthInKbps/1e3).toFixed(2),T.estimatedTimeOfDownload<1.8*T.segmentDuration||0===e.getRepresentationInfo().quality)return t;if(!o.hasOwnProperty(T.id)){var E=e.getAbrController(),S=T.bytesTotal-T.bytesLoaded,w=E.getBitrateList(p),C=E.getQualityForBitrate(p,T.measuredBandwidthInKbps*f.get().streaming.abr.bandwidthSafetyFactor,y),A=E.getMinAllowedIndexFor(m,y),I=void 0!==A?Math.max(A,C):C;S>T.bytesTotal*w[I].bitrate/w[E.getQualityFor(m,y)].bitrate&&(t.quality=I,t.reason.throughput=T.measuredBandwidthInKbps,t.reason.fragmentID=T.id,o[T.id]=T,n.debug("["+m+"] frag id",T.id," is asking to abandon and switch to quality to ",I," measured bandwidth was",T.measuredBandwidthInKbps),delete i[m][T.id])}}else T.bytesLoaded===T.bytesTotal&&delete i[m][T.id]}return t},reset:h},n=Object(a.default)(l).getInstance().getLogger(t),h(),t}s.__dashjs_factory_name="AbandonRequestsRule",t.default=i.default.getClassFactory(s)},"./src/streaming/rules/abr/BolaRule.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),d=n("./src/streaming/MediaPlayerEvents.js"),c=10;function f(e){e=e||{};var t,n,a,f=this.context,h=e.dashMetrics,p=e.mediaPlayerModel,m=Object(o.default)(f).getInstance();function g(e,t,n){var r=n.reduce((function(e,t,r){return t>n[e]?r:e}),0);if(0===r)return null;var i=Math.max(e,c+2*t.length),a=(n[r]-1)/(i/c-1);return{gp:a,Vp:c/a}}function y(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function v(e,t){var n=p.getStableBufferTime();if(e.stableBufferTime!==n){var r=g(n,e.bitrates,e.utilities);if(r.Vp!==e.Vp||r.gp!==e.gp){var i=h.getCurrentBufferLevel(t),a=i+e.placeholderBuffer;a-=c,a*=r.Vp/e.Vp,a+=c,e.stableBufferTime=n,e.Vp=r.Vp,e.gp=r.gp,e.placeholderBuffer=Math.max(0,a-i)}}}function _(e,t){return e.Vp*(e.utilities[t]+e.gp)}function T(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,a=t-1;a>=0;--a)if(e.utilities[a]<e.utilities[t]){var s=e.bitrates[a],o=e.utilities[a],u=e.Vp*(e.gp+(n*o-s*r)/(n-s));i=Math.max(i,u)}return i}function b(){for(var e in a)a.hasOwnProperty(e)&&2===a[e].state&&(a[e].placeholderBuffer=0)}function E(){for(var e in a)if(a.hasOwnProperty(e)){var t=a[e];0!==t.state&&(t.state=1,y(t))}}function S(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=a[e.chunk.mediaInfo.type];if(t&&0!==t.state){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,C(t,e.chunk.mediaInfo.type)}}}function w(e){if(e&&e.metric===r.default.HTTP_REQUEST&&e.value&&e.value.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=a[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),C(t,e.mediaType))}}function C(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var n=h.getCurrentBufferLevel(t)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),r=_(e,e.lastQuality),i=Math.max(0,r-n);e.placeholderBuffer=Math.min(i,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function A(e){if(e){var t=a[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function I(e){if(e){var t=a[e.mediaType];if(t&&0!==t.state){var n,r=h.getCurrentBufferLevel(e.mediaType);n=t.abrQuality>0?T(t,t.abrQuality):c;var i=Math.max(0,n-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,i)}}}function k(){a={}}return t={getMaxIndex:function(e){var t=Object(i.default)(f).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return t;var r=e.getMediaInfo(),s=e.getMediaType(),o=e.getScheduleController(),u=e.getStreamInfo(),l=e.getAbrController(),d=l.getThroughputHistory(),c=u?u.id:null,m=u&&u.manifestInfo&&u.manifestInfo.isDynamic,b=e.useBufferOccupancyABR();if(t.reason=t.reason||{},!b)return t;o.setTimeToLoadDelay(0);var E=function(e){var t=e.getMediaType(),n=a[t];return n?0!==n.state&&v(n,t):(n=function(e){var t={},n=e.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),r=function(e){return e.map((function(e){return Math.log(e)}))}(n);r=r.map((function(e){return e-r[0]+1}));var i=p.getStableBufferTime(),a=g(i,n,r);return a?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=a.Vp,t.gp=a.gp,t.lastQuality=0,y(t)):t.state=0,t}(e),a[t]=n),n}(e);if(0===E.state)return t;var S,w=h.getCurrentBufferLevel(s),C=d.getAverageThroughput(s,m),A=d.getSafeAverageThroughput(s,m),I=d.getAverageLatency(s);if(t.reason.state=E.state,t.reason.throughput=C,t.reason.latency=I,isNaN(C))return t;switch(E.state){case 1:S=l.getQualityForBitrate(r,A,c,I),t.quality=S,t.reason.throughput=A,E.placeholderBuffer=Math.max(0,T(E,S)-w),E.lastQuality=S,!isNaN(E.lastSegmentDurationS)&&w>=E.lastSegmentDurationS&&(E.state=2);break;case 2:!function(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var i=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,i)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,v(e,t)}(E,s),S=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var s=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||s>=i)&&(i=s,r=a)}return r}(E,w+E.placeholderBuffer);var k=l.getQualityForBitrate(r,A,c,I);S>E.lastQuality&&S>k&&(S=Math.max(k,E.lastQuality));var R=Math.max(0,w+E.placeholderBuffer-_(E,S));R<=E.placeholderBuffer?(E.placeholderBuffer-=R,R=0):(R-=E.placeholderBuffer,E.placeholderBuffer=0,S<l.getMaxAllowedIndexFor(s,c)?o.setTimeToLoadDelay(1e3*R):R=0),t.quality=S,t.reason.throughput=C,t.reason.latency=I,t.reason.bufferLevel=w,t.reason.placeholderBuffer=E.placeholderBuffer,t.reason.delay=R,E.lastQuality=S;break;default:n.debug("BOLA ABR rule invoked in bad state."),t.quality=l.getQualityForBitrate(r,A,c,I),t.reason.state=E.state,t.reason.throughput=A,t.reason.latency=I,E.state=1,y(E)}return t},reset:function(){k(),m.off(d.default.BUFFER_EMPTY,b,t),m.off(d.default.PLAYBACK_SEEKING,E,t),m.off(d.default.METRIC_ADDED,w,t),m.off(d.default.QUALITY_CHANGE_REQUESTED,A,t),m.off(d.default.FRAGMENT_LOADING_ABANDONED,I,t),m.off(u.default.MEDIA_FRAGMENT_LOADED,S,t)}},n=Object(l.default)(f).getInstance().getLogger(t),k(),m.on(d.default.BUFFER_EMPTY,b,t),m.on(d.default.PLAYBACK_SEEKING,E,t),m.on(d.default.METRIC_ADDED,w,t),m.on(d.default.QUALITY_CHANGE_REQUESTED,A,t),m.on(d.default.FRAGMENT_LOADING_ABANDONED,I,t),m.on(u.default.MEDIA_FRAGMENT_LOADED,S,t),t}f.__dashjs_factory_name="BolaRule",t.default=a.default.getClassFactory(f)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/Debug.js");function s(){var e,t,n=this.context;return e={getMaxIndex:function(e){var r=Object(i.default)(n).create();if(!e||!e.hasOwnProperty("getDroppedFramesHistory"))return r;var a=e.getDroppedFramesHistory(),s=e.getStreamInfo().id;if(a){var o=a.getFrameHistory(s);if(!o||0===o.length)return r;for(var u=0,l=0,d=i.default.NO_CHANGE,c=1;c<o.length;c++)if(o[c]&&(u=o[c].droppedVideoFrames,(l=o[c].totalVideoFrames)>375&&u/l>.15)){d=c-1,t.debug("index: "+d+" Dropped Frames: "+u+" Total Frames: "+l);break}return Object(i.default)(n).create(d,{droppedFrames:u})}return r}},t=Object(a.default)(n).getInstance().getLogger(e),e}s.__dashjs_factory_name="DroppedFramesRule",t.default=r.default.getClassFactory(s)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/core/Debug.js"),o=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/Constants.js"),l=n("./src/streaming/constants/MetricsConstants.js"),d=n("./src/streaming/MediaPlayerEvents.js");function c(e){e=e||{};var t,n,a,c=this.context,f=Object(r.default)(c).getInstance(),h=e.dashMetrics,p=e.settings;function m(){(a={})[u.default.VIDEO]={ignoreCount:2},a[u.default.AUDIO]={ignoreCount:2}}function g(){m()}function y(e){isNaN(e.startTime)||e.mediaType!==u.default.AUDIO&&e.mediaType!==u.default.VIDEO||a[e.mediaType].ignoreCount>0&&a[e.mediaType].ignoreCount--}return t={getMaxIndex:function(e){var t=Object(o.default)(c).create();if(!e||!e.hasOwnProperty("getMediaType"))return t;!function(){if(!h||!h.hasOwnProperty("getCurrentBufferLevel")||!h.hasOwnProperty("getCurrentBufferState"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var r=e.getMediaType(),i=h.getCurrentBufferState(r),s=e.getRepresentationInfo().fragmentDuration,d=e.getStreamInfo(),f=d?d.id:null,m=d&&d.manifestInfo&&d.manifestInfo.isDynamic;if(function(e){return!p.get().streaming.lowLatencyEnabled&&a[e].ignoreCount>0}(r)||!s)return t;if(i&&i.state===l.default.BUFFER_EMPTY)n.debug("["+r+"] Switch to index 0; buffer is empty."),t.quality=0,t.reason="InsufficientBufferRule: Buffer is empty";else{var g=e.getMediaInfo(),y=e.getAbrController(),v=y.getThroughputHistory(),_=h.getCurrentBufferLevel(r),T=v.getAverageThroughput(r,m),b=v.getAverageLatency(r),E=T*(_/s)*.5;t.quality=y.getQualityForBitrate(g,E,f,b),t.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return t},reset:function(){m(),f.off(d.default.PLAYBACK_SEEKING,g,t),f.off(i.default.BYTES_APPENDED_END_FRAGMENT,y,t)}},n=Object(s.default)(c).getInstance().getLogger(t),m(),f.on(d.default.PLAYBACK_SEEKING,g,t),f.on(i.default.BYTES_APPENDED_END_FRAGMENT,y,t),t}c.__dashjs_factory_name="InsufficientBufferRule",t.default=a.default.getClassFactory(c)},"./src/streaming/rules/abr/L2ARule.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/MetricsConstants.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/metrics/HTTPRequest.js"),o=n("./src/core/EventBus.js"),u=n("./src/core/events/Events.js"),l=n("./src/core/Debug.js"),d=n("./src/streaming/constants/Constants.js");function c(e){e=e||{};var t,n,a,c,f=this.context,h=e.dashMetrics,p=Object(o.default)(f).getInstance();function m(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function g(){for(var e in n)if(n.hasOwnProperty(e)){var t=n[e];0!==t.state&&(t.state=1,m(t))}}function y(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=n[e.chunk.mediaInfo.type],r=a[e.chunk.mediaInfo.type];if(t&&0!==t.state){var i=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||i>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=i,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=i,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,_(t,r)}}}function v(e){if(e&&e.metric===r.default.HTTP_REQUEST&&e.value&&e.value.type===s.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=n[e.mediaType],i=a[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),_(t,i))}}function _(e,t){isNaN(e.lastSegmentStart)||isNaN(e.lastSegmentRequestTimeMs)||(t.segment_request_start_s=.001*e.lastSegmentRequestTimeMs,t.segment_download_finish_s=.001*e.lastSegmentFinishTimeMs,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN)}function T(e){if(e&&e.mediaType){var t=n[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function b(e,t){if(e.length!==t.length)return-1;for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function E(){n={},a={}}return t={getMaxIndex:function(e){var t,r=Object(i.default)(f).create(),s=Math.pow(4,.99),o=Math.max(Math.pow(4,1),s*Math.sqrt(4)),u=e.getMediaInfo(),l=e.getMediaType(),p=u.bitrateList.map((function(e){return e.bandwidth})),g=p.length,y=e.getScheduleController(),v=e.getStreamInfo(),_=e.getAbrController(),T=_.getThroughputHistory(),E=v&&v.manifestInfo&&v.manifestInfo.isDynamic,S=e.useL2AABR(),w=h.getCurrentBufferLevel(l,!0),C=T.getSafeAverageThroughput(l,E),A=T.getAverageThroughput(l,E),I=T.getAverageLatency(l),k=e.getVideoModel().getPlaybackRate();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useL2AABR")))return r;if(r.reason=r.reason||{},!S||l===d.default.AUDIO)return r;y.setTimeToLoadDelay(0);var R=function(e){var t=e.getMediaType(),r=n[t];return r||(r=function(e){var t={},n=e.getMediaInfo(),r=n.bitrateList.map((function(e){return e.bandwidth/1e3}));return t.state=1,t.bitrates=r,t.lastQuality=0,function(e){e&&e.type&&(a[e.type]={},a[e.type].w=[],a[e.type].prev_w=[],a[e.type].Q=0,a[e.type].segment_request_start_s=0,a[e.type].segment_download_finish_s=0,a[e.type].B_target=1.5)}(n),m(t),t}(e),n[t]=r),r}(e);if(0===R.state)return r;var P=a[l];if(!P)return r;if(r.reason.state=R.state,r.reason.throughput=A,r.reason.latency=I,isNaN(A))return r;switch(R.state){case 1:if(t=_.getQualityForBitrate(u,C,v.id,I),r.quality=t,r.reason.throughput=C,R.lastQuality=t,!isNaN(R.lastSegmentDurationS)&&w>=P.B_target){R.state=2,P.Q=s;for(var D=0;D<g;++D)D===R.lastQuality?P.prev_w[D]=1:P.prev_w[D]=0}break;case 2:var O=[],M=h.getCurrentHttpRequest(l).trace.reduce((function(e,t){return e+t.d}),0),L=h.getCurrentHttpRequest(l).trace.reduce((function(e,t){return e+t.b[0]}),0),N=Math.round(8*L/M);N<1&&(N=1);for(var x=R.lastSegmentDurationS,F=1,U=0;U<g;++U)p[U]=p[U]/1e3,k*p[U]>N&&(F=-1),P.w[U]=P.prev_w[U]+F*(x/(2*o))*((P.Q+s)*(k*p[U]/N));P.w=function(e){for(var t=e.length,n=!1,r=[],i=0;i<t;++i)r[i]=e[i];for(var a=e.sort((function(e,t){return t-e})),s=0,o=0,u=[],l=0;l<t-1;++l)if((o=((s+=a[l])-1)/(l+1))>=a[l+1]){n=!0;break}n||(o=(s+a[t-1]-1)/t);for(var d=0;d<t;++d)u[d]=Math.max(r[d]-o,0);return u}(P.w);for(var j=0;j<g;++j)O[j]=P.w[j]-P.prev_w[j],P.prev_w[j]=P.w[j];P.Q=Math.max(0,P.Q-x+x*k*((b(p,P.prev_w)+b(p,O))/N));for(var B=[],V=0;V<g;++V)B[V]=Math.abs(p[V]-b(P.w,p));(t=B.indexOf(Math.min.apply(Math,B)))>R.lastQuality&&p[R.lastQuality+1]<=N&&(t=R.lastQuality+1),p[t]>=N&&(P.Q=2*Math.max(s,P.Q)),r.quality=t,r.reason.throughput=A,r.reason.latency=I,r.reason.bufferLevel=w,R.lastQuality=r.quality;break;default:c.debug("L2A ABR rule invoked in bad state."),r.quality=_.getQualityForBitrate(u,C,v.id,I),r.reason.state=R.state,r.reason.throughput=C,r.reason.latency=I,R.state=1,m(R)}return r},reset:function(){E(),p.off(u.default.PLAYBACK_SEEKING,g,t),p.off(u.default.MEDIA_FRAGMENT_LOADED,y,t),p.off(u.default.METRIC_ADDED,v,t),p.off(u.default.QUALITY_CHANGE_REQUESTED,T,t)}},c=Object(l.default)(f).getInstance().getLogger(t),E(),p.on(u.default.PLAYBACK_SEEKING,g,t),p.on(u.default.MEDIA_FRAGMENT_LOADED,y,t),p.on(u.default.METRIC_ADDED,v,t),p.on(u.default.QUALITY_CHANGE_REQUESTED,T,t),t}c.__dashjs_factory_name="L2ARule",t.default=a.default.getClassFactory(c)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/rules/SwitchRequest.js");function s(){var e,t,n=this.context;return e={getMaxIndex:function(e){for(var r=e?e.getSwitchHistory():null,i=r?r.getSwitchRequests():[],s=0,o=0,u=0,l=Object(a.default)(n).create(),d=0;d<i.length;d++)if(void 0!==i[d]&&(s+=i[d].drops,o+=i[d].noDrops,u+=i[d].dropSize,s+o>=6&&s/o>.075)){l.quality=d>0&&i[d].drops>0?d-1:d,l.reason={index:l.quality,drops:s,noDrops:o,dropSize:u},t.debug("Switch history rule index: "+l.quality+" samples: "+(s+o)+" drops: "+s);break}return l}},t=Object(i.default)(n).getInstance().getLogger(e),e}s.__dashjs_factory_name="SwitchHistoryRule",t.default=r.default.getClassFactory(s)},"./src/streaming/rules/abr/ThroughputRule.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/SwitchRequest.js"),a=n("./src/streaming/constants/Constants.js"),s=n("./src/streaming/constants/MetricsConstants.js");function o(e){e=e||{};var t=this.context,n=e.dashMetrics;return{getMaxIndex:function(e){var r=Object(i.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return r;!function(){if(!n||!n.hasOwnProperty("getCurrentBufferState"))throw new Error(a.default.MISSING_CONFIG_ERROR)}();var o=e.getMediaInfo(),u=e.getMediaType(),l=n.getCurrentBufferState(u),d=e.getScheduleController(),c=e.getAbrController(),f=e.getStreamInfo(),h=f?f.id:null,p=f&&f.manifestInfo?f.manifestInfo.isDynamic:null,m=c.getThroughputHistory(),g=m.getSafeAverageThroughput(u,p),y=m.getAverageLatency(u),v=e.useBufferOccupancyABR();return isNaN(g)||!l||v||c.getAbandonmentStateFor(h,u)!==s.default.ABANDON_LOAD&&(l.state===s.default.BUFFER_LOADED||p)&&(r.quality=c.getQualityForBitrate(o,g,h,y),d.setTimeToLoadDelay(0),r.reason={throughput:g,latency:y}),r},reset:function(){}}}o.__dashjs_factory_name="ThroughputRule",t.default=r.default.getClassFactory(o)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var e,t,n,r,a,s,o,u,l,d=this.context;function c(){n=null,r=1,a=100,s=0,o=null,u=null,l="dynamic_weight_selection"}function f(){var e=0;if(n)for(var t=0;t<n.length;t++){var r=n[t];r.state.throughput>e&&(e=r.state.throughput)}return e}function h(e,t,n){var r=e.map((function(e,r){return n[r]*Math.pow(e-t[r],2)})).reduce((function(e,t){return e+t}));return(r<0?-1:1)*Math.sqrt(Math.abs(r))}function p(e,t){return h([e.state.throughput,e.state.latency,e.state.rebuffer,e.state.switch],[t.state.throughput,t.state.latency,t.state.rebuffer,t.state.switch],[1,1,1,1])}function m(e,t,n){for(var r=0;r<t.length;r++){var i=t[r],a=p(i,e);g(i,n,Math.exp(-1*Math.pow(a,2)/(2*Math.pow(.1,2))))}}function g(e,t,n){var r=e.state,i=[.01,.01,.01,.01];r.throughput=r.throughput+(t[0]-r.throughput)*i[0]*n,r.latency=r.latency+(t[1]-r.latency)*i[1]*n,r.rebuffer=r.rebuffer+(t[2]-r.rebuffer)*i[2]*n,r.switch=r.switch+(t[3]-r.switch)*i[3]*n}return e={getNextQuality:function(e,i,d,c,p,g,y){var v=d,_=c,T=i,b=function(e){if(!n){n=[];var t=e.bitrateList,i=[];s=t[0].bandwidth,t.forEach((function(e){i.push(e.bandwidth),e.bandwidth<s&&(s=e.bandwidth)})),l=i.map((function(e){return Math.pow(e,2)})).reduce((function(e,t){return e+t})),r=Math.sqrt(l);for(var a=0;a<t.length;a++){var o={qualityIndex:a,bitrate:t[a].bandwidth,state:{throughput:t[a].bandwidth/r,latency:0,rebuffer:0,switch:0}};n.push(o)}u=function(e){var t=[],n=function(e){for(var t=[],n=0;n<e;n++){var r=[Math.random()*f(),Math.random(),Math.random(),Math.random()];t.push(r)}return t}(Math.pow(e.length,2));t.push(n[0]);for(var r=[1,1,1,1],i=1;i<e.length;i++){for(var a=null,s=null,o=0;o<n.length;o++){for(var u=n[o],l=null,d=0;d<t.length;d++){var c=h(u,t[d],r);(null===l||c<l)&&(l=c)}(null===s||l>s)&&(a=u,s=l)}t.push(a)}for(var p=null,m=null,g=0;g<t.length;g++){for(var y=0,v=0;v<t.length;v++)g!==v&&(y+=h(t[g],t[v],r));(null===p||y>p)&&(p=y,m=g)}var _=[];for(_.push(t[m]),t.splice(m,1);t.length>0;){for(var T=null,b=null,E=0;E<t.length;E++){var S=h(_[0],t[E],r);(null===T||S<T)&&(T=S,b=E)}_.push(t[b]),t.splice(b,1)}return _}(n)}var l;return n}(e),E=i/r;E>1&&(E=f()),d/=a,t.debug("getNextQuality called throughput:".concat(E," latency:").concat(d," bufferSize:").concat(c," currentQualityIndex:").concat(g," playbackRate:").concat(p));var S=b[g],w=S.bitrate*y.getSegmentDuration()/T,C=Math.max(0,w-_);if(_-w<y.getMinBuffer())return t.debug("Buffer is low for bitrate= ".concat(S.bitrate," downloadTime=").concat(w," currentBuffer=").concat(_," rebuffer=").concat(C)),function(e,t){var r=0,i=e;if(n)for(var a=0;a<n.length;a++){var s=n[a];s.bitrate<e.bitrate&&s.bitrate>r&&t>s.bitrate&&(r=s.bitrate,i=s)}return i}(S,T).qualityIndex;switch(l){case"manual_weight_selection":o=[.4,.4,.4,.4];break;case"random_weight_selection":!function(e){o=function(e,t){for(var n=[],r=Math.sqrt(2/e),i=0;i<4;i++)n.push(Math.random()*r);return o=n}(e.length)}(b);break;default:!function(e,t,n,r,i,a,s){o||(o=u[u.length-1]);var l=e.findWeightVector(t,n,r,i,a,s);null!==l&&-1!==l&&(o=l)}(y,b,v,_,C,T,p)}for(var A=null,I=null,k=null,R=0;R<b.length;R++){var P=b[R],D=P.state,O=[D.throughput,D.latency,D.rebuffer,D.switch],M=o.slice(),L=y.getNextBufferWithBitrate(P.bitrate,_,T),N=L<y.getMinBuffer();N&&t.debug("Buffer is low for bitrate=".concat(P.bitrate," downloadTime=").concat(w," currentBuffer=").concat(_," nextBuffer=").concat(L)),(P.bitrate>i-1e4||N)&&P.bitrate!==s&&(M[0]=100);var x=h(O,[E,0,0,0],M);(null===A||x<A)&&(A=x,I=P.qualityIndex,k=P)}var F=Math.abs(S.bitrate-k.bitrate)/r;return m(S,b,[E,d,C,F]),m(k,b,[E,0,0,F]),I},reset:function(){c()}},t=Object(i.default)(d).getInstance().getLogger(e),c(),e}a.__dashjs_factory_name="LearningAbrController",t.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/rules/abr/lolp/QoeInfo.js");function a(){var e,t,n,r,a;function s(){t=null,n=null,r=null,a=null}function o(e,t,n,r){var a=new i.default;return a.type=e,a.weights.bitrateReward=t||1,a.weights.bitrateSwitchPenalty=1,a.weights.rebufferPenalty=n||1e3,a.weights.latencyPenalty=[],a.weights.latencyPenalty.push({threshold:1.1,penalty:.05*r}),a.weights.latencyPenalty.push({threshold:1e8,penalty:.1*n}),a.weights.playbackSpeedPenalty=r||200,a}function u(e,t,n,r,i){i.bitrateWSum+=i.weights.bitrateReward*e,i.lastBitrate&&(i.bitrateSwitchWSum+=i.weights.bitrateSwitchPenalty*Math.abs(e-i.lastBitrate)),i.lastBitrate=e,i.rebufferWSum+=i.weights.rebufferPenalty*t;for(var a=0;a<i.weights.latencyPenalty.length;a++){var s=i.weights.latencyPenalty[a];if(n<=s.threshold){i.latencyWSum+=s.penalty*n;break}}i.playbackSpeedWSum+=i.weights.playbackSpeedPenalty*Math.abs(1-r),i.totalQoe=i.bitrateWSum-i.bitrateSwitchWSum-i.rebufferWSum-i.latencyWSum-i.playbackSpeedWSum}return e={setupPerSegmentQoe:function(e,i,s){t=o("segment",e,i,s),n=e,r=i,a=s},logSegmentMetrics:function(e,n,r,i){t&&u(e,n,r,i,t)},getPerSegmentQoe:function(){return t},calculateSingleUseQoe:function(e,t,i,s){var l=null;return n&&r&&a&&(l=o("segment",n,r,a)),l?(u(e,t,i,s,l),l.totalQoe):0},reset:function(){s()}},s(),e}a.__dashjs_factory_name="LoLpQoeEvaluator",t.default=r.default.getClassFactory(a)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(e,t,n){n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/rules/abr/lolp/LearningAbrController.js"),s=n("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),o=n("./src/streaming/rules/SwitchRequest.js"),u=n("./src/streaming/constants/MetricsConstants.js"),l=n("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),d=n("./src/streaming/constants/Constants.js");function c(e){var t,n,i,c,f=(e=e||{}).dashMetrics,h=this.context;return n={getMaxIndex:function(e){try{var n=Object(o.default)(h).create(),r=e.getMediaInfo().type,a=e.getAbrController(),s=e.getStreamInfo(),p=a.getQualityFor(r,s.id),m=e.getMediaInfo(),g=f.getCurrentBufferState(r),y=e.getScheduleController(),v=f.getCurrentBufferLevel(r,!0),_=s&&s.manifestInfo?s.manifestInfo.isDynamic:null,T=y.getPlaybackController(),b=T.getCurrentLiveLatency();if(!e.useLoLPABR()||r===d.default.AUDIO)return n;b||(b=0);var E=T.getPlaybackRate(),S=a.getThroughputHistory().getSafeAverageThroughput(r,_);if(t.debug("Throughput ".concat(Math.round(S)," kbps")),isNaN(S)||!g)return n;if(a.getAbandonmentStateFor(s.id,r)===u.default.ABANDON_LOAD)return n;for(var w=m.bitrateList,C=e.getRepresentationInfo().fragmentDuration,A=w[0].bandwidth/1e3,I=w[w.length-1].bandwidth/1e3,k=0;k<w.length;k++){var R=w[k].bandwidth/1e3;R>I?I=R:R<A&&(A=R)}var P=w[p].bandwidth/1e3,D=f.getCurrentHttpRequest(r,!0),O=(D.tresponse.getTime()-D.trequest.getTime())/1e3,M=O>C?O-C:0;c.setupPerSegmentQoe(C,I,A),c.logSegmentMetrics(P,M,b,E);var L=Object(l.default)(h).create({targetLatency:1.5,bufferMin:.3,segmentDuration:C,qoeEvaluator:c});return n.quality=i.getNextQuality(m,1e3*S,b,v,E,p,L),n.reason={throughput:S,latency:b},n.priority=o.default.PRIORITY.STRONG,y.setTimeToLoadDelay(0),n.quality!==p&&console.log("[TgcLearningRule]["+r+"] requesting switch to index: ",n.quality,"Average throughput",Math.round(S),"kbps"),n}catch(e){throw e}},reset:function(){i.reset(),c.reset()}},t=Object(r.default)(h).getInstance().getLogger(n),i=Object(a.default)(h).create(),c=Object(s.default)(h).create(),n}c.__dashjs_factory_name="LoLPRule",t.default=i.default.getClassFactory(c)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t,n,r,i,a,s,o=e.targetLatency,u=e.bufferMin,l=e.segmentDuration,d=e.qoeEvaluator;function c(){return l}function f(e,t){var n=c();return t>n?e-n:e+n-t}return t={getMinBuffer:function(){return u},getSegmentDuration:c,getNextBufferWithBitrate:function(e,t,n){return f(t,e*l/n)},getNextBuffer:f,findWeightVector:function(e,t,i,a,s,c){var h=null,p=null,m=null,g=Math.abs(t-r);return e.forEach((function(e){n.forEach((function(n){n[0];var r=n[1],a=n[2],y=(n[3],e.bitrate*l/s),v=f(i,y),_=(0===a?10:1/a)*Math.max(1e-5,y-v),T=(0===r?10:1/r)*e.state.latency,b=d.calculateSingleUseQoe(e.bitrate,_,T,c);(null===h||b>h)&&function(e,t,n){return!(e>o+n)&&t>=u}(t,v,g)&&(h=b,p=n,m=e.bitrate)}))})),null===p&&null===m&&(p=-1),r=t,p}},4,a=(i=[.2,.4,.6,.8,1]).map((function(e){return[e]})),s=function e(t,n,r){if(r===n)return t;for(var a=t.length,s=0;s<a;s++)for(var o=t.shift(),u=0;u<i.length;u++)t.push(o.concat(i[u]));return e(t,n,r+1)},n=s(a,4,1),r=0,t}i.__dashjs_factory_name="LoLpWeightSelector",t.default=r.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e=0;function t(e){for(var t="",n=0;n<e.length;++n)t+=e[n].uchar;return t.length-t.replace(/^\s+/,"").length}function n(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function i(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(e){return e.replace(/^\s+/g,"")}function s(e){return e.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(r,o,u,l){var d,c,f=null,h=!1,p=-1,m={start:o,end:u,spans:[]},g="style_cea608_white_black",y={},v={},_=[];for(d=0;d<15;++d){var T=l.rows[d],b="",E=null;if(!1===T.isEmpty()){var S=t(T.chars);null===f&&(f={x:S,y1:d,y2:d+1,p:[]}),S!==p&&h&&(f.p.push(m),m={start:o,end:u,spans:[]},f.y2=d,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===y.hasOwnProperty(f.name)?(_.push(f),y[f.name]=f):y[f.name].p.contat(f.p),f={x:S,y1:d,y2:d+1,p:[]});for(var w=0;w<T.chars.length;++w){var C=T.chars[w],A=C.penState;if(null===E||!A.equals(E)){b.trim().length>0&&(m.spans.push({name:g,line:b,row:d}),b="");var I="style_cea608_"+A.foreground+"_"+A.background;A.underline&&(I+="_underline"),A.italics&&(I+="_italics"),v.hasOwnProperty(I)||(v[I]=JSON.parse(JSON.stringify(A))),E=A,g=I}b+=C.uchar}b.trim().length>0&&m.spans.push({name:g,line:b,row:d}),h=!0,p=S}else h=!1,p=-1,f&&(f.p.push(m),m={start:o,end:u,spans:[]},f.y2=d,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===y.hasOwnProperty(f.name)?(_.push(f),y[f.name]=f):y[f.name].p.contat(f.p),f=null)}f&&(f.p.push(m),f.y2=d+1,f.name="region_"+f.x+"_"+f.y1+"_"+f.y2,!1===y.hasOwnProperty(f.name)?(_.push(f),y[f.name]=f):y[f.name].p.contat(f.p),f=null);var k=[];for(d=0;d<_.length;++d){var R=_[d],P="sub_cea608_"+e++,D=document.createElement("div");D.id=P;var O=n(R);D.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+O;var M=document.createElement("div");M.className="paragraph bodyStyle",M.style.cssText=i(r);var L=document.createElement("div");L.className="cueUniWrapper",L.style.cssText="unicode-bidi: normal; direction: ltr;";for(var N=0;N<R.p.length;++N){var x=R.p[N],F=0;for(c=0;c<x.spans.length;++c){var U=x.spans[c];if(U.line.length>0){if(0!==c&&F!=U.row){var j=document.createElement("br");j.className="lineBreak",L.appendChild(j)}var B=!1;F===U.row&&(B=!0),F=U.row;var V=v[U.name],q=document.createElement("span");q.className="spanPadding "+U.name+" customSpanColor",q.style.cssText=i(r,V),0!==c&&B?c===x.spans.length-1?q.textContent=s(U.line):q.textContent=U.line:x.spans.length>1&&c<x.spans.length-1&&U.row===x.spans[c+1].row?q.textContent=a(U.line):q.textContent=U.line.trim(),L.appendChild(q)}}}M.appendChild(L),D.appendChild(M);var H={bodyStyle:["%",90]};for(var G in v)v.hasOwnProperty(G)&&(H[G]=["%",90]);k.push({type:"html",start:o,end:u,cueHTMLElement:D,cueID:P,cellResolution:[32,15],isFromCEA608:!0,fontSize:H,lineHeight:{},linePadding:{}})}return k}}}i.__dashjs_factory_name="EmbeddedTextHtmlRender",t.default=r.default.getSingletonFactory(i)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/utils/InitCache.js"),o=n("./src/streaming/SourceBufferSink.js"),u=n("./src/streaming/vo/DashJSError.js"),l=n("./src/core/errors/Errors.js"),d="NotFragmentedTextBufferController";function c(e){e=e||{};var t,n,a,c,f,h,p=this.context,m=Object(r.default)(p).getInstance(),g=e.textController,y=e.errHandler,v=e.streamInfo,_=e.type;function T(e){c=e}function b(e){var t,r;n!==e&&(n=e)&&(t=i.default.BUFFERING_COMPLETED,r={},m.trigger(t,r,{streamId:v.id,mediaType:_}))}function E(e){e.chunk.bytes&&!n&&(h.save(e.chunk),f.append(e.chunk),b(!0))}return t={initialize:function(e){T(e)},getStreamId:function(){return v.id},getType:function(){return _},getBufferControllerType:function(){return d},createBufferSink:function(e){return new Promise((function(t,n){try{(f=Object(o.default)(p).create({mediaSource:c,textController:g,eventBus:m})).initializeForFirstUse(v,e),a||(f.getBuffer()&&"function"==typeof f.getBuffer().initialize&&f.getBuffer().initialize(),a=!0),t(f)}catch(e){y.error(new u.default(l.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,l.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+_)),n(e)}}))},getBuffer:function(){return f},getBufferLevel:function(){return 0},getRangeAt:function(){return null},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:T,getMediaSource:function(){return c},appendInitSegmentFromCache:function(e){return null!==h.extract(v.id,e)},getIsBufferingCompleted:function(){return n},setIsBufferingCompleted:b,getIsPruningInProgress:function(){return!1},reset:function(e){m.off(i.default.INIT_FRAGMENT_LOADED,E,t),!e&&f&&(f.abort(),f.reset(),f=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return n=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},a=!1,c=null,n=!1,h=Object(s.default)(p).getInstance(),m.on(i.default.INIT_FRAGMENT_LOADED,E,t),t}c.__dashjs_factory_name=d,t.default=a.default.getClassFactory(c)},"./src/streaming/text/TextController.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/FactoryMaker.js"),a=n("./src/streaming/text/TextSourceBuffer.js"),s=n("./src/streaming/text/TextTracks.js"),o=n("./src/streaming/utils/VTTParser.js"),u=n("./src/streaming/utils/TTMLParser.js"),l=n("./src/core/EventBus.js"),d=n("./src/core/events/Events.js"),c=n("./src/streaming/MediaPlayerEvents.js"),f=n("./src/streaming/utils/SupervisorTools.js");function h(e){var t,n,i,h,p,m,g,y,v,_,T,b,E,S=this.context,w=e.adapter,C=e.errHandler,A=e.manifestModel,I=e.mediaController,k=e.videoModel,R=e.settings;function P(e){var t=e.tracks,r=e.index,i=e.streamId;!1===R.get().streaming.text.defaultEnabled&&!O()||E?M(i,-1):(y&&t.some((function(e,t){if(I.matchSettings(y,e))return M(i,t),r=t,!0})),_=!1),n[i].lastEnabledIndex=r,g.trigger(c.default.TEXT_TRACKS_ADDED,{enabled:O(),index:r,tracks:t,streamId:i}),b=!0}function D(e){if(!v&&e&&e.newMediaInfo){var t=e.newMediaInfo;t.type===r.default.TEXT&&(y={lang:t.lang,role:t.roles[0],index:t.index,codec:t.codec,accessibility:t.accessibility[0]})}}function O(){var e=!0;return _&&!T&&(e=!1),e}function M(e,t){(_=-1===t)&&I&&I.saveTextSettingsDisabled();var n=L(e);if(n!==t&&h[e]){h[e].setModeForTrackIdx(n,r.default.TEXT_HIDDEN),h[e].setCurrentTrackIdx(t),h[e].setModeForTrackIdx(t,r.default.TEXT_SHOWING);var a=h[e].getCurrentTrackInfo();a&&a.isFragmented&&!a.isEmbedded?function(e,t,n){if(i[e])for(var a=i[e].getConfig().fragmentedTracks,s=0;s<a.length;s++){var o=a[s];if(t.lang===o.lang&&(o.id?t.id===o.id:t.index===o.index)){var u=I.getCurrentTrackFor(r.default.TEXT,e);(o.id?u.id!==o.id:u.index!==o.index)?(h[e].deleteCuesFromTrackIdx(n),i[e].setCurrentFragmentedTrackIdx(s)):-1===n&&g.trigger(d.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:e,mediaType:r.default.TEXT})}}}(e,a,n):a&&!a.isFragmented&&function(e,t){g.trigger(d.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:t},{streamId:e,mediaType:r.default.TEXT})}(e,a),I.setTrack(a)}}function L(e){return h[e].getCurrentTrackIdx()}function N(){i={},h={},n={},_=!0,b=!1,E=!1}return t={deactivateStream:function(e){if(e){var t=e.id;i[t]&&i[t].resetMediaInfos(),h[t]&&h[t].deleteAllTextTracks()}},initialize:function(){g.on(d.default.CURRENT_TRACK_CHANGED,D,t),g.on(d.default.TEXT_TRACKS_QUEUE_INITIALIZED,P,t)},initializeForStream:function(e){var t=e.id,r=Object(s.default)(S).create({videoModel:k,streamInfo:e});r.initialize(),h[t]=r;var o=Object(a.default)(S).create({errHandler:C,adapter:w,manifestModel:A,mediaController:I,videoModel:k,textTracks:r,vttParser:p,ttmlParser:m,streamInfo:e});o.initialize(),i[t]=o,n[t]={},n[t].lastEnabledIndex=-1},createTracks:function(e){var t=e.id;h[t]&&h[t].createTracks()},getTextSourceBuffer:function(e){var t=e.id;if(i&&i[t])return i[t]},getAllTracksAreDisabled:function(){return _},addEmbeddedTrack:function(e,t){var n=e.id;i[n]&&i[n].addEmbeddedTrack(t)},setInitialSettings:function(e){y=e,v=!0},enableText:function(e,t){Object(f.checkParameterType)(t,"boolean"),O()!==t&&(t&&M(e,n[e].lastEnabledIndex),t||(n[e].lastEnabledIndex=L(e),b?M(e,-1):E=!0))},isTextEnabled:O,setTextTrack:M,getCurrentTrackIdx:L,enableForcedTextStreaming:function(e){Object(f.checkParameterType)(e,"boolean"),T=e},addMediaInfosToBuffer:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=e.id;i[a]&&i[a].addMediaInfos(t,n,r)},reset:function(){N(),g.off(d.default.CURRENT_TRACK_CHANGED,D,t),g.off(d.default.TEXT_TRACKS_QUEUE_INITIALIZED,P,t),Object.keys(i).forEach((function(e){i[e].resetEmbedded(),i[e].reset()}))}},y=null,T=!1,b=!1,v=!1,E=!1,p=Object(o.default)(S).getInstance(),m=Object(u.default)(S).getInstance(),g=Object(l.default)(S).getInstance(),N(),t}h.__dashjs_factory_name="TextController",t.default=i.default.getClassFactory(h)},"./src/streaming/text/TextSourceBuffer.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/streaming/vo/metrics/HTTPRequest.js"),a=n("./src/streaming/vo/TextTrackInfo.js"),s=n("./src/streaming/utils/BoxParser.js"),o=n("./src/streaming/utils/CustomTimeRanges.js"),u=n("./src/core/FactoryMaker.js"),l=n("./src/core/Debug.js"),d=n("./src/streaming/text/EmbeddedTextHtmlRender.js"),c=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),f=n.n(c),h=n("./externals/cea608-parser.js"),p=n.n(h),m=n("./src/core/EventBus.js"),g=n("./src/core/events/Events.js"),y=n("./src/streaming/vo/DashJSError.js"),v=n("./src/core/errors/Errors.js");function _(e){var t,n,u,c,h,_,T,b,E,S,w,C,A,I,k,R,P=e.errHandler,D=e.manifestModel,O=e.mediaController,M=e.videoModel,L=e.textTracks,N=e.vttParser,x=e.ttmlParser,F=e.streamInfo,U=this.context,j=Object(m.default)(U).getInstance(),B=!1;function V(){_=null,b=NaN,E=[],S=null,T=!1,h=[],c=null}function q(e){var t=new a.default;for(var n in e)t[n]=e[n];t.labels=e.labels,t.defaultTrack=function(e){var t=!1;return C.length>1&&e.isEmbedded?t=e.id&&e.id===r.default.CC1:1===C.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===C.length&&(t=e.index===h[0].index),t}(e),t.isFragmented=e.isFragmented,t.isEmbedded=!!e.isEmbedded,t.isTTML=function(e){return e.codec&&e.codec.search(r.default.STPP)>=0||e.mimeType&&e.mimeType.search(r.default.TTML)>=0}(e),t.kind=function(e,t){var n=e.roles&&e.roles.length>0?t[e.roles[0]]:t.caption;return n===t.caption||n===t.subtitle?n:t.caption}(e,{subtitle:"subtitles",caption:"captions"}),L.addTextTrack(t)}function H(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&z(t.bytes,t)}function G(e){w=e}function z(e,a){var s=a.mediaInfo,o=s.type,l=s.mimeType,d=s.codec||l;d?-1!==s.codec.indexOf("application/mp4")?function(e,i,a){var s;if("InitializationSegment"===i.segmentType)T=!0,b=u.getMediaTimescaleFromMoov(e);else{if(!T)return;(s=u.getSamplesInfo(e).sampleList).length>0&&(S=s[0].cts-i.start*b),a.search(r.default.STPP)>=0?function(e,i,a){var s,o;for(c=null!==c?c:Y(a),s=0;s<i.length;s++){var u=i[s],l=u.cts,d=K(),h=d+l/b,p=h+u.duration/b;t.buffered.add(h,p);var m=new DataView(e,u.offset,u.subSizes[0]),g=f.a.Utils.dataViewToString(m,r.default.UTF8),y=[],v=u.offset+u.subSizes[0];for(o=1;o<u.subSizes.length;o++){var T=new Uint8Array(e,v,u.subSizes[o]),E=String.fromCharCode.apply(null,T);y.push(E),v+=u.subSizes[o]}try{var S=D.getValue().ttmlTimeIsRelative?l/b:0,C=c.parse(g,S,l/b,(l+u.duration)/b,y);L.addCaptions(w,d,C)}catch(e){_.removeExecutedRequestsBeforeTime(),this.remove(),n.error("TTML parser error: "+e.message)}}}(e,s,a):function(e,r){var i,a,s,o=[];for(i=0;i<r.length;i++){var u=r[i];u.cts-=S;var l=K()+u.cts/b,d=l+u.duration/b;t.buffered.add(l,d);var c=e.slice(u.offset,u.offset+u.size),h=f.a.parseBuffer(c);for(a=0;a<h.boxes.length;a++){var p=h.boxes[a];if(n.debug("VTT box1: "+p.type),"vtte"!==p.type&&"vttc"===p.type)for(n.debug("VTT vttc boxes.length = "+p.boxes.length),s=0;s<p.boxes.length;s++){var m=p.boxes[s];if(n.debug("VTT box2: "+m.type),"payl"===m.type){var g=m.cue_text;n.debug("VTT cue_text = "+g);var y=u.cts/b,v=(u.cts+u.duration)/b;o.push({start:y,end:v,data:g,styles:{}}),n.debug("VTT "+y+"-"+v+" : "+g)}}}}o.length>0&&L.addCaptions(w,0,o)}(e,s)}}(e,a,d):o===r.default.VIDEO?function(e,t){var r,a;if(t.segmentType===i.HTTPRequest.INIT_SEGMENT_TYPE)0===A&&(A=u.getMediaTimescaleFromMoov(e));else if(t.segmentType===i.HTTPRequest.MEDIA_SEGMENT_TYPE){if(0===A)return void n.warn("CEA-608: No timescale for embeddedTextTrack yet");var s=(a=u.getSamplesInfo(e)).lastSequenceNumber;if(k[0]||k[1]||function(){for(var e,t=0;t<C.length;t++){if(-1===(e=L.getTrackIdxForId(C[t].id)))return void n.warn("CEA-608: data before track is ready.");var r=W(e);k[t]=new p.a.Cea608Parser(t+1,{newCue:r},null)}}(),A){if(null!==I&&s!==I+a.numSequences)for(r=0;r<k.length;r++)k[r]&&k[r].reset();for(var o=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],s=p.a.findCea608Nalus(r,a.offset,a.size),o=null,u=0,l=0;l<s.length;l++)for(var d=p.a.extractCea608DataFromRange(r,s[l]),c=0;c<2;c++)if(d[c].length>0){a.cts!==o?u=0:u+=1;var f=K();n.fields[c].push([a.cts+f*A,d[c],u]),o=a.cts}return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}(e,a.sampleList),l=0;l<k.length;l++){var d=o.fields[l],c=k[l];if(c)for(r=0;r<d.length;r++)c.addData(d[r][0]/A,d[r][1])}I=s}}}(e,a):function(e,n,i){var a,s,o=new DataView(e,0,e.byteLength);s=f.a.Utils.dataViewToString(o,r.default.UTF8);try{a=Y(i).parse(s,0),L.addCaptions(L.getCurrentTrackIdx(),0,a),t.buffered&&t.buffered.add(n.start,n.end)}catch(e){P.error(new y.default(v.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,v.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,s))}}(e,a,d):n.error("No text type defined")}function W(e){return function(t,n,r){var i;(i=M.getTTMLRenderingDiv()?R.createHTMLCaptionsFromScreen(M.getElement(),t,n,r):[{start:t,end:n,data:r.getDisplayText(),styles:{}}])&&L.addCaptions(e,0,i)}}function K(){return isNaN(t.timestampOffset)?0:t.timestampOffset}function Y(e){var t;return e.search(r.default.VTT)>=0?t=N:(e.search(r.default.TTML)>=0||e.search(r.default.STPP)>=0)&&(t=x),t}function X(e){C.forEach((function(t){var n=L.getTrackIdxForId(t.id);n>=0&&L.deleteCuesFromTrackIdx(n,e.from,e.to)}))}return t={initialize:function(){B||(C=[],w=null,A=0,k=[],I=null,B=!0,R=Object(d.default)(U).getInstance(),j.on(g.default.VIDEO_CHUNK_RECEIVED,H,t),j.on(g.default.BUFFER_CLEARED,X,t))},addMediaInfos:function(e,n,i){if(h=h.concat(n),e===r.default.TEXT&&n[0].isFragmented&&!n[0].isEmbedded){_=i,t.buffered=Object(o.default)(U).create(),E=O.getTracksFor(r.default.TEXT,F.id).filter((function(e){return e.isFragmented}));for(var a=O.getCurrentTrackFor(r.default.TEXT,F.id),s=0;s<E.length;s++)if(E[s]===a){G(s);break}}for(var u=0;u<n.length;u++)q(n[u])},resetMediaInfos:function(){h=[]},getStreamId:function(){return F.id},append:z,abort:function(){},addEmbeddedTrack:function(e){if(B&&e)if(e.id===r.default.CC1||e.id===r.default.CC3){for(var t=0;t<C.length;t++)if(C[t].id===e.id)return;C.push(e)}else n.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){j.off(g.default.VIDEO_CHUNK_RECEIVED,H,t),j.off(g.default.BUFFER_CLEARED,X,t),L&&L.deleteAllTextTracks(),B=!1,C=[],k=[null,null],I=null},getConfig:function(){return{fragmentModel:_,fragmentedTracks:E,videoModel:M}},setCurrentFragmentedTrackIdx:G,remove:function(e,n){void 0===e&&e===n&&(e=t.buffered.start(0),n=t.buffered.end(t.buffered.length-1)),t.buffered.remove(e,n),L.deleteCuesFromTrackIdx(w,e,n)},reset:function(){V(),h=[],u=null}},n=Object(l.default)(U).getInstance().getLogger(t),u=Object(s.default)(U).getInstance(),V(),t}_.__dashjs_factory_name="TextSourceBuffer",t.default=u.default.getClassFactory(_)},"./src/streaming/text/TextTracks.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/streaming/MediaPlayerEvents.js"),o=n("./src/core/FactoryMaker.js"),u=n("./src/core/Debug.js"),l=n("./node_modules/imsc/src/main/js/main.js");function d(e){var t,n,o,d,c,f,h,p,m,g,y,v,_,T,b,E,S,w=this.context,C=Object(i.default)(w).getInstance(),A=e.videoModel,I=e.streamInfo;function k(e,t,n,r,i,a){var s=0,o=0;e/t>n/r?s=(o=t)/r*n:o=(s=e)/n*r;var u,l,d=0,c=0;return s/o>i?(c=o,d=o*i):(d=s,c=s/i),u=(e-d)/2,l=(t-c)/2,a?{x:u+.1*d,y:l+.1*c,w:.8*d,h:.8*c}:{x:u,y:l,w:d,h:c}}function R(e,t){var n=A.getClientWidth(),r=A.getClientHeight(),i=A.getVideoWidth(),a=A.getVideoHeight(),o=A.getVideoRelativeOffsetTop(),u=A.getVideoRelativeOffsetLeft();if(0!==i&&0!==a){var l=i/a,d=!1;e.isFromCEA608&&(l=3.5/3,d=!0);var c=k.call(this,n,r,i,a,l,d),f=c.w,v=c.h,b=c.x,S=c.y;if(f!=m||v!=g||b!=h||S!=p||t){if(h=b+u,p=S+o,m=f,g=v,y){var w=y.style;w&&(w.left=h+"px",w.top=p+"px",w.width=m+"px",w.height=g+"px",w.zIndex=_&&document[_]||T?E:null,C.trigger(s.default.CAPTION_CONTAINER_RESIZE))}var I=e.activeCues;if(I)for(var R=I.length,P=0;P<R;++P){var D=I[P];D.scaleCue(D)}}}}function P(e){var t,n,r,i,a,s=m,o=g;if(e.cellResolution){var u=[s/e.cellResolution[0],o/e.cellResolution[1]];if(e.linePadding)for(t in e.linePadding)if(e.linePadding.hasOwnProperty(t)){n=(e.linePadding[t]*u[0]).toString();for(var l=document.getElementsByClassName("spanPadding"),d=0;d<l.length;d++)l[d].style.cssText=l[d].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n),l[d].style.cssText=l[d].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.fontSize){for(t in e.fontSize)if(e.fontSize.hasOwnProperty(t)){"%"===e.fontSize[t][0]?r=e.fontSize[t][1]/100:"c"===e.fontSize[t][0]&&(r=e.fontSize[t][1]),n=(r*u[1]).toString(),a="defaultFontSize"!==t?document.getElementsByClassName(t):document.getElementsByClassName("paragraph");for(var c=0;c<a.length;c++)a[c].style.cssText=a[c].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}if(e.lineHeight)for(t in e.lineHeight)if(e.lineHeight.hasOwnProperty(t)){"%"===e.lineHeight[t][0]?i=e.lineHeight[t][1]/100:"c"===e.fontSize[t][0]&&(i=e.lineHeight[t][1]),n=(i*u[1]).toString(),a=document.getElementsByClassName(t);for(var f=0;f<a.length;f++)a[f].style.cssText=a[f].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+n)}}}if(e.isd){var h=document.getElementById(e.cueID);h&&y.removeChild(h),D(e)}}function D(e){if(y){var t=document.createElement("div");y.appendChild(t),b=Object(l.renderHTML)(e.isd,t,(function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),a=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(e.images[a])}if(r.test(t)){var s=r.exec(t)[1];return"data:image/png;base64,"+e.embeddedImages[s]}return null}),y.clientHeight,y.clientWidth,!1,(function(e){n.info("renderCaption :",e)}),b,!0),t.id=e.cueID,C.trigger(s.default.CAPTION_RENDERED,{captionDiv:t,currentTrackIdx:f})}}function O(e,t,i){var a=M(e),u=this;if(a&&Array.isArray(i)&&0!==i.length)for(var l=0;l<i.length;l++){var d=void 0,c=i[l];a.cellResolution=c.cellResolution,a.isFromCEA608=c.isFromCEA608,"html"!==c.type||!y||isNaN(c.start)||isNaN(c.end)?!c.data||isNaN(c.start)||isNaN(c.end)||(d=new o(c.start-t,c.end-t,c.data),c.styles&&(void 0!==c.styles.align&&"align"in d&&(d.align=c.styles.align),void 0!==c.styles.line&&"line"in d&&(d.line=c.styles.line),void 0!==c.styles.position&&"position"in d&&(d.position=c.styles.position),void 0!==c.styles.size&&"size"in d&&(d.size=c.styles.size)),d.onenter=function(){a.mode===r.default.TEXT_SHOWING&&C.trigger(s.default.CAPTION_RENDERED,{currentTrackIdx:f})}):((d=new o(c.start+t,c.end+t,"")).cueHTMLElement=c.cueHTMLElement,d.isd=c.isd,d.images=c.images,d.embeddedImages=c.embeddedImages,d.cueID=c.cueID,d.scaleCue=P.bind(u),d.cellResolution=c.cellResolution,d.lineHeight=c.lineHeight,d.linePadding=c.linePadding,d.fontSize=c.fontSize,y.style.left=h+"px",y.style.top=p+"px",y.style.width=m+"px",y.style.height=g+"px",d.onenter=function(){a.mode===r.default.TEXT_SHOWING&&(this.isd?(D(this),n.debug("Cue enter id:"+this.cueID)):(y.appendChild(this.cueHTMLElement),P.call(u,this),C.trigger(s.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:f})))},d.onexit=function(){if(y)for(var e=y.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(n.debug("Cue exit id:"+e[t].id),y.removeChild(e[t]),--t)});try{d?x(a,d)||a.addCue(d):n.error("impossible to display subtitles.")}catch(e){throw U(a),a.addCue(d),e}}}function M(e){return e>=0&&d[e]?A.getTextTrack(d[e].kind,d[e].id,d[e].lang,d[e].isTTML,d[e].isEmbedded):null}function L(e){var t=this;if(e!==f){var n=M(f=e);N.call(this,n),v&&(clearInterval(v),v=null),n&&"html"===n.renderingType&&(R.call(this,n,!0),window.ResizeObserver?(S=new window.ResizeObserver((function(){R.call(t,n,!0)}))).observe(A.getElement()):v=setInterval(R.bind(this,n),500))}}function N(e){V.call(this),e&&"html"===e.renderingType?j.call(this):B.call(this)}function x(e,t){if(!e.cues)return!1;for(var n=0;n<e.cues.length;n++)if(e.cues[n].startTime===t.startTime&&e.cues[n].endTime===t.endTime)return!0;return!1}function F(e,t,n){return(isNaN(t)||e.startTime>=t)&&(isNaN(n)||e.endTime<=n)}function U(e,t,n){if(e.cues)for(var r=e.cues,i=r.length-1;i>=0;i--)F(r[i],t,n)&&(r[i].onexit&&r[i].onexit(),e.removeCue(r[i]))}function j(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,r=A.getElement();try{r&&(r.id?t.insertRule("#"+r.id+"::cue {background: transparent}",0):0!==r.classList.length?t.insertRule("."+r.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){n.info(""+e.message)}}}function B(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function V(){if(y)for(;y.firstChild;)y.removeChild(y.firstChild)}return t={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(o=window.VTTCue||window.TextTrackCue,d=[],c=[],f=-1,h=0,p=0,m=0,g=0,y=null,v=null,T=!1,E=2147483647,b=null,void 0!==document.fullscreenElement?_="fullscreenElement":void 0!==document.webkitIsFullScreen?_="webkitIsFullScreen":document.msFullscreenElement?_="msFullscreenElement":document.mozFullScreen&&(_="mozFullScreen"))},getStreamId:function(){return I.id},addTextTrack:function(e){d.push(e)},addCaptions:O,createTracks:function(){d.sort((function(e,t){return e.index-t.index})),y=A.getTTMLRenderingDiv();for(var e,t,n,i,o,u,l=-1,h=0;h<d.length;h++){var p=(void 0,void 0,void 0,void 0,void 0,t=(e=d[h]).kind,n=void 0!==e.id?e.id:e.lang,i=e.lang,o=e.isTTML,u=e.isEmbedded,A.addTextTrack(t,n,i,o,u));c.push(p),d[h].defaultTrack&&(p.default=!0,l=h);var m=M(h);m&&(m.mode=r.default.TEXT_SHOWING,y&&(d[h].isTTML||d[h].isEmbedded)?m.renderingType="html":m.renderingType="default"),O(h,0,d[h].captionData),C.trigger(s.default.TEXT_TRACK_ADDED)}if(L.call(this,l),l>=0){C.on(s.default.PLAYBACK_METADATA_LOADED,(function e(){var t=M(l);t&&"html"===t.renderingType&&R.call(this,t,!0),C.off(s.default.PLAYBACK_METADATA_LOADED,e,this)}),this);for(var g=0;g<d.length;g++){var v=M(g);v&&(v.mode=g===l?r.default.TEXT_SHOWING:r.default.TEXT_HIDDEN)}}C.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:f,tracks:d,streamId:I.id})},getCurrentTrackIdx:function(){return f},setCurrentTrackIdx:L,getTrackIdxForId:function(e){for(var t=-1,n=0;n<d.length;n++)if(d[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return d[f]},setModeForTrackIdx:function(e,t){var n=M(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e,t,n){var r=M(e);r&&U(r,t,n)},deleteAllTextTracks:function(){for(var e=c?c.length:0,t=0;t<e;t++){var n=M(t);n&&U.call(this,n,I.start,I.start+I.duration)}c=[],d=[],v&&(clearInterval(v),v=null),S&&A&&(S.unobserve(A.getElement()),S=null),f=-1,V.call(this)},deleteTextTrack:function(e){A.removeChild(c[e]),c.splice(e,1)}},n=Object(u.default)(w).getInstance().getLogger(t),t}d.__dashjs_factory_name="TextTracks",t.default=o.default.getClassFactory(d)},"./src/streaming/thumbnail/ThumbnailController.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/constants/Constants.js"),a=n("./src/streaming/vo/Thumbnail.js"),s=n("./src/streaming/thumbnail/ThumbnailTracks.js"),o=n("./src/streaming/vo/BitrateInfo.js"),u=n("./src/dash/utils/SegmentsUtils.js");function l(e){var t,n,r=this.context,l=e.streamInfo;function d(e){n.setTrackByIndex(e)}function c(){n&&n.reset()}return t={getStreamId:function(){return l.id},initialize:function(){n.addTracks();var e=n.getTracks();e&&e.length>0&&d(0)},provide:function(e,t){if("function"==typeof t){var r,i,s=n.getCurrentTrack();if(!s||s.segmentDuration<=0||null==e)t(null);else{(i=n.getThumbnailRequestForTime(e))&&(s.segmentDuration=i.duration),r=e%s.segmentDuration;var o=Math.floor(r*s.tilesHor*s.tilesVert/s.segmentDuration),l=new a.default;if(l.width=Math.floor(s.widthPerTile),l.height=Math.floor(s.heightPerTile),l.x=Math.floor(o%s.tilesHor)*s.widthPerTile,l.y=Math.floor(o/s.tilesHor)*s.heightPerTile,"readThumbnail"in s)return s.readThumbnail(e,(function(e){l.url=e,t(l)}));if(i)l.url=i.url,s.segmentDuration=NaN;else{var d=Math.floor(e/s.segmentDuration);l.url=function(e,t){var n=t+e.startNumber,r=Object(u.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=Object(u.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration*e.timescale),r=Object(u.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),Object(u.unescapeDollarsInTemplate)(r)}(s,d)}t(l)}}},setTrackByIndex:d,getCurrentTrackIndex:function(){return n.getCurrentTrackIndex()},getBitrateList:function(){var e=n.getTracks(),t=0;return e.map((function(e){var n=new o.default;return n.mediaType=i.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))},reset:c},c(),n=Object(s.default)(r).create({streamInfo:l,adapter:e.adapter,baseURLController:e.baseURLController,timelineConverter:e.timelineConverter,debug:e.debug,eventBus:e.eventBus,events:e.events,dashConstants:e.dashConstants,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController}),t}l.__dashjs_factory_name="ThumbnailController",t.default=r.default.getClassFactory(l)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(e,t,n){n.r(t),n.d(t,"THUMBNAILS_SCHEME_ID_URIS",(function(){return h}));var r=n("./src/streaming/constants/Constants.js"),i=n("./src/dash/constants/DashConstants.js"),a=n("./src/core/FactoryMaker.js"),s=n("./src/streaming/vo/ThumbnailTrackInfo.js"),o=n("./src/streaming/utils/URLUtils.js"),u=n("./src/dash/utils/SegmentsUtils.js"),l=n("./src/streaming/utils/BoxParser.js"),d=n("./src/streaming/net/XHRLoader.js"),c=n("./src/dash/DashHandler.js"),f=n("./src/dash/controllers/SegmentsController.js"),h=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function p(e){var t,n,a,p,m,g,y,v,_=this.context,T=e.adapter,b=e.baseURLController,E=e.streamInfo,S=e.timelineConverter,w=e.debug,C=e.eventBus,A=e.events,I=e.dashConstants,k=Object(o.default)(_).getInstance();function R(e,t){var r=new s.default;r.id=e.id,r.bitrate=e.bandwidth,r.width=e.width,r.height=e.height,r.tilesHor=1,r.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){if(h.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(r.tilesHor=parseInt(t[0],10),r.tilesVert=parseInt(t[1],10))}})),t?g.updateSegmentData(e).then((function(t){!function(e,t,n){var r=[],i=function(e,t){var n,r,i,a,s=[],o=0;for(n=0,r=e.segments.length;n<r;n++)i=e.segments[n],(a=Object(u.getTimeBasedSegment)(S,T.getIsDynamic(),t,i.startTime,i.duration,i.timescale,i.media,i.mediaRange,o))&&(s.push(a),a=null,o++);return s}(n,t);t.segments=i,e.segmentDuration=t.segments[0].duration,e.readThumbnail=function(e,n){var i=null;r.some((function(t){if(t.start<=e&&t.end>e)return i=t.url,!0})),i?n(i):t.segments.some((function(i){if(i.mediaStartTime<=e&&i.mediaStartTime+i.duration>e){var a=b.resolve(t.path);return y.load({method:"get",url:a.url,request:{range:i.mediaRange,responseType:"arraybuffer"},onload:function(e){var t=v.getSamplesInfo(e.target.response),a=new Blob([e.target.response.slice(t.sampleList[0].offset,t.sampleList[0].offset+t.sampleList[0].size)],{type:"image/jpeg"}),s=window.URL.createObjectURL(a);r.push({start:i.mediaStartTime,end:i.mediaStartTime+i.duration,url:s}),n&&n(s)}}),!0}}))}}(r,e,t)})):(r.startNumber=e.startNumber,r.segmentDuration=e.segmentDuration,r.timescale=e.timescale,r.templateUrl=function(e){var t=k.isRelative(e.media)?k.resolve(e.media,b.resolve(e.path).url):e.media;return t?Object(u.replaceIDForTemplate)(t,e.id):""}(e)),r.tilesHor>0&&r.tilesVert>0&&(r.widthPerTile=r.width/r.tilesHor,r.heightPerTile=r.height/r.tilesVert,n.push(r))}function P(){n=[],p=-1,m=null}return t={getTracks:function(){return n},addTracks:function(){if(E&&T&&(m=T.getMediaInfoForType(E,r.default.IMAGE))){var e=T.getVoRepresentations(m);e&&e.length>0&&e.forEach((function(e){(e.segmentInfoType===i.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media||e.segmentInfoType===i.default.SEGMENT_TIMELINE)&&R(e),e.segmentInfoType===i.default.SEGMENT_BASE&&R(e,!0)})),n.length>0&&n.sort((function(e,t){return e.bitrate-t.bitrate}))}},reset:P,setTrackByIndex:function(e){n&&0!==n.length&&(e>=n.length&&(e=n.length-1),p=e)},getCurrentTrack:function(){return p<0?null:n[p]},getCurrentTrackIndex:function(){return p},getThumbnailRequestForTime:function(e){for(var t,r=T.getVoRepresentations(m),i=0;i<r.length;i++)if(n[p].id===r[i].id){t=r[i];break}return a.getSegmentRequestForTime(m,t,e)}},P(),y=Object(d.default)(_).create({}),v=Object(l.default)(_).getInstance(),g=Object(f.default)(_).create({events:A,eventBus:C,streamInfo:E,timelineConverter:S,dashConstants:I,dashMetrics:e.dashMetrics,segmentBaseController:e.segmentBaseController,type:r.default.IMAGE}),(a=Object(c.default)(_).create({streamInfo:E,type:r.default.IMAGE,timelineConverter:S,segmentsController:g,baseURLController:b,debug:w,eventBus:C,events:A,dashConstants:I,urlUtils:k})).initialize(!!T&&T.getIsDynamic()),t}p.__dashjs_factory_name="ThumbnailTracks",t.default=a.default.getClassFactory(p)},"./src/streaming/utils/BaseURLSelector.js":function(e,t,n){n.r(t);var r=n("./src/core/errors/Errors.js"),i=n("./src/core/EventBus.js"),a=n("./src/core/events/Events.js"),s=n("./src/streaming/controllers/BlacklistController.js"),o=n("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),u=n("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),l=n("./src/core/FactoryMaker.js"),d=n("./src/streaming/vo/DashJSError.js"),c=n("./src/streaming/utils/SupervisorTools.js");function f(){var e,t,n,l,f,h=this.context,p=Object(i.default)(h).getInstance();function m(){t.reset()}return e={chooseSelector:function(e){Object(c.checkParameterType)(e,"boolean"),f=e?l:n},select:function(e){if(e){var t=e.baseUrls,i=e.selectedIdx;if(!isNaN(i))return t[i];var s=f.select(t);return s?(e.selectedIdx=t.indexOf(s),s):(p.trigger(a.default.URL_RESOLUTION_FAILED,{error:new d.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(f===n&&m()))}},reset:m,setConfig:function(e){e.selector&&(f=e.selector)}},t=Object(s.default)(h).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),n=Object(u.default)(h).create({blacklistController:t}),l=Object(o.default)(h).create({blacklistController:t}),f=n,e}f.__dashjs_factory_name="BaseURLSelector",t.default=l.default.getClassFactory(f)},"./src/streaming/utils/BoxParser.js":function(e,t,n){n.r(t);var r=n("./src/core/Debug.js"),i=n("./src/streaming/utils/IsoFile.js"),a=n("./src/core/FactoryMaker.js"),s=n("./node_modules/codem-isoboxer/dist/iso_boxer.js"),o=n.n(s),u=n("./src/streaming/vo/IsoBoxSearchInfo.js");function l(){var e,t,n=this.context;function a(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=o.a.parseBuffer(e),r=Object(i.default)(n).create();return r.setData(t),r}function s(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function l(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:a,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new u.default(0,!1);for(var r,i=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<i.byteLength;){var o=s(i,n),d=l(i,n+4);if(0===o)break;n+o<=i.byteLength&&(e.indexOf(d)>=0?r=new u.default(n,!0,o):a=n+o),n+=o}return r||new u.default(a,!1)},getMediaTimescaleFromMoov:function(e){var t=a(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,r,i,s,o,u,l,d,c,f,h,p,m,g,y,v=a(e),_=v.getBoxes("moof"),T=v.getBoxes("mfhd");g=v.getBoxes("moof").length,m=T[T.length-1].sequence_number,n=0,s=[];var b=-1,E=-1;for(c=0;c<_.length;c++){var S=_[c],w=S.getChildBoxes("traf");for(l=0;l<w.length;l++){var C=w[l],A=C.getChildBox("tfhd"),I=C.getChildBox("tfdt");i=I.baseMediaDecodeTime;var k=C.getChildBoxes("trun"),R=C.getChildBoxes("subs");for(d=0;d<k.length;d++){var P=k[d];for(n=P.sample_count,p=(A.base_data_offset||0)+(P.data_offset||0),u=0;u<n;u++){t=void 0!==(o=P.samples[u]).sample_duration?o.sample_duration:A.default_sample_duration,r=void 0!==o.sample_size?o.sample_size:A.default_sample_size;var D={dts:i,cts:i+(void 0!==o.sample_composition_time_offset?o.sample_composition_time_offset:0),duration:t,offset:S.offset+p,size:r,subSizes:[r]};if(R)for(f=0;f<R.length;f++){var O=R[f];if(b<O.entry_count-1&&u>E&&(b++,E+=O.entries[b].sample_delta),u==E){D.subSizes=[];var M=O.entries[b];for(h=0;h<M.subsample_count;h++)D.subSizes.push(M.subsamples[h].subsample_size)}}s.push(D),p+=r,i+=t}}y=i-I.baseMediaDecodeTime}}return{sampleList:s,lastSequenceNumber:m,totalDuration:y,numSequences:g}},findInitRange:function(t){var n=null,r=a(t);if(!r)return n;var i=r.getBox("ftyp"),s=r.getBox("moov");return e.debug("Searching for initialization."),s&&s.isComplete&&(n=(i?i.offset:s.offset)+"-"+(s.offset+s.size-1),e.debug("Found the initialization.  Range: "+n)),n},parsePayload:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new u.default(0,!1);for(var r,i=t instanceof ArrayBuffer?new Uint8Array(t):t,a=0;n<i.byteLength;){var o=s(i,n),d=l(i,n+4);if(0===o)break;n+o<=i.byteLength&&(e.indexOf(d)>=0?r=new u.default(n,!0,o,d):a=n+o),n+=o}return r||new u.default(a,!1)}},e=Object(r.default)(n).getInstance().getLogger(t),t}l.__dashjs_factory_name="BoxParser",t.default=a.default.getSingletonFactory(l)},"./src/streaming/utils/Capabilities.js":function(e,t,n){n.r(t),n.d(t,"supportsMediaSource",(function(){return o}));var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/thumbnail/ThumbnailTracks.js"),a=n("./src/streaming/constants/Constants.js"),s=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function o(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t}function u(){var e,t,n;return e={setConfig:function(e){e&&e.settings&&(t=e.settings)},supportsMediaSource:o,supportsEncryptedMedia:function(){return n},supportsCodec:function(e,n){return n!==a.default.AUDIO&&n!==a.default.VIDEO?Promise.resolve(!0):function(e,n){return t.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(e.codec&&n===a.default.AUDIO||n===a.default.VIDEO&&e.codec&&e.width&&e.height&&e.bitrate&&e.framerate)}(e,n)?function(e,t){return new Promise((function(n){if(e&&e.codec){var r={type:"media-source"};r[t]={},r[t].contentType=e.codec,r[t].width=e.width,r[t].height=e.height,r[t].bitrate=parseInt(e.bitrate),r[t].framerate=parseFloat(e.framerate),navigator.mediaCapabilities.decodingInfo(r).then((function(e){n(e.supported)})).catch((function(){n(!1)}))}else n(!1)}))}(e,n):function(e){return new Promise((function(t){if(e&&e.codec){var n=e.codec;e.width&&e.height&&(n+=';width="'+e.width+'";height="'+e.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(n)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(n)?t(!0):t(!1)}else t(!1)}))}(e)},setEncryptedMediaSupported:function(e){n=e},supportsEssentialProperty:function(e){try{return-1!==i.THUMBNAILS_SCHEME_ID_URIS.indexOf(e.schemeIdUri)}catch(e){return!0}},codecRootCompatibleWithCodec:function(e,t){for(var n,r=e.split(".")[0],i=0===t.indexOf(r),a=0;a<s.length;a++)if(s[a].codec===r){n=s[a];break}return n?i||n.compatibleCodecs.some((function(e){return 0===t.indexOf(e)})):i}},n=!1,e}u.__dashjs_factory_name="Capabilities",t.default=r.default.getSingletonFactory(u)},"./src/streaming/utils/CapabilitiesFilter.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js");function s(){var e,t,n,r,s,o,u=this.context;function l(e,r){if(!r||!r.Period_asArray||0===r.Period_asArray.length)return Promise.resolve();var i=[];return r.Period_asArray.forEach((function(r){i.push(function(e,r){return new Promise((function(i){if(e&&e.AdaptationSet_asArray&&0!==e.AdaptationSet_asArray.length){var o=[];e.AdaptationSet_asArray.forEach((function(e){t.getIsTypeOf(e,r)&&o.push(function(e,r){return new Promise((function(i){if(e.Representation_asArray&&0!==e.Representation_asArray.length){var o=[],u=[];e.Representation_asArray.forEach((function(i,s){var l=t.getCodec(e,s,!1),d=function(e,t,n){switch(e){case a.default.VIDEO:return function(e,t){return{codec:t,width:e.width||null,height:e.height||null,framerate:e.frameRate||null,bitrate:e.bandwidth||null}}(t,n);case a.default.AUDIO:return function(e,t){var n=e.audioSamplingRate||null;return{codec:t,bitrate:e.bandwidth||null,samplerate:n}}(t,n);default:return null}}(r,i,l);u.push(d),o.push(n.supportsCodec(d,r))})),Promise.all(o).then((function(t){e.Representation_asArray=e.Representation_asArray.filter((function(e,n){return t[n]||s.debug("[Stream] Codec ".concat(u[n].codec," not supported ")),t[n]})),i()})).catch((function(){i()}))}else i()}))}(e,r))})),Promise.all(o).then((function(){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){var t=e.Representation_asArray&&e.Representation_asArray.length>0;return t||s.warn("AdaptationSet has been removed because of no supported Representation"),t})),i()})).catch((function(){i()}))}else i()}))}(r,e))})),Promise.all(i)}return e={setConfig:function(e){e&&(e.adapter&&(t=e.adapter),e.capabilities&&(n=e.capabilities),e.settings&&(r=e.settings))},filterUnsupportedFeatures:function(e){return new Promise((function(i){var u=[];u.push(l(a.default.VIDEO,e)),u.push(l(a.default.AUDIO,e)),Promise.all(u).then((function(){r.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(e){e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach((function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){var r=t.getEssentialPropertiesForRepresentation(e);if(r&&r.length>0)for(var i=0;i<r.length;){if(!n.supportsEssentialProperty(r[i]))return s.debug("[Stream] EssentialProperty not supported: "+r[i].schemeIdUri),!1;i+=1}return!0})),e.Representation_asArray&&e.Representation_asArray.length>0)}))}))}(e),function(e){o&&0!==o.length&&e&&e.Period_asArray&&0!==e.Period_asArray.length&&e.Period_asArray.forEach((function(e){e.AdaptationSet_asArray=e.AdaptationSet_asArray.filter((function(e){return!e.Representation_asArray||0===e.Representation_asArray.length||(e.Representation_asArray=e.Representation_asArray.filter((function(e){return!o.some((function(t){return!t(e)}))})),e.Representation_asArray&&e.Representation_asArray.length>0)}))}))}(e),i()})).catch((function(){i()}))}))},setCustomCapabilitiesFilters:function(e){o=e}},s=Object(i.default)(u).getInstance().getLogger(e),e}s.__dashjs_factory_name="CapabilitiesFilter",t.default=r.default.getSingletonFactory(s)},"./src/streaming/utils/CustomTimeRanges.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/SupervisorTools.js");function a(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return Object(i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return Object(i.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}a.__dashjs_factory_name="CustomTimeRanges",t.default=r.default.getClassFactory(a)},"./src/streaming/utils/DOMStorage.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/streaming/constants/Constants.js"),s=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],o="dashjs_?_bitrate",u="dashjs_?_settings",l="localStorage",d="lastBitrate",c="lastMediaSettings";function f(e){e=e||{};var t,n,r,f=this.context,h=e.settings;function p(e){if(void 0!==r)return r;var t;r=!1;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return n.warn("DOMStorage access denied: "+e.message),r}if(!t||e!==l&&"sessionStorage"!==e)return r;try{t.setItem("1","1"),t.removeItem("1"),r=!0}catch(e){n.warn("DOMStorage is supported, but cannot be used: "+e.message)}return r}function m(){var e=6e5;return Math.round((new Date).getTime()/e)*e}function g(e,t){return p(e)&&h.get().streaming[t+"CachingInfo"].enabled}function y(){if(!h)throw new Error(a.default.MISSING_CONFIG_ERROR)}return t={getSavedBitrateSettings:function(e){var t=NaN;if(y(),g(l,d)){var r=o.replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=h.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(i.bitrate);isNaN(s)||a?a&&localStorage.removeItem(r):(t=s,n.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(g(l,d)&&t){var r=o.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({bitrate:t.toFixed(3),timestamp:m()}))}catch(e){n.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(y(),g(l,c)){var n=u.replace(/\?/,e);try{var r=JSON.parse(localStorage.getItem(n))||{},i=(new Date).getTime()-parseInt(r.timestamp,10)>=h.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=r.settings,i&&(localStorage.removeItem(n),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(g(l,c)){var r=u.replace(/\?/,e);try{localStorage.setItem(r,JSON.stringify({settings:t,timestamp:m()}))}catch(e){n.error(e.message)}}}},n=Object(i.default)(f).getInstance().getLogger(t),p(l)&&s.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){n.error(e.message)}}})),t}f.__dashjs_factory_name="DOMStorage";var h=r.default.getSingletonFactory(f);t.default=h},"./src/streaming/utils/DefaultURLUtils.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e,t=/^[a-z][a-z0-9+\-_.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,a=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},s=function(e,t){var n=o;if(!t)return e;if(!d(e))return e;c(e)&&(n=u),f(e)&&(n=l);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)};function o(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){var t=e.match(i);return t?t[1]:""}function l(e){var n=e.match(t);return n?n[0]:""}function d(e){return!t.test(e)}function c(e){return d(e)&&"/"===e.charAt(0)}function f(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y"),e=a}catch(e){}finally{e=e||s}}(),{parseBaseUrl:o,parseOrigin:u,parseScheme:l,isRelative:d,isPathAbsolute:c,isSchemeRelative:f,isHTTPURL:function(e){return n.test(e)},isHTTPS:function(e){return r.test(e)},removeHostname:function(e){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(e)[2].substring(1)},resolve:function(t,n){return e(t,n)}}}i.__dashjs_factory_name="DefaultURLUtils",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/EBMLParser.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t;e=e||{};var n=new DataView(e.data),r=0;function i(e,t){var i=!0,a=0;if(void 0===t&&(t=!1),e.tag>16777215?(n.getUint32(r)!==e.tag&&(i=!1),a=4):e.tag>65535?(256*n.getUint16(r)+n.getUint8(r+2)!==e.tag&&(i=!1),a=3):e.tag>255?(n.getUint16(r)!==e.tag&&(i=!1),a=2):(n.getUint8(r)!==e.tag&&(i=!1),a=1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(r+=a),i}function a(e){var t=1,i=128,a=-1,s=0,o=n.getUint8(r),u=0;for(u=0;u<8;u+=1){if((o&i)===i){s=void 0===e?o&~i:o,a=u;break}i>>=1}for(u=0;u<a;u+=1,t+=1)s=s<<8|255&n.getUint8(r+t);return r+=t,s}return t={getPos:function(){return r},setPos:function(e){r=e},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var n;return i(e),n=a(),t[e.parse](n)},skipOverElement:function(e,t){var n,s=i(e,t);return s&&(n=a(),r+=n),s},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8}return t},getMatroskaUint:function(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t},moreData:function(){return r<n.byteLength}}}i.__dashjs_factory_name="EBMLParser",t.default=r.default.getClassFactory(i)},"./src/streaming/utils/ErrorHandler.js":function(e,t,n){n.r(t);var r=n("./src/core/EventBus.js"),i=n("./src/core/events/Events.js"),a=n("./src/core/FactoryMaker.js");function s(){var e=this.context,t=Object(r.default)(e).getInstance();return{error:function(e){t.trigger(i.default.ERROR,{error:e})}}}s.__dashjs_factory_name="ErrorHandler",t.default=a.default.getSingletonFactory(s)},"./src/streaming/utils/InitCache.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){var e={};return{save:function(t){var n=t.streamId,r=t.representationId;e[n]=e[n]||{},e[n][r]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}i.__dashjs_factory_name="InitCache",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/IsoFile.js":function(e,t,n){n.r(t);var r=n("./src/streaming/vo/IsoBox.js"),i=n("./src/core/FactoryMaker.js");function a(){var e;function t(t){var r=[];if(!t||!e||"function"!=typeof e.fetchAll)return r;for(var i,a=e.fetchAll(t),s=0,o=a.length;s<o;s++)(i=n(a[s]))&&r.push(i);return r}function n(e){if(!e)return null;var t=new r.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?n(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var n=t(e.boxes[e.boxes.length-1].type);return n.length>0?n[n.length-1]:null}}}a.__dashjs_factory_name="IsoFile",t.default=i.default.getClassFactory(a)},"./src/streaming/utils/ObjectUtils.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./node_modules/fast-deep-equal/index.js"),a=n.n(i);function s(){return{areEqual:function(e,t){return a()(e,t)}}}s.__dashjs_factory_name="ObjectUtils",t.default=r.default.getSingletonFactory(s)},"./src/streaming/utils/RequestModifier.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}i.__dashjs_factory_name="RequestModifier",t.default=r.default.getSingletonFactory(i)},"./src/streaming/utils/SupervisorTools.js":function(e,t,n){n.r(t),n.d(t,"checkParameterType",(function(){return a})),n.d(t,"checkInteger",(function(){return s})),n.d(t,"checkRange",(function(){return o})),n.d(t,"checkIsVideoOrAudioType",(function(){return u}));var r=n("./src/streaming/constants/Constants.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){if(i(e)!==t)throw r.default.BAD_ARGUMENT_ERROR}function s(e){if(null===e||isNaN(e)||e%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function o(e,t,n){if(e<t||e>n)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function u(e){if("string"!=typeof e||e!==r.default.AUDIO&&e!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js"),a=n("./src/core/EventBus.js"),s=n("./src/core/events/Events.js"),o=n("./node_modules/imsc/src/main/js/main.js"),u=n("./src/streaming/MediaPlayerEvents.js"),l=n("./src/streaming/constants/ConformanceViolationConstants.js");function d(){var e,t,n=this.context,r=Object(a.default)(n).getInstance(),d=0;return e={parse:function(e,n,i,a,c){var f,h,p,m="",g=[],y={},v={},_="",T="",b={onOpenTag:function(e,n,i){if(i[" imagetype"]&&!i[" imageType"]&&(r.trigger(u.default.CONFORMANCE_VIOLATION,{level:l.default.LEVELS.ERROR,event:l.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),i[" imageType"]=i[" imagetype"]),"image"===n&&("http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e||"http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"===e)){if(!i[" imageType"]||"PNG"!==i[" imageType"].value)return void t.warn("smpte-tt imageType != PNG. Discarded");_=i["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){_&&(v[_]=T.trim()),T="",_=""},onText:function(e){_&&(T+=e)}};if(!e)throw m="no ttml data to parse",new Error(m);y.data=e,r.trigger(s.default.TTML_TO_PARSE,y);var E=Object(o.fromXML)(y.data,(function(e){m=e}),b);r.trigger(s.default.TTML_PARSED,{ttmlString:y.data,ttmlDoc:E});var S,w=E.getMediaTimeEvents();for(p=0;p<w.length;p++){var C=Object(o.generateISD)(E,w[p],(function(e){m=e}));C.contents.some((function(e){return e.contents.length}))&&(f=w[p]+n<i?i:w[p]+n)<(h=w[p+1]+n>a?a:w[p+1]+n)&&g.push({start:f,end:h,type:"html",cueID:(void 0,S="cue_TTML_"+d,d++,S),isd:C,images:c,embeddedImages:v})}if(""!==m)throw t.error(m),new Error(m);return g}},t=Object(i.default)(n).getInstance().getLogger(e),e}d.__dashjs_factory_name="TTMLParser",t.default=r.default.getSingletonFactory(d)},"./src/streaming/utils/URLUtils.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/streaming/utils/DefaultURLUtils.js");function a(){var e,t=[],n=this.context;function r(n,r,i){var a=function(n){var r;for(r=0;r<t.length;r++)if(t[r].regex.test(n))return t[r].utils;return e}(i||r);return a&&"function"==typeof a[n]?a[n](r,i):e[n](r,i)}return e=Object(i.default)(n).getInstance(),{registerUrlRegex:function(e,n){t.push({regex:e,utils:n})},parseBaseUrl:function(e){return r("parseBaseUrl",e)},parseOrigin:function(e){return r("parseOrigin",e)},parseScheme:function(e){return r("parseScheme",e)},isRelative:function(e){return r("isRelative",e)},isPathAbsolute:function(e){return r("isPathAbsolute",e)},isSchemeRelative:function(e){return r("isSchemeRelative",e)},isHTTPURL:function(e){return r("isHTTPURL",e)},isHTTPS:function(e){return r("isHTTPS",e)},removeHostname:function(e){return r("removeHostname",e)},resolve:function(e,t){return r("resolve",e,t)}}}a.__dashjs_factory_name="URLUtils";var s=r.default.getSingletonFactory(a);t.default=s},"./src/streaming/utils/VTTParser.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js"),i=n("./src/core/Debug.js");function a(){var e,t,n,r,a,s,o=this.context;function u(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function l(e){var t=e.split(r),n=t[1].split(s);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:d(n)}}function d(e){var t={};return e.forEach((function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}})),t}function c(e,t){for(var n,i=t,a="",s="";""!==e[i]&&i<e.length;)i++;if((n=i-t)>1)for(var o=0;o<n;o++){if((s=e[t+o]).match(r)){a="";break}a+=s,o!==n-1&&(a+="\n")}else(s=e[t]).match(r)||(a=s);return a}return e={parse:function(e){var i,s,o=[];if(!e)return o;i=(e=e.split(n)).length,s=-1;for(var d=0;d<i;d++){var f=e[d];if(f.length>0&&"WEBVTT"!==f&&f.match(r)){var h=l(f),p=h.cuePoints,m=h.styles,g=c(e,d+1),y=u(p[0].replace(a,"")),v=u(p[1].replace(a,""));!isNaN(y)&&!isNaN(v)&&y>=s&&v>y?""!==g?(s=y,o.push({start:y,end:v,data:g,styles:m})):t.error("Skipping cue due to empty/malformed cue text"):t.error("Skipping cue due to incorrect cue timing")}}return o}},t=Object(i.default)(o).getInstance().getLogger(e),n=/(?:\r\n|\r|\n)/gm,r=/-->/,a=/(^[\s]+|[\s]+$)/g,s=/\s\b/g,e}a.__dashjs_factory_name="VTTParser",t.default=r.default.getSingletonFactory(a)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n,r=0;return e&&e.some((function(e,n){return r=n,!t.contains(e.serviceLocation)}))&&(n=e[r]),n}}}i.__dashjs_factory_name="BasicSelector",t.default=r.default.getClassFactory(i)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(e,t,n){n.r(t);var r=n("./src/core/FactoryMaker.js");function i(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t,n,r=0,i=[],a=0;if(n=e.sort((function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n})).filter((function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority})),n.length)return n.length>1&&(n.forEach((function(e){r+=e.dvb_weight,i.push(r)})),t=Math.floor(Math.random()*(r-1)),i.every((function(e,n){return a=n,!(t<e)}))),n[a]}((n=[],e.filter((function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&n.push(e.dvb_priority),!1)})).filter((function(e){return!n.length||!e.dvb_priority||-1===n.indexOf(e.dvb_priority)}))));var n}}}i.__dashjs_factory_name="DVBSelector",t.default=r.default.getClassFactory(i)},"./src/streaming/vo/BitrateInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},"./src/streaming/vo/DashJSError.js":function(e,t,n){n.r(t),t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null}},"./src/streaming/vo/DataChunk.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},"./src/streaming/vo/FragmentRequest.js":function(e,t,n){n.r(t);var r=n("./src/streaming/vo/metrics/HTTPRequest.js");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=t||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}var t,n;return t=e,(n=[{key:"isInitializationRequest",value:function(){return this.type&&this.type===r.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?r.HTTPRequest.INIT_SEGMENT_TYPE:r.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}])&&i(t.prototype,n),e}();a.ACTION_DOWNLOAD="download",a.ACTION_COMPLETE="complete",t.default=a},"./src/streaming/vo/HeadRequest.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).checkForExistenceOnly=!0,t}return o}(n("./src/streaming/vo/FragmentRequest.js").default);t.default=o},"./src/streaming/vo/IsoBox.js":function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var r=0;r<t.references.length;r++){var i={reference_type:t.references[r].reference_type,referenced_size:t.references[r].referenced_size,subsegment_duration:t.references[r].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=t.id,this.version=1===t.version?1:0,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var a=0,s=t.samples.length;a<s;a++){var o={sample_size:t.samples[a].sample_size,sample_duration:t.samples[a].sample_duration,sample_composition_time_offset:t.samples[a].sample_composition_time_offset};this.samples.push(o)}}}}var t,n;return t=e,(n=[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}])&&r(t.prototype,n),e}();t.default=i},"./src/streaming/vo/IsoBoxSearchInfo.js":function(e,t,n){n.r(t),t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r}},"./src/streaming/vo/MetricsList.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},"./src/streaming/vo/TextRequest.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/Constants.js");function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(u,e);var t,n,i=(t=u,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=o(t);if(n){var i=o(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return s(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this)).url=e||null,n.type=t||null,n.mediaType=r.default.STREAM,n.responseType="",n}return u}(n("./src/streaming/vo/FragmentRequest.js").default);t.default=u},"./src/streaming/vo/TextTrackInfo.js":function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}n.r(t);var o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(o,e);var t,n,r=(t=o,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=s(t);if(n){var i=s(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return a(this,e)});function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=r.call(this)).captionData=null,e.label=null,e.defaultTrack=!1,e.kind=null,e.isFragmented=!1,e.isEmbedded=!1,e.isTTML=null,e}return o}(n("./src/dash/vo/MediaInfo.js").default);t.default=o},"./src/streaming/vo/Thumbnail.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},"./src/streaming/vo/ThumbnailTrackInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},"./src/streaming/vo/URIFragmentData.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},"./src/streaming/vo/metrics/BufferLevel.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null}},"./src/streaming/vo/metrics/BufferState.js":function(e,t,n){n.r(t);var r=n("./src/streaming/constants/MetricsConstants.js");t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=r.default.BUFFER_EMPTY}},"./src/streaming/vo/metrics/DVRInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null}},"./src/streaming/vo/metrics/DroppedFrames.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null}},"./src/streaming/vo/metrics/HTTPRequest.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"HTTPRequest",(function(){return i})),n.d(t,"HTTPRequestTrace",(function(){return a}));var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null},a=function e(){r(this,e),this.s=null,this.d=null,this.b=[],this.t=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",i.LICENSE="license",i.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"ManifestUpdate",(function(){return i})),n.d(t,"ManifestUpdateStreamInfo",(function(){return a})),n.d(t,"ManifestUpdateRepresentationInfo",(function(){return s}));var i=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},a=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},s=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},"./src/streaming/vo/metrics/PlayList.js":function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"PlayList",(function(){return i})),n.d(t,"PlayListTrace",(function(){return a}));var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null}},"./src/streaming/vo/metrics/RequestsQueue.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]}},"./src/streaming/vo/metrics/SchedulingInfo.js":function(e,t,n){n.r(t),t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},0:function(e,t){},1:function(e,t){}}).default},e.exports=n()},r(i={exports:{}}),i.exports),p=(o=h)&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o;function m(e,t){var n=e.dash.mediaPlayer,r=n.getTracksFor("audio"),i=e.audioTracks();function a(e){return"dash-audio-"+e}function s(e,t){return e.find((function(e){return a(e.index)===t.id}))}i.length&&t.clearTracks(["audio"]);var o=n.getCurrentTrackFor("audio");r.forEach((function(t){var n,r;if(Array.isArray(t.labels))for(var s=0;s<t.labels.length;s++)if(t.labels[s].lang&&-1!==e.language().indexOf(t.labels[s].lang.toLowerCase())){n=t.labels[s];break}n?r=n.text:Array.isArray(t.labels)&&1===t.labels.length?r=t.labels[0].text:(r=t.lang,t.roles&&t.roles.length&&(r+=" ("+t.roles.join(", ")+")")),i.addTrack(new u.default.AudioTrack({enabled:t===o,id:a(t.index),kind:t.kind||"main",label:r,language:t.lang}))}));var l=function(){for(var e=0;e<i.length;e++){var t=i[e];if(t.enabled){var a=s(r,t);n.setCurrentTrack(a)}}};i.addEventListener("change",l),e.dash.mediaPlayer.on(p.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,(function(){i.removeEventListener("change",l)}))}function g(e,t){e.dash.mediaPlayer.on(p.MediaPlayer.events.PLAYBACK_METADATA_LOADED,m.bind(null,e,t))}function y(e,t,n){d().VTTCue&&!/\[native code\]/.test(d().VTTCue.toString())&&(d().VTTCue=!1);var r=[];if(t.featuresNativeTextTracks)u.default.log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");else{var i=e.dash.mediaPlayer;i.on(p.MediaPlayer.events.TEXT_TRACKS_ADDED,a),i.on(p.MediaPlayer.events.CAN_PLAY,(function(){i.off(p.MediaPlayer.events.TEXT_TRACKS_ADDED,a)}))}function a(t){t.index;var n=t.tracks;i.off(p.MediaPlayer.events.TEXT_TRACKS_ADDED,a),r.forEach(e.removeRemoteTextTrack.bind(e)),r=[],n.length&&(r=function(e,t,n){var r=[],i=n.map((function(t){var n;if(Array.isArray(t.labels))for(var r=0;r<t.labels.length;r++)if(t.labels[r].lang&&-1!==e.language().indexOf(t.labels[r].lang.toLowerCase())){n=t.labels[r];break}return{dashTrack:t,trackConfig:{label:n?n.text:Array.isArray(t.labels)&&1===t.labels.length?t.labels[0].text:t.lang||t.label,language:t.lang,srclang:t.lang,kind:t.kind}}})).map((function(t){var n=t.trackConfig,i=t.dashTrack;if(i.isTTML&&!e.getChild("TTMLTextTrackDisplay"))return null;var a=e.addRemoteTextTrack(n,!1);return r.push({textTrack:a.track,dashTrack:i}),a})).filter((function(e){return null!==e}));function a(){for(var t=e.dash.mediaPlayer,i=e.textTracks(),a=-1,s=function(e){var t=i[e];if("showing"===t.mode){var s=function(e,n){for(var r=0;r<e.length;r++)if(e[r].textTrack===t)return e[r]}(r),o=s?s.dashTrack:null;o&&(a=n.indexOf(o))}},o=0;o<i.length;o+=1)s(o);a!==t.getCurrentTextTrackIndex()&&t.setTextTrack(a)}return e.textTracks().on("change",a),e.dash.mediaPlayer.on(p.MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,(function(){e.textTracks().off("change",a)})),a(),i}(e,0,n))}}function v(e,t){return v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},v(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var T=u.default.getComponent("Component"),b={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function E(e,t,n){try{e.style[t]=n}catch(e){return}}function S(e){for(var t in e.style&&(e.style.left=null,e.style.width="100%"),e.children)S(e.children[t])}function w(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}var C=function(e){var t,n;function r(t,n,r){var i;i=e.call(this,t,u.default.mergeOptions(n,{playerOptions:{}}),r)||this;for(var a=t.getChild("TextTrackSettings").$$("select"),s=0;s<a.length;s++)i.on(a[s],"change",i.updateStyle.bind(_(i)));return t.dash.mediaPlayer.on(p.MediaPlayer.events.CAPTION_RENDERED,i.updateStyle.bind(_(i))),i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,v(t,n);var i=r.prototype;return i.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display-ttml"},{"aria-live":"off","aria-atomic":"true"});return t.style.position="absolute",t.style.left="0",t.style.right="0",t.style.top="0",t.style.bottom="0",t.style.margin="1.5%",t},i.updateStyle=function(e){var t=e.captionDiv;if(this.player_.textTrackSettings){var n=this.player_.textTrackSettings.getValues();if(t=t||this.player_.getChild("TTMLTextTrackDisplay").el().firstChild){S(t);for(var r=t.getElementsByTagName("span"),i=0;i<r.length;i++){var a=r[i];if(a.parentNode.style.textAlign="center",n.color&&(a.style.color=n.color),n.textOpacity&&E(a,"color",w(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(a.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&E(a,"backgroundColor",w(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?E(a.parentNode,"backgroundColor",w(n.windowColor,n.windowOpacity)):a.parent.style.backgroundColor=n.windowColor),n.edgeStyle&&("dropshadow"===n.edgeStyle?a.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===n.edgeStyle?a.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===n.edgeStyle?a.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===n.edgeStyle&&(a.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),n.fontPercent&&1!==n.fontPercent){var s=d().parseFloat(a.style.fontSize);a.style.fontSize=s*n.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"}n.fontFamily&&"default"!==n.fontFamily&&("small-caps"===n.fontFamily?a.style.fontVariant="small-caps":a.style.fontFamily=b[n.fontFamily])}}}},r}(T);u.default.registerComponent("TTMLTextTrackDisplay",C);var A=function(){function e(t,n,r){var i=this;if(r=r||n.options_,this.player=(0,u.default)(r.playerId),this.player.dash=this.player.dash||{},this.tech_=n,this.el_=n.el(),this.elParent_=this.el_.parentNode,this.hasFiniteDuration_=!1,t.src){n.isReady_=!1,e.updateSourceData&&(u.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),t=e.updateSourceData(t)),e.hooks("updatesource").forEach((function(e){t=e(t)}));var a=t.src;this.keySystemOptions_=e.buildDashJSProtData(t.keySystemOptions),this.player.dash.mediaPlayer=p.MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,e.useVideoJSDebug&&(u.default.log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.useVideoJSDebug(this.mediaPlayer_)),e.beforeInitialize&&(u.default.log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.beforeInitialize(this.player,this.mediaPlayer_)),e.hooks("beforeinitialize").forEach((function(e){e(i.player,i.mediaPlayer_)})),this.mediaPlayer_.initialize(),this.retriggerError_=function(e){if("capability"===e.error&&"mediasource"===e.event)i.player.error({code:4,message:"The media cannot be played because it requires a feature that your browser does not support."});else if("manifestError"!==e.error||"createParser"!==e.event.id&&"codec"!==e.event.id&&"nostreams"!==e.event.id&&"nostreamscomposed"!==e.event.id&&"parse"!==e.event.id&&"multiplexedrep"!==e.event.id)if("mediasource"===e.error)e.event.match("MEDIA_ERR_ABORTED")?i.player.error({code:1,message:e.event}):e.event.match("MEDIA_ERR_NETWORK")?i.player.error({code:2,message:e.event}):e.event.match("MEDIA_ERR_DECODE")?i.player.error({code:3,message:e.event}):e.event.match("MEDIA_ERR_SRC_NOT_SUPPORTED")?i.player.error({code:4,message:e.event}):e.event.match("MEDIA_ERR_ENCRYPTED")?i.player.error({code:5,message:e.event}):(e.event.match("UNKNOWN"),i.player.error({code:4,message:e.event}));else if("capability"===e.error&&"encryptedmedia"===e.event)i.player.error({code:5,message:"The media cannot be played because it requires encryption features that your browser does not support."});else if("key_session"===e.error)i.player.error({code:5,message:e.event});else if("download"===e.error)i.player.error({code:2,message:"The media playback was aborted because too many consecutive download errors occurred."});else{if("mssError"!==e.error)return;i.player.error({code:3,message:e.event})}else i.player.error({code:4,message:e.event.message});setTimeout((function(){i.mediaPlayer_.reset()}),10)},this.mediaPlayer_.on(p.MediaPlayer.events.ERROR,this.retriggerError_),this.getDuration_=function(e){var t=e.data.Period_asArray,n=i.hasFiniteDuration_;e.data.mediaPresentationDuration||t[t.length-1].duration?i.hasFiniteDuration_=!0:i.hasFiniteDuration_=!1,i.hasFiniteDuration_!==n&&i.player.trigger("durationchange")},this.mediaPlayer_.on(p.MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),r.dash&&Object.keys(r.dash).forEach((function(e){var t;if("useTTML"!==e){var n="set"+e.charAt(0).toUpperCase()+e.slice(1),a=r.dash[e];i.mediaPlayer_.hasOwnProperty(n)&&(u.default.log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+n+"'"),e=n),i.mediaPlayer_.hasOwnProperty(e)?(Array.isArray(a)||(a=[a]),(t=i.mediaPlayer_)[e].apply(t,a)):u.default.log.warn("Warning: dash configuration option unrecognized: "+e)}})),this.mediaPlayer_.attachView(this.el_),r.dash&&r.dash.useTTML&&(this.ttmlContainer_=this.player.addChild("TTMLTextTrackDisplay"),this.mediaPlayer_.attachTTMLRenderingDiv(this.ttmlContainer_.el())),this.mediaPlayer_.setAutoPlay(!1),g.call(null,this.player,n),y.call(null,this.player,n,r),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(a),this.tech_.triggerReady()}}e.buildDashJSProtData=function(e){var t={};if(!e||!Array.isArray(e))return null;for(var n=0;n<e.length;n++){var r=e[n],i=u.default.mergeOptions({},r.options);i.licenseUrl&&(i.serverURL=i.licenseUrl,delete i.licenseUrl),t[r.name]=i}return t};var t=e.prototype;return t.dispose=function(){this.mediaPlayer_&&(this.mediaPlayer_.off(p.MediaPlayer.events.ERROR,this.retriggerError_),this.mediaPlayer_.off(p.MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),this.mediaPlayer_.reset()),this.player.dash&&delete this.player.dash,this.ttmlContainer_&&(this.ttmlContainer_.dispose(),this.player.removeChild("TTMLTextTrackDisplay"))},t.duration=function(){return this.mediaPlayer_.isDynamic()&&!this.hasFiniteDuration_?1/0:this.mediaPlayer_.duration()},e.hooks=function(t,n){return e.hooks_[t]=e.hooks_[t]||[],n&&(e.hooks_[t]=e.hooks_[t].concat(n)),e.hooks_[t]},e.hook=function(t,n){e.hooks(t,n)},e.removeHook=function(t,n){var r=e.hooks(t).indexOf(n);return-1!==r&&(e.hooks_[t]=e.hooks_[t].slice(),e.hooks_[t].splice(r,1),!0)},e}();A.hooks_={},u.default.DashSourceHandler=function(){return{canHandleSource:function(e){return function(e){e=JSON.parse(JSON.stringify(e)),A.updateSourceData&&(u.default.log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=A.updateSourceData(e)),A.hooks("updatesource").forEach((function(t){e=t(e)}));var t=f().createElement("video");return!(e.keySystemOptions&&!d().navigator.requestMediaKeySystemAccess&&!t.msSetMediaKeys)}(e)?u.default.DashSourceHandler.canPlayType(e.type)?"probably":/\.mpd/i.test(e.src)?"maybe":"":""},handleSource:function(e,t,n){return new A(e,t,n)},canPlayType:function(e){return u.default.DashSourceHandler.canPlayType(e)}}},u.default.DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},d().MediaSource&&u.default.getTech("Html5").registerSourceHandler(u.default.DashSourceHandler(),0),u.default.Html5DashJS=A;const I=A},13407:(e,t,n)=>{var r=n(58908),i=e.exports={WebVTT:n(63706),VTTCue:n(22230),VTTRegion:n(13710)};r.vttjs=i,r.WebVTT=i.WebVTT;var a=i.VTTCue,s=i.VTTRegion,o=r.VTTCue,u=r.VTTRegion;i.shim=function(){r.VTTCue=a,r.VTTRegion=s},i.restore=function(){r.VTTCue=o,r.VTTRegion=u},r.VTTCue||i.shim()},63706:(e,t,n)=>{var r=n(89144),i=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function a(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function s(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function o(){this.values=i(null)}function u(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var s=i[a].split(n);2===s.length&&t(s[0].trim(),s[1].trim())}}function l(e,t,n){var r=e;function i(){var t=s(e);if(null===t)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+r);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=i(),l(),"--\x3e"!==e.substr(0,3))throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);e=e.substr(3),l(),t.endTime=i(),l(),function(e,t){var r=new o;u(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),s=a[0];r.integer(e,s),r.percent(e,s)&&r.set("snapToLines",!1),r.alt(e,s,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start","center","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical","");try{t.line=r.get("line","auto")}catch(e){}t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100);try{t.align=r.get("align","center")}catch(e){t.align=r.get("align","middle")}try{t.position=r.get("position","auto")}catch(e){t.position=r.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=r.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}a.prototype=i(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var d=r.createElement&&r.createElement("textarea"),c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},f={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},h={v:"title",lang:"lang"},p={rt:"ruby"};function m(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e){return d.innerHTML=e,e=d.textContent,d.textContent="",e}function i(e,t){return!p[t.localName]||p[t.localName]===e.localName}function a(t,n){var r=c[t];if(!r)return null;var i=e.document.createElement(r),a=h[t];return a&&n&&(i[a]=n.trim()),i}for(var o,u=e.document.createElement("div"),l=u,m=[];null!==(o=n());)if("<"!==o[0])l.appendChild(e.document.createTextNode(r(o)));else{if("/"===o[1]){m.length&&m[m.length-1]===o.substr(2).replace(">","")&&(m.pop(),l=l.parentNode);continue}var g,y=s(o.substr(1,o.length-2));if(y){g=e.document.createProcessingInstruction("timestamp",y),l.appendChild(g);continue}var v=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(!(g=a(v[1],v[3])))continue;if(!i(l,g))continue;if(v[2]){var _=v[2].split(".");_.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(f.hasOwnProperty(n)){var r=t?"background-color":"color",i=f[n];g.style[r]=i}})),g.className=_.join(" ")}m.push(v[1]),l.appendChild(g),l=g}return u}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function y(e){for(var t=0;t<g.length;t++){var n=g[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function v(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var a=0;a<n.length;a++)if(y(n.charCodeAt(a)))return"rtl";return"ltr"}function _(){}function T(e,t,n){_.call(this),this.cue=t,this.cueDiv=m(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:v(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"center":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function b(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function E(e,t,n,r){var i=new b(t),a=t.cue,s=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),o=[];if(a.snapToLines){var u;switch(a.vertical){case"":o=["+y","-y"],u="height";break;case"rl":o=["+x","-x"],u="width";break;case"lr":o=["-x","+x"],u="width"}var l=i.lineHeight,d=l*Math.round(s),c=n[u]+l,f=o[0];Math.abs(d)>c&&(d=d<0?-1:1,d*=Math.ceil(c/l)*l),s<0&&(d+=""===a.vertical?n.height:n.width,o=o.reverse()),i.move(f,d)}else{var h=i.lineHeight/n.height*100;switch(a.lineAlign){case"center":s-=h/2;break;case"end":s-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],i=new b(t)}var p=function(e,t){for(var i,a=new b(e),s=1,o=0;o<t.length;o++){for(;e.overlapsOppositeAxis(n,t[o])||e.within(n)&&e.overlapsAny(r);)e.move(t[o]);if(e.within(n))return e;var u=e.intersectPercentage(n);s>u&&(i=new b(e),s=u),e=new b(a)}return i||a}(i,o);t.move(p.toCSSCompatValues(n))}function S(){}_.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},_.prototype.formatStyle=function(e,t){return 0===e?0:e+t},T.prototype=i(_.prototype),T.prototype.constructor=T,b.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},b.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},b.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},b.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},b.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},b.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},b.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},b.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},S.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},S.convertCueToDOMTree=function(e,t){return e&&t?m(e,t):null},S.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],a=b.getSimpleBoxPosition(r),s={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,o,u=0;u<t.length;u++)o=t[u],n=new T(e,o,s),r.appendChild(n.div),E(0,n,a,i),o.displayState=n.div,i.push(b.getSimpleBoxPosition(n))}()}else for(var o=0;o<t.length;o++)r.appendChild(t[o].displayState)},S.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},S.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof a))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function r(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var r=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),r}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var i;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var d=(i=r()).match(/^WEBVTT([ \t].*)?$/);if(!d||!d[0])throw new a(a.Errors.BadSignature);n.state="HEADER"}for(var c=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(c?c=!1:i=r(),n.state){case"HEADER":/:/.test(i)?(t=i).match(/X-TIMESTAMP-MAP/)?u(t,(function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new o;u(e,(function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",s(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}),/=/):u(t,(function(e,t){"Region"===e&&function(e){var t=new o;if(u(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var r=n.split(",");if(2!==r.length)break;var i=new o;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;t.set(e+"X",i.get("x")),t.set(e+"Y",i.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var r=new(n.vttjs.VTTRegion||n.window.VTTRegion);r.width=t.get("width",100),r.lines=t.get("lines",3),r.regionAnchorX=t.get("regionanchorX",0),r.regionAnchorY=t.get("regionanchorY",100),r.viewportAnchorX=t.get("viewportanchorX",0),r.viewportAnchorY=t.get("viewportanchorY",100),r.scroll=t.get("scroll",""),n.onregion&&n.onregion(r),n.regionList.push({id:t.get("id"),region:r})}}(t)}),/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{l(i,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var f=-1!==i.indexOf("--\x3e");if(!i||f&&(c=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":i||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new a(a.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=S},22230:e=>{var t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function i(e,n,i){this.hasBeenReset=!1;var a="",s=!1,o=e,u=n,l=i,d=null,c="",f=!0,h="auto",p="start",m="auto",g="auto",y=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(e){a=""+e}},pauseOnExit:{enumerable:!0,get:function(){return s},set:function(e){s=!!e}},startTime:{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");o=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return d},set:function(e){d=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return f},set:function(e){f=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=r(e);t?(p=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");m=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(e){var t=r(e);t?(g=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");y=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(e){var t=r(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=t,this.hasBeenReset=!0}}}),this.displayState=void 0}i.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=i},13710:e=>{var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,r=3,i=0,a=100,s=0,o=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return r},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");r=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");o=e}},viewportAnchorX:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");s=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):u=n}}})}},5778:e=>{"use strict";e.exports=JSON.parse('{"Play":"","Pause":"","Current Time":" ","Duration":"","Remaining Time":" ","Stream Type":" ","LIVE":"","Loaded":" ","Progress":"","Fullscreen":" ","Non-Fullscreen":"  ","Mute":"","Unmute":" ","Playback Rate":" ","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","You aborted the media playback":"   ","A network error caused the media download to fail part-way.":"       .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"                  .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"                .","No compatible source was found for this media.":"        .","Play Video":" ","Close":"","Modal Window":" ","This is a modal window":"  ","This modal can be closed by pressing the Escape key or activating the close button.":"              ",", opens captions settings dialog":",     ",", opens subtitles settings dialog":",     ",", selected":", ","Audio Player":" ","Video Player":" ","Replay":" ","Seek to live, currently behind live":"         ","Seek to live, currently playing live":"         ","Progress Bar":" ","Descriptions":"","descriptions off":" ","Audio Track":" ","Volume Level":" ","The media is encrypted and we do not have the keys to decrypt it.":"       .","Close Modal Dialog":"   ",", opens descriptions settings dialog":"     ","captions settings":"  ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":" ","Background":"","Window":"","Transparent":"","Semi-Transparent":" ","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":" ","Raised":"","Depressed":"","Uniform":"","Dropshadow":" ","Font Family":" ","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif","Casual":"Casual","Script":"Script","Small Caps":"Small Caps","Reset":" ","restore all settings to the default values":"     ","Done":"","Caption Settings Dialog":"    ","Beginning of dialog window. Escape will cancel and close the window.":"   .    \\"Escape\\"     .","End of dialog window.":"   .","{1} is loading.":"{1}  ."}')},69698:e=>{"use strict";e.exports=JSON.parse('{"Play":"Pusti","Pause":"Pauza","Current Time":"Trenutno vrijeme","Duration":"Vrijeme trajanja","Remaining Time":"Preostalo vrijeme","Stream Type":"Nain strimovanja","LIVE":"UIVO","Loaded":"Uitan","Progress":"Progres","Fullscreen":"Puni ekran","Non-Fullscreen":"Mali ekran","Mute":"Priguen","Unmute":"Ne-priguen","Playback Rate":"Stopa reprodukcije","Subtitles":"Podnaslov","subtitles off":"Podnaslov deaktiviran","Captions":"Titlovi","captions off":"Titlovi deaktivirani","Chapters":"Poglavlja","You aborted the media playback":"Iskljuili ste reprodukciju videa.","A network error caused the media download to fail part-way.":"Video se prestao preuzimati zbog greke na mrei.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video se ne moe reproducirati zbog servera, greke u mrei ili je format ne podran.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Reprodukcija videa je zaustavljenja zbog greke u formatu ili zbog verzije vaeg pretraivaa.","No compatible source was found for this media.":"Nije naen nijedan kompatibilan izvor ovog videa."}')},27830:e=>{"use strict";e.exports=JSON.parse('{"Play":"","Pause":"","Current Time":" ","Duration":"","Remaining Time":" ","Stream Type":"  ","LIVE":" ","Loaded":"","Progress":"","Fullscreen":" ","Non-Fullscreen":"   ","Mute":" ","Unmute":" ","Playback Rate":"  ","Subtitles":"","subtitles off":" ","Captions":" ","captions off":"  ","Chapters":"","You aborted the media playback":"   ","A network error caused the media download to fail part-way.":"      .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"                  .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"                  .","No compatible source was found for this media.":"       ."}')},90883:e=>{"use strict";e.exports=JSON.parse('{"Play":"Reproducci","Pause":"Pausa","Current Time":"Temps reprodut","Duration":"Durada total","Remaining Time":"Temps restant","Stream Type":"Tipus de seqncia","LIVE":"EN DIRECTE","Loaded":"Carregat","Progress":"Progrs","Fullscreen":"Pantalla completa","Non-Fullscreen":"Pantalla no completa","Mute":"Silencia","Unmute":"Amb so","Playback Rate":"Velocitat de reproducci","Subtitles":"Subttols","subtitles off":"Subttols desactivats","Captions":"Llegendes","captions off":"Llegendes desactivades","Chapters":"Captols","You aborted the media playback":"Heu interromput la reproducci del vdeo.","A network error caused the media download to fail part-way.":"Un error de la xarxa ha interromput la baixada del vdeo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"No s\'ha pogut carregar el vdeo perqu el servidor o la xarxa han fallat, o b perqu el seu format no s compatible.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La reproducci de vdeo s\'ha interrumput per un problema de corrupci de dades o b perqu el vdeo demanava funcions que el vostre navegador no ofereix.","No compatible source was found for this media.":"No s\'ha trobat cap font compatible amb el vdeo."}')},83854:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Audio Pehrava","Video Player":"Video Pehrava","Play":"Pehrt","Pause":"Pauza","Replay":"Spustit znovu","Current Time":"Aktuln as","Duration":"Doba trvn","Remaining Time":"Zbvajc as","Stream Type":"Typ streamu","LIVE":"IV","Loaded":"Nateno","Progress":"Stav","Progress Bar":"Ukazatel prbhu","progress bar timing: currentTime={1} duration={2}":"{1} z {2}","Fullscreen":"Cel obrazovka","Non-Fullscreen":"Bn zobrazen","Mute":"Ztlumit zvuk","Unmute":"Zapnout zvuk","Playback Rate":"Rychlost pehrvn","Subtitles":"Titulky","subtitles off":"Bez titulk","Captions":"Popisky","captions off":"Popisky vypnuty","Chapters":"Kapitoly","Descriptions":"Popisy","descriptions off":"Bez popis","Audio Track":"Zvukov stopa","Volume Level":"Hlasitost","You aborted the media playback":"Pehrvn videa bylo perueno.","A network error caused the media download to fail part-way.":"Video nemohlo bt nateno kvli chyb v sti.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video nemohlo bt nateno, bu kvli chyb serveru, st nebo proto, e dan formt nen podporovn.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"V prohle nepodporuje tento formt videa.","No compatible source was found for this media.":"Nevalidn zadan zdroj videa.","The media is encrypted and we do not have the keys to decrypt it.":"Chyba pi deifrovn videa.","Play Video":"Pehrt video","Close":"Zavit","Close Modal Dialog":"Zavt okno","Modal Window":"Modln okno","This is a modal window":"Toto je modln okno","This modal can be closed by pressing the Escape key or activating the close button.":"Toto okno se d zavt kkem nebo klvesou Esc.",", opens captions settings dialog":", otevt okno pro nastaven popisk",", opens subtitles settings dialog":", otevt okno pro nastaven titulk",", opens descriptions settings dialog":", oteve okno pro nastaven popisk pro nevidom",", selected":", vybrno","captions settings":"nastaven popisk","subtitles settings":"nastaven titulk","descriptions settings":"nastaven popisk pro nevidom","Text":"Titulky","White":"Bl","Black":"ern","Red":"erven","Green":"Zelen","Blue":"Modr","Yellow":"lut","Magenta":"Fialov","Cyan":"Azurov","Background":"Pozad titulk","Window":"Okno","Transparent":"Prhledn","Semi-Transparent":"Poloprhledn","Opaque":"Neprhledn","Font Size":"Velikost psma","Text Edge Style":"Okraje psma","None":"Bez okraje","Raised":"Zven","Depressed":"Propadl","Uniform":"Rovnomrn","Dropshadow":"Stnovan","Font Family":"Rodina psma","Proportional Sans-Serif":"Proporcionln bezpatkov","Monospace Sans-Serif":"Monospace bezpatkov","Proportional Serif":"Proporcionln patkov","Monospace Serif":"Monospace patkov","Casual":"Hrav","Script":"Run psan","Small Caps":"Mal kapitlky","Reset":"Obnovit","restore all settings to the default values":"Vrtit nastaven do vchozho stavu","Done":"Hotovo","Caption Settings Dialog":"Okno s nastavenm titulk","Beginning of dialog window. Escape will cancel and close the window.":"Zatek dialogovho okna. Klvesa Esc okno zave.","End of dialog window.":"Konec dialogovho okna.","{1} is loading.":"{1} se nat."}')},32614:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Chwaraewr sain","Video Player":"Chwaraewr fideo","Play":"Chwarae","Pause":"Oedi","Replay":"Ailchwarae","Current Time":"Amser Cyfredol","Duration":"Parhad","Remaining Time":"Amser ar l","Stream Type":"Math o Ffrwd","LIVE":"YN FYW","Loaded":"Llwythwyd","Progress":"Cynnydd","Progress Bar":"Bar Cynnydd","progress bar timing: currentTime={1} duration={2}":"{1} o {2}","Fullscreen":"Sgrn Lawn","Non-Fullscreen":"Ffenestr","Mute":"Pylu","Unmute":"Dad-bylu","Playback Rate":"Cyfradd Chwarae","Subtitles":"Isdeitlau","subtitles off":"Isdeitlau i ffwrdd","Captions":"Capsiynau","captions off":"Capsiynau i ffwrdd","Chapters":"Penodau","Descriptions":"Disgrifiadau","descriptions off":"disgrifiadau i ffwrdd","Audio Track":"Trac Sain","Volume Level":"Lefel Sain","You aborted the media playback":"Atalwyd y fideo gennych","A network error caused the media download to fail part-way.":"Mae gwall rhwydwaith wedi achosi methiant lawrlwytho.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Ni lwythodd y fideo, oherwydd methiant gweinydd neu rwydwaith, neu achos nid yw\'r system yn cefnogi\'r fformat.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Atalwyd y fideo oherwydd problem llygredd data neu oherwydd nid yw\'ch porwr yn cefnogi nodweddion penodol o\'r fideo.","No compatible source was found for this media.":"Nid oedd modd canfod ffynhonnell cytn am y fideo hwn.","The media is encrypted and we do not have the keys to decrypt it.":"Mae\'r fideo wedi ei amgryptio ac nid oes allweddion gennym.","Play Video":"Chwarae Fideo","Close":"Cau","Close Modal Dialog":"Cau Blwch Deialog Moddol","Modal Window":"Ffenestr Foddol","This is a modal window":"Mae hon yn ffenestr foddol","This modal can be closed by pressing the Escape key or activating the close button.":"Gallech chi gau\'r ffenestr foddol hon trwy wasgu Escape neu glicio\'r botwm cau.",", opens captions settings dialog":", yn agor gosodiadau capsiynau",", opens subtitles settings dialog":", yn agor gosodiadau isdeitlau",", opens descriptions settings dialog":", yn agor gosodiadau disgrifiadau",", selected":", detholwyd","captions settings":"gosodiadau capsiynau","subtitles settings":"gosodiadau isdeitlau","descriptions settings":"gosodiadau disgrifiadau","Text":"Testun","White":"Gwyn","Black":"Du","Red":"Coch","Green":"Gwyrdd","Blue":"Glas","Yellow":"Melyn","Magenta":"Piws","Cyan":"Cyan","Background":"Cefndir","Window":"Ffenestr","Transparent":"Tryloyw","Semi-Transparent":"Hanner-dryloyw","Opaque":"Di-draidd","Font Size":"Maint y Ffont","Text Edge Style":"Arddull Ymylon Testun","None":"Dim","Raised":"Uwch","Depressed":"Is","Uniform":"Unffurf","Dropshadow":"Cysgod cefn","Font Family":"Teulu y Ffont","Proportional Sans-Serif":"Heb-Seriff Cyfraneddol","Monospace Sans-Serif":"Heb-Seriff Unlled","Proportional Serif":"Seriff Gyfraneddol","Monospace Serif":"Seriff Unlled","Casual":"Llawysgrif","Script":"Sgript","Small Caps":"Prif Lythyrennau Bychain","Reset":"Ailosod","restore all settings to the default values":"Adfer yr holl osodiadau diofyn","Done":"Gorffenwyd","Caption Settings Dialog":"Blwch Gosodiadau Capsiynau","Beginning of dialog window. Escape will cancel and close the window.":"Dechrau ffenestr deialog. Bydd Escape yn canslo a chau\'r ffenestr.","End of dialog window.":"Diwedd ffenestr deialog.","{1} is loading.":"{1} yn llwytho."}')},23562:e=>{"use strict";e.exports=JSON.parse('{"Play":"Afspil","Pause":"Pause","Current Time":"Aktuel tid","Duration":"Varighed","Remaining Time":"Resterende tid","Stream Type":"Stream-type","LIVE":"LIVE","Loaded":"Indlst","Progress":"Status","Fullscreen":"Fuldskrm","Non-Fullscreen":"Luk fuldskrm","Mute":"Uden lyd","Unmute":"Med lyd","Playback Rate":"Afspilningsrate","Subtitles":"Undertekster","subtitles off":"Uden undertekster","Captions":"Undertekster for hrehmmede","captions off":"Uden undertekster for hrehmmede","Chapters":"Kapitler","You aborted the media playback":"Du afbrd videoafspilningen.","A network error caused the media download to fail part-way.":"En netvrksfejl fik download af videoen til at fejle.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Videoen kunne ikke indlses, enten fordi serveren eller netvrket fejlede, eller fordi formatet ikke er understttet.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Videoafspilningen blev afbrudt p grund af delagte data eller fordi videoen benyttede faciliteter som din browser ikke understtter.","No compatible source was found for this media.":"Fandt ikke en kompatibel kilde for denne media."}')},85429:e=>{"use strict";e.exports=JSON.parse('{"Play":"Wiedergabe","Pause":"Pause","Replay":"Erneut abspielen","Current Time":"Aktueller Zeitpunkt","Duration":"Dauer","Remaining Time":"Verbleibende Zeit","Stream Type":"Streamtyp","LIVE":"LIVE","Loaded":"Geladen","Progress":"Status","Fullscreen":"Vollbild","Non-Fullscreen":"Vollbildmodus beenden","Mute":"Ton aus","Unmute":"Ton ein","Playback Rate":"Wiedergabegeschwindigkeit","Subtitles":"Untertitel","subtitles off":"Untertitel aus","Captions":"Untertitel","captions off":"Untertitel aus","Chapters":"Kapitel","You aborted the media playback":"Sie haben die Videowiedergabe abgebrochen.","A network error caused the media download to fail part-way.":"Der Videodownload ist aufgrund eines Netzwerkfehlers fehlgeschlagen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Das Video konnte nicht geladen werden, da entweder ein Server- oder Netzwerkfehler auftrat oder das Format nicht untersttzt wird.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Die Videowiedergabe wurde entweder wegen eines Problems mit einem beschdigten Video oder wegen verwendeten Funktionen, die vom Browser nicht untersttzt werden, abgebrochen.","No compatible source was found for this media.":"Fr dieses Video wurde keine kompatible Quelle gefunden.","Play Video":"Video abspielen","Close":"Schlieen","Modal Window":"Modales Fenster","This is a modal window":"Dies ist ein modales Fenster","This modal can be closed by pressing the Escape key or activating the close button.":"Durch Drcken der Esc-Taste bzw. Bettigung der Schaltflche \\"Schlieen\\" wird dieses modale Fenster geschlossen.",", opens captions settings dialog":", ffnet Einstellungen fr Untertitel",", opens subtitles settings dialog":", ffnet Einstellungen fr Untertitel",", selected":", ausgewhlt","captions settings":"Untertiteleinstellungen","subtitles settings":"Untertiteleinstellungen","descriptions settings":"Einstellungen fr Beschreibungen","Close Modal Dialog":"Modales Fenster schlieen","Descriptions":"Beschreibungen","descriptions off":"Beschreibungen aus","The media is encrypted and we do not have the keys to decrypt it.":"Die Entschlsselungsschlssel fr den verschlsselten Medieninhalt sind nicht verfgbar.",", opens descriptions settings dialog":", ffnet Einstellungen fr Beschreibungen","Audio Track":"Tonspur","Text":"Schrift","White":"Wei","Black":"Schwarz","Red":"Rot","Green":"Grn","Blue":"Blau","Yellow":"Gelb","Magenta":"Magenta","Cyan":"Trkis","Background":"Hintergrund","Window":"Fenster","Transparent":"Durchsichtig","Semi-Transparent":"Halbdurchsichtig","Opaque":"Undurchsichtig","Font Size":"Schriftgre","Text Edge Style":"Textkantenstil","None":"Kein","Raised":"Erhoben","Depressed":"Gedrckt","Uniform":"Uniform","Dropshadow":"Schlagschatten","Font Family":"Schriftfamilie","Proportional Sans-Serif":"Proportionale Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportionale Serif","Monospace Serif":"Monospace Serif","Casual":"Zwanglos","Script":"Schreibschrift","Small Caps":"Small-Caps","Reset":"Zurcksetzen","restore all settings to the default values":"Alle Einstellungen auf die Standardwerte zurcksetzen","Done":"Fertig","Caption Settings Dialog":"Einstellungsdialog fr Untertitel","Beginning of dialog window. Escape will cancel and close the window.":"Anfang des Dialogfensters. Esc bricht ab und schliet das Fenster.","End of dialog window.":"Ende des Dialogfensters.","Audio Player":"Audio-Player","Video Player":"Video-Player","Progress Bar":"Fortschrittsbalken","progress bar timing: currentTime={1} duration={2}":"{1} von {2}","Volume Level":"Lautstrke","{1} is loading.":"{1} wird geladen.","Seek to live, currently behind live":"Zur Live-bertragung wechseln. Aktuell wird es nicht live abgespielt.","Seek to live, currently playing live":"Zur Live-bertragung wechseln. Es wird aktuell live abgespielt.","Exit Picture-in-Picture":"Bild-im-Bild-Modus beenden","Picture-in-Picture":"Bild-im-Bild-Modus"}')},32976:e=>{"use strict";e.exports=JSON.parse('{"Play":"A","Pause":"","Current Time":" ","Duration":" ","Remaining Time":" ","Stream Type":" ","LIVE":"","Loaded":" ","Progress":"","Fullscreen":" ","Non-Fullscreen":"   ","Mute":"","Unmute":"K ","Playback Rate":" ","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Close Modal Dialog":" ","Descriptions":"","descriptions off":" ","Audio Track":" ","You aborted the media playback":"  ","A network error caused the media download to fail part-way.":"          .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"                 ,        .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"      ,               .","No compatible source was found for this media.":"        .","The media is encrypted and we do not have the keys to decrypt it.":"     o       .","Play Video":" ","Close":"","Modal Window":"A ","This is a modal window":"     ","This modal can be closed by pressing the Escape key or activating the close button.":"         Escape     .",", opens captions settings dialog":",      ",", opens subtitles settings dialog":",      ",", opens descriptions settings dialog":",      ",", selected":", "}')},6518:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Audio Player","Video Player":"Video Player","Play":"Play","Pause":"Pause","Replay":"Replay","Current Time":"Current Time","Duration":"Duration","Remaining Time":"Remaining Time","Stream Type":"Stream Type","LIVE":"LIVE","Seek to live, currently behind live":"Seek to live, currently behind live","Seek to live, currently playing live":"Seek to live, currently playing live","Loaded":"Loaded","Progress":"Progress","Progress Bar":"Progress Bar","progress bar timing: currentTime={1} duration={2}":"{1} of {2}","Fullscreen":"Fullscreen","Non-Fullscreen":"Exit Fullscreen","Mute":"Mute","Unmute":"Unmute","Playback Rate":"Playback Rate","Subtitles":"Subtitles","subtitles off":"subtitles off","Captions":"Captions","captions off":"captions off","Chapters":"Chapters","Descriptions":"Descriptions","descriptions off":"descriptions off","Audio Track":"Audio Track","Volume Level":"Volume Level","You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it.","Play Video":"Play Video","Close":"Close","Close Modal Dialog":"Close Modal Dialog","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected","captions settings":"captions settings","subtitles settings":"subtitles settings","descriptions settings":"descriptions settings","Text":"Text","White":"White","Black":"Black","Red":"Red","Green":"Green","Blue":"Blue","Yellow":"Yellow","Magenta":"Magenta","Cyan":"Cyan","Background":"Background","Window":"Window","Transparent":"Transparent","Semi-Transparent":"Semi-Transparent","Opaque":"Opaque","Font Size":"Font Size","Text Edge Style":"Text Edge Style","None":"None","Raised":"Raised","Depressed":"Depressed","Uniform":"Uniform","Dropshadow":"Dropshadow","Font Family":"Font Family","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif","Casual":"Casual","Script":"Script","Small Caps":"Small Caps","Reset":"Reset","restore all settings to the default values":"restore all settings to the default values","Done":"Done","Caption Settings Dialog":"Caption Settings Dialog","Beginning of dialog window. Escape will cancel and close the window.":"Beginning of dialog window. Escape will cancel and close the window.","End of dialog window.":"End of dialog window.","{1} is loading.":"{1} is loading.","Exit Picture-in-Picture":"Exit Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture","No content":"No content"}')},88808:e=>{"use strict";e.exports=JSON.parse('{"Play":"Reproducir","Play Video":"Reproducir Vdeo","Pause":"Pausa","Current Time":"Tiempo reproducido","Duration":"Duracin total","Remaining Time":"Tiempo restante","Stream Type":"Tipo de secuencia","LIVE":"DIRECTO","Loaded":"Cargado","Progress":"Progreso","Fullscreen":"Pantalla completa","Non-Fullscreen":"Pantalla no completa","Mute":"Silenciar","Unmute":"No silenciado","Playback Rate":"Velocidad de reproduccin","Subtitles":"Subttulos","subtitles off":"Subttulos desactivados","Captions":"Subttulos especiales","captions off":"Subttulos especiales desactivados","Chapters":"Captulos","You aborted the media playback":"Ha interrumpido la reproduccin del vdeo.","A network error caused the media download to fail part-way.":"Un error de red ha interrumpido la descarga del vdeo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"No se ha podido cargar el vdeo debido a un fallo de red o del servidor o porque el formato es incompatible.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La reproduccin de vdeo se ha interrumpido por un problema de corrupcin de datos o porque el vdeo precisa funciones que su navegador no ofrece.","No compatible source was found for this media.":"No se ha encontrado ninguna fuente compatible con este vdeo.","Audio Player":"Reproductor de audio","Video Player":"Reproductor de video","Replay":"Volver a reproducir","Seek to live, currently behind live":"Buscar en vivo, actualmente demorado con respecto a la transmisin en vivo","Seek to live, currently playing live":"Buscar en vivo, actualmente reproduciendo en vivo","Progress Bar":"Barra de progreso","progress bar timing: currentTime={1} duration={2}":"{1} de {2}","Descriptions":"Descripciones","descriptions off":"descripciones desactivadas","Audio Track":"Pista de audio","Volume Level":"Nivel de volumen","The media is encrypted and we do not have the keys to decrypt it.":"El material audiovisual est cifrado y no tenemos las claves para descifrarlo.","Close":"Cerrar","Modal Window":"Ventana modal","This is a modal window":"Esta es una ventana modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta ventana modal puede cerrarse presionando la tecla Escape o activando el botn de cierre.",", opens captions settings dialog":", abre el dilogo de configuracin de leyendas",", opens subtitles settings dialog":", abre el dilogo de configuracin de subttulos",", selected":", seleccionado","Close Modal Dialog":"Cierra cuadro de dilogo modal",", opens descriptions settings dialog":", abre el dilogo de configuracin de las descripciones","captions settings":"configuracin de leyendas","subtitles settings":"configuracin de subttulos","descriptions settings":"configuracin de descripciones","Text":"Texto","White":"Blanco","Black":"Negro","Red":"Rojo","Green":"Verde","Blue":"Azul","Yellow":"Amarillo","Magenta":"Magenta","Cyan":"Cian","Background":"Fondo","Window":"Ventana","Transparent":"Transparente","Semi-Transparent":"Semitransparente","Opaque":"Opaca","Font Size":"Tamao de fuente","Text Edge Style":"Estilo de borde del texto","None":"Ninguno","Raised":"En relieve","Depressed":"Hundido","Uniform":"Uniforme","Dropshadow":"Sombra paralela","Font Family":"Familia de fuente","Proportional Sans-Serif":"Sans-Serif proporcional","Monospace Sans-Serif":"Sans-Serif monoespacio","Proportional Serif":"Serif proporcional","Monospace Serif":"Serif monoespacio","Casual":"Informal","Script":"Cursiva","Small Caps":"Minsculas","Reset":"Restablecer","restore all settings to the default values":"restablece todas las configuraciones a los valores predeterminados","Done":"Listo","Caption Settings Dialog":"Dilogo de configuracin de leyendas","Beginning of dialog window. Escape will cancel and close the window.":"Comienzo de la ventana de dilogo. La tecla Escape cancelar la operacin y cerrar la ventana.","End of dialog window.":"Final de la ventana de dilogo.","{1} is loading.":"{1} se est cargando.","Exit Picture-in-Picture":"Salir de imagen sobre imagen","Picture-in-Picture":"Imagen sobre imagen"}')},59635:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Heliesitaja","Video Player":"Videoesitaja","Play":"Esita","Pause":"Paus","Replay":"Esita uuesti","Current Time":"Praegune aeg","Duration":"Kestus","Remaining Time":"Jrelejnud aeg","Stream Type":"Voo tp","LIVE":"OTSE","Seek to live, currently behind live":"Mine le otseedastusle, praegu reaalajast taga","Seek to live, currently playing live":"Mine le otseedastusle, praegu reaalajas ","Loaded":"Laaditud","Progress":"Edenemine","Progress Bar":"Edenemisriba ","progress bar timing: currentTime={1} duration={2}":"{1} / {2}","Fullscreen":"Tisekraan","Non-Fullscreen":"Vlju tisekraanist","Mute":"Vaigista","Unmute":"Lpeta vaigistus","Playback Rate":"Taasesituse kiirus","Subtitles":"Subtiitrid","subtitles off":"subtiitrid vljas","Captions":"Pealdised","captions off":"pealdised vljas","Chapters":"Peatkid","Descriptions":"Kirjeldused","descriptions off":"kirjeldused vljas","Audio Track":"Helirada","Volume Level":"Helitugevuse tase","You aborted the media playback":"Katkestasid taasesituse","A network error caused the media download to fail part-way.":"Vrguvea tttu nurjus meediumifaili allalaadimine poole pealt.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Seda meediumifaili ei nnestunud laadida, kuna serveris vi vrgus esines trge vi kuna vormingut ei toetata.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Meediumifaili taasesitamine katkestati, kuna fail on rikutud vi see kasutab funktsiooni, mida sinu brauser ei toeta.","No compatible source was found for this media.":"Ei leitud selle meediumifailiga hilduvat allikat.","The media is encrypted and we do not have the keys to decrypt it.":"See meediumifail on krpteeritud ja meil pole dekrpteerimiseks vajalikku vtit.","Play Video":"Esita video","Close":"Sule","Close Modal Dialog":"Sule modaaldialoog","Modal Window":"Modaalaken","This is a modal window":"See on modaalaken","This modal can be closed by pressing the Escape key or activating the close button.":"Saad selle modaalelemendi sulgeda, vajutades paoklahvi vi tehes sulgemisnupu aktiivseks.",", opens captions settings dialog":", avab pealdiste stete dialoogi",", opens subtitles settings dialog":", avab subtiitrite stete dialoogi",", opens descriptions settings dialog":", avab kirjelduste stete dialoogi",", selected":", valitud","captions settings":"pealdiste stted","subtitles settings":"subtiitrite stted","descriptions settings":"kirjelduste stted","Text":"Tekst","White":"Valge","Black":"Must","Red":"Punane","Green":"Roheline","Blue":"Sinine","Yellow":"Kollane","Magenta":"Magneta","Cyan":"Tsaan","Background":"Taust","Window":"Aken","Transparent":"Lbipaistev","Semi-Transparent":"Poollbipaistev","Opaque":"Lbipaistmatu","Font Size":"Fondi suurus","Text Edge Style":"Tekstiserva stiil","None":"Puudub","Raised":"Krgem","Depressed":"Madalam","Uniform":"htlane","Dropshadow":"Langeva varjuga","Font Family":"Fondipere","Proportional Sans-Serif":"Seriifideta proportsionaalkiri","Monospace Sans-Serif":"Seriifideta psisammkiri","Proportional Serif":"Seriifidega proportsionaalkiri","Monospace Serif":"Seriifidega psisammkiri","Casual":"Sidumata kiri","Script":"Ksikirjaline kiri","Small Caps":"Kapiteelkiri","Reset":"Lhtesta","restore all settings to the default values":"taasta kigi stete vaikevrtused","Done":"Valmis","Caption Settings Dialog":"Pealdiste stete dialoog","Beginning of dialog window. Escape will cancel and close the window.":"Dialoogiakna algus. Paoklahv loobub aknast ja suleb selle.","End of dialog window.":"Dialoogiakna lpp.","{1} is loading.":"{1} laadimisel.","Exit Picture-in-Picture":"Vlju funktsioonist pilt pildis","Picture-in-Picture":"Pilt pildis"}')},74566:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Audio jogailua","Video Player":"Bideo jogailua","Play":"Hasi","Pause":"Gelditu","Replay":"Berriz hasi","Current Time":"Uneko denbora","Duration":"Iraupena","Remaining Time":"Gelditzen den denbora","Stream Type":"Jario mota","LIVE":"ZUZENEAN","Seek to live, currently behind live":"Zuzenekora joan, orain zuzenekoaren atzetik","Seek to live, currently playing live":"Zuzenekora joan, orain zuzenean ari da","Loaded":"Kargatuta","Progress":"Aurrerapena","Progress Bar":"Aurrerapen barra","progress bar timing: currentTime={1} duration={2}":"{1} / {2}","Fullscreen":"Pantaila osoa","Non-Fullscreen":"Irten pantaila osotik","Mute":"Ixildu","Unmute":"Soinua jarri","Playback Rate":"Abiadura","Subtitles":"Azpitituluak","subtitles off":"azpitituluak kenduta","Captions":"Oharrak","captions off":"oharrak kenduta","Chapters":"Kapituluak","Descriptions":"Deskribapenak","descriptions off":"deskribapenak kenduta","Audio Track":"Audio pista","Volume Level":"Bolumen maila","You aborted the media playback":"Bertan behera utzi duzu","A network error caused the media download to fail part-way.":"Sare errore batek deskargak huts egitea eragin du.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Media ezin izan da kargatu, zerbitzariak edo sareak huts egin duelako edo formatu horretako media erabili ezin delako.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Bertan behera gelditu da fitxategia ondo ez dagoelako edo zure nabigatzailean erabili ezin diren ezaugarriak dituelako.","No compatible source was found for this media.":"Ez dago media honentzako iturburu bateragarririk.","The media is encrypted and we do not have the keys to decrypt it.":"Media zifratuta dago eta ez ditugu beharrezko gakoak.","Play Video":"Bideoa hasi","Close":"Itxi","Close Modal Dialog":"Leihoa itxi","Modal Window":"Leihoa","This is a modal window":"Hau leiho modal bat da","This modal can be closed by pressing the Escape key or activating the close button.":"Leiho modal hau zure teklatuko Escape tekla sakatuz edo ixteko botoia sakatuz itxi daiteke.",", opens captions settings dialog":", oharren ezarpenen leihoa irekitzen du",", opens subtitles settings dialog":", azpitituluen ezarpenen leihoa irekitzen du",", opens descriptions settings dialog":", deskribapenen ezarpenen leihoa irekitzen du",", selected":", aukeratuta","captions settings":"oharren ezarpenak","subtitles settings":"azpitituluen ezarpenak","descriptions settings":"deskribapenen ezarpenak","Text":"Testua","White":"Zuria","Black":"Beltza","Red":"Gorria","Green":"Berdea","Blue":"Urdina","Yellow":"Horia","Magenta":"Magenta","Cyan":"Cyan (urdina)","Background":"Atzeko planoa","Window":"Leihoa","Transparent":"Gardena","Semi-Transparent":"Erdi-gardena","Opaque":"Opaku","Font Size":"Letra-tamaina","Text Edge Style":"Tesuaren etzen estiloa","None":"Bat ere ez","Raised":"Jasoa","Depressed":"Hondoratua","Uniform":"Uniformea","Dropshadow":"Itzalduna","Font Family":"Letra-tipoa","Proportional Sans-Serif":"Sans-Serif proportzionala","Monospace Sans-Serif":"Tarte berdineko Sans-Serif","Proportional Serif":"Serif proporzionala","Monospace Serif":"Tarte berdineko Serif","Casual":"Informala","Script":"Eskuz idatzitakoa","Small Caps":"letra xeheak","Reset":"Berrezarri","restore all settings to the default values":"berrezarri ezarpen guztiak defektuzko balioetara","Done":"Eginda","Caption Settings Dialog":"Oharren ezarpenen leihoa","Beginning of dialog window. Escape will cancel and close the window.":"Leihoaren hasiera. Escapeta teklak leihoa itxi egingo du.","End of dialog window.":"Leihoaren amaiera.","{1} is loading.":"{1} kargatzen ari da.","Exit Picture-in-Picture":"Irten irudiz-irudiztik","Picture-in-Picture":"Irudiz-irudi"}')},54096:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"  ","Video Player":"  ","Play":"","Pause":"","Replay":" ","Current Time":" ","Duration":"","Remaining Time":" ","Stream Type":" ","LIVE":"","Seek to live, currently behind live":"        ","Seek to live, currently playing live":"     ","Loaded":" ","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":"","Non-Fullscreen":" ","Mute":" ","Unmute":"","Playback Rate":" ","Subtitles":" ","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Descriptions":"","descriptions off":" ","Audio Track":" ","Volume Level":" ","You aborted the media playback":"     ","A network error caused the media download to fail part-way.":"         .","The media could not be loaded, either because the server or network failed or because the format is not supported.":".   .                  ","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"              .","No compatible source was found for this media.":"        .","The media is encrypted and we do not have the keys to decrypt it.":"          .","Play Video":" ","Close":"","Close Modal Dialog":" ","Modal Window":" ","This is a modal window":"    ","This modal can be closed by pressing the Escape key or activating the close button.":"    Escape       .",", opens captions settings dialog":",     ",", opens subtitles settings dialog":",     ",", opens descriptions settings dialog":",     ",", selected":"  ","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":" ","Window":"","Transparent":"","Semi-Transparent":" ","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":" ","Font Family":" ","Proportional Sans-Serif":"Sans-Serif ","Monospace Sans-Serif":"Sans-Serif  ","Proportional Serif":"Serif ","Monospace Serif":"Serif  ","Casual":"","Script":" ","Small Caps":"  ","Reset":" ","restore all settings to the default values":"     ","Done":"","Caption Settings Dialog":"  ","Beginning of dialog window. Escape will cancel and close the window.":"  .  Escape        .","End of dialog window.":"  .","{1} is loading.":"{1}    .","Exit Picture-in-Picture":"     ","Picture-in-Picture":"  "}')},90964:e=>{"use strict";e.exports=JSON.parse('{"Play":"Toisto","Pause":"Tauko","Current Time":"Tmnhetkinen aika","Duration":"Kokonaisaika","Remaining Time":"Jljell oleva aika","Stream Type":"Lhetystyyppi","LIVE":"LIVE","Loaded":"Ladattu","Progress":"Edistyminen","Fullscreen":"Koko nytt","Non-Fullscreen":"Koko nytt pois","Mute":"ni pois","Unmute":"ni pll","Playback Rate":"Toistonopeus","Subtitles":"Tekstitys","subtitles off":"Tekstitys pois","Captions":"Tekstitys","captions off":"Tekstitys pois","Chapters":"Kappaleet","You aborted the media playback":"Olet keskeyttnyt videotoiston.","A network error caused the media download to fail part-way.":"Verkkovirhe keskeytti videon latauksen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Videon lataus ei onnistunut joko palvelin- tai verkkovirheest tai vrst formaatista johtuen.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Videon toisto keskeytyi, koska media on vaurioitunut tai kytt kytt toimintoja, joita selaimesi ei tue.","No compatible source was found for this media.":"Tlle videolle ei lytynyt yhteensopivaa lhdett."}')},17161:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Lecteur audio","Video Player":"Lecteur vido","Play":"Lecture","Pause":"Pause","Replay":"Revoir","Current Time":"Temps actuel","Duration":"Dure","Remaining Time":"Temps restant","Stream Type":"Type de flux","LIVE":"EN DIRECT","Loaded":"Charg","Progress":"Progression","Progress Bar":"Barre de progression","progress bar timing: currentTime={1} duration={2}":"{1} de {2}","Fullscreen":"Plein cran","Non-Fullscreen":"Fentr","Mute":"Sourdine","Unmute":"Son activ","Playback Rate":"Vitesse de lecture","Subtitles":"Sous-titres","subtitles off":"Sous-titres dsactivs","Captions":"Sous-titres transcrits","captions off":"Sous-titres transcrits dsactivs","Chapters":"Chapitres","Descriptions":"Descriptions","descriptions off":"descriptions dsactives","Audio Track":"Piste audio","Volume Level":"Niveau de volume","You aborted the media playback":"Vous avez interrompu la lecture de la vido.","A network error caused the media download to fail part-way.":"Une erreur de rseau a interrompu le tlchargement de la vido.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Cette vido n\'a pas pu tre charge, soit parce que le serveur ou le rseau a chou ou parce que le format n\'est pas reconnu.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La lecture de la vido a t interrompue  cause d\'un problme de corruption ou parce que la vido utilise des fonctionnalits non prises en charge par votre navigateur.","No compatible source was found for this media.":"Aucune source compatible n\'a t trouve pour cette vido.","The media is encrypted and we do not have the keys to decrypt it.":"Le mdia est chiffr et nous n\'avons pas les cls pour le dchiffrer.","Play Video":"Lire la vido","Close":"Fermer","Close Modal Dialog":"Fermer la bote de dialogue modale","Modal Window":"Fentre modale","This is a modal window":"Ceci est une fentre modale","This modal can be closed by pressing the Escape key or activating the close button.":"Ce modal peut tre ferm en appuyant sur la touche chap ou activer le bouton de fermeture.",", opens captions settings dialog":", ouvrir les paramtres des sous-titres transcrits",", opens subtitles settings dialog":", ouvrir les paramtres des sous-titres",", opens descriptions settings dialog":", ouvrir les paramtres des descriptions",", selected":", slectionn","captions settings":"Paramtres des sous-titres transcrits","subtitles settings":"Paramtres des sous-titres","descriptions settings":"Paramtres des descriptions","Text":"Texte","White":"Blanc","Black":"Noir","Red":"Rouge","Green":"Vert","Blue":"Bleu","Yellow":"Jaune","Magenta":"Magenta","Cyan":"Cyan","Background":"Arrire-plan","Window":"Fentre","Transparent":"Transparent","Semi-Transparent":"Semi-transparent","Opaque":"Opaque","Font Size":"Taille des caractres","Text Edge Style":"Style des contours du texte","None":"Aucun","Raised":"lev","Depressed":"Enfonc","Uniform":"Uniforme","Dropshadow":"Ombre porte","Font Family":"Famille de polices","Proportional Sans-Serif":"Polices  chasse variable sans empattement (Proportional Sans-Serif)","Monospace Sans-Serif":"Polices  chasse fixe sans empattement (Monospace Sans-Serif)","Proportional Serif":"Polices  chasse variable avec empattement (Proportional Serif)","Monospace Serif":"Polices  chasse fixe avec empattement (Monospace Serif)","Casual":"Manuscrite","Script":"Scripte","Small Caps":"Petites capitales","Reset":"Rinitialiser","restore all settings to the default values":"Restaurer tous les paramtres aux valeurs par dfaut","Done":"Termin","Caption Settings Dialog":"Bote de dialogue des paramtres des sous-titres transcrits","Beginning of dialog window. Escape will cancel and close the window.":"Dbut de la fentre de dialogue. La touche d\'chappement annulera et fermera la fentre.","End of dialog window.":"Fin de la fentre de dialogue.","Exit Picture-in-Picture":"Quitter le mode image dans l\'image","Picture-in-Picture":"Image dans l\'image","{1} is loading.":"{1} en cours de chargement."}')},4448:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Cluicheadair fuaime","Video Player":"Cluicheadair video","Play":"Cluich","Pause":"Cuir na stad","Replay":"Cluich a-rithist","Current Time":"An ine lithreach","Duration":"Faide","Remaining Time":"An ine air fhgail","Stream Type":"Sersa an t-sruthaidh","LIVE":"BE","Seek to live, currently behind live":"A sireadh sruth be s air dheireadh","Seek to live, currently playing live":"A sireadh sruth be s ga chluich","Loaded":"Air a luchdadh","Progress":"Adhartas","Progress Bar":"Br adhartais","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":"Ln-sgrn","Non-Fullscreen":"Fg modh ln-sgrn","Mute":"Mch","Unmute":"D-mhch","Playback Rate":"Reat na cluiche","Subtitles":"Fo-thiotalan","subtitles off":"fo-thiotalan dheth","Captions":"Caipseanan","captions off":"caipseanan dheth","Chapters":"Caibideil","Descriptions":"Tuairisgeulan","descriptions off":"tuairisgeulan dheth","Audio Track":"Traca fuaime","Volume Level":"irde na fuaime","You aborted the media playback":"Sguir thu de chluich a mheadhain","A network error caused the media download to fail part-way.":"Cha deach leinn an crr dhen mheadhan a luchdadh a-nuas ri linn mearachd lonraidh.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Cha b urrainn dhuinn am meadhan a luchdadh  dhfhaoidte gun do dhfhillig leis an fhrithealaiche no an lonra no nach cuir sinn taic ris an fhrmat.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Sguir sinn de chluich a mheadhain  dhfhaoidte gu bheil e coirbte no gu bheil gleus aig a mheadhan nach cuir am brabhsair taic ris.","No compatible source was found for this media.":"Cha ceach ts co-chrdail a lorg airson a mheadhain seo.","The media is encrypted and we do not have the keys to decrypt it.":"Tha am meadhan crioptaichte s chan eil iuchair d-chrioptachaidh againn dha.","Play Video":"Cluich video","Close":"Din","Close Modal Dialog":"Din an cmhradh","Modal Window":"Uinneag mdach","This is a modal window":"Seo uinneag mdach","This modal can be closed by pressing the Escape key or activating the close button.":"S urrainn dhut seo a dhnadh leis an iuchair Escape no leis a phutan dnaidh.",", opens captions settings dialog":", fosglaidh e cmhradh nan roghainnean",", opens subtitles settings dialog":", fosglaidh e cmhradh nam fo-thiotalan",", opens descriptions settings dialog":", fosglaidh e cmhradh roghainnean nan tuairisgeulan",", selected":", air a thaghadh","captions settings":"roghainnean nan caipseanan","subtitles settings":"roghainnean nam fo-thiotalan","descriptions settings":"roghainnean nan tuairisgeulan","Text":"Teacsa","White":"Geal","Black":"Dubh","Red":"Dearg","Green":"Uaine","Blue":"Gorm","Yellow":"Buidhe","Magenta":"Magenta","Cyan":"Saidhean","Background":"Claibh","Window":"Uinneag","Transparent":"Trd-shoilleir","Semi-Transparent":"Leth-thrd-shoilleir","Opaque":"Trd-dhoilleir","Font Size":"Meud a chrutha-chl","Text Edge Style":"Stoidhle oir an teacsa","None":"Chan eil gin","Raised":"rdaichte","Depressed":"Air a bhrthadh","Uniform":"Cunbhalach","Dropshadow":"Sgil","Font Family":"Teaghlach a chrutha-chl","Proportional Sans-Serif":"Sans-serif co-rireach","Monospace Sans-Serif":"Sans-serif aon-leud","Proportional Serif":"Serif co-rireach","Monospace Serif":"Serif aon-leud","Casual":"Fuasgailte","Script":"Sgriobt","Small Caps":"Ceann-litrichean beaga","Reset":"Ath-shuidhich","restore all settings to the default values":"till dhan a h-uile bun-roghainn","Done":"Deiseil","Caption Settings Dialog":"Cmhradh roghainnean nan caipseanan","Beginning of dialog window. Escape will cancel and close the window.":"Toiseach uinneag cmhraidh. Sguiridh Escape dheth s dinidh e an uinneag","End of dialog window.":"Deireadh uinneag cmhraidh.","{1} is loading.":"Tha {1} ga luchdadh."}')},22634:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Reprodutor de son","Video Player":"Reprodutor de vdeo","Play":"Reproducir","Pause":"Pausa","Replay":"Repetir","Current Time":"Tempo reproducido","Duration":"Duracin","Remaining Time":"Tempo restante","Stream Type":"Tipo de fluxo","LIVE":"EN DIRECTO","Seek to live, currently behind live":"Buscando directo, actualmente tras en directo","Seek to live, currently playing live":"Buscando directo, actualmente reproducindo en directo","Loaded":"Cargado","Progress":"Progresin","Progress Bar":"Barra de progreso","progress bar timing: currentTime={1} duration={2}":"{1} de {2}","Fullscreen":"Pantalla completa","Non-Fullscreen":"Xanela","Mute":"Silenciar","Unmute":"Son activado","Playback Rate":"Velocidade de reproducin","Subtitles":"Subttulos","subtitles off":"subttulos desactivados","Captions":"Subttulos para xordos","captions off":"subttulos para xordos desactivados","Chapters":"Captulos","Descriptions":"Descricins","descriptions off":"descricins desactivadas","Audio Track":"Pista de son","Volume Level":"Nivel do volume","You aborted the media playback":"Vostede interrompeu a reproducin do medio.","A network error caused the media download to fail part-way.":"Un erro de rede interrompeu a descarga do medio.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Non foi posbel cargar o medio por mor dun fallo de rede ou do servidor ou porque o formato non  compatbel.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Interrompeuse a reproducin do medio por mor dun problema de estragamento dos datos ou porque o medio precisa funcins que o seu navegador non ofrece.","No compatible source was found for this media.":"Non se atopou ningunha orixe compatbel con este vdeo.","The media is encrypted and we do not have the keys to decrypt it.":"O medio est cifrado e non temos as chaves para descifralo .","Play Video":"Reproducir vdeo","Close":"Pechar","Close Modal Dialog":"Pechar a caixa de dilogo modal","Modal Window":"Xanela modal","This is a modal window":"Esta  unha xanela modal","This modal can be closed by pressing the Escape key or activating the close button.":"Este dilogo modal pdese pechar premendo a tecla Escape ou activando o botn de pechar.",", opens captions settings dialog":", abre o dilogo de axustes dos subttulos para xordos",", opens subtitles settings dialog":", abre o dilogo de axustes dos subttulos",", opens descriptions settings dialog":", abre o dilogo de axustes das descricins",", selected":", sleccionado","captions settings":"axustes dos subttulos para xordos","subtitles settings":"axustes dos subttulos","descriptions settings":"axustes das descricins","Text":"Texto","White":"Branco","Black":"Negro","Red":"Vermello","Green":"Verde","Blue":"Azul","Yellow":"Marelo","Magenta":"Maxenta","Cyan":"Cian","Background":"Fondo","Window":"Xanela","Transparent":"Transparente","Semi-Transparent":"Semi-transparente","Opaque":"Opaca","Font Size":"Tamao das letras","Text Edge Style":"Estilo do bordos do texto","None":"Ningn","Raised":"rguida","Depressed":"Cada","Uniform":"Uniforme","Dropshadow":"Sombra cada","Font Family":"Familia de letras","Proportional Sans-Serif":"Sans-Serif proporcional","Monospace Sans-Serif":"Sans-Serif monoespazo (caixa fixa)","Proportional Serif":"Serif proporcional","Monospace Serif":"Serif monoespazo (caixa fixa)","Casual":"Manuscrito","Script":"Itlica","Small Caps":"Pequenas maisculas","Reset":"Reiniciar","restore all settings to the default values":"restaurar todos os axustes aos valores predeterminados","Done":"Feito","Caption Settings Dialog":"Dilogo de axustes dos subttulos para xordos","Beginning of dialog window. Escape will cancel and close the window.":"Inicio da xanela de dilogo. A tecla Escape cancelar e pechar a xanela.","End of dialog window.":"Fin da xanela de dilogo.","{1} is loading.":"{1} est a cargar."}')},37852:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":" ","Video Player":" ","Play":"","Pause":"","Replay":" ","Current Time":" ","Duration":" ","Remaining Time":" ","Stream Type":" Stream","LIVE":" ","Loaded":"","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":" ","Non-Fullscreen":"  ","Mute":"","Unmute":" ","Playback Rate":" ","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Descriptions":"","descriptions off":" ","Audio Track":" ","Volume Level":" ","You aborted the media playback":"   ","A network error caused the media download to fail part-way.":"      .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"    ,           .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"                 .","No compatible source was found for this media.":"      .","The media is encrypted and we do not have the keys to decrypt it.":"        .","Play Video":" ","Close":"","Close Modal Dialog":" - ","Modal Window":" ","This is a modal window":"  ","This modal can be closed by pressing the Escape key or activating the close button.":"     \\"    -Escape    .",", opens captions settings dialog":",    ",", opens subtitles settings dialog":",    ",", opens descriptions settings dialog":",    ",", selected":", /","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"\'","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":" ","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":" ","Font Family":" ","Proportional Sans-Serif":"   (Proportional Sans-Serif)","Monospace Sans-Serif":"    (Monospace Sans-Serif)","Proportional Serif":"   (Proportional Serif)","Monospace Serif":"    (Monospace Serif)","Casual":"","Script":"","Small Caps":" ","Reset":"","restore all settings to the default values":"      ","Done":"","Caption Settings Dialog":"-  ","Beginning of dialog window. Escape will cancel and close the window.":"  -. Escape    ","End of dialog window.":"  -."}')},62582:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":" ","Video Player":" ","Play":"","Pause":"","Replay":"  ","Current Time":" ","Duration":"","Remaining Time":" ","Stream Type":" ","LIVE":"","Seek to live, currently behind live":"     ,      ","Seek to live, currently playing live":"     ,     ","Loaded":" ","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{2}   {1}","Fullscreen":" ","Non-Fullscreen":"    ","Mute":" ","Unmute":" ","Playback Rate":"  ","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Descriptions":"","descriptions off":" ","Audio Track":" ","Volume Level":" ","You aborted the media playback":"     ","A network error caused the media download to fail part-way.":"            ","The media could not be loaded, either because the server or network failed or because the format is not supported.":"     ,                ","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"     , :                   ","No compatible source was found for this media.":"        .","The media is encrypted and we do not have the keys to decrypt it.":"            ","Play Video":" ","Close":" ","Close Modal Dialog":"   ","Modal Window":" ","This is a modal window":"    ","This modal can be closed by pressing the Escape key or activating the close button.":"                 ",", opens captions settings dialog":",     ",", opens subtitles settings dialog":",     ",", opens descriptions settings dialog":",     ",", selected":",  ","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":" ","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":" ","Raised":" ","Depressed":"","Uniform":"","Dropshadow":"","Font Family":" ","Proportional Sans-Serif":" -","Monospace Sans-Serif":" -","Proportional Serif":" ","Monospace Serif":" ","Casual":"","Script":"","Small Caps":" ","Reset":" ","restore all settings to the default values":"       ","Done":"","Caption Settings Dialog":"  ","Beginning of dialog window. Escape will cancel and close the window.":"           ","End of dialog window.":"   ","{1} is loading.":"{1}    ","Exit Picture-in-Picture":"--   ","Picture-in-Picture":"--"}')},60431:e=>{"use strict";e.exports=JSON.parse('{"Play":"Pusti","Pause":"Pauza","Current Time":"Trenutno vrijeme","Duration":"Vrijeme trajanja","Remaining Time":"Preostalo vrijeme","Stream Type":"Nain strimovanja","LIVE":"UIVO","Loaded":"Uitan","Progress":"Progres","Fullscreen":"Puni ekran","Non-Fullscreen":"Mali ekran","Mute":"Priguen","Unmute":"Ne-priguen","Playback Rate":"Stopa reprodukcije","Subtitles":"Podnaslov","subtitles off":"Podnaslov deaktiviran","Captions":"Titlovi","captions off":"Titlovi deaktivirani","Chapters":"Poglavlja","You aborted the media playback":"Iskljuili ste reprodukciju videa.","A network error caused the media download to fail part-way.":"Video se prestao preuzimati zbog greke na mrei.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video se ne moe reproducirati zbog servera, greke u mrei ili je format ne podran.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Reprodukcija videa je zaustavljenja zbog greke u formatu ili zbog verzije vaeg pretraivaa.","No compatible source was found for this media.":"Nije naen nijedan kompatibilan izvor ovog videa."}')},59892:e=>{"use strict";e.exports=JSON.parse('{"Play":"Lejtszs","Pause":"Sznet","Current Time":"Aktulis idpont","Duration":"Hossz","Remaining Time":"Htralv id","Stream Type":"Adatfolyam tpusa","LIVE":"L","Loaded":"Betltve","Progress":"llapot","Fullscreen":"Teljes kperny","Non-Fullscreen":"Norml mret","Mute":"Nmts","Unmute":"Nmts kikapcsolva","Playback Rate":"Lejtszsi sebessg","Subtitles":"Feliratok","subtitles off":"Feliratok kikapcsolva","Captions":"Magyarz szveg","captions off":"Magyarz szveg kikapcsolva","Chapters":"Fejezetek","You aborted the media playback":"Lelltotta a lejtszst","A network error caused the media download to fail part-way.":"Hlzati hiba miatt a vide rszlegesen tltdtt le.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"A vide nem tlthet be hlzati vagy kiszolgli hiba miatt, vagy a formtuma nem tmogatott.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"A lejtszs adatsrls miatt lellt, vagy a vide egyes tulajdonsgait a bngszje nem tmogatja.","No compatible source was found for this media.":"Nincs kompatibilis forrs ehhez a videhoz.","Audio Player":"Audio lejtsz","Video Player":"Vide lejtsz","Replay":"Visszajtszs","Descriptions":"Lersok","descriptions off":"lersok kikapcsolva","Audio Track":"Hangsv","Volume Level":"Hanger","Play Video":"Vide lejtszsa","Close":"Bezrs","Text":"Szveg","White":"Fehr","Black":"Fekete","Red":"Piros","Green":"Zld","Blue":"Kk","Yellow":"Srga","Background":"Httr","Window":"Ablak","Transparent":"tltsz","Semi-Transparent":"Flig tltsz","Opaque":"ttetsz","Font Size":"Betmret","Font Family":"Bettpus","Done":"Ksz","Picture-in-Picture":"Kp a kpben","Exit Picture-in-Picture":"Kilps kp a kpben mdbl","{1} is loading.":"{1} betltse.","Reset":"Visszallts","restore all settings to the default values":"sszes bellts visszalltsa az alaprtelmezett rtkekre","The media is encrypted and we do not have the keys to decrypt it.":"A mdia titkostva van s nincsenek kulcsok a visszafejtshez.","Close Modal Dialog":"Felugr ablak bezrsa","Modal Window":"Felugr ablak","This modal can be closed by pressing the Escape key or activating the close button.":"Ezt a felugr ablakot az Escape gomb megnyomsval vagy a bezr gomb aktivlsval lehet bezrni.",", selected":", kivlasztva","descriptions settings":"lersok belltsa","Text Edge Style":"Szvegl stlus","This is a modal window":"Ez egy felugr ablak","Cyan":"Cin","Dropshadow":"rnyk","End of dialog window.":"Prbeszdablak vge.","Progress Bar":"Folyamatjelz sv","Beginning of dialog window. Escape will cancel and close the window.":"Prbeszdablak eleje. Az Escape gomb befejezi s bezrja az ablakot.","Caption Settings Dialog":"Feliratbelltsok prbeszdablak",", opens descriptions settings dialog":", megnyitja a lersok belltsainak prbeszdablakjt",", opens captions settings dialog":", megnyitja a magyarz szvegek belltsainak prbeszdablakjt",", opens subtitles settings dialog":", megnyitja a feliratok belltsainak prbeszdablakjt","Seek to live, currently behind live":"l adshoz tekers, jelenleg az l ads mgtt van","Seek to live, currently playing live":"l adshoz tekers, jelenleg az l adsnl van","progress bar timing: currentTime={1} duration={2}":"{1} / {2}","Magenta":"Lila","Script":"Script","Casual":"Casual","Monospace Serif":"Monospace Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Sans-Serif":"Proportional Sans-Serif","Proportional Serif":"Proportional Serif","Uniform":"Uniform","Small Caps":"Kiskapitlis","None":"Egyik sem","captions settings":"magyarz szvegek belltsai","subtitles settings":"feliratok belltsai","Raised":"Emelt","Depressed":"Nyomott"}')},21910:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Lettore audio","Video Player":"Lettore video","Play":"Play","Pause":"Pausa","Replay":"Replay","Current Time":"Orario attuale","Duration":"Durata","Remaining Time":"Tempo rimanente","Stream Type":"Tipo del Streaming","LIVE":"LIVE","Loaded":"Caricato","Progress":"Stato","Progress Bar":"Barra di avanzamento","progress bar timing: currentTime={1} duration={2}":"{1} di {2}","Fullscreen":"Schermo intero","Non-Fullscreen":"Chiudi Schermo intero","Mute":"Muto","Unmute":"Audio","Playback Rate":"Tasso di riproduzione","Subtitles":"Sottotitoli","subtitles off":"Senza sottotitoli","Captions":"Sottotitoli non udenti","captions off":"Senza sottotitoli non udenti","Chapters":"Capitolo","Descriptions":"Descrizioni","descriptions off":"Descrizioni disattivate","Audio Track":"Traccia audio","Volume Level":"Livello del volume","You aborted the media playback":"La riproduzione del filmato  stata interrotta.","A network error caused the media download to fail part-way.":"Il download del filmato  stato interrotto a causa di un problema rete.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Il filmato non pu essere caricato a causa di un errore nel server o nella rete o perch il formato non viene supportato.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La riproduzione del filmato  stata interrotta a causa di un file danneggiato o per lutilizzo di impostazioni non supportate dal browser.","No compatible source was found for this media.":"Non ci sono fonti compatibili per questo filmato.","The media is encrypted and we do not have the keys to decrypt it.":"Il contenuto multimediale  criptato e non disponiamo delle chiavi per decifrarlo.","Play Video":"Riprodurre il video","Close":"Chiudere","Close Modal Dialog":"Chiudere la finestra di dialogo","Modal Window":"Finestra di dialogo","This is a modal window":"Questa  una finestra di dialogo","This modal can be closed by pressing the Escape key or activating the close button.":"Questa finestra di dialogo pu essere chiusa premendo sul tasto Esc o attivando il pulsante di chiusura.",", opens captions settings dialog":", aprire i parametri della trascrizione dei sottotitoli",", opens subtitles settings dialog":", aprire i parametri dei sottotitoli",", opens descriptions settings dialog":", aprire i parametri delle descrizioni",", selected":", selezionato","captions settings":"Parametri della trascrizione dei sottotitoli","subtitles settings":"Parametri dei sottotitoli","descriptions settings":"Parametri delle descrizioni","Text":"Testo","White":"Bianco","Black":"Nero","Red":"Rosso","Green":"Verde","Blue":"Blu","Yellow":"Giallo","Magenta":"Magenta","Cyan":"Ciano","Background":"Sfondo","Window":"Finestra","Transparent":"Trasparente","Semi-Transparent":"Semi-Trasparente","Opaque":"Opaco","Font Size":"Dimensione dei caratteri","Text Edge Style":"Stile dei bordi del testo","None":"Nessuno","Uniform":"Uniforme","Dropshadow":"Ombreggiatura","Font Family":"Famiglia di caratteri","Proportional Sans-Serif":"Carattere a spaziatura variabile senza grazie (Proportional Sans-Serif)","Monospace Sans-Serif":"Carattere a spaziatura fissa senza grazie (Monospace Sans-Serif)","Proportional Serif":"Carattere a spaziatura variabile con grazie (Proportional Serif)","Monospace Serif":"Carattere a spaziatura fissa con grazie (Monospace Serif)","Small Caps":"Maiuscoletto","Reset":"Reinizializzare","restore all settings to the default values":"Ripristinare i valori predefiniti per tutti i parametri","Done":"Operazione completata","Caption Settings Dialog":"Finestra di dialogo dei parametri della trascrizione dei sottotitoli","Beginning of dialog window. Escape will cancel and close the window.":"Inizio della finestra di dialogo. Il tasto Esc annuller loperazione e chiuder la finestra.","End of dialog window.":"Fine della finestra di dialogo.","{1} is loading.":"{1} in fase di caricamento.","Exit Picture-in-Picture":"Uscire dalla modalit Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture"}')},3992:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"","Video Player":"","Play":"","Pause":"","Replay":"","Current Time":"","Duration":"","Remaining Time":"","Stream Type":"","LIVE":"","Loaded":"","Progress":"","Progress Bar":"","progress bar timing: currentTime={1} duration={2}":"{2}{1}","Fullscreen":"","Non-Fullscreen":"","Mute":"","Unmute":"","Playback Rate":"","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Descriptions":"","descriptions off":"","Audio Track":"","Volume Level":"","You aborted the media playback":"","A network error caused the media download to fail part-way.":" ","The media could not be loaded, either because the server or network failed or because the format is not supported.":"","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"","No compatible source was found for this media.":"","The media is encrypted and we do not have the keys to decrypt it.":"","Play Video":"","Close":"","Close Modal Dialog":"","Modal Window":"","This is a modal window":"","This modal can be closed by pressing the Escape key or activating the close button.":"Esc",", opens captions settings dialog":", ",", opens subtitles settings dialog":", ",", opens descriptions settings dialog":", ",", selected":", ","captions settings":"","subtitles settings":"","descriptions settings":"","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":"","Text Edge Style":"","None":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"","Monospace Sans-Serif":"","Proportional Serif":"","Monospace Serif":"","Small Caps":"","Reset":"","restore all settings to the default values":"","Done":"","Caption Settings Dialog":"","Beginning of dialog window. Escape will cancel and close the window.":"Esc","End of dialog window.":"","{1} is loading.":"{1}","Exit Picture-in-Picture":"","Picture-in-Picture":""}')},10272:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":" ","Video Player":" ","Play":"","Pause":"","Replay":" ","Current Time":" ","Duration":" ","Remaining Time":" ","Stream Type":" ","LIVE":"","Loaded":"","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{2}  {1}","Fullscreen":" ","Non-Fullscreen":"  ","Mute":"","Unmute":" ","Playback Rate":" ","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Descriptions":" ","descriptions off":"  ","Audio Track":" ","Volume Level":" ","You aborted the media playback":"  .","A network error caused the media download to fail part-way.":"       .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"   .           .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"  .          .","No compatible source was found for this media.":"    .","The media is encrypted and we do not have the keys to decrypt it.":"        .","Play Video":" ","Close":"","Close Modal Dialog":"  ","Modal Window":" ","This is a modal window":" ","This modal can be closed by pressing the Escape key or activating the close button.":"  Esc        .",", opens captions settings dialog":",     ",", opens subtitles settings dialog":",     ",", opens descriptions settings dialog":",     ",", selected":", ","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":"","Uniform":"","Font Family":" ","Proportional Sans-Serif":" ","Monospace Sans-Serif":" ","Proportional Serif":" ","Monospace Serif":" ","Small Caps":"","Reset":"","restore all settings to the default values":"   ","Done":"","Caption Settings Dialog":"   ","Beginning of dialog window. Escape will cancel and close the window.":" . Esc     .","End of dialog window.":" ","{1} is loading.":"{1}()  .","Exit Picture-in-Picture":"Picture-in-Picture ","Picture-in-Picture":"Picture-in-Picture"}')},85593:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Audio atskaotjs","Video Player":"Video atskaotjs","Play":"Atskaot","Pause":"Pauzt","Replay":"Atkrtot","Current Time":"Esoais laiks","Duration":"Ilgums","Remaining Time":"Atlikuais laiks","Stream Type":"Straumes veids","LIVE":"LIVE","Seek to live, currently behind live":"Priet uz tieraidi","Seek to live, currently playing live":"Priet uz tieraidi","Loaded":"Ieldts","Progress":"Progress","Progress Bar":"Progresa josla","progress bar timing: currentTime={1} duration={2}":"{1} no {2}","Fullscreen":"Pilnekrna rems","Non-Fullscreen":"Iziet no pilnekrna rema","Mute":"Izslgt skau","Unmute":"Ieslgt skau","Playback Rate":"Atskaoanas trums","Subtitles":"Subtitri","subtitles off":"Izslgt subtitrus","Captions":"Paraksti","captions off":"Izslgt parakstus","Chapters":"Temati","Descriptions":"Apraksti","descriptions off":"Izslgt aprakstus","Audio Track":"Audio celi","Volume Level":"Skaums","You aborted the media playback":"Atskaoana atcelta","A network error caused the media download to fail part-way.":"Tkla kdas d, multivides lejupielde neizdevs.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Neizdevs ieldt multividi, iespjams severa, vai tkla kmes d, vai neatbalstta formta d.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Atskaoana tika prtraukta tkla kmes d vai prlkprogrammas iespju trkuma d.","No compatible source was found for this media.":"Netika atrasts atbilstos multivides avots.","The media is encrypted and we do not have the keys to decrypt it.":"Multividi nevar atskaot, jo tas ir kriptts un nav pieejama dekriptanas atslga.","Play Video":"Atskaot video","Close":"Aizvrt","Close Modal Dialog":"Aizvrt logu","Modal Window":"Logs","This is a modal window":"Logs","This modal can be closed by pressing the Escape key or activating the close button.":"o logu var aizvrt, nospieot uz aizvranas pogas vai taustia ESC.",", opens captions settings dialog":", atvrs parakstu logu",", opens subtitles settings dialog":", atvrs subtitru logu",", opens descriptions settings dialog":", atvrs aprakstu logu",", selected":", izvlts","captions settings":"parakstu iestatjumi","subtitles settings":"subtitru iestatjumi","descriptions settings":"aprakstu iestatjumi","Text":"Teksts","White":"Balts","Black":"Melns","Red":"Sarkans","Green":"Za","Blue":"Zils","Yellow":"Dzeltens","Magenta":"Purpursarkana","Cyan":"Cina","Background":"Fons","Window":"Logs","Transparent":"Caurspdgs","Semi-Transparent":"Daji caurspdgs","Opaque":"Necaurspdgs","Font Size":"rifta izmrs","Text Edge Style":"Teksta nas stils","None":"Neviens","Raised":"Izvirzts","Depressed":"Samazints","Uniform":"Vienmrgs","Dropshadow":"nots","Font Family":"rifts","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif","Casual":"Casual","Script":"Script","Small Caps":"Small Caps","Reset":"Atiestatt","restore all settings to the default values":"atiestatt iestatjumu uz noklusjumu","Done":"Gatavs","Caption Settings Dialog":"Parakstu iestatjumi","Beginning of dialog window. Escape will cancel and close the window.":"Paraksta iestatjumu skums. Lai aizvrtu, spiediet ESC taustiu.","End of dialog window.":"Parakstu iestatjumu loga beigas","{1} is loading.":"{1} ield.","Exit Picture-in-Picture":"Iziet no Attls attl","Picture-in-Picture":"Attls attl"}')},36522:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Lydspiller","Video Player":"Videospiller","Play":"Spill","Pause":"Pause","Replay":"Spill om igjen","Current Time":"Aktuell tid","Duration":"Varighet","Remaining Time":"Gjenstende tid","Stream Type":"Type strm","LIVE":"DIREKTE","Seek to live, currently behind live":"Hopp til live, spiller tidligere i sendingen n","Seek to live, currently playing live":"Hopp til live, spiller live n","Loaded":"Lastet inn","Progress":"Framdrift","Progress Bar":"Framdriftsviser","progress bar timing: currentTime={1} duration={2}":"{1} av {2}","Fullscreen":"Fullskjerm","Non-Fullscreen":"Lukk fullskjerm","Mute":"Lyd av","Unmute":"Lyd p","Playback Rate":"Avspillingshastighet","Subtitles":"Teksting p","subtitles off":"Teksting av","Captions":"Teksting for hrselshemmede p","captions off":"Teksting for hrselshemmede av","Chapters":"Kapitler","Descriptions":"Beskrivelser","descriptions off":"beskrivelser av","Audio Track":"Lydspor","Volume Level":"Volumniv","You aborted the media playback":"Du avbrt avspillingen.","A network error caused the media download to fail part-way.":"En nettverksfeil avbrt nedlasting av videoen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Videoen kunne ikke lastes ned, p grunn av nettverksfeil eller serverfeil, eller fordi formatet ikke er stttet.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Videoavspillingen ble avbrudt p grunn av delagte data eller fordi videoen ville gjre noe som nettleseren din ikke har sttte for.","No compatible source was found for this media.":"Fant ikke en kompatibel kilde for dette mediainnholdet.","The media is encrypted and we do not have the keys to decrypt it.":"Mediefilen er kryptert og vi mangler nkler for  dekryptere den.","Play Video":"Spill av video","Close":"Lukk","Close Modal Dialog":"Lukk dialogvinduet","Modal Window":"Dialogvindu","This is a modal window":"Dette er et dialogvindu","This modal can be closed by pressing the Escape key or activating the close button.":"Vinduet kan lukkes ved  trykke p Escape-tasten eller lukkeknappen.",", opens captions settings dialog":", pner innstillinger for teksting for hrselshemmede",", opens subtitles settings dialog":", pner innstillinger for teksting",", opens descriptions settings dialog":", pner innstillinger for beskrivelser",", selected":", valgt","captions settings":"innstillinger for teksting","subtitles settings":"innstillinger for teksting","descriptions settings":"innstillinger for beskrivelser","Text":"Tekst","White":"Hvit","Black":"Svart","Red":"Rd","Green":"Grnn","Blue":"Bl","Yellow":"Gul","Magenta":"Magenta","Cyan":"Turkis","Background":"Bakgrunn","Window":"Vindu","Transparent":"Gjennomsiktig","Semi-Transparent":"Delvis gjennomsiktig","Opaque":"Ugjennomsiktig","Font Size":"Tekststrrelse","Text Edge Style":"Tekstkant","None":"Ingen","Raised":"Uthevet","Depressed":"Nedtrykt","Uniform":"Enkel","Dropshadow":"Skygge","Font Family":"Skrifttype","Proportional Sans-Serif":"Proporsjonal skrift uten seriffer","Monospace Sans-Serif":"Fastbreddeskrift uten seriffer","Proportional Serif":"Proporsjonal skrift med seriffer","Monospace Serif":"Fastbreddeskrift med seriffer","Casual":"Uformell","Script":"Skrskrift","Small Caps":"Kapitler","Reset":"Tilbakestill","restore all settings to the default values":"tilbakestill alle innstillinger til standardverdiene","Done":"Ferdig","Caption Settings Dialog":"Innstillingsvindu for teksting for hrselshemmede","Beginning of dialog window. Escape will cancel and close the window.":"Begynnelse p dialogvindu. Trykk Escape for  avbryte og lukke vinduet.","End of dialog window.":"Avslutning p dialogvindu.","{1} is loading.":"{1} laster."}')},43420:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Audiospeler","Video Player":"Videospeler","Play":"Afspelen","Pause":"Pauzeren","Replay":"Opnieuw afspelen","Current Time":"Huidige tijd","Duration":"Tijdsduur","Remaining Time":"Resterende tijd","Stream Type":"Streamtype","LIVE":"LIVE","Loaded":"Geladen","Progress":"Voortgang","Progress Bar":"Voortgangsbalk","progress bar timing: currentTime={1} duration={2}":"{1} van {2}","Fullscreen":"Volledig scherm","Non-Fullscreen":"Geen volledig scherm","Mute":"Dempen","Unmute":"Niet dempen","Playback Rate":"Afspeelsnelheid","Subtitles":"Ondertiteling","subtitles off":"ondertiteling uit","Captions":"Bijschriften","captions off":"bijschriften uit","Chapters":"Hoofdstukken","Descriptions":"Beschrijvingen","descriptions off":"beschrijvingen uit","Audio Track":"Audiospoor","Volume Level":"Geluidsniveau","You aborted the media playback":"U heeft het afspelen van de media afgebroken","A network error caused the media download to fail part-way.":"Een netwerkfout heeft ervoor gezorgd dat het downloaden van de media halverwege is mislukt.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"De media kon niet worden geladen, dit komt doordat of de server of het netwerk mislukt of doordat het formaat niet wordt ondersteund.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Het afspelen van de media is afgebroken door een probleem met beschadeigde gegevens of doordat de media functies gebruikt die uw browser niet ondersteund.","No compatible source was found for this media.":"Er is geen geschikte bron voor deze media gevonden.","The media is encrypted and we do not have the keys to decrypt it.":"De media is versleuteld en we hebben de sleutels niet om deze te ontsleutelen.","Play Video":"Video afspelen","Close":"Sluiten","Close Modal Dialog":"Extra venster sluiten","Modal Window":"Extra venster","This is a modal window":"Dit is een extra venster","This modal can be closed by pressing the Escape key or activating the close button.":"Dit venster kan worden gesloten door op de Escape-toets te drukken of door de sluiten-knop te activeren.",", opens captions settings dialog":", opent instellingen-venster voor bijschriften",", opens subtitles settings dialog":", opent instellingen-venster voor ondertitelingen",", opens descriptions settings dialog":", opent instellingen-venster voor beschrijvingen",", selected":", geselecteerd","captions settings":"bijschriften-instellingen","subtitles settings":"ondertiteling-instellingen","descriptions settings":"beschrijvingen-instellingen","Text":"Tekst","White":"Wit","Black":"Zwart","Red":"Rood","Green":"Groen","Blue":"Blauw","Yellow":"Geel","Magenta":"Magenta","Cyan":"Cyaan","Background":"Achtergrond","Window":"Venster","Transparent":"Transparant","Semi-Transparent":"Semi-transparant","Opaque":"Ondoorzichtig","Font Size":"Lettergrootte","Text Edge Style":"Stijl tekstrand","None":"Geen","Raised":"Verhoogd","Depressed":"Ingedrukt","Uniform":"Uniform","Dropshadow":"Schaduw","Font Family":"Lettertype","Proportional Sans-Serif":"Proportioneel sans-serif","Monospace Sans-Serif":"Monospace sans-serif","Proportional Serif":"Proportioneel serif","Monospace Serif":"Monospace serif","Casual":"Luchtig","Script":"Script","Small Caps":"Kleine hoofdletters","Reset":"Herstellen","restore all settings to the default values":"alle instellingen naar de standaardwaarden herstellen","Done":"Klaar","Caption Settings Dialog":"Venster voor bijschriften-instellingen","Beginning of dialog window. Escape will cancel and close the window.":"Begin van dialoogvenster. Escape zal annuleren en het venster sluiten.","End of dialog window.":"Einde van dialoogvenster."}')},59678:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Lydspelar","Video Player":"Videospelar","Play":"Spel","Pause":"Pause","Replay":"Spel om att","Current Time":"Aktuell tid","Duration":"Varigheit","Remaining Time":"Tid attende","Stream Type":"Type straum","LIVE":"DIREKTE","Seek to live, currently behind live":"Hopp til live, spelar tidlegare i sendinga no","Seek to live, currently playing live":"Hopp til live, speler live no","Loaded":"Lasta inn","Progress":"Framdrift","Progress Bar":"Framdriftsvisar","progress bar timing: currentTime={1} duration={2}":"{1} av {2}","Fullscreen":"Fullskjerm","Non-Fullscreen":"Stenga fullskjerm","Mute":"Lyd av","Unmute":"Lyd p","Playback Rate":"Avspelingshastigheit","Subtitles":"Teksting p","subtitles off":"Teksting av","Captions":"Teksting for hyrselshemma p","captions off":"Teksting for hyrselshemma av","Chapters":"Kapitel","Descriptions":"Beskrivingar","descriptions off":"beskrivingar av","Audio Track":"Lydspor","Volume Level":"Volumniv","You aborted the media playback":"Du avbraut avspelinga.","A network error caused the media download to fail part-way.":"Ein nettverksfeil avbraut nedlasting av videoen.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Videoen kunne ikkje lastas ned, p grunn av ein nettverksfeil eller serverfeil, eller av di formatet ikkje er stoda.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Videoavspelinga blei broten p grunn av ydelagde data eller av di videoen ville gjera noe som nettlesaren din ikkje stodar.","No compatible source was found for this media.":"Fant ikke en kompatibel kilde for dette mediainnholdet.","The media is encrypted and we do not have the keys to decrypt it.":"Mediefila er kryptert og vi manglar nyklar for  dekryptere ho.","Play Video":"Spel av video","Close":"Lukk","Close Modal Dialog":"Lukk dialogvindauge","Modal Window":"Dialogvindauge","This is a modal window":"Dette er eit dialogvindauge","This modal can be closed by pressing the Escape key or activating the close button.":"Vindauget kan lukkast ved  trykke p Escape-tasten eller lukkeknappen.",", opens captions settings dialog":", opnar innstillingar for teksting for hyrselshemma",", opens subtitles settings dialog":", opnar innstillingar for teksting",", opens descriptions settings dialog":", opnar innstillingar for beskrivingar",", selected":", vald","captions settings":"innstillingar for teksting","subtitles settings":"innstillingar for teksting","descriptions settings":"innstillingar for skildringar","Text":"Tekst","White":"Kvit","Black":"Svart","Red":"Raud","Green":"Grn","Blue":"Bl","Yellow":"Gul","Magenta":"Magenta","Cyan":"Turkis","Background":"Bakgrunn","Window":"Vindauge","Transparent":"Gjennomsiktig","Semi-Transparent":"Delvis gjennomsiktig","Opaque":"Ugjennomsiktig","Font Size":"Tekststorleik","Text Edge Style":"Tekstkant","None":"Ingen","Raised":"Utheva","Depressed":"Nedtrykt","Uniform":"Enkel","Dropshadow":"Skugge","Font Family":"Skrifttype","Proportional Sans-Serif":"Proporsjonal skrift utan seriffar","Monospace Sans-Serif":"Fastbreddeskrift utan seriffar","Proportional Serif":"Proporsjonal skrift med seriffar","Monospace Serif":"Fastbreddeskrift med seriffar","Casual":"Uformell","Script":"Skrskrift","Small Caps":"Kapitler","Reset":"Tilbakestell","restore all settings to the default values":"tilbakestell alle innstillingar til standardverdiane","Done":"Ferdig","Caption Settings Dialog":"Innstillingsvindauge for teksting for hyrselshemma","Beginning of dialog window. Escape will cancel and close the window.":"Byrjing p dialogvindauge. Trykk Escape for  avbryte og lukke vindauget.","End of dialog window.":"Avslutning p dialogvindauge.","{1} is loading.":"{1} lastar."}')},50302:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Lector udio","Video Player":"Lector vido","Play":"Lectura","Pause":"Pausa","Replay":"Tornar legir","Current Time":"Durada passada","Duration":"Durada","Remaining Time":"Temps restant","Stream Type":"Tipe de difusion","LIVE":"DIRCTE","Seek to live, currently behind live":"Trapar lo dircte, actualament darrir lo dircte","Seek to live, currently playing live":"Trapar lo dircte, actualament lo dircte es en lectura","Loaded":"Cargat","Progress":"Progression","Progress Bar":"Barra de progression","progress bar timing: currentTime={1} duration={2}":"{1} sus {2}","Fullscreen":"Ecran complt","Non-Fullscreen":"Pas en ecran complt","Mute":"Copar lo son","Unmute":"Restablir lo son","Playback Rate":"Velocitat de lectura","Subtitles":"Sosttols","subtitles off":"Sosttols desactivats","Captions":"Legendas","captions off":"Legendas desactivadas","Chapters":"Captols","Descriptions":"Descripcions","descriptions off":"descripcions desactivadas","Audio Track":"Pista udio","Volume Level":"Nivl del volum","You aborted the media playback":"Avtz copat la lectura del mdia.","A network error caused the media download to fail part-way.":"Una error de ret a provocat un fracs del telecargament.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Lo mdia a pas pogut sser cargat, si perque lo servidor o lo ret a fracassat si perque lo format es pas compatible.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"La lectura del mdia es copada a causa dun problma de corrupcion o perque lo mdia utiliza de foncionalitats pas suportadas pel navigador.","No compatible source was found for this media.":"Cap de font compatiblas pas trobada per aqueste mdia.","The media is encrypted and we do not have the keys to decrypt it.":"Lo mdia es chifrat e avm pas las claus per lo deschifrar.","Play Video":"Legir la vido","Close":"Tampar","Close Modal Dialog":"Tampar la fenstra","Modal Window":"Fenstra","This is a modal window":"Aqu es una fenstra","This modal can be closed by pressing the Escape key or activating the close button.":"Aquesta fenstra pt sser tampada en quichar Escapar sul clavir o en activar lo boton de tampadura.",", opens captions settings dialog":", dobrs la fenstra de paramtres de legendas",", opens subtitles settings dialog":", dobrs la fenstra de paramtres de sosttols",", opens descriptions settings dialog":", dobrs la fenstra de paramtres de descripcions",", selected":", seleccionat","captions settings":"paramtres de legendas","subtitles settings":"paramtres de sosttols","descriptions settings":"paramtres de descripcions","Text":"Txte","White":"Blanc","Black":"Negre","Red":"Roge","Green":"Verd","Blue":"Blau","Yellow":"Jaune","Magenta":"Magenta","Cyan":"Cian","Background":"Rireplan","Window":"Fenstra","Transparent":"Transparent","Semi-Transparent":"Semitransparent","Opaque":"Opac","Font Size":"Talha de la polissa","Text Edge Style":"Estil dels contorns del txte","None":"Cap","Raised":"Naut","Depressed":"Enfonsat","Uniform":"Unifrme","Dropshadow":"Ombrat","Font Family":"Familha de polissa","Proportional Sans-Serif":"Sans-Serif proporcionala","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Serif proporcionala","Monospace Serif":"Serif proporcionala","Casual":"Manuscrita","Script":"Script","Small Caps":"Pichonas majusculas","Reset":"Renicializar","restore all settings to the default values":"O restablir tot a las valors per defaut","Done":"Acabat","Caption Settings Dialog":"Fenstra de paramtres de legenda","Beginning of dialog window. Escape will cancel and close the window.":"Debuta de la fenstra. Escapar anullar e tampar la fenstra","End of dialog window.":"Fin de la fenstra.","{1} is loading.":"{1} es a cargar."}')},18059:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Odtwarzacz audio","Video Player":"Odtwarzacz wideo","Play":"Odtwrz","Pause":"Wstrzymaj","Replay":"Odtwrz ponownie","Current Time":"Aktualny czas","Duration":"Czas trwania","Remaining Time":"Pozostay czas","Stream Type":"Typ strumienia","LIVE":"NA YWO","Seek to live, currently behind live":"Przejd do transmisji na ywo, obecnie trwa odtwarzanie z archiwum","Seek to live, currently playing live":"Przejd do transmisji na ywo, obecnie trwa odtwarzanie na ywo","Loaded":"Zaadowany","Progress":"Status","Progress Bar":"Pasek postpu","progress bar timing: currentTime={1} duration={2}":"{1} z {2}","Fullscreen":"Peny ekran","Non-Fullscreen":"Peny ekran niedostpny","Mute":"Wycisz","Unmute":"Wycz wyciszenie","Playback Rate":"Prdko odtwarzania","Subtitles":"Napisy","subtitles off":"Napisy wyczone","Captions":"Transkrypcja","captions off":"Transkrypcja wyczona","Chapters":"Rozdziay","Descriptions":"Opisy","descriptions off":"Opisy wyczone","Audio Track":"cieka audio","Volume Level":"Poziom gonoci","You aborted the media playback":"Odtwarzanie zostao przerwane","A network error caused the media download to fail part-way.":"Bd sieci spowodowa czciowe niepowodzenie pobierania materiau wideo.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Materia wideo nie moe zosta zaadowany, poniewa wystpi problem z serwerem lub sieci albo format materiau wideo nie jest obsugiwany","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Odtwarzanie materiau wideo zostao przerwane z powodu uszkodzonego pliku wideo lub z powodu uycia funkcji multimediw nieobsugiwanych przez Twoj przegldark.","No compatible source was found for this media.":"Nie znaleziono kompatybilnego rda dla tego typu materiau wideo.","The media is encrypted and we do not have the keys to decrypt it.":"Materia jest zaszyfrowany, a nie mamy kluczy do jego odszyfrowania.","Play Video":"Odtwrz wideo","Close":"Zamknij","Close Modal Dialog":"Zamknij okno modalne","Modal Window":"Okno modalne","This is a modal window":"To jest okno modalne","This modal can be closed by pressing the Escape key or activating the close button.":"To okno modalne moesz zamkn, naciskajc klawisz Escape albo wybierajc przycisk Zamknij.",", opens captions settings dialog":", otwiera okno dialogowe ustawie transkrypcji",", opens subtitles settings dialog":", otwiera okno dialogowe napisw",", opens descriptions settings dialog":", otwiera okno dialogowe opisw",", selected":", zaznaczone","captions settings":"ustawienia transkrypcji","subtitles settings":"ustawienia napisw","descriptions settings":"ustawienia opisw","Text":"Tekst","White":"Biay","Black":"Czarny","Red":"Czerwony","Green":"Zielony","Blue":"Niebieski","Yellow":"ty","Magenta":"Karmazynowy","Cyan":"Cyjanowy","Background":"To","Window":"Okno","Transparent":"Przezroczysty","Semi-Transparent":"Pprzezroczysty","Opaque":"Nieprzezroczysty","Font Size":"Rozmiar czcionki","Text Edge Style":"Styl krawdzi tekstu","None":"Brak","Raised":"Podniesiony","Depressed":"Obniony","Uniform":"Rwnomierny","Dropshadow":"Cie","Font Family":"Krj czcionki","Proportional Sans-Serif":"Bezszeryfowa, proporcjonalna","Monospace Sans-Serif":"Bezszeryfowa, staa odlego znakw","Proportional Serif":"Szeryfowa, proporcjonalna","Monospace Serif":"Szeryfowa, staa odlego znakw","Casual":"Casual","Script":"Script","Small Caps":"Kapitaliki","Reset":"Ustawienia domylne","restore all settings to the default values":"zresetuj wszystkie ustawienia do domylnych wartoci","Done":"Gotowe","Caption Settings Dialog":"Okno dialogowe ustawie transkrypcji","Beginning of dialog window. Escape will cancel and close the window.":"Pocztek okna dialogowego. Klawisz Escape anuluje i zamyka okno.","End of dialog window.":"Koniec okna dialogowego.","{1} is loading.":"Wczytywanie pliku {1}.","Exit Picture-in-Picture":"Wyjd z trybu obraz w obrazie","Picture-in-Picture":"Obraz w obrazie","No content":"Brak zawartoci"}')},13708:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Reprodutor de udio","Video Player":"Reprodutor de vdeo","Play":"Tocar","Pause":"Pausar","Replay":"Tocar novamente","Current Time":"Tempo","Duration":"Durao","Remaining Time":"Tempo Restante","Stream Type":"Tipo de Stream","LIVE":"AO VIVO","Loaded":"Carregado","Progress":"Progresso","Progress Bar":"Barra de progresso","progress bar timing: currentTime={1} duration={2}":"{1} de {2}","Fullscreen":"Tela Cheia","Non-Fullscreen":"Tela Normal","Mute":"Mudo","Unmute":"Habilitar Som","Playback Rate":"Velocidade","Subtitles":"Legendas","subtitles off":"Sem Legendas","Captions":"Anotaes","captions off":"Sem Anotaes","Chapters":"Captulos","Descriptions":"Descries","descriptions off":"sem descries","Audio Track":"Faixa de udio","Volume Level":"Nvel de volume","You aborted the media playback":"Voc parou a execuo do vdeo.","A network error caused the media download to fail part-way.":"Um erro na rede causou falha durante o download da mdia.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"A mdia no pode ser carregada, por uma falha de rede ou servidor ou o formato no  suportado.","No compatible source was found for this media.":"Nenhuma fonte foi encontrada para esta mdia.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"A reproduo foi interrompida devido  um problema de mdia corrompida ou porque a mdia utiliza funes que seu navegador no suporta.","The media is encrypted and we do not have the keys to decrypt it.":"A mdia est criptografada e no temos as chaves para descriptografar.","Play Video":"Tocar Vdeo","Close":"Fechar","Close Modal Dialog":"Fechar Dilogo Modal","Modal Window":"Janela Modal","This is a modal window":"Isso  uma janela-modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta janela pode ser fechada pressionando a tecla de Escape.",", opens captions settings dialog":", abre as configuraes de legendas de comentrios",", opens subtitles settings dialog":", abre as configuraes de legendas",", opens descriptions settings dialog":", abre as configuraes",", selected":", selecionada","captions settings":"configuraes de legendas de comentrios","subtitles settings":"configuraes de legendas","descriptions settings":"configuraes das descries","Text":"Texto","White":"Branco","Black":"Preto","Red":"Vermelho","Green":"Verde","Blue":"Azul","Yellow":"Amarelo","Magenta":"Magenta","Cyan":"Ciano","Background":"Plano-de-Fundo","Window":"Janela","Transparent":"Transparente","Semi-Transparent":"Semi-Transparente","Opaque":"Opaco","Font Size":"Tamanho da Fonte","Text Edge Style":"Estilo da Borda","None":"Nenhum","Raised":"Elevado","Depressed":"Acachapado","Uniform":"Uniforme","Dropshadow":"Sombra de projeo","Font Family":"Famlia da Fonte","Proportional Sans-Serif":"Sans-Serif(Sem serifa) Proporcional","Monospace Sans-Serif":"Sans-Serif(Sem serifa) Monoespaada","Proportional Serif":"Serifa Proporcional","Monospace Serif":"Serifa Monoespaada","Casual":"Casual","Script":"Script","Small Caps":"Maisculas Pequenas","Reset":"Redefinir","restore all settings to the default values":"restaurar todas as configuraes aos valores padro","Done":"Salvar","Caption Settings Dialog":"Caxa-de-Dilogo das configuraes de Legendas","Beginning of dialog window. Escape will cancel and close the window.":"Iniciando a Janela-de-Dilogo. Pressionar Escape ir cancelar e fechar a janela.","End of dialog window.":"Fim da Janela-de-Dilogo","{1} is loading.":"{1} est carregando.","Exit Picture-in-Picture":"Sair de Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture"}')},9231:e=>{"use strict";e.exports=JSON.parse('{"Play":"Reproduzir","Pause":"Parar","Replay":"Reiniciar","Current Time":"Tempo Atual","Duration":"Durao","Remaining Time":"Tempo Restante","Stream Type":"Tipo de Stream","LIVE":"EM DIRETO","Loaded":"Carregado","Progress":"Progresso","Fullscreen":"Ecr inteiro","Non-Fullscreen":"Ecr normal","Mute":"Desativar som","Unmute":"Ativar som","Playback Rate":"Velocidade de reproduo","Subtitles":"Legendas","subtitles off":"desativar legendas","Captions":"Anotaes","captions off":"desativar anotaes","Chapters":"Captulos","Close Modal Dialog":"Fechar Janela Modal","Descriptions":"Descries","descriptions off":"desativar descries","Audio Track":"Faixa udio","You aborted the media playback":"Parou a reproduo do vdeo.","A network error caused the media download to fail part-way.":"Um erro na rede fez o vdeo falhar parcialmente.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"O vdeo no pode ser carregado, ou porque houve um problema na rede ou no servidor, ou porque formato do vdeo no  compatvel.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"A reproduo foi interrompida por um problema com o vdeo ou porque o formato no  compatvel com o seu navegador.","No compatible source was found for this media.":"No foi encontrada uma fonte de vdeo compatvel.","The media is encrypted and we do not have the keys to decrypt it.":"O vdeo est encriptado e no h uma chave para o desencriptar.","Play Video":"Reproduzir Vdeo","Close":"Fechar","Modal Window":"Janela Modal","This is a modal window":"Isto  uma janela modal","This modal can be closed by pressing the Escape key or activating the close button.":"Esta modal pode ser fechada pressionando a tecla ESC ou ativando o boto de fechar.",", opens captions settings dialog":", abre janela com definies de legendas",", opens subtitles settings dialog":", abre janela com definies de legendas",", opens descriptions settings dialog":", abre janela com definies de descries",", selected":", seleccionado"}')},74302:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Player audio","Video Player":"Player video","Play":"Pies","Pause":"Pauz","Replay":"Reluare","Current Time":"Ora curent","Duration":"Durat","Remaining Time":"Timp rmas","Stream Type":"Tip flux","LIVE":"N DIRECT","Seek to live, currently behind live":"Cutare n direct; n prezent, suntei n urm","Seek to live, currently playing live":"Cutare n direct; n prezent, se red n direct","Loaded":"ncrcat","Progress":"Progres","Progress Bar":"Bar de progres","progress bar timing: currentTime={1} duration={2}":"{1} din {2}","Fullscreen":"Ecran complet","Non-Fullscreen":"Ecran parial","Mute":"Suprimare sunet","Unmute":"Activare sunet","Playback Rate":"Rat de redare","Subtitles":"Subtitrri","subtitles off":"subtitrri dezactivate","Captions":"Indicaii scrise","captions off":"indicaii scrise dezactivate","Chapters":"Capitole","Descriptions":"Descrieri","descriptions off":"descrieri dezactivate","Audio Track":"Pist audio","Volume Level":"Nivel volum","You aborted the media playback":"Ai abandonat redarea media","A network error caused the media download to fail part-way.":"O eroare de reea a provocat eecul descrcrii coninutului media n timpul procesului.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Coninutul media nu a putut fi ncrcat, fie pentru c serverul sau reeaua a euat, fie pentru c formatul nu este acceptat.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Redarea media a fost ntrerupt din cauza coninutului corupt sau din cauza faptului c acest coninut media folosete funcii pe care browserul dvs. nu le accept.","No compatible source was found for this media.":"Nu au fost gsite surse compatibile pentru acest coninut media.","The media is encrypted and we do not have the keys to decrypt it.":"Coninutul media este criptat i nu avem cheile pentru decriptare.","Play Video":"Redare video","Close":"nchidere","Close Modal Dialog":"nchidere dialog modal","Modal Window":"Fereastr modal","This is a modal window":"Aceasta este o fereastr modal","This modal can be closed by pressing the Escape key or activating the close button.":"Aceast fereastr modal poate fi nchis cu tasta Escape sau butonul de nchidere.",", opens captions settings dialog":", deschide dialogul de setri pentru indicaii scrise",", opens subtitles settings dialog":", deschide dialogul de setri pentru subtitrri",", opens descriptions settings dialog":", deschide dialogul de setri pentru descrieri",", selected":", selectat","captions settings":"setri indicaii scrise","subtitles settings":"setri subtitrri","descriptions settings":"setri descrieri","Text":"Text","White":"Alb","Black":"Negru","Red":"Rou","Green":"Verde","Blue":"Albastru","Yellow":"Galben","Magenta":"Magenta","Cyan":"Cyan","Background":"Fundal","Window":"Fereastr","Transparent":"Transparent","Semi-Transparent":"Semitransparent","Opaque":"Opac","Font Size":"Mrime font","Text Edge Style":"Stil margine text","None":"Fr","Raised":"Ridicat","Depressed":"Apsat","Uniform":"Uniform","Dropshadow":"Umbr","Font Family":"Familie fonturi","Proportional Sans-Serif":"Sans-serif proporional","Monospace Sans-Serif":"Sans-serif monospaiu","Proportional Serif":"Serif proporional","Monospace Serif":"Serif monospaiu","Casual":"Informal","Script":"Script","Small Caps":"Majuscule mici","Reset":"Resetare","restore all settings to the default values":"readucei toate setrile la valorile implicite","Done":"Terminat","Caption Settings Dialog":"Dialog setri indicaii scrise","Beginning of dialog window. Escape will cancel and close the window.":"nceputul ferestrei de dialog. Tasta Escape va anula i va nchide fereastra.","End of dialog window.":"Sfritul ferestrei de dialog.","{1} is loading.":"{1} se ncarc.","Exit Picture-in-Picture":"nchidere imagine n imagine","Picture-in-Picture":"Imagine n imagine"}')},70116:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"","Video Player":"","Play":"","Pause":"","Replay":" ","Current Time":" ","Duration":"","Remaining Time":" ","Stream Type":" ","LIVE":" ","Seek to live, currently behind live":"    (   )","Seek to live, currently playing live":"    (   )","Loaded":"","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":" ","Non-Fullscreen":" ","Mute":" ","Unmute":" ","Playback Rate":" ","Subtitles":"","subtitles off":" .","Captions":"","captions off":" .","Chapters":"","Descriptions":"","descriptions off":" ","Audio Track":" ","Volume Level":" ","You aborted the media playback":"   ","A network error caused the media download to fail part-way.":"      .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"    -        .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"  -      ,    ,   .","No compatible source was found for this media.":"     .","The media is encrypted and we do not have the keys to decrypt it.":" ,        .","Play Video":" ","Close":"","Close Modal Dialog":"  ","Modal Window":" ","This is a modal window":"  ","This modal can be closed by pressing the Escape key or activating the close button.":"     Esc    .",", opens captions settings dialog":",    ",", opens subtitles settings dialog":",    ",", opens descriptions settings dialog":",    ",", selected":", ","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"  ","Monospace Sans-Serif":"  ","Proportional Serif":"  ","Monospace Serif":"  ","Casual":"","Script":"","Small Caps":"","Reset":"","restore all settings to the default values":"      ","Done":"","Caption Settings Dialog":"  ","Beginning of dialog window. Escape will cancel and close the window.":"  .  Escape     ","End of dialog window.":"  .","{1} is loading.":"{1} .","Exit Picture-in-Picture":"   ","Picture-in-Picture":"  "}')},75058:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Zvukov prehrva","Video Player":"Video prehrva","Play":"Prehra","Pause":"Pozastavi","Replay":"Prehra znova","Current Time":"Aktulny as","Duration":"as trvania","Remaining Time":"Zostvajci as","Stream Type":"Typ stopy","LIVE":"NAIVO","Loaded":"Natan","Progress":"Priebeh","Progress Bar":"Ukazovate priebehu","progress bar timing: currentTime={1} duration={2}":"asovanie ukazovatea priebehu: currentTime={1} duration={2}","Fullscreen":"Reim celej obrazovky","Non-Fullscreen":"Reim normlnej obrazovky","Mute":"Stlmi","Unmute":"Zrui stlmenie","Playback Rate":"Rchlos prehrvania","Subtitles":"Titulky","subtitles off":"titulky vypnut","Captions":"Popisky","captions off":"popisky vypnut","Chapters":"Kapitoly","Descriptions":"Opisy","descriptions off":"opisy vypnut","Audio Track":"Zvukov stopa","Volume Level":"rove hlasitosti","You aborted the media playback":"Preruili ste prehrvanie","A network error caused the media download to fail part-way.":"Sahovanie sboru bolo zruen pre chybu na sieti.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Sbor sa nepodarilo nata pre chybu servera, sieovho pripojenia, alebo je formt sboru nepodporovan.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Prehrvanie sboru bolo preruen pre pokoden dta, alebo sbor pouva vlastnosti, ktor v prehliada nepodporuje.","No compatible source was found for this media.":"Nebol njden iaden kompatibiln zdroj pre tento sbor.","The media is encrypted and we do not have the keys to decrypt it.":"Sbor je zaifrovan a nie je k dispozcii k na rozifrovanie.","Play Video":"Prehra video","Close":"Zatvori","Close Modal Dialog":"Zatvori modlne okno","Modal Window":"Modlne okno","This is a modal window":"Toto je modlne okno","This modal can be closed by pressing the Escape key or activating the close button.":"Toto modlne okno je mon zatvori stlaenm klvesy Escape, alebo aktivovanm tlaidla na zatvorenie.",", opens captions settings dialog":", otvor okno nastaven popiskov",", opens subtitles settings dialog":", otvor okno nastaven titulkov",", opens descriptions settings dialog":", otvor okno nastaven opisov",", selected":", oznaen","captions settings":"nastavenia popiskov","subtitles settings":"nastavenia titulkov","descriptions settings":"nastavenia opisov","Text":"Text","White":"Biela","Black":"ierna","Red":"erven","Green":"Zelen","Blue":"Modr","Yellow":"lt","Magenta":"Ruov","Cyan":"Tyrkysov","Background":"Pozadie","Window":"Okno","Transparent":"Priesvitn","Semi-Transparent":"Polopriesvitn","Opaque":"Pln","Font Size":"Vekos psma","Text Edge Style":"Typ okrajov psma","None":"iadne","Raised":"Zven","Depressed":"Znen","Uniform":"Pravideln","Dropshadow":"S tieom","Font Family":"Typ psma","Proportional Sans-Serif":"Proporn bezptkov","Monospace Sans-Serif":"Pravideln, bezptkov","Proportional Serif":"Proporn ptkov","Monospace Serif":"Pravideln ptkov","Casual":"Ben","Script":"Psan","Small Caps":"Mal kapitlky","Reset":"Resetova","restore all settings to the default values":"vetky nastavenia na zkladn hodnoty","Done":"Hotovo","Caption Settings Dialog":"Okno nastaven popiskov","Beginning of dialog window. Escape will cancel and close the window.":"Zaiatok okna. Klvesa Escape zru a zavrie okno.","End of dialog window.":"Koniec okna.","{1} is loading.":"{1} sa nata."}')},79505:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Avdio predvajalnik","Video Player":"Video predvajalnik","Play":"Predvajaj","Pause":"Zaasno ustavi","Replay":"Predvajaj ponovno","Current Time":"Trenutni as","Duration":"Trajanje","Remaining Time":"Preostali as","Stream Type":"Vrsta podatkovnega toka","LIVE":"V IVO","Seek to live, currently behind live":"Spremljaj v ivo (trenutno v zaostanku)","Seek to live, currently playing live":"Spremljaj v ivo (trenutno v ivo)","Loaded":"Naloeno","Progress":"Napredek","Progress Bar":"Vrstica napredka","progress bar timing: currentTime={1} duration={2}":"{1} od {2}","Fullscreen":"Celozaslonski prikaz","Non-Fullscreen":"Prikaz na delu zaslona","Mute":"Izkljui zvok","Unmute":"Vkljui zvok","Playback Rate":"Hitrost predvajanja","Subtitles":"Podnapisi","subtitles off":"podnapisi izklopljeni","Captions":"Zvoni zapis","captions off":"zvoni zapis izklopljen","Chapters":"Poglavja","Descriptions":"Opisi","descriptions off":"opisi izklopljeni","Audio Track":"Zvoni posnetek","Volume Level":"Raven glasnosti","You aborted the media playback":"Prekinili ste predvajanje.","A network error caused the media download to fail part-way.":"Prenos multimedijske datoteke ni uspel zaradi napake v omreju.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Multimedijske datoteke ni bilo mogoe naloiti zaradi napake na streniku oziroma omreju ali ker ta oblika ni podprta.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Predvajanje datoteke je bilo prekinjeno zaradi napak v datoteki ali ker uporablja funkcije, ki jih brskalnik ne podpira.","No compatible source was found for this media.":"Za to datoteko ni bil najden noben zdruljiv vir.","The media is encrypted and we do not have the keys to decrypt it.":"Datoteka je ifrirana in predvajalnik nima kljuev za njeno deifriranje.","Play Video":"Predvajaj","Close":"Zapri","Close Modal Dialog":"Zapri modalno okno","Modal Window":"Modalno okno","This is a modal window":"To je modalno okno","This modal can be closed by pressing the Escape key or activating the close button.":"To okno lahko zaprete s pritiskom na tipko Escape ali z aktiviranjem gumba za zapiranje.",", opens captions settings dialog":", odpre nastavitve za zvoni zapis",", opens subtitles settings dialog":", odpre nastavitve za podnapise",", opens descriptions settings dialog":", odpre nastavitve za opis",", selected":", izbrano","captions settings":"nastavitve zvonega zapisa","subtitles settings":"nastavitve podnapisov","descriptions settings":"nastavitve opisa","Text":"Tekst","White":"Bela","Black":"rna","Red":"Rdea","Green":"Zelena","Blue":"Modra","Yellow":"Rumena","Magenta":"Magenta","Cyan":"Cian","Background":"Ozadje","Window":"Okno","Transparent":"Prozorno","Semi-Transparent":"Delno prozorno","Opaque":"Neprozorno","Font Size":"Velikost pisave","Text Edge Style":"Slog roba besedila","None":"Brez","Raised":"Dvignjeno","Depressed":"Vtisnjeno","Uniform":"Enakomerno","Dropshadow":"S senco","Font Family":"Druina pisave","Small Caps":"Male rke","Reset":"Ponastavi","restore all settings to the default values":"obnovi vse nastavitve na privzete vrednosti","Done":"Konano","Caption Settings Dialog":"Pogovorno okno za nastavitve zvonega zapisa","Beginning of dialog window. Escape will cancel and close the window.":"Zaetek pogovornega okna. Escape bo preklical in zaprl okno.","End of dialog window.":"Konec pogovornega okna.","{1} is loading.":"{1} se nalaga.","Exit Picture-in-Picture":"Izhod iz slike v sliki","Picture-in-Picture":"Slika v sliki"}')},36621:e=>{"use strict";e.exports=JSON.parse('{"Play":"Pusti","Pause":"Pauza","Current Time":"Trenutno vreme","Duration":"Vreme trajanja","Remaining Time":"Preostalo vreme","Stream Type":"Nain strimovanja","LIVE":"UIVO","Loaded":"Uitan","Progress":"Progres","Fullscreen":"Pun ekran","Non-Fullscreen":"Mali ekran","Mute":"Priguen","Unmute":"Ne-priguen","Playback Rate":"Stopa reprodukcije","Subtitles":"Podnaslov","subtitles off":"Podnaslov deaktiviran","Captions":"Titlovi","captions off":"Titlovi deaktivirani","Chapters":"Poglavlja","You aborted the media playback":"Iskljuili ste reprodukciju videa.","A network error caused the media download to fail part-way.":"Video se prestao preuzimati zbog greke na mrei.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video se ne moe reproducirati zbog servera, greke u mrei ili format nije podran.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Reprodukcija videa je zaustavljenja zbog greke u formatu ili zbog verzije vaeg pretraivaa.","No compatible source was found for this media.":"Nije naen nijedan kompatibilan izvor ovog videa."}')},57104:e=>{"use strict";e.exports=JSON.parse('{", opens captions settings dialog":", ppnar dialogruta fr textning",", opens descriptions settings dialog":", ppnar dialogruta fr instllningar",", opens subtitles settings dialog":", ppnar dialogruta fr undertexter",", selected":", vald","A network error caused the media download to fail part-way.":"Ett ntverksfel gjorde att nedladdningen av videon avbrts.","Audio Player":"Ljudspelare","Audio Track":"Ljudspr","Background":"Bakgrund","Beginning of dialog window. Escape will cancel and close the window.":"Brjan av dialogfnster. Escape avbryter och stnger fnstret.","Black":"Svart","Blue":"Bl","Caption Settings Dialog":"Dialogruta fr textningsinstllningar","Captions":"Text p","Casual":"Casual","Chapters":"Kapitel","Close":"Stng","Close Modal Dialog":"Stng dialogruta","Current Time":"Aktuell tid","Cyan":"Cyan","Depressed":"Deprimerad","Descriptions":"Beskrivningar","Done":"Klar","Dropshadow":"DropSkugga","Duration":"Total tid","End of dialog window.":"Slutet av dialogfnster.","Font Family":"Typsnittsfamilj","Font Size":"Textstorlek","Fullscreen":"Fullskrm","Green":"Grn","LIVE":"LIVE","Loaded":"Laddad","Magenta":"Magenta","Modal Window":"dialogruta","Monospace Sans-Serif":"Monospace Sans-Serif","Monospace Serif":"Monospace Serif","Mute":"Ljud av","No compatible source was found for this media.":"Det gick inte att hitta ngon kompatibel klla fr den hr videon.","Non-Fullscreen":"Ej fullskrm","None":"Ingen","Opaque":"Opak","Pause":"Pausa","Play":"Spela","Play Video":"Spela upp video","Playback Rate":"Uppspelningshastighet","Progress":"Frlopp","Progress Bar":"frloppsmtare","Proportional Sans-Serif":"Proportionell Sans-Serif","Proportional Serif":"Proportionell Serif","Raised":"Raised","Red":"Rd","Remaining Time":"terstende tid","Replay":"Spela upp igen","Reset":"terstll","Script":"Manus","Seek to live, currently behind live":"terg till live, uppspelningen r inte live","Seek to live, currently playing live":"terg till live, uppspelningen r live","Semi-Transparent":"Semi-transparent","Small Caps":"Small-Caps","Stream Type":"Strmningstyp","Subtitles":"Text p","Text":"Text","Text Edge Style":"Textkantstil","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Det gick inte att ladda videon, antingen p grund av ett server- eller ntverksfel, eller fr att formatet inte stds.","The media is encrypted and we do not have the keys to decrypt it.":"Mediat r krypterat och vi har inte nycklarna fr att dekryptera det.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Uppspelningen avbrts p grund av att videon r skadad, eller ocks fr att videon anvnder funktioner som din webblsare inte stder.","This is a modal window":"Det hr r ett dialogruta","This modal can be closed by pressing the Escape key or activating the close button.":"Den hr dialogrutan kan stngas genom att trycka p Escape-tangenten eller stng knappen.","Transparent":"Transparent","Uniform":"Uniform","Unmute":"Ljud p","Video Player":"Videospelare","Volume Level":"Volymniv","White":"Vit","Window":"Fnster","Yellow":"Gul","You aborted the media playback":"Du har avbrutit videouppspelningen.","captions off":"Text av","captions settings":"textningsinstllningar","descriptions off":"beskrivningar av","descriptions settings":"beskrivningsinstllningar","progress bar timing: currentTime={1} duration={2}":"{1} av {2}","restore all settings to the default values":"terstll alla instllningar till standardvrden","subtitles off":"Text av","subtitles settings":"undertextsinstllningar","{1} is loading.":"{1} laddar."}')},50988:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":" ","Video Player":" ","Play":"","Pause":"","Replay":"","Current Time":" ","Duration":"","Remaining Time":" ","Stream Type":" ","LIVE":"","Seek to live, currently behind live":"  ,     ","Seek to live, currently playing live":"  ,    ","Loaded":" ","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":" ","Non-Fullscreen":"   ","Mute":"","Unmute":" ","Playback Rate":" ","Subtitles":"","subtitles off":"  ","Captions":"","captions off":"  ","Chapters":"","Descriptions":"","descriptions off":"  ","Audio Track":" ","Volume Level":" ","You aborted the media playback":"    ","A network error caused the media download to fail part-way.":"     .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"            .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"             .","No compatible source was found for this media.":"    .","The media is encrypted and we do not have the keys to decrypt it.":"        .","Play Video":"  ","Close":"","Close Modal Dialog":"  ","Modal Window":" ","This is a modal window":"  ","This modal can be closed by pressing the Escape key or activating the close button.":"            .",", opens captions settings dialog":",    ",", opens subtitles settings dialog":",    ",", opens descriptions settings dialog":",    ",", selected":", ","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"-","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":" ","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":" ","Proportional Sans-Serif":" -","Monospace Sans-Serif":" -","Proportional Serif":" ","Monospace Serif":" ","Casual":"","Script":"","Small Caps":" ","Reset":" ","restore all settings to the default values":"    ","Done":"","Caption Settings Dialog":"  ","Beginning of dialog window. Escape will cancel and close the window.":"  .      .","End of dialog window.":"  .","{1} is loading.":"{1}  .","Exit Picture-in-Picture":"--  ","Picture-in-Picture":"--"}')},54196:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"","Video Player":"","Play":"","Pause":"","Replay":"","Current Time":"","Duration":"","Remaining Time":"","Stream Type":"","LIVE":"","Seek to live, currently behind live":" ","Seek to live, currently playing live":" ","Loaded":"","Progress":"","Progress Bar":"","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":"","Non-Fullscreen":"","Mute":"","Unmute":"","Playback Rate":"","Subtitles":"","subtitles off":"","Captions":"","captions off":"","Chapters":"","Descriptions":"","descriptions off":"","Audio Track":"","Volume Level":"","You aborted the media playback":"","A network error caused the media download to fail part-way.":"","The media could not be loaded, either because the server or network failed or because the format is not supported.":"  ","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":" ","No compatible source was found for this media.":"","The media is encrypted and we do not have the keys to decrypt it.":" ","Play Video":"","Close":"","Close Modal Dialog":"","Modal Window":"","This is a modal window":"","This modal can be closed by pressing the Escape key or activating the close button.":" Escape ",", opens captions settings dialog":", ",", opens subtitles settings dialog":", ",", opens descriptions settings dialog":", ",", selected":", ","captions settings":"","subtitles settings":"","descriptions settings":"","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":"","Text Edge Style":"","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"Sans-Serif ","Monospace Sans-Serif":"Sans-Serif ","Proportional Serif":"Serif ","Monospace Serif":"Serif ","Casual":"","Script":"","Small Caps":"","Reset":"","restore all settings to the default values":"","Done":"","Caption Settings Dialog":"","Beginning of dialog window. Escape will cancel and close the window.":" Escape ","End of dialog window.":"","{1} is loading.":" {1}","Exit Picture-in-Picture":"","Picture-in-Picture":""}')},62718:e=>{"use strict";e.exports=JSON.parse('{"Play":"Oynat","Pause":"Duraklat","Replay":"Yeniden Oynat","Current Time":"Sre","Duration":"Toplam Sre","Remaining Time":"Kalan Sre","Stream Type":"Yayn Tipi","LIVE":"CANLI","Loaded":"Yklendi","Progress":"Ykleniyor","Fullscreen":"Tam Ekran","Non-Fullscreen":"Kk Ekran","Mute":"Ses Kapa","Unmute":"Ses A","Playback Rate":"Oynatma Hz","Subtitles":"Altyaz","subtitles off":"Altyaz Kapal","Captions":"Altyaz","captions off":"Altyaz Kapal","Chapters":"Blmler","Close Modal Dialog":"Dialogu Kapat","Descriptions":"Aklamalar","descriptions off":"Aklamalar kapal","Audio Track":"Ses Dosyas","You aborted the media playback":"Video oynatmay iptal ettiniz","A network error caused the media download to fail part-way.":"Video indirilirken balant sorunu olutu.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video oynatlamad, a ya da sunucu hatas veya belirtilen format desteklenmiyor.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Taraycnz desteklemedii iin videoda hata olutu.","No compatible source was found for this media.":"Video iin kaynak bulunamad.","The media is encrypted and we do not have the keys to decrypt it.":"Video, ifrelenmi bir kaynaktan geliyor ve oynatmak iin gerekli anahtar bulunamad.","Play Video":"Videoyu Oynat","Close":"Kapat","Modal Window":"Modal Penceresi","This is a modal window":"Bu bir modal penceresidir","This modal can be closed by pressing the Escape key or activating the close button.":"Bu modal ESC tuuna basarak ya da kapata tklanarak kapatlabilir.",", opens captions settings dialog":", altyaz ayarlar mensn aar",", opens subtitles settings dialog":", altyaz ayarlar mensn aar",", opens descriptions settings dialog":", aklama ayarlar mensn aar",", selected":", seildi","captions settings":"altyaz ayarlar","subtitles settings":"altyaz ayarlar","descriptions settings":"aklama ayarlar","Text":"Yaz","White":"Beyaz","Black":"Siyah","Red":"Krmz","Green":"Yeil","Blue":"Mavi","Yellow":"Sar","Magenta":"Macenta","Cyan":"Ak Mavi (Camgbei)","Background":"Arka plan","Window":"Pencere","Transparent":"Saydam","Semi-Transparent":"Yar-Saydam","Opaque":"Mat","Font Size":"Yaz Boyutu","Text Edge Style":"Yaz Kenarlklar","None":"Hibiri","Raised":"Kabartlm","Depressed":"Yass","Uniform":"Dz","Dropshadow":"Glgeli","Font Family":"Yaz Tipi","Proportional Sans-Serif":"Orantl Sans-Serif","Monospace Sans-Serif":"Earalkl Sans-Serif","Proportional Serif":"Orantl Serif","Monospace Serif":"Earalkl Serif","Casual":"Gndelik","Script":"El Yazs","Small Caps":"Kk Boyutlu Byk Harfli","Done":"Tamam","Caption Settings Dialog":"Altyaz Ayarlar Mens","Beginning of dialog window. Escape will cancel and close the window.":"Diyalog penceresinin balangc. ESC tuu ilemi iptal edip pencereyi kapatacaktr."}')},46489:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"","Video Player":"","Play":"","Pause":"","Replay":" ","Current Time":" ","Duration":"","Remaining Time":",  ","Stream Type":" ","LIVE":"","Loaded":"","Progress":"","Progress Bar":" ","progress bar timing: currentTime={1} duration={2}":"{1}  {2}","Fullscreen":" ","Non-Fullscreen":" ","Mute":" ","Unmute":" ","Playback Rate":" ","Subtitles":"","subtitles off":" ","Captions":"","captions off":" ","Chapters":"","Close Modal Dialog":"  ","Descriptions":"","descriptions off":" ","Audio Track":"","Volume Level":" ","You aborted the media playback":"   ","A network error caused the media download to fail part-way.":"       .","The media could not be loaded, either because the server or network failed or because the format is not supported.":"           .","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"        \'  ,    ,     .","No compatible source was found for this media.":"     .","The media is encrypted and we do not have the keys to decrypt it.":"   ,       .","Play Video":" ","Close":"","Modal Window":" ","This is a modal window":"  .","This modal can be closed by pressing the Escape key or activating the close button.":"   ,   Esc    .",", opens captions settings dialog":",     ",", opens subtitles settings dialog":",     ",", opens descriptions settings dialog":",     ",", selected":", ","captions settings":" ","subtitles settings":" ","descriptions settings":" ","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":" ","Text Edge Style":"  ","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"  ","Monospace Sans-Serif":"  ","Proportional Serif":"  ","Monospace Serif":"  ","Casual":"","Script":"","Small Caps":" ","Reset":"","restore all settings to the default values":"    ","Done":"","Caption Settings Dialog":"  ","Beginning of dialog window. Escape will cancel and close the window.":"  .  Escape    ","End of dialog window.":"  .","{1} is loading.":"{1} ."}')},99264:e=>{"use strict";e.exports=JSON.parse('{"Audio Player":"Trnh pht Audio","Video Player":"Trnh pht Video","Play":"Pht","Pause":"Tm dng","Replay":"Pht li","Current Time":"Thi gian hin ti","Duration":" di","Remaining Time":"Thi gian cn li","Stream Type":"Kiu Stream","LIVE":"TRC TIP","Loaded":" ti","Progress":"Tin trnh","Progress Bar":"Thanh tin trnh","progress bar timing: currentTime={1} duration={2}":"{1} ca {2}","Fullscreen":"Ton mn hnh","Non-Fullscreen":"Thot ton mn hnh","Mute":"Tt ting","Unmute":"Bt m thanh","Playback Rate":"T l pht li","Subtitles":"Ph ","subtitles off":"tt ph ","Captions":"Ch thch","captions off":"tt ch thch","Chapters":"Chng","Descriptions":"M t","descriptions off":"tt m t","Audio Track":"Track m thanh","Volume Level":"Mc m lng","You aborted the media playback":"Bn  hy vic pht li media.","A network error caused the media download to fail part-way.":"Mt li mng dn n vic ti media b li.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video khng ti c, mng hay server c li hoc nh dng khng c h tr.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Pht media  b hy do mt sai li hoc media s dng nhng tnh nng trnh duyt khng h tr.","No compatible source was found for this media.":"Khng c ngun tng thch cho media ny.","The media is encrypted and we do not have the keys to decrypt it.":"Media  c m ha v chng ti khng c  gii m n.","Play Video":"Pht Video","Close":"ng","Close Modal Dialog":"ng ca s","Modal Window":"Ca s","This is a modal window":"y l mt ca s","This modal can be closed by pressing the Escape key or activating the close button.":"Ca s ny c th thot bng vic nhn phm Esc hoc kch hot nt ng.",", opens captions settings dialog":", m hp thoi ci t ch thch",", opens subtitles settings dialog":", m hp thoi ci t ph ",", opens descriptions settings dialog":", m hp thoi ci t m t",", selected":",  chn","captions settings":"ci t ch thch","subtitles settings":"ci t ph ","descriptions settings":"ci t m t","Text":"Vn bn","White":"Trng","Black":"en","Red":"","Green":"Xanh l cy","Blue":"Xanh da tri","Yellow":"Vng","Magenta":" ti","Cyan":"Lam","Background":"Nn","Window":"Ca s","Transparent":"Trong sut","Semi-Transparent":"Bn trong sut","Opaque":"M","Font Size":"Kch c phng ch","Text Edge Style":"Dng vin vn bn","None":"None","Raised":"Raised","Depressed":"Depressed","Uniform":"Uniform","Dropshadow":"Dropshadow","Font Family":"Phng ch","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif","Casual":"Casual","Script":"Script","Small Caps":"Small Caps","Reset":"t li","restore all settings to the default values":"khi phc li tt c cc ci t v gi tr mc nh","Done":"Xong","Caption Settings Dialog":"Hp thoi ci t ch thch","Beginning of dialog window. Escape will cancel and close the window.":"Bt u ca s hp thoi. Esc s thot v ng ca s.","End of dialog window.":"Kt thc ca s hp thoi."}')},51131:e=>{"use strict";e.exports=JSON.parse('{"Play":"","Pause":"","Current Time":"","Duration":"","Remaining Time":"","Stream Type":"","LIVE":"","Loaded":"","Progress":"","Fullscreen":"","Non-Fullscreen":"","Picture-in-Picture":"","Exit Picture-in-Picture":"","Mute":"","Unmute":"","Playback Rate":"","Subtitles":"","subtitles off":"","Captions":"","captions off":"","Chapters":"","Close Modal Dialog":"","Descriptions":"","descriptions off":"","Audio Track":"","You aborted the media playback":"","A network error caused the media download to fail part-way.":"","The media could not be loaded, either because the server or network failed or because the format is not supported.":"","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"","No compatible source was found for this media.":"","The media is encrypted and we do not have the keys to decrypt it.":"","Play Video":"","Close":"","Modal Window":"","This is a modal window":"","This modal can be closed by pressing the Escape key or activating the close button.":"ESC",", opens captions settings dialog":", ",", opens subtitles settings dialog":", ",", opens descriptions settings dialog":", ",", selected":", ","captions settings":"","Audio Player":"","Video Player":"","Replay":"","Progress Bar":"","Volume Level":"","subtitles settings":"","descriptions settings":"","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":"","Text Edge Style":"","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"","Monospace Sans-Serif":"","Proportional Serif":"","Monospace Serif":"","Casual":"","Script":"","Small Caps":"","Reset":"","restore all settings to the default values":"","Done":"","Caption Settings Dialog":"","Beginning of dialog window. Escape will cancel and close the window.":"Escape","End of dialog window.":"","Seek to live, currently behind live":"","Seek to live, currently playing live":"","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":" {1}"}')},76317:e=>{"use strict";e.exports=JSON.parse('{"Play":"","Pause":"","Current Time":"","Duration":"","Remaining Time":"","Stream Type":"","LIVE":"","Loaded":"","Progress":"","Fullscreen":"","Non-Fullscreen":"","Picture-in-Picture":"","Exit Picture-in-Picture":"","Mute":"","Unmute":"","Playback Rate":"","Subtitles":"","subtitles off":"","Captions":"","captions off":"","Chapters":"","Close Modal Dialog":"","Descriptions":"","descriptions off":"","Audio Track":"","You aborted the media playback":"","A network error caused the media download to fail part-way.":"","The media could not be loaded, either because the server or network failed or because the format is not supported.":"","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"","No compatible source was found for this media.":"","The media is encrypted and we do not have the keys to decrypt it.":"","Play Video":"","Close":"","Modal Window":"","This is a modal window":"","This modal can be closed by pressing the Escape key or activating the close button.":"ESC",", opens captions settings dialog":", ",", opens subtitles settings dialog":", ",", opens descriptions settings dialog":", ",", selected":", ","captions settings":"","Audio Player":"","Video Player":"","Replay":"","Progress Bar":"","Volume Level":"","subtitles settings":"","descriptions settings":"","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":"","Text Edge Style":"","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"","Monospace Sans-Serif":"","Proportional Serif":"","Monospace Serif":"","Casual":"","Script":"","Small Caps":"","Reset":"","restore all settings to the default values":"","Done":"","Caption Settings Dialog":"","Beginning of dialog window. Escape will cancel and close the window.":"Escape","End of dialog window.":"","Seek to live, currently behind live":"","Seek to live, currently playing live":"","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":" {1}"}')},41240:e=>{"use strict";e.exports=JSON.parse('{"Play":"","Pause":"","Current Time":"","Duration":"","Remaining Time":"","Stream Type":"","LIVE":"","Loaded":"","Progress":"","Fullscreen":"","Non-Fullscreen":"","Mute":"","Unmute":"","Playback Rate":" ","Subtitles":"","subtitles off":"","Captions":"","captions off":"","Chapters":"","Close Modal Dialog":"","Descriptions":"","descriptions off":"","Audio Track":"","You aborted the media playback":"","A network error caused the media download to fail part-way.":"","The media could not be loaded, either because the server or network failed or because the format is not supported.":"","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"","No compatible source was found for this media.":"","The media is encrypted and we do not have the keys to decrypt it.":"","Play Video":"","Close":"","Modal Window":"","This is a modal window":"","This modal can be closed by pressing the Escape key or activating the close button.":"ESC",", opens captions settings dialog":", ",", opens subtitles settings dialog":", ",", opens descriptions settings dialog":", ",", selected":", ","captions settings":"","Audio Player":"","Video Player":"","Replay":"","Progress Bar":"","Volume Level":"","subtitles settings":"","descriptions settings":"","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":"","Text Edge Style":"","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"","Monospace Sans-Serif":"","Proportional Serif":"","Monospace Serif":"","Casual":"","Script":"","Small Caps":"","Reset":"","restore all settings to the default values":"","Done":"","Caption Settings Dialog":"","Beginning of dialog window. Escape will cancel and close the window.":"","End of dialog window.":"","Seek to live, currently behind live":"","Seek to live, currently playing live":"","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"{1} "}')},87922:e=>{"use strict";e.exports=JSON.parse('{"Play":"","Pause":"","Current Time":"","Duration":"","Remaining Time":"","Stream Type":"","LIVE":"","Loaded":"","Progress":"","Fullscreen":"","Non-Fullscreen":"","Mute":"","Unmute":"","Playback Rate":" ","Subtitles":"","subtitles off":"","Captions":"","captions off":"","Chapters":"","Close Modal Dialog":"","Descriptions":"","descriptions off":"","Audio Track":"","You aborted the media playback":"","A network error caused the media download to fail part-way.":"","The media could not be loaded, either because the server or network failed or because the format is not supported.":"","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"","No compatible source was found for this media.":"","The media is encrypted and we do not have the keys to decrypt it.":"","Play Video":"","Close":"","Modal Window":"","This is a modal window":"","This modal can be closed by pressing the Escape key or activating the close button.":"ESC",", opens captions settings dialog":", ",", opens subtitles settings dialog":", ",", opens descriptions settings dialog":", ",", selected":", ","captions settings":"","Audio Player":"","Video Player":"","Replay":"","Progress Bar":"","Volume Level":"","subtitles settings":"","descriptions settings":"","Text":"","White":"","Black":"","Red":"","Green":"","Blue":"","Yellow":"","Magenta":"","Cyan":"","Background":"","Window":"","Transparent":"","Semi-Transparent":"","Opaque":"","Font Size":"","Text Edge Style":"","None":"","Raised":"","Depressed":"","Uniform":"","Dropshadow":"","Font Family":"","Proportional Sans-Serif":"","Monospace Sans-Serif":"","Proportional Serif":"","Monospace Serif":"","Casual":"","Script":"","Small Caps":"","Reset":"","restore all settings to the default values":"","Done":"","Caption Settings Dialog":"","Beginning of dialog window. Escape will cancel and close the window.":"","End of dialog window.":"","Seek to live, currently behind live":"","Seek to live, currently playing live":"","progress bar timing: currentTime={1} duration={2}":"{1}/{2}","{1} is loading.":"{1} "}')}}]);