{"version":3,"file":"wrappedIndex-a1cbf947.js","sources":["../../../src/entrypoints/background/browserDetection.ts","../../../src/util/isContentScriptBlockedByBrowser.ts","../../../src/util/getBrowserName.tsx","../../../src/images/arrow_right.svg","../../../src/images/report.svg","../../../src/entrypoints/popup/components/Footer.tsx","../../../src/entrypoints/popup/components/PopupUnlockFrame.tsx","../../../src/entrypoints/popup/components/Basic.tsx","../../../src/entrypoints/popup/components/DisableSwitches.tsx","../../../src/images/undo.svg","../../../src/entrypoints/popup/components/LoginListItem.tsx","../../../src/entrypoints/popup/components/LoginList.tsx","../../../src/entrypoints/popup/components/useUndoState.tsx","../../../src/entrypoints/popup/components/LoggedIn.tsx","../../../src/entrypoints/popup/components/LoggedOut.tsx","../../../src/images/heylogin_logo_dark_mode.svg","../../../src/entrypoints/popup/components/PopupFrame.tsx","../../../src/images/check-circle-white-checkmark.svg","../../../src/images/rocket.svg","../../../src/images/stemmed-arrow-right.svg","../../../src/entrypoints/popup/components/ReportPage.tsx","../../../src/entrypoints/popup/util/usePushProgressState.tsx","../../../src/entrypoints/popup/PopupContainer.tsx","../../../src/entrypoints/popup/util/chromeRenderFix.ts","../../../src/entrypoints/popup/wrappedIndex.tsx"],"sourcesContent":["import Bowser from 'bowser';\n\nimport { isIPadSafariPretendingToBeMac } from 'client-web-sdk/headless';\n\nexport function isSafari(precomputedBrowser?: Bowser.Parser.ParsedResult) {\n  const browser = precomputedBrowser ?? Bowser.parse(navigator.userAgent);\n\n  return browser.browser.name === 'Safari';\n}\n\nexport function isMobileSafari(precomputedBrowser?: Bowser.Parser.ParsedResult) {\n  const browser = precomputedBrowser ?? Bowser.parse(navigator.userAgent);\n\n  return (\n    (browser.browser.name === 'Safari' && browser.os.name === 'iOS') ||\n    isIPadSafariPretendingToBeMac(browser)\n  );\n}\n\nexport function isDesktopSafari(precomputedBrowser?: Bowser.Parser.ParsedResult) {\n  const browser = precomputedBrowser ?? Bowser.parse(navigator.userAgent);\n\n  return (\n    browser.browser.name === 'Safari' &&\n    browser.os.name === 'macOS' &&\n    !isIPadSafariPretendingToBeMac(browser)\n  );\n}\n\nexport function isMobileBrowser(precomputedBrowser?: Bowser.Parser.ParsedResult) {\n  const browser = precomputedBrowser ?? Bowser.parse(navigator.userAgent);\n\n  // The extension works in mobile Safari and in Firefox on Android at the moment.\n  return isMobileSafari(precomputedBrowser) || browser.os.name === 'Android';\n}\n","const contentScriptBlockedUrls = [\n  // firefox\n  'accounts-static.cdn.mozilla.net',\n  'accounts.firefox.com',\n  'addons.cdn.mozilla.net',\n  'addons.mozilla.org',\n  'api.accounts.firefox.com',\n  'content.cdn.mozilla.net',\n  'discovery.addons.mozilla.org',\n  'input.mozilla.org',\n  'install.mozilla.org',\n  'oauth.accounts.firefox.com',\n  'profile.accounts.firefox.com',\n  'support.mozilla.org',\n  'sync.services.mozilla.com',\n  'testpilot.firefox.com',\n  // chrome, edge\n  'chrome.google.com',\n  // edge\n  'microsoftedge.microsoft.com',\n];\n\nexport default function isContentScriptBlockedByBrowser(urlStr: string) {\n  let url: URL;\n  try {\n    url = new URL(urlStr);\n  } catch {\n    return false;\n  }\n  // Add a leading period to prevent a pattern like \"login.app\" to match host \"heylogin.app\"\n  return contentScriptBlockedUrls.some((u) => `.${url.host}`.endsWith(`.${u}`));\n}\n","import { t } from '@lingui/macro';\nimport Bowser from 'bowser';\n\nexport function getBrowserName(precomputedBowser?: Bowser.Parser.ParsedResult): string {\n  const browser = precomputedBowser ?? Bowser.parse(navigator.userAgent);\n  return browser.browser.name ?? t`Your browser`;\n}\n","export default \"__VITE_ASSET__9f78f55b__\"","export default \"__VITE_ASSET__586904a2__\"","import { Trans } from '@lingui/macro';\nimport classNames from 'classnames';\nimport React from 'react';\n\nimport { LinkButton, ShortcutView } from 'client-web-sdk';\n\nimport { ReactComponent as ArrowRight } from 'src/images/arrow_right.svg';\nimport { ReactComponent as ReportIcon } from 'src/images/report.svg';\n\nimport styles from './Footer.module.css';\n\nexport default function Footer({\n  manageLink,\n  report,\n  globalSearchShortcut,\n  applePlatform,\n  openGlobalSearchWindow,\n}: {\n  manageLink?: string;\n  globalSearchShortcut?: string;\n  applePlatform: boolean;\n  report?: () => void;\n  openGlobalSearchWindow?: () => void;\n}) {\n  return (\n    <footer\n      className={classNames(styles.Footer, {\n        [styles.withoutGlobalSearch]: !openGlobalSearchWindow,\n      })}\n    >\n      {manageLink && (\n        <a\n          href={manageLink}\n          className={styles.ManageLink}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          <Trans>Manage</Trans> <ArrowRight className={styles.FooterArrow} />\n        </a>\n      )}\n      {report && (\n        <button className={styles.ReportButton} onClick={report}>\n          <Trans>Spotted a mistake?</Trans>\n          <ReportIcon />\n        </button>\n      )}\n      {openGlobalSearchWindow && (\n        <LinkButton className={styles.QuickAccessButton} onClick={openGlobalSearchWindow}>\n          <Trans>Open quick access</Trans>\n          <ShortcutView\n            shortcut={globalSearchShortcut}\n            small\n            applePlatform={applePlatform}\n            invertColors\n          />\n        </LinkButton>\n      )}\n    </footer>\n  );\n}\n","import { t, Trans } from '@lingui/macro';\nimport classNames from 'classnames';\nimport React from 'react';\n\nimport {\n  PushState,\n  UIStyleContainer,\n  ActionButton,\n  UIStyle,\n  UnlockDeviceType,\n  UnlockLabel,\n  LinkButton,\n} from 'client-web-sdk';\n\nimport { ReactComponent as ArrowRight } from 'src/images/arrow_right.svg';\n\nimport { PushProgressStateType } from '../util/usePushProgressState';\n\nimport styles from './PopupUnlockFrame.module.css';\n\nexport function PopupUnlockFrame({\n  isUnlocked,\n  pushState,\n  childrenUIStyle,\n  unlockDeviceType,\n  requestUnlock,\n  openWebappForSecurityKeyUnlock,\n  children,\n}: React.PropsWithChildren<{\n  isUnlocked: boolean;\n  pushState: PushProgressStateType | undefined;\n  childrenUIStyle: UIStyle;\n  unlockDeviceType: UnlockDeviceType;\n  requestUnlock: () => void;\n  openWebappForSecurityKeyUnlock: () => void;\n}>) {\n  const hasSecurityKeyUnlock =\n    unlockDeviceType === 'securityKey' || unlockDeviceType === 'multiple';\n  const filteredUnlockDeviceType =\n    unlockDeviceType === 'multiple' || unlockDeviceType === 'securityKey'\n      ? 'phone'\n      : unlockDeviceType;\n\n  return isUnlocked || pushState ? (\n    <UIStyleContainer\n      uiStyle={childrenUIStyle}\n      className={classNames(styles.LoginContainer, {\n        [styles.isUnlocking]: pushState,\n        [styles.hasSecurityKeyUnlock]: hasSecurityKeyUnlock,\n      })}\n    >\n      {children}\n      {pushState && (\n        <UIStyleContainer\n          uiStyle=\"default\"\n          className={classNames(styles.UnlockOverlay, {\n            [styles.error]: pushState === 'error',\n            [styles.warning]: pushState === 'warning',\n          })}\n        >\n          <PushState small={true} state={pushState} unlockDeviceType={filteredUnlockDeviceType} />\n          <div className={styles.UnlockLabel}>\n            {\n              {\n                connecting: <UnlockLabel unlockDeviceType={filteredUnlockDeviceType} />,\n                error: t`Login cancelled`,\n                warning: t`Failed`,\n              }[pushState]\n            }\n          </div>\n          {hasSecurityKeyUnlock && (\n            <LinkButton onClick={openWebappForSecurityKeyUnlock}>\n              <Trans>Use security key</Trans>{' '}\n              <ArrowRight className={styles.SecurityKeyUnlockArrow} />\n            </LinkButton>\n          )}\n        </UIStyleContainer>\n      )}\n    </UIStyleContainer>\n  ) : (\n    <div className={classNames(styles.Locked)}>\n      <div className={classNames(styles.LockedMessage)}>\n        <Trans>You are logged out</Trans>\n      </div>\n      <div>\n        <ActionButton\n          buttonStyle=\"primary\"\n          className={styles.UnlockButton}\n          type=\"button\"\n          onClick={requestUnlock}\n        >\n          <Trans>Login now</Trans>\n        </ActionButton>\n      </div>\n    </div>\n  );\n}\n","import { Trans } from '@lingui/macro';\nimport React from 'react';\n\nimport { MessageBox, UnlockDeviceType } from 'client-web-sdk';\n\nimport { getFrontendServerUrl } from 'src/serverUrl';\n\nimport { PushProgressStateType } from '../util/usePushProgressState';\n\nimport styles from './Basic.module.css';\nimport Footer from './Footer';\nimport { PopupUnlockFrame } from './PopupUnlockFrame';\n\nexport default function Basic({\n  isUnlocked,\n  pushState,\n  requestUnlock,\n  browserIsMobileSafari,\n  unlockDeviceType,\n  applePlatform,\n  globalSearchShortcut,\n  openGlobalSearchWindow,\n  openWebappForSecurityKeyUnlock,\n}: {\n  isUnlocked?: boolean;\n  pushState?: PushProgressStateType;\n  browserIsMobileSafari?: boolean;\n  unlockDeviceType: UnlockDeviceType;\n  requestUnlock?: () => void;\n  applePlatform: boolean;\n  globalSearchShortcut?: string;\n  openGlobalSearchWindow?: () => void;\n  openWebappForSecurityKeyUnlock: () => void;\n}) {\n  const manageLink = browserIsMobileSafari ? undefined : getFrontendServerUrl();\n\n  return (\n    <>\n      {isUnlocked !== undefined && requestUnlock && (\n        <PopupUnlockFrame\n          isUnlocked={isUnlocked}\n          pushState={pushState}\n          unlockDeviceType={unlockDeviceType}\n          requestUnlock={requestUnlock}\n          childrenUIStyle=\"highlight\"\n          openWebappForSecurityKeyUnlock={openWebappForSecurityKeyUnlock}\n        >\n          {browserIsMobileSafari && (\n            <MessageBox type=\"success\" className={styles.MobileSafariSetupSuccessMessage}>\n              <Trans>1-click login set up successfully. You can now log in on any website.</Trans>\n            </MessageBox>\n          )}\n        </PopupUnlockFrame>\n      )}\n      <Footer\n        manageLink={manageLink}\n        applePlatform={applePlatform}\n        globalSearchShortcut={globalSearchShortcut}\n        openGlobalSearchWindow={openGlobalSearchWindow}\n      />\n    </>\n  );\n}\n","import { t, Trans } from '@lingui/macro';\nimport React from 'react';\n\nimport { Switch } from 'client-web-sdk';\n\nimport styles from './DisableSwitches.module.css';\n\ninterface Props {\n  disabledPageHost: string;\n  pageDisabled: boolean;\n  setPageDisabled: (d: boolean) => void;\n  autosnatchDisabled: boolean;\n  setAutosnatchDisabled: (d: boolean) => void;\n  contentScriptBlocked: boolean;\n  browserName: string;\n  incognito: boolean;\n}\n\ntype SupportedIncognitoBrowserName = 'Chrome' | 'Firefox' | 'Microsoft Edge';\n\nexport default function DisableSwitches({\n  pageDisabled: disabled,\n  setPageDisabled: setDisabled,\n  disabledPageHost,\n  autosnatchDisabled,\n  setAutosnatchDisabled,\n  contentScriptBlocked,\n  browserName,\n  incognito,\n}: Props) {\n  const incognitoMessage = useIncognitoMessage(browserName);\n  return (\n    <>\n      {incognito ? (\n        <div className={styles.DisableForPage}>\n          <div className={styles.Value}>\n            <strong>\n              <Trans>Logins are not saved</Trans>\n            </strong>\n            <span>{incognitoMessage}</span>\n          </div>\n          <label className={styles.SwitchLabel}>\n            <Switch checked={false} disabled />\n          </label>\n        </div>\n      ) : (\n        <div className={styles.DisableForPage}>\n          <div className={styles.Value}>\n            <strong>\n              {autosnatchDisabled ? t`Logins are not saved` : t`Logins are saved automatically`}\n            </strong>\n            <span>\n              <Trans>on all websites</Trans>\n            </span>\n          </div>\n          <label className={styles.SwitchLabel}>\n            <Switch\n              checked={!autosnatchDisabled}\n              onChange={(e) => setAutosnatchDisabled(!e.currentTarget.checked)}\n            />\n          </label>\n        </div>\n      )}\n      {contentScriptBlocked ? (\n        <div className={styles.DisableForPage}>\n          <div className={styles.Value}>\n            <strong>\n              {/* NOTE: we ignore the edge case of a browser visiting another browsers blocked pages here */}\n              <Trans>{browserName} blocks extensions on this page</Trans>\n            </strong>\n            <span>\n              <Trans>on {disabledPageHost}</Trans>\n            </span>\n          </div>\n        </div>\n      ) : (\n        <div className={styles.DisableForPage}>\n          <div className={styles.Value}>\n            <strong>{disabled ? t`heylogin is disabled` : t`heylogin is active`}</strong>\n            <span>\n              <Trans>for {disabledPageHost}</Trans>\n            </span>\n          </div>\n          <label className={styles.SwitchLabel}>\n            <Switch checked={!disabled} onChange={(e) => setDisabled(!e.currentTarget.checked)} />\n          </label>\n        </div>\n      )}\n    </>\n  );\n}\n\nfunction useIncognitoMessage(browserName: string) {\n  const incognitoMessages: Record<SupportedIncognitoBrowserName, string> = {\n    Chrome: t`because this window is in incognito mode`,\n    Firefox: t`because this window is private or history is disabled`,\n    'Microsoft Edge': t`because this is an InPrivate window`,\n  };\n  return (\n    incognitoMessages[browserName as SupportedIncognitoBrowserName] ?? incognitoMessages.Chrome\n  );\n}\n","export default \"__VITE_ASSET__29cf6080__\"","import { t } from '@lingui/macro';\nimport classNames from 'classnames';\nimport format from 'date-fns/format';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\n\nimport { AuditlogEventType, trackError } from 'backend-client-web';\nimport { getValueWithPlaceholder } from 'client-core';\nimport {\n  SuccessButton,\n  CopyButton,\n  TotpCountdown,\n  getDateFnsLocale,\n  useTotp,\n  useAuditlogWriteContext,\n  TotpTimeOffsetWarning,\n} from 'client-web-sdk';\nimport { ProtectedValue, UnprotectedValue } from 'persistable-types';\n\nimport { ReactComponent as UndoIcon } from 'src/images/undo.svg';\nimport { ContentLogin, CopyToClipboardWithClear } from 'src/types';\nimport isEmptyValue from 'src/util/isEmptyValue';\nimport useCopyToClipboard from 'src/util/react/useCopyToClipboard';\nimport useErrorHandlingCallback from 'src/util/react/useErrorHandlingCallback';\n\nimport styles from './LoginListItem.module.css';\n\ntype Props = {\n  login: ContentLogin;\n  undo: () => Promise<void>;\n  undone?: boolean;\n  checkTotpTimeOffset: () => Promise<void>;\n  getUnprotectedValueForContentLoginWithContentId: (\n    l: ContentLogin,\n    value: ProtectedValue | UnprotectedValue,\n  ) => Promise<UnprotectedValue | undefined>;\n  copyToClipboardWithClear: CopyToClipboardWithClear;\n};\n\nconst PROTECTED_PLACEHOLDER = '************';\n\nexport default function LoginListItem({\n  login,\n  undo,\n  undone,\n  checkTotpTimeOffset,\n  getUnprotectedValueForContentLoginWithContentId,\n  copyToClipboardWithClear,\n}: Props) {\n  const unprotect = useCallback(\n    async (value: ProtectedValue | UnprotectedValue) => {\n      return (await getUnprotectedValueForContentLoginWithContentId(login, value))?.unencrypted;\n    },\n    [getUnprotectedValueForContentLoginWithContentId, login],\n  );\n\n  const customFields = useVisibleCustomFields(login);\n\n  const totpSecret = useTotpSecret(login, getUnprotectedValueForContentLoginWithContentId);\n  const { totp, totpPercent, totpDigits } = useTotp(\n    totpSecret,\n    getValueWithPlaceholder(login.totpAlgorithm),\n    login.totpDigits,\n    login.totpPeriod,\n  );\n\n  const { writeAuditlogEvent } = useAuditlogWriteContext();\n\n  const hideLogin = undone && login.undo?.type === 'create';\n  const label =\n    login.username && login.title ? (\n      <>\n        <div className={styles.Label}>{login.title}</div>\n        <div className={styles.Value}>{login.username}</div>\n      </>\n    ) : (\n      <div className={styles.Value}>{login.username ? login.username : login.title}</div>\n    );\n\n  const handleUndoClick = useErrorHandlingCallback(() => undo(), [undo]);\n\n  return (\n    <li className={styles.LoginListItem}>\n      {!hideLogin && (\n        <>\n          {!!(login.username || login.title) && (\n            <div className={classNames(styles.ItemRow, styles.BorderedItemRow)}>\n              <div className={styles.Content}>\n                {login.loginUrl ? (\n                  <a href={login.loginUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n                    {label}\n                  </a>\n                ) : (\n                  label\n                )}\n              </div>\n              {login.username && login.permissions.viewSecrets && (\n                <RowCopyButton\n                  unprotect={unprotect}\n                  value={login.username}\n                  copyToClipboardWithClear={copyToClipboardWithClear}\n                />\n              )}\n            </div>\n          )}\n          {login.permissions.viewSecrets && !isEmptyValue(login.password) && (\n            <div className={classNames(styles.ItemRow, styles.BorderedItemRow)}>\n              <div className={styles.Content}>\n                <div className={styles.Value}>{PROTECTED_PLACEHOLDER}</div>\n              </div>\n              <RowCopyButton\n                unprotect={unprotect}\n                clearAfterTimeout\n                value={login.password}\n                onCopy={\n                  login.organization\n                    ? () => {\n                        writeAuditlogEvent(login.organization!.id, {\n                          type: AuditlogEventType.LOGIN_R_PASSWORD_COPY,\n                          loginId: login.id,\n                          vaultId: login.vaultMetadata?.id,\n                          loginRevisionId: login.history?.currentRevisionId,\n                          loginEditTime: login.editTime,\n                        });\n                      }\n                    : undefined\n                }\n                copyToClipboardWithClear={copyToClipboardWithClear}\n              />\n            </div>\n          )}\n          {totp && totpPercent && (\n            <>\n              <div className={classNames(styles.ItemRow, styles.BorderedItemRow, styles.Totp)}>\n                <div className={styles.Content}>\n                  <div className={styles.Value}>\n                    <span>{totp.substring(0, totpDigits / 2)}</span>\n                    <span>{totp.substring(totpDigits / 2)}</span>\n                    <TotpCountdown percent={totpPercent} />\n                  </div>\n                </div>\n                <RowCopyButton\n                  unprotect={unprotect}\n                  value={totp}\n                  copyToClipboardWithClear={copyToClipboardWithClear}\n                />\n              </div>\n              <TotpTimeOffsetWarning\n                className={styles.TotpTimeOffsetWarning}\n                hidden={!login.showTotpTimeOffsetWarning}\n                recheck={checkTotpTimeOffset}\n              />\n            </>\n          )}\n          {customFields.map((cf) =>\n            cf.name.trim() === '' || (cf.protected && isEmptyValue(cf.value)) ? null : (\n              <div className={classNames(styles.ItemRow, styles.BorderedItemRow)}>\n                <div className={styles.Content}>\n                  <div className={styles.Label}>{cf.name}</div>\n                  <div className={styles.Value}>\n                    {cf.protected ? PROTECTED_PLACEHOLDER : cf.value}\n                  </div>\n                </div>\n                <RowCopyButton\n                  unprotect={unprotect}\n                  clearAfterTimeout={cf.protected}\n                  value={cf.value}\n                  onCopy={\n                    login.organization && cf.protected\n                      ? () => {\n                          writeAuditlogEvent(login.organization!.id, {\n                            type: AuditlogEventType.LOGIN_R_CUSTOM_FIELD_COPY,\n                            loginId: login.id,\n                            vaultId: login.vaultMetadata?.id,\n                            customFieldId: cf.id,\n                            loginRevisionId: login.history?.currentRevisionId,\n                            loginEditTime: login.editTime,\n                          });\n                        }\n                      : undefined\n                  }\n                  copyToClipboardWithClear={copyToClipboardWithClear}\n                />\n              </div>\n            ),\n          )}\n        </>\n      )}\n      {login.undo && !undone && (\n        <div\n          className={classNames(styles.ItemRow, styles.Undo, {\n            [styles.success]: login.undo.type === 'create',\n            [styles.warning]: login.undo.type === 'update',\n          })}\n        >\n          <div className={styles.Content}>\n            <div className={styles.Value}>\n              <strong className={styles.UndoHeadline}>\n                {login.undo.type === 'create' ? t`Login added` : t`Login updated`}\n              </strong>\n              <time className={styles.UndoSubheadline} dateTime={login.undo.date}>\n                {format(new Date(login.undo.date), 'PPPp', {\n                  locale: getDateFnsLocale(),\n                })}\n              </time>\n            </div>\n          </div>\n          <SuccessButton\n            defaultIcon={UndoIcon}\n            defaultText={t`Undo`}\n            onClick={handleUndoClick}\n            className={styles.RowButton}\n          />\n        </div>\n      )}\n      {login.undo && undone && (\n        <div className={classNames(styles.ItemRow, styles.Undo, styles.warning)}>\n          <div className={styles.Content}>\n            <div className={styles.Value}>\n              <strong className={styles.UndoHeadline}>\n                {login.undo.type === 'create' ? t`Login was removed` : t`Update reverted`}\n              </strong>\n              <div className={styles.UndoSubheadline}>{login.username}</div>\n            </div>\n          </div>\n        </div>\n      )}\n    </li>\n  );\n}\n\nfunction RowCopyButton({\n  value,\n  onCopy,\n  clearAfterTimeout,\n  unprotect,\n  copyToClipboardWithClear,\n}: {\n  value: string | undefined | ProtectedValue | UnprotectedValue;\n  onCopy?: () => void;\n  clearAfterTimeout?: boolean;\n  unprotect: (value: ProtectedValue | UnprotectedValue) => Promise<string | undefined>;\n  copyToClipboardWithClear: CopyToClipboardWithClear;\n}) {\n  const [copied, copy] = useCopyToClipboard(copyToClipboardWithClear);\n  const requestCopy = useCallback(() => {\n    if (value === undefined) {\n      trackError(new Error('Tried to copy from popup while value not present!'));\n      return;\n    }\n    const valueToCopy = value;\n    onCopy?.();\n    async function getValue() {\n      if (typeof valueToCopy === 'string') {\n        return valueToCopy;\n      }\n      return unprotect(valueToCopy);\n    }\n    copy(getValue(), clearAfterTimeout);\n  }, [clearAfterTimeout, copy, onCopy, unprotect, value]);\n\n  return <CopyButton copied={copied} onClick={requestCopy} className={styles.RowButton} />;\n}\n\nfunction useVisibleCustomFields(login: ContentLogin) {\n  return useMemo(() => {\n    if (login.permissions.viewSecrets) {\n      return login.customFields;\n    }\n    return login.customFields.filter((cf) => !cf.protected);\n  }, [login]);\n}\n\nfunction useTotpSecret(\n  login: ContentLogin,\n  getUnprotectedValueForContentLoginWithContentId: (\n    l: ContentLogin,\n    value: ProtectedValue | UnprotectedValue,\n  ) => Promise<UnprotectedValue | undefined>,\n) {\n  const [totpSecret, setTotpSecret] = useState<UnprotectedValue>();\n\n  useEffect(() => {\n    if (login.totp?.contentId === totpSecret?.contentId) {\n      return;\n    }\n    if (!login.totp) {\n      setTotpSecret(undefined);\n      return;\n    }\n    const totp = login.totp;\n    async function updateTotpSecret() {\n      const secret = await getUnprotectedValueForContentLoginWithContentId(login, totp);\n      setTotpSecret(secret);\n    }\n    updateTotpSecret().catch(trackError);\n  }, [\n    getUnprotectedValueForContentLoginWithContentId,\n    login,\n    login.totp,\n    login.vaultMetadata?.id,\n    totpSecret?.contentId,\n  ]);\n\n  return totpSecret?.unencrypted;\n}\n","import { plural, Trans } from '@lingui/macro';\nimport React, { useState, useMemo } from 'react';\n\nimport { ProtectedValue, searchPredicate, UnprotectedValue } from 'client-core';\nimport { SearchInput } from 'client-web-sdk';\n\nimport { ContentLogin, CopyToClipboardWithClear } from 'src/types';\n\nimport styles from './LoginList.module.css';\nimport LoginListItem from './LoginListItem';\n\nexport type Props = {\n  displayLogins: readonly ContentLogin[] | undefined;\n  recentUndoIndex: number | undefined;\n  performUndo: (login: ContentLogin, index: number) => Promise<void>;\n  checkTotpTimeOffset: () => Promise<void>;\n  getUnprotectedValueForContentLoginWithContentId: (\n    l: ContentLogin,\n    value: ProtectedValue | UnprotectedValue,\n  ) => Promise<UnprotectedValue | undefined>;\n  copyToClipboardWithClear: CopyToClipboardWithClear;\n};\n\nexport default function LoginList({\n  displayLogins,\n  checkTotpTimeOffset,\n  recentUndoIndex,\n  performUndo,\n  getUnprotectedValueForContentLoginWithContentId,\n  copyToClipboardWithClear,\n}: Props) {\n  const { filteredLogins, searchString, setSearchString } = useLoginFilter(displayLogins);\n\n  const showSearch = !!displayLogins && displayLogins.length >= 5;\n\n  return (\n    <>\n      {showSearch && (\n        <div className={styles.SearchWrapper}>\n          <SearchInput\n            size=\"small\"\n            placeholder={plural(displayLogins.length, { other: 'Search # logins' })}\n            value={searchString}\n            onChange={(e) => setSearchString(e.target.value)}\n            clear={() => setSearchString('')}\n          />\n        </div>\n      )}\n      <ul className={styles.LoginList}>\n        {filteredLogins &&\n          filteredLogins.map((l, i) => (\n            <LoginListItem\n              login={l}\n              key={l.id}\n              undo={() => performUndo(l, i)}\n              undone={recentUndoIndex === i}\n              checkTotpTimeOffset={checkTotpTimeOffset}\n              getUnprotectedValueForContentLoginWithContentId={\n                getUnprotectedValueForContentLoginWithContentId\n              }\n              copyToClipboardWithClear={copyToClipboardWithClear}\n            />\n          ))}\n        {filteredLogins &&\n          displayLogins &&\n          filteredLogins.length === 0 &&\n          displayLogins.length > 0 && (\n            <li className={styles.NoLoginsFound}>\n              <Trans>No logins found</Trans>\n            </li>\n          )}\n      </ul>\n    </>\n  );\n}\n\nfunction useLoginFilter(logins: readonly ContentLogin[] | undefined) {\n  const [searchString, setSearchString] = useState('');\n  const filteredLogins = useMemo(() => {\n    if (!logins) {\n      return undefined;\n    }\n    return logins.filter((l) => searchPredicate(l, searchString));\n  }, [logins, searchString]);\n\n  return { filteredLogins, searchString, setSearchString };\n}\n","import { useState, useEffect, useCallback } from 'react';\n\nimport { ContentLogin, AutosnatchId } from 'src/types';\n\nexport default function useUndoState(\n  logins: readonly ContentLogin[] | undefined,\n  undo: (id: AutosnatchId) => Promise<void>,\n) {\n  const [recentUndoIndex, setRecentUndoIndex] = useState<number>();\n  useEffect(() => {\n    if (recentUndoIndex === undefined) {\n      return;\n    }\n    const tid = window.setTimeout(() => {\n      setRecentUndoIndex(undefined);\n    }, 5000);\n    return () => window.clearTimeout(tid);\n  }, [recentUndoIndex, setRecentUndoIndex]);\n\n  const [displayLogins, setDisplayLogins] = useState<readonly ContentLogin[]>();\n  useEffect(() => {\n    // keep the old logins when there is a recent undo, so that we can still show the undo state for\n    // a login that was just removed\n    if (recentUndoIndex !== undefined) {\n      return;\n    }\n    setDisplayLogins(logins);\n  }, [logins, recentUndoIndex]);\n\n  const performUndo = useCallback(\n    async (login: ContentLogin, index: number) => {\n      if (!login.undo?.id) {\n        return;\n      }\n      setDisplayLogins(logins);\n      setRecentUndoIndex(index);\n      await undo(login.undo.id);\n    },\n    [undo, logins, setDisplayLogins, setRecentUndoIndex],\n  );\n\n  return { displayLogins, recentUndoIndex, performUndo };\n}\n","import React, { useMemo } from 'react';\n\nimport { ProtectedValue, UnprotectedValue } from 'client-core';\nimport { UIStyleContainer, UnlockDeviceType } from 'client-web-sdk';\n\nimport { getFrontendServerUrl } from 'src/serverUrl';\nimport { AutosnatchId, ContentLogin, CopyToClipboardWithClear } from 'src/types';\n\nimport { PushProgressStateType } from '../util/usePushProgressState';\n\nimport DisableSwitches from './DisableSwitches';\nimport Footer from './Footer';\nimport styles from './LoggedIn.module.css';\nimport LoginList from './LoginList';\nimport { PopupUnlockFrame } from './PopupUnlockFrame';\nimport useUndoState from './useUndoState';\n\ninterface Props {\n  isUnlocked: boolean;\n  pushState: PushProgressStateType;\n  requestUnlock: () => void;\n  report: () => void;\n  eTLDPlusOne: string | undefined;\n  disabledForPage: boolean;\n  disabledPageHost: string;\n  setDisabledForPage: (d: boolean) => void;\n  autosnatchDisabled: boolean;\n  setAutosnatchDisabled: (v: boolean) => void;\n  contentScriptBlocked: boolean;\n  browserName: string;\n  browserIsMobileSafari?: boolean;\n  incognito: boolean;\n  unlockDeviceType: UnlockDeviceType;\n  logins: readonly ContentLogin[];\n  undo: (id: AutosnatchId) => Promise<void>;\n  checkTotpTimeOffset: () => Promise<void>;\n  globalSearchShortcut?: string;\n  applePlatform: boolean;\n  openGlobalSearchWindow?: () => void;\n  openWebappForSecurityKeyUnlock: () => void;\n  getUnprotectedValueForContentLoginWithContentId: (\n    l: ContentLogin,\n    value: ProtectedValue | UnprotectedValue,\n  ) => Promise<UnprotectedValue | undefined>;\n  copyToClipboardWithClear: CopyToClipboardWithClear;\n}\n\nexport default function LoggedIn({\n  isUnlocked,\n  pushState,\n  requestUnlock,\n  report,\n  eTLDPlusOne,\n  disabledForPage,\n  setDisabledForPage,\n  disabledPageHost,\n  autosnatchDisabled,\n  setAutosnatchDisabled,\n  contentScriptBlocked,\n  browserName,\n  browserIsMobileSafari,\n  unlockDeviceType,\n  incognito,\n  logins,\n  undo,\n  checkTotpTimeOffset,\n  globalSearchShortcut: globalSearchShortCut,\n  applePlatform,\n  openGlobalSearchWindow,\n  openWebappForSecurityKeyUnlock,\n  getUnprotectedValueForContentLoginWithContentId,\n  copyToClipboardWithClear,\n}: Props) {\n  const manageLink = useMemo(() => {\n    if (browserIsMobileSafari) {\n      return undefined;\n    }\n    if (!eTLDPlusOne || logins.length === 0) {\n      return getFrontendServerUrl();\n    }\n    return `${getFrontendServerUrl()}/search?filter=${eTLDPlusOne}`;\n  }, [browserIsMobileSafari, eTLDPlusOne, logins.length]);\n\n  const { displayLogins, recentUndoIndex, performUndo } = useUndoState(logins, undo);\n\n  return (\n    <>\n      <UIStyleContainer uiStyle=\"default\" className={styles.UIStyleContainer}>\n        <DisableSwitches\n          incognito={incognito}\n          pageDisabled={disabledForPage}\n          setPageDisabled={setDisabledForPage}\n          disabledPageHost={disabledPageHost}\n          autosnatchDisabled={autosnatchDisabled}\n          setAutosnatchDisabled={setAutosnatchDisabled}\n          contentScriptBlocked={contentScriptBlocked}\n          browserName={browserName}\n        />\n      </UIStyleContainer>\n      <PopupUnlockFrame\n        isUnlocked={isUnlocked}\n        pushState={pushState}\n        childrenUIStyle={displayLogins && displayLogins.length > 0 ? 'default' : 'highlight'}\n        unlockDeviceType={unlockDeviceType}\n        requestUnlock={requestUnlock}\n        openWebappForSecurityKeyUnlock={openWebappForSecurityKeyUnlock}\n      >\n        <LoginList\n          displayLogins={displayLogins}\n          performUndo={performUndo}\n          recentUndoIndex={recentUndoIndex}\n          checkTotpTimeOffset={checkTotpTimeOffset}\n          getUnprotectedValueForContentLoginWithContentId={\n            getUnprotectedValueForContentLoginWithContentId\n          }\n          copyToClipboardWithClear={copyToClipboardWithClear}\n        />\n      </PopupUnlockFrame>\n      <Footer\n        manageLink={manageLink}\n        report={report}\n        globalSearchShortcut={globalSearchShortCut}\n        applePlatform={applePlatform}\n        openGlobalSearchWindow={openGlobalSearchWindow}\n      />\n    </>\n  );\n}\n","import { Trans } from '@lingui/macro';\nimport React, { useState } from 'react';\n\nimport { ActionButton } from 'client-web-sdk';\n\nimport useErrorHandlingCallback from 'src/util/react/useErrorHandlingCallback';\n\nimport styles from './LoggedOut.module.css';\n\ninterface Props {\n  openWebapp: () => Promise<{ permissionGranted: boolean }>;\n}\n\nexport default function LoggedOut({ openWebapp }: Props) {\n  const [permissionDenied, setPermissionDenied] = useState(false);\n  const handleLoginClick = useErrorHandlingCallback(async () => {\n    const { permissionGranted } = await openWebapp();\n    setPermissionDenied(!permissionGranted);\n  }, [openWebapp]);\n\n  return (\n    <div className={styles.LoggedOut}>\n      <ActionButton buttonStyle=\"primary\" element=\"button\" onClick={handleLoginClick}>\n        <Trans>Login now</Trans>\n      </ActionButton>\n      {permissionDenied && (\n        /* This is only for safari */\n        <p className={styles.PermissionDenied}>\n          <Trans>To activate the extension, please grant access.</Trans>\n        </p>\n      )}\n    </div>\n  );\n}\n","export default \"__VITE_ASSET__45a44135__\"","import { Trans } from '@lingui/macro';\nimport classNames from 'classnames';\nimport React, { PropsWithChildren, useEffect } from 'react';\n\nimport { UIStyleContainer } from 'client-web-sdk';\n\nimport { ReactComponent as HeyloginLogoNegative } from 'src/images/heylogin_logo_dark_mode.svg';\n\n/* eslint css-modules/no-unused-class: [2, { markAsUsed: ['desktopPopup', 'mobileSafariBottomSheet', 'mobileSafariPopup'] }] */\nimport styles from './PopupFrame.module.css';\n\nexport type PopupDisplayMode =\n  // all desktop browsers\n  | 'desktopPopup'\n  // iOS Safari on iPhone and iPad when Safari is narrow (e.g. in 1/3 split view)\n  | 'mobileSafariBottomSheet'\n  // iOS Safari in iPad when Safari is wide (e.g. fullscreen or 2/3 split view)\n  | 'mobileSafariPopup';\n\nexport default function PopupFrame({\n  domain,\n  children,\n  displayMode = 'desktopPopup',\n}: PropsWithChildren<{ domain?: string; displayMode?: PopupDisplayMode }>) {\n  useEffect(() => {\n    document.documentElement.classList.add(styles[displayMode]);\n    return () => document.documentElement.classList.remove(styles[displayMode]);\n  }, [displayMode]);\n\n  return (\n    <UIStyleContainer uiStyle=\"highlight\" className={classNames(styles.Popup)}>\n      <header className={styles.Header}>\n        <HeyloginLogoNegative role=\"img\" aria-label=\"heylogin\" />\n        {domain && (\n          <span className={styles.Domain}>\n            <Trans>on</Trans> <strong>{domain}</strong>\n          </span>\n        )}\n      </header>\n      {children}\n    </UIStyleContainer>\n  );\n}\n","export default \"__VITE_ASSET__7171c5b6__\"","export default \"__VITE_ASSET__f96266ac__\"","export default \"__VITE_ASSET__6bd440aa__\"","import { t, Trans } from '@lingui/macro';\nimport classNames from 'classnames';\nimport React, { useState, useCallback, useEffect } from 'react';\n\nimport { trackError, ReportPageProblem, ReportPageProblemKnownValue } from 'backend-client-web';\nimport { Loading, FormInput, UIStyleContainer, ActionButton, Switch } from 'client-web-sdk';\n\nimport { HeyproblemsInfo } from 'src/entrypoints/background/HeyproblemsMessageHandler';\nimport { ReactComponent as CheckIcon } from 'src/images/check-circle-white-checkmark.svg';\nimport { ReactComponent as RocketIcon } from 'src/images/rocket.svg';\nimport { ReactComponent as ArrowIcon } from 'src/images/stemmed-arrow-right.svg';\nimport { ContentLogin } from 'src/types';\nimport getHost from 'src/util/getHost';\nimport useErrorHandlingCallback from 'src/util/react/useErrorHandlingCallback';\n\nimport styles from './ReportPage.module.css';\n\ntype Props = {\n  back: () => void;\n  reportPage: (info: HeyproblemsInfo) => Promise<boolean>;\n  url?: string;\n  captureScreen: () => Promise<string>;\n  logins: readonly ContentLogin[] | undefined;\n};\n\ntype States = 'form' | 'loading' | 'reported' | 'error';\n\nexport default function ReportPage({\n  url,\n  back,\n  reportPage,\n  captureScreen: takeScreenshot,\n  logins,\n}: Props) {\n  const [state, setState] = useState<States>('form');\n  const [storedReport, setStoredReport] = useState<HeyproblemsInfo | undefined>(undefined);\n  const [screenshot, setScreenshot] = useState<string | undefined>(undefined);\n\n  useEffect(() => {\n    const fn = async () => {\n      const s = await takeScreenshot();\n      setScreenshot(s);\n    };\n    fn().catch(trackError);\n  }, [takeScreenshot]);\n\n  const sendReport = useErrorHandlingCallback(\n    async (r: HeyproblemsInfo) => {\n      setState('loading');\n      setStoredReport(r);\n\n      const success = await reportPage(r);\n      if (success) {\n        setState('reported');\n      } else {\n        setState('error');\n      }\n    },\n    [reportPage, setStoredReport],\n  );\n\n  const resendReport = useCallback(() => {\n    if (!storedReport) {\n      trackError(new Error('report is missing, this should never happen'));\n      setState('form');\n    } else {\n      sendReport(storedReport);\n    }\n  }, [sendReport, storedReport]);\n\n  return (\n    <UIStyleContainer uiStyle=\"default\">\n      {state === 'form' && url ? (\n        // NOTE: fall back to 'loading' state while url is not set\n        <ReportPageForm\n          url={url}\n          back={back}\n          sendReport={sendReport}\n          screenshot={screenshot}\n          logins={logins}\n        />\n      ) : state === 'reported' ? (\n        <div className={classNames(styles.Reported)}>\n          <RocketIcon />\n          <div className={styles.ReportedMessage}>\n            <b>\n              <Trans>Thank you for your report</Trans>\n            </b>\n            <p>\n              <Trans>\n                heylogin is always improving. With your help, we can provide the best login\n                experience!\n              </Trans>\n            </p>\n          </div>\n          <div className={styles.ReportedNav}>\n            <button onClick={back} className={styles.NavButton}>\n              <Trans>Back</Trans>\n            </button>\n          </div>\n        </div>\n      ) : state === 'error' ? (\n        <div className={classNames(styles.Reported)}>\n          <div className={styles.ReportedMessage}>\n            <b>\n              <Trans>Something went wrong.</Trans>\n            </b>\n            <p>\n              <Trans>Please make sure you have internet connection.</Trans>\n            </p>\n          </div>\n          <div className={styles.ReportedNav}>\n            <button className={styles.NavButton} onClick={resendReport}>\n              <Trans>Try again</Trans>\n            </button>\n            <button className={styles.NavButton} onClick={back}>\n              <Trans>Back</Trans>\n            </button>\n          </div>\n        </div>\n      ) : (\n        <div className={classNames(styles.Loading)}>\n          <Loading />\n        </div>\n      )}\n    </UIStyleContainer>\n  );\n}\n\nfunction SelectionButton({ text, onClick }: { text: string; onClick: () => void }) {\n  return (\n    <button className={styles.SelectionButton} onClick={onClick}>\n      <div className={styles.SelectionButtonContent}>\n        {text}\n        <ArrowIcon />\n      </div>\n    </button>\n  );\n}\n\nfunction TypeSelection({ select }: { select: (type: ReportPageProblemKnownValue) => void }) {\n  return (\n    <div>\n      <SelectionButton\n        text={t`heylogin is not displayed`}\n        onClick={() => select(ReportPageProblem.DETECTION)}\n      />\n      <SelectionButton\n        text={t`heylogin is at the wrong position`}\n        onClick={() => select(ReportPageProblem.POSITION)}\n      />\n      <SelectionButton\n        text={t`I was not logged in`}\n        onClick={() => select(ReportPageProblem.SUBMISSION)}\n      />\n      <SelectionButton text={t`Other`} onClick={() => select(ReportPageProblem.OTHER)} />\n    </div>\n  );\n}\n\nfunction ReportPageForm({\n  url,\n  className,\n  back,\n  sendReport,\n  screenshot,\n  logins,\n}: {\n  url: string;\n  className?: string;\n  back: () => void;\n  sendReport: (report: HeyproblemsInfo) => void;\n  screenshot: string | undefined;\n  logins: readonly ContentLogin[] | undefined;\n}) {\n  const [errorType, setErrorType] = useState<ReportPageProblemKnownValue | undefined>(undefined);\n\n  const [comment, setComment] = useState('');\n  const [includeScreenshot, setIncludeScreenshot] = useState(true);\n\n  const submit = useCallback(async () => {\n    const info: HeyproblemsInfo = {\n      problem: errorType ?? ReportPageProblem.OTHER,\n      comment,\n      screenshot: includeScreenshot ? screenshot : undefined,\n      hasLogin: !!logins?.length,\n      hasHideSecretsLogin: !!logins && logins.some((l) => !l.permissions.viewSecrets),\n    };\n    sendReport(info);\n  }, [errorType, comment, includeScreenshot, screenshot, logins, sendReport]);\n\n  return (\n    <>\n      <div className={classNames(styles.Header, className)}>\n        <Trans>heylogin does not work for {getHost(url)}?</Trans>\n      </div>\n      {errorType === undefined ? (\n        <TypeSelection select={setErrorType} />\n      ) : (\n        <div className={classNames(styles.Form, className)}>\n          <form>\n            <FormInput\n              element={{\n                type: 'textarea',\n                props: {\n                  autoFocus: true,\n                  value: comment,\n                  onChange: (e: React.ChangeEvent<HTMLTextAreaElement>) =>\n                    setComment(e.target.value),\n                },\n              }}\n              placeholder={t`Briefly describe your problem (optional)`}\n              className={styles.CommentField}\n            />\n            <label className={styles.ErrorSelector}>\n              <Switch\n                className={styles.Switch}\n                checked={includeScreenshot}\n                onChange={() => setIncludeScreenshot(!includeScreenshot)}\n              />\n              <Trans>Automatically include screenshot of current website</Trans>\n            </label>\n            {includeScreenshot && screenshot && (\n              <div className={styles.Screenshot}>\n                <img src={screenshot} alt={t`screenshot`} />\n                <CheckIcon />\n              </div>\n            )}\n            <ActionButton\n              buttonStyle=\"primary\"\n              type=\"submit\"\n              onClick={submit}\n              className={styles.SubmitButton}\n            >\n              <Trans>Send</Trans>\n            </ActionButton>\n            <ActionButton buttonStyle=\"tertiary\" onClick={back} className={styles.CancelButton}>\n              <Trans>Cancel</Trans>\n            </ActionButton>\n          </form>\n        </div>\n      )}\n    </>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\n\nimport { UnlockState } from 'src/types';\n\nexport type PushProgressStateType = 'connecting' | 'error' | 'warning' | undefined;\n\nexport default function usePushProgressState(unlockState: UnlockState | undefined) {\n  const [pushState, setPushState] = useState<PushProgressStateType>();\n\n  const delayChangesUntilRef = useRef<number | undefined>(undefined);\n\n  useEffect(() => {\n    const newPushState = PushProgressStateFromUnlockState(unlockState);\n    if (delayChangesUntilRef.current === undefined) {\n      setPushState(newPushState);\n    } else {\n      setTimeout(() => {\n        setPushState(newPushState);\n        delayChangesUntilRef.current = undefined;\n      }, Math.max(0, delayChangesUntilRef.current - Date.now()));\n    }\n    if (newPushState === 'error' || newPushState === 'warning') {\n      delayChangesUntilRef.current = Date.now() + 2000;\n    }\n  }, [unlockState]);\n\n  return pushState;\n}\n\nfunction PushProgressStateFromUnlockState(unlockState: UnlockState | undefined) {\n  if (unlockState === 'unlocking') {\n    return 'connecting';\n  }\n  if (unlockState === 'error') {\n    return 'error';\n  }\n  if (unlockState === 'warning') {\n    return 'warning';\n  }\n  return undefined;\n}\n","import Bowser from 'bowser';\nimport psl from 'psl';\nimport React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { debounce } from 'throttle-debounce';\nimport browser from 'webextension-polyfill';\n\nimport { Achievement, debugConsole, trackError } from 'backend-client-web';\nimport {\n  AuditlogWriteContextProvider,\n  DebugWrapper,\n  isApplePlatform,\n  supportsQuickAccess,\n  useElementSize,\n} from 'client-web-sdk';\n\nimport { isDesktopSafari, isMobileSafari } from 'src/entrypoints/background/browserDetection';\nimport { HeyproblemsInfo } from 'src/entrypoints/background/HeyproblemsMessageHandler';\nimport { sendMessage, makeMessageListener, sendMessageToTab, messageError } from 'src/message';\nimport { getFrontendServerUrl } from 'src/serverUrl';\nimport { ContentLogin, AutosnatchId, ContentScriptMode } from 'src/types';\nimport addAchievement from 'src/util/addAchievement';\nimport debugMode from 'src/util/debugMode';\nimport { copyToClipboardWithClear } from 'src/util/dom/copyToClipboard';\nimport getHost from 'src/util/getHost';\nimport { getUnprotectedValueForContentLoginWithContentId } from 'src/util/getUnprotectedValueForContentLogin';\nimport isContentScriptBlockedByBrowser from 'src/util/isContentScriptBlockedByBrowser';\nimport ClientOutdatedMessage from 'src/util/react/ClientOutdatedMessage';\nimport useAutosnatchSettings from 'src/util/react/useAutosnatchSettings';\nimport useClientOutdated from 'src/util/react/useClientOutdated';\nimport useUnlock from 'src/util/react/useUnlock';\n\nimport { getBrowserName } from '../../util/getBrowserName';\n\nimport Basic from './components/Basic';\nimport LoggedIn from './components/LoggedIn';\nimport LoggedOut from './components/LoggedOut';\nimport PopupFrame, { PopupDisplayMode } from './components/PopupFrame';\nimport ReportPage from './components/ReportPage';\nimport usePushProgressState from './util/usePushProgressState';\n\nexport default function PopupContainer() {\n  useEffect(() => {\n    addAchievement(Achievement.EXT_POPUP_OPEN);\n  }, []);\n\n  const userLoggedIn = useUserLoggedIn();\n  const logins = useLogins();\n  const {\n    isUnlocked,\n    unlockState,\n    requestUnlock,\n    unlockDeviceType,\n    webauthnOnlyUnlockSkipped,\n  } = useUnlock({\n    achievement: Achievement.EXT_POPUP_UNLOCK,\n    unlockOnInitialRender: true,\n    skipWebauthnUnlock: true,\n  });\n\n  const currentTab = useCurrentTab();\n\n  const reportPage = async (info: HeyproblemsInfo) => {\n    const success = await Promise.race([\n      sendMessage({ type: 'SendHeyproblemsReport', info }),\n      // Fake success after 1.5s. May loose some reports, but a overlong long delay makes report\n      // feel broken.\n      new Promise<boolean>((resolve) => setTimeout(() => resolve(true), 1500)),\n    ]);\n    return !!success;\n  };\n\n  const undo = useCallback(async (id: AutosnatchId) => {\n    await sendMessage({\n      type: 'UndoAutosnatch',\n      id,\n    });\n  }, []);\n\n  const { disabledForPage, setDisabledForPage, disabledPageHost } = useDisabledForPage(\n    currentTab?.url,\n  );\n  const [isReportingPage, setIsReportingPage] = useState(false);\n\n  const captureScreen = useCallback(async () => {\n    const [activeTab] = await browser.tabs.query({ active: true, currentWindow: true });\n    return browser.tabs.captureVisibleTab(activeTab.windowId);\n  }, []);\n\n  const pushState = usePushProgressState(unlockState);\n\n  const contentScriptBlockedByBrowser =\n    !!currentTab &&\n    currentTab.contentScriptMode === undefined &&\n    isContentScriptBlockedByBrowser(currentTab.url);\n  const basicPopup =\n    !contentScriptBlockedByBrowser &&\n    (currentTab?.contentScriptMode === undefined ||\n      currentTab.contentScriptMode === 'heyloginWebapp');\n\n  const clientOutdated = useClientOutdated();\n\n  const { autosnatchDisabled, setAutosnatchDisabled } = useAutosnatchSettings();\n\n  const disableAutosnatchWithAchievement = useCallback(\n    (disabled: boolean) => {\n      setAutosnatchDisabled(disabled);\n      sendMessage({\n        type: 'AddAchievements',\n        achievements: [Achievement.EXT_POPUP_DISABLE_AUTOSNATCH],\n      }).catch(trackError);\n    },\n    [setAutosnatchDisabled],\n  );\n\n  const { browserName, browserSupportsQuickAccess, applePlatform } = useBrowserProperties();\n\n  const globalSearchShortcut = useGlobalSearchShortcut();\n\n  const { displayMode, browserIsMobileSafari } = usePopupDisplayMode();\n\n  const openGlobalSearchWindow = useCallback(() => {\n    sendMessage({ type: 'OpenGlobalSearchWindow' })\n      .then(() => window.close())\n      .catch(trackError);\n  }, []);\n\n  const openWebappForSecurityKeyUnlock = useCallback(() => {\n    browser.tabs.create({ url: getFrontendServerUrl() }).catch(trackError);\n    // In firefox the extension popup being open leads to the webauthn unlock request being\n    // canceled, so we preemptively make the popup close itself.\n    window.close();\n  }, []);\n\n  const doRequestUnlock = useCallback(() => {\n    if (webauthnOnlyUnlockSkipped) {\n      openWebappForSecurityKeyUnlock();\n    } else {\n      requestUnlock();\n    }\n  }, [openWebappForSecurityKeyUnlock, requestUnlock, webauthnOnlyUnlockSkipped]);\n\n  return (\n    <AuditlogWriteContextProvider\n      writeAuditlogEvent={(organizationId, event) => {\n        sendMessage({ type: 'WriteAuditlogEvent', organizationId, event }).catch(trackError);\n      }}\n    >\n      <PopupFrame domain={basicPopup ? undefined : currentTab.host} displayMode={displayMode}>\n        {clientOutdated ? (\n          <ClientOutdatedMessage />\n        ) : isReportingPage ? (\n          <ReportPage\n            back={() => setIsReportingPage(false)}\n            reportPage={reportPage}\n            url={currentTab?.url}\n            captureScreen={captureScreen}\n            logins={logins}\n          />\n        ) : userLoggedIn === undefined ? (\n          <Basic\n            unlockDeviceType={unlockDeviceType}\n            globalSearchShortcut={globalSearchShortcut}\n            applePlatform={applePlatform}\n            openGlobalSearchWindow={browserSupportsQuickAccess ? openGlobalSearchWindow : undefined}\n            openWebappForSecurityKeyUnlock={openWebappForSecurityKeyUnlock}\n          />\n        ) : !userLoggedIn ? (\n          <LoggedOut openWebapp={openWebapp} />\n        ) : logins === undefined ||\n          disabledForPage === undefined ||\n          currentTab === undefined ||\n          isUnlocked === undefined ||\n          basicPopup ? (\n          <Basic\n            isUnlocked={isUnlocked}\n            pushState={pushState}\n            browserIsMobileSafari={browserIsMobileSafari}\n            requestUnlock={doRequestUnlock}\n            unlockDeviceType={unlockDeviceType}\n            globalSearchShortcut={globalSearchShortcut}\n            applePlatform={applePlatform}\n            openGlobalSearchWindow={browserSupportsQuickAccess ? openGlobalSearchWindow : undefined}\n            openWebappForSecurityKeyUnlock={openWebappForSecurityKeyUnlock}\n          />\n        ) : (\n          <LoggedIn\n            contentScriptBlocked={contentScriptBlockedByBrowser}\n            logins={logins}\n            isUnlocked={isUnlocked}\n            pushState={pushState}\n            requestUnlock={doRequestUnlock}\n            undo={undo}\n            eTLDPlusOne={currentTab.eTLDPlusOne}\n            disabledForPage={disabledForPage}\n            setDisabledForPage={setDisabledForPage}\n            disabledPageHost={disabledPageHost}\n            autosnatchDisabled={!!autosnatchDisabled}\n            setAutosnatchDisabled={disableAutosnatchWithAchievement}\n            report={() => setIsReportingPage(true)}\n            browserName={browserName}\n            checkTotpTimeOffset={async () => {\n              await sendMessage({ type: 'RequestSync' });\n            }}\n            browserIsMobileSafari={browserIsMobileSafari}\n            incognito={currentTab.incognito}\n            unlockDeviceType={unlockDeviceType}\n            applePlatform={applePlatform}\n            globalSearchShortcut={globalSearchShortcut}\n            openGlobalSearchWindow={browserSupportsQuickAccess ? openGlobalSearchWindow : undefined}\n            openWebappForSecurityKeyUnlock={openWebappForSecurityKeyUnlock}\n            getUnprotectedValueForContentLoginWithContentId={\n              getUnprotectedValueForContentLoginWithContentId\n            }\n            copyToClipboardWithClear={copyToClipboardWithClear}\n          />\n        )}\n        <DebugWrapper>\n          Debug mode enabled!{' '}\n          <button type=\"button\" onClick={() => (debugMode.debug = false)} className=\"browser-style\">\n            Disable\n          </button>\n        </DebugWrapper>\n      </PopupFrame>\n    </AuditlogWriteContextProvider>\n  );\n}\n\nfunction useBrowserProperties() {\n  return useMemo(() => {\n    const parsedBrowser = Bowser.parse(window.navigator.userAgent);\n    const browserName = getBrowserName(parsedBrowser);\n    const browserSupportsQuickAccess = supportsQuickAccess(parsedBrowser);\n    const applePlatform = isApplePlatform(parsedBrowser);\n\n    return {\n      browserName,\n      browserSupportsQuickAccess,\n      applePlatform,\n    };\n  }, []);\n}\n\nfunction useUserLoggedIn() {\n  const [userLoggedIn, setUserLoggedIn] = useState<boolean>();\n\n  useEffect(() => {\n    (async () => {\n      const response = await sendMessage({ type: 'GetUser' });\n      setUserLoggedIn(response !== messageError && !!response?.userId);\n    })().catch(trackError);\n  }, []);\n\n  return userLoggedIn;\n}\n\nfunction useLogins() {\n  const [logins, setLogins] = useState<readonly ContentLogin[]>();\n\n  useEffect(() => {\n    const updateLogins = debounce(100, () => {\n      (async () => {\n        debugConsole.log('[PopupContainer]', 'Update logins');\n        const getLoginsResponse = await sendMessage({ type: 'GetLogins' });\n        const newLogins =\n          getLoginsResponse === messageError ? undefined : getLoginsResponse?.logins;\n        setLogins(newLogins);\n      })().catch(trackError);\n    });\n\n    updateLogins();\n\n    const messageListener = makeMessageListener({\n      DataUpdate: updateLogins,\n    });\n\n    browser.runtime.onMessage.addListener(messageListener);\n    return () => browser.runtime.onMessage.removeListener(messageListener);\n  }, []);\n\n  useMarkAutosnatchesSeen(logins);\n\n  return logins;\n}\n\nasync function openWebapp() {\n  if (isDesktopSafari()) {\n    // In Safari, permissions are always given by domain basis, even though we requested access on\n    // \"<all_urls>\". We need to have the permission for the webapp domain, otherwise we won't be\n    // able to get the credentials from the webapp's local storage.\n    const webappUrl = new URL(getFrontendServerUrl());\n    // remove port, because it isn't allowed in a match pattern\n    webappUrl.port = '';\n    const granted = await browser.permissions.request({\n      origins: [`${webappUrl}*`],\n    });\n    if (!granted) {\n      return { permissionGranted: false };\n    }\n    await browser.runtime.sendNativeMessage('application.id', {\n      type: 'openHostApp',\n    });\n    return { permissionGranted: true };\n  }\n\n  window.open(getFrontendServerUrl());\n  return { permissionGranted: true };\n}\n\nfunction useMarkAutosnatchesSeen(logins: readonly ContentLogin[] | undefined) {\n  useEffect(() => {\n    if (!logins || !logins.length) {\n      return;\n    }\n    const ids = logins\n      .map((l) => l.undo)\n      .filter((u): u is Exclude<ContentLogin['undo'], undefined> => !!u && !u.seen)\n      .map((u) => u.id);\n    if (!ids.length) {\n      return;\n    }\n\n    const tid = window.setTimeout(() => {\n      sendMessage({\n        type: 'MarkAutosnatchesSeen',\n        ids,\n      }).catch(trackError);\n    }, 500);\n    return () => window.clearTimeout(tid);\n  }, [logins]);\n}\n\nfunction useCurrentTab() {\n  const [currentTab, setCurrentTab] = useState<{\n    url: string;\n    host: string;\n    eTLDPlusOne: string;\n    incognito: boolean;\n    contentScriptMode: ContentScriptMode | undefined;\n  }>();\n\n  const initialRenderRef = useRef(true);\n\n  useEffect(() => {\n    if (!initialRenderRef.current) {\n      return;\n    }\n    initialRenderRef.current = false;\n\n    async function updateCurrentTab() {\n      const activeTabs = await browser.tabs.query({ active: true, currentWindow: true });\n      const activeTab = activeTabs.length ? activeTabs[0] : undefined;\n      if (activeTab?.url) {\n        const url = activeTab.url;\n        const incognito = activeTab.incognito;\n        const host = getHost(url);\n        const parsed = psl.parse(host);\n        const eTLDPlusOne = parsed.error || parsed.domain === null ? host : parsed.domain;\n\n        // Optimistically set current tab assuming \"default\" content script mode. This is going to\n        // be the most common result so we can speed up the default case by assuming it.\n        setCurrentTab((c) => ({\n          url,\n          incognito,\n          host,\n          eTLDPlusOne,\n          contentScriptMode: c ? c.contentScriptMode : 'default',\n        }));\n\n        // Request the actual content script mode\n        const contentScriptMode = activeTab.id\n          ? await sendMessageToTab(activeTab.id, {\n              type: 'GetContentScriptMode',\n            })\n          : undefined;\n        setCurrentTab({\n          url,\n          incognito,\n          host,\n          eTLDPlusOne,\n          contentScriptMode: contentScriptMode === messageError ? undefined : contentScriptMode,\n        });\n      } else {\n        setCurrentTab(undefined);\n      }\n    }\n\n    updateCurrentTab().catch(trackError);\n  }, []);\n\n  return currentTab;\n}\n\nfunction useDisabledForPage(url: string | undefined) {\n  const [disabledForPage, setDisabledForPage] = useState<boolean>();\n  const [disabledPageHost, setDisabledPageHost] = useState<string>('');\n\n  useEffect(() => {\n    (async () => {\n      if (!url) {\n        setDisabledForPage(undefined);\n        setDisabledPageHost('');\n        return;\n      }\n      const disabledSiteSettingResult = await sendMessage({\n        type: 'GetDisabledSiteSettingForUrl',\n        url,\n      });\n      if (disabledSiteSettingResult === messageError) {\n        setDisabledForPage(undefined);\n        setDisabledPageHost(getHost(url));\n      } else {\n        setDisabledForPage(disabledSiteSettingResult?.disabled);\n        setDisabledPageHost(disabledSiteSettingResult.host ?? getHost(url));\n      }\n    })().catch(trackError);\n  }, [url]);\n\n  const updateDisabled = useCallback(\n    (newDisabled: boolean) => {\n      if (!url || newDisabled === disabledForPage) {\n        return;\n      }\n      setDisabledForPage(newDisabled);\n      if (newDisabled) {\n        addAchievement(Achievement.EXT_DISABLE_FOR_PAGE);\n      }\n      sendMessage({\n        type: 'SetDisabledSiteSettingForUrl',\n        url: url,\n        disabled: newDisabled,\n      }).catch(trackError);\n      if (!newDisabled) {\n        setDisabledPageHost(getHost(url));\n      }\n    },\n    [url, disabledForPage, setDisabledForPage],\n  );\n\n  return { disabledForPage, setDisabledForPage: updateDisabled, disabledPageHost };\n}\n\nfunction usePopupDisplayMode(): { displayMode: PopupDisplayMode; browserIsMobileSafari: boolean } {\n  const [ref, { width: windowWidth }] = useElementSize();\n  useEffect(() => {\n    ref(document.documentElement);\n  }, [ref]);\n\n  if (!isMobileSafari()) {\n    return { displayMode: 'desktopPopup', browserIsMobileSafari: false };\n  }\n\n  // If the popup is show as a popup in mobile safari it always has one of these two fixed widths.\n  // This seems to be the only way to distinguish the two possible display modes on iOS.\n  if (windowWidth === 320 || windowWidth === 375) {\n    return { displayMode: 'mobileSafariPopup', browserIsMobileSafari: true };\n  }\n\n  return { displayMode: 'mobileSafariBottomSheet', browserIsMobileSafari: true };\n}\n\nfunction useGlobalSearchShortcut(): string | undefined {\n  const [shortcut, setShortcut] = useState<string>();\n  const requestingRef = useRef<boolean>();\n\n  useEffect(() => {\n    if (requestingRef.current) {\n      return;\n    }\n\n    const updateShortcut = async () => {\n      requestingRef.current = true;\n      const resp = await sendMessage({ type: 'GetGlobalSearchShortcut' });\n      setShortcut(resp === messageError ? undefined : resp?.globalSearchShortcut);\n    };\n\n    updateShortcut().catch(trackError);\n  }, []);\n\n  return shortcut;\n}\n","/**\n * Temporary workaround for secondary monitors on MacOS where redraws don't happen\n *\n * Adopted from https://stackoverflow.com/a/64113061. Note that I just slapped @ts-ignore on errors\n * for chrome-specific code, as this is gonna be an ugly fix anyways\n *\n * @See https://bugs.chromium.org/p/chromium/issues/detail?id=971701\n */\nexport default function applyChromeRenderFix() {\n  // Only run in chrome.\n  // @ts-ignore\n  if (!chrome) {\n    return;\n  }\n\n  if (\n    // From testing the following conditions seem to indicate that the popup was opened on a secondary monitor\n    window.screenLeft < 0 ||\n    window.screenTop < 0 ||\n    window.screenLeft > window.screen.width ||\n    window.screenTop > window.screen.height\n  ) {\n    // @ts-ignore\n    chrome.runtime.getPlatformInfo((info) => {\n      if (info.os === 'mac') {\n        const fontFaceSheet = new CSSStyleSheet();\n        fontFaceSheet.insertRule(`\n          @keyframes redraw {\n            0% {\n              opacity: 1;\n            }\n            100% {\n              opacity: .99;\n            }\n          }\n        `);\n        fontFaceSheet.insertRule(`\n          html {\n            animation: redraw 1s linear infinite;\n          }\n        `);\n        // @ts-ignore\n        document.adoptedStyleSheets = [...document.adoptedStyleSheets, fontFaceSheet];\n      }\n    });\n  }\n}\n","import { i18n } from '@lingui/core';\nimport { I18nProvider } from '@lingui/react';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport initSentry from 'src/initSentry';\nimport initUiLocale from 'src/locales/initUiLocale';\nimport { ExtDebugVisibleContextProvider } from 'src/util/react/ExtDebugVisibleContext';\n\nimport styles from './index.module.css';\nimport PopupContainer from './PopupContainer';\nimport applyChromeRenderFix from './util/chromeRenderFix';\n\nimport 'client-web-sdk/index.css';\n\ninitSentry({ entryPoint: 'popup' });\n\ninitUiLocale();\n\n// see https://stackoverflow.com/a/64113061\napplyChromeRenderFix();\n\ndocument.documentElement.classList.add(styles.popup);\n\nReactDOM.render(\n  <I18nProvider i18n={i18n}>\n    <React.StrictMode>\n      <ExtDebugVisibleContextProvider>\n        <PopupContainer />\n      </ExtDebugVisibleContextProvider>\n    </React.StrictMode>\n  </I18nProvider>,\n  document.getElementById('root'),\n);\n"],"names":["isMobileSafari","precomputedBrowser","browser","Bowser","parse","navigator","userAgent","name","os","isIPadSafariPretendingToBeMac","isDesktopSafari","contentScriptBlockedUrls","isContentScriptBlockedByBrowser","urlStr","url","URL","some","u","host","endsWith","getBrowserName","precomputedBowser","i18n","_","id","React.createElement","Footer","manageLink","report","globalSearchShortcut","applePlatform","openGlobalSearchWindow","classNames","styles","withoutGlobalSearch","ManageLink","ArrowRight","FooterArrow","ReportButton","ReportIcon","LinkButton","QuickAccessButton","ShortcutView","PopupUnlockFrame","isUnlocked","pushState","childrenUIStyle","unlockDeviceType","requestUnlock","openWebappForSecurityKeyUnlock","children","hasSecurityKeyUnlock","filteredUnlockDeviceType","UIStyleContainer","LoginContainer","isUnlocking","UnlockOverlay","error","warning","PushState","UnlockLabel","connecting","SecurityKeyUnlockArrow","Locked","LockedMessage","ActionButton","UnlockButton","Basic","browserIsMobileSafari","undefined","getFrontendServerUrl","MessageBox","MobileSafariSetupSuccessMessage","DisableSwitches","pageDisabled","disabled","setPageDisabled","setDisabled","disabledPageHost","autosnatchDisabled","setAutosnatchDisabled","contentScriptBlocked","browserName","incognito","incognitoMessage","useIncognitoMessage","DisableForPage","Value","SwitchLabel","Switch","e","currentTarget","checked","incognitoMessages","Chrome","Firefox","PROTECTED_PLACEHOLDER","LoginListItem","login","undo","undone","checkTotpTimeOffset","getUnprotectedValueForContentLoginWithContentId","copyToClipboardWithClear","unprotect","useCallback","value","_a","unencrypted","customFields","useVisibleCustomFields","totpSecret","useTotpSecret","totp","totpPercent","totpDigits","useTotp","getValueWithPlaceholder","totpAlgorithm","totpPeriod","writeAuditlogEvent","useAuditlogWriteContext","hideLogin","type","label","username","title","Label","handleUndoClick","useErrorHandlingCallback","ItemRow","BorderedItemRow","Content","loginUrl","permissions","viewSecrets","isEmptyValue","password","organization","AuditlogEventType","LOGIN_R_PASSWORD_COPY","loginId","vaultId","vaultMetadata","loginRevisionId","history","currentRevisionId","loginEditTime","editTime","Totp","substring","TotpCountdown","TotpTimeOffsetWarning","showTotpTimeOffsetWarning","map","cf","trim","protected","LOGIN_R_CUSTOM_FIELD_COPY","customFieldId","Undo","success","UndoHeadline","UndoSubheadline","date","format","Date","locale","getDateFnsLocale","SuccessButton","UndoIcon","RowButton","RowCopyButton","onCopy","clearAfterTimeout","copied","copy","useCopyToClipboard","requestCopy","Error","valueToCopy","getValue","CopyButton","useMemo","filter","setTotpSecret","useState","useEffect","contentId","updateTotpSecret","secret","catch","trackError","LoginList","displayLogins","recentUndoIndex","performUndo","filteredLogins","searchString","setSearchString","useLoginFilter","showSearch","length","SearchWrapper","SearchInput","values","0","target","l","i","NoLoginsFound","logins","searchPredicate","useUndoState","setRecentUndoIndex","tid","window","setTimeout","clearTimeout","setDisplayLogins","index","LoggedIn","eTLDPlusOne","disabledForPage","setDisabledForPage","globalSearchShortCut","LoggedOut","openWebapp","permissionDenied","setPermissionDenied","handleLoginClick","permissionGranted","PermissionDenied","PopupFrame","domain","displayMode","document","documentElement","classList","add","remove","Popup","Header","HeyloginLogoNegative","Domain","ReportPage","back","reportPage","captureScreen","takeScreenshot","state","setState","storedReport","setStoredReport","screenshot","setScreenshot","fn","s","sendReport","r","resendReport","Reported","RocketIcon","ReportedMessage","ReportedNav","NavButton","Loading","SelectionButton","text","onClick","SelectionButtonContent","ArrowIcon","TypeSelection","select","ReportPageProblem","DETECTION","POSITION","SUBMISSION","OTHER","ReportPageForm","className","errorType","setErrorType","comment","setComment","includeScreenshot","setIncludeScreenshot","submit","info","problem","hasLogin","hasHideSecretsLogin","getHost","Form","FormInput","props","autoFocus","onChange","CommentField","ErrorSelector","Screenshot","CheckIcon","SubmitButton","CancelButton","usePushProgressState","unlockState","setPushState","delayChangesUntilRef","useRef","newPushState","PushProgressStateFromUnlockState","current","Math","max","now","PopupContainer","addAchievement","Achievement","EXT_POPUP_OPEN","userLoggedIn","useUserLoggedIn","useLogins","webauthnOnlyUnlockSkipped","useUnlock","achievement","EXT_POPUP_UNLOCK","unlockOnInitialRender","skipWebauthnUnlock","currentTab","useCurrentTab","Promise","race","sendMessage","resolve","useDisabledForPage","isReportingPage","setIsReportingPage","activeTab","tabs","query","active","currentWindow","captureVisibleTab","windowId","contentScriptBlockedByBrowser","contentScriptMode","basicPopup","clientOutdated","useClientOutdated","useAutosnatchSettings","disableAutosnatchWithAchievement","achievements","EXT_POPUP_DISABLE_AUTOSNATCH","browserSupportsQuickAccess","useBrowserProperties","useGlobalSearchShortcut","usePopupDisplayMode","then","close","create","doRequestUnlock","AuditlogWriteContextProvider","organizationId","event","DebugWrapper","debugMode","debug","parsedBrowser","supportsQuickAccess","isApplePlatform","setUserLoggedIn","response","messageError","userId","setLogins","updateLogins","debounce","log","getLoginsResponse","newLogins","messageListener","makeMessageListener","DataUpdate","runtime","onMessage","addListener","removeListener","useMarkAutosnatchesSeen","webappUrl","port","granted","request","origins","sendNativeMessage","open","ids","seen","setCurrentTab","initialRenderRef","updateCurrentTab","activeTabs","parsed","psl","c","sendMessageToTab","setDisabledPageHost","disabledSiteSettingResult","updateDisabled","newDisabled","EXT_DISABLE_FOR_PAGE","ref","width","windowWidth","useElementSize","shortcut","setShortcut","requestingRef","updateShortcut","resp","applyChromeRenderFix","chrome","screenLeft","screenTop","screen","height","getPlatformInfo","fontFaceSheet","CSSStyleSheet","insertRule","adoptedStyleSheets","initSentry","entryPoint","initUiLocale","popup","ReactDOM","render","getElementById"],"mappings":"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"}