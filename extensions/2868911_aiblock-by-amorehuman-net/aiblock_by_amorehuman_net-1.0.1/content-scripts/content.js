var content=function(){"use strict";var Be=Object.defineProperty;var Te=c=>{throw TypeError(c)};var Ue=(c,m,A)=>m in c?Be(c,m,{enumerable:!0,configurable:!0,writable:!0,value:A}):c[m]=A;var v=(c,m,A)=>Ue(c,typeof m!="symbol"?m+"":m,A),ge=(c,m,A)=>m.has(c)||Te("Cannot "+A);var U=(c,m,A)=>(ge(c,m,"read from private field"),A?A.call(c):m.get(c)),j=(c,m,A)=>m.has(c)?Te("Cannot add the same private member more than once"):m instanceof WeakSet?m.add(c):m.set(c,A),ye=(c,m,A,L)=>(ge(c,m,"write to private field"),L?L.call(c,A):m.set(c,A),A),Q=(c,m,A)=>(ge(c,m,"access private method"),A);var z,I,K,M,Ce,ce;function c(e){return e}var m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function A(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L={exports:{}};(function(e,t){(function(r,s){s(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:m,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const s="The message port closed before a response was received.",g=d=>{const x={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(x).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class b extends WeakMap{constructor(i,o=void 0){super(o),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const F=n=>n&&typeof n=="object"&&typeof n.then=="function",$=(n,i)=>(...o)=>{d.runtime.lastError?n.reject(new Error(d.runtime.lastError.message)):i.singleCallbackArg||o.length<=1&&i.singleCallbackArg!==!1?n.resolve(o[0]):n.resolve(o)},Y=n=>n==1?"argument":"arguments",Pe=(n,i)=>function(l,...f){if(f.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${Y(i.minArgs)} for ${n}(), got ${f.length}`);if(f.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${Y(i.maxArgs)} for ${n}(), got ${f.length}`);return new Promise((E,w)=>{if(i.fallbackToNoCallback)try{l[n](...f,$({resolve:E,reject:w},i))}catch(a){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),l[n](...f),i.fallbackToNoCallback=!1,i.noCallback=!0,E()}else i.noCallback?(l[n](...f),E()):l[n](...f,$({resolve:E,reject:w},i))})},Ee=(n,i,o)=>new Proxy(i,{apply(l,f,E){return o.call(f,n,...E)}});let J=Function.call.bind(Object.prototype.hasOwnProperty);const X=(n,i={},o={})=>{let l=Object.create(null),f={has(w,a){return a in n||a in l},get(w,a,T){if(a in l)return l[a];if(!(a in n))return;let u=n[a];if(typeof u=="function")if(typeof i[a]=="function")u=Ee(n,n[a],i[a]);else if(J(o,a)){let O=Pe(a,o[a]);u=Ee(n,n[a],O)}else u=u.bind(n);else if(typeof u=="object"&&u!==null&&(J(i,a)||J(o,a)))u=X(u,i[a],o[a]);else if(J(o,"*"))u=X(u,i[a],o["*"]);else return Object.defineProperty(l,a,{configurable:!0,enumerable:!0,get(){return n[a]},set(O){n[a]=O}}),u;return l[a]=u,u},set(w,a,T,u){return a in l?l[a]=T:n[a]=T,!0},defineProperty(w,a,T){return Reflect.defineProperty(l,a,T)},deleteProperty(w,a){return Reflect.deleteProperty(l,a)}},E=Object.create(n);return new Proxy(E,f)},ae=n=>({addListener(i,o,...l){i.addListener(n.get(o),...l)},hasListener(i,o){return i.hasListener(n.get(o))},removeListener(i,o){i.removeListener(n.get(o))}}),Re=new b(n=>typeof n!="function"?n:function(o){const l=X(o,{},{getContent:{minArgs:0,maxArgs:0}});n(l)}),pe=new b(n=>typeof n!="function"?n:function(o,l,f){let E=!1,w,a=new Promise(B=>{w=function(C){E=!0,B(C)}}),T;try{T=n(o,l,w)}catch(B){T=Promise.reject(B)}const u=T!==!0&&F(T);if(T!==!0&&!u&&!E)return!1;const O=B=>{B.then(C=>{f(C)},C=>{let le;C&&(C instanceof Error||typeof C.message=="string")?le=C.message:le="An unexpected error occurred",f({__mozWebExtensionPolyfillReject__:!0,message:le})}).catch(C=>{console.error("Failed to send onMessage rejected reply",C)})};return O(u?T:a),!0}),De=({reject:n,resolve:i},o)=>{d.runtime.lastError?d.runtime.lastError.message===s?i():n(new Error(d.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?n(new Error(o.message)):i(o)},we=(n,i,o,...l)=>{if(l.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${Y(i.minArgs)} for ${n}(), got ${l.length}`);if(l.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${Y(i.maxArgs)} for ${n}(), got ${l.length}`);return new Promise((f,E)=>{const w=De.bind(null,{resolve:f,reject:E});l.push(w),o.sendMessage(...l)})},$e={devtools:{network:{onRequestFinished:ae(Re)}},runtime:{onMessage:ae(pe),onMessageExternal:ae(pe),sendMessage:we.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:we.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},oe={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return x.privacy={network:{"*":oe},services:{"*":oe},websites:{"*":oe}},X(d,$e,x)};r.exports=g(chrome)}})})(L);var ve=L.exports;const S=A(ve);class me{constructor(){v(this,"cache",new WeakMap)}parseContentMatch(t){return t.map(r=>{var s;return{text:r.text.toLowerCase(),tag:(s=r.tag)==null?void 0:s.toLowerCase()}})}findMatchingElementsEfficient(t,r){const s=[],g=this.getTextNodesUnder(t.body);for(const d of g){let x=d.parentElement,b=null,F=0;for(;x;){const $=this.scoreElement(x,r);$>F&&(F=$,b=x),x=x.parentElement}b&&F>0&&(s.push(b),this.cache.set(b,F))}return s}scoreElement(t,r){const s=this.cache.get(t);if(s!==void 0)return s;let g=0;const d=(t.textContent||"").toLowerCase(),x=t.tagName.toLowerCase();for(const b of r)d.includes(b.text)&&(g+=1,b.tag&&x===b.tag&&(g+=.5));return this.cache.set(t,g),g}getTextNodesUnder(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null);let g;for(;g=s.nextNode();)r.push(g);return r}clearCache(){this.cache=new WeakMap}}function Ae(e,t){e.style.setProperty("display","none","important"),e.dataset.aiblockHidden=t}function de(e){e.style.removeProperty("display"),e.removeAttribute("data-aiblock-hidden")}function Se(e){const t=`aiblock-style-${Date.now()}`,r=document.createElement("style");return r.id=t,r.textContent=e,document.head.appendChild(r),t}function Ne(e){const t=document.getElementById(e);t&&t.remove()}var h=(e=>(e.CSS="css",e.CONTENT="content",e))(h||{});function ue(e,t){let r=null;return(...s)=>{r!==null&&clearTimeout(r),r=setTimeout(()=>e(...s),t)}}function ee(e,t){console.error(`aiBlock Error: ${e}`,t?JSON.stringify(t):"")}class fe{constructor(t,r){v(this,"observer",null);v(this,"contentMatcher");v(this,"filters");v(this,"pendingMutations",new Set);v(this,"debouncedHandleMutations",ue(()=>{this.handleMutations()},100));this.contentMatcher=t,this.filters=r.filter(s=>s.type===h.CONTENT)}observeDomChanges(t){if(t.body)this.startObserving(t);else{const r=new MutationObserver(()=>{t.body&&(r.disconnect(),this.startObserving(t))});r.observe(t.documentElement,{childList:!0})}}startObserving(t){this.observer=new MutationObserver(r=>{for(const s of r)s.type==="childList"?s.addedNodes.forEach(g=>this.pendingMutations.add(g)):s.type==="characterData"&&this.pendingMutations.add(s.target);this.debouncedHandleMutations()}),this.observer.observe(t.body,{childList:!0,subtree:!0,characterData:!0}),this.scanDocument(t)}disconnect(){this.observer&&this.observer.disconnect()}handleMutations(){for(const t of this.pendingMutations)if(t instanceof Element)this.scanElement(t);else if(t instanceof Text){const r=t.parentElement;r&&this.scanElement(r)}this.pendingMutations.clear()}scanDocument(t){this.scanElement(t.body)}scanElement(t){this.applyFiltersToElement(t),t.querySelectorAll("*").forEach(r=>{this.applyFiltersToElement(r)})}applyFiltersToElement(t){for(const r of this.filters)if(r.enabled&&this.elementMatchesFilter(t,r)){t instanceof HTMLElement&&(Ae(t,r.id),window.dispatchEvent(new CustomEvent("aiblockElementBlocked",{detail:{filterId:r.id}})));break}}elementMatchesFilter(t,r){if(r.content_match){const s=this.contentMatcher.parseContentMatch(r.content_match);return this.contentMatcher.findMatchingElementsEfficient(t.ownerDocument,s).includes(t)}return!1}updateFilters(t){this.filters=t.filter(r=>r.type===h.CONTENT),document.body&&this.scanDocument(document)}}let p=[],k=new Map,P=!0,R=!1,N=null,y=null,q=null;async function te(){const{isEnabled:e,siteAllowed:t,filters:r}=await S.runtime.sendMessage({type:"INITIALIZE_CONTENT_SCRIPT"});P=e,R=t,!(!e||t)&&(p=r,p.some(s=>s.type===h.CSS)&&W(),p.some(s=>s.type===h.CONTENT)&&(N=new me,y=new fe(N,p.filter(s=>s.type===h.CONTENT)),y.observeDomChanges(document)))}function W(){const e=p.filter(r=>r.type===h.CSS&&r.enabled&&r.selectors),t=e.map(r=>`${r.selectors.join(", ")} { display: none !important; }`).join(`
`);q=Se(t),e.forEach(r=>{const s=document.querySelectorAll(r.selectors.join(", ")).length;se(r.id,s)}),_()}function re(){q&&(Ne(q),q=null),p.filter(e=>e.type===h.CSS).forEach(e=>k.set(e.id,0)),_()}function he(e){if(!e.enabled||!e.content_match||!N)return;const t=N.parseContentMatch(e.content_match);N.findMatchingElementsEfficient(document,t).forEach(s=>{s instanceof HTMLElement&&(Ae(s,e.id),se(e.id))}),_()}function ke(e){document.querySelectorAll(`[data-aiblock-hidden="${e}"]`).forEach(t=>{t instanceof HTMLElement&&de(t)}),k.delete(e),_()}function se(e,t=1){const r=k.get(e)||0;k.set(e,r+t)}function _(){const e=Array.from(k.values()).reduce((t,r)=>t+r,0);S.runtime.sendMessage({type:"UPDATE_BLOCKED_COUNT",count:e})}const xe=ue(()=>{if(!P||R){G();return}p.filter(e=>e.type===h.CONTENT).forEach(he)},50);function G(){re(),document.querySelectorAll("[data-aiblock-hidden]").forEach(e=>{e instanceof HTMLElement&&de(e)}),k.clear(),_()}async function Me(){try{const e=await S.runtime.sendMessage({type:"GET_ACTIVE_FILTERS"}),t=p.some(s=>s.type===h.CONTENT),r=e.some(s=>s.type===h.CONTENT);p=e,re(),W(),t&&!r?(y==null||y.disconnect(),y=null,N=null):!t&&r?(N=new me,y=new fe(N,p.filter(s=>s.type===h.CONTENT)),y.observeDomChanges(document)):y&&y.updateFilters(p.filter(s=>s.type===h.CONTENT)),xe()}catch(e){ee("Error updating filters",e)}}const _e={matches:["<all_urls>"],runAt:"document_start",main(){te(),S.runtime.onMessage.addListener((e,t,r)=>{try{switch(e.type){case"SET_GLOBAL_ENABLED":P=e.enabled,P&&!R?te():G();break;case"SET_SITE_ENABLED":R=!e.enabled,!R&&P?te():G();break;case"TOGGLE_FILTER":const s=p.find(g=>g.id===e.filterId);s&&(s.enabled=e.enabled,s.type===h.CSS?(re(),W()):s.type===h.CONTENT&&(e.enabled?he(s):ke(e.filterId)));break;case"GET_BLOCKED_COUNT":return r(Array.from(k.values()).reduce((g,d)=>g+d,0)),!0;case"UPDATE_FILTERS":Me();break;default:ee(`Unknown message type: ${e.type}`)}return r(),!0}catch(s){return ee(`Error handling message: ${e.type}`,s),r(),!0}}),window.addEventListener("message",e=>{if(e.source===window&&e.data.type==="AIBLOCK_RESTORE_ELEMENTS"){const t=e.data.duration||5e3;G(),setTimeout(()=>{W(),xe()},t)}}),window.addEventListener("aiblockElementBlocked",e=>{e.detail&&e.detail.filterId&&(se(e.detail.filterId),_())})}};function V(e,...t){}const Ie={debug:(...e)=>V(console.debug,...e),log:(...e)=>V(console.log,...e),warn:(...e)=>V(console.warn,...e),error:(...e)=>V(console.error,...e)},Fe={BASE_URL:"/",BROWSER:"firefox",CHROME:!1,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"content",FIREFOX:!0,MANIFEST_VERSION:2,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true"},Z=class Z extends Event{constructor(t,r){super(Z.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=r}};v(Z,"EVENT_NAME",be("wxt:locationchange"));let ne=Z;function be(e){var r;const t=typeof Fe>"u"?"build":"content";return`${(r=S==null?void 0:S.runtime)==null?void 0:r.id}:${t}:${e}`}function Oe(e){let t,r;return{run(){t==null&&(r=new URL(location.href),t=e.setInterval(()=>{let s=new URL(location.href);s.href!==r.href&&(window.dispatchEvent(new ne(s,r)),r=s)},1e3))}}}const D=class D{constructor(t,r){j(this,M);j(this,z,window.self===window.top);j(this,I);j(this,K,Oe(this));this.contentScriptName=t,this.options=r,ye(this,I,new AbortController),U(this,z)?(Q(this,M,ce).call(this,{ignoreFirstEvent:!0}),Q(this,M,Ce).call(this)):Q(this,M,ce).call(this)}get signal(){return U(this,I).signal}abort(t){return U(this,I).abort(t)}get isInvalid(){return S.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,r){const s=setInterval(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,r){const s=setTimeout(()=>{this.isValid&&t()},r);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const r=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(t,r){const s=requestIdleCallback((...g)=>{this.signal.aborted||t(...g)},r);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,r,s,g){var d;r==="wxt:locationchange"&&this.isValid&&U(this,K).run(),(d=t.addEventListener)==null||d.call(t,r.startsWith("wxt:")?be(r):r,s,{...g,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Ie.debug(`Content script "${this.contentScriptName}" context invalidated`)}};z=new WeakMap,I=new WeakMap,K=new WeakMap,M=new WeakSet,Ce=function(){window.postMessage({type:D.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},ce=function(t){let r=!0;const s=g=>{var d,x;if(((d=g.data)==null?void 0:d.type)===D.SCRIPT_STARTED_MESSAGE_TYPE&&((x=g.data)==null?void 0:x.contentScriptName)===this.contentScriptName){const b=r;if(r=!1,b&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))},v(D,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started");let ie=D;function qe(){}function H(e,...t){}const Le={debug:(...e)=>H(console.debug,...e),log:(...e)=>H(console.log,...e),warn:(...e)=>H(console.warn,...e),error:(...e)=>H(console.error,...e)};return(async()=>{try{const{main:e,...t}=_e,r=new ie("content",t);return await e(r)}catch(e){throw Le.error('The content script "content" crashed on startup!',e),e}})()}();
content;
