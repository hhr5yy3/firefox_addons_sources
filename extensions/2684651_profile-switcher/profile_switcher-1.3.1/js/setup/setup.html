<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Setup Profile Switcher</title>
    <link rel="stylesheet" href="../common.css">
<style>
.content {
    max-width: 800px;
    margin: 0 auto;
}
.content h1 {
    text-align: center;
}
.content ol {
    text-align: left;
}
</style>
  </head>
  <body>
      <div class="content">
          <h1>Setup Profile Switcher for Firefox</h1>
          <p>Additional software is required for 'Profile Switcher for Firefox' to access your browser profiles. The extension cannot function without this software. Follow the instructions below to install the software.</p>
          <hr/>
          <div class="instructions win">
              <h3>Instructions for Windows</h3>
              <div class="arch x86-64 x86-32">
                  <ol>
                      <li>Download the file using the button below.</li>
                      <li>Close your browser.</li>
                      <li>Open the downloaded file.</li>
                      <li>Follow the instructions on-screen to install the software.</li>
                      <li>You can now open your browser and the extension should work.</li>
                  </ol>

                  <a class="download button primary arch x86-64" href="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/windows-x64.msi"></a>
                  <a class="download button primary arch x86-32" href="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/windows-x86.msi"></a>
              </div>
              <div class="arch arm other unsupported">
                  This extension will probably work on Windows ARM but you'll have to compile it from source yourself. The source code for this extension can be found <a href="https://github.com/null-dev/firefox-profile-switcher-connector">here</a>.
              </div>
          </div>
          <div class="instructions mac">
              <h3>Instructions for Mac</h3>
              <ol>
                  <li>You need Homebrew installed to continue. Homebrew is a popular program used to manage software on Mac computers. Install Homebrew from it's website here: <a href="https://brew.sh/">https://brew.sh/</a></li>
                  <li>Open the Terminal app.</li>
                  <li>Paste this command and press <i>ENTER</i> to tell homebrew where to download the software: <code>brew tap null-dev/firefox-profile-switcher</code></li>
                  <li>Wait for the command to finish, you'll know it's done once you see the <code>%</code> symbol beside your cursor.</li>
                  <li>
                      Paste the following command and press <i>ENTER</i> to download and install the software: <code>brew install firefox-profile-switcher-connector</code>
                      <ul>
                          <li><b>If you have an older version of the software component installed and are upgrading it</b>, use this command instead: <code>brew upgrade firefox-profile-switcher-connector</code></li>
                      </ul>
                  </li>
                  <li>The output from the above command will give you two more commands you need to run, make sure you run those commands.</li>
                  <li>Restart your browser.</li>
                  <li>
                      The extension should work now!
                  </li>
                  <li>
                      If the extension still does not work, you can try running the following commands:
<pre><code class="language-bash hljs">sudo <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"/Library/Application Support/Mozilla/NativeMessagingHosts"</span>
sudo <span class="hljs-built_in">ln</span> -sf <span class="hljs-string">"<span class="hljs-subst">$(brew ls -l firefox-profile-switcher-connector | grep -i ax.nd.profile_switcher_ff.json | head -n1)</span>"</span> <span class="hljs-string">"/Library/Application Support/Mozilla/NativeMessagingHosts"</span>/ax.nd.profile_switcher_ff.json
</code></pre>
                  </li>
              </ol>
          </div>
          <div class="instructions linux">
              <h3>Instructions for Linux</h3>

              <p id="linux_flatpak_select_wrapper">
                  Are you running Firefox with Flatpak? Check by typing <code>about:support</code> into the address bar, hit ENTER and see if on the resulting page the <code>Distribution ID</code> says <code>mozilla-flatpak</code>:
                  <input type="radio" id="linux_flatpak_yes" name="linux_flatpak" value="yes" autocomplete="off">
                  <label for="linux_flatpak_yes">Yes</label>
                  <input type="radio" id="linux_flatpak_no" name="linux_flatpak" value="no" autocomplete="off">
                  <label for="linux_flatpak_no">No</label>
              </p>
              <p id="linux_snap_select_wrapper">
                  Are you running Firefox with Snap? Check by typing <code>about:support</code> into the address bar, hit ENTER and see if on the resulting page the <code>Application Binary</code> starts with <code>/snap</code>:
                  <input type="radio" id="linux_snap_yes" name="linux_snap" value="yes" autocomplete="off">
                  <label for="linux_snap_yes">Yes</label>
                  <input type="radio" id="linux_snap_no" name="linux_snap" value="no" autocomplete="off">
                  <label for="linux_snap_no">No</label>
              </p>
              <div class="home-install">
                  <p id="linux_home_arch_select_wrapper" class="advanced-only">
                      Please select the architecture your system uses:
                      <input type="radio" id="linux_home_arch_x86-64" name="linux_home_arch" value="x86-64" autocomplete="off">
                      <label for="linux_home_arch_x86-64">64-bit</label>
                      <input type="radio" id="linux_home_arch_x86-32" name="linux_home_arch" value="x86-32" autocomplete="off">
                      <label for="linux_home_arch_x86-32">32-bit</label>
                  </p>

                  Run the following shell script to install the connector software (you need to have the <code>ar</code>, <code>tar</code> and <code>curl</code> commands on your system):

                  <div class="instructions"></div>
              </div>


              <p id="distribution_select_wrapper">
                  What Linux distribution are you running?
                  &nbsp;
                  <select id="distribution_select" autocomplete="off">
                      <option value="no-distribution" selected hidden></option>

                      <!-- Debian based -->
                      <option value="ubuntu">Ubuntu</option>
                      <option value="debian">Debian</option>
                      <option value="mint">Linux Mint</option>
                      <option value="popos">Pop! OS</option>
                      <option value="elementary">elementary OS</option>
                      <option value="kdeneon">KDE neon</option>
                      <option value="zorinos">Zorin OS</option>
                      <option value="deepin">deepin</option>
                      <option value="kali">Kali Linux</option>

                      <!-- Arch-like -->
                      <option value="arch">Arch Linux</option>
                      <option value="manjaro">Manjaro</option>
                      <option value="endeavouros">EndeavourOS</option>

                      <!-- RPM -->
                      <option value="fedora">Fedora</option>
                      <option value="opensuse">openSUSE</option>
                      <option value="centos">CentOS</option>

                      <option value="other">Other</option>
                  </select>
              </p>
              <div class="distribution ubuntu debian mint popos elementary kdeneon zorinos deepin kali">
                  <div class="arch x86-64 x86-32">
                      <p>Download the <code>.deb</code> file using the button below and install it.</p>
                      <p>After you've installed the software, restart your browser.</p>

                      <a class="download button primary arch x86-64" href="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/linux-x64.deb"></a>
                      <a class="download button primary arch x86-32" href="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/linux-x86.deb"></a>
                  </div>
                  <div class="arch arm other unsupported">
                      <p>I don't have pre-built binaries for your architecture but you can compile them from source:</p>
                      <div class="compile instructions"></div>
                  </div>
              </div>
              <div class="distribution arch manjaro endeavouros">
                  <p>Install the <a href="https://aur.archlinux.org/packages/firefox-profile-switcher-connector/"><code>firefox-profile-switcher-connector</code></a> AUR package.</p>
                  <p>Restart your browser after the package has finished installing.</p>
              </div>
              <div class="distribution fedora opensuse centos">
                  <p>Download the <code>.rpm</code> file using the button below and install it.</p>
                  <p>After you've installed the software, restart your browser.</p>

                  <a class="download button primary arch x86-64" href="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/linux-x64.rpm"></a>
                  <a class="download button primary arch x86-32" href="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/linux-x86.rpm"></a>
              </div>
              <div class="distribution other">
                  <p>This extension will probably still work on your distro, you'll just have to compile it from source:</p>
                  <div class="compile instructions"></div>
              </div>
          </div>
          <div class="instructions android unsupported">
              <h3>Instructions for Android</h3>
              <p>This extension doesn't work on Android, sorry :(</p>
          </div>
          <div class="instructions cros unsupported">
              <h3>Instructions for Chrome OS</h3>
              <p>This extension doesn't work on Chrome OS, sorry :(</p>
          </div>
          <div class="instructions bsd openbsd">
              <h3>Instructions for BSD</h3>
              <p>This extension might work on BSD systems but I've never tested it. You'll have to compile it from source yourself though:</p>
              <div class="compile instructions"></div>
          </div>
          <p>
              <sub>Advanced Users:
                  <a class="simple-only" href="#advanced">Show installation instructions for all platforms</a>
                  <a class="advanced-only" href="#">Show only installation instructions for current platform</a>
              </sub>
          </p>
          <template id="compile_instructions">
              <ol>
                  <li>Clone <a href="https://github.com/null-dev/firefox-profile-switcher-connector">this</a> git repository.</li>
                  <li>Compile the program. Usually this involves running this command: <code>cargo build --verbose --release</code></li>
                  <li>You will find the compiled binary here: <code>target/release/firefox_profile_switcher_connector</code>. Place it somewhere sensible in your system.</li>
                  <li>Copy the <code>manifest/manifest-linux.json</code> file to: <code>~/.mozilla/native-messaging-hosts/ax.nd.profile_switcher_ff.json</code>. Replace the <code>path</code> field in the file with the location of the compiled binary.</li>
                  <li>Restart your browser.</li>
              </ol>
          </template>
	  <template id="home_install_instructions">
	      <pre><code class="language-bash">#!/bin/sh
BASE_DIR="$HOME<span class="home-type flatpak">/.var/app/org.mozilla.firefox</span><span class="home-type snap">/snap/firefox/common</span>"
BIN_INSTALL_DIR="$BASE_DIR<span class="home-type flatpak">/data/firefoxprofileswitcher-install</span><span class="home-type snap">/firefoxprofileswitcher-install</span>"
MANIFEST_INSTALL_DIR="$BASE_DIR/.mozilla/native-messaging-hosts"
DOWNLOAD_URL="https://github.com/null-dev/firefox-profile-switcher-connector/releases/latest/download/linux-<span class="home-arch x86-64">x64</span><span class="home-arch x86-32">x86</span>.deb"

# Download and install the binary
mkdir -p "$BIN_INSTALL_DIR"
TMP_FILE="$(mktemp)"
curl -L "$DOWNLOAD_URL" -o "$TMP_FILE"
ar p "$TMP_FILE" data.tar.xz | tar xfJ - --strip-components=2 -C "$BIN_INSTALL_DIR" usr/bin/ff-pswitch-connector
rm "$TMP_FILE"

# Install the manifest (used by Firefox to locate the binary)
mkdir -p "$MANIFEST_INSTALL_DIR"
echo '
{
    "allowed_extensions": [
        "profile-switcher-ff@nd.ax"
    ],
    "description": "Profile Switcher for Firefox",
    "name": "ax.nd.profile_switcher_ff",
    "path": "'"$BIN_INSTALL_DIR"'/ff-pswitch-connector",
    "type": "stdio"
}
' &gt; "$MANIFEST_INSTALL_DIR/ax.nd.profile_switcher_ff.json"
</code></pre>
          </template>
      </div>
      <script src="../lib/highlight.min.js"></script>
      <script src="../common.js"></script>
      <script src="../native.js"></script>
      <script src="setup.js"></script>
  </body>
</html>
