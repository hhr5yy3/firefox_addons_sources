!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,s){Object.defineProperty(e,t,{get:r,set:s,enumerable:!0,configurable:!0})}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},i={},o=r.parcelRequire0e4f;null==o&&((o=function(e){if(e in s)return s[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return s[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},r.parcelRequire0e4f=o);var n=o.register;n("kTh4x",function(e,t){var r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw Error("This script should only be loaded in a browser extension.");globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id?e.exports=globalThis.browser:e.exports=(e=>{let t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw Error("api-metadata.json has not been included in browser-polyfill");class r extends WeakMap{constructor(e,t){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}let s=e=>e&&"object"==typeof e&&"function"==typeof e.then,i=(t,r)=>(...s)=>{e.runtime.lastError?t.reject(Error(e.runtime.lastError.message)):r.singleCallbackArg||s.length<=1&&!1!==r.singleCallbackArg?t.resolve(s[0]):t.resolve(s)},o=e=>1==e?"argument":"arguments",n=(e,t)=>function(r,...s){if(s.length<t.minArgs)throw Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise((o,n)=>{if(t.fallbackToNoCallback)try{r[e](...s,i({resolve:o,reject:n},t))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),r[e](...s),t.fallbackToNoCallback=!1,t.noCallback=!0,o()}else t.noCallback?(r[e](...s),o()):r[e](...s,i({resolve:o,reject:n},t))})},a=(e,t,r)=>new Proxy(t,{apply:(t,s,i)=>r.call(s,e,...i)}),l=Function.call.bind(Object.prototype.hasOwnProperty),u=(e,t={},r={})=>{let s=Object.create(null);return new Proxy(Object.create(e),{has:(t,r)=>r in e||r in s,get(i,o,p){if(o in s)return s[o];if(!(o in e))return;let d=e[o];if("function"==typeof d){if("function"==typeof t[o])d=a(e,e[o],t[o]);else if(l(r,o)){let t=n(o,r[o]);d=a(e,e[o],t)}else d=d.bind(e)}else if("object"==typeof d&&null!==d&&(l(t,o)||l(r,o)))d=u(d,t[o],r[o]);else{if(!l(r,"*"))return Object.defineProperty(s,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(t){e[o]=t}}),d;d=u(d,t[o],r["*"])}return s[o]=d,d},set:(t,r,i,o)=>(r in s?s[r]=i:e[r]=i,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(s,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(s,t)})},p=e=>({addListener(t,r,...s){t.addListener(e.get(r),...s)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),d=new r(e=>"function"!=typeof e?e:function(t){e(u(t,{},{getContent:{minArgs:0,maxArgs:0}}))}),f=new r(e=>"function"!=typeof e?e:function(t,r,i){let o,n,a=!1,l=new Promise(e=>{o=function(t){a=!0,e(t)}});try{n=e(t,r,o)}catch(e){n=Promise.reject(e)}let u=!0!==n&&s(n);return(!0===n||!!u||!!a)&&((e=>{e.then(e=>{i(e)},e=>{i({__mozWebExtensionPolyfillReject__:!0,message:e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred"})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)})})(u?n:l),!0)}),h=({reject:t,resolve:r},s)=>{e.runtime.lastError?"The message port closed before a response was received."===e.runtime.lastError.message?r():t(Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?t(Error(s.message)):r(s)},c=(e,t,r,...s)=>{if(s.length<t.minArgs)throw Error(`Expected at least ${t.minArgs} ${o(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw Error(`Expected at most ${t.maxArgs} ${o(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise((e,t)=>{let i=h.bind(null,{resolve:e,reject:t});s.push(i),r.sendMessage(...s)})},g={devtools:{network:{onRequestFinished:p(d)}},runtime:{onMessage:p(f),onMessageExternal:p(f),sendMessage:c.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:c.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},m={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":m},services:{"*":m},websites:{"*":m}},u(e,g,t)})(chrome)},"function"==typeof define&&define.amd?define("webextension-polyfill",["module"],r):r(e)}),n("3EU1y",function(r,s){t(r.exports,"default",function(){return i});var i=!/*@__PURE__*/e(o("kTh4x")).runtime.getURL("index.html").startsWith("moz")}),n("lW4ZV",function(e,r){t(e.exports,"default",function(){return i});var s=o("53Td5");function i(e){if(!e)return null;let t=(0,s.twitchChannelNameRegex).exec(e);if(!t)return null;let[,r]=t;return r.toLowerCase()}}),n("53Td5",function(e,r){t(e.exports,"passportHostRegex",function(){return s}),t(e.exports,"twitchApiChannelNameRegex",function(){return i}),t(e.exports,"twitchChannelNameRegex",function(){return o}),t(e.exports,"twitchGqlHostRegex",function(){return n}),t(e.exports,"twitchTvHostRegex",function(){return a}),t(e.exports,"usherHostRegex",function(){return l}),t(e.exports,"videoWeaverHostRegex",function(){return u});let s=/^passport\.twitch\.tv$/i,i=/\/hls\/(.+)\.m3u8/i,o=/^https?:\/\/(?:www|m)\.twitch\.tv\/(?:videos\/|popout\/|moderator\/)?((?!(?:directory|jobs|p|privacy|store|turbo)\b)\w+)/i,n=/^gql\.twitch\.tv$/i,a=/^(?:www|m)\.twitch\.tv$/i,l=/^usher\.ttvnw\.net$/i,u=/^(?:[a-z0-9-]+\.playlist\.(?:live-video|ttvnw)\.net|video-weaver\.[a-z0-9-]+\.hls\.ttvnw\.net)$/i}),n("dHu0P",function(e,r){t(e.exports,"default",function(){return i});var s=o("3HkWW");function i(e){return!!e&&(0,s.default).state.whitelistedChannels.map(e=>e.toLowerCase()).includes(e.toLowerCase())}}),n("3HkWW",function(r,s){t(r.exports,"default",function(){return l});var i=o("kTh4x"),n=o("2tfuh"),a=o("d4bhQ"),l=new class{constructor(t,r){this._listenersByEvent={load:[],change:[]},this.readyState="loading",this._areaName=t,this._getDefaultState=r,this._state=this._getDefaultState(),this.state=this._state,this._init().then(()=>{this.readyState="complete",this.dispatchEvent("load"),this._listenersByEvent.load=[]}),/*@__PURE__*/e(i).storage.onChanged.addListener((e,t)=>{if(t===this._areaName){for(let[t,{newValue:r}]of Object.entries(e))void 0!==r&&(this._state[t]=r);this.dispatchEvent("change",e)}})}async _init(){let t=await /*@__PURE__*/e(i).storage[this._areaName].get(null);for(let[e,r]of(this._state=this._getDefaultState(),Object.entries(t)))this._state[e]=r;let r=(0,a.default)(this._areaName,this._state),s=new Proxy(this._state,r);this.state=s}async clear(){for(let[e,t]of Object.entries(this._getDefaultState()))this.state[e]=t;await /*@__PURE__*/e(i).storage[this._areaName].clear()}addEventListener(e,t){this._listenersByEvent[e]||(this._listenersByEvent[e]=[]),this._listenersByEvent[e].push(t)}removeEventListener(e,t){if(!this._listenersByEvent[e])return;let r=this._listenersByEvent[e].findIndex(e=>e===t);-1!==r&&this._listenersByEvent[e].splice(r,1)}dispatchEvent(e,...t){(this._listenersByEvent[e]||[]).forEach(e=>e(...t))}}("local",n.default)}),n("2tfuh",function(e,r){t(e.exports,"default",function(){return i});var s=o("3EU1y");function i(){return{adLog:[],adLogEnabled:!0,adLogLastSent:0,anonymousMode:!0,chromiumProxyActive:!1,dnsResponses:[],normalProxies:[],openedTwitchTabs:[],optimizedProxies:s.default?["chromium.api.cdn-perfprod.com:2023"]:["firefox.api.cdn-perfprod.com:2023"],optimizedProxiesEnabled:!0,passportLevel:0,streamStatuses:{},videoWeaverUrlsByChannel:{},whitelistedChannels:[]}}}),n("d4bhQ",function(r,s){t(r.exports,"default",function(){return u});var i=o("kTh4x"),n=o("lK2TX"),a=o("2hh8v"),l=o("5u8K4");function u(t,r){return{defineProperty:(r,s,o)=>{let n=(0,a.toRaw)(o);return r[s]=n,/*@__PURE__*/e(i).storage[t].set({[s]:n}).catch(console.error),!0},deleteProperty:(r,s)=>(delete r[s],/*@__PURE__*/e(i).storage[t].remove(s.toString()).catch(console.error),!0),get:(e,s)=>{if(s===n.ProxyFlags.IS_PROXY)return!0;if(s===n.ProxyFlags.RAW)return e;if("object"!=typeof e[s]||null===e[s])return e[s];{let i=(0,l.default)(t,r,s);return new Proxy(e[s],i)}},set:(r,s,o)=>{let n=(0,a.toRaw)(o);return r[s]=n,/*@__PURE__*/e(i).storage[t].set({[s]:n}).catch(console.error),!0}}}}),n("lK2TX",function(e,r){var s,i;t(e.exports,"ProxyFlags",function(){return s}),(i=s||(s={})).IS_PROXY="__isProxy",i.RAW="__raw"}),n("2hh8v",function(e,r){t(e.exports,"toRaw",function(){return function e(t){if(t&&t[s.ProxyFlags.IS_PROXY])return t[s.ProxyFlags.RAW];if("object"==typeof t&&null!==t)for(let r in t)t[r]=e(t[r]);return t}});var s=o("lK2TX")}),n("5u8K4",function(r,s){t(r.exports,"default",function(){return l});var i=o("kTh4x"),n=o("lK2TX"),a=o("2hh8v");function l(t,r,s){let o={defineProperty:(o,n,l)=>{let u=(0,a.toRaw)(l);return o[n]=u,/*@__PURE__*/e(i).storage[t].set({[s]:r[s]}).catch(console.error),!0},deleteProperty:(o,n)=>(delete o[n],/*@__PURE__*/e(i).storage[t].set({[s]:r[s]}).catch(console.error),!0),get:(e,t)=>{if(t===n.ProxyFlags.IS_PROXY)return!0;if(t===n.ProxyFlags.RAW)return e;let r=e[t];return"object"==typeof r&&null!==r&&Object.values(r).some(e=>"object"==typeof e&&null!==e)?new Proxy(r,o):r},set:(o,n,l)=>{let u=(0,a.toRaw)(l);return o[n]=u,/*@__PURE__*/e(i).storage[t].set({[s]:r[s]}).catch(console.error),!0}};return o}}),n("flbf2",function(e,r){t(e.exports,"updateProxySettings",function(){return p}),t(e.exports,"clearProxySettings",function(){return d});var s=o("3HkWW"),i=o("1U3jF"),n=o("8kXXm"),a=o("4ZlGb"),l=o("53Td5"),u=o("d3Kcc");function p(e){let{optimizedProxiesEnabled:t,passportLevel:r}=s.default.state,o=t?s.default.state.optimizedProxies:s.default.state.normalProxies,p=[...o.map(e=>{let t=(0,a.getProxyInfoFromUrl)(e);return`PROXY ${(0,a.getUrlFromProxyInfo)({...t,username:void 0,password:void 0})}`}),"DIRECT"].join("; "),d=s=>({isChromium:!0,optimizedProxiesEnabled:t,passportLevel:r,fullModeEnabled:!t||null!=e&&e.includes(s)}),f=(0,n.default)(i.ProxyRequestType.Passport,d(i.ProxyRequestType.Passport)),h=(0,n.default)(i.ProxyRequestType.Usher,d(i.ProxyRequestType.Usher)),c=(0,n.default)(i.ProxyRequestType.VideoWeaver,d(i.ProxyRequestType.VideoWeaver)),g=(0,n.default)(i.ProxyRequestType.GraphQL,d(i.ProxyRequestType.GraphQL)),m=(0,n.default)(i.ProxyRequestType.TwitchWebpage,d(i.ProxyRequestType.TwitchWebpage)),x={mode:"pac_script",pacScript:{data:`
        function FindProxyForURL(url, host) {
          // Passport requests.
          if (${f} && ${l.passportHostRegex}.test(host)) {
            return "${p}";
          }
          // Usher requests.
          if (${h} && ${l.usherHostRegex}.test(host)) {
            return "${p}";
          }
          // Video Weaver requests.
          if (${c} && ${l.videoWeaverHostRegex}.test(host)) {
            return "${p}";
          }
          // GraphQL requests.
          if (${g} && ${l.twitchGqlHostRegex}.test(host)) {
            return "${p}";
          }
          // Twitch webpage requests.
          if (${m} && ${l.twitchTvHostRegex}.test(host)) {
            return "${p}";
          }
          return "DIRECT";
        }
      `}};chrome.proxy.settings.set({value:x,scope:"regular"},function(){console.log(`\u{2699}\u{FE0F} Proxying requests through one of: ${o.toString()||"<empty>"}`),s.default.state.chromiumProxyActive=!0,(0,u.default)()})}function d(){chrome.proxy.settings.clear({scope:"regular"},function(){console.log("⚙️ Proxy settings cleared"),s.default.state.chromiumProxyActive=!1})}}),n("1U3jF",function(e,r){var s,i,o,n,a,l;t(e.exports,"AdType",function(){return s}),t(e.exports,"MessageType",function(){return i}),t(e.exports,"ProxyRequestType",function(){return o}),(n=s||(s={})).PREROLL="preroll",n.MIDROLL="midroll",(a=i||(i={})).ContentScriptMessage="TLP_ContentScriptMessage",a.PageScriptMessage="TLP_PageScriptMessage",a.WorkerScriptMessage="TLP_WorkerScriptMessage",a.GetStoreState="TLP_GetStoreState",a.GetStoreStateResponse="TLP_GetStoreStateResponse",a.EnableFullMode="TLP_EnableFullMode",a.EnableFullModeResponse="TLP_EnableFullModeResponse",a.DisableFullMode="TLP_DisableFullMode",a.UsherResponse="TLP_UsherResponse",a.NewPlaybackAccessToken="TLP_NewPlaybackAccessToken",a.NewPlaybackAccessTokenResponse="TLP_NewPlaybackAccessTokenResponse",a.MultipleAdBlockersInUse="TLP_MultipleAdBlockersInUse",a.ClearStats="TLP_ClearStats",(l=o||(o={})).Passport="passport",l.Usher="usher",l.VideoWeaver="videoWeaver",l.GraphQL="graphQL",l.GraphQLToken="graphQLToken",l.GraphQLIntegrity="graphQLIntegrity",l.TwitchWebpage="twitchWebpage"}),n("8kXXm",function(e,r){t(e.exports,"default",function(){return i});var s=o("1U3jF");function i(e,t){return e===s.ProxyRequestType.Passport?t.isChromium&&!t.optimizedProxiesEnabled?t.passportLevel>=0:t.passportLevel>=1:e===s.ProxyRequestType.Usher?(!t.optimizedProxiesEnabled||(!t.isChromium||!1!==t.fullModeEnabled)&&(!!t.isChromium||!1!==t.isFlagged))&&t.passportLevel>=0:e===s.ProxyRequestType.VideoWeaver?!t.optimizedProxiesEnabled||(!t.isChromium||!1!==t.fullModeEnabled)&&(!!t.isChromium||!1!==t.isFlagged):e===s.ProxyRequestType.GraphQLToken?t.isChromium?t.passportLevel>=1:t.passportLevel>=0:e===s.ProxyRequestType.GraphQLIntegrity?t.optimizedProxiesEnabled?t.passportLevel>=2:t.passportLevel>=1:e===s.ProxyRequestType.GraphQL?!!t.isChromium&&!t.optimizedProxiesEnabled&&t.passportLevel>=1||!t.isChromium&&!t.optimizedProxiesEnabled&&t.passportLevel>=2||(!t.isChromium||!1!==t.fullModeEnabled)&&(!!t.isChromium||!1!==t.isFlagged)&&(t.isChromium?t.passportLevel>=1:t.passportLevel>=0):e===s.ProxyRequestType.TwitchWebpage&&t.passportLevel>=2}}),n("4ZlGb",function(e,r){t(e.exports,"getProxyInfoFromUrl",function(){return i}),t(e.exports,"getUrlFromProxyInfo",function(){return n});var s=o("fK3dD");function i(e){let t,r,s,i;let o=e.lastIndexOf("@"),n=e.substring(o+1,e.length),a=function(e){let t=-1,r=0;for(let s=e.length-1;s>=0;s--){let i=e[s];if("]"===i)r++;else if("["===i)r--;else if(":"===i&&0===r){t=s;break}}return t}(n);if(-1===a?(t=n,r=3128):(t=n.substring(0,a),r=Number(n.substring(a+1,n.length))),t.startsWith("[")&&t.endsWith("]")&&(t=t.substring(1,t.length-1)),-1!==o){let t=e.substring(0,o),r=t.indexOf(":");s=t.substring(0,r),i=t.substring(r+1,t.length)}return{type:"http",host:t,port:r,username:s,password:i}}function n(e){let{host:t,port:r,username:i,password:o}=e;if(!t)return"";let n="";return i&&o?n=`${i}:${o}@`:i&&(n=`${i}@`),(0,s.Address6).isValid(t)?n+=`[${t}]`:n+=t,r&&(n+=`:${r}`),n}}),n("fK3dD",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),s=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.v6=e.exports.AddressError=e.exports.Address6=e.exports.Address4=void 0;var n=o("hSuTA");Object.defineProperty(e.exports,"Address4",{enumerable:!0,get:function(){return n.Address4}});var a=o("iMmPF");Object.defineProperty(e.exports,"Address6",{enumerable:!0,get:function(){return a.Address6}});var l=o("i0Lt4");Object.defineProperty(e.exports,"AddressError",{enumerable:!0,get:function(){return l.AddressError}});let u=i(o("7zubQ"));e.exports.v6={helpers:u}}),n("hSuTA",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),s=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Address4=void 0;let n=i(o("g6dxp")),a=i(o("9AKof"));var l=o("i0Lt4"),u=o("4i6r8"),p=o("d71ao");class d{constructor(e){this.groups=a.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=n.isCorrect(a.BITS),this.isInSubnet=n.isInSubnet,this.address=e;let t=a.RE_SUBNET_STRING.exec(e);if(t){if(this.parsedSubnet=t[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>a.BITS)throw new l.AddressError("Invalid subnet mask.");e=e.replace(a.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new d(e),!0}catch(e){return!1}}parse(e){let t=e.split(".");if(!e.match(a.RE_ADDRESS))throw new l.AddressError("Invalid IPv4 address.");return t}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){let t;let r=e.replace(/:/g,"").padStart(8,"0"),s=[];for(t=0;t<8;t+=2){let e=r.slice(t,t+2);s.push(parseInt(e,16))}return new d(s.join("."))}static fromInteger(e){return d.fromHex(e.toString(16))}static fromArpa(e){return new d(e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join("."))}toHex(){return this.parsedAddress.map(e=>(0,p.sprintf)("%02x",parseInt(e,10))).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){let e;let t=[];for(e=0;e<a.GROUPS;e+=2){let r=(0,p.sprintf)("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push((0,p.sprintf)("%x",parseInt(r,16)))}return t.join(":")}bigInteger(){return new u.BigInteger(this.parsedAddress.map(e=>(0,p.sprintf)("%02x",parseInt(e,10))).join(""),16)}_startAddress(){return new u.BigInteger(this.mask()+"0".repeat(a.BITS-this.subnetMask),2)}startAddress(){return d.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new u.BigInteger("1");return d.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new u.BigInteger(this.mask()+"1".repeat(a.BITS-this.subnetMask),2)}endAddress(){return d.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new u.BigInteger("1");return d.fromBigInteger(this._endAddress().subtract(e))}static fromBigInteger(e){return d.fromInteger(parseInt(e.toString(),10))}mask(e){return void 0===e&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}reverseForm(e){e||(e={});let t=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?t:(0,p.sprintf)("%s.in-addr.arpa.",t)}isMulticast(){return this.isInSubnet(new d("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(a.BITS,"0")}groupForV6(){let e=this.parsedAddress;return this.address.replace(a.RE_ADDRESS,(0,p.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))}}e.exports.Address4=d}),n("g6dxp",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.isCorrect=e.exports.isInSubnet=void 0,e.exports.isInSubnet=function(e){return!(this.subnetMask<e.subnetMask)&&this.mask(e.subnetMask)===e.mask()},e.exports.isCorrect=function(e){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===e&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}}),n("9AKof",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RE_SUBNET_STRING=e.exports.RE_ADDRESS=e.exports.GROUPS=e.exports.BITS=void 0,e.exports.BITS=32,e.exports.GROUPS=4,e.exports.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,e.exports.RE_SUBNET_STRING=/\/\d{1,2}$/}),n("i0Lt4",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AddressError=void 0,e.exports.AddressError=class extends Error{constructor(e,t){super(e),this.name="AddressError",null!==t&&(this.parseMessage=t)}}}),n("4i6r8",function(e,t){(function(){function t(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function r(){return new t(null)}var s="undefined"!=typeof navigator;s&&"Microsoft Internet Explorer"==navigator.appName?(t.prototype.am=function(e,t,r,s,i,o){for(var n=32767&t,a=t>>15;--o>=0;){var l=32767&this[e],u=this[e++]>>15,p=a*l+u*n;i=((l=n*l+((32767&p)<<15)+r[s]+(0x3fffffff&i))>>>30)+(p>>>15)+a*u+(i>>>30),r[s++]=0x3fffffff&l}return i},b=30):s&&"Netscape"!=navigator.appName?(t.prototype.am=function(e,t,r,s,i,o){for(;--o>=0;){var n=t*this[e++]+r[s]+i;i=Math.floor(n/0x4000000),r[s++]=0x3ffffff&n}return i},b=26):(t.prototype.am=function(e,t,r,s,i,o){for(var n=16383&t,a=t>>14;--o>=0;){var l=16383&this[e],u=this[e++]>>14,p=a*l+u*n;i=((l=n*l+((16383&p)<<14)+r[s]+i)>>28)+(p>>14)+a*u,r[s++]=0xfffffff&l}return i},b=28),t.prototype.DB=b,t.prototype.DM=(1<<b)-1,t.prototype.DV=1<<b,t.prototype.FV=0x10000000000000,t.prototype.F1=52-b,t.prototype.F2=2*b-52;var i=[];for(w=0,T=48;w<=9;++w)i[T++]=w;for(w=10,T=97;w<36;++w)i[T++]=w;for(w=10,T=65;w<36;++w)i[T++]=w;function o(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function n(e,t){var r=i[e.charCodeAt(t)];return null==r?-1:r}function a(e){var t=r();return t.fromInt(e),t}function l(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function u(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function d(e,t){return e&t}function f(e,t){return e|t}function h(e,t){return e^t}function c(e,t){return e&~t}function g(){}function m(e){return e}function x(e){this.r2=r(),this.q3=r(),t.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}u.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},u.prototype.revert=function(e){return e},u.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},u.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},u.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var s=r();return e.abs().dlShiftTo(this.m.t,s),s.divRemTo(this.m,null,s),e.s<0&&s.compareTo(t.ZERO)>0&&this.m.subTo(s,s),s},p.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],s=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,s,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},t.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},t.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+this.DV:this.t=0},t.prototype.fromString=function(e,r){if(16==r)s=4;else if(8==r)s=3;else if(256==r)s=8;else if(2==r)s=1;else if(32==r)s=5;else if(4==r)s=2;else{this.fromRadix(e,r);return}this.t=0,this.s=0;for(var s,i=e.length,o=!1,a=0;--i>=0;){var l=8==s?255&e[i]:n(e,i);if(l<0){"-"==e.charAt(i)&&(o=!0);continue}o=!1,0==a?this[this.t++]=l:a+s>this.DB?(this[this.t-1]|=(l&(1<<this.DB-a)-1)<<a,this[this.t++]=l>>this.DB-a):this[this.t-1]|=l<<a,(a+=s)>=this.DB&&(a-=this.DB)}8==s&&(128&e[0])!=0&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),o&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},t.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},t.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},t.prototype.lShiftTo=function(e,t){var r,s=e%this.DB,i=this.DB-s,o=(1<<i)-1,n=Math.floor(e/this.DB),a=this.s<<s&this.DM;for(r=this.t-1;r>=0;--r)t[r+n+1]=this[r]>>i|a,a=(this[r]&o)<<s;for(r=n-1;r>=0;--r)t[r]=0;t[n]=a,t.t=this.t+n+1,t.s=this.s,t.clamp()},t.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var s=e%this.DB,i=this.DB-s,o=(1<<s)-1;t[0]=this[r]>>s;for(var n=r+1;n<this.t;++n)t[n-r-1]|=(this[n]&o)<<i,t[n-r]=this[n]>>s;s>0&&(t[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()},t.prototype.subTo=function(e,t){for(var r=0,s=0,i=Math.min(e.t,this.t);r<i;)s+=this[r]-e[r],t[r++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s-=e.s;r<this.t;)s+=this[r],t[r++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;r<e.t;)s-=e[r],t[r++]=s&this.DM,s>>=this.DB;s-=e.s}t.s=s<0?-1:0,s<-1?t[r++]=this.DV+s:s>0&&(t[r++]=s),t.t=r,t.clamp()},t.prototype.multiplyTo=function(e,r){var s=this.abs(),i=e.abs(),o=s.t;for(r.t=o+i.t;--o>=0;)r[o]=0;for(o=0;o<i.t;++o)r[o+s.t]=s.am(0,i[o],r,o,0,s.t);r.s=0,r.clamp(),this.s!=e.s&&t.ZERO.subTo(r,r)},t.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var s=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,s,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},t.prototype.divRemTo=function(e,s,i){var o=e.abs();if(!(o.t<=0)){var n=this.abs();if(n.t<o.t){null!=s&&s.fromInt(0),null!=i&&this.copyTo(i);return}null==i&&(i=r());var a=r(),u=this.s,p=e.s,d=this.DB-l(o[o.t-1]);d>0?(o.lShiftTo(d,a),n.lShiftTo(d,i)):(o.copyTo(a),n.copyTo(i));var f=a.t,h=a[f-1];if(0!=h){var c=h*(1<<this.F1)+(f>1?a[f-2]>>this.F2:0),g=this.FV/c,m=(1<<this.F1)/c,x=1<<this.F2,y=i.t,A=y-f,v=null==s?r():s;for(a.dlShiftTo(A,v),i.compareTo(v)>=0&&(i[i.t++]=1,i.subTo(v,i)),t.ONE.dlShiftTo(f,v),v.subTo(a,a);a.t<f;)a[a.t++]=0;for(;--A>=0;){var b=i[--y]==h?this.DM:Math.floor(i[y]*g+(i[y-1]+x)*m);if((i[y]+=a.am(0,b,i,A,0,f))<b)for(a.dlShiftTo(A,v),i.subTo(v,i);i[y]<--b;)i.subTo(v,i)}null!=s&&(i.drShiftTo(f,s),u!=p&&t.ZERO.subTo(s,s)),i.t=f,i.clamp(),d>0&&i.rShiftTo(d,i),u<0&&t.ZERO.subTo(i,i)}}},t.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if((1&e)==0)return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},t.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},t.prototype.exp=function(e,s){if(e>0xffffffff||e<1)return t.ONE;var i=r(),o=r(),n=s.convert(this),a=l(e)-1;for(n.copyTo(i);--a>=0;)if(s.sqrTo(i,o),(e&1<<a)>0)s.mulTo(o,n,i);else{var u=i;i=o,o=u}return s.revert(i)},t.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var t,r,s=(1<<t)-1,i=!1,n="",a=this.t,l=this.DB-a*this.DB%t;if(a-- >0)for(l<this.DB&&(r=this[a]>>l)>0&&(i=!0,n=o(r));a>=0;)l<t?r=(this[a]&(1<<l)-1)<<t-l|this[--a]>>(l+=this.DB-t):(r=this[a]>>(l-=t)&s,l<=0&&(l+=this.DB,--a)),r>0&&(i=!0),i&&(n+=o(r));return i?n:"0"},t.prototype.negate=function(){var e=r();return t.ZERO.subTo(this,e),e},t.prototype.abs=function(){return this.s<0?this.negate():this},t.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},t.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(e){var s=r();return this.abs().divRemTo(e,null,s),this.s<0&&s.compareTo(t.ZERO)>0&&e.subTo(s,s),s},t.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new u(t):new p(t),this.exp(e,r)},t.ZERO=a(0),t.ONE=a(1),g.prototype.convert=m,g.prototype.revert=m,g.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},g.prototype.sqrTo=function(e,t){e.squareTo(t)},x.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(0>e.compareTo(this.m))return e;var t=r();return e.copyTo(t),this.reduce(t),t},x.prototype.revert=function(e){return e},x.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>e.compareTo(this.r2);)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},x.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},x.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],A=0x4000000/y[y.length-1];function v(){var e;e=new Date().getTime(),P[R++]^=255&e,P[R++]^=e>>8&255,P[R++]^=e>>16&255,P[R++]^=e>>24&255,R>=I&&(R-=I)}if(t.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},t.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),s=Math.pow(e,t),i=a(s),o=r(),n=r(),l="";for(this.divRemTo(i,o,n);o.signum()>0;)l=(s+n.intValue()).toString(e).substr(1)+l,o.divRemTo(i,o,n);return n.intValue().toString(e)+l},t.prototype.fromRadix=function(e,r){this.fromInt(0),null==r&&(r=10);for(var s=this.chunkSize(r),i=Math.pow(r,s),o=!1,a=0,l=0,u=0;u<e.length;++u){var p=n(e,u);if(p<0){"-"==e.charAt(u)&&0==this.signum()&&(o=!0);continue}l=r*l+p,++a>=s&&(this.dMultiply(i),this.dAddOffset(l,0),a=0,l=0)}a>0&&(this.dMultiply(Math.pow(r,a)),this.dAddOffset(l,0)),o&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,r,s){if("number"==typeof r){if(e<2)this.fromInt(1);else for(this.fromNumber(e,s),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),f,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(r);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this)}else{var i=[],o=7&e;i.length=(e>>3)+1,r.nextBytes(i),o>0?i[0]&=(1<<o)-1:i[0]=0,this.fromString(i,256)}},t.prototype.bitwiseTo=function(e,t,r){var s,i,o=Math.min(e.t,this.t);for(s=0;s<o;++s)r[s]=t(this[s],e[s]);if(e.t<this.t){for(i=e.s&this.DM,s=o;s<this.t;++s)r[s]=t(this[s],i);r.t=this.t}else{for(i=this.s&this.DM,s=o;s<e.t;++s)r[s]=t(i,e[s]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},t.prototype.changeBit=function(e,r){var s=t.ONE.shiftLeft(e);return this.bitwiseTo(s,r,s),s},t.prototype.addTo=function(e,t){for(var r=0,s=0,i=Math.min(e.t,this.t);r<i;)s+=this[r]+e[r],t[r++]=s&this.DM,s>>=this.DB;if(e.t<this.t){for(s+=e.s;r<this.t;)s+=this[r],t[r++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;r<e.t;)s+=e[r],t[r++]=s&this.DM,s>>=this.DB;s+=e.s}t.s=s<0?-1:0,s>0?t[r++]=s:s<-1&&(t[r++]=this.DV+s),t.t=r,t.clamp()},t.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},t.prototype.multiplyLowerTo=function(e,t,r){var s,i=Math.min(this.t+e.t,t);for(r.s=0,r.t=i;i>0;)r[--i]=0;for(s=r.t-this.t;i<s;++i)r[i+this.t]=this.am(0,e[i],r,i,0,this.t);for(s=Math.min(e.t,t);i<s;++i)this.am(0,e[i],r,i,0,t-i);r.clamp()},t.prototype.multiplyUpperTo=function(e,t,r){--t;var s=r.t=this.t+e.t-t;for(r.s=0;--s>=0;)r[s]=0;for(s=Math.max(t-this.t,0);s<e.t;++s)r[this.t+s-t]=this.am(t-s,e[s],r,0,0,this.t+s-t);r.clamp(),r.drShiftTo(1,r)},t.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0){if(0==t)r=this[0]%e;else for(var s=this.t-1;s>=0;--s)r=(t*r+this[s])%e}return r},t.prototype.millerRabin=function(e){var s=this.subtract(t.ONE),i=s.getLowestSetBit();if(i<=0)return!1;var o=s.shiftRight(i);(e=e+1>>1)>y.length&&(e=y.length);for(var n=r(),a=0;a<e;++a){n.fromInt(y[Math.floor(Math.random()*y.length)]);var l=n.modPow(o,this);if(0!=l.compareTo(t.ONE)&&0!=l.compareTo(s)){for(var u=1;u++<i&&0!=l.compareTo(s);)if(0==(l=l.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=l.compareTo(s))return!1}}return!0},t.prototype.clone=function(){var e=r();return this.copyTo(e),e},t.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return -1}else if(1==this.t)return this[0];else if(0==this.t)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},t.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,s=this.DB-e*this.DB%8,i=0;if(e-- >0)for(s<this.DB&&(r=this[e]>>s)!=(this.s&this.DM)>>s&&(t[i++]=r|this.s<<this.DB-s);e>=0;)s<8?r=(this[e]&(1<<s)-1)<<8-s|this[--e]>>(s+=this.DB-8):(r=this[e]>>(s-=8)&255,s<=0&&(s+=this.DB,--e)),(128&r)!=0&&(r|=-256),0==i&&(128&this.s)!=(128&r)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t},t.prototype.equals=function(e){return 0==this.compareTo(e)},t.prototype.min=function(e){return 0>this.compareTo(e)?this:e},t.prototype.max=function(e){return this.compareTo(e)>0?this:e},t.prototype.and=function(e){var t=r();return this.bitwiseTo(e,d,t),t},t.prototype.or=function(e){var t=r();return this.bitwiseTo(e,f,t),t},t.prototype.xor=function(e){var t=r();return this.bitwiseTo(e,h,t),t},t.prototype.andNot=function(e){var t=r();return this.bitwiseTo(e,c,t),t},t.prototype.not=function(){for(var e=r(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},t.prototype.shiftLeft=function(e){var t=r();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},t.prototype.shiftRight=function(e){var t=r();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},t.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+function(e){if(0==e)return -1;var t=0;return(65535&e)==0&&(e>>=16,t+=16),(255&e)==0&&(e>>=8,t+=8),(15&e)==0&&(e>>=4,t+=4),(3&e)==0&&(e>>=2,t+=2),(1&e)==0&&++t,t}(this[e]);return this.s<0?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=function(e){for(var t=0;0!=e;)e&=e-1,++t;return t}(this[r]^t);return e},t.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:(this[t]&1<<e%this.DB)!=0},t.prototype.setBit=function(e){return this.changeBit(e,f)},t.prototype.clearBit=function(e){return this.changeBit(e,c)},t.prototype.flipBit=function(e){return this.changeBit(e,h)},t.prototype.add=function(e){var t=r();return this.addTo(e,t),t},t.prototype.subtract=function(e){var t=r();return this.subTo(e,t),t},t.prototype.multiply=function(e){var t=r();return this.multiplyTo(e,t),t},t.prototype.divide=function(e){var t=r();return this.divRemTo(e,t,null),t},t.prototype.remainder=function(e){var t=r();return this.divRemTo(e,null,t),t},t.prototype.divideAndRemainder=function(e){var t=r(),s=r();return this.divRemTo(e,t,s),[t,s]},t.prototype.modPow=function(e,t){var s,i,o=e.bitLength(),n=a(1);if(o<=0)return n;s=o<18?1:o<48?3:o<144?4:o<768?5:6,i=o<8?new u(t):t.isEven()?new x(t):new p(t);var d=[],f=3,h=s-1,c=(1<<s)-1;if(d[1]=i.convert(this),s>1){var g=r();for(i.sqrTo(d[1],g);f<=c;)d[f]=r(),i.mulTo(g,d[f-2],d[f]),f+=2}var m,y,A=e.t-1,v=!0,b=r();for(o=l(e[A])-1;A>=0;){for(o>=h?m=e[A]>>o-h&c:(m=(e[A]&(1<<o+1)-1)<<h-o,A>0&&(m|=e[A-1]>>this.DB+o-h)),f=s;(1&m)==0;)m>>=1,--f;if((o-=f)<0&&(o+=this.DB,--A),v)d[m].copyTo(n),v=!1;else{for(;f>1;)i.sqrTo(n,b),i.sqrTo(b,n),f-=2;f>0?i.sqrTo(n,b):(y=n,n=b,b=y),i.mulTo(b,d[m],n)}for(;A>=0&&(e[A]&1<<o)==0;)i.sqrTo(n,b),y=n,n=b,b=y,--o<0&&(o=this.DB-1,--A)}return i.revert(n)},t.prototype.modInverse=function(e){var r=e.isEven();if(this.isEven()&&r||0==e.signum())return t.ZERO;for(var s=e.clone(),i=this.clone(),o=a(1),n=a(0),l=a(0),u=a(1);0!=s.signum();){for(;s.isEven();)s.rShiftTo(1,s),r?(o.isEven()&&n.isEven()||(o.addTo(this,o),n.subTo(e,n)),o.rShiftTo(1,o)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;i.isEven();)i.rShiftTo(1,i),r?(l.isEven()&&u.isEven()||(l.addTo(this,l),u.subTo(e,u)),l.rShiftTo(1,l)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);s.compareTo(i)>=0?(s.subTo(i,s),r&&o.subTo(l,o),n.subTo(u,n)):(i.subTo(s,i),r&&l.subTo(o,l),u.subTo(n,u))}return 0!=i.compareTo(t.ONE)?t.ZERO:u.compareTo(e)>=0?u.subtract(e):0>u.signum()&&(u.addTo(e,u),0>u.signum())?u.add(e):u},t.prototype.pow=function(e){return this.exp(e,new g)},t.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(0>t.compareTo(r)){var s=t;t=r,r=s}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r},t.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=y[y.length-1]){for(t=0;t<y.length;++t)if(r[0]==y[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<y.length;){for(var s=y[t],i=t+1;i<y.length&&s<A;)s*=y[i++];for(s=r.modInt(s);t<i;)if(s%y[t++]==0)return!1}return r.millerRabin(e)},t.prototype.square=function(){var e=r();return this.squareTo(e),e},t.prototype.Barrett=x,null==P){if(P=[],R=0,"undefined"!=typeof window&&window.crypto){if(window.crypto.getRandomValues){var b,T,w,S,P,R,E,B=new Uint8Array(32);for(window.crypto.getRandomValues(B),E=0;E<32;++E)P[R++]=B[E]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var _=window.crypto.random(32);for(E=0;E<_.length;++E)P[R++]=255&_.charCodeAt(E)}}for(;R<I;)E=Math.floor(65536*Math.random()),P[R++]=E>>>8,P[R++]=255&E;R=0,v()}function k(){}function D(){this.i=0,this.j=0,this.S=[]}k.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=function(){if(null==S){for(v(),(S=new D).init(P),R=0;R<P.length;++R)P[R]=0;R=0}return S.next()}()},D.prototype.init=function(e){var t,r,s;for(t=0;t<256;++t)this.S[t]=t;for(t=0,r=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,s=this.S[t],this.S[t]=this.S[r],this.S[r]=s;this.i=0,this.j=0},D.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var I=256;e.exports={default:t,BigInteger:t,SecureRandom:k}}).call(this)}),n("d71ao",function(e,r){var s;t(e.exports,"sprintf",function(){return s},function(e){return s=e}),function(){var e={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(r){return function(r,s){var i,o,n,a,l,u,p,d,f,h=1,c=r.length,g="";for(o=0;o<c;o++)if("string"==typeof r[o])g+=r[o];else if("object"==typeof r[o]){if((a=r[o]).keys)for(n=0,i=s[h];n<a.keys.length;n++){if(void 0==i)throw Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[n],a.keys[n-1]));i=i[a.keys[n]]}else i=a.param_no?s[a.param_no]:s[h++];if(e.not_type.test(a.type)&&e.not_primitive.test(a.type)&&i instanceof Function&&(i=i()),e.numeric_arg.test(a.type)&&"number"!=typeof i&&isNaN(i))throw TypeError(t("[sprintf] expecting number but found %T",i));switch(e.number.test(a.type)&&(d=i>=0),a.type){case"b":i=parseInt(i,10).toString(2);break;case"c":i=String.fromCharCode(parseInt(i,10));break;case"d":case"i":i=parseInt(i,10);break;case"j":i=JSON.stringify(i,null,a.width?parseInt(a.width):0);break;case"e":i=a.precision?parseFloat(i).toExponential(a.precision):parseFloat(i).toExponential();break;case"f":i=a.precision?parseFloat(i).toFixed(a.precision):parseFloat(i);break;case"g":i=a.precision?String(Number(i.toPrecision(a.precision))):parseFloat(i);break;case"o":i=(parseInt(i,10)>>>0).toString(8);break;case"s":i=String(i),i=a.precision?i.substring(0,a.precision):i;break;case"t":i=String(!!i),i=a.precision?i.substring(0,a.precision):i;break;case"T":i=Object.prototype.toString.call(i).slice(8,-1).toLowerCase(),i=a.precision?i.substring(0,a.precision):i;break;case"u":i=parseInt(i,10)>>>0;break;case"v":i=i.valueOf(),i=a.precision?i.substring(0,a.precision):i;break;case"x":i=(parseInt(i,10)>>>0).toString(16);break;case"X":i=(parseInt(i,10)>>>0).toString(16).toUpperCase()}e.json.test(a.type)?g+=i:(e.number.test(a.type)&&(!d||a.sign)?(f=d?"+":"-",i=i.toString().replace(e.sign,"")):f="",u=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",p=a.width-(f+i).length,l=a.width&&p>0?u.repeat(p):"",g+=a.align?f+i+l:"0"===u?f+l+i:l+f+i)}return g}(function(t){if(i[t])return i[t];for(var r,s=t,o=[],n=0;s;){if(null!==(r=e.text.exec(s)))o.push(r[0]);else if(null!==(r=e.modulo.exec(s)))o.push("%");else if(null!==(r=e.placeholder.exec(s))){if(r[2]){n|=1;var a=[],l=r[2],u=[];if(null!==(u=e.key.exec(l)))for(a.push(u[1]);""!==(l=l.substring(u[0].length));)if(null!==(u=e.key_access.exec(l)))a.push(u[1]);else if(null!==(u=e.index_access.exec(l)))a.push(u[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");r[2]=a}else n|=2;if(3===n)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:r[0],param_no:r[1],keys:r[2],sign:r[3],pad_char:r[4],align:r[5],width:r[6],precision:r[7],type:r[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");s=s.substring(r[0].length)}return i[t]=o}(r),arguments)}function r(e,r){return t.apply(null,[e].concat(r||[]))}var i=Object.create(null);s=t,"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=r,"function"==typeof define&&define.amd&&define(function(){return{sprintf:t,vsprintf:r}}))}()}),n("iMmPF",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),s=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Address6=void 0;let n=i(o("g6dxp")),a=i(o("9AKof")),l=i(o("kJ8V3")),u=i(o("7zubQ"));var p=o("hSuTA"),d=o("ab37K"),f=o("i0Lt4"),h=o("4i6r8"),c=o("d71ao");function g(e){if(!e)throw Error("Assertion failed.")}function m(e){return e=(e=e.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2')).replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2')}function x(e){return(0,c.sprintf)("%04x",parseInt(e,16))}function y(e){return 255&e}class A{constructor(e,t){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=n.isInSubnet,this.isCorrect=n.isCorrect(l.BITS),void 0===t?this.groups=l.GROUPS:this.groups=t,this.address=e;let r=l.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>l.BITS)throw new f.AddressError("Invalid subnet mask.");e=e.replace(l.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new f.AddressError("Invalid subnet mask.");let s=l.RE_ZONE_STRING.exec(e);s&&(this.zone=s[0],e=e.replace(l.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new A(e),!0}catch(e){return!1}}static fromBigInteger(e){let t;let r=e.toString(16).padStart(32,"0"),s=[];for(t=0;t<l.GROUPS;t++)s.push(r.slice(4*t,(t+1)*4));return new A(s.join(":"))}static fromURL(e){let t,r;let s=null;if(-1!==e.indexOf("[")&&-1!==e.indexOf("]:")){if(null===(r=l.RE_URL_WITH_PORT.exec(e)))return{error:"failed to parse address with port",address:null,port:null};t=r[1],s=r[2]}else if(-1!==e.indexOf("/")){if(e=e.replace(/^[a-z0-9]+:\/\//,""),null===(r=l.RE_URL.exec(e)))return{error:"failed to parse address from URL",address:null,port:null};t=r[1]}else t=e;return s?((s=parseInt(s,10))<0||s>65536)&&(s=null):s=null,{address:new A(t),port:s}}static fromAddress4(e){let t=new p.Address4(e),r=l.BITS-(a.BITS-t.subnetMask);return new A(`::ffff:${t.correctForm()}/${r}`)}static fromArpa(e){let t=e.replace(/(\.ip6\.arpa)?\.$/,"");if(63!==t.length)throw new f.AddressError("Invalid 'ip6.arpa' form.");let r=t.split(".").reverse();for(let e=7;e>0;e--){let t=4*e;r.splice(t,0,":")}return new A(t=r.join(""))}microsoftTranscription(){return(0,c.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){let t=l.BITS-this.subnetMask-Math.abs(e-l.BITS);return t<0?"0":function(e){let t=/(\d+)(\d{3})/;for(;t.test(e);)e=e.replace(t,"$1,$2");return e}(new h.BigInteger("2",10).pow(t).toString(10))}_startAddress(){return new h.BigInteger(this.mask()+"0".repeat(l.BITS-this.subnetMask),2)}startAddress(){return A.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new h.BigInteger("1");return A.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new h.BigInteger(this.mask()+"1".repeat(l.BITS-this.subnetMask),2)}endAddress(){return A.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new h.BigInteger("1");return A.fromBigInteger(this._endAddress().subtract(e))}getScope(){let e=l.SCOPES[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==e&&(e="Global"),e||"Unknown"}getType(){for(let e of Object.keys(l.TYPES))if(this.isInSubnet(new A(e)))return l.TYPES[e];return"Global unicast"}getBits(e,t){return new h.BigInteger(this.getBitsBase2(e,t),2)}getBitsBase2(e,t){return this.binaryZeroPad().slice(e,t)}getBitsBase16(e,t){let r=t-e;if(r%4!=0)throw Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,t).toString(16).padStart(r/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,l.BITS)}reverseForm(e){e||(e={});let t=Math.floor(this.subnetMask/4),r=this.canonicalForm().replace(/:/g,"").split("").slice(0,t).reverse().join(".");return t>0?e.omitSuffix?r:(0,c.sprintf)("%s.ip6.arpa.",r):e.omitSuffix?"":"ip6.arpa."}correctForm(){let e;let t=[],r=0,s=[];for(e=0;e<this.parsedAddress.length;e++){let t=parseInt(this.parsedAddress[e],16);0===t&&r++,0!==t&&r>0&&(r>1&&s.push([e-r,e-1]),r=0)}r>1&&s.push([this.parsedAddress.length-r,this.parsedAddress.length-1]);let i=s.map(e=>e[1]-e[0]+1);if(s.length>0){let e=i.indexOf(Math.max(...i));t=function(e,t){let r;let s=[],i=[];for(r=0;r<e.length;r++)r<t[0]?s.push(e[r]):r>t[1]&&i.push(e[r]);return s.concat(["compact"]).concat(i)}(this.parsedAddress,s[e])}else t=this.parsedAddress;for(e=0;e<t.length;e++)"compact"!==t[e]&&(t[e]=parseInt(t[e],16).toString(16));let o=t.join(":");return(o=(o=o.replace(/^compact$/,"::")).replace(/^compact|compact$/,":")).replace(/compact/,"")}binaryZeroPad(){return this.bigInteger().toString(2).padStart(l.BITS,"0")}parse4in6(e){let t=e.split(":"),r=t.slice(-1)[0].match(a.RE_ADDRESS);if(r){this.parsedAddress4=r[0],this.address4=new p.Address4(this.parsedAddress4);for(let t=0;t<this.address4.groups;t++)if(/^0[0-9]+/.test(this.address4.parsedAddress[t]))throw new f.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(a.RE_ADDRESS,this.address4.parsedAddress.map(m).join(".")));this.v4=!0,t[t.length-1]=this.address4.toGroup6(),e=t.join(":")}return e}parse(e){let t=(e=this.parse4in6(e)).match(l.RE_BAD_CHARACTERS);if(t)throw new f.AddressError((0,c.sprintf)("Bad character%s detected in address: %s",t.length>1?"s":"",t.join("")),e.replace(l.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let r=e.match(l.RE_BAD_ADDRESS);if(r)throw new f.AddressError((0,c.sprintf)("Address failed regex: %s",r.join("")),e.replace(l.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let s=[],i=e.split("::");if(2===i.length){let e=i[0].split(":"),t=i[1].split(":");1===e.length&&""===e[0]&&(e=[]),1===t.length&&""===t[0]&&(t=[]);let r=this.groups-(e.length+t.length);if(!r)throw new f.AddressError("Error parsing groups");this.elidedGroups=r,this.elisionBegin=e.length,this.elisionEnd=e.length+this.elidedGroups,s=s.concat(e);for(let e=0;e<r;e++)s.push("0");s=s.concat(t)}else if(1===i.length)s=e.split(":"),this.elidedGroups=0;else throw new f.AddressError("Too many :: groups found");if((s=s.map(e=>(0,c.sprintf)("%x",parseInt(e,16)))).length!==this.groups)throw new f.AddressError("Incorrect number of groups found");return s}canonicalForm(){return this.parsedAddress.map(x).join(":")}decimal(){return this.parsedAddress.map(e=>(0,c.sprintf)("%05d",parseInt(e,16))).join(":")}bigInteger(){return new h.BigInteger(this.parsedAddress.map(x).join(""),16)}to4(){let e=this.binaryZeroPad().split("");return p.Address4.fromHex(new h.BigInteger(e.slice(96,128).join(""),2).toString(16))}to4in6(){let e=this.to4(),t=new A(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),r="";return/:$/.test(t)||(r=":"),t+r+e.address}inspectTeredo(){let e=this.getBitsBase16(0,32),t=this.getBits(80,96).xor(new h.BigInteger("ffff",16)).toString(),r=p.Address4.fromHex(this.getBitsBase16(32,64)),s=p.Address4.fromHex(this.getBits(96,128).xor(new h.BigInteger("ffffffff",16)).toString(16)),i=this.getBits(64,80),o=this.getBitsBase2(64,80),n=i.testBit(15),a=i.testBit(14),l=i.testBit(8),u=i.testBit(9),d=new h.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:(0,c.sprintf)("%s:%s",e.slice(0,4),e.slice(4,8)),server4:r.address,client4:s.address,flags:o,coneNat:n,microsoft:{reserved:a,universalLocal:u,groupIndividual:l,nonce:d},udpPort:t}}inspect6to4(){let e=this.getBitsBase16(0,16),t=p.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,c.sprintf)("%s",e.slice(0,4)),gateway:t.address}}to6to4(){return this.is4()?new A(["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":")):null}toByteArray(){let e=this.bigInteger().toByteArray();return 17===e.length&&0===e[0]?e.slice(1):e}toUnsignedByteArray(){return this.toByteArray().map(y)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(y))}static fromUnsignedByteArray(e){let t=new h.BigInteger("256",10),r=new h.BigInteger("0",10),s=new h.BigInteger("1",10);for(let i=e.length-1;i>=0;i--)r=r.add(s.multiply(new h.BigInteger(e[i].toString(10),10))),s=s.multiply(t);return A.fromBigInteger(r)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new A("2001::/32"))}is6to4(){return this.isInSubnet(new A("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(e){return e=void 0===e?"":(0,c.sprintf)(":%s",e),(0,c.sprintf)("http://[%s]%s/",this.correctForm(),e)}link(e){e||(e={}),void 0===e.className&&(e.className=""),void 0===e.prefix&&(e.prefix="/#address="),void 0===e.v4&&(e.v4=!1);let t=this.correctForm;return(e.v4&&(t=this.to4in6),e.className)?(0,c.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,t.call(this),e.className):(0,c.sprintf)('<a href="%1$s%2$s">%2$s</a>',e.prefix,t.call(this))}group(){if(0===this.elidedGroups)return u.simpleGroup(this.address).join(":");g("number"==typeof this.elidedGroups),g("number"==typeof this.elisionBegin);let e=[],[t,r]=this.address.split("::");t.length?e.push(...u.simpleGroup(t)):e.push("");let s=["hover-group"];for(let e=this.elisionBegin;e<this.elisionBegin+this.elidedGroups;e++)s.push((0,c.sprintf)("group-%d",e));return e.push((0,c.sprintf)('<span class="%s"></span>',s.join(" "))),r.length?e.push(...u.simpleGroup(r,this.elisionEnd)):e.push(""),this.is4()&&(g(this.address4 instanceof p.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let t=[],r=new A(this.correctForm());if(0===r.elidedGroups)t.push((0,d.simpleRegularExpression)(r.parsedAddress));else if(r.elidedGroups===l.GROUPS)t.push((0,d.possibleElisions)(l.GROUPS));else{let e=r.address.split("::");e[0].length&&t.push((0,d.simpleRegularExpression)(e[0].split(":"))),g("number"==typeof r.elidedGroups),t.push((0,d.possibleElisions)(r.elidedGroups,0!==e[0].length,0!==e[1].length)),e[1].length&&t.push((0,d.simpleRegularExpression)(e[1].split(":"))),t=[t.join(":")]}return e||(t=["(?=^|",d.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...t,")(?=[^\\w\\:]|",d.ADDRESS_BOUNDARY,"|$)"]),t.join("")}regularExpression(e=!1){return RegExp(this.regularExpressionString(e),"i")}}e.exports.Address6=A}),n("kJ8V3",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.RE_URL_WITH_PORT=e.exports.RE_URL=e.exports.RE_ZONE_STRING=e.exports.RE_SUBNET_STRING=e.exports.RE_BAD_ADDRESS=e.exports.RE_BAD_CHARACTERS=e.exports.TYPES=e.exports.SCOPES=e.exports.GROUPS=e.exports.BITS=void 0,e.exports.BITS=128,e.exports.GROUPS=8,e.exports.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},e.exports.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},e.exports.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi,e.exports.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,e.exports.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/,e.exports.RE_ZONE_STRING=/%.*$/,e.exports.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),e.exports.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)}),n("7zubQ",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.simpleGroup=e.exports.spanLeadingZeroes=e.exports.spanAll=e.exports.spanAllZeroes=void 0;var r=o("d71ao");function s(e){return e.replace(/(0+)/g,'<span class="zero">$1</span>')}function i(e){return e.replace(/^(0+)/,'<span class="zero">$1</span>')}e.exports.spanAllZeroes=s,e.exports.spanAll=function(e,t=0){return e.split("").map((e,i)=>(0,r.sprintf)('<span class="digit value-%s position-%d">%s</span>',e,i+t,s(e))).join("")},e.exports.spanLeadingZeroes=function(e){return e.split(":").map(e=>i(e)).join(":")},e.exports.simpleGroup=function(e,t=0){return e.split(":").map((e,s)=>/group-v4/.test(e)?e:(0,r.sprintf)('<span class="hover-group group-%d">%s</span>',s+t,i(e)))}}),n("ab37K",function(e,t){var r=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,s,i)}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),s=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.possibleElisions=e.exports.simpleRegularExpression=e.exports.ADDRESS_BOUNDARY=e.exports.padGroup=e.exports.groupPossibilities=void 0;let n=i(o("kJ8V3"));var a=o("d71ao");function l(e){return(0,a.sprintf)("(%s)",e.join("|"))}function u(e){return e.length<4?(0,a.sprintf)("0{0,%d}%s",4-e.length,e):e}e.exports.groupPossibilities=l,e.exports.padGroup=u,e.exports.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]",e.exports.simpleRegularExpression=function(e){let t=[];e.forEach((e,r)=>{0===parseInt(e,16)&&t.push(r)});let r=t.map(t=>e.map((e,r)=>{if(r===t){let t=0===r||r===n.GROUPS-1?":":"";return l([u(e),t])}return u(e)}).join(":"));return r.push(e.map(u).join(":")),l(r)},e.exports.possibleElisions=function(e,t,r){let s=[];t||r||s.push("::"),t&&r&&s.push(""),(r&&!t||!r&&t)&&s.push(":"),s.push((0,a.sprintf)("%s(:0{1,4}){1,%d}",t?"":":",e-1)),s.push((0,a.sprintf)("(0{1,4}:){1,%d}%s",e-1,r?"":":")),s.push((0,a.sprintf)("(0{1,4}:){%d}0{1,4}",e-1));for(let t=1;t<e-1;t++)for(let r=1;r<e-t;r++)s.push((0,a.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",r,e-r-t-1));return l(s)}}),n("d3Kcc",function(e,r){t(e.exports,"default",function(){return a});var s=o("fK3dD"),i=o("3HkWW"),n=o("4ZlGb");async function a(){for(let e of[...i.default.state.optimizedProxies,...i.default.state.normalProxies].map(n.getProxyInfoFromUrl)){let{host:t}=e,r=(0,i.default).state.dnsResponses.findIndex(e=>e.host===t);if(!(-1!==r&&Date.now()-i.default.state.dnsResponses[r].timestamp<1e3*i.default.state.dnsResponses[r].ttl)){if((0,s.Address4).isValid(t)||(0,s.Address6).isValid(t)){let e={host:t,ips:[t],timestamp:Date.now(),ttl:1/0};-1!==r?(0,i.default).state.dnsResponses.splice(r,1,e):(0,i.default).state.dnsResponses.push(e);continue}try{let e=await fetch(`https://cloudflare-dns.com/dns-query?name=${encodeURIComponent(t)}`,{headers:{Accept:"application/dns-json"}});if(!e.ok)throw Error(`HTTP ${e.status}`);let s=await e.json();if(0!==s.Status)throw Error(`DNS status ${s.Status}`);let{Answer:o}=s,n={host:t,ips:o.map(e=>e.data),timestamp:Date.now(),ttl:Math.max(Math.max(...o.map(e=>e.TTL)),300)};-1!==r?(0,i.default).state.dnsResponses.splice(r,1,n):(0,i.default).state.dnsResponses.push(n)}catch(e){console.error(e)}}}console.log("\uD83D\uDD0D DNS responses updated:"),console.log(i.default.state.dnsResponses)}}),n("3PO1e",function(e,r){t(e.exports,"default",function(){return s});var s="TTV-LOL-PRO"}),n("ai42B",function(e,r){t(e.exports,"getBundleURL",function(){return s},function(e){return s=e});var s,i={};s=function(e){var t=i[e];return t||(t=function(){try{throw Error()}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(e)return(""+e[2]).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}(),i[e]=t),t}}),n("21qmY",function(e,r){t(e.exports,"default",function(){return s});function s(e){try{return new URL(e).host}catch{return null}}}),n("bQ85F",function(e,r){t(e.exports,"getStreamStatus",function(){return i}),t(e.exports,"setStreamStatus",function(){return n});var s=o("3HkWW");function i(e){return e?s.default.state.streamStatuses[e]??null:null}function n(e,t){return!!e&&(s.default.state.streamStatuses[e]=t,!0)}}),n("e4GnD",function(e,r){t(e.exports,"default",function(){return i});var s=o("53Td5");function i(e){let t=(0,s.twitchApiChannelNameRegex).exec(e);if(!t)return null;let[,r]=t;return r}}),n("7LaiB",function(e,r){t(e.exports,"default",function(){return i});var s=o("3HkWW");function i(){if("complete"!==s.default.readyState)return(0,s.default).addEventListener("load",i);let e=Date.now();s.default.state.adLog=(0,s.default).state.adLog.filter(t=>e-t.timestamp<6048e5),s.default.state.chromiumProxyActive=!1,s.default.state.dnsResponses=[],s.default.state.openedTwitchTabs=[],s.default.state.streamStatuses={},s.default.state.videoWeaverUrlsByChannel={}}});var a=o("kTh4x"),l=o("3EU1y"),a=o("kTh4x"),u=o("lW4ZV"),p=o("dHu0P");function d(e){return e.every(e=>{let t=e.url||e.pendingUrl;if(!t)return!1;let r=(0,u.default)(t);return!!r&&(0,p.default)(r)})}var l=o("3EU1y"),f=o("flbf2"),h=o("3HkWW"),c=o("4ZlGb"),h=o("3HkWW");let g=[];var m=(o("3PO1e"),o("3PO1e"));function x(e){return!!e&&e.some(e=>"accept"===e.name.toLowerCase()&&e.value?.includes(m.default))}var y={};y=o("ai42B").getBundleURL("2U2eF")+"page.c827c8e5.js";var A={};A=o("ai42B").getBundleURL("2U2eF")+"worker.35e1956b.js";var a=o("kTh4x");function v(t,r){if(!/*@__PURE__*/e(a).webRequest.filterResponseData)return;let s=/*@__PURE__*/e(a).webRequest.filterResponseData(t.requestId),i=new TextDecoder("utf-8"),o=new TextEncoder,n=[];s.ondata=e=>n.push(e.data),s.onstop=()=>{let e="";for(let[t,r]of n.entries()){let s=t!==n.length-1;e+=i.decode(r,{stream:s})}e=r(e,t),s.write(o.encode(e)),s.close()}}var b=o("21qmY"),l=o("3EU1y"),T=o("53Td5"),h=o("3HkWW");function w(e){return Object.keys(h.default.state.videoWeaverUrlsByChannel).find(t=>(0,h.default).state.videoWeaverUrlsByChannel[t].includes(e))??null}var b=o("21qmY"),c=o("4ZlGb"),T=o("53Td5"),h=o("3HkWW"),S=o("1U3jF"),a=o("kTh4x"),f=o("flbf2"),P=o("bQ85F"),h=o("3HkWW"),S=o("1U3jF");let R=new Map,E=new Map([[S.ProxyRequestType.Usher,7e3]]);var l=o("3EU1y"),h=o("3HkWW"),a=o("kTh4x"),u=o("lW4ZV"),B=o("e4GnD"),b=o("21qmY"),p=o("dHu0P"),_=o("8kXXm"),c=o("4ZlGb"),T=o("53Td5"),h=o("3HkWW"),S=o("1U3jF");async function k(t){"complete"!==h.default.readyState&&await new Promise(e=>{let r=()=>{(0,h.default).removeEventListener("load",r),e(k(t))};(0,h.default).addEventListener("load",r)});let r=(0,b.default)(t.url);if(!r)return{type:"direct"};let s=t.documentUrl?(0,b.default)(t.documentUrl):null;if(null!=s&&!(0,T.passportHostRegex).test(s)&&!(0,T.twitchTvHostRegex).test(s))return{type:"direct"};let i=h.default.state.optimizedProxiesEnabled?h.default.state.optimizedProxies:h.default.state.normalProxies,o=[...i.map(c.getProxyInfoFromUrl),{type:"direct"}],n={isChromium:!1,optimizedProxiesEnabled:h.default.state.optimizedProxiesEnabled,passportLevel:h.default.state.passportLevel,isFlagged:x(t.requestHeaders)},l=(0,_.default)(S.ProxyRequestType.Passport,n),d=(0,_.default)(S.ProxyRequestType.Usher,n),f=(0,_.default)(S.ProxyRequestType.VideoWeaver,n),g=(0,_.default)(S.ProxyRequestType.GraphQL,n),m=(0,_.default)(S.ProxyRequestType.TwitchWebpage,n);if(l&&(0,T.passportHostRegex).test(r))return console.log(`\u{231B} Proxying ${t.url} through one of: ${i.toString()||"<empty>"}`),o;if(d&&(0,T.usherHostRegex).test(r)){if(t.url.includes("/vod/"))return console.log(`\u{270B} '${t.url}' is a VOD manifest.`),{type:"direct"};let e=(0,B.default)(t.url);return(0,p.default)(e)?(console.log(`\u{270B} Channel '${e}' is whitelisted.`),{type:"direct"}):(console.log(`\u{231B} Proxying ${t.url} (${e??"unknown"}) through one of: ${i.toString()||"<empty>"}`),o)}if(f&&(0,T.videoWeaverHostRegex).test(r)){let r;try{r=(await /*@__PURE__*/e(a).tabs.get(t.tabId)).url}catch{}let s=w(t.url)??(0,u.default)(r);return(0,p.default)(s)?(console.log(`\u{270B} Channel '${s}' is whitelisted.`),{type:"direct"}):(console.log(`\u{231B} Proxying ${t.url} (${s??"unknown"}) through one of: ${i.toString()||"<empty>"}`),o)}return g&&(0,T.twitchGqlHostRegex).test(r)||m&&(0,T.twitchTvHostRegex).test(r)?(console.log(`\u{231B} Proxying ${t.url} through one of: ${i.toString()||"<empty>"}`),o):{type:"direct"}}var a=o("kTh4x"),u=o("lW4ZV"),b=o("21qmY"),l=o("3EU1y"),_=o("8kXXm"),c=o("4ZlGb"),T=o("53Td5"),P=o("bQ85F"),h=o("3HkWW"),S=o("1U3jF");async function D(t){let r=(0,b.default)(t.url);if(!r)return;let s=null,i=null;try{s=function(e){if(l.default){let t=[...h.default.state.optimizedProxies,...h.default.state.normalProxies];if(0!==t.length&&0===h.default.state.dnsResponses.length)throw Error("Cannot detect if requests are being proxied due to a DNS error");let r=e.ip;if(!r)return null;let s=(0,h.default).state.dnsResponses.find(e=>-1!==e.ips.indexOf(r));if(!s)return null;let i=t.map(c.getProxyInfoFromUrl).filter(e=>e.host===s.host);return 0===i.length?s.host:(0,c.getUrlFromProxyInfo)(i[0])}{let t=e.proxyInfo;return t&&"direct"!==t.type?(0,c.getUrlFromProxyInfo)(t):null}}(t)}catch(e){i=e instanceof Error?e.message:`${e}`}let o={isChromium:l.default,optimizedProxiesEnabled:h.default.state.optimizedProxiesEnabled,passportLevel:h.default.state.passportLevel},n=(0,_.default)(S.ProxyRequestType.Passport,o),p=(0,_.default)(S.ProxyRequestType.Usher,o),d=(0,_.default)(S.ProxyRequestType.VideoWeaver,o),f=(0,_.default)(S.ProxyRequestType.GraphQL,o),g=(0,_.default)(S.ProxyRequestType.TwitchWebpage,o);if(n&&(0,T.passportHostRegex).test(r)||p&&(0,T.usherHostRegex).test(r)){if(!s)return console.log(`\u{274C} Did not proxy ${t.url}`);console.log(`\u{2705} Proxied ${t.url} through ${s}`)}if(d&&(0,T.videoWeaverHostRegex).test(r)){let r;try{r=(await /*@__PURE__*/e(a).tabs.get(t.tabId)).url}catch{}let o=w(t.url)??(0,u.default)(r),n=(0,P.getStreamStatus)(o),l=n?.stats??{proxied:0,notProxied:0};if(!s){l.notProxied++;let r=i??n?.reason??"";try{switch((await /*@__PURE__*/e(a).proxy.settings.get({})).levelOfControl){case"controlled_by_other_extensions":r="Proxy settings controlled by other extension";break;case"not_controllable":r="Proxy settings not controllable"}}catch{}(0,P.setStreamStatus)(o,{proxied:!1,proxyHost:n?.proxyHost?n.proxyHost:void 0,proxyCountry:n?.proxyCountry,reason:r,stats:l}),console.log(`\u{274C} Did not proxy ${t.url} (${o??"unknown"})`);return}l.proxied++,(0,P.setStreamStatus)(o,{proxied:!0,proxyHost:s,proxyCountry:n?.proxyCountry,reason:"",stats:l}),console.log(`\u{2705} Proxied ${t.url} (${o??"unknown"}) through ${s}`)}if(f&&(0,T.twitchGqlHostRegex).test(r)){if(!s&&h.default.state.optimizedProxiesEnabled)return;if(!s)return console.log(`\u{274C} Did not proxy ${t.url}`);console.log(`\u{2705} Proxied ${t.url} through ${s}`)}if(g&&(0,T.twitchTvHostRegex).test(r)){if(!s)return console.log(`\u{274C} Did not proxy ${t.url}`);console.log(`\u{2705} Proxied ${t.url} through ${s}`)}}var I=o("7LaiB"),u=o("lW4ZV"),b=o("21qmY"),p=o("dHu0P"),l=o("3EU1y"),f=o("flbf2"),T=o("53Td5"),h=o("3HkWW");function M(e){if("complete"!==h.default.readyState)return(0,h.default).addEventListener("load",()=>M(e));let t=e.url||e.pendingUrl;if(!t)return;let r=(0,b.default)(t);if(r&&(0,T.twitchTvHostRegex).test(r)&&(console.log(`\u{2795} Opened Twitch tab: ${e.id}`),(0,h.default).state.openedTwitchTabs.push(e),l.default)){let e=(0,u.default)(t);e&&(0,p.default)(e)||h.default.state.chromiumProxyActive||(0,f.updateProxySettings)()}}var l=o("3EU1y"),f=o("flbf2"),h=o("3HkWW");function L(e){if("complete"!==h.default.readyState)return(0,h.default).addEventListener("load",()=>L(e));let t=(0,h.default).state.openedTwitchTabs.findIndex(t=>t.id===e);if(-1!==t&&(console.log(`\u{2796} Closed Twitch tab: ${e}`),(0,h.default).state.openedTwitchTabs.splice(t,1),l.default)){let e=d(h.default.state.openedTwitchTabs);(0===h.default.state.openedTwitchTabs.length||e)&&h.default.state.chromiumProxyActive&&(0,f.clearProxySettings)()}}var a=o("kTh4x"),b=o("21qmY"),l=o("3EU1y"),f=o("flbf2"),T=o("53Td5"),h=o("3HkWW");console.info("\uD83D\uDE80 Background script loaded."),/*@__PURE__*/e(a).runtime.onInstalled.addListener(function e(t){if("complete"!==h.default.readyState)return(0,h.default).addEventListener("load",()=>e(t));if("update"===t.reason){let e="chrome.api.cdn-perfprod.com:4023";if((0,h.default).state.normalProxies.includes(e)){h.default.state.normalProxies=(0,h.default).state.normalProxies.filter(t=>t!==e),h.default.state.optimizedProxiesEnabled=0===h.default.state.normalProxies.length;let t="chromium.api.cdn-perfprod.com:2023";if(l.default&&!(0,h.default).state.optimizedProxies.includes(t)){let e="firefox.api.cdn-perfprod.com:2023";(0,h.default).state.optimizedProxies.includes(e)&&(h.default.state.optimizedProxies=(0,h.default).state.optimizedProxies.filter(t=>t!==e)),(0,h.default).state.optimizedProxies.push(t)}}}}),/*@__PURE__*/e(a).runtime.onStartup.addListener(I.default),/*@__PURE__*/e(a).runtime.onMessage.addListener(function(t,r,s){if(t.type===S.MessageType.EnableFullMode){if(!r.tab?.id)return;let s=t.requestType;R.has(s)&&clearTimeout(R.get(s));let i=E.has(s)?E.get(s):3e3,o=Date.now()-t.timestamp;R.set(s,setTimeout(()=>{console.log(`\u{1F534} Disabled full mode (request type: ${s}, timeout)`),R.delete(s),h.default.state.chromiumProxyActive&&(0,f.updateProxySettings)([...R.keys()])},i+o)),h.default.state.chromiumProxyActive&&(0,f.updateProxySettings)([...R.keys()]),console.log(`\u{1F7E2} Enabled full mode for ${i+o}ms (request type: ${s})`);try{/*@__PURE__*/e(a).tabs.sendMessage(r.tab.id,{type:S.MessageType.EnableFullModeResponse})}catch(e){console.error("❌ Failed to send EnableFullModeResponse message",e)}}if(t.type===S.MessageType.DisableFullMode){let e=t.requestType;R.has(e)&&(clearTimeout(R.get(e)),R.delete(e)),h.default.state.chromiumProxyActive&&(0,f.updateProxySettings)([...R.keys()]),console.log(`\u{1F534} Disabled full mode (request type: ${e})`)}if(t.type===S.MessageType.UsherResponse){let{channel:e,videoWeaverUrls:r,proxyCountry:s}=t;h.default.state.videoWeaverUrlsByChannel[e]=[...h.default.state.videoWeaverUrlsByChannel[e]??[],...r];let i=(0,P.getStreamStatus)(e);(0,P.setStreamStatus)(e,{...i??{proxied:!1,reason:""},proxyCountry:s})}}),/*@__PURE__*/e(a).webRequest.onAuthRequired.addListener(function(e){if(!e.isProxy)return;if(g.includes(e.requestId)){console.error(`\u{1F512} Provided invalid credentials for proxy ${e.challenger.host}:${e.challenger.port}.`);return}g.push(e.requestId);let t=(h.default.state.optimizedProxiesEnabled?h.default.state.optimizedProxies:h.default.state.normalProxies).find(t=>{let r=(0,c.getProxyInfoFromUrl)(t);return r.host===e.challenger.host&&r.port===e.challenger.port});if(!t){console.error(`\u{274C} Proxy ${e.challenger.host}:${e.challenger.port} not found.`);return}let r=(0,c.getProxyInfoFromUrl)(t);if(null==r.username||null==r.password){console.error(`\u{274C} No credentials provided for proxy ${t}.`);return}return console.log(`\u{1F511} Providing credentials for proxy ${t}.`),{authCredentials:{username:r.username,password:r.password}}},{urls:["https://*.live-video.net/*","https://*.ttvnw.net/*","https://*.twitch.tv/*"]},["blocking"]),/*@__PURE__*/e(a).webRequest.onResponseStarted.addListener(D,{urls:["https://*.live-video.net/*","https://*.ttvnw.net/*","https://*.twitch.tv/*"]}),l.default?(function t(){if("complete"!==h.default.readyState)return(0,h.default).addEventListener("load",t);/*@__PURE__*/e(a).tabs.query({url:["https://www.twitch.tv/*","https://m.twitch.tv/*"]}).then(e=>{if(console.log(`\u{1F50D} Found ${e.length} opened Twitch tabs.`),h.default.state.openedTwitchTabs=e,l.default){let t=d(e);e.length>0&&!t?(0,f.updateProxySettings)():(0,f.clearProxySettings)()}}).catch(()=>console.error("❌ Failed to query opened Twitch tabs."))}(),/*@__PURE__*/e(a).tabs.onCreated.addListener(M),/*@__PURE__*/e(a).tabs.onUpdated.addListener(function e(t,r,s){if("complete"!==h.default.readyState)return(0,h.default).addEventListener("load",()=>e(t,r,s));let i=null!=r.url,o="loading"===r.status;if(!i&&!o)return;let n=r.url||s.url||s.pendingUrl;if(!n)return;let a=(0,b.default)(n);if(!a)return;let u=(0,T.twitchTvHostRegex).test(a),p=(0,h.default).state.openedTwitchTabs.some(e=>e.id===t);if((u||p)&&(u&&!p&&M(s),!u&&p&&L(t),u&&p)){let e=(0,h.default).state.openedTwitchTabs.findIndex(e=>e.id===t);if(-1===e)return;if(console.log(`\u{1F7F0} Updated Twitch tab: ${t}`),h.default.state.openedTwitchTabs[e]=s,l.default){let e=d(h.default.state.openedTwitchTabs);e||h.default.state.chromiumProxyActive?e&&h.default.state.chromiumProxyActive&&(0,f.clearProxySettings)():(0,f.updateProxySettings)()}}}),/*@__PURE__*/e(a).tabs.onRemoved.addListener(L),/*@__PURE__*/e(a).tabs.onReplaced.addListener(function(t,r){L(r),/*@__PURE__*/e(a).tabs.get(t).then(e=>M(e)).catch(()=>console.error("❌ Failed to get tab after replacement."))})):(/*@__PURE__*/e(a).webRequest.onBeforeSendHeaders.addListener(function(t){let r=(0,b.default)(t.url);if(!r||!(0,T.twitchTvHostRegex).test(r))return;let s=t.requestHeaders?.find(e=>"accept"===e.name.toLowerCase());s&&s.value&&s.value.toLowerCase().includes("text/html")&&v(t,t=>{let r=new DOMParser().parseFromString(t,"text/html"),s=r.createElement("script");return s.src=/*@__PURE__*/e(y),s.dataset.params=JSON.stringify({isChromium:l.default,workerScriptURL:/*@__PURE__*/e(A)}),s.onload=()=>s.remove(),(r.head||r.documentElement).prepend(s),("BackCompat"===r.compatMode?"":"<!DOCTYPE html>")+r.documentElement.outerHTML})},{urls:["https://www.twitch.tv/*","https://m.twitch.tv/*"],types:["main_frame"]},["blocking","requestHeaders"]),/*@__PURE__*/e(a).webRequest.onBeforeRequest.addListener(()=>({cancel:!0}),{urls:["https://*.twitch.tv/r/s/*","https://*.twitch.tv/r/c/*"]},["blocking"]),/*@__PURE__*/e(a).proxy.onRequest.addListener(k,{urls:["https://*.live-video.net/*","https://*.ttvnw.net/*","https://*.twitch.tv/*"]},["requestHeaders"]),/*@__PURE__*/e(a).webRequest.onBeforeSendHeaders.addListener(function(e){return x(e.requestHeaders)?(console.log(`\u{1F50E} Found flagged request for ${e.url}, removing flag\u{2026}`),{requestHeaders:e.requestHeaders.reduce((e,t)=>("accept"===t.name.toLowerCase()?t.value===m.default||e.push({name:t.name,value:t.value?.replace(m.default,"")}):e.push(t),e),[])}):{}},{urls:["https://*.live-video.net/*","https://*.ttvnw.net/*","https://*.twitch.tv/*"]},["blocking","requestHeaders"]),/*@__PURE__*/e(a).webRequest.onBeforeRequest.addListener(function(e){let t=(0,b.default)(e.url);t&&(0,T.videoWeaverHostRegex).test(t)&&h.default.state.adLogEnabled&&v(e,r=>{let s=r.toLowerCase(),i=s.includes("stitched-ad"),o=s.includes("midroll");if(!i&&!o||(0,h.default).state.adLog.some(t=>t.videoWeaverUrl===e.url&&e.timeStamp-t.timestamp<3e4))return r;let n=w(e.url),a=s.includes("https://example.com")&&s.includes("https://help.twitch.tv/"),l=e.proxyInfo&&"direct"!==e.proxyInfo.type?(0,c.getUrlFromProxyInfo)(e.proxyInfo):null;return(0,h.default).state.adLog.push({adType:o?S.AdType.MIDROLL:S.AdType.PREROLL,isPurpleScreen:a,proxy:l,channel:n,passportLevel:h.default.state.passportLevel,anonymousMode:h.default.state.anonymousMode,timestamp:e.timeStamp,videoWeaverHost:t,videoWeaverUrl:e.url}),console.log(`\u{1F4DD} Ad log updated (${h.default.state.adLog.length} entries).`),console.log(r),r})},{urls:["https://*.live-video.net/*","https://*.ttvnw.net/*"]},["blocking"]))}();