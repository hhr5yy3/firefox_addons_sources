/*! For license information please see 831.bundle.js.LICENSE.txt */
(self.webpackChunk_keplr_wallet_extension=self.webpackChunk_keplr_wallet_extension||[]).push([[831],{61501:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>Aa});var n={};r.r(n),r.d(n,{identity:()=>Re});var i={};r.r(i),r.d(i,{base2:()=>Me});var s={};r.r(s),r.d(s,{base8:()=>De});var o={};r.r(o),r.d(o,{base10:()=>Le});var a={};r.r(a),r.d(a,{base16:()=>je,base16upper:()=>Ue});var c={};r.r(c),r.d(c,{base32:()=>Be,base32hex:()=>He,base32hexpad:()=>Ke,base32hexpadupper:()=>qe,base32hexupper:()=>ze,base32pad:()=>Ve,base32padupper:()=>$e,base32upper:()=>Fe,base32z:()=>Ge});var l={};r.r(l),r.d(l,{base36:()=>We,base36upper:()=>Ye});var u={};r.r(u),r.d(u,{base58btc:()=>Qe,base58flickr:()=>Xe});var h={};r.r(h),r.d(h,{base64:()=>Ze,base64pad:()=>Je,base64url:()=>et,base64urlpad:()=>tt});var d={};r.r(d),r.d(d,{base256emoji:()=>st});var p={};r.r(p),r.d(p,{sha256:()=>Ct,sha512:()=>xt});var f={};r.r(f),r.d(f,{identity:()=>Pt});var g={};r.r(g),r.d(g,{code:()=>Nt,decode:()=>Mt,encode:()=>Rt,name:()=>kt});var y={};r.r(y),r.d(y,{code:()=>Ut,decode:()=>Ft,encode:()=>Bt,name:()=>jt});var m=r(22699),b=r.n(m);const v=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,w=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function E(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function S(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&'"'===e.at(-1)&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!_.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(v.test(e)||w.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,E)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var I=r(48834).Buffer;function A(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function O(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return O(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function C(){if(void 0===typeof I)throw new TypeError("[unstorage] Buffer is not supported!")}const x="base64:";function T(e){return e?e.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function P(...e){return T(e.join(":"))}function k(e){return(e=T(e))?e+":":""}const N=()=>{const e=new Map;return{name:"memory",options:{},hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>Array.from(e.keys()),clear(){e.clear()},dispose(){e.clear()}}};function R(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function M(e){"function"==typeof e.dispose&&await A(e.dispose)}function D(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function L(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=D(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let j;function U(){return j||(j=L("keyval-store","keyval")),j}function B(e,t=U()){return t("readonly",(t=>D(t.get(e))))}const F=e=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString()+"n":t)),V=e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))};function $(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return V(e)}catch(t){return e}}function H(e){return"string"==typeof e?e:F(e)||""}var z=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=L(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await B(r(e),n)>"u"),getItem:async e=>await B(r(e),n)??null,setItem:(e,t)=>function(e,t,r=U()){return r("readwrite",(r=>(r.put(t,e),D(r.transaction))))}(r(e),t,n),removeItem:e=>function(e,t=U()){return t("readwrite",(t=>(t.delete(e),D(t.transaction))))}(r(e),n),getKeys:()=>function(e=U()){return e("readonly",(e=>{if(e.getAllKeys)return D(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},D(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(n),clear:()=>function(e=U()){return e("readwrite",(e=>(e.clear(),D(e.transaction))))}(n)}};class K{constructor(){this.indexedDb=function(e={}){const t={mounts:{"":e.driver||N()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=T(r);for(const n of t.watchListeners)n(e,r)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,n)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,i=T(e?n:n.key),o=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},c=r(i);s(c).items.push({key:i,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=T(e);const{relativeKey:n,driver:i}=r(e);return A(i.hasItem,n,t)},getItem(e,t={}){e=T(e);const{relativeKey:n,driver:i}=r(e);return A(i.getItem,n,t).then((e=>S(e)))},getItems:(e,t)=>o(e,t,(e=>e.driver.getItems?A(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:P(e.base,t.key),value:S(t.value)}))))):Promise.all(e.items.map((t=>A(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:S(e)})))))))),getItemRaw(e,t={}){e=T(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?A(i.getItemRaw,n,t):A(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(x)?(C(),I.from(e.slice(7),"base64")):e}(e)))},async setItem(e,t,n={}){if(void 0===t)return a.removeItem(e);e=T(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await A(o.setItem,s,O(t),n),o.watch||i("update",e))},async setItems(e,t){await o(e,t,(async e=>{e.driver.setItems&&await A(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:O(e.value),options:e.options}))),t),e.driver.setItem&&await Promise.all(e.items.map((t=>A(e.driver.setItem,t.relativeKey,O(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return a.removeItem(e,n);e=T(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await A(o.setItemRaw,s,t,n);else{if(!o.setItem)return;await A(o.setItem,s,function(e){if("string"==typeof e)return e;C();const t=I.from(e).toString("base64");return x+t}(t),n)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=T(e);const{relativeKey:n,driver:s}=r(e);s.removeItem&&(await A(s.removeItem,n,t),(t.removeMeta||t.removeMata)&&await A(s.removeItem,n+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=T(e);const{relativeKey:n,driver:i}=r(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await A(i.getMeta,n,t)),!t.nativeOnly){const e=await A(i.getItem,n+"$",t).then((e=>S(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=k(e);const r=n(e,!0);let i=[];const s=[];for(const e of r){const r=(await A(e.driver.getKeys,e.relativeBase,t)).map((t=>e.mountpoint+T(t))).filter((e=>!i.some((t=>e.startsWith(t)))));s.push(...r),i=[e.mountpoint,...i.filter((t=>!t.startsWith(e.mountpoint)))]}return e?s.filter((t=>t.startsWith(e)&&!t.endsWith("$"))):s.filter((e=>!e.endsWith("$")))},async clear(e,t={}){e=k(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return A(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>M(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await R(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,r){if((e=k(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(R(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=k(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e](),delete t.unwatch[e]),r&&await M(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=T(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=T(e),n(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint}))))};return a}({driver:z({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,H(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},G={exports:{}};function W(e){var t;return[e[0],$(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof q<"u"&&q.localStorage?G.exports=q.localStorage:typeof window<"u"&&window.localStorage?G.exports=window.localStorage:G.exports=new t}();class Y{constructor(){this.localStorage=G.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(W)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return $(t)}async setItem(e,t){this.localStorage.setItem(e,H(t))}async removeItem(e){this.localStorage.removeItem(e)}}class Q{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Y;this.storage=e;try{(async(e,t,r)=>{const n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),o.push(r)}}await t.setItem(n,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,o)})(e,new K,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var X=r(67660),Z=r(52500),J=r(5774);class ee extends J.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class te extends J.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class re{constructor(e,t){this.logger=e,this.core=t}}class ne extends J.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class ie extends J.q{constructor(e){super()}}class se{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}class oe extends J.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class ae extends J.q{constructor(e,t){super(),this.core=e,this.logger=t}}class ce{constructor(e,t){this.projectId=e,this.logger=t}}var le=r(27728),ue=r(81293),he=r(10666);const de="base64url",pe="utf8",fe=":",ge="did",ye="key",me="base58btc",be="z",ve="K36";function we(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function _e(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?we(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Ee(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=_e(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return we(r)}const Se=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},Ie=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class Ae{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Oe{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return xe(this,e)}}class Ce{constructor(e){this.decoders=e}or(e){return xe(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const xe=(e,t)=>new Ce({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Te{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Ae(e,t,r),this.decoder=new Oe(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Pe=({name:e,prefix:t,encode:r,decode:n})=>new Te(e,t,r,n),ke=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Se(r,t);return Pe({prefix:e,name:t,encode:n,decode:e=>Ie(i(e))})},Ne=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Pe({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),Re=Pe({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),Me=Ne({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),De=Ne({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Le=ke({prefix:"9",name:"base10",alphabet:"0123456789"}),je=Ne({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ue=Ne({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Be=Ne({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Fe=Ne({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ve=Ne({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),$e=Ne({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),He=Ne({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ze=Ne({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ke=Ne({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),qe=Ne({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ge=Ne({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),We=ke({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ye=ke({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Qe=ke({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Xe=ke({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Ze=Ne({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Je=Ne({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),et=Ne({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),tt=Ne({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rt=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),nt=rt.reduce(((e,t,r)=>(e[r]=t,e)),[]),it=rt.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),st=Pe({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+nt[t]),"")},decode:function(e){const t=[];for(const r of e){const e=it[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var ot=128,at=-128,ct=Math.pow(2,31),lt=Math.pow(2,7),ut=Math.pow(2,14),ht=Math.pow(2,21),dt=Math.pow(2,28),pt=Math.pow(2,35),ft=Math.pow(2,42),gt=Math.pow(2,49),yt=Math.pow(2,56),mt=Math.pow(2,63);const bt=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=ct;)r[n++]=255&t|ot,t/=128;for(;t&at;)r[n++]=255&t|ot,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},vt=function(e){return e<lt?1:e<ut?2:e<ht?3:e<dt?4:e<pt?5:e<ft?6:e<gt?7:e<yt?8:e<mt?9:10},wt=(e,t,r=0)=>(bt(e,t,r),t),_t=e=>vt(e),Et=(e,t)=>{const r=t.byteLength,n=_t(e),i=n+_t(r),s=new Uint8Array(i+r);return wt(e,s,0),wt(r,s,n),s.set(t,i),new St(e,r,t,s)};class St{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const It=({name:e,code:t,encode:r})=>new At(e,t,r);class At{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?Et(this.code,t):t.then((e=>Et(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ot=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Ct=It({name:"sha2-256",code:18,encode:Ot("SHA-256")}),xt=It({name:"sha2-512",code:19,encode:Ot("SHA-512")}),Tt=Ie,Pt={code:0,name:"identity",encode:Tt,digest:e=>Et(0,Tt(e))},kt="raw",Nt=85,Rt=e=>Ie(e),Mt=e=>Ie(e),Dt=new TextEncoder,Lt=new TextDecoder,jt="json",Ut=512,Bt=e=>Dt.encode(JSON.stringify(e)),Ft=e=>JSON.parse(Lt.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Vt={...n,...i,...s,...o,...a,...c,...l,...u,...h,...d};function $t(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Ht=$t("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),zt=$t("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=_e((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Kt={utf8:Ht,"utf-8":Ht,hex:Vt.base16,latin1:zt,ascii:zt,binary:zt,...Vt};function qt(e,t="utf8"){const r=Kt[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Gt(e,t="utf8"){const r=Kt[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):we(globalThis.Buffer.from(e,"utf-8"))}function Wt(e){return qt(Gt(H(e),pe),de)}function Yt(e){const t=Gt(ve,me),r=be+qt(Ee([t,e]),me);return[ge,ye,r].join(fe)}function Qt(e=(0,ue.randomBytes)(32)){return le._w(e)}r(3947);var Xt=r(42934),Zt=r(71133),Jt=r(49013),er=r(60550),tr=r(34406),rr=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},nr=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},ir=function(e){this.version=e,this.type="node",this.name="node",this.os=tr.platform},sr=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},or=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ar=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},cr=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,lr=3,ur=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],hr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function dr(e){var t=function(e){return""!==e&&ur.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new or;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<lr&&(i=rr(rr([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(lr-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=hr.length;t<r;t++){var n=hr[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=cr.exec(e);return a&&a[1]?new sr(r,s,o,a[1]):new nr(r,s,o)}var pr=r(4997),fr=r(51726),gr=r(34748);r(64187);const yr={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var mr=r(34406);function br(e,t){return e.includes(":")?[e]:t.chains||[]}const vr="base10",wr="base16",_r="base64pad",Er="utf8";function Sr(){return qt((0,ue.randomBytes)(32),wr)}function Ir(e){return qt((0,Jt.vp)(Gt(e,Er)),wr)}function Ar(e){return Number(qt(e,vr))}function Or(e){const t=Gt(e,_r),r=t.slice(0,1);if(1===Ar(r)){const e=33,n=e+12,i=t.slice(1,e),s=t.slice(e,n);return{type:r,sealed:t.slice(n),iv:s,senderPublicKey:i}}const n=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:n}}function Cr(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function xr(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var Tr=Object.defineProperty,Pr=Object.getOwnPropertySymbols,kr=Object.prototype.hasOwnProperty,Nr=Object.prototype.propertyIsEnumerable,Rr=(e,t,r)=>t in e?Tr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Mr=(e,t)=>{for(var r in t||(t={}))kr.call(t,r)&&Rr(e,r,t[r]);if(Pr)for(var r of Pr(t))Nr.call(t,r)&&Rr(e,r,t[r]);return e};const Dr="ReactNative",Lr={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},jr="js";function Ur(){return typeof mr<"u"&&typeof mr.versions<"u"&&typeof mr.versions.node<"u"}function Br(){return!(0,pr.getDocument)()&&!!(0,pr.getNavigator)()&&navigator.product===Dr}function Fr(){return!Ur()&&!!(0,pr.getNavigator)()}function Vr(){return Br()?Lr.reactNative:Ur()?Lr.node:Fr()?Lr.browser:Lr.unknown}function $r(e,t,n){const i=function(){if(Vr()===Lr.reactNative&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}const e=t?dr(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ar:"undefined"!=typeof navigator?dr(navigator.userAgent):void 0!==tr&&tr.version?new ir(tr.version.slice(1)):null;var t;if(null===e)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[n,e.name,e.version].join("-"):[n,e.version].join("-")}(),s=function(){var e;const t=Vr();return t===Lr.browser?[t,(null==(e=(0,pr.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[jr,n].join("-"),i,s].join("/")}function Hr(e,t){return e.filter((e=>t.includes(e))).length===e.length}function zr(e){return Object.fromEntries(e.entries())}function Kr(e){return new Map(Object.entries(e))}function qr(e=he.FIVE_MINUTES,t){const r=(0,he.toMiliseconds)(e||he.FIVE_MINUTES);let n,i,s;return{resolve:e=>{s&&n&&(clearTimeout(s),n(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,o)=>{s=setTimeout((()=>{o(new Error(t))}),r),n=e,i=o}))}}function Gr(e,t,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),t);try{n(await e)}catch(e){i(e)}clearTimeout(s)}))}function Wr(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Yr(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function Qr(e,t){return(0,he.fromMiliseconds)((t||Date.now())+(0,he.toMiliseconds)(e))}function Xr(e){return Date.now()>=(0,he.toMiliseconds)(e)}function Zr(e,t){return`${e}${t?`:${t}`:""}`}function Jr(e){return e?.relay||{protocol:"irn"}}function en(e){const t=yr[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var tn=Object.defineProperty,rn=Object.getOwnPropertySymbols,nn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,on=(e,t,r)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;function an(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),s=e[t];r[i]=s}})),r}function cn(e){return e.startsWith("//")?e.substring(2):e}function ln(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const un={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},hn={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function dn(e,t){const{message:r,code:n}=hn[e];return{message:t?`${r} ${t}`:r,code:n}}function pn(e,t){const{message:r,code:n}=un[e];return{message:t?`${r} ${t}`:r,code:n}}function fn(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function gn(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function yn(e){return typeof e>"u"}function mn(e,t){return!(!t||!yn(e))||"string"==typeof e&&!!e.trim().length}function bn(e,t){return!(!t||!yn(e))||"number"==typeof e&&!isNaN(e)}function vn(e){return!(!mn(e,!1)||!e.includes(":"))&&2===e.split(":").length}function wn(e){let t=!0;return fn(e)?e.length&&(t=e.every((e=>mn(e,!1)))):t=!1,t}function _n(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return wn(e?.methods)?wn(e?.events)||(r=pn("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=pn("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);n&&(r=n)})),r}function En(e,t){let r=null;if(e&&gn(e)){const n=_n(e,t);n&&(r=n);const i=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return fn(e)?e.forEach((e=>{r||function(e){if(mn(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&vn(e)}}return!1}(e)||(r=pn("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=pn("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);n&&(r=n)})),r}(e,t);i&&(r=i)}else r=dn("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Sn(e){return mn(e.protocol,!0)}function In(e){return typeof e<"u"&&null!==typeof e}function An(e,t){return!(!vn(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...ln(e.accounts))})),t}(e).includes(t))}function On(e,t,r){let n=null;const i=function(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=ln(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(i),a=Object.keys(s),c=Cn(Object.keys(e)),l=Cn(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(n=dn("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),Hr(o,a)||(n=dn("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=ln(t[e].accounts);i.includes(e)||(n=dn("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{n||(Hr(i[e].methods,s[e].methods)?Hr(i[e].events,s[e].events)||(n=dn("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=dn("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function Cn(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function xn(){const e=Vr();return new Promise((t=>{switch(e){case Lr.browser:t(Fr()&&navigator?.onLine);break;case Lr.reactNative:t(async function(){if(Br()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo){const e=await(null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}());break;case Lr.node:default:t(!0)}}))}const Tn={};class Pn{static get(e){return Tn[e]}static set(e,t){Tn[e]=t}static delete(e){delete Tn[e]}}const kn="INTERNAL_ERROR",Nn="SERVER_ERROR",Rn=[-32700,-32600,-32601,-32602,-32603],Mn={PARSE_ERROR:{code:-32700,message:"Parse error"},INVALID_REQUEST:{code:-32600,message:"Invalid Request"},METHOD_NOT_FOUND:{code:-32601,message:"Method not found"},INVALID_PARAMS:{code:-32602,message:"Invalid params"},[kn]:{code:-32603,message:"Internal error"},[Nn]:{code:-32e3,message:"Server error"}},Dn=Nn;function Ln(e){return Object.keys(Mn).includes(e)?Mn[e]:Mn[Dn]}var jn=r(5010);function Un(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function Bn(e=6){return BigInt(Un(e))}function Fn(e,t,r){return{id:r||Un(),jsonrpc:"2.0",method:e,params:t}}function Vn(e,t){return{id:e,jsonrpc:"2.0",result:t}}function $n(e,t,r){return{id:e,jsonrpc:"2.0",error:Hn(t,r)}}function Hn(e,t){return void 0===e?Ln(kn):("string"==typeof e&&(e=Object.assign(Object.assign({},Ln(Nn)),{message:e})),void 0!==t&&(e.data=t),r=e.code,Rn.includes(r)&&(e=function(e){return Object.values(Mn).find((t=>t.code===e))||Mn[Dn]}(e.code)),e);var r}class zn{}class Kn extends zn{constructor(){super()}}class qn extends Kn{constructor(e){super()}}function Gn(e){return function(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}(e,"^wss?:")}function Wn(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function Yn(e){return Wn(e)&&"method"in e}function Qn(e){return Wn(e)&&(Xn(e)||Zn(e))}function Xn(e){return"result"in e}function Zn(e){return"error"in e}class Jn extends qn{constructor(e){super(e),this.events=new m.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(Fn(e.method,e.params||[],e.id||Bn().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,(e=>{Zn(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){n(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),Qn(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const ei=e=>e.split("?")[0],ti=typeof WebSocket<"u"?WebSocket:typeof r.g<"u"&&typeof r.g.WebSocket<"u"?r.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:r(77814);class ri{constructor(e){if(this.url=e,this.events=new m.EventEmitter,this.registering=!1,!Gn(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(H(e))}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!Gn(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,n)=>{const i=new URLSearchParams(e).get("origin"),s=(0,jn.isReactNative)()?{headers:{origin:i}}:{rejectUnauthorized:(a=e,!new RegExp("wss?://localhost(:d{2,5})?").test(a))},o=new ti(e,[],s);var a;typeof WebSocket<"u"||typeof r.g<"u"&&typeof r.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?o.onerror=e=>{const t=e;n(this.emitError(t.error))}:o.on("error",(e=>{n(this.emitError(e))})),o.onopen=()=>{this.onOpen(o),t(o)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?$(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=$n(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return function(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable WS RPC url at ${t}`):e}(e,ei(t))}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${ei(this.url)}`));return this.events.emit("register_error",t),t}}var ni=r(33958),ii=r.n(ni),si=r(34406),oi=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const ai=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class ci{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class li{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return hi(this,e)}}class ui{constructor(e){this.decoders=e}or(e){return hi(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const hi=(e,t)=>new ui({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class di{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ci(e,t,r),this.decoder=new li(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const pi=({name:e,prefix:t,encode:r,decode:n})=>new di(e,t,r,n),fi=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=oi(r,t);return pi({prefix:e,name:t,encode:n,decode:e=>ai(i(e))})},gi=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>pi({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),yi=pi({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var mi=Object.freeze({__proto__:null,identity:yi});const bi=gi({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var vi=Object.freeze({__proto__:null,base2:bi});const wi=gi({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _i=Object.freeze({__proto__:null,base8:wi});const Ei=fi({prefix:"9",name:"base10",alphabet:"0123456789"});var Si=Object.freeze({__proto__:null,base10:Ei});const Ii=gi({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ai=gi({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Oi=Object.freeze({__proto__:null,base16:Ii,base16upper:Ai});const Ci=gi({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xi=gi({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ti=gi({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Pi=gi({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ki=gi({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ni=gi({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ri=gi({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Mi=gi({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Di=gi({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Li=Object.freeze({__proto__:null,base32:Ci,base32upper:xi,base32pad:Ti,base32padupper:Pi,base32hex:ki,base32hexupper:Ni,base32hexpad:Ri,base32hexpadupper:Mi,base32z:Di});const ji=fi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Ui=fi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Bi=Object.freeze({__proto__:null,base36:ji,base36upper:Ui});const Fi=fi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Vi=fi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var $i=Object.freeze({__proto__:null,base58btc:Fi,base58flickr:Vi});const Hi=gi({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),zi=gi({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ki=gi({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),qi=gi({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Gi=Object.freeze({__proto__:null,base64:Hi,base64pad:zi,base64url:Ki,base64urlpad:qi});const Wi=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),Yi=Wi.reduce(((e,t,r)=>(e[r]=t,e)),[]),Qi=Wi.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Xi=pi({prefix:"🚀",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Yi[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Qi[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Zi=Object.freeze({__proto__:null,base256emoji:Xi}),Ji=128,es=-128,ts=Math.pow(2,31),rs=128,ns=127,is=Math.pow(2,7),ss=Math.pow(2,14),os=Math.pow(2,21),as=Math.pow(2,28),cs=Math.pow(2,35),ls=Math.pow(2,42),us=Math.pow(2,49),hs=Math.pow(2,56),ds=Math.pow(2,63),ps={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=ts;)r[n++]=255&t|Ji,t/=128;for(;t&es;)r[n++]=255&t|Ji,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=0,o=r=r||0,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&ns)<<s:(n&ns)*Math.pow(2,s),s+=7}while(n>=rs);return e.bytes=o-r,i},encodingLength:function(e){return e<is?1:e<ss?2:e<os?3:e<as?4:e<cs?5:e<ls?6:e<us?7:e<hs?8:e<ds?9:10}},fs=ps;const gs=(e,t,r=0)=>(fs.encode(e,t,r),t),ys=e=>fs.encodingLength(e),ms=(e,t)=>{const r=t.byteLength,n=ys(e),i=n+ys(r),s=new Uint8Array(i+r);return gs(e,s,0),gs(r,s,n),s.set(t,i),new bs(e,r,t,s)};class bs{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const vs=({name:e,code:t,encode:r})=>new ws(e,t,r);class ws{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?ms(this.code,t):t.then((e=>ms(this.code,e)))}throw Error("Unknown type, must be binary type")}}const _s=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Es=vs({name:"sha2-256",code:18,encode:_s("SHA-256")}),Ss=vs({name:"sha2-512",code:19,encode:_s("SHA-512")});Object.freeze({__proto__:null,sha256:Es,sha512:Ss});const Is=ai,As={code:0,name:"identity",encode:Is,digest:e=>ms(0,Is(e))};Object.freeze({__proto__:null,identity:As}),new TextEncoder,new TextDecoder;const Os={...mi,...vi,..._i,...Si,...Oi,...Li,...Bi,...$i,...Gi,...Zi};function Cs(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function xs(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Ts=xs("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Ps=xs("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?Cs(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),ks={utf8:Ts,"utf-8":Ts,hex:Os.base16,latin1:Ps,ascii:Ps,binary:Ps,...Os},Ns="core",Rs=`wc@2:${Ns}:`,Ms={database:":memory:"},Ds="client_ed25519_seed",Ls=he.ONE_DAY,js=he.SIX_HOURS,Us="wss://relay.walletconnect.com",Bs="wss://relay.walletconnect.org",Fs="relayer_message",Vs="relayer_message_ack",$s="relayer_connect",Hs="relayer_disconnect",zs="relayer_connection_stalled",Ks="relayer_publish",qs="payload",Gs="connect",Ws="disconnect",Ys="error",Qs=he.ONE_SECOND,Xs="subscription_created",Zs="subscription_deleted",Js="subscription_resubscribed",eo=1e3*he.FIVE_SECONDS,to={wc_pairingDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:he.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:he.ONE_DAY,prompt:!1,tag:0},res:{ttl:he.ONE_DAY,prompt:!1,tag:0}}},ro="pairing_create",no="history_created",io="history_updated",so="history_deleted",oo="expirer_created",ao="expirer_deleted",co="expirer_expired",lo="verify-api",uo="https://verify.walletconnect.com",ho="https://verify.walletconnect.org",po=[uo,ho];class fo{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=Rs,this.init=async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=dn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,Z.generateChildLogger)(t,this.name)}get context(){return(0,Z.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,zr(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Kr(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class go{constructor(e,t,r){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>(this.isInitialized(),Yt(Qt(await this.getClientSeed()).publicKey)),this.generateKeyPair=()=>{this.isInitialized();const e=function(){const e=er.Au();return{privateKey:qt(e.secretKey,wr),publicKey:qt(e.publicKey,wr)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();const t=Qt(await this.getClientSeed()),r=Sr(),n=Ls;return await async function(e,t,r,n,i=(0,he.fromMiliseconds)(Date.now())){const s={alg:"EdDSA",typ:"JWT"},o={iss:Yt(n.publicKey),sub:e,aud:t,iat:i,exp:i+r},a=Gt([Wt((c={header:s,payload:o}).header),Wt(c.payload)].join("."),"utf8");var c;return function(e){return[Wt(e.header),Wt(e.payload),(t=e.signature,qt(t,de))].join(".");var t}({header:s,payload:o,signature:le.Xx(n.secretKey,a)})}(r,e,n,t)},this.generateSharedKey=(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=er.gi(Gt(e,wr),Gt(t,wr),!0);return qt(new Zt.t(Jt.mE,r).expand(32),wr)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)},this.setSymKey=async(e,t)=>{this.isInitialized();const r=t||function(e){return qt((0,Jt.vp)(Gt(e,wr)),wr)}(e);return await this.keychain.set(r,e),r},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,r)=>{this.isInitialized();const n=Cr(r),i=H(t);if(xr(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const s=this.getSymKey(e),{type:o,senderPublicKey:a}=n;return function(e){const t=function(e){return Gt(`${e}`,vr)}(typeof e.type<"u"?e.type:0);if(1===Ar(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?Gt(e.senderPublicKey,wr):void 0,n=typeof e.iv<"u"?Gt(e.iv,wr):(0,ue.randomBytes)(12);return function(e){if(1===Ar(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return qt(Ee([e.type,e.senderPublicKey,e.iv,e.sealed]),_r)}return qt(Ee([e.type,e.iv,e.sealed]),_r)}({type:t,sealed:new Xt.OK(Gt(e.symKey,wr)).seal(n,Gt(e.message,Er)),iv:n,senderPublicKey:r})}({type:o,symKey:s,message:i,senderPublicKey:a})},this.decode=async(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=Or(e);return Cr({type:Ar(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?qt(r.senderPublicKey,wr):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(xr(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const r=function(e){const t=new Xt.OK(Gt(e.symKey,wr)),{sealed:r,iv:n}=Or(e.encoded),i=t.open(n,r);if(null===i)throw new Error("Failed to decrypt");return qt(i,Er)}({symKey:this.getSymKey(e),encoded:t});return $(r)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}},this.getPayloadType=e=>Ar(Or(e).type),this.getPayloadSenderPublicKey=e=>{const t=Or(e);return t.senderPublicKey?qt(t.senderPublicKey,wr):void 0},this.core=e,this.logger=(0,Z.generateChildLogger)(t,this.name),this.keychain=r||new fo(this.core,this.logger)}get context(){return(0,Z.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Ds)}catch{e=Sr(),await this.keychain.set(Ds,e)}return function(e,t="utf8"){const r=ks[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):Cs(globalThis.Buffer.from(e,"utf-8"))}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class yo extends re{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=Rs,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();const r=Ir(t);let n=this.messages.get(e);return typeof n>"u"&&(n={}),typeof n[r]<"u"||(n[r]=t,this.messages.set(e,n),await this.persist()),r},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>(this.isInitialized(),typeof this.get(e)[Ir(t)]<"u"),this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,Z.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,Z.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,zr(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Kr(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class mo extends ne{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new m.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,he.toMiliseconds)(he.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});try{const i=r?.ttl||js,s=Jr(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||Bn().toString(),l={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c}},u=setTimeout((()=>this.queue.set(c,l)),this.publishTimeout);try{await await Gr(this.rpcPublish(e,t,i,s,o,a,c),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(c),this.relayer.events.emit(Ks,l)}catch(e){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,null!=(n=r?.internal)&&n.throwOnFailedPublish)throw this.removeRequestFromQueue(c),e;return}finally{clearTimeout(u)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(e),e}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,Z.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,Z.getLoggerContext)(this.logger)}rpcPublish(e,t,r,n,i,s,o){var a,c,l,u;const h={method:en(n.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:i,tag:s},id:o};return yn(null==(a=h.params)?void 0:a.prompt)&&(null==(c=h.params)||delete c.prompt),yn(null==(l=h.params)?void 0:l.tag)&&(null==(u=h.params)||delete u.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:h}),this.relayer.request(h)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async e=>{const{topic:t,message:r,opts:n}=e;await this.publish(t,r,n)}))}registerEventListeners(){this.relayer.core.heartbeat.on(X.HEARTBEAT_EVENTS.pulse,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(zs);this.checkQueue()})),this.relayer.on(Vs,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}class bo{constructor(){this.map=new Map,this.set=(e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var vo=Object.defineProperty,wo=Object.defineProperties,_o=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertySymbols,So=Object.prototype.hasOwnProperty,Io=Object.prototype.propertyIsEnumerable,Ao=(e,t,r)=>t in e?vo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oo=(e,t)=>{for(var r in t||(t={}))So.call(t,r)&&Ao(e,r,t[r]);if(Eo)for(var r of Eo(t))Io.call(t,r)&&Ao(e,r,t[r]);return e},Co=(e,t)=>wo(e,_o(t));class xo extends oe{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new bo,this.events=new m.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Rs,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=Jr(t),n={topic:e,relay:r};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r);return this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}}),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>!!this.topics.includes(e)||await new Promise(((t,r)=>{const n=new he.Watch;n.start(this.pendingSubscriptionWatchLabel);const i=setInterval((()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(i),n.stop(this.pendingSubscriptionWatchLabel),t(!0)),n.elapsed(this.pendingSubscriptionWatchLabel)>=eo&&(clearInterval(i),n.stop(this.pendingSubscriptionWatchLabel),r(new Error("Subscription resolution timeout")))}),this.pollingInterval)})).catch((()=>!1)),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,Z.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,Z.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=Jr(r);await this.rpcUnsubscribe(e,t,n);const i=pn("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t){const r={method:en(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await Gr(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(zs)}return Ir(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:en(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{return await await Gr(this.relayer.request(t),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(zs)}}rpcUnsubscribe(e,t,r){const n={method:en(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,Co(Oo({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,Oo({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,Oo({},t)),this.topicMap.set(t.topic,e),this.events.emit(Xs,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=dn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Zs,Co(Oo({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){const e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(e)}}this.events.emit(Js)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=dn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const t=await this.rpcBatchSubscribe(e);fn(t)&&this.onBatchSubscribe(t.map(((t,r)=>Co(Oo({},e[r]),{id:t}))))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(X.HEARTBEAT_EVENTS.pulse,(async()=>{await this.checkPending()})),this.relayer.on($s,(async()=>{await this.onConnect()})),this.relayer.on(Hs,(()=>{this.onDisconnect()})),this.events.on(Xs,(async e=>{const t=Xs;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(Zs,(async e=>{const t=Zs;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise((e=>{const t=setInterval((()=>{this.restartInProgress||(clearInterval(t),e())}),this.pollingInterval)}))}}var To=Object.defineProperty,Po=Object.getOwnPropertySymbols,ko=Object.prototype.hasOwnProperty,No=Object.prototype.propertyIsEnumerable,Ro=(e,t,r)=>t in e?To(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;class Mo extends ie{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new m.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async e=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(e)}catch(e){throw this.logger.debug("Failed to Publish Request"),this.logger.error(e),e}},this.onPayloadHandler=e=>{this.onProviderPayload(e)},this.onConnectHandler=()=>{this.events.emit($s)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit("relayer_error",e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(qs,this.onPayloadHandler),this.provider.on(Gs,this.onConnectHandler),this.provider.on(Ws,this.onDisconnectHandler),this.provider.on(Ys,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,Z.generateChildLogger)(e.logger,this.name):(0,Z.pino)((0,Z.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new yo(this.logger,e.core),this.subscriber=new xo(this,this.logger),this.publisher=new mo(this,this.logger),this.relayUrl=e?.relayUrl||Us,this.projectId=e.projectId,this.bundleId=function(){var e;try{return Br()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Application)<"u"?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Bs}...`),await this.restartTransport(Bs)}this.initialized=!0,setTimeout((async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)}),1e4)}get context(){return(0,Z.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var r;this.isInitialized();let n,i=(null==(r=this.subscriber.topicMap.get(e))?void 0:r[0])||"";if(i)return i;const s=t=>{t.topic===e&&(this.subscriber.off(Xs,s),n())};return await Promise.all([new Promise((e=>{n=e,this.subscriber.on(Xs,s)})),new Promise((async r=>{i=await this.subscriber.subscribe(e,t),r()}))]),i}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Gr(this.provider.disconnect(),1e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise((e=>{if(!this.initialized)return e();this.subscriber.once(Js,(()=>{e()}))})),new Promise((async(e,t)=>{try{await Gr(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(e){return void t(e)}e()}))])}catch(e){this.logger.error(e);const t=e;if(!this.isConnectionStalled(t.message))throw e;this.provider.events.emit(Ws)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await xn())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some((t=>e.includes(t)))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new Jn(new ri(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a}){const c=r.split("?"),l={auth:i,ua:$r(e,t,n),projectId:s,useOnCloseEvent:o||void 0,origin:a||void 0},u=function(e,t){let r=gr.parse(e);return r=Mr(Mr({},r),t),gr.stringify(r)}(c[1]||"",l);return c[0]+"?"+u}({sdkVersion:"2.10.5",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.debug(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isSubscribed(t))return this.logger.debug(`Ignoring message for non-subscribed topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.debug(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),Yn(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:n,publishedAt:i}=t.data,s={topic:r,message:n,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(((e,t)=>{for(var r in t||(t={}))ko.call(t,r)&&Ro(e,r,t[r]);if(Po)for(var r of Po(t))No.call(t,r)&&Ro(e,r,t[r]);return e})({type:"event",event:t.id},s)),this.events.emit(t.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}else Qn(e)&&this.events.emit(Vs,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Fs,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const t=Vn(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(qs,this.onPayloadHandler),this.provider.off(Gs,this.onConnectHandler),this.provider.off(Ws,this.onDisconnectHandler),this.provider.off(Ys,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(zs,(()=>{this.restartTransport().catch((e=>this.logger.error(e)))}));let e=await xn();!function(e){switch(Vr()){case Lr.browser:!function(e){!Br()&&Fr()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case Lr.reactNative:!function(e){Br()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e);case Lr.node:}}((async t=>{this.initialized&&e!==t&&(e=t,t?await this.restartTransport().catch((e=>this.logger.error(e))):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch((e=>this.logger.error(e)))))}))}onProviderDisconnect(){this.events.emit(Hs),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout((async()=>{await this.restartTransport().catch((e=>this.logger.error(e)))}),(0,he.toMiliseconds)(Qs)))}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise((e=>{const t=setInterval((()=>{this.connected&&(clearInterval(t),e())}),this.connectionStatusPollingInterval)}));await this.restartTransport()}}}var Do=Object.defineProperty,Lo=Object.getOwnPropertySymbols,jo=Object.prototype.hasOwnProperty,Uo=Object.prototype.propertyIsEnumerable,Bo=(e,t,r)=>t in e?Do(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Fo=(e,t)=>{for(var r in t||(t={}))jo.call(t,r)&&Bo(e,r,t[r]);if(Lo)for(var r of Lo(t))Uo.call(t,r)&&Bo(e,r,t[r]);return e};class Vo extends se{constructor(e,t,r,n=Rs,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Rs,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!yn(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>ii()(t[r],e[r]))))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=Fo(Fo({},this.getData(e)),t);this.map.set(e,r),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),await this.persist())},this.logger=(0,Z.generateChildLogger)(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return(0,Z.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){const{message:t}=dn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=dn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class $o{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(b()),this.initialized=!1,this.storagePrefix=Rs,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async()=>{this.isInitialized();const e=Sr(),t=await this.core.crypto.setSymKey(e),r=Qr(he.FIVE_MINUTES),n={protocol:"irn"},i={topic:t,expiry:r,relay:n,active:!1},s=function(e){return`${e.protocol}:${e.topic}@${e.version}?`+gr.stringify(((e,t)=>{for(var r in t||(t={}))nn.call(t,r)&&on(e,r,t[r]);if(rn)for(var r of rn(t))sn.call(t,r)&&on(e,r,t[r]);return e})({symKey:e.symKey},function(e,t="-"){const r={};return Object.keys(e).forEach((n=>{const i="relay"+t+n;e[n]&&(r[i]=e[n])})),r}(e.relay)))}({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:e,relay:n});return await this.pairings.set(t,i),await this.core.relayer.subscribe(t),this.core.expirer.set(t,r),{topic:t,uri:s}},this.pair=async e=>{this.isInitialized(),this.isValidPair(e);const{topic:t,symKey:r,relay:n}=function(e){const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=gr.parse(s);return{protocol:n,topic:cn(i[0]),version:parseInt(i[1],10),symKey:o.symKey,relay:an(o)}}(e.uri);let i;if(this.pairings.keys.includes(t)&&(i=this.pairings.get(t),i.active))throw new Error(`Pairing already exists: ${t}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(t)||(await this.core.crypto.setSymKey(r,t),await this.core.relayer.subscribe(t,{relay:n}));const s=Qr(he.FIVE_MINUTES),o={topic:t,relay:n,expiry:s,active:!1};return await this.pairings.set(t,o),this.core.expirer.set(t,s),e.activatePairing&&await this.activate({topic:t}),this.events.emit(ro,o),o},this.activate=async({topic:e})=>{this.isInitialized();const t=Qr(he.THIRTY_DAYS);await this.pairings.update(e,{active:!0,expiry:t}),this.core.expirer.set(e,t)},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=qr();this.events.once(Zr("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",pn("USER_DISCONNECTED")),await this.deletePairing(t))},this.sendRequest=async(e,t,r)=>{const n=Fn(t,r),i=await this.core.crypto.encode(e,n),s=to[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id},this.sendResult=async(e,t,r)=>{const n=Vn(e,r),i=await this.core.crypto.encode(t,n),s=await this.core.history.get(t,e),o=to[s.request.method].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)},this.sendError=async(e,t,r)=>{const n=$n(e,r),i=await this.core.crypto.encode(t,n),s=await this.core.history.get(t,e),o=to[s.request.method]?to[s.request.method].res:to.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,pn("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{const e=this.pairings.getAll().filter((e=>Xr(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))},this.onRelayEventRequest=e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return this.onPairingPingRequest(t,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,r);default:return this.onUnknownRpcMethodRequest(t,r)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)},this.onPairingPingRequest=async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{const{id:r}=t;setTimeout((()=>{Xn(t)?this.events.emit(Zr("pairing_ping",r),{}):Zn(t)&&this.events.emit(Zr("pairing_ping",r),{error:t.error})}),500)},this.onPairingDeleteRequest=async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit("pairing_delete",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=pn("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(pn("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`pair() params: ${e}`);throw new Error(t)}if(!function(e){if(mn(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}(e.uri)){const{message:t}=dn("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw new Error(t)}},this.isValidPing=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!mn(e,!1)){const{message:t}=dn("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=dn("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Xr(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=dn("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}},this.core=e,this.logger=(0,Z.generateChildLogger)(t,this.name),this.pairings=new Vo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,Z.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Fs,(async e=>{const{topic:t,message:r}=e;if(!this.pairings.keys.includes(t)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;const n=await this.core.crypto.decode(t,r);try{Yn(n)?(this.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):Qn(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id))}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(co,(async e=>{const{topic:t}=Yr(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}class Ho extends te{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new m.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Rs,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:Qr(he.THIRTY_DAYS)};this.records.set(n.id,n),this.events.emit(no,n)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=Zn(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.events.emit(io,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(so,r)}}))},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,Z.generateChildLogger)(t,this.name)}get context(){return(0,Z.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:Fn(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=dn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=dn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(no,(e=>{const t=no;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(io,(e=>{const t=io;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.events.on(so,(e=>{const t=so;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()})),this.core.heartbeat.on(X.HEARTBEAT_EVENTS.pulse,(()=>{this.cleanup()}))}cleanup(){try{this.records.forEach((e=>{(0,he.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))}))}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class zo extends ae{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new m.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=Rs,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}},this.set=(e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(oo,{target:r,expiration:n})},this.get=e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(ao,{target:t,expiration:r})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,Z.generateChildLogger)(t,this.name)}get context(){return(0,Z.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return Wr("topic",e)}(e);if("number"==typeof e)return function(e){return Wr("id",e)}(e);const{message:t}=dn("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=dn("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=dn("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,he.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(co,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(X.HEARTBEAT_EVENTS.pulse,(()=>this.checkExpirations())),this.events.on(oo,(e=>{const t=oo;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(co,(e=>{const t=co;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(ao,(e=>{const t=ao;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}}}class Ko extends ce{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=lo,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async e=>{if(this.verifyDisabled||Br()||!Fr())return;const t=this.getVerifyUrl(e?.verifyUrl);this.verifyUrl!==t&&this.removeIframe(),this.verifyUrl=t;try{await this.createIframe()}catch(e){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(e)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ho;try{await this.createIframe()}catch(e){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(e),this.verifyDisabled=!0}}},this.register=async e=>{this.initialized?this.sendPost(e.attestationId):(this.addToQueue(e.attestationId),await this.init())},this.resolve=async e=>{if(this.isDevEnv)return"";const t=this.getVerifyUrl(e?.verifyUrl);let r;try{r=await this.fetchAttestation(e.attestationId,t)}catch(n){this.logger.info(`failed to resolve attestation: ${e.attestationId} from url: ${t}`),this.logger.info(n),r=await this.fetchAttestation(e.attestationId,ho)}return r},this.fetchAttestation=async(e,t)=>{this.logger.info(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(2*he.ONE_SECOND),n=await fetch(`${t}/attestation/${e}`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0},this.addToQueue=e=>{this.queue.push(e)},this.processQueue=()=>{0!==this.queue.length&&(this.queue.forEach((e=>this.sendPost(e))),this.queue=[])},this.sendPost=e=>{var t;try{if(!this.iframe)return;null==(t=this.iframe.contentWindow)||t.postMessage(e,"*"),this.logger.info(`postMessage sent: ${e} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let e;const t=r=>{"verify_ready"===r.data&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",t),e())};await Promise.race([new Promise((r=>{if(document.getElementById(lo))return r();window.addEventListener("message",t);const n=document.createElement("iframe");n.id=lo,n.src=`${this.verifyUrl}/${this.projectId}`,n.style.display="none",document.body.append(n),this.iframe=n,e=r})),new Promise(((e,r)=>setTimeout((()=>{window.removeEventListener("message",t),r("verify iframe load timeout")}),(0,he.toMiliseconds)(he.FIVE_SECONDS))))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=e=>{let t=e||uo;return po.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${uo}`),t=uo),t},this.logger=(0,Z.generateChildLogger)(t,this.name),this.verifyUrl=uo,this.abortController=new AbortController,this.isDevEnv=Ur()&&si.env.IS_VITEST}get context(){return(0,Z.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,he.toMiliseconds)(e))}}var qo=Object.defineProperty,Go=Object.getOwnPropertySymbols,Wo=Object.prototype.hasOwnProperty,Yo=Object.prototype.propertyIsEnumerable,Qo=(e,t,r)=>t in e?qo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Xo=(e,t)=>{for(var r in t||(t={}))Wo.call(t,r)&&Qo(e,r,t[r]);if(Go)for(var r of Go(t))Yo.call(t,r)&&Qo(e,r,t[r]);return e};class Zo extends ee{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=Ns,this.events=new m.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Us,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,Z.pino)((0,Z.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.logger=(0,Z.generateChildLogger)(t,this.name),this.heartbeat=new X.HeartBeat,this.crypto=new go(this,this.logger,e?.keychain),this.history=new Ho(this,this.logger),this.expirer=new zo(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new Q(Xo(Xo({},Ms),e?.storageOptions)),this.relayer=new Mo({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new $o(this,this.logger),this.verify=new Ko(this.projectId||"",this.logger)}static async init(e){const t=new Zo(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,Z.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const Jo=Zo;class ea{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class ta{constructor(e){this.client=e}}const ra="client",na=`wc@2:${ra}:`,ia=ra,sa="WALLETCONNECT_DEEPLINK_CHOICE",oa=he.SEVEN_DAYS,aa={wc_sessionPropose:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1104},res:{ttl:he.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1106},res:{ttl:he.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:he.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:he.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:he.ONE_DAY,prompt:!1,tag:1112},res:{ttl:he.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:he.THIRTY_SECONDS,prompt:!1,tag:1115}}},ca={min:he.FIVE_MINUTES,max:he.SEVEN_DAYS},la="IDLE",ua="ACTIVE",ha=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var da=Object.defineProperty,pa=Object.defineProperties,fa=Object.getOwnPropertyDescriptors,ga=Object.getOwnPropertySymbols,ya=Object.prototype.hasOwnProperty,ma=Object.prototype.propertyIsEnumerable,ba=(e,t,r)=>t in e?da(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,va=(e,t)=>{for(var r in t||(t={}))ya.call(t,r)&&ba(e,r,t[r]);if(ga)for(var r of ga(t))ma.call(t,r)&&ba(e,r,t[r]);return e},wa=(e,t)=>pa(e,fa(t));class _a extends ta{constructor(e){super(e),this.name="engine",this.events=new(b()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.requestQueue={state:la,queue:[]},this.sessionRequestQueue={state:la,queue:[]},this.requestQueueDelay=he.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(aa)}),this.initialized=!0,setTimeout((()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,he.toMiliseconds)(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();const t=wa(va({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,relays:o}=t;let a,c=r,l=!1;if(c&&(l=this.client.core.pairing.pairings.get(c).active),!c||!l){const{topic:e,uri:t}=await this.client.core.pairing.create();c=e,a=t}const u=await this.client.core.crypto.generateKeyPair(),h=va({requiredNamespaces:n,optionalNamespaces:i,relays:o??[{protocol:"irn"}],proposer:{publicKey:u,metadata:this.client.metadata}},s&&{sessionProperties:s}),{reject:d,resolve:p,done:f}=qr(he.FIVE_MINUTES,"Proposal expired");if(this.events.once(Zr("session_connect"),(async({error:e,session:t})=>{if(e)d(e);else if(t){t.self.publicKey=u;const e=wa(va({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),c&&await this.client.core.pairing.updateMetadata({topic:c,metadata:t.peer.metadata}),p(e)}})),!c){const{message:e}=dn("NO_MATCHING_KEY",`connect() pairing topic: ${c}`);throw new Error(e)}const g=await this.sendRequest({topic:c,method:"wc_sessionPropose",params:h}),y=Qr(he.FIVE_MINUTES);return await this.setProposal(g,va({id:g,expiry:y},h)),{uri:a,approval:f}},this.pair=async e=>(await this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{await this.isInitialized(),await this.isValidApprove(e);const{id:t,relayProtocol:r,namespaces:n,sessionProperties:i}=e,s=this.client.proposal.get(t);let{pairingTopic:o,proposer:a,requiredNamespaces:c,optionalNamespaces:l}=s;o=o||"",gn(c)||(c=function(e,t){const r=En(e,"approve()");if(r)throw new Error(r.message);const n={};for(const[t,r]of Object.entries(e))n[t]={methods:r.methods,events:r.events,chains:r.accounts.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))};return n}(n));const u=await this.client.core.crypto.generateKeyPair(),h=a.publicKey,d=await this.client.core.crypto.generateSharedKey(u,h);o&&t&&(await this.client.core.pairing.updateMetadata({topic:o,metadata:a.metadata}),await this.sendResult({id:t,topic:o,result:{relay:{protocol:r??"irn"},responderPublicKey:u}}),await this.client.proposal.delete(t,pn("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}));const p=va({relay:{protocol:r??"irn"},namespaces:n,requiredNamespaces:c,optionalNamespaces:l,pairingTopic:o,controller:{publicKey:u,metadata:this.client.metadata},expiry:Qr(oa)},i&&{sessionProperties:i});await this.client.core.relayer.subscribe(d),await this.sendRequest({topic:d,method:"wc_sessionSettle",params:p,throwOnFailedPublish:!0});const f=wa(va({},p),{topic:d,pairingTopic:o,acknowledged:!1,self:p.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:u});return await this.client.session.set(d,f),await this.setExpiry(d,Qr(oa)),{topic:d,acknowledged:()=>new Promise((e=>setTimeout((()=>e(this.client.session.get(d))),500)))}},this.reject=async e=>{await this.isInitialized(),await this.isValidReject(e);const{id:t,reason:r}=e,{pairingTopic:n}=this.client.proposal.get(t);n&&(await this.sendError(t,n,r),await this.client.proposal.delete(t,pn("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized(),await this.isValidUpdate(e);const{topic:t,namespaces:r}=e,n=await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r}}),{done:i,resolve:s,reject:o}=qr();return this.events.once(Zr("session_update",n),(({error:e})=>{e?o(e):s()})),await this.client.session.update(t,{namespaces:r}),{acknowledged:i}},this.extend=async e=>{await this.isInitialized(),await this.isValidExtend(e);const{topic:t}=e,r=await this.sendRequest({topic:t,method:"wc_sessionExtend",params:{}}),{done:n,resolve:i,reject:s}=qr();return this.events.once(Zr("session_extend",r),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,Qr(oa)),{acknowledged:n}},this.request=async e=>{await this.isInitialized(),await this.isValidRequest(e);const{chainId:t,request:n,topic:i,expiry:s}=e,o=Un(),{done:a,resolve:c,reject:l}=qr(s,"Request expired. Please try again.");return this.events.once(Zr("session_request",o),(({error:e,result:t})=>{e?l(e):c(t)})),await Promise.all([new Promise((async e=>{await this.sendRequest({clientRpcId:o,topic:i,method:"wc_sessionRequest",params:{request:n,chainId:t},expiry:s,throwOnFailedPublish:!0}).catch((e=>l(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:o}),e()})),new Promise((async e=>{const t=await this.client.core.storage.getItem(sa);(async function({id:e,topic:t,wcDeepLink:n}){try{if(!n)return;const i="string"==typeof n?JSON.parse(n):n;let s=i?.href;if("string"!=typeof s)return;s.endsWith("/")&&(s=s.slice(0,-1));const o=`${s}/wc?requestId=${e}&sessionTopic=${t}`,a=Vr();a===Lr.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===Lr.reactNative&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(o)}catch(e){console.error(e)}})({id:o,topic:i,wcDeepLink:t}),e()})),a()]).then((e=>e[2]))},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r;Xn(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0}):Zn(r)&&await this.sendError(n,t,r.error),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized(),await this.isValidPing(e);const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=await this.sendRequest({topic:t,method:"wc_sessionPing",params:{}}),{done:r,resolve:n,reject:i}=qr();this.events.once(Zr("session_ping",e),(({error:e})=>{e?i(e):n()})),await r()}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e;await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n}})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.client.session.keys.includes(t)?(await this.sendRequest({topic:t,method:"wc_sessionDelete",params:pn("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(t)):await this.client.core.pairing.disconnect({topic:t})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return!!Hr(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:o}=e.namespaces[t],a=ln(n),c=r[t];Hr(br(t,c),a)&&Hr(c.methods,i)&&Hr(c.events,o)||(s=!1)})),s)}(t,e)))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async(e,t)=>{const{self:r}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),this.client.session.delete(e,pn("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(r.publicKey)&&await this.client.core.crypto.deleteKeyPair(r.publicKey),this.client.core.crypto.keychain.has(e)&&await this.client.core.crypto.deleteSymKey(e),t||this.client.core.expirer.del(e),this.client.core.storage.removeItem(sa).catch((e=>this.client.logger.warn(e)))},this.deleteProposal=async(e,t)=>{await Promise.all([this.client.proposal.delete(e,pn("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=la)},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:t}),this.client.core.expirer.set(e,t)},this.setProposal=async(e,t)=>{await this.client.proposal.set(e,t),this.client.core.expirer.set(e,t.expiry)},this.setPendingSessionRequest=async e=>{const t=aa.wc_sessionRequest.req.ttl,{id:r,topic:n,params:i,verifyContext:s}=e;await this.client.pendingRequest.set(r,{id:r,topic:n,params:i,verifyContext:s}),t&&this.client.core.expirer.set(r,Qr(t))},this.sendRequest=async e=>{const{topic:t,method:r,params:n,expiry:i,relayRpcId:s,clientRpcId:o,throwOnFailedPublish:a}=e,c=Fn(r,n,o);if(Fr()&&ha.includes(r)){const e=Ir(JSON.stringify(c));this.client.core.verify.register({attestationId:e})}const l=await this.client.core.crypto.encode(t,c),u=aa[r].req;return i&&(u.ttl=i),s&&(u.id=s),this.client.core.history.set(t,c),a?(u.internal=wa(va({},u.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,l,u)):this.client.core.relayer.publish(t,l,u).catch((e=>this.client.logger.error(e))),c.id},this.sendResult=async e=>{const{id:t,topic:r,result:n,throwOnFailedPublish:i}=e,s=Vn(t,n),o=await this.client.core.crypto.encode(r,s),a=await this.client.core.history.get(r,t),c=aa[a.request.method].res;i?(c.internal=wa(va({},c.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,o,c)):this.client.core.relayer.publish(r,o,c).catch((e=>this.client.logger.error(e))),await this.client.core.history.resolve(s)},this.sendError=async(e,t,r)=>{const n=$n(e,r),i=await this.client.core.crypto.encode(t,n),s=await this.client.core.history.get(t,e),o=aa[s.request.method].res;this.client.core.relayer.publish(t,i,o),await this.client.core.history.resolve(n)},this.cleanup=async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{Xr(t.expiry)&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Xr(e.expiry)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession(e))),...t.map((e=>this.deleteProposal(e)))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state!==ua){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ua;const e=this.requestQueue.queue.shift();if(e)try{this.processRequest(e),await new Promise((e=>setTimeout(e,300)))}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=la}else this.client.logger.info("Request queue already active, skipping...")},this.processRequest=e=>{const{topic:t,payload:r}=e,n=r.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeRequest(t,r);case"wc_sessionSettle":return this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return this.onSessionExtendRequest(t,r);case"wc_sessionPing":return this.onSessionPingRequest(t,r);case"wc_sessionDelete":return this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return this.onSessionRequest(t,r);case"wc_sessionEvent":return this.onSessionEventRequest(t,r);default:return this.client.logger.info(`Unsupported request method ${n}`)}},this.onRelayEventResponse=async e=>{const{topic:t,payload:r}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:t}=e,{message:r}=dn("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)},this.onSessionProposeRequest=async(e,t)=>{const{params:r,id:n}=t;try{this.isValidConnect(va({},t.params));const i=Qr(he.FIVE_MINUTES),s=va({id:n,pairingTopic:e,expiry:i},r);await this.setProposal(n,s);const o=Ir(JSON.stringify(t)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:n,params:s,verifyContext:a})}catch(t){await this.sendError(n,e,t),this.client.logger.error(t)}},this.onSessionProposeResponse=async(e,t)=>{const{id:r}=t;if(Xn(t)){const{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});const i=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});const s=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});const o=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});const a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});const c=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:c}),await this.client.core.pairing.activate({topic:e})}else Zn(t)&&(await this.client.proposal.delete(r,pn("USER_DISCONNECTED")),this.events.emit(Zr("session_connect"),{error:t.error}))},this.onSessionSettleRequest=async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,requiredNamespaces:a,optionalNamespaces:c,sessionProperties:l,pairingTopic:u}=t.params,h=va({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u,requiredNamespaces:a,optionalNamespaces:c,controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},l&&{sessionProperties:l});await this.sendResult({id:t.id,topic:e,result:!0}),this.events.emit(Zr("session_connect"),{session:h}),this.cleanupDuplicatePairings(h)}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{const{id:r}=t;Xn(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Zr("session_approve",r),{})):Zn(t)&&(await this.client.session.delete(e,pn("USER_DISCONNECTED")),this.events.emit(Zr("session_approve",r),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=Pn.get(t);if(i&&this.isRequestOutOfSync(i,n))return void this.client.logger.info(`Discarding out of sync request - ${n}`);this.isValidUpdate(va({topic:e},r)),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0}),this.client.events.emit("session_update",{id:n,topic:e,params:r}),Pn.set(t,n)}catch(t){await this.sendError(n,e,t),this.client.logger.error(t)}},this.isRequestOutOfSync=(e,t)=>parseInt(t.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,t)=>{const{id:r}=t;Xn(t)?this.events.emit(Zr("session_update",r),{}):Zn(t)&&this.events.emit(Zr("session_update",r),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Qr(oa)),await this.sendResult({id:r,topic:e,result:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{const{id:r}=t;Xn(t)?this.events.emit(Zr("session_extend",r),{}):Zn(t)&&this.events.emit(Zr("session_extend",r),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{const{id:r}=t;setTimeout((()=>{Xn(t)?this.events.emit(Zr("session_ping",r),{}):Zn(t)&&this.events.emit(Zr("session_ping",r),{error:t.error})}),500)},this.onSessionDeleteRequest=async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise((t=>{this.client.core.relayer.once(Ks,(async()=>{t(await this.deleteSession(e))}))})),this.sendResult({id:r,topic:e,result:!0})]),this.client.events.emit("session_delete",{id:r,topic:e})}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async(e,t)=>{const{id:r,params:n}=t;try{this.isValidRequest(va({topic:e},n));const t=Ir(JSON.stringify(Fn("wc_sessionRequest",n,r))),i=this.client.session.get(e),s={id:r,topic:e,params:n,verifyContext:await this.getVerifyContext(t,i.peer.metadata)};await this.setPendingSessionRequest(s),this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue()}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionRequestResponse=(e,t)=>{const{id:r}=t;Xn(t)?this.events.emit(Zr("session_request",r),{result:t.result}):Zn(t)&&this.events.emit(Zr("session_request",r),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=Pn.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(va({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),Pn.set(t,r)}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=la,this.processSessionRequestQueue()}),(0,he.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ua)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=ua,this.client.events.emit("session_request",e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")},this.onPairingCreated=e=>{if(e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest(e.topic,Fn("wc_sessionPropose",{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer},t.id))},this.isValidConnect=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,relays:s}=e;if(yn(t)||await this.isValidPairingTopic(t),!function(e,t){let r=!1;return e?e&&fn(e)&&e.length&&e.forEach((e=>{r=Sn(e)})):r=!0,r}(s)){const{message:e}=dn("MISSING_OR_INVALID",`connect() relays: ${s}`);throw new Error(e)}!yn(r)&&0!==gn(r)&&this.validateNamespaces(r,"requiredNamespaces"),!yn(n)&&0!==gn(n)&&this.validateNamespaces(n,"optionalNamespaces"),yn(i)||this.validateSessionProps(i,"sessionProperties")},this.validateNamespaces=(e,t)=>{const r=function(e,t,r){let n=null;if(e&&gn(e)){const i=_n(e,t);i&&(n=i);const s=function(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const s=function(e,t,r){let n=null;return fn(t)&&t.length?t.forEach((e=>{n||vn(e)||(n=pn("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):vn(e)||(n=pn("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(e,br(e,i),`${t} ${r}`);s&&(n=s)})),n}(e,t,r);s&&(n=s)}else n=dn("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw new Error(r.message)},this.isValidApprove=async e=>{if(!In(e))throw new Error(dn("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i}=e;await this.isValidProposalId(t);const s=this.client.proposal.get(t),o=En(r,"approve()");if(o)throw new Error(o.message);const a=On(s.requiredNamespaces,r,"approve()");if(a)throw new Error(a.message);if(!mn(n,!0)){const{message:e}=dn("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}yn(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&bn(e.code,!1)&&e.message&&mn(e.message,!1))}(r)){const{message:e}=dn("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidSessionSettleRequest=e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!Sn(t)){const{message:e}=dn("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e,t){let r=null;return mn(e?.publicKey,!1)||(r=dn("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),r}(r);if(s)throw new Error(s.message);const o=En(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Xr(i)){const{message:e}=dn("EXPIRED","onSessionSettleRequest()");throw new Error(e)}},this.isValidUpdate=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=En(r,"update()");if(i)throw new Error(i.message);const s=On(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)},this.isValidExtend=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!An(s,n)){const{message:e}=dn("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(yn(e)||!mn(e.method,!1))}(r)){const{message:e}=dn("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!mn(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{ln(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(s,n,r.method)){const{message:e}=dn("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!function(e,t){return bn(e,!1)&&e<=t.max&&e>=t.min}(i,ca)){const{message:e}=dn("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${ca.min} and ${ca.max}`);throw new Error(e)}},this.isValidRespond=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:t,response:r}=e;if(await this.isValidSessionTopic(t),!function(e){return!(yn(e)||yn(e.result)&&yn(e.error)||!bn(e.id,!1)||!mn(e.jsonrpc,!1))}(r)){const{message:e}=dn("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidPing=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!An(i,n)){const{message:e}=dn("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(yn(e)||!mn(e.name,!1))}(r)){const{message:e}=dn("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!mn(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{ln(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(i,n,r.name)){const{message:e}=dn("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}},this.isValidDisconnect=async e=>{if(!In(e)){const{message:t}=dn("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.getVerifyContext=async(e,t)=>{const r={verified:{verifyUrl:t.verifyUrl||uo,validation:"UNKNOWN",origin:t.url||""}};try{const n=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});n&&(r.verified.origin=n.origin,r.verified.isScam=n.isScam,r.verified.validation=n.origin===new URL(t.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.info(e)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r},this.validateSessionProps=(e,t)=>{Object.values(e).forEach((e=>{if(!mn(e,!1)){const{message:r}=dn("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw new Error(r)}}))}}async isInitialized(){if(!this.initialized){const{message:e}=dn("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Fs,(async e=>{const{topic:t,message:r}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;const n=await this.client.core.crypto.decode(t,r);try{Yn(n)?(this.client.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):Qn(n)?(await this.client.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.client.core.history.delete(t,n.id)):this.onRelayEventUnknownPayload({topic:t,payload:n})}catch(e){this.client.logger.error(e)}}))}registerExpirerEvents(){this.client.core.expirer.on(co,(async e=>{const{topic:t,id:r}=Yr(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,dn("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))}))}registerPairingEvents(){this.client.core.pairing.events.on(ro,(e=>this.onPairingCreated(e)))}isValidPairingTopic(e){if(!mn(e,!1)){const{message:t}=dn("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=dn("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Xr(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=dn("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!mn(e,!1)){const{message:t}=dn("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(!this.client.session.keys.includes(e)){const{message:t}=dn("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Xr(this.client.session.get(e).expiry)){await this.deleteSession(e);const{message:t}=dn("EXPIRED",`session topic: ${e}`);throw new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(mn(e,!1)){const{message:t}=dn("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=dn("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if("number"!=typeof e){const{message:t}=dn("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=dn("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Xr(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);const{message:t}=dn("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Ea extends Vo{constructor(e,t){super(e,t,"proposal",na),this.core=e,this.logger=t}}class Sa extends Vo{constructor(e,t){super(e,t,"session",na),this.core=e,this.logger=t}}class Ia extends Vo{constructor(e,t){super(e,t,"request",na,(e=>e.id)),this.core=e,this.logger=t}}class Aa extends ea{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=ia,this.events=new m.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||ia,this.metadata=e?.metadata||(0,fr.D)()||{name:"",description:"",url:"",icons:[""]};const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,Z.pino)((0,Z.getDefaultLoggerOptions)({level:e?.logger||"error"}));this.core=e?.core||new Jo(e),this.logger=(0,Z.generateChildLogger)(t,this.name),this.session=new Sa(this.core,this.logger),this.proposal=new Ea(this.core,this.logger),this.pendingRequest=new Ia(this.core,this.logger),this.engine=new _a(this)}static async init(e){const t=new Aa(e);return await t.initialize(),t}get context(){return(0,Z.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}},35410:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.useIBCSwapAmountConfig=t.IBCSwapAmountConfig=void 0;const s=r(13268),o=r(19731),a=r(11169),c=r(2784),l=r(80075);class u extends s.AmountConfig{constructor(e,t,r,n,i,s,o,a,c){super(e,t,i,s),this.accountStore=r,this.skipQueries=n,this._outChainId=o,this._outCurrency=a,this._swapFeeBps=c,(0,l.makeObservable)(this)}get outAmount(){const e=this.getQueryIBCSwap();return e?e.getQueryRoute().outAmount:new o.CoinPretty(this.outCurrency,"0")}get outChainId(){return this._outChainId}get outCurrency(){return this._outCurrency}get swapPriceImpact(){const e=this.getQueryIBCSwap();if(e)return e.getQueryRoute().swapPriceImpact}setOutChainId(e){this._outChainId=e}setOutCurrency(e){this._outCurrency=e}setSwapFeeBps(e){this._swapFeeBps=e}get swapFeeBps(){return this._swapFeeBps}get swapFee(){const e=this.getQueryIBCSwap();return e?e.getQueryRoute().swapFee:[new o.CoinPretty(this.outCurrency,"0")]}fetch(){return i(this,void 0,void 0,(function*(){const e=this.getQueryIBCSwap();e&&(yield e.getQueryRoute().fetch())}))}get isFetching(){const e=this.getQueryIBCSwap();return!!e&&e.getQueryRoute().isFetching}get type(){const e=this.getQueryIBCSwap();if(!e)return"not-ready";const t=e.getQueryRoute().response;return t?!1===t.data.does_swap?"transfer":"swap":"not-ready"}getTx(e,t,r){var n;return i(this,void 0,void 0,(function*(){const i=this.getQueryIBCSwap();if(!i)throw new Error("Query IBC Swap is not initialized");yield i.getQueryRoute().waitFreshResponse();const s=i.getQueryRoute().response;if(!s)throw new Error("Failed to fetch route");const c={},l=this.accountStore.getAccount(this.chainId),u=s.data.chain_ids;l.walletStatus===a.WalletStatus.NotInit&&(yield l.init());for(const e of u){const t=this.accountStore.getAccount(e);t.walletStatus===a.WalletStatus.NotInit&&(yield t.init())}if(!l.bech32Address)throw new Error("Source account is not set");for(const e of u)if(!this.accountStore.getAccount(e).bech32Address)throw new Error("Destination account is not set");c[this.chainId]=l.bech32Address;for(const e of u){const t=this.accountStore.getAccount(e);c[e]=t.bech32Address}for(const e of null!==(n=s.data.swap_venues)&&void 0!==n?n:[s.data.swap_venue])if(e){const t=this.accountStore.getAccount(e.chain_id);if(t.walletStatus===a.WalletStatus.NotInit&&(yield t.init()),!t.bech32Address){const r=this.chainGetter.hasChain(e.chain_id)&&this.chainGetter.getChain(e.chain_id);if(t.isNanoLedger&&r&&(60===r.bip44.coinType||r.features.includes("eth-address-gen")||r.features.includes("eth-key-sign")||null!=r.evm))throw new Error("Please connect Ethereum app on Ledger with Keplr to get the address");throw new Error("Swap account is not set")}c[e.chain_id]=t.bech32Address}const h=i.getQueryMsgsDirect(c,e,t);if(yield h.waitFreshResponse(),h.error)throw new Error(h.error.message);const d=this.getTxIfReady(e,t);if(!d)throw new Error("Tx is not ready");if(r){const n=i.getQueryMsgsDirect(c,e,t);if(!n.response)throw new Error("Can't happen: queryMsgsDirect is not ready");const s=new o.Int(n.response.data.route.amount_out);if(s.lt(r)&&s.sub(r).abs().toDec().quo(r.toDec()).gte(new o.Dec(.01)))throw new Error("Price change has been detected while building your transaction. Please try again")}return d}))}getTxIfReady(e,t){var r;if(!this.currency)return;if(1!==this.amount.length)return;if(this.amount[0].toDec().lte(new o.Dec(0)))return;const n=this.getQueryIBCSwap();if(!n)return;const i=n.getQueryRoute().response;if(!i)return;const s={},c=this.accountStore.getAccount(this.chainId),l=i.data.chain_ids;c.walletStatus===a.WalletStatus.NotInit&&c.init();for(const e of l){const t=this.accountStore.getAccount(e);t.walletStatus===a.WalletStatus.NotInit&&t.init()}if(!c.bech32Address)return;for(const e of l)if(!this.accountStore.getAccount(e).bech32Address)return;s[this.chainId]=c.bech32Address;for(const e of l){const t=this.accountStore.getAccount(e);s[e]=t.bech32Address}for(const e of null!==(r=i.data.swap_venues)&&void 0!==r?r:[i.data.swap_venue])if(e){const t=this.accountStore.getAccount(e.chain_id);if(t.walletStatus===a.WalletStatus.NotInit&&t.init(),!t.bech32Address)return;s[e.chain_id]=t.bech32Address}const u=n.getQueryMsgsDirect(s,e,t).msg;if(u){if("MsgTransfer"===u.type){const e=c.cosmos.makeIBCTransferTx({portId:u.sourcePort,channelId:u.sourceChannel,counterpartyChainId:u.counterpartyChainId},this.amount[0].toDec().toString(),this.amount[0].currency,u.receiver,u.memo);return e.ui.overrideType("ibc-swap"),e}if("MsgExecuteContract"===u.type){const e=c.cosmwasm.makeExecuteContractTx("unknown",u.contract,u.msg,u.funds.map((e=>e.toCoin())));return e.ui.overrideType("ibc-swap"),e}}}createSwapRouteKeyFromRouteResponse(e){let t="";for(const r of e.operations)if("swap"in r)for(const e of r.swap.swap_in.swap_operations)t+=`/${e.pool}/${e.denom_in}/${e.denom_out}`;return t}createSwapRouteKeyFromMsgsDirectResponse(e){let t="";for(const r of e.msgs){if("/ibc.applications.transfer.v1.MsgTransfer"===r.multi_chain_msg.msg_type_url){const e=JSON.parse(r.multi_chain_msg.msg).memo;if(e){const r=JSON.parse(e),n=[];r.wasm&&n.push(r.wasm);let i=r.forward;if(i)for(;i;){if(i.memo){const e=JSON.parse(i.memo);e.wasm&&n.push(e.wasm)}if(i.wasm&&n.push(i.wasm),!i.next)break;{const e="string"==typeof i.next?JSON.parse(i.next):i.next;i=e.forward?e.forward:e}}for(const e of n)for(const r of e.msg.swap_and_action.user_swap.swap_exact_asset_in.operations)t+=`/${r.pool}/${r.denom_in}/${r.denom_out}`}}if("/cosmwasm.wasm.v1.MsgExecuteContract"===r.multi_chain_msg.msg_type_url){const e=JSON.parse(r.multi_chain_msg.msg);for(const r of e.msg.swap_and_action.user_swap.swap_exact_asset_in.operations)t+=`/${r.pool}/${r.denom_in}/${r.denom_out}`}}return t}get uiProperties(){var e;const t=super.uiProperties;if(t.error||t.loadingState)return t;const r=this.getQueryIBCSwap();if(!r)return Object.assign(Object.assign({},t),{error:new Error("Query IBC Swap is not initialized")});if(r.getQueryRoute().isFetching)return Object.assign(Object.assign({},t),{loadingState:"loading-block"});const n=r.getQueryRoute().error;return n?Object.assign(Object.assign({},t),{error:new Error(n.message)}):this.amount.length>0&&this.amount[0].currency.coinMinimalDenom===this.outAmount.currency.coinMinimalDenom&&this.chainGetter.getChain(this.chainId).chainIdentifier===this.chainGetter.getChain(this.outChainId).chainIdentifier?Object.assign(Object.assign({},t),{error:new Error("In and out currency is same")}):this.amount.length>0&&!this.skipQueries.queryIBCSwap.isSwappableCurrency(this.chainId,this.amount[0].currency)?Object.assign(Object.assign({},t),{error:new Error("The currency you are swapping from is currently not supported")}):this.skipQueries.queryIBCSwap.isSwapDestinationOrAlternatives(this.outChainId,this.outAmount.currency)?1!==(null===(e=r.getQueryRoute().response)||void 0===e?void 0:e.data.txs_required)?Object.assign(Object.assign({},t),{error:new Error("Swap can't be executed with ibc pfm")}):Object.assign({},t):Object.assign(Object.assign({},t),{error:new Error("The currency you are swapping to is currently not supported")})}getQueryIBCSwap(){if(0!==this.amount.length)return this.skipQueries.queryIBCSwap.getIBCSwap(this.chainId,this.amount[0],this.outChainId,this.outCurrency.coinMinimalDenom,this.swapFeeBps)}}n([l.observable],u.prototype,"_outChainId",void 0),n([l.observable.ref],u.prototype,"_outCurrency",void 0),n([l.observable],u.prototype,"_swapFeeBps",void 0),n([l.action],u.prototype,"setOutChainId",null),n([l.action],u.prototype,"setOutCurrency",null),n([l.action],u.prototype,"setSwapFeeBps",null),n([l.override],u.prototype,"uiProperties",null),t.IBCSwapAmountConfig=u,t.useIBCSwapAmountConfig=(e,t,r,n,i,s,o,a,l)=>{const[h]=(0,c.useState)((()=>new u(e,t,r,n,i,s,o,a,l)));return h.setChain(i),h.setOutChainId(o),h.setOutCurrency(a),h.setSwapFeeBps(l),h}},79196:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(84014),t),i(r(35410),t)},84014:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useIBCSwapConfig=void 0;const n=r(13268),i=r(35410);t.useIBCSwapConfig=(e,t,r,s,o,a,c,l,u,h)=>{const d=(0,n.useSenderConfig)(e,o,a),p=(0,i.useIBCSwapAmountConfig)(e,t,r,s,o,d,l,u,h),f=(0,n.useMemoConfig)(e,o),g=(0,n.useGasConfig)(e,o,c),y=(0,n.useFeeConfig)(e,t,o,d,p,g);return p.setFeeConfig(y),{amountConfig:p,memoConfig:f,gasConfig:g,feeConfig:y,senderConfig:d}}},39523:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(79196),t)},75960:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TransactionTypes:()=>f,accessListify:()=>S,computeAddress:()=>v,parse:()=>T,recoverAddress:()=>w,serialize:()=>C});var n=r(63523),i=r(10528),s=r(97750),o=r(90711),a=r(59256),c=r(22951),l=r(48669),u=r(17459),h=r(78011),d=r(23006);const p=new h.Yd(d.i);var f;function g(e){return"0x"===e?null:(0,n.getAddress)(e)}function y(e){return"0x"===e?o._Y:i.O$.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(f||(f={}));const m=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],b={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function v(e){const t=(0,u.VW)(e);return(0,n.getAddress)((0,s.hexDataSlice)((0,a.w)((0,s.hexDataSlice)(t,1)),12))}function w(e,t){return v((0,u.LO)((0,s.arrayify)(e),t))}function _(e,t){const r=(0,s.stripZeros)(i.O$.from(e).toHexString());return r.length>32&&p.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function E(e,t){return{address:(0,n.getAddress)(e),storageKeys:(t||[]).map(((t,r)=>(32!==(0,s.hexDataLength)(t)&&p.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase())))}}function S(e){if(Array.isArray(e))return e.map(((e,t)=>Array.isArray(e)?(e.length>2&&p.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),E(e[0],e[1])):E(e.address,e.storageKeys)));const t=Object.keys(e).map((t=>{const r=e[t].reduce(((e,t)=>(e[t]=!0,e)),{});return E(t,Object.keys(r).sort())}));return t.sort(((e,t)=>e.address.localeCompare(t.address))),t}function I(e){return S(e).map((e=>[e.address,e.storageKeys]))}function A(e,t){if(null!=e.gasPrice){const t=i.O$.from(e.gasPrice),r=i.O$.from(e.maxFeePerGas||0);t.eq(r)||p.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:t,maxFeePerGas:r})}const r=[_(e.chainId||0,"chainId"),_(e.nonce||0,"nonce"),_(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),_(e.maxFeePerGas||0,"maxFeePerGas"),_(e.gasLimit||0,"gasLimit"),null!=e.to?(0,n.getAddress)(e.to):"0x",_(e.value||0,"value"),e.data||"0x",I(e.accessList||[])];if(t){const e=(0,s.splitSignature)(t);r.push(_(e.recoveryParam,"recoveryParam")),r.push((0,s.stripZeros)(e.r)),r.push((0,s.stripZeros)(e.s))}return(0,s.hexConcat)(["0x02",l.c(r)])}function O(e,t){const r=[_(e.chainId||0,"chainId"),_(e.nonce||0,"nonce"),_(e.gasPrice||0,"gasPrice"),_(e.gasLimit||0,"gasLimit"),null!=e.to?(0,n.getAddress)(e.to):"0x",_(e.value||0,"value"),e.data||"0x",I(e.accessList||[])];if(t){const e=(0,s.splitSignature)(t);r.push(_(e.recoveryParam,"recoveryParam")),r.push((0,s.stripZeros)(e.r)),r.push((0,s.stripZeros)(e.s))}return(0,s.hexConcat)(["0x01",l.c(r)])}function C(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&p.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){(0,c.uj)(e,b);const r=[];m.forEach((function(t){let n=e[t.name]||[];const i={};t.numeric&&(i.hexPad="left"),n=(0,s.arrayify)((0,s.hexlify)(n,i)),t.length&&n.length!==t.length&&n.length>0&&p.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n),t.maxLength&&(n=(0,s.stripZeros)(n),n.length>t.maxLength&&p.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,n)),r.push((0,s.hexlify)(n))}));let n=0;if(null!=e.chainId?(n=e.chainId,"number"!=typeof n&&p.throwArgumentError("invalid transaction.chainId","transaction",e)):t&&!(0,s.isBytesLike)(t)&&t.v>28&&(n=Math.floor((t.v-35)/2)),0!==n&&(r.push((0,s.hexlify)(n)),r.push("0x"),r.push("0x")),!t)return l.c(r);const i=(0,s.splitSignature)(t);let o=27+i.recoveryParam;return 0!==n?(r.pop(),r.pop(),r.pop(),o+=2*n+8,i.v>28&&i.v!==o&&p.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):i.v!==o&&p.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push((0,s.hexlify)(o)),r.push((0,s.stripZeros)((0,s.arrayify)(i.r))),r.push((0,s.stripZeros)((0,s.arrayify)(i.s))),l.c(r)}(e,t);switch(e.type){case 1:return O(e,t);case 2:return A(e,t)}return p.throwError(`unsupported transaction type: ${e.type}`,h.Yd.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function x(e,t,r){try{const r=y(t[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");e.v=r}catch(e){p.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=(0,s.hexZeroPad)(t[1],32),e.s=(0,s.hexZeroPad)(t[2],32);try{const t=(0,a.w)(r(e));e.from=w(t,{r:e.r,s:e.s,recoveryParam:e.v})}catch(e){}}function T(e){const t=(0,s.arrayify)(e);if(t[0]>127)return function(e){const t=l.J(e);9!==t.length&&6!==t.length&&p.throwArgumentError("invalid raw transaction","rawTransaction",e);const r={nonce:y(t[0]).toNumber(),gasPrice:y(t[1]),gasLimit:y(t[2]),to:g(t[3]),value:y(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=i.O$.from(t[6]).toNumber()}catch(e){return r}if(r.r=(0,s.hexZeroPad)(t[7],32),r.s=(0,s.hexZeroPad)(t[8],32),i.O$.from(r.r).isZero()&&i.O$.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=t.slice(0,6);0!==r.chainId&&(i.push((0,s.hexlify)(r.chainId)),i.push("0x"),i.push("0x"),n-=2*r.chainId+8);const o=(0,a.w)(l.c(i));try{r.from=w(o,{r:(0,s.hexlify)(r.r),s:(0,s.hexlify)(r.s),recoveryParam:n})}catch(e){}r.hash=(0,a.w)(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){const t=l.J(e.slice(1));8!==t.length&&11!==t.length&&p.throwArgumentError("invalid component count for transaction type: 1","payload",(0,s.hexlify)(e));const r={type:1,chainId:y(t[0]).toNumber(),nonce:y(t[1]).toNumber(),gasPrice:y(t[2]),gasLimit:y(t[3]),to:g(t[4]),value:y(t[5]),data:t[6],accessList:S(t[7])};return 8===t.length||(r.hash=(0,a.w)(e),x(r,t.slice(8),O)),r}(t);case 2:return function(e){const t=l.J(e.slice(1));9!==t.length&&12!==t.length&&p.throwArgumentError("invalid component count for transaction type: 2","payload",(0,s.hexlify)(e));const r=y(t[2]),n=y(t[3]),i={type:2,chainId:y(t[0]).toNumber(),nonce:y(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:y(t[4]),to:g(t[5]),value:y(t[6]),data:t[7],accessList:S(t[8])};return 9===t.length||(i.hash=(0,a.w)(e),x(i,t.slice(9),A)),i}(t)}return p.throwError(`unsupported transaction type: ${t[0]}`,h.Yd.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}},52514:(e,t,r)=>{"use strict";var n,i=r(48834).Buffer,s=r(2784),o=(n=s)&&"object"==typeof n&&"default"in n?n.default:n,a=r(33440),c=r(29782),l=r(20028),u=r(94183),h=r(90538);const d=({cbor:e,type:t,capacity:r=400,interval:n=100})=>{const o=s.useMemo((()=>new a.UREncoder(new a.UR(i.from(e,"hex"),t),r)),[e,t]),[c,l]=s.useState(o.nextPart().toUpperCase());return s.useEffect((()=>{const e=setInterval((()=>{l(o.nextPart().toUpperCase())}),n);return()=>{clearInterval(e)}}),[o]),c},p=({value:e,size:t=180})=>o.createElement("div",{style:{width:t,height:t,backgroundColor:"white",display:"flex",justifyContent:"center",alignItems:"center"}},o.createElement(c.QRCodeCanvas,{value:e,size:t-10})),f="qr-scanner-video",g=({handleScan:e,handleError:t,blur:r=!0,videoLoaded:n,width:i,height:a})=>{const[c,h]=s.useState(!1),d=s.useMemo((()=>{const e=new Map;return e.set(l.DecodeHintType.POSSIBLE_FORMATS,[l.BarcodeFormat.QR_CODE]),new u.BrowserQRCodeReader(e,{delayBetweenScanAttempts:50,delayBetweenScanSuccess:100})}),[]);return s.useEffect((()=>{const r=document.getElementById(f),i=()=>{h(!0),n&&n(!0)};r.addEventListener("canplay",i);const s=((null==r?void 0:r.pendingScanRequest)??Promise.resolve(void 0)).then((()=>d.decodeFromVideoDevice(void 0,r,((r,n)=>{r&&e(r.getText()),n&&t(n.message)})))).catch((e=>{console.error(e)}));return r&&(r.pendingScanRequest=s),()=>{r.removeEventListener("canplay",i),s.then((e=>{e&&e.stop()}))}}),[]),o.createElement("video",{id:f,"data-testid":f,style:{display:c?"block":"none",width:i||"auto",height:a||"auto",objectFit:"cover",transform:"rotateY(180deg)",filter:r?"blur(4px)":"none"}})};var y,m,b,v;(y=t.aL||(t.aL={})).UNEXPECTED_QRCODE="UNEXPECTED_QRCODE",y.INVALID_QR_CODE="INVALID_QR_CODE",function(e){e.ACCESSING_CAMERA="ACCESSING_CAMERA",e.NO_WEBCAM="NO_WEBCAM_FOUND",e.PERMISSION_NEEDED="NO_WEBCAM_ACCESS",e.READY="READY",e.UNKNOWN_ERROR="UNKNOWN_CAMERA_ERROR"}(m||(m={})),(b=t.Purpose||(t.Purpose={})).SYNC="sync",b.SIGN="sign",b.SOL_SYNC="sol-sync",b.SOL_SIGN="sol-sign",b.NEAR_SYNC="near-sync",b.NEAR_SIGN="near-sign",b.COSMOS_SYNC="cosmos-sync",b.COSMOS_SIGN="cosmos-sign",(v=t.URType||(t.URType={})).CRYPTO_HDKEY="crypto-hdkey",v.CRYPTO_ACCOUNT="crypto-account",v.CRYPTO_MULTI_ACCOUNTS="crypto-multi-accounts",v.ETH_SIGNATURE="eth-signature",v.SOL_SIGNATURE="sol-signature",v.NEAR_SIGNATURE="near-signature",v.COSMOS_SIGNATURE="cosmos-signature",v.EVM_SIGNATURE="evm-signature";const w={[t.Purpose.SYNC]:[t.URType.CRYPTO_HDKEY,t.URType.CRYPTO_ACCOUNT],[t.Purpose.SIGN]:[t.URType.ETH_SIGNATURE],[t.Purpose.SOL_SYNC]:[t.URType.CRYPTO_MULTI_ACCOUNTS],[t.Purpose.SOL_SIGN]:[t.URType.SOL_SIGNATURE],[t.Purpose.NEAR_SYNC]:[t.URType.CRYPTO_MULTI_ACCOUNTS],[t.Purpose.NEAR_SIGN]:[t.URType.NEAR_SIGNATURE],[t.Purpose.COSMOS_SYNC]:[t.URType.CRYPTO_MULTI_ACCOUNTS],[t.Purpose.COSMOS_SIGN]:[t.URType.COSMOS_SIGNATURE]},_=({purpose:e,urTypes:r=[],handleScan:n,handleError:i,onProgress:s})=>{let o=new h.URRegistryDecoder;return{handleScanSuccess:a=>{try{if(o.receivePart(a),!o.isComplete())return void(s&&s(Math.trunc(100*o.estimatedPercentComplete())));if(o.isError()&&i(t.aL.INVALID_QR_CODE),o.isSuccess()){const a=o.resultUR(),c=[];if(e&&w[e]&&c.push(...w[e]),c.push(...r),c.includes(a.type)){s&&s(100);try{n({type:a.type,cbor:a.cbor.toString("hex")})}catch(e){i("FAILED_TO_HANDLE_QR_CODE")}}else i(t.aL.UNEXPECTED_QRCODE);o=new h.URRegistryDecoder}}catch(e){i(t.aL.INVALID_QR_CODE),o=new h.URRegistryDecoder}},handleScanFailure:e=>{"Dimensions could be not found."!==e&&i&&e&&i(e)}}},E=async e=>{const t=((e="popup.html")=>new URL(window.location.href).pathname==="/"+e)(e),r=(()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")||"brave"in e})(),n=(await window.navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind)),i=n.length>0,s=n.some((e=>e.label&&e.label.length>0));if(i){let e=!0;return(r&&t||t&&!s)&&(e=!1),{permissions:s,environmentReady:e}}throw new Error(m.NO_WEBCAM)};t.AnimatedQRCode=({cbor:e,type:t,options:r})=>{const n=d({cbor:e,type:t,capacity:null==r?void 0:r.capacity,interval:null==r?void 0:r.interval});return o.createElement(p,{value:n,size:null==r?void 0:r.size})},t.useAnimatedQRScanner=e=>{const[t,r]=s.useState(!1),[n,i]=s.useState(!0),a=s.useRef(t),{cameraStatus:c}=(e=>{const[t,r]=s.useState(m.ACCESSING_CAMERA),n=s.useRef(!1);let i=null;const o=async()=>{try{const{permissions:t}=await E(e);if(t){if(await new Promise((e=>setTimeout(e,2e3))),!n.current)return;r(m.READY)}else n.current&&(i=setTimeout(o,1e3),r(m.PERMISSION_NEEDED))}catch(e){n.current&&r(m.UNKNOWN_ERROR)}},a=()=>{try{o()}catch(e){if(!n.current)return;r("NotAllowedError"===(null==e?void 0:e.name)?m.PERMISSION_NEEDED:m.UNKNOWN_ERROR)}};return s.useEffect((()=>(n.current=!0,(async()=>{try{const{environmentReady:t}=await E(e);r(t?m.READY:m.PERMISSION_NEEDED)}catch(e){n.current&&r(m.UNKNOWN_ERROR)}a()})(),()=>{n.current=!1,clearTimeout(i)})),[]),s.useEffect((()=>{t===m.READY?a():t===m.PERMISSION_NEEDED&&o()}),[t]),{cameraStatus:t}})(),l=s.useMemo((()=>({purpose:t,urTypes:n,handleScan:s,handleError:c,videoLoaded:l,onProgress:u,options:h,...d})=>{const{handleScanSuccess:p,handleScanFailure:f}=_({purpose:t,urTypes:n,handleScan:e=>{a.current||(r(!0),s(e))},handleError:e=>{a.current||(r(!0),c(e))},onProgress:u});return o.createElement((null==e?void 0:e.Scanner)??g,Object.assign({handleScan:p,handleError:f,videoLoaded:e=>{i(e),"function"==typeof l&&l(e)}},null==e?void 0:e.scannerProps,h,d))}),[]);return s.useEffect((()=>{a.current=t}),[t]),s.useEffect((()=>{c!==m.PERMISSION_NEEDED&&c!==m.NO_WEBCAM||i(!1)}),[c]),{isDone:t,hasPermission:n,AnimatedQRScanner:l,setIsDone:r}}},13979:(e,t,r)=>{"use strict";e.exports=r(52514)},85997:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.KeystoneSDK=t.DerivationAlgorithm=t.Curve=void 0;const a=s(r(26565));t.utils=a;const c=r(68930);Object.defineProperty(t,"KeystoneSDK",{enumerable:!0,get:function(){return c.KeystoneSDK}}),o(r(33440),t),o(r(29632),t),o(r(37401),t);var l=r(67100);Object.defineProperty(t,"Curve",{enumerable:!0,get:function(){return l.Curve}}),Object.defineProperty(t,"DerivationAlgorithm",{enumerable:!0,get:function(){return l.DerivationAlgorithm}}),t.default=c.KeystoneSDK},28646:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(97790),i=r(96067),s=r(48246),o=r(91288),a=r(10423),c=r(48834).Buffer,l=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};const u=[{vendorId:s.An}],h=()=>{const{hid:e}=navigator;if(!e)throw new a.PS("navigator.hid is not supported","HIDNotSupported");return e};function d(){return l(this,void 0,void 0,(function*(){const e=yield h().requestDevice({filters:u});return Array.isArray(e)?e:[e]}))}function p(){return l(this,void 0,void 0,(function*(){return(yield h().getDevices()).filter((e=>e.vendorId===s.An))}))}class f extends n.ZP{constructor(e){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this.inputs=[],this.read=()=>this.inputs.length?Promise.resolve(this.inputs.shift()):new Promise((e=>{this.inputCallback=e})),this.onInputReport=e=>{const t=c.from(e.data.buffer);this.inputCallback?(this.inputCallback(t),this.inputCallback=null):this.inputs.push(t)},this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.exchange=e=>l(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>l(this,void 0,void 0,(function*(){const{channel:t,packetSize:r}=this;(0,o.cM)("apdu","=> "+e.toString("hex"));const n=(0,i.Z)(t,r),s=n.makeBlocks(e);for(let e=0;e<s.length;e++)yield this.device.sendReport(0,s[e]);let a,c;for(;!(a=n.getReducedResult(c));){const e=yield this.read();c=n.reduceResponse(c,e)}return(0,o.cM)("apdu","<= "+a.toString("hex")),a})))).catch((e=>{if(e&&e.message&&e.message.includes("write"))throw this._emitDisconnect(e),new a.vs(e.message);throw e}))})),this.device=e,this.deviceModel="number"==typeof e.productId?(0,s.Ht)(e.productId):void 0,e.addEventListener("inputreport",this.onInputReport)}static request(){return l(this,void 0,void 0,(function*(){const[e]=yield d();return f.open(e)}))}static openConnected(){return l(this,void 0,void 0,(function*(){const e=yield p();return 0===e.length?null:f.open(e[0])}))}static open(e){return l(this,void 0,void 0,(function*(){yield e.open();const t=new f(e),r=n=>{e===n.device&&(h().removeEventListener("disconnect",r),t._emitDisconnect(new a.qX))};return h().addEventListener("disconnect",r),t}))}close(){return l(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,this.device.removeEventListener("inputreport",this.onInputReport),yield this.device.close()}))}setScrambleKey(){}}f.isSupported=()=>Promise.resolve(!(!window.navigator||!window.navigator.hid)),f.list=p,f.listen=e=>{let t=!1;return function(){return l(this,void 0,void 0,(function*(){const e=yield p();return e.length>0?e[0]:(yield d())[0]}))}().then((r=>{if(r){if(!t){const t="number"==typeof r.productId?(0,s.Ht)(r.productId):void 0;e.next({type:"add",descriptor:r,deviceModel:t}),e.complete()}}else e.error(new a.FB("Access denied to use Ledger device"))}),(t=>{e.error(new a.FB(t.message))})),{unsubscribe:function(){t=!0}}};const g=f},19981:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(97790),i=r(9064),s=r(21036),o=r(91288),a=r(10423),c=r(62607),l=r(48834).Buffer,u=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};class h extends n.ZP{constructor(e,t){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.device=e,this.interfaceNumber=t,this.deviceModel=(0,s.Ht)(e.productId)}static request(){return u(this,void 0,void 0,(function*(){const e=yield(0,c.PC)();return h.open(e)}))}static openConnected(){return u(this,void 0,void 0,(function*(){const e=yield(0,c.yz)();return 0===e.length?null:h.open(e[0])}))}static open(e){return u(this,void 0,void 0,(function*(){yield e.open(),null===e.configuration&&(yield e.selectConfiguration(1)),yield p(e);const t=e.configurations[0].interfaces.find((({alternates:e})=>e.some((e=>255===e.interfaceClass))));if(!t)throw new a.$u("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");const r=t.interfaceNumber;try{yield e.claimInterface(r)}catch(t){throw yield e.close(),new a.$u(t.message)}const n=new h(e,r),i=t=>{e===t.device&&(navigator.usb.removeEventListener("disconnect",i),n._emitDisconnect(new a.qX))};return navigator.usb.addEventListener("disconnect",i),n}))}close(){return u(this,void 0,void 0,(function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield p(this.device),yield this.device.close()}))}exchange(e){return u(this,void 0,void 0,(function*(){return yield this.exchangeAtomicImpl((()=>u(this,void 0,void 0,(function*(){const{channel:t,packetSize:r}=this;(0,o.cM)("apdu","=> "+e.toString("hex"));const n=(0,i.Z)(t,r),s=n.makeBlocks(e);for(let e=0;e<s.length;e++)yield this.device.transferOut(3,s[e]);let a,c;for(;!(a=n.getReducedResult(c));){const e=yield this.device.transferIn(3,r),t=l.from(e.data.buffer);c=n.reduceResponse(c,t)}return(0,o.cM)("apdu","<= "+a.toString("hex")),a})))).catch((e=>{if(e&&e.message&&e.message.includes("disconnected"))throw this._emitDisconnect(e),new a.vs(e.message);throw e}))}))}setScrambleKey(){}}h.isSupported=c.Gb,h.list=c.yz,h.listen=e=>{let t=!1;return(0,c.DC)().then((r=>{if(!t){const t=(0,s.Ht)(r.productId);e.next({type:"add",descriptor:r,deviceModel:t}),e.complete()}}),(t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new a.um(t.message)):e.error(new a.FB(t.message))})),{unsubscribe:function(){t=!0}}};const d=h;function p(e){return u(this,void 0,void 0,(function*(){try{yield e.reset()}catch(e){console.warn(e)}}))}},39557:(e,t,r)=>{"use strict";r.d(t,{Globals:()=>n.OH,SpringValue:()=>j,easings:()=>n.Z5,to:()=>ee,useSpringValue:()=>W});var n=r(95488),i=r(2784),s=r(49461);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e,...t){return n.is.fun(e)?e(...t):e}const c=(e,t)=>!0===e||!!(t&&e&&(n.is.fun(e)?e(t):(0,n.qo)(e).includes(t))),l=(e,t)=>n.is.obj(e)?t&&e[t]:e,u=e=>e,h=(e,t=u)=>{let r=d;e.default&&!0!==e.default&&(e=e.default,r=Object.keys(e));const i={};for(const s of r){const r=t(e[s],s);n.is.und(r)||(i[s]=r)}return i},d=["config","onProps","onStart","onChange","onPause","onResume","onRest"],p={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function f(e){const t=function(e){const t={};let r=0;if((0,n.rU)(e,((e,n)=>{p[n]||(t[n]=e,r++)})),r)return t}(e);if(t){const r={to:t};return(0,n.rU)(e,((e,n)=>n in t||(r[n]=e))),r}return o({},e)}function g(e){return e=(0,n.je)(e),n.is.arr(e)?e.map(g):(0,n.Df)(e)?n.OH.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function y(e){return n.is.fun(e)||n.is.arr(e)&&n.is.obj(e[0])}const m=o({},{tension:170,friction:26},{mass:1,damping:1,easing:n.Z5.linear,clamp:!1});class b{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,m)}}function v(e,t){if(n.is.und(t.decay)){const r=!n.is.und(t.tension)||!n.is.und(t.friction);!r&&n.is.und(t.frequency)&&n.is.und(t.damping)&&n.is.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}const w=[];class _{constructor(){this.changed=!1,this.values=w,this.toValues=null,this.fromValues=w,this.to=void 0,this.from=void 0,this.config=new b,this.immediate=!1}}const E=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),S=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),I=e=>({value:e,cancelled:!0,finished:!1});function A(e,t){(0,n.yl)(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}class O extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class C extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const x=e=>e instanceof P;let T=1;class P extends n.B0{constructor(...e){super(...e),this.id=T++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=(0,s.ys)(this);return e&&e.getValue()}to(...e){return n.OH.to(this,e)}interpolate(...e){return(0,n.LW)(),n.OH.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){(0,n.k0)(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||n.fT.sort(this),(0,n.k0)(this,{type:"priority",parent:this,priority:e})}}const k=Symbol.for("SpringPhase"),N=e=>(1&e[k])>0,R=e=>(2&e[k])>0,M=e=>(4&e[k])>0,D=(e,t)=>t?e[k]|=3:e[k]&=-3,L=(e,t)=>t?e[k]|=4:e[k]&=-5;class j extends P{constructor(e,t){if(super(),this.key=void 0,this.animation=new _,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!n.is.und(e)||!n.is.und(t)){const r=n.is.obj(e)?o({},e):o({},t,{from:e});n.is.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(R(this)||this._state.asyncTo)||M(this)}get goal(){return(0,n.je)(this.animation.to)}get velocity(){const e=(0,s.ys)(this);return e instanceof s.iG?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return N(this)}get isAnimating(){return R(this)}get isPaused(){return M(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const i=this.animation;let{config:o,toValues:a}=i;const c=(0,s.He)(i.to);!c&&(0,n.j$)(i.to)&&(a=(0,n.qo)((0,n.je)(i.to))),i.values.forEach(((l,u)=>{if(l.done)return;const h=l.constructor==s.eC?1:c?c[u].lastPosition:a[u];let d=i.immediate,p=h;if(!d){if(p=l.lastPosition,o.tension<=0)return void(l.done=!0);let t=l.elapsedTime+=e;const r=i.fromValues[u],s=null!=l.v0?l.v0:l.v0=n.is.arr(o.velocity)?o.velocity[u]:o.velocity;let a;const c=o.precision||(r==h?.005:Math.min(1,.001*Math.abs(h-r)));if(n.is.und(o.duration))if(o.decay){const e=!0===o.decay?.998:o.decay,n=Math.exp(-(1-e)*t);p=r+s/(1-e)*(1-n),d=Math.abs(l.lastPosition-p)<=c,a=s*n}else{a=null==l.lastVelocity?s:l.lastVelocity;const t=o.restVelocity||c/10,i=o.clamp?0:o.bounce,u=!n.is.und(i),f=r==h?l.v0>0:r<h;let g,y=!1;const m=1,b=Math.ceil(e/m);for(let e=0;e<b&&(g=Math.abs(a)>t,g||(d=Math.abs(h-p)<=c,!d));++e)u&&(y=p==h||p>h==f,y&&(a=-a*i,p=h)),a+=(1e-6*-o.tension*(p-h)+.001*-o.friction*a)/o.mass*m,p+=a*m}else{let n=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,l.durationProgress>0&&(l.elapsedTime=o.duration*l.durationProgress,t=l.elapsedTime+=e)),n=(o.progress||0)+t/this._memoizedDuration,n=n>1?1:n<0?0:n,l.durationProgress=n),p=r+o.easing(n)*(h-r),a=(p-l.lastPosition)/e,d=1==n}l.lastVelocity=a,Number.isNaN(p)&&(console.warn("Got NaN while animating:",this),d=!0)}c&&!c[u].done&&(d=!1),d?l.done=!0:t=!1,l.setValue(p,o.round)&&(r=!0)}));const l=(0,s.ys)(this),u=l.getValue();if(t){const e=(0,n.je)(i.to);u===e&&!r||o.decay?r&&o.decay&&this._onChange(u):(l.setValue(e),this._onChange(e)),this._stop()}else r&&this._onChange(u)}set(e){return n.Wn.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(R(this)){const{to:e,config:t}=this.animation;n.Wn.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return n.is.und(e)?(r=this.queue||[],this.queue=[]):r=[n.is.obj(e)?e:o({},t,{to:e})],Promise.all(r.map((e=>this._update(e)))).then((e=>((e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?I(e.get()):t.every((e=>e.noop))?E(e.get()):S(e.get(),t.every((e=>e.finished))))(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),A(this._state,e&&this._lastCallId),n.Wn.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:i}=e;r=n.is.obj(r)?r[t]:r,(null==r||y(r))&&(r=void 0),i=n.is.obj(i)?i[t]:i,null==i&&(i=void 0);const o={to:r,from:i};return N(this)||(e.reverse&&([r,i]=[i,r]),i=(0,n.je)(i),n.is.und(i)?(0,s.ys)(this)||this._set(r):this._set(i)),o}_update(e,t){let r=o({},e);const{key:i,defaultProps:s}=this;r.default&&Object.assign(s,h(r,((e,t)=>/^on/.test(t)?l(e,i):e))),V(this,r,"onProps"),$(this,"onProps",r,this);const u=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const d=this._state;return function(e,{key:t,props:r,defaultProps:i,state:s,actions:l}){return new Promise(((u,h)=>{var d;let p,f,g=c(null!=(d=r.cancel)?d:null==i?void 0:i.cancel,t);if(g)b();else{n.is.und(r.pause)||(s.paused=c(r.pause,t));let e=null==i?void 0:i.pause;!0!==e&&(e=s.paused||c(e,t)),p=a(r.delay||0,t),e?(s.resumeQueue.add(m),l.pause()):(l.resume(),m())}function y(){s.resumeQueue.add(m),s.timeouts.delete(f),f.cancel(),p=f.time-n.Wn.now()}function m(){p>0&&!n.OH.skipAnimation?(s.delayed=!0,f=n.Wn.setTimeout(b,p),s.pauseQueue.add(y),s.timeouts.add(f)):b()}function b(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(y),s.timeouts.delete(f),e<=(s.cancelId||0)&&(g=!0);try{l.start(o({},r,{callId:e,cancel:g}),u)}catch(e){h(e)}}}))}(++this._lastCallId,{key:i,props:r,defaultProps:s,state:d,actions:{pause:()=>{M(this)||(L(this,!0),(0,n.bl)(d.pauseQueue),$(this,"onPause",S(this,U(this,this.animation.to)),this))},resume:()=>{M(this)&&(L(this,!1),R(this)&&this._resume(),(0,n.bl)(d.resumeQueue),$(this,"onResume",S(this,U(this,this.animation.to)),this))},start:this._merge.bind(this,u)}}).then((e=>{if(r.loop&&e.finished&&(!t||!e.noop)){const e=function(e,t=e.loop,r=e.to){let i=a(t);if(i){const s=!0!==i&&f(i),a=(s||e).reverse,c=!s||s.reset;return function(e){const{to:t,from:r}=e=f(e),i=new Set;return n.is.obj(t)&&B(t,i),n.is.obj(r)&&B(r,i),e.keys=i.size?Array.from(i):null,e}(o({},e,{loop:t,default:!1,pause:void 0,to:!a||y(r)?r:void 0,from:c?e.from:void 0,reset:c},s))}}(r);if(e)return this._update(e,!0)}return e}))}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(I(this));const i=!n.is.und(e.to),l=!n.is.und(e.from);if(i||l){if(!(t.callId>this._lastToId))return r(I(this));this._lastToId=t.callId}const{key:u,defaultProps:d,animation:p}=this,{to:f,from:b}=p;let{to:w=f,from:_=b}=e;!l||i||t.default&&!n.is.und(w)||(w=_),t.reverse&&([w,_]=[_,w]);const x=!(0,n.Xy)(_,b);x&&(p.from=_),_=(0,n.je)(_);const T=!(0,n.Xy)(w,f);T&&this._focus(w);const P=y(t.to),{config:k}=p,{decay:M,velocity:D}=k;(i||l)&&(k.velocity=0),t.config&&!P&&function(e,t,r){r&&(v(r=o({},r),t),t=o({},r,t)),v(e,t),Object.assign(e,t);for(const t in m)null==e[t]&&(e[t]=m[t]);let{mass:i,frequency:s,damping:a}=e;n.is.und(s)||(s<.01&&(s=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/s,2)*i,e.friction=4*Math.PI*a*i/s)}(k,a(t.config,u),t.config!==d.config?a(d.config,u):void 0);let L=(0,s.ys)(this);if(!L||n.is.und(w))return r(S(this,!0));const j=n.is.und(t.reset)?l&&!t.default:!n.is.und(_)&&c(t.reset,u),B=j?_:this.get(),$=g(w),H=n.is.num($)||n.is.arr($)||(0,n.Df)($),z=!P&&(!H||c(d.immediate||t.immediate,u));if(T){const e=(0,s.sb)(w);if(e!==L.constructor){if(!z)throw Error(`Cannot animate between ${L.constructor.name} and ${e.name}, as the "to" prop suggests`);L=this._set($)}}const K=L.constructor;let q=(0,n.j$)(w),G=!1;if(!q){const e=j||!N(this)&&x;(T||e)&&(G=(0,n.Xy)(g(B),$),q=!G),((0,n.Xy)(p.immediate,z)||z)&&(0,n.Xy)(k.decay,M)&&(0,n.Xy)(k.velocity,D)||(q=!0)}if(G&&R(this)&&(p.changed&&!j?q=!0:q||this._stop(f)),!P&&((q||(0,n.j$)(f))&&(p.values=L.getPayload(),p.toValues=(0,n.j$)(w)?null:K==s.eC?[1]:(0,n.qo)($)),p.immediate!=z&&(p.immediate=z,z||j||this._set(f)),q)){const{onRest:e}=p;(0,n.S6)(F,(e=>V(this,t,e)));const i=S(this,U(this,f));(0,n.bl)(this._pendingCalls,i),this._pendingCalls.add(r),p.changed&&n.Wn.batchedUpdates((()=>{p.changed=!j,null==e||e(i,this),j?a(d.onRest,i):null==p.onStart||p.onStart(i,this)}))}j&&this._set(B),P?r(function(e,t,r,i){const{callId:s,parentId:a,onRest:c}=t,{asyncTo:l,promise:u}=r;return a||e!==l||t.reset?r.promise=(async()=>{r.asyncId=s,r.asyncTo=e;const d=h(t,((e,t)=>"onRest"===t?void 0:e));let p,f;const g=new Promise(((e,t)=>(p=e,f=t))),y=e=>{const t=s<=(r.cancelId||0)&&I(i)||s!==r.asyncId&&S(i,!1);if(t)throw e.result=t,f(e),e},m=(e,t)=>{const a=new O,c=new C;return(async()=>{if(n.OH.skipAnimation)throw A(r),c.result=S(i,!1),f(c),c;y(a);const l=n.is.obj(e)?o({},e):o({},t,{to:e});l.parentId=s,(0,n.rU)(d,((e,t)=>{n.is.und(l[t])&&(l[t]=e)}));const u=await i.start(l);return y(a),r.paused&&await new Promise((e=>{r.resumeQueue.add(e)})),u})()};let b;if(n.OH.skipAnimation)return A(r),S(i,!1);try{let t;t=n.is.arr(e)?(async e=>{for(const t of e)await m(t)})(e):Promise.resolve(e(m,i.stop.bind(i))),await Promise.all([t.then(p),g]),b=S(i.get(),!0,!1)}catch(e){if(e instanceof O)b=e.result;else{if(!(e instanceof C))throw e;b=e.result}}finally{s==r.asyncId&&(r.asyncId=a,r.asyncTo=a?l:void 0,r.promise=a?u:void 0)}return n.is.fun(c)&&n.Wn.batchedUpdates((()=>{c(b,i,i.item)})),b})():u}(t.to,t,this._state,this)):q?this._start():R(this)&&!T?this._pendingCalls.add(r):r(E(B))}_focus(e){const t=this.animation;e!==t.to&&((0,n.Ll)(this)&&this._detach(),t.to=e,(0,n.Ll)(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;(0,n.j$)(t)&&((0,n.UI)(t,this),x(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;(0,n.j$)(e)&&(0,n.iL)(e,this)}_set(e,t=!0){const r=(0,n.je)(e);if(!n.is.und(r)){const e=(0,s.ys)(this);if(!e||!(0,n.Xy)(r,e.getValue())){const i=(0,s.sb)(r);e&&e.constructor==i?e.setValue(r):(0,s.f3)(this,i.create(r)),e&&n.Wn.batchedUpdates((()=>{this._onChange(r,t)}))}}return(0,s.ys)(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,$(this,"onStart",S(this,U(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),a(this.animation.onChange,e,this)),a(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;(0,s.ys)(this).reset((0,n.je)(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),R(this)||(D(this,!0),M(this)||this._resume())}_resume(){n.OH.skipAnimation?this.finish():n.fT.start(this)}_stop(e,t){if(R(this)){D(this,!1);const r=this.animation;(0,n.S6)(r.values,(e=>{e.done=!0})),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),(0,n.k0)(this,{type:"idle",parent:this});const i=t?I(this.get()):S(this.get(),U(this,null!=e?e:r.to));(0,n.bl)(this._pendingCalls,i),r.changed&&(r.changed=!1,$(this,"onRest",i,this))}}}function U(e,t){const r=g(t),i=g(e.get());return(0,n.Xy)(i,r)}function B(e,t){(0,n.rU)(e,((e,r)=>null!=e&&t.add(r)))}const F=["onStart","onRest","onChange","onPause","onResume"];function V(e,t,r){e.animation[r]=t[r]!==((e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0)(t,r)?l(t[r],e.key):void 0}function $(e,t,...r){var n,i,s,o;null==(n=(i=e.animation)[t])||n.call(i,...r),null==(s=(o=e.defaultProps)[t])||s.call(o,...r)}const H=["children"],z=e=>{let{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,H);const s=(0,i.useContext)(K),o=r.pause||!!s.pause,a=r.immediate||!!s.immediate;r=(0,n.Pr)((()=>({pause:o,immediate:a})),[o,a]);const{Provider:c}=K;return i.createElement(c,{value:r},t)},K=(q=z,G={},Object.assign(q,i.createContext(G)),q.Provider._context=q,q.Consumer._context=q,q);var q,G;z.Provider=K.Provider,z.Consumer=K.Consumer;const W=(e,t)=>{const r=(0,n.hS)((()=>new j(e,t)));return(0,n.tf)((()=>()=>{r.stop()})),r};let Y;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(Y||(Y={}));class Q extends P{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=(0,n.mD)(...t);const r=this._get(),i=(0,s.sb)(r);(0,s.f3)(this,i.create(r))}advance(e){const t=this._get(),r=this.get();(0,n.Xy)(t,r)||((0,s.ys)(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Z(this._active)&&J(this)}_get(){const e=n.is.arr(this.source)?this.source.map(n.je):(0,n.qo)((0,n.je)(this.source));return this.calc(...e)}_start(){this.idle&&!Z(this._active)&&(this.idle=!1,(0,n.S6)((0,s.He)(this),(e=>{e.done=!1})),n.OH.skipAnimation?(n.Wn.batchedUpdates((()=>this.advance())),J(this)):n.fT.start(this))}_attach(){let e=1;(0,n.S6)((0,n.qo)(this.source),(t=>{(0,n.j$)(t)&&(0,n.UI)(t,this),x(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){(0,n.S6)((0,n.qo)(this.source),(e=>{(0,n.j$)(e)&&(0,n.iL)(e,this)})),this._active.clear(),J(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=(0,n.qo)(this.source).reduce(((e,t)=>Math.max(e,(x(t)?t.priority:0)+1)),0))}}function X(e){return!1!==e.idle}function Z(e){return!e.size||Array.from(e).every(X)}function J(e){e.idle||(e.idle=!0,(0,n.S6)((0,s.He)(e),(e=>{e.done=!0})),(0,n.k0)(e,{type:"idle",parent:e}))}const ee=(e,...t)=>new Q(e,t);n.OH.assign({createStringInterpolator:n.qS,to:(e,t)=>new Q(e,t)}),n.fT.advance},75868:(e,t,r)=>{"use strict";r.d(t,{SpringValue:()=>n.SpringValue,animated:()=>S,easings:()=>n.easings,to:()=>n.to,useSpringValue:()=>n.useSpringValue});var n=r(39557),i=r(28316),s=r(95488),o=r(49461);function a(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}const c=["style","children","scrollTop","scrollLeft","viewBox"],l=/^--/;function u(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||l.test(e)||d.hasOwnProperty(e)&&d[e]?(""+t).trim():t+"px"}const h={};let d={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};const p=["Webkit","Ms","Moz","O"];d=Object.keys(d).reduce(((e,t)=>(p.forEach((r=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(r,t)]=e[t])),e)),d);const f=["x","y","z"],g=/^(matrix|translate|scale|rotate|skew)/,y=/^(translate)/,m=/^(rotate|skew)/,b=(e,t)=>s.is.num(e)&&0!==e?e+t:e,v=(e,t)=>s.is.arr(e)?e.every((e=>v(e,t))):s.is.num(e)?e===t:parseFloat(e)===t;class w extends o.rS{constructor(e){let{x:t,y:r,z:n}=e,i=a(e,f);const o=[],c=[];(t||r||n)&&(o.push([t||0,r||0,n||0]),c.push((e=>[`translate3d(${e.map((e=>b(e,"px"))).join(",")})`,v(e,0)]))),(0,s.rU)(i,((e,t)=>{if("transform"===t)o.push([e||""]),c.push((e=>[e,""===e]));else if(g.test(t)){if(delete i[t],s.is.und(e))return;const r=y.test(t)?"px":m.test(t)?"deg":"";o.push((0,s.qo)(e)),c.push("rotate3d"===t?([e,t,n,i])=>[`rotate3d(${e},${t},${n},${b(i,r)})`,v(i,0)]:e=>[`${t}(${e.map((e=>b(e,r))).join(",")})`,v(e,t.startsWith("scale")?1:0)])}})),o.length&&(i.transform=new _(o,c)),super(i)}}class _ extends s.B0{constructor(e,t){super(),this._value=null,this.inputs=e,this.transforms=t}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return(0,s.S6)(this.inputs,((r,n)=>{const i=(0,s.je)(r[0]),[o,a]=this.transforms[n](s.is.arr(i)?i:r.map(s.je));e+=" "+o,t=t&&a})),t?"none":e}observerAdded(e){1==e&&(0,s.S6)(this.inputs,(e=>(0,s.S6)(e,(e=>(0,s.j$)(e)&&(0,s.UI)(e,this)))))}observerRemoved(e){0==e&&(0,s.S6)(this.inputs,(e=>(0,s.S6)(e,(e=>(0,s.j$)(e)&&(0,s.iL)(e,this)))))}eventObserved(e){"change"==e.type&&(this._value=null),(0,s.k0)(this,e)}}const E=["scrollTop","scrollLeft"];n.Globals.assign({batchedUpdates:i.unstable_batchedUpdates,createStringInterpolator:s.qS,colors:s.O9});const S=(0,o.Ld)(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,n=t,{style:i,children:s,scrollTop:o,scrollLeft:d,viewBox:p}=n,f=a(n,c),g=Object.values(f),y=Object.keys(f).map((t=>r||e.hasAttribute(t)?t:h[t]||(h[t]=t.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())))));void 0!==s&&(e.textContent=s);for(let t in i)if(i.hasOwnProperty(t)){const r=u(t,i[t]);l.test(t)?e.style.setProperty(t,r):e.style[t]=r}y.forEach(((t,r)=>{e.setAttribute(t,g[r])})),void 0!==o&&(e.scrollTop=o),void 0!==d&&(e.scrollLeft=d),void 0!==p&&e.setAttribute("viewBox",p)},createAnimatedStyle:e=>new w(e),getComponentProps:e=>a(e,E)}).animated},16060:(e,t,r)=>{"use strict";function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}var i;r.d(t,{Ep:()=>u,RQ:()=>N,WK:()=>j,X3:()=>L,Zn:()=>C,Zq:()=>P,aU:()=>i,cP:()=>h,fp:()=>p,kG:()=>a,pC:()=>k,q_:()=>o}),function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(i||(i={}));const s="popstate";function o(e){return void 0===e&&(e={}),function(e,t,r,o){void 0===o&&(o={});let{window:h=document.defaultView,v5Compat:d=!1}=o,p=h.history,f=i.Pop,g=null,y=m();function m(){return(p.state||{idx:null}).idx}function b(){f=i.Pop;let e=m(),t=null==e?null:e-y;y=e,g&&g({action:f,location:w.location,delta:t})}function v(e){let t="null"!==h.location.origin?h.location.origin:h.location.href,r="string"==typeof e?e:u(e);return a(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==y&&(y=0,p.replaceState(n({},p.state,{idx:y}),""));let w={get action(){return f},get location(){return e(h,p)},listen(e){if(g)throw new Error("A history only accepts one active listener");return h.addEventListener(s,b),g=e,()=>{h.removeEventListener(s,b),g=null}},createHref:e=>t(h,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){f=i.Push;let n=l(w.location,e,t);r&&r(n,e),y=m()+1;let s=c(n,y),o=w.createHref(n);try{p.pushState(s,"",o)}catch(e){h.location.assign(o)}d&&g&&g({action:f,location:w.location,delta:1})},replace:function(e,t){f=i.Replace;let n=l(w.location,e,t);r&&r(n,e),y=m();let s=c(n,y),o=w.createHref(n);p.replaceState(s,"",o),d&&g&&g({action:f,location:w.location,delta:0})},go:e=>p.go(e)};return w}((function(e,t){let{pathname:r="/",search:n="",hash:i=""}=h(e.location.hash.substr(1));return l("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let r=e.document.querySelector("base"),n="";if(r&&r.getAttribute("href")){let t=e.location.href,r=t.indexOf("#");n=-1===r?t:t.slice(0,r)}return n+"#"+("string"==typeof t?t:u(t))}),(function(e,t){!function(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),e)}function a(e,t){if(!1===e||null==e)throw new Error(t)}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function l(e,t,r,i){return void 0===r&&(r=null),n({pathname:"string"==typeof e?e:e.pathname,search:"",hash:""},"string"==typeof t?h(t):t,{state:r,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function u(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function h(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}var d;function p(e,t,r){void 0===r&&(r="/");let n=C(("string"==typeof t?h(t):t).pathname||"/",r);if(null==n)return null;let i=f(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){return e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]))?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let e=0;null==s&&e<i.length;++e)s=I(i[e],O(n));return s}function f(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(a(o.relativePath.startsWith(n),'Absolute route path "'+o.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(n.length));let c=N([n,o.relativePath]),l=r.concat(o);e.children&&e.children.length>0&&(a(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+c+'".'),f(e.children,t,l,c)),(null!=e.path||e.index)&&t.push({path:c,score:S(c,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let r of g(e.path))i(e,t,r);else i(e,t)})),t}function g(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(0===n.length)return i?[s,""]:[s];let o=g(n.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(d||(d={}));const y=/^:\w+$/,m=3,b=2,v=1,w=10,_=-2,E=e=>"*"===e;function S(e,t){let r=e.split("/"),n=r.length;return r.some(E)&&(n+=_),t&&(n+=b),r.filter((e=>!E(e))).reduce(((e,t)=>e+(y.test(t)?m:""===t?v:w)),n)}function I(e,t){let{routesMeta:r}=e,n={},i="/",s=[];for(let e=0;e<r.length;++e){let o=r[e],a=e===r.length-1,c="/"===i?t:t.slice(i.length)||"/",l=A({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},c);if(!l)return null;Object.assign(n,l.params);let u=o.route;s.push({params:n,pathname:N([i,l.pathname]),pathnameBase:R(N([i,l.pathnameBase])),route:u}),"/"!==l.pathnameBase&&(i=N([i,l.pathnameBase]))}return s}function A(e,t){"string"==typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!0),x("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,((e,t)=>(n.push(t),"/([^\\/]+)")));return e.endsWith("*")?(n.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce(((e,t,r)=>{if("*"===t){let e=a[r]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(r){return x(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+r+")."),e}}(a[r]||"",t),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function O(e){try{return decodeURI(e)}catch(t){return x(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function C(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function x(e,t){if(!e){"undefined"!=typeof console&&console.warn(t);try{throw new Error(t)}catch(e){}}}function T(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function P(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function k(e,t,r,i){let s;void 0===i&&(i=!1),"string"==typeof e?s=h(e):(s=n({},e),a(!s.pathname||!s.pathname.includes("?"),T("?","pathname","search",s)),a(!s.pathname||!s.pathname.includes("#"),T("#","pathname","hash",s)),a(!s.search||!s.search.includes("#"),T("#","search","hash",s)));let o,c=""===e||""===s.pathname,l=c?"/":s.pathname;if(i||null==l)o=r;else{let e=t.length-1;if(l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"==typeof e?h(e):e,s=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:s,search:M(n),hash:D(i)}}(s,o),d=l&&"/"!==l&&l.endsWith("/"),p=(c||"."===l)&&r.endsWith("/");return u.pathname.endsWith("/")||!d&&!p||(u.pathname+="/"),u}const N=e=>e.join("/").replace(/\/\/+/g,"/"),R=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),M=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",D=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";class L extends Error{}function j(e){return null!=e&&"number"==typeof e.status&&"string"==typeof e.statusText&&"boolean"==typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],B=(new Set(U),["get",...U]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!=typeof window&&void 0!==window.document&&window.document.createElement,Symbol("deferred")},9437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(85457);function i(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}function s(e,t,r){return void 0===t&&(t=new Uint8Array(2)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}function o(e,t){return void 0===t&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}function a(e,t){return void 0===t&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function c(e,t){return void 0===t&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}function l(e,t){return void 0===t&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}function u(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}function h(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}function d(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),u(e/4294967296>>>0,t,r),u(e>>>0,t,r+4),t}function p(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),h(e>>>0,t,r),h(e/4294967296>>>0,t,r+4),t}t.readInt16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16},t.readUint16BE=function(e,t){return void 0===t&&(t=0),(e[t+0]<<8|e[t+1])>>>0},t.readInt16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])<<16>>16},t.readUint16LE=function(e,t){return void 0===t&&(t=0),(e[t+1]<<8|e[t])>>>0},t.writeUint16BE=i,t.writeInt16BE=i,t.writeUint16LE=s,t.writeInt16LE=s,t.readInt32BE=o,t.readUint32BE=a,t.readInt32LE=c,t.readUint32LE=l,t.writeUint32BE=u,t.writeInt32BE=u,t.writeUint32LE=h,t.writeInt32LE=h,t.readInt64BE=function(e,t){void 0===t&&(t=0);var r=o(e,t),n=o(e,t+4);return 4294967296*r+n-4294967296*(n>>31)},t.readUint64BE=function(e,t){return void 0===t&&(t=0),4294967296*a(e,t)+a(e,t+4)},t.readInt64LE=function(e,t){void 0===t&&(t=0);var r=c(e,t);return 4294967296*c(e,t+4)+r-4294967296*(r>>31)},t.readUint64LE=function(e,t){void 0===t&&(t=0);var r=l(e,t);return 4294967296*l(e,t+4)+r},t.writeUint64BE=d,t.writeInt64BE=d,t.writeUint64LE=p,t.writeInt64LE=p,t.readUintBE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,s=e/8+r-1;s>=r;s--)n+=t[s]*i,i*=256;return n},t.readUintLE=function(e,t,r){if(void 0===r&&(r=0),e%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,s=r;s<r+e/8;s++)n+=t[s]*i,i*=256;return n},t.writeUintBE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var s=1,o=e/8+i-1;o>=i;o--)r[o]=t/s&255,s*=256;return r},t.writeUintLE=function(e,t,r,i){if(void 0===r&&(r=new Uint8Array(e/8)),void 0===i&&(i=0),e%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var s=1,o=i;o<i+e/8;o++)r[o]=t/s&255,s*=256;return r},t.readFloat32BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t)},t.readFloat32LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat32(t,!0)},t.readFloat64BE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t)},t.readFloat64LE=function(e,t){return void 0===t&&(t=0),new DataView(e.buffer,e.byteOffset,e.byteLength).getFloat64(t,!0)},t.writeFloat32BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e),t},t.writeFloat32LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(4)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat32(r,e,!0),t},t.writeFloat64BE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e),t},t.writeFloat64LE=function(e,t,r){return void 0===t&&(t=new Uint8Array(8)),void 0===r&&(r=0),new DataView(t.buffer,t.byteOffset,t.byteLength).setFloat64(r,e,!0),t}},13832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9437),i=r(52887),s=20;function o(e,t,r){for(var i=1634760805,o=857760878,a=2036477234,c=1797285236,l=r[3]<<24|r[2]<<16|r[1]<<8|r[0],u=r[7]<<24|r[6]<<16|r[5]<<8|r[4],h=r[11]<<24|r[10]<<16|r[9]<<8|r[8],d=r[15]<<24|r[14]<<16|r[13]<<8|r[12],p=r[19]<<24|r[18]<<16|r[17]<<8|r[16],f=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],y=r[31]<<24|r[30]<<16|r[29]<<8|r[28],m=t[3]<<24|t[2]<<16|t[1]<<8|t[0],b=t[7]<<24|t[6]<<16|t[5]<<8|t[4],v=t[11]<<24|t[10]<<16|t[9]<<8|t[8],w=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=i,E=o,S=a,I=c,A=l,O=u,C=h,x=d,T=p,P=f,k=g,N=y,R=m,M=b,D=v,L=w,j=0;j<s;j+=2)A=(A^=T=T+(R=(R^=_=_+A|0)>>>16|R<<16)|0)>>>20|A<<12,O=(O^=P=P+(M=(M^=E=E+O|0)>>>16|M<<16)|0)>>>20|O<<12,C=(C^=k=k+(D=(D^=S=S+C|0)>>>16|D<<16)|0)>>>20|C<<12,x=(x^=N=N+(L=(L^=I=I+x|0)>>>16|L<<16)|0)>>>20|x<<12,C=(C^=k=k+(D=(D^=S=S+C|0)>>>24|D<<8)|0)>>>25|C<<7,x=(x^=N=N+(L=(L^=I=I+x|0)>>>24|L<<8)|0)>>>25|x<<7,O=(O^=P=P+(M=(M^=E=E+O|0)>>>24|M<<8)|0)>>>25|O<<7,A=(A^=T=T+(R=(R^=_=_+A|0)>>>24|R<<8)|0)>>>25|A<<7,O=(O^=k=k+(L=(L^=_=_+O|0)>>>16|L<<16)|0)>>>20|O<<12,C=(C^=N=N+(R=(R^=E=E+C|0)>>>16|R<<16)|0)>>>20|C<<12,x=(x^=T=T+(M=(M^=S=S+x|0)>>>16|M<<16)|0)>>>20|x<<12,A=(A^=P=P+(D=(D^=I=I+A|0)>>>16|D<<16)|0)>>>20|A<<12,x=(x^=T=T+(M=(M^=S=S+x|0)>>>24|M<<8)|0)>>>25|x<<7,A=(A^=P=P+(D=(D^=I=I+A|0)>>>24|D<<8)|0)>>>25|A<<7,C=(C^=N=N+(R=(R^=E=E+C|0)>>>24|R<<8)|0)>>>25|C<<7,O=(O^=k=k+(L=(L^=_=_+O|0)>>>24|L<<8)|0)>>>25|O<<7;n.writeUint32LE(_+i|0,e,0),n.writeUint32LE(E+o|0,e,4),n.writeUint32LE(S+a|0,e,8),n.writeUint32LE(I+c|0,e,12),n.writeUint32LE(A+l|0,e,16),n.writeUint32LE(O+u|0,e,20),n.writeUint32LE(C+h|0,e,24),n.writeUint32LE(x+d|0,e,28),n.writeUint32LE(T+p|0,e,32),n.writeUint32LE(P+f|0,e,36),n.writeUint32LE(k+g|0,e,40),n.writeUint32LE(N+y|0,e,44),n.writeUint32LE(R+m|0,e,48),n.writeUint32LE(M+b|0,e,52),n.writeUint32LE(D+v|0,e,56),n.writeUint32LE(L+w|0,e,60)}function a(e,t,r,n,s){if(void 0===s&&(s=0),32!==e.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var a,l;if(0===s){if(8!==t.length&&12!==t.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=(a=new Uint8Array(16)).length-t.length,a.set(t,l)}else{if(16!==t.length)throw new Error("ChaCha nonce with counter must be 16 bytes");a=t,l=s}for(var u=new Uint8Array(64),h=0;h<r.length;h+=64){o(u,a,e);for(var d=h;d<h+64&&d<r.length;d++)n[d]=r[d]^u[d-h];c(a,0,l)}return i.wipe(u),0===s&&i.wipe(a),n}function c(e,t,r){for(var n=1;r--;)n=n+(255&e[t])|0,e[t]=255&n,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}t.streamXOR=a,t.stream=function(e,t,r,n){return void 0===n&&(n=0),i.wipe(r),a(e,t,r,r,n)}},42934:(e,t,r)=>{"use strict";var n=r(13832),i=r(19780),s=r(52887),o=r(9437),a=r(3283);t.Cv=32,t.WH=12,t.pg=16;var c=new Uint8Array(16),l=function(){function e(e){if(this.nonceLength=t.WH,this.tagLength=t.pg,e.length!==t.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return e.prototype.seal=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var a=new Uint8Array(32);n.stream(this._key,o,a,4);var c,l=t.length+this.tagLength;if(i){if(i.length!==l)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(l);return n.streamXOR(this._key,o,t,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),a,c.subarray(0,c.length-this.tagLength),r),s.wipe(o),c},e.prototype.open=function(e,t,r,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(t.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var c=new Uint8Array(32);n.stream(this._key,o,c,4);var l=new Uint8Array(this.tagLength);if(this._authenticate(l,c,t.subarray(0,t.length-this.tagLength),r),!a.equal(l,t.subarray(t.length-this.tagLength,t.length)))return null;var u,h=t.length-this.tagLength;if(i){if(i.length!==h)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(h);return n.streamXOR(this._key,o,t.subarray(0,t.length-this.tagLength),u,4),s.wipe(o),u},e.prototype.clean=function(){return s.wipe(this._key),this},e.prototype._authenticate=function(e,t,r,n){var a=new i.Poly1305(t);n&&(a.update(n),n.length%16>0&&a.update(c.subarray(n.length%16))),a.update(r),r.length%16>0&&a.update(c.subarray(r.length%16));var l=new Uint8Array(8);n&&o.writeUint64LE(n.length,l),a.update(l),o.writeUint64LE(r.length,l),a.update(l);for(var u=a.digest(),h=0;h<u.length;h++)e[h]=u[h];a.clean(),s.wipe(u),s.wipe(l)},e}();t.OK=l},3283:(e,t)=>{"use strict";function r(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}Object.defineProperty(t,"__esModule",{value:!0}),t.select=function(e,t,r){return~(e-1)&t|e-1&r},t.lessOrEqual=function(e,t){return(0|e)-(0|t)-1>>>31&1},t.compare=r,t.equal=function(e,t){return 0!==e.length&&0!==t.length&&0!==r(e,t)}},27728:(e,t,r)=>{"use strict";t.Xx=t._w=t.aP=t.KS=t.jQ=void 0;r(81293);const n=r(46756);r(52887);function i(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.jQ=64,t.KS=64,t.aP=32,new Uint8Array(32)[0]=9;const s=i(),o=i([1]),a=(i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function u(e,t){for(let r=0;r<16;r++)e[r]=0|t[r]}function h(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function d(e,t,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(e[r]^t[r]);e[r]^=i,t[r]^=i}}function p(e,t){const r=i(),n=i();for(let e=0;e<16;e++)n[e]=t[e];h(n),h(n),h(n);for(let e=0;e<2;e++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,d(n,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&n[t],e[2*t+1]=n[t]>>8}function f(e){const t=new Uint8Array(32);return p(t,e),1&t[0]}function g(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function y(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function m(e,t,r){let n,i,s=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,p=0,f=0,g=0,y=0,m=0,b=0,v=0,w=0,_=0,E=0,S=0,I=0,A=0,O=0,C=0,x=0,T=0,P=0,k=0,N=0,R=0,M=0,D=0,L=r[0],j=r[1],U=r[2],B=r[3],F=r[4],V=r[5],$=r[6],H=r[7],z=r[8],K=r[9],q=r[10],G=r[11],W=r[12],Y=r[13],Q=r[14],X=r[15];n=t[0],s+=n*L,o+=n*j,a+=n*U,c+=n*B,l+=n*F,u+=n*V,h+=n*$,d+=n*H,p+=n*z,f+=n*K,g+=n*q,y+=n*G,m+=n*W,b+=n*Y,v+=n*Q,w+=n*X,n=t[1],o+=n*L,a+=n*j,c+=n*U,l+=n*B,u+=n*F,h+=n*V,d+=n*$,p+=n*H,f+=n*z,g+=n*K,y+=n*q,m+=n*G,b+=n*W,v+=n*Y,w+=n*Q,_+=n*X,n=t[2],a+=n*L,c+=n*j,l+=n*U,u+=n*B,h+=n*F,d+=n*V,p+=n*$,f+=n*H,g+=n*z,y+=n*K,m+=n*q,b+=n*G,v+=n*W,w+=n*Y,_+=n*Q,E+=n*X,n=t[3],c+=n*L,l+=n*j,u+=n*U,h+=n*B,d+=n*F,p+=n*V,f+=n*$,g+=n*H,y+=n*z,m+=n*K,b+=n*q,v+=n*G,w+=n*W,_+=n*Y,E+=n*Q,S+=n*X,n=t[4],l+=n*L,u+=n*j,h+=n*U,d+=n*B,p+=n*F,f+=n*V,g+=n*$,y+=n*H,m+=n*z,b+=n*K,v+=n*q,w+=n*G,_+=n*W,E+=n*Y,S+=n*Q,I+=n*X,n=t[5],u+=n*L,h+=n*j,d+=n*U,p+=n*B,f+=n*F,g+=n*V,y+=n*$,m+=n*H,b+=n*z,v+=n*K,w+=n*q,_+=n*G,E+=n*W,S+=n*Y,I+=n*Q,A+=n*X,n=t[6],h+=n*L,d+=n*j,p+=n*U,f+=n*B,g+=n*F,y+=n*V,m+=n*$,b+=n*H,v+=n*z,w+=n*K,_+=n*q,E+=n*G,S+=n*W,I+=n*Y,A+=n*Q,O+=n*X,n=t[7],d+=n*L,p+=n*j,f+=n*U,g+=n*B,y+=n*F,m+=n*V,b+=n*$,v+=n*H,w+=n*z,_+=n*K,E+=n*q,S+=n*G,I+=n*W,A+=n*Y,O+=n*Q,C+=n*X,n=t[8],p+=n*L,f+=n*j,g+=n*U,y+=n*B,m+=n*F,b+=n*V,v+=n*$,w+=n*H,_+=n*z,E+=n*K,S+=n*q,I+=n*G,A+=n*W,O+=n*Y,C+=n*Q,x+=n*X,n=t[9],f+=n*L,g+=n*j,y+=n*U,m+=n*B,b+=n*F,v+=n*V,w+=n*$,_+=n*H,E+=n*z,S+=n*K,I+=n*q,A+=n*G,O+=n*W,C+=n*Y,x+=n*Q,T+=n*X,n=t[10],g+=n*L,y+=n*j,m+=n*U,b+=n*B,v+=n*F,w+=n*V,_+=n*$,E+=n*H,S+=n*z,I+=n*K,A+=n*q,O+=n*G,C+=n*W,x+=n*Y,T+=n*Q,P+=n*X,n=t[11],y+=n*L,m+=n*j,b+=n*U,v+=n*B,w+=n*F,_+=n*V,E+=n*$,S+=n*H,I+=n*z,A+=n*K,O+=n*q,C+=n*G,x+=n*W,T+=n*Y,P+=n*Q,k+=n*X,n=t[12],m+=n*L,b+=n*j,v+=n*U,w+=n*B,_+=n*F,E+=n*V,S+=n*$,I+=n*H,A+=n*z,O+=n*K,C+=n*q,x+=n*G,T+=n*W,P+=n*Y,k+=n*Q,N+=n*X,n=t[13],b+=n*L,v+=n*j,w+=n*U,_+=n*B,E+=n*F,S+=n*V,I+=n*$,A+=n*H,O+=n*z,C+=n*K,x+=n*q,T+=n*G,P+=n*W,k+=n*Y,N+=n*Q,R+=n*X,n=t[14],v+=n*L,w+=n*j,_+=n*U,E+=n*B,S+=n*F,I+=n*V,A+=n*$,O+=n*H,C+=n*z,x+=n*K,T+=n*q,P+=n*G,k+=n*W,N+=n*Y,R+=n*Q,M+=n*X,n=t[15],w+=n*L,_+=n*j,E+=n*U,S+=n*B,I+=n*F,A+=n*V,O+=n*$,C+=n*H,x+=n*z,T+=n*K,P+=n*q,k+=n*G,N+=n*W,R+=n*Y,M+=n*Q,D+=n*X,s+=38*_,o+=38*E,a+=38*S,c+=38*I,l+=38*A,u+=38*O,h+=38*C,d+=38*x,p+=38*T,f+=38*P,g+=38*k,y+=38*N,m+=38*R,b+=38*M,v+=38*D,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=p,e[9]=f,e[10]=g,e[11]=y,e[12]=m,e[13]=b,e[14]=v,e[15]=w}function b(e,t){m(e,t,t)}function v(e,t){const r=i(),n=i(),s=i(),o=i(),c=i(),l=i(),u=i(),h=i(),d=i();y(r,e[1],e[0]),y(d,t[1],t[0]),m(r,r,d),g(n,e[0],e[1]),g(d,t[0],t[1]),m(n,n,d),m(s,e[3],t[3]),m(s,s,a),m(o,e[2],t[2]),g(o,o,o),y(c,n,r),y(l,o,s),g(u,o,s),g(h,n,r),m(e[0],c,l),m(e[1],h,u),m(e[2],u,l),m(e[3],c,h)}function w(e,t,r){for(let n=0;n<4;n++)d(e[n],t[n],r)}function _(e,t){const r=i(),n=i(),s=i();(function(e,t){const r=i();let n;for(n=0;n<16;n++)r[n]=t[n];for(n=253;n>=0;n--)b(r,r),2!==n&&4!==n&&m(r,r,t);for(n=0;n<16;n++)e[n]=r[n]})(s,t[2]),m(r,t[0],s),m(n,t[1],s),p(e,n),e[31]^=f(r)<<7}function E(e,t){const r=[i(),i(),i(),i()];u(r[0],c),u(r[1],l),u(r[2],o),m(r[3],c,l),function(e,t,r){u(e[0],s),u(e[1],o),u(e[2],o),u(e[3],s);for(let n=255;n>=0;--n){const i=r[n/8|0]>>(7&n)&1;w(e,t,i),v(t,e),v(e,e),w(e,t,i)}}(e,r,t)}t._w=function(e){if(e.length!==t.aP)throw new Error(`ed25519: seed must be ${t.aP} bytes`);const r=(0,n.hash)(e);r[0]&=248,r[31]&=127,r[31]|=64;const s=new Uint8Array(32),o=[i(),i(),i(),i()];E(o,r),_(s,o);const a=new Uint8Array(64);return a.set(e),a.set(s,32),{publicKey:s,secretKey:a}};const S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function I(e,t){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*S[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(r=0,i=0;i<32;i++)t[i]+=r-(t[31]>>4)*S[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*S[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function A(e){const t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=e[r];for(let t=0;t<64;t++)e[t]=0;I(e,t)}t.Xx=function(e,t){const r=new Float64Array(64),s=[i(),i(),i(),i()],o=(0,n.hash)(e.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;const a=new Uint8Array(64);a.set(o.subarray(32),32);const c=new n.SHA512;c.update(a.subarray(32)),c.update(t);const l=c.digest();c.clean(),A(l),E(s,l),_(a,s),c.reset(),c.update(a.subarray(0,32)),c.update(e.subarray(32)),c.update(t);const u=c.digest();A(u);for(let e=0;e<32;e++)r[e]=l[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)r[e+t]+=u[e]*o[t];return I(a.subarray(32),r),a}},7:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializableHash=function(e){return void 0!==e.saveState&&void 0!==e.restoreState&&void 0!==e.cleanSavedState}},71133:(e,t,r)=>{"use strict";var n=r(56169),i=r(52887),s=function(){function e(e,t,r,i){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=e,this._info=i;var s=n.hmac(this._hash,r,t);this._hmac=new n.HMAC(e,s),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var e=this._counter[0];if(0===e)throw new Error("hkdf: cannot expand more");this._hmac.reset(),e>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(e){for(var t=new Uint8Array(e),r=0;r<t.length;r++)this._bufpos===this._buffer.length&&this._fillBuffer(),t[r]=this._buffer[this._bufpos++];return t},e.prototype.clean=function(){this._hmac.clean(),i.wipe(this._buffer),i.wipe(this._counter),this._bufpos=0},e}();t.t=s},56169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(3283),s=r(52887),o=function(){function e(e,t){this._finished=!1,this._inner=new e,this._outer=new e,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);t.length>this.blockSize?this._inner.update(t).finish(r).clean():r.set(t);for(var i=0;i<r.length;i++)r[i]^=54;for(this._inner.update(r),i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),s.wipe(r)}return e.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(e){return this._inner.update(e),this},e.prototype.finish=function(e){return this._finished?(this._outer.finish(e),this):(this._inner.finish(e),this._outer.update(e.subarray(0,this.digestLength)).finish(e),this._finished=!0,this)},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(e){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(e),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(e){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(e)},e}();t.HMAC=o,t.hmac=function(e,t,r){var n=new o(e,t);n.update(r);var i=n.digest();return n.clean(),i},t.equal=i.equal},85457:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mul=Math.imul||function(e,t){var r=65535&e,n=65535&t;return r*n+((e>>>16&65535)*n+r*(t>>>16&65535)<<16>>>0)|0},t.add=function(e,t){return e+t|0},t.sub=function(e,t){return e-t|0},t.rotl=function(e,t){return e<<t|e>>>32-t},t.rotr=function(e,t){return e<<32-t|e>>>t},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(e){return t.isInteger(e)&&e>=-t.MAX_SAFE_INTEGER&&e<=t.MAX_SAFE_INTEGER}},19780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3283),i=r(52887);t.DIGEST_LENGTH=16;var s=function(){function e(e){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=8191&r;var n=e[2]|e[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var i=e[4]|e[5]<<8;this._r[2]=7939&(n>>>10|i<<6);var s=e[6]|e[7]<<8;this._r[3]=8191&(i>>>7|s<<9);var o=e[8]|e[9]<<8;this._r[4]=255&(s>>>4|o<<12),this._r[5]=o>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=8191&(o>>>14|a<<2);var c=e[12]|e[13]<<8;this._r[7]=8065&(a>>>11|c<<5);var l=e[14]|e[15]<<8;this._r[8]=8191&(c>>>8|l<<8),this._r[9]=l>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return e.prototype._blocks=function(e,t,r){for(var n=this._fin?0:2048,i=this._h[0],s=this._h[1],o=this._h[2],a=this._h[3],c=this._h[4],l=this._h[5],u=this._h[6],h=this._h[7],d=this._h[8],p=this._h[9],f=this._r[0],g=this._r[1],y=this._r[2],m=this._r[3],b=this._r[4],v=this._r[5],w=this._r[6],_=this._r[7],E=this._r[8],S=this._r[9];r>=16;){var I=e[t+0]|e[t+1]<<8;i+=8191&I;var A=e[t+2]|e[t+3]<<8;s+=8191&(I>>>13|A<<3);var O=e[t+4]|e[t+5]<<8;o+=8191&(A>>>10|O<<6);var C=e[t+6]|e[t+7]<<8;a+=8191&(O>>>7|C<<9);var x=e[t+8]|e[t+9]<<8;c+=8191&(C>>>4|x<<12),l+=x>>>1&8191;var T=e[t+10]|e[t+11]<<8;u+=8191&(x>>>14|T<<2);var P=e[t+12]|e[t+13]<<8;h+=8191&(T>>>11|P<<5);var k=e[t+14]|e[t+15]<<8,N=0,R=N;R+=i*f,R+=s*(5*S),R+=o*(5*E),R+=a*(5*_),N=(R+=c*(5*w))>>>13,R&=8191,R+=l*(5*v),R+=u*(5*b),R+=h*(5*m),R+=(d+=8191&(P>>>8|k<<8))*(5*y);var M=N+=(R+=(p+=k>>>5|n)*(5*g))>>>13;M+=i*g,M+=s*f,M+=o*(5*S),M+=a*(5*E),N=(M+=c*(5*_))>>>13,M&=8191,M+=l*(5*w),M+=u*(5*v),M+=h*(5*b),M+=d*(5*m),N+=(M+=p*(5*y))>>>13,M&=8191;var D=N;D+=i*y,D+=s*g,D+=o*f,D+=a*(5*S),N=(D+=c*(5*E))>>>13,D&=8191,D+=l*(5*_),D+=u*(5*w),D+=h*(5*v),D+=d*(5*b);var L=N+=(D+=p*(5*m))>>>13;L+=i*m,L+=s*y,L+=o*g,L+=a*f,N=(L+=c*(5*S))>>>13,L&=8191,L+=l*(5*E),L+=u*(5*_),L+=h*(5*w),L+=d*(5*v);var j=N+=(L+=p*(5*b))>>>13;j+=i*b,j+=s*m,j+=o*y,j+=a*g,N=(j+=c*f)>>>13,j&=8191,j+=l*(5*S),j+=u*(5*E),j+=h*(5*_),j+=d*(5*w);var U=N+=(j+=p*(5*v))>>>13;U+=i*v,U+=s*b,U+=o*m,U+=a*y,N=(U+=c*g)>>>13,U&=8191,U+=l*f,U+=u*(5*S),U+=h*(5*E),U+=d*(5*_);var B=N+=(U+=p*(5*w))>>>13;B+=i*w,B+=s*v,B+=o*b,B+=a*m,N=(B+=c*y)>>>13,B&=8191,B+=l*g,B+=u*f,B+=h*(5*S),B+=d*(5*E);var F=N+=(B+=p*(5*_))>>>13;F+=i*_,F+=s*w,F+=o*v,F+=a*b,N=(F+=c*m)>>>13,F&=8191,F+=l*y,F+=u*g,F+=h*f,F+=d*(5*S);var V=N+=(F+=p*(5*E))>>>13;V+=i*E,V+=s*_,V+=o*w,V+=a*v,N=(V+=c*b)>>>13,V&=8191,V+=l*m,V+=u*y,V+=h*g,V+=d*f;var $=N+=(V+=p*(5*S))>>>13;$+=i*S,$+=s*E,$+=o*_,$+=a*w,N=($+=c*v)>>>13,$&=8191,$+=l*b,$+=u*m,$+=h*y,$+=d*g,i=R=8191&(N=(N=((N+=($+=p*f)>>>13)<<2)+N|0)+(R&=8191)|0),s=M+=N>>>=13,o=D&=8191,a=L&=8191,c=j&=8191,l=U&=8191,u=B&=8191,h=F&=8191,d=V&=8191,p=$&=8191,t+=16,r-=16}this._h[0]=i,this._h[1]=s,this._h[2]=o,this._h[3]=a,this._h[4]=c,this._h[5]=l,this._h[6]=u,this._h[7]=h,this._h[8]=d,this._h[9]=p},e.prototype.finish=function(e,t){void 0===t&&(t=0);var r,n,i,s,o=new Uint16Array(10);if(this._leftover){for(s=this._leftover,this._buffer[s++]=1;s<16;s++)this._buffer[s]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,s=2;s<10;s++)this._h[s]+=r,r=this._h[s]>>>13,this._h[s]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,o[0]=this._h[0]+5,r=o[0]>>>13,o[0]&=8191,s=1;s<10;s++)o[s]=this._h[s]+r,r=o[s]>>>13,o[s]&=8191;for(o[9]-=8192,n=(1^r)-1,s=0;s<10;s++)o[s]&=n;for(n=~n,s=0;s<10;s++)this._h[s]=this._h[s]&n|o[s];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),i=this._h[0]+this._pad[0],this._h[0]=65535&i,s=1;s<8;s++)i=(this._h[s]+this._pad[s]|0)+(i>>>16)|0,this._h[s]=65535&i;return e[t+0]=this._h[0]>>>0,e[t+1]=this._h[0]>>>8,e[t+2]=this._h[1]>>>0,e[t+3]=this._h[1]>>>8,e[t+4]=this._h[2]>>>0,e[t+5]=this._h[2]>>>8,e[t+6]=this._h[3]>>>0,e[t+7]=this._h[3]>>>8,e[t+8]=this._h[4]>>>0,e[t+9]=this._h[4]>>>8,e[t+10]=this._h[5]>>>0,e[t+11]=this._h[5]>>>8,e[t+12]=this._h[6]>>>0,e[t+13]=this._h[6]>>>8,e[t+14]=this._h[7]>>>0,e[t+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(e){var t,r=0,n=e.length;if(this._leftover){(t=16-this._leftover)>n&&(t=n);for(var i=0;i<t;i++)this._buffer[this._leftover+i]=e[r+i];if(n-=t,r+=t,this._leftover+=t,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(t=n-n%16,this._blocks(e,r,t),r+=t,n-=t),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=e[r+i];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},e.prototype.clean=function(){return i.wipe(this._buffer),i.wipe(this._r),i.wipe(this._h),i.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();t.Poly1305=s,t.oneTimeAuth=function(e,t){var r=new s(e);r.update(t);var n=r.digest();return r.clean(),n},t.equal=function(e,r){return e.length===t.DIGEST_LENGTH&&r.length===t.DIGEST_LENGTH&&n.equal(e,r)}},81293:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const n=r(67901),i=r(9437),s=r(52887);function o(e,r=t.defaultRandomSource){return r.randomBytes(e)}t.defaultRandomSource=new n.SystemRandomSource,t.randomBytes=o,t.randomUint32=function(e=t.defaultRandomSource){const r=o(4,e),n=(0,i.readUint32LE)(r);return(0,s.wipe)(r),n};const a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function c(e,r=a,n=t.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let i="";const c=r.length,l=256-256%c;for(;e>0;){const t=o(Math.ceil(256*e/l),n);for(let n=0;n<t.length&&e>0;n++){const s=t[n];s<l&&(i+=r.charAt(s%c),e--)}(0,s.wipe)(t)}return i}t.randomString=c,t.randomStringForEntropy=function(e,r=a,n=t.defaultRandomSource){return c(Math.ceil(e/(Math.log(r.length)/Math.LN2)),r,n)}},82017:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserRandomSource=void 0,t.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e="undefined"!=typeof self?self.crypto||self.msCrypto:null;e&&void 0!==e.getRandomValues&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const t=new Uint8Array(e);for(let e=0;e<t.length;e+=65536)this._crypto.getRandomValues(t.subarray(e,e+Math.min(t.length-e,65536)));return t}}},17879:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeRandomSource=void 0;const n=r(52887);t.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const e=r(75477);e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let t=this._crypto.randomBytes(e);if(t.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(e);for(let e=0;e<r.length;e++)r[e]=t[e];return(0,n.wipe)(t),r}}},67901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRandomSource=void 0;const n=r(82017),i=r(17879);t.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new i.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}},49013:(e,t,r)=>{"use strict";var n=r(9437),i=r(52887);t.k=32,t.cn=64;var s=function(){function e(){this.digestLength=t.k,this.blockSize=t.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._temp),this.reset()},e.prototype.update=function(e,t){if(void 0===t&&(t=e.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=e[r++],t--;this._bufferLength===this.blockSize&&(a(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=a(this._temp,this._state,e,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=e[r++],t--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,s=t<<3,o=t%64<56?64:128;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._temp,this._state,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/4;c++)n.writeUint32BE(this._state[c],e,4*c);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._state.set(e.state),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.state),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.mE=s;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function a(e,t,r,i,s){for(;s>=64;){for(var a=t[0],c=t[1],l=t[2],u=t[3],h=t[4],d=t[5],p=t[6],f=t[7],g=0;g<16;g++){var y=i+4*g;e[g]=n.readUint32BE(r,y)}for(g=16;g<64;g++){var m=e[g-2],b=(m>>>17|m<<15)^(m>>>19|m<<13)^m>>>10,v=((m=e[g-15])>>>7|m<<25)^(m>>>18|m<<14)^m>>>3;e[g]=(b+e[g-7]|0)+(v+e[g-16]|0)}for(g=0;g<64;g++)b=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&p)|0)+(f+(o[g]+e[g]|0)|0)|0,v=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&c^a&l^c&l)|0,f=p,p=d,d=h,h=u+b|0,u=l,l=c,c=a,a=b+v|0;t[0]+=a,t[1]+=c,t[2]+=l,t[3]+=u,t[4]+=h,t[5]+=d,t[6]+=p,t[7]+=f,i+=64,s-=64}return i}t.vp=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},46756:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9437),i=r(52887);t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var s=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,r){if(void 0===r&&(r=e.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t/536870912|0,s=t<<3,o=t%128<112?128:256;this._buffer[r]=128;for(var c=r+1;c<o-8;c++)this._buffer[c]=0;n.writeUint32BE(i,this._buffer,o-8),n.writeUint32BE(s,this._buffer,o-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,o),this._finished=!0}for(c=0;c<this.digestLength/8;c++)n.writeUint32BE(this._stateHi[c],e,8*c),n.writeUint32BE(this._stateLo[c],e,8*c+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.stateHi),i.wipe(e.stateLo),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(e,t,r,i,s,a,c){for(var l,u,h,d,p,f,g,y,m=r[0],b=r[1],v=r[2],w=r[3],_=r[4],E=r[5],S=r[6],I=r[7],A=i[0],O=i[1],C=i[2],x=i[3],T=i[4],P=i[5],k=i[6],N=i[7];c>=128;){for(var R=0;R<16;R++){var M=8*R+a;e[R]=n.readUint32BE(s,M),t[R]=n.readUint32BE(s,M+4)}for(R=0;R<80;R++){var D,L,j=m,U=b,B=v,F=w,V=_,$=E,H=S,z=A,K=O,q=C,G=x,W=T,Y=P,Q=k;if(p=65535&(u=N),f=u>>>16,g=65535&(l=I),y=l>>>16,p+=65535&(u=(T>>>14|_<<18)^(T>>>18|_<<14)^(_>>>9|T<<23)),f+=u>>>16,g+=65535&(l=(_>>>14|T<<18)^(_>>>18|T<<14)^(T>>>9|_<<23)),y+=l>>>16,p+=65535&(u=T&P^~T&k),f+=u>>>16,g+=65535&(l=_&E^~_&S),y+=l>>>16,l=o[2*R],p+=65535&(u=o[2*R+1]),f+=u>>>16,g+=65535&l,y+=l>>>16,l=e[R%16],f+=(u=t[R%16])>>>16,g+=65535&l,y+=l>>>16,g+=(f+=(p+=65535&u)>>>16)>>>16,p=65535&(u=d=65535&p|f<<16),f=u>>>16,g=65535&(l=h=65535&g|(y+=g>>>16)<<16),y=l>>>16,p+=65535&(u=(A>>>28|m<<4)^(m>>>2|A<<30)^(m>>>7|A<<25)),f+=u>>>16,g+=65535&(l=(m>>>28|A<<4)^(A>>>2|m<<30)^(A>>>7|m<<25)),y+=l>>>16,f+=(u=A&O^A&C^O&C)>>>16,g+=65535&(l=m&b^m&v^b&v),y+=l>>>16,D=65535&(g+=(f+=(p+=65535&u)>>>16)>>>16)|(y+=g>>>16)<<16,L=65535&p|f<<16,p=65535&(u=G),f=u>>>16,g=65535&(l=F),y=l>>>16,f+=(u=d)>>>16,g+=65535&(l=h),y+=l>>>16,b=j,v=U,w=B,_=F=65535&(g+=(f+=(p+=65535&u)>>>16)>>>16)|(y+=g>>>16)<<16,E=V,S=$,I=H,m=D,O=z,C=K,x=q,T=G=65535&p|f<<16,P=W,k=Y,N=Q,A=L,R%16==15)for(M=0;M<16;M++)l=e[M],p=65535&(u=t[M]),f=u>>>16,g=65535&l,y=l>>>16,l=e[(M+9)%16],p+=65535&(u=t[(M+9)%16]),f+=u>>>16,g+=65535&l,y+=l>>>16,h=e[(M+1)%16],p+=65535&(u=((d=t[(M+1)%16])>>>1|h<<31)^(d>>>8|h<<24)^(d>>>7|h<<25)),f+=u>>>16,g+=65535&(l=(h>>>1|d<<31)^(h>>>8|d<<24)^h>>>7),y+=l>>>16,h=e[(M+14)%16],f+=(u=((d=t[(M+14)%16])>>>19|h<<13)^(h>>>29|d<<3)^(d>>>6|h<<26))>>>16,g+=65535&(l=(h>>>19|d<<13)^(d>>>29|h<<3)^h>>>6),y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,e[M]=65535&g|y<<16,t[M]=65535&p|f<<16}p=65535&(u=A),f=u>>>16,g=65535&(l=m),y=l>>>16,l=r[0],f+=(u=i[0])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[0]=m=65535&g|y<<16,i[0]=A=65535&p|f<<16,p=65535&(u=O),f=u>>>16,g=65535&(l=b),y=l>>>16,l=r[1],f+=(u=i[1])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[1]=b=65535&g|y<<16,i[1]=O=65535&p|f<<16,p=65535&(u=C),f=u>>>16,g=65535&(l=v),y=l>>>16,l=r[2],f+=(u=i[2])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[2]=v=65535&g|y<<16,i[2]=C=65535&p|f<<16,p=65535&(u=x),f=u>>>16,g=65535&(l=w),y=l>>>16,l=r[3],f+=(u=i[3])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[3]=w=65535&g|y<<16,i[3]=x=65535&p|f<<16,p=65535&(u=T),f=u>>>16,g=65535&(l=_),y=l>>>16,l=r[4],f+=(u=i[4])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[4]=_=65535&g|y<<16,i[4]=T=65535&p|f<<16,p=65535&(u=P),f=u>>>16,g=65535&(l=E),y=l>>>16,l=r[5],f+=(u=i[5])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[5]=E=65535&g|y<<16,i[5]=P=65535&p|f<<16,p=65535&(u=k),f=u>>>16,g=65535&(l=S),y=l>>>16,l=r[6],f+=(u=i[6])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[6]=S=65535&g|y<<16,i[6]=k=65535&p|f<<16,p=65535&(u=N),f=u>>>16,g=65535&(l=I),y=l>>>16,l=r[7],f+=(u=i[7])>>>16,g+=65535&l,y+=l>>>16,y+=(g+=(f+=(p+=65535&u)>>>16)>>>16)>>>16,r[7]=I=65535&g|y<<16,i[7]=N=65535&p|f<<16,a+=128,c-=128}return a}t.hash=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},52887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wipe=function(e){for(var t=0;t<e.length;t++)e[t]=0;return e}},60550:(e,t,r)=>{"use strict";t.gi=t.Au=t.KS=t.kz=void 0;const n=r(81293),i=r(52887);function s(e){const t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}t.kz=32,t.KS=32;const o=new Uint8Array(32);o[0]=9;const a=s([56129,1]);function c(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function l(e,t,r){const n=~(r-1);for(let r=0;r<16;r++){const i=n&(e[r]^t[r]);e[r]^=i,t[r]^=i}}function u(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function h(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function d(e,t,r){let n,i,s=0,o=0,a=0,c=0,l=0,u=0,h=0,d=0,p=0,f=0,g=0,y=0,m=0,b=0,v=0,w=0,_=0,E=0,S=0,I=0,A=0,O=0,C=0,x=0,T=0,P=0,k=0,N=0,R=0,M=0,D=0,L=r[0],j=r[1],U=r[2],B=r[3],F=r[4],V=r[5],$=r[6],H=r[7],z=r[8],K=r[9],q=r[10],G=r[11],W=r[12],Y=r[13],Q=r[14],X=r[15];n=t[0],s+=n*L,o+=n*j,a+=n*U,c+=n*B,l+=n*F,u+=n*V,h+=n*$,d+=n*H,p+=n*z,f+=n*K,g+=n*q,y+=n*G,m+=n*W,b+=n*Y,v+=n*Q,w+=n*X,n=t[1],o+=n*L,a+=n*j,c+=n*U,l+=n*B,u+=n*F,h+=n*V,d+=n*$,p+=n*H,f+=n*z,g+=n*K,y+=n*q,m+=n*G,b+=n*W,v+=n*Y,w+=n*Q,_+=n*X,n=t[2],a+=n*L,c+=n*j,l+=n*U,u+=n*B,h+=n*F,d+=n*V,p+=n*$,f+=n*H,g+=n*z,y+=n*K,m+=n*q,b+=n*G,v+=n*W,w+=n*Y,_+=n*Q,E+=n*X,n=t[3],c+=n*L,l+=n*j,u+=n*U,h+=n*B,d+=n*F,p+=n*V,f+=n*$,g+=n*H,y+=n*z,m+=n*K,b+=n*q,v+=n*G,w+=n*W,_+=n*Y,E+=n*Q,S+=n*X,n=t[4],l+=n*L,u+=n*j,h+=n*U,d+=n*B,p+=n*F,f+=n*V,g+=n*$,y+=n*H,m+=n*z,b+=n*K,v+=n*q,w+=n*G,_+=n*W,E+=n*Y,S+=n*Q,I+=n*X,n=t[5],u+=n*L,h+=n*j,d+=n*U,p+=n*B,f+=n*F,g+=n*V,y+=n*$,m+=n*H,b+=n*z,v+=n*K,w+=n*q,_+=n*G,E+=n*W,S+=n*Y,I+=n*Q,A+=n*X,n=t[6],h+=n*L,d+=n*j,p+=n*U,f+=n*B,g+=n*F,y+=n*V,m+=n*$,b+=n*H,v+=n*z,w+=n*K,_+=n*q,E+=n*G,S+=n*W,I+=n*Y,A+=n*Q,O+=n*X,n=t[7],d+=n*L,p+=n*j,f+=n*U,g+=n*B,y+=n*F,m+=n*V,b+=n*$,v+=n*H,w+=n*z,_+=n*K,E+=n*q,S+=n*G,I+=n*W,A+=n*Y,O+=n*Q,C+=n*X,n=t[8],p+=n*L,f+=n*j,g+=n*U,y+=n*B,m+=n*F,b+=n*V,v+=n*$,w+=n*H,_+=n*z,E+=n*K,S+=n*q,I+=n*G,A+=n*W,O+=n*Y,C+=n*Q,x+=n*X,n=t[9],f+=n*L,g+=n*j,y+=n*U,m+=n*B,b+=n*F,v+=n*V,w+=n*$,_+=n*H,E+=n*z,S+=n*K,I+=n*q,A+=n*G,O+=n*W,C+=n*Y,x+=n*Q,T+=n*X,n=t[10],g+=n*L,y+=n*j,m+=n*U,b+=n*B,v+=n*F,w+=n*V,_+=n*$,E+=n*H,S+=n*z,I+=n*K,A+=n*q,O+=n*G,C+=n*W,x+=n*Y,T+=n*Q,P+=n*X,n=t[11],y+=n*L,m+=n*j,b+=n*U,v+=n*B,w+=n*F,_+=n*V,E+=n*$,S+=n*H,I+=n*z,A+=n*K,O+=n*q,C+=n*G,x+=n*W,T+=n*Y,P+=n*Q,k+=n*X,n=t[12],m+=n*L,b+=n*j,v+=n*U,w+=n*B,_+=n*F,E+=n*V,S+=n*$,I+=n*H,A+=n*z,O+=n*K,C+=n*q,x+=n*G,T+=n*W,P+=n*Y,k+=n*Q,N+=n*X,n=t[13],b+=n*L,v+=n*j,w+=n*U,_+=n*B,E+=n*F,S+=n*V,I+=n*$,A+=n*H,O+=n*z,C+=n*K,x+=n*q,T+=n*G,P+=n*W,k+=n*Y,N+=n*Q,R+=n*X,n=t[14],v+=n*L,w+=n*j,_+=n*U,E+=n*B,S+=n*F,I+=n*V,A+=n*$,O+=n*H,C+=n*z,x+=n*K,T+=n*q,P+=n*G,k+=n*W,N+=n*Y,R+=n*Q,M+=n*X,n=t[15],w+=n*L,_+=n*j,E+=n*U,S+=n*B,I+=n*F,A+=n*V,O+=n*$,C+=n*H,x+=n*z,T+=n*K,P+=n*q,k+=n*G,N+=n*W,R+=n*Y,M+=n*Q,D+=n*X,s+=38*_,o+=38*E,a+=38*S,c+=38*I,l+=38*A,u+=38*O,h+=38*C,d+=38*x,p+=38*T,f+=38*P,g+=38*k,y+=38*N,m+=38*R,b+=38*M,v+=38*D,i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,s+=i-1+37*(i-1),i=1,n=s+i+65535,i=Math.floor(n/65536),s=n-65536*i,n=o+i+65535,i=Math.floor(n/65536),o=n-65536*i,n=a+i+65535,i=Math.floor(n/65536),a=n-65536*i,n=c+i+65535,i=Math.floor(n/65536),c=n-65536*i,n=l+i+65535,i=Math.floor(n/65536),l=n-65536*i,n=u+i+65535,i=Math.floor(n/65536),u=n-65536*i,n=h+i+65535,i=Math.floor(n/65536),h=n-65536*i,n=d+i+65535,i=Math.floor(n/65536),d=n-65536*i,n=p+i+65535,i=Math.floor(n/65536),p=n-65536*i,n=f+i+65535,i=Math.floor(n/65536),f=n-65536*i,n=g+i+65535,i=Math.floor(n/65536),g=n-65536*i,n=y+i+65535,i=Math.floor(n/65536),y=n-65536*i,n=m+i+65535,i=Math.floor(n/65536),m=n-65536*i,n=b+i+65535,i=Math.floor(n/65536),b=n-65536*i,n=v+i+65535,i=Math.floor(n/65536),v=n-65536*i,n=w+i+65535,i=Math.floor(n/65536),w=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=c,e[4]=l,e[5]=u,e[6]=h,e[7]=d,e[8]=p,e[9]=f,e[10]=g,e[11]=y,e[12]=m,e[13]=b,e[14]=v,e[15]=w}function p(e,t){d(e,t,t)}function f(e,t){const r=new Uint8Array(32),n=new Float64Array(80),i=s(),o=s(),f=s(),g=s(),y=s(),m=s();for(let t=0;t<31;t++)r[t]=e[t];r[31]=127&e[31]|64,r[0]&=248,function(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}(n,t);for(let e=0;e<16;e++)o[e]=n[e];i[0]=g[0]=1;for(let e=254;e>=0;--e){const t=r[e>>>3]>>>(7&e)&1;l(i,o,t),l(f,g,t),u(y,i,f),h(i,i,f),u(f,o,g),h(o,o,g),p(g,y),p(m,i),d(i,f,i),d(f,o,y),u(y,i,f),h(i,i,f),p(o,i),h(f,g,m),d(i,f,a),u(i,i,g),d(f,f,i),d(i,g,m),d(g,o,n),p(o,y),l(i,o,t),l(f,g,t)}for(let e=0;e<16;e++)n[e+16]=i[e],n[e+32]=f[e],n[e+48]=o[e],n[e+64]=g[e];const b=n.subarray(32),v=n.subarray(16);!function(e,t){const r=s();for(let e=0;e<16;e++)r[e]=t[e];for(let e=253;e>=0;e--)p(r,r),2!==e&&4!==e&&d(r,r,t);for(let t=0;t<16;t++)e[t]=r[t]}(b,b),d(v,v,b);const w=new Uint8Array(32);return function(e,t){const r=s(),n=s();for(let e=0;e<16;e++)n[e]=t[e];c(n),c(n),c(n);for(let e=0;e<2;e++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const e=r[15]>>16&1;r[14]&=65535,l(n,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&n[t],e[2*t+1]=n[t]>>8}(w,v),w}t.Au=function(e){const r=(0,n.randomBytes)(32,e),s=function(e){if(e.length!==t.KS)throw new Error(`x25519: seed must be ${t.KS} bytes`);const r=new Uint8Array(e);return{publicKey:(n=r,f(n,o)),secretKey:r};var n}(r);return(0,i.wipe)(r),s},t.gi=function(e,r,n=!1){if(e.length!==t.kz)throw new Error("X25519: incorrect secret key length");if(r.length!==t.kz)throw new Error("X25519: incorrect public key length");const i=f(e,r);if(n){let e=0;for(let t=0;t<i.length;t++)e|=i[t];if(0===e)throw new Error("X25519: invalid shared key")}return i}},45086:(e,t,r)=>{"use strict";function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},64250:(e,t,r)=>{"use strict";var n=r(34406);function i(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function s(){return void 0!==n&&void 0!==n.versions&&void 0!==n.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=i,t.isNode=s,t.isBrowser=function(){return!i()&&!s()}},5010:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7297);n.__exportStar(r(45086),t),n.__exportStar(r(64250),t)},7297:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>O,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>p,__extends:()=>i,__generator:()=>h,__importDefault:()=>I,__importStar:()=>S,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>y,__spreadArrays:()=>m,__values:()=>f});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5774:(e,t,r)=>{"use strict";r.d(t,{q:()=>n});class n{}},33843:(e,t,r)=>{"use strict";r.r(t),r.d(t,{IEvents:()=>n.q});var n=r(5774)},57052:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEARTBEAT_EVENTS=t.HEARTBEAT_INTERVAL=void 0;const n=r(10666);t.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,t.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},13566:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(87592).__exportStar(r(57052),t)},47798:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeat=void 0;const n=r(87592),i=r(22699),s=r(10666),o=r(87826),a=r(13566);class c extends o.IHeartBeat{constructor(e){super(e),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(null==e?void 0:e.interval)||a.HEARTBEAT_INTERVAL}static init(e){return n.__awaiter(this,void 0,void 0,(function*(){const t=new c(e);return yield t.init(),t}))}init(){return n.__awaiter(this,void 0,void 0,(function*(){yield this.initialize()}))}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return n.__awaiter(this,void 0,void 0,(function*(){this.intervalRef=setInterval((()=>this.pulse()),s.toMiliseconds(this.interval))}))}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}t.HeartBeat=c},67660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(87592);n.__exportStar(r(47798),t),n.__exportStar(r(87826),t),n.__exportStar(r(13566),t)},81829:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHeartBeat=void 0;const n=r(33843);class i extends n.IEvents{constructor(e){super()}}t.IHeartBeat=i},87826:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(87592).__exportStar(r(81829),t)},87592:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>O,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>p,__extends:()=>i,__generator:()=>h,__importDefault:()=>I,__importStar:()=>S,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>y,__spreadArrays:()=>m,__values:()=>f});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},77814:e=>{"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},47337:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PINO_CUSTOM_CONTEXT_KEY=t.PINO_LOGGER_DEFAULTS=void 0,t.PINO_LOGGER_DEFAULTS={level:"info"},t.PINO_CUSTOM_CONTEXT_KEY="custom_context"},52500:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;const n=r(42126),i=n.__importDefault(r(69413));Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return i.default}}),n.__exportStar(r(47337),t),n.__exportStar(r(48846),t)},48846:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateChildLogger=t.formatChildLoggerContext=t.getLoggerContext=t.setBrowserLoggerContext=t.getBrowserLoggerContext=t.getDefaultLoggerOptions=void 0;const n=r(47337);function i(e,t=n.PINO_CUSTOM_CONTEXT_KEY){return e[t]||""}function s(e,t,r=n.PINO_CUSTOM_CONTEXT_KEY){return e[r]=t,e}function o(e,t=n.PINO_CUSTOM_CONTEXT_KEY){let r="";return r=void 0===e.bindings?i(e,t):e.bindings().context||"",r}function a(e,t,r=n.PINO_CUSTOM_CONTEXT_KEY){const i=o(e,r);return i.trim()?`${i}/${t}`:t}t.getDefaultLoggerOptions=function(e){return Object.assign(Object.assign({},e),{level:(null==e?void 0:e.level)||n.PINO_LOGGER_DEFAULTS.level})},t.getBrowserLoggerContext=i,t.setBrowserLoggerContext=s,t.getLoggerContext=o,t.formatChildLoggerContext=a,t.generateChildLogger=function(e,t,r=n.PINO_CUSTOM_CONTEXT_KEY){const i=a(e,t,r);return s(e.child({context:i}),i,r)}},42126:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>O,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>p,__extends:()=>i,__generator:()=>h,__importDefault:()=>I,__importStar:()=>S,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>y,__spreadArrays:()=>m,__values:()=>f});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},64187:()=>{},3947:()=>{},27025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(52388);n.__exportStar(r(9567),t),n.__exportStar(r(16994),t)},9567:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},16994:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},10666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(52388);n.__exportStar(r(88914),t),n.__exportStar(r(1415),t),n.__exportStar(r(28580),t),n.__exportStar(r(27025),t)},28580:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r(52388).__exportStar(r(5955),t)},5955:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},5492:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(27025);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},64539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},88914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(52388);n.__exportStar(r(64539),t),n.__exportStar(r(5492),t)},1415:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r},52388:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>w,__asyncGenerator:()=>v,__asyncValues:()=>_,__await:()=>b,__awaiter:()=>u,__classPrivateFieldGet:()=>A,__classPrivateFieldSet:()=>O,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>p,__extends:()=>i,__generator:()=>h,__importDefault:()=>I,__importStar:()=>S,__makeTemplateObject:()=>E,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>y,__spreadArrays:()=>m,__values:()=>f});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof b?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function O(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},34748:(e,t,r)=>{"use strict";const n=r(57785),i=r(15554),s=r(15452),o=r(40063),a=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function u(e,t){return t.decode?i(e):e}function h(e){return Array.isArray(e)?e.sort():"object"==typeof e?h(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function d(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function p(e){const t=(e=d(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function f(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=r):n[e]=r};case"bracket":return(e,r,n)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"colon-list-separator":return(e,r,n)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],r):n[e]=[r]:n[e]=r};case"comma":case"separator":return(t,r,n)=>{const i="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!i&&u(r,e).includes(e.arrayFormatSeparator);r=s?u(r,e):r;const o=i||s?r.split(e.arrayFormatSeparator).map((t=>u(t,e))):null===r?r:u(r,e);n[t]=o};case"bracket-separator":return(t,r,n)=>{const i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(n[t]=r?u(r,e):r);const s=null===r?[]:r.split(e.arrayFormatSeparator).map((t=>u(t,e)));void 0!==n[t]?n[t]=[].concat(n[t],s):n[t]=s};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const i of e.split("&")){if(""===i)continue;let[e,o]=s(t.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:u(o,t),r(u(e,t),o,n)}for(const e of Object.keys(n)){const r=n[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=f(r[e],t);else n[e]=f(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce(((e,t)=>{const r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=h(r):e[t]=r,e}),Object.create(null))}t.extract=p,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const r=r=>t.skipNull&&null==e[r]||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{const i=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[",i,"]"].join("")]:[...r,[l(t,e),"[",l(i,e),"]=",l(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),":list="].join("")]:[...r,[l(t,e),":list=",l(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{const t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length?[[l(r,e),t,l(i,e)].join("")]:[[n,l(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,l(t,e)]:[...r,[l(t,e),"=",l(n,e)].join("")]}}(t),i={};for(const t of Object.keys(e))r(t)||(i[t]=e[t]);const s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map((r=>{const i=e[r];return void 0===i?"":null===i?l(r,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?l(r,t)+"[]":i.reduce(n(r),[]).join("&"):l(r,t)+"="+l(i,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);const[r,n]=s(e,"#");return Object.assign({url:r.split("?")[0]||"",query:g(p(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:u(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[a]:!0},r);const n=d(e.url).split("?")[0]||"",i=t.extract(e.url),s=t.parse(i,{sort:!1}),o=Object.assign(s,e.query);let c=t.stringify(o,r);c&&(c=`?${c}`);let u=function(e){let t="";const r=e.indexOf("#");return-1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(u=`#${r[a]?l(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${n}${c}${u}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[a]:!1},n);const{url:i,query:s,fragmentIdentifier:c}=t.parseUrl(e,n);return t.stringifyUrl({url:i,query:o(s,r),fragmentIdentifier:c},n)},t.exclude=(e,r,n)=>{const i=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,i,n)}},4997:(e,t)=>{"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},51726:(e,t,r)=>{"use strict";t.D=void 0;const n=r(4997);t.D=function(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}const i=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}(),name:i}}},15554:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp("("+t+")|([^%]+?)","gi"),n=new RegExp("("+t+")+","gi");function i(e,t){try{return[decodeURIComponent(e.join(""))]}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],i(r),i(n))}function s(e){try{return decodeURIComponent(e)}catch(s){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=i(t,n).join("")).match(r)||[];return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=n.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var i=s(r[0]);i!==r[0]&&(t[r[0]]=i)}r=n.exec(e)}t["%C2"]="�";for(var o=Object.keys(t),a=0;a<o.length;a++){var c=o[a];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},22699:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,s,o,l;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},40063:e=>{"use strict";e.exports=function(e,t){for(var r={},n=Object.keys(e),i=Array.isArray(t),s=0;s<n.length;s++){var o=n[s],a=e[o];(i?-1!==t.indexOf(o):t(o,a,e))&&(r[o]=a)}return r}},33958:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",i=1,s=2,o=9007199254740991,a="[object Arguments]",c="[object Array]",l="[object AsyncFunction]",u="[object Boolean]",h="[object Date]",d="[object Error]",p="[object Function]",f="[object GeneratorFunction]",g="[object Map]",y="[object Number]",m="[object Null]",b="[object Object]",v="[object Promise]",w="[object Proxy]",_="[object RegExp]",E="[object Set]",S="[object String]",I="[object Undefined]",A="[object WeakMap]",O="[object ArrayBuffer]",C="[object DataView]",x=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,P={};P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P[a]=P[c]=P[O]=P[u]=P[C]=P[h]=P[d]=P[p]=P[g]=P[y]=P[b]=P[_]=P[E]=P[S]=P[A]=!1;var k="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,N="object"==typeof self&&self&&self.Object===Object&&self,R=k||N||Function("return this")(),M=t&&!t.nodeType&&t,D=M&&e&&!e.nodeType&&e,L=D&&D.exports===M,j=L&&k.process,U=function(){try{return j&&j.binding&&j.binding("util")}catch(e){}}(),B=U&&U.isTypedArray;function F(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function V(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function $(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var H,z,K,q=Array.prototype,G=Function.prototype,W=Object.prototype,Y=R["__core-js_shared__"],Q=G.toString,X=W.hasOwnProperty,Z=(H=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+H:"",J=W.toString,ee=RegExp("^"+Q.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=L?R.Buffer:void 0,re=R.Symbol,ne=R.Uint8Array,ie=W.propertyIsEnumerable,se=q.splice,oe=re?re.toStringTag:void 0,ae=Object.getOwnPropertySymbols,ce=te?te.isBuffer:void 0,le=(z=Object.keys,K=Object,function(e){return z(K(e))}),ue=De(R,"DataView"),he=De(R,"Map"),de=De(R,"Promise"),pe=De(R,"Set"),fe=De(R,"WeakMap"),ge=De(Object,"create"),ye=Be(ue),me=Be(he),be=Be(de),ve=Be(pe),we=Be(fe),_e=re?re.prototype:void 0,Ee=_e?_e.valueOf:void 0;function Se(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ae(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Ae;++t<r;)this.add(e[t])}function Ce(e){var t=this.__data__=new Ie(e);this.size=t.size}function xe(e,t){for(var r=e.length;r--;)if(Fe(e[r][0],t))return r;return-1}function Te(e){return null==e?void 0===e?I:m:oe&&oe in Object(e)?function(e){var t=X.call(e,oe),r=e[oe];try{e[oe]=void 0;var n=!0}catch(e){}var i=J.call(e);return n&&(t?e[oe]=r:delete e[oe]),i}(e):function(e){return J.call(e)}(e)}function Pe(e){return Ge(e)&&Te(e)==a}function ke(e,t,r,n,o){return e===t||(null==e||null==t||!Ge(e)&&!Ge(t)?e!=e&&t!=t:function(e,t,r,n,o,l){var p=$e(e),f=$e(t),m=p?c:je(e),v=f?c:je(t),w=(m=m==a?b:m)==b,I=(v=v==a?b:v)==b,A=m==v;if(A&&He(e)){if(!He(t))return!1;p=!0,w=!1}if(A&&!w)return l||(l=new Ce),p||We(e)?Ne(e,t,r,n,o,l):function(e,t,r,n,o,a,c){switch(r){case C:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!a(new ne(e),new ne(t)));case u:case h:case y:return Fe(+e,+t);case d:return e.name==t.name&&e.message==t.message;case _:case S:return e==t+"";case g:var l=V;case E:var p=n&i;if(l||(l=$),e.size!=t.size&&!p)return!1;var f=c.get(e);if(f)return f==t;n|=s,c.set(e,t);var m=Ne(l(e),l(t),n,o,a,c);return c.delete(e),m;case"[object Symbol]":if(Ee)return Ee.call(e)==Ee.call(t)}return!1}(e,t,m,r,n,o,l);if(!(r&i)){var x=w&&X.call(e,"__wrapped__"),T=I&&X.call(t,"__wrapped__");if(x||T){var P=x?e.value():e,k=T?t.value():t;return l||(l=new Ce),o(P,k,r,n,l)}}return!!A&&(l||(l=new Ce),function(e,t,r,n,s,o){var a=r&i,c=Re(e),l=c.length;if(l!=Re(t).length&&!a)return!1;for(var u=l;u--;){var h=c[u];if(!(a?h in t:X.call(t,h)))return!1}var d=o.get(e);if(d&&o.get(t))return d==t;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){var g=e[h=c[u]],y=t[h];if(n)var m=a?n(y,g,h,t,e,o):n(g,y,h,e,t,o);if(!(void 0===m?g===y||s(g,y,r,n,o):m)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var b=e.constructor,v=t.constructor;b==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,r,n,o,l))}(e,t,r,n,ke,o))}function Ne(e,t,r,n,o,a){var c=r&i,l=e.length,u=t.length;if(l!=u&&!(c&&u>l))return!1;var h=a.get(e);if(h&&a.get(t))return h==t;var d=-1,p=!0,f=r&s?new Oe:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var g=e[d],y=t[d];if(n)var m=c?n(y,g,d,t,e,a):n(g,y,d,e,t,a);if(void 0!==m){if(m)continue;p=!1;break}if(f){if(!F(t,(function(e,t){if(i=t,!f.has(i)&&(g===e||o(g,e,r,n,a)))return f.push(t);var i}))){p=!1;break}}else if(g!==y&&!o(g,y,r,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function Re(e){return function(e,t,r){var n=t(e);return $e(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,Ye,Le)}function Me(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function De(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!qe(e)||function(e){return!!Z&&Z in e}(e))&&(ze(e)?ee:x).test(Be(e))}(r)?r:void 0}Se.prototype.clear=function(){this.__data__=ge?ge(null):{},this.size=0},Se.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Se.prototype.get=function(e){var t=this.__data__;if(ge){var r=t[e];return r===n?void 0:r}return X.call(t,e)?t[e]:void 0},Se.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:X.call(t,e)},Se.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ge&&void 0===t?n:t,this},Ie.prototype.clear=function(){this.__data__=[],this.size=0},Ie.prototype.delete=function(e){var t=this.__data__,r=xe(t,e);return!(r<0||(r==t.length-1?t.pop():se.call(t,r,1),--this.size,0))},Ie.prototype.get=function(e){var t=this.__data__,r=xe(t,e);return r<0?void 0:t[r][1]},Ie.prototype.has=function(e){return xe(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var r=this.__data__,n=xe(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Ae.prototype.clear=function(){this.size=0,this.__data__={hash:new Se,map:new(he||Ie),string:new Se}},Ae.prototype.delete=function(e){var t=Me(this,e).delete(e);return this.size-=t?1:0,t},Ae.prototype.get=function(e){return Me(this,e).get(e)},Ae.prototype.has=function(e){return Me(this,e).has(e)},Ae.prototype.set=function(e,t){var r=Me(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Oe.prototype.add=Oe.prototype.push=function(e){return this.__data__.set(e,n),this},Oe.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.clear=function(){this.__data__=new Ie,this.size=0},Ce.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Ce.prototype.get=function(e){return this.__data__.get(e)},Ce.prototype.has=function(e){return this.__data__.has(e)},Ce.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Ie){var n=r.__data__;if(!he||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ae(n)}return r.set(e,t),this.size=r.size,this};var Le=ae?function(e){return null==e?[]:(e=Object(e),function(t,r){for(var n=-1,i=null==t?0:t.length,s=0,o=[];++n<i;){var a=t[n];c=a,ie.call(e,c)&&(o[s++]=a)}var c;return o}(ae(e)))}:function(){return[]},je=Te;function Ue(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function Be(e){if(null!=e){try{return Q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,t){return e===t||e!=e&&t!=t}(ue&&je(new ue(new ArrayBuffer(1)))!=C||he&&je(new he)!=g||de&&je(de.resolve())!=v||pe&&je(new pe)!=E||fe&&je(new fe)!=A)&&(je=function(e){var t=Te(e),r=t==b?e.constructor:void 0,n=r?Be(r):"";if(n)switch(n){case ye:return C;case me:return g;case be:return v;case ve:return E;case we:return A}return t});var Ve=Pe(function(){return arguments}())?Pe:function(e){return Ge(e)&&X.call(e,"callee")&&!ie.call(e,"callee")},$e=Array.isArray,He=ce||function(){return!1};function ze(e){if(!qe(e))return!1;var t=Te(e);return t==p||t==f||t==l||t==w}function Ke(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ge(e){return null!=e&&"object"==typeof e}var We=B?function(e){return function(t){return e(t)}}(B):function(e){return Ge(e)&&Ke(e.length)&&!!P[Te(e)]};function Ye(e){return null!=(t=e)&&Ke(t.length)&&!ze(t)?function(e,t){var r=$e(e),n=!r&&Ve(e),i=!r&&!n&&He(e),s=!r&&!n&&!i&&We(e),o=r||n||i||s,a=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var l in e)!t&&!X.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Ue(l,c))||a.push(l);return a}(e):function(e){if(r=(t=e)&&t.constructor,t!==("function"==typeof r&&r.prototype||W))return le(e);var t,r,n=[];for(var i in Object(e))X.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e);var t}e.exports=function(e,t){return ke(e,t)}},77257:(e,t,r)=>{"use strict";r.d(t,{Pi:()=>o.P,fv:()=>l}),r(20580);var n=r(72615),i=r(40626),s=(r(30571),r(66065)),o=r(49839),a=(r(22081),r(80075)),c=r(2784);function l(e,t){return(0,c.useState)((function(){return(0,a.observable)(e(),t,{autoBind:!0})}))[0]}r(92363),r(97432),(0,i.z0)(n.m),s.O.finalizeAllImmediately},29782:(e,t,r)=>{"use strict";r.r(t),r.d(t,{QRCodeCanvas:()=>A,QRCodeSVG:()=>O,default:()=>C});var n,i=r(2784),s=Object.defineProperty,o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,l=(e,t,r)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))a.call(t,r)&&l(e,r,t[r]);if(o)for(var r of o(t))c.call(t,r)&&l(e,r,t[r]);return e},h=(e,t)=>{var r={};for(var n in e)a.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&o)for(var n of o(e))t.indexOf(n)<0&&c.call(e,n)&&(r[n]=e[n]);return r};(e=>{const t=class{constructor(e,r,n,i){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let o=[];for(let e=0;e<this.size;e++)o.push(!1);for(let e=0;e<this.size;e++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(n);if(this.drawCodewords(a),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(i=t,e=r),this.applyMask(t)}}s(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(r,n){const i=e.QrSegment.makeSegments(r);return t.encodeSegments(i,n)}static encodeBinary(r,n){const i=e.QrSegment.makeBytes(r);return t.encodeSegments([i],n)}static encodeSegments(e,r,i=1,o=40,c=-1,l=!0){if(!(t.MIN_VERSION<=i&&i<=o&&o<=t.MAX_VERSION)||c<-1||c>7)throw new RangeError("Invalid value");let u,h;for(u=i;;u++){const n=8*t.getNumDataCodewords(u,r),i=a.getTotalBits(e,u);if(i<=n){h=i;break}if(u>=o)throw new RangeError("Data too long")}for(const e of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])l&&h<=8*t.getNumDataCodewords(u,e)&&(r=e);let d=[];for(const t of e){n(t.mode.modeBits,4,d),n(t.numChars,t.mode.numCharCountBits(u),d);for(const e of t.getData())d.push(e)}s(d.length==h);const p=8*t.getNumDataCodewords(u,r);s(d.length<=p),n(0,Math.min(4,p-d.length),d),n(0,(8-d.length%8)%8,d),s(d.length%8==0);for(let e=236;d.length<p;e^=253)n(e,8,d);let f=[];for(;8*f.length<d.length;)f.push(0);return d.forEach(((e,t)=>f[t>>>3]|=e<<7-(7&t))),new t(u,r,f,c)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let n=0;n<t;n++)0==r&&0==n||0==r&&n==t-1||r==t-1&&0==n||this.drawAlignmentPattern(e[r],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let r=t;for(let e=0;e<10;e++)r=r<<1^1335*(r>>>9);const n=21522^(t<<10|r);s(n>>>15==0);for(let e=0;e<=5;e++)this.setFunctionModule(8,e,i(n,e));this.setFunctionModule(8,7,i(n,6)),this.setFunctionModule(8,8,i(n,7)),this.setFunctionModule(7,8,i(n,8));for(let e=9;e<15;e++)this.setFunctionModule(14-e,8,i(n,e));for(let e=0;e<8;e++)this.setFunctionModule(this.size-1-e,8,i(n,e));for(let e=8;e<15;e++)this.setFunctionModule(8,this.size-15+e,i(n,e));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let t=0;t<12;t++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let e=0;e<18;e++){const r=i(t,e),n=this.size-11+e%3,s=Math.floor(e/3);this.setFunctionModule(n,s,r),this.setFunctionModule(s,n,r)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let n=-4;n<=4;n++){const i=Math.max(Math.abs(n),Math.abs(r)),s=e+n,o=t+r;0<=s&&s<this.size&&0<=o&&o<this.size&&this.setFunctionModule(s,o,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){const r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw new RangeError("Invalid argument");const i=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],o=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],a=Math.floor(t.getNumRawDataModules(r)/8),c=i-a%i,l=Math.floor(a/i);let u=[];const h=t.reedSolomonComputeDivisor(o);for(let r=0,n=0;r<i;r++){let i=e.slice(n,n+l-o+(r<c?0:1));n+=i.length;const s=t.reedSolomonComputeRemainder(i,h);r<c&&i.push(0),u.push(i.concat(s))}let d=[];for(let e=0;e<u[0].length;e++)u.forEach(((t,r)=>{(e!=l-o||r>=c)&&d.push(t[e])}));return s(d.length==a),d}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let n=0;n<this.size;n++)for(let s=0;s<2;s++){const o=t-s,a=0==(t+1&2)?this.size-1-n:n;!this.isFunction[a][o]&&r<8*e.length&&(this.modules[a][o]=i(e[r>>>3],7-(7&r)),r++)}}s(r==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let n;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let r=0;r<this.size;r++){let n=!1,i=0,s=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[r][o]==n?(i++,5==i?e+=t.PENALTY_N1:i>5&&e++):(this.finderPenaltyAddHistory(i,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[r][o],i=1);e+=this.finderPenaltyTerminateAndCount(n,i,s)*t.PENALTY_N3}for(let r=0;r<this.size;r++){let n=!1,i=0,s=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[o][r]==n?(i++,5==i?e+=t.PENALTY_N1:i>5&&e++):(this.finderPenaltyAddHistory(i,s),n||(e+=this.finderPenaltyCountPatterns(s)*t.PENALTY_N3),n=this.modules[o][r],i=1);e+=this.finderPenaltyTerminateAndCount(n,i,s)*t.PENALTY_N3}for(let r=0;r<this.size-1;r++)for(let n=0;n<this.size-1;n++){const i=this.modules[r][n];i==this.modules[r][n+1]&&i==this.modules[r+1][n]&&i==this.modules[r+1][n+1]&&(e+=t.PENALTY_N2)}let r=0;for(const e of this.modules)r=e.reduce(((e,t)=>e+(t?1:0)),r);const n=this.size*this.size,i=Math.ceil(Math.abs(20*r-10*n)/n)-1;return s(0<=i&&i<=9),e+=i*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let r=[6];for(let n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return s(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let n=1;for(let i=0;i<e;i++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],n),e+1<r.length&&(r[e]^=r[e+1]);n=t.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(e,r){let n=r.map((e=>0));for(const i of e){const e=i^n.shift();n.push(0),r.forEach(((r,i)=>n[i]^=t.reedSolomonMultiply(r,e)))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let r=0;for(let n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;return s(r>>>8==0),r}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};let r=t;function n(e,t,r){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let n=t-1;n>=0;n--)r.push(e>>>n&1)}function i(e,t){return 0!=(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],e.QrCode=r;const o=class{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(e){let t=[];for(const r of e)n(r,8,t);return new o(o.Mode.BYTE,e.length,t)}static makeNumeric(e){if(!o.isNumeric(e))throw new RangeError("String contains non-numeric characters");let t=[];for(let r=0;r<e.length;){const i=Math.min(e.length-r,3);n(parseInt(e.substr(r,i),10),3*i+1,t),r+=i}return new o(o.Mode.NUMERIC,e.length,t)}static makeAlphanumeric(e){if(!o.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");let t,r=[];for(t=0;t+2<=e.length;t+=2){let i=45*o.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t));i+=o.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t+1)),n(i,11,r)}return t<e.length&&n(o.ALPHANUMERIC_CHARSET.indexOf(e.charAt(t)),6,r),new o(o.Mode.ALPHANUMERIC,e.length,r)}static makeSegments(e){return""==e?[]:o.isNumeric(e)?[o.makeNumeric(e)]:o.isAlphanumeric(e)?[o.makeAlphanumeric(e)]:[o.makeBytes(o.toUtf8ByteArray(e))]}static makeEci(e){let t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)n(e,8,t);else if(e<16384)n(2,2,t),n(e,14,t);else{if(!(e<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,t),n(e,21,t)}return new o(o.Mode.ECI,0,t)}static isNumeric(e){return o.NUMERIC_REGEX.test(e)}static isAlphanumeric(e){return o.ALPHANUMERIC_REGEX.test(e)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(const n of e){const e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;r+=4+e+n.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substr(r+1,2),16)),r+=2);return t}};let a=o;a.NUMERIC_REGEX=/^[0-9]*$/,a.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,a.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",e.QrSegment=a})(n||(n={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};let r=t;r.LOW=new t(0,1),r.MEDIUM=new t(1,0),r.QUARTILE=new t(2,3),r.HIGH=new t(3,2),e.Ecc=r})(t=e.QrCode||(e.QrCode={}))})(n||(n={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};let r=t;r.NUMERIC=new t(1,[10,12,14]),r.ALPHANUMERIC=new t(2,[9,11,13]),r.BYTE=new t(4,[8,16,16]),r.KANJI=new t(8,[8,10,12]),r.ECI=new t(7,[0,0,0]),e.Mode=r})(t=e.QrSegment||(e.QrSegment={}))})(n||(n={}));var d=n,p={L:d.QrCode.Ecc.LOW,M:d.QrCode.Ecc.MEDIUM,Q:d.QrCode.Ecc.QUARTILE,H:d.QrCode.Ecc.HIGH},f=128,g="L",y="#FFFFFF",m="#000000",b=!1,v=4,w=.1;function _(e,t=0){const r=[];return e.forEach((function(e,n){let i=null;e.forEach((function(s,o){if(!s&&null!==i)return r.push(`M${i+t} ${n+t}h${o-i}v1H${i+t}z`),void(i=null);if(o!==e.length-1)s&&null===i&&(i=o);else{if(!s)return;null===i?r.push(`M${o+t},${n+t} h1v1H${o+t}z`):r.push(`M${i+t},${n+t} h${o+1-i}v1H${i+t}z`)}}))})),r.join("")}function E(e,t){return e.slice().map(((e,r)=>r<t.y||r>=t.y+t.h?e:e.map(((e,r)=>(r<t.x||r>=t.x+t.w)&&e))))}function S(e,t,r,n){if(null==n)return null;const i=r?v:0,s=e.length+2*i,o=Math.floor(t*w),a=s/t,c=(n.width||o)*a,l=(n.height||o)*a,u=null==n.x?e.length/2-c/2:n.x*a,h=null==n.y?e.length/2-l/2:n.y*a;let d=null;if(n.excavate){let e=Math.floor(u),t=Math.floor(h);d={x:e,y:t,w:Math.ceil(c+u-e),h:Math.ceil(l+h-t)}}return{x:u,y:h,h:l,w:c,excavation:d}}var I=function(){try{(new Path2D).addPath(new Path2D)}catch(e){return!1}return!0}();function A(e){const t=e,{value:r,size:n=f,level:s=g,bgColor:o=y,fgColor:a=m,includeMargin:c=b,style:l,imageSettings:w}=t,A=h(t,["value","size","level","bgColor","fgColor","includeMargin","style","imageSettings"]),O=null==w?void 0:w.src,C=(0,i.useRef)(null),x=(0,i.useRef)(null),[T,P]=(0,i.useState)(!1);(0,i.useEffect)((()=>{if(null!=C.current){const e=C.current,t=e.getContext("2d");if(!t)return;let i=d.QrCode.encodeText(r,p[s]).getModules();const l=c?v:0,u=i.length+2*l,h=S(i,n,c,w),f=x.current,g=null!=h&&null!==f&&f.complete&&0!==f.naturalHeight&&0!==f.naturalWidth;g&&null!=h.excavation&&(i=E(i,h.excavation));const y=window.devicePixelRatio||1;e.height=e.width=n*y;const m=n/u*y;t.scale(m,m),t.fillStyle=o,t.fillRect(0,0,u,u),t.fillStyle=a,I?t.fill(new Path2D(_(i,l))):i.forEach((function(e,r){e.forEach((function(e,n){e&&t.fillRect(n+l,r+l,1,1)}))})),g&&t.drawImage(f,h.x+l,h.y+l,h.w,h.h)}})),(0,i.useEffect)((()=>{P(!1)}),[O]);const k=u({height:n,width:n},l);let N=null;return null!=O&&(N=i.createElement("img",{src:O,key:O,style:{display:"none"},onLoad:()=>{P(!0)},ref:x})),i.createElement(i.Fragment,null,i.createElement("canvas",u({style:k,height:n,width:n,ref:C},A)),N)}function O(e){const t=e,{value:r,size:n=f,level:s=g,bgColor:o=y,fgColor:a=m,includeMargin:c=b,imageSettings:l}=t,w=h(t,["value","size","level","bgColor","fgColor","includeMargin","imageSettings"]);let I=d.QrCode.encodeText(r,p[s]).getModules();const A=c?v:0,O=I.length+2*A,C=S(I,n,c,l);let x=null;null!=l&&null!=C&&(null!=C.excavation&&(I=E(I,C.excavation)),x=i.createElement("image",{xlinkHref:l.src,height:C.h,width:C.w,x:C.x+A,y:C.y+A,preserveAspectRatio:"none"}));const T=_(I,A);return i.createElement("svg",u({height:n,width:n,viewBox:`0 0 ${O} ${O}`},w),i.createElement("path",{fill:o,d:`M0,0 h${O}v${O}H0z`,shapeRendering:"crispEdges"}),i.createElement("path",{fill:a,d:T,shapeRendering:"crispEdges"}),x)}var C=e=>{const t=e,{renderAs:r}=t,n=h(t,["renderAs"]);return"svg"===r?i.createElement(O,u({},n)):i.createElement(A,u({},n))}},56642:(e,t,r)=>{"use strict";t.decode=t.parse=r(92808),t.encode=t.stringify=r(31368)},31493:e=>{"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=new Array(s);o[0]=i(e);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var l="",u=0,h=-1,d=e&&e.length||0,p=0;p<d;){if(37===e.charCodeAt(p)&&p+1<d){switch(h=h>-1?h:0,e.charCodeAt(p+1)){case 100:case 102:if(u>=c)break;if(null==r[u])break;h<p&&(l+=e.slice(h,p)),l+=Number(r[u]),h=p+2,p++;break;case 105:if(u>=c)break;if(null==r[u])break;h<p&&(l+=e.slice(h,p)),l+=Math.floor(Number(r[u])),h=p+2,p++;break;case 79:case 111:case 106:if(u>=c)break;if(void 0===r[u])break;h<p&&(l+=e.slice(h,p));var f=typeof r[u];if("string"===f){l+="'"+r[u]+"'",h=p+2,p++;break}if("function"===f){l+=r[u].name||"<anonymous>",h=p+2,p++;break}l+=i(r[u]),h=p+2,p++;break;case 115:if(u>=c)break;h<p&&(l+=e.slice(h,p)),l+=String(r[u]),h=p+2,p++;break;case 37:h<p&&(l+=e.slice(h,p)),l+="%",h=p+2,p++,u--}++u}++p}return-1===h?e:(h<d&&(l+=e.slice(h)),l)}},63060:(e,t,r)=>{"use strict";r.d(t,{Ji:()=>h});var n,i,s=r(5163),o=r(2784),a=r(83112);!function(e){e.formatDate="FormattedDate",e.formatTime="FormattedTime",e.formatNumber="FormattedNumber",e.formatList="FormattedList",e.formatDisplayName="FormattedDisplayName"}(n||(n={})),function(e){e.formatDate="FormattedDateParts",e.formatTime="FormattedTimeParts",e.formatNumber="FormattedNumberParts",e.formatList="FormattedListParts"}(i||(i={}));var c=function(e){var t=(0,a.Z)(),r=e.value,n=e.children,i=(0,s._T)(e,["value","children"]);return n(t.formatNumberToParts(r,i))};function l(e){var t=function(t){var r=(0,a.Z)(),n=t.value,i=t.children,o=(0,s._T)(t,["value","children"]),c="string"==typeof n?new Date(n||0):n;return i("formatDate"===e?r.formatDateToParts(c,o):r.formatTimeToParts(c,o))};return t.displayName=i[e],t}function u(e){var t=function(t){var r=(0,a.Z)(),n=t.value,i=t.children,c=(0,s._T)(t,["value","children"]),l=r[e](n,c);if("function"==typeof i)return i(l);var u=r.textComponent||o.Fragment;return o.createElement(u,null,l)};return t.displayName=n[e],t}c.displayName="FormattedNumberParts",c.displayName="FormattedNumberParts";var h=u("formatDate");u("formatTime"),u("formatNumber"),u("formatList"),u("formatDisplayName"),l("formatDate"),l("formatTime")},48570:(e,t,r)=>{"use strict";e.exports=r(66866)},39857:(e,t,r)=>{"use strict";r.d(t,{UT:()=>l,lr:()=>f,rU:()=>h});var n=r(2784),i=r(73557),s=r(16060);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}function a(e){return void 0===e&&(e=""),new URLSearchParams("string"==typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce(((t,r)=>{let n=e[r];return t.concat(Array.isArray(n)?n.map((e=>[r,e])):[[r,n]])}),[]))}const c=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function l(e){let{basename:t,children:r,window:o}=e,a=n.useRef();null==a.current&&(a.current=(0,s.q_)({window:o,v5Compat:!0}));let c=a.current,[l,u]=n.useState({action:c.action,location:c.location});return n.useLayoutEffect((()=>c.listen(u)),[c]),n.createElement(i.F0,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:c})}const u="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,h=n.forwardRef((function(e,t){let r,{onClick:a,relative:l,reloadDocument:h,replace:d,state:p,target:f,to:g,preventScrollReset:y}=e,m=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,c),b=!1;if(u&&"string"==typeof g&&/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i.test(g)){r=g;let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g);t.origin===e.origin?g=t.pathname+t.search+t.hash:b=!0}let v=(0,i.oQ)(g,{relative:l}),w=function(e,t){let{target:r,replace:o,state:a,preventScrollReset:c,relative:l}=void 0===t?{}:t,u=(0,i.s0)(),h=(0,i.TH)(),d=(0,i.WU)(e,{relative:l});return n.useCallback((t=>{if(function(e,t){return!(0!==e.button||t&&"_self"!==t||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e))}(t,r)){t.preventDefault();let r=void 0!==o?o:(0,s.Ep)(h)===(0,s.Ep)(d);u(e,{replace:r,state:a,preventScrollReset:c,relative:l})}}),[h,u,d,o,a,r,e,c,l])}(g,{replace:d,state:p,target:f,preventScrollReset:y,relative:l});return n.createElement("a",o({},m,{href:r||v,onClick:b||h?a:function(e){a&&a(e),e.defaultPrevented||w(e)},ref:t,target:f}))}));var d,p;function f(e){let t=n.useRef(a(e)),r=n.useRef(!1),s=(0,i.TH)(),o=n.useMemo((()=>function(e,t){let r=a(e);if(t)for(let e of t.keys())r.has(e)||t.getAll(e).forEach((t=>{r.append(e,t)}));return r}(s.search,r.current?null:t.current)),[s.search]),c=(0,i.s0)(),l=n.useCallback(((e,t)=>{const n=a("function"==typeof e?e(o):e);r.current=!0,c("?"+n,t)}),[c,o]);return[o,l]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(d||(d={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(p||(p={}))},73557:(e,t,r)=>{"use strict";var n;r.d(t,{AW:()=>x,F0:()=>T,TH:()=>v,WU:()=>_,Z5:()=>P,oQ:()=>m,s0:()=>w});var i=r(16060),s=r(2784);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(this,arguments)}"function"==typeof Object.is&&Object.is;const{useState:a,useEffect:c,useLayoutEffect:l,useDebugValue:u}=n||(n=r.t(s,2));"undefined"==typeof window||void 0===window.document||window.document.createElement,(n||(n=r.t(s,2))).useSyncExternalStore;const h=s.createContext(null),d=s.createContext(null),p=s.createContext(null),f=s.createContext(null),g=s.createContext({outlet:null,matches:[]}),y=s.createContext(null);function m(e,t){let{relative:r}=void 0===t?{}:t;b()||(0,i.kG)(!1);let{basename:n,navigator:o}=s.useContext(p),{hash:a,pathname:c,search:l}=_(e,{relative:r}),u=c;return"/"!==n&&(u="/"===c?n:(0,i.RQ)([n,c])),o.createHref({pathname:u,search:l,hash:a})}function b(){return null!=s.useContext(f)}function v(){return b()||(0,i.kG)(!1),s.useContext(f).location}function w(){b()||(0,i.kG)(!1);let{basename:e,navigator:t}=s.useContext(p),{matches:r}=s.useContext(g),{pathname:n}=v(),o=JSON.stringify((0,i.Zq)(r).map((e=>e.pathnameBase))),a=s.useRef(!1);return s.useEffect((()=>{a.current=!0})),s.useCallback((function(r,s){if(void 0===s&&(s={}),!a.current)return;if("number"==typeof r)return void t.go(r);let c=(0,i.pC)(r,JSON.parse(o),n,"path"===s.relative);"/"!==e&&(c.pathname="/"===c.pathname?e:(0,i.RQ)([e,c.pathname])),(s.replace?t.replace:t.push)(c,s.state,s)}),[e,t,o,n])}function _(e,t){let{relative:r}=void 0===t?{}:t,{matches:n}=s.useContext(g),{pathname:o}=v(),a=JSON.stringify((0,i.Zq)(n).map((e=>e.pathnameBase)));return s.useMemo((()=>(0,i.pC)(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function E(){let e=function(){var e;let t=s.useContext(y),r=function(e){let t=s.useContext(d);return t||(0,i.kG)(!1),t}(O.UseRouteError),n=function(e){let t=function(e){let t=s.useContext(g);return t||(0,i.kG)(!1),t}(),r=t.matches[t.matches.length-1];return r.route.id||(0,i.kG)(!1),r.route.id}(O.UseRouteError);return t||(null==(e=r.errors)?void 0:e[n])}(),t=(0,i.WK)(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),r?s.createElement("pre",{style:n},r):null,null)}class S extends s.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?s.createElement(g.Provider,{value:this.props.routeContext},s.createElement(y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function I(e){let{routeContext:t,match:r,children:n}=e,i=s.useContext(h);return i&&i.static&&i.staticContext&&r.route.errorElement&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),s.createElement(g.Provider,{value:t},n)}var A,O,C;function x(e){(0,i.kG)(!1)}function T(e){let{basename:t="/",children:r=null,location:n,navigationType:o=i.aU.Pop,navigator:a,static:c=!1}=e;b()&&(0,i.kG)(!1);let l=t.replace(/^\/*/,"/"),u=s.useMemo((()=>({basename:l,navigator:a,static:c})),[l,a,c]);"string"==typeof n&&(n=(0,i.cP)(n));let{pathname:h="/",search:d="",hash:g="",state:y=null,key:m="default"}=n,v=s.useMemo((()=>{let e=(0,i.Zn)(h,l);return null==e?null:{pathname:e,search:d,hash:g,state:y,key:m}}),[l,h,d,g,y,m]);return null==v?null:s.createElement(p.Provider,{value:u},s.createElement(f.Provider,{children:r,value:{location:v,navigationType:o}}))}function P(e){let{children:t,location:r}=e,n=s.useContext(h);return function(e,t){b()||(0,i.kG)(!1);let{navigator:r}=s.useContext(p),n=s.useContext(d),{matches:a}=s.useContext(g),c=a[a.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,y=v();if(t){var m;let e="string"==typeof t?(0,i.cP)(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||(0,i.kG)(!1),h=e}else h=y;let w=h.pathname||"/",_="/"===u?w:w.slice(u.length)||"/",A=(0,i.fp)(e,{pathname:_}),O=function(e,t,r){if(void 0===t&&(t=[]),null==e){if(null==r||!r.errors)return null;e=r.matches}let n=e,o=null==r?void 0:r.errors;if(null!=o){let e=n.findIndex((e=>e.route.id&&(null==o?void 0:o[e.route.id])));e>=0||(0,i.kG)(!1),n=n.slice(0,Math.min(n.length,e+1))}return n.reduceRight(((e,i,a)=>{let c=i.route.id?null==o?void 0:o[i.route.id]:null,l=r?i.route.errorElement||s.createElement(E,null):null,u=t.concat(n.slice(0,a+1)),h=()=>s.createElement(I,{match:i,routeContext:{outlet:e,matches:u}},c?l:void 0!==i.route.element?i.route.element:e);return r&&(i.route.errorElement||0===a)?s.createElement(S,{location:r.location,component:l,error:c,children:h(),routeContext:{outlet:null,matches:u}}):h()}),null)}(A&&A.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:(0,i.RQ)([u,r.encodeLocation?r.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:(0,i.RQ)([u,r.encodeLocation?r.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n||void 0);return t&&O?s.createElement(f.Provider,{value:{location:o({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:i.aU.Pop}},O):O}(n&&!t?n.router.routes:k(t),r)}function k(e,t){void 0===t&&(t=[]);let r=[];return s.Children.forEach(e,((e,n)=>{if(!s.isValidElement(e))return;if(e.type===s.Fragment)return void r.push.apply(r,k(e.props.children,t));e.type!==x&&(0,i.kG)(!1),e.props.index&&e.props.children&&(0,i.kG)(!1);let o=[...t,n],a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(a.children=k(e.props.children,o)),r.push(a)})),r}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"}(A||(A={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(O||(O={})),function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(C||(C={})),new Promise((()=>{})),s.Component},97637:(e,t,r)=>{e.exports=r(15880)(r(39930))},39930:(e,t,r)=>{const n=new(0,r(87554).ec)("secp256k1"),i=n.curve,s=i.n.constructor;function o(e){const t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){let r=new s(t);if(r.cmp(i.p)>=0)return null;r=r.toRed(i.red);let o=r.redSqr().redIMul(r).redIAdd(i.b).redSqrt();return 3===e!==o.isOdd()&&(o=o.redNeg()),n.keyPair({pub:{x:r,y:o}})}(t,e.subarray(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){let o=new s(t),a=new s(r);if(o.cmp(i.p)>=0||a.cmp(i.p)>=0)return null;if(o=o.toRed(i.red),a=a.toRed(i.red),(6===e||7===e)&&a.isOdd()!==(7===e))return null;const c=o.redSqr().redIMul(o);return a.redSqr().redISub(c.redIAdd(i.b)).isZero()?n.keyPair({pub:{x:o,y:a}}):null}(t,e.subarray(1,33),e.subarray(33,65));default:return null}}function a(e,t){const r=t.encode(null,33===e.length);for(let t=0;t<e.length;++t)e[t]=r[t]}e.exports={contextRandomize:()=>0,privateKeyVerify(e){const t=new s(e);return t.cmp(i.n)<0&&!t.isZero()?0:1},privateKeyNegate(e){const t=new s(e),r=i.n.sub(t).umod(i.n).toArrayLike(Uint8Array,"be",32);return e.set(r),0},privateKeyTweakAdd(e,t){const r=new s(t);if(r.cmp(i.n)>=0)return 1;if(r.iadd(new s(e)),r.cmp(i.n)>=0&&r.isub(i.n),r.isZero())return 1;const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},privateKeyTweakMul(e,t){let r=new s(t);if(r.cmp(i.n)>=0||r.isZero())return 1;r.imul(new s(e)),r.cmp(i.n)>=0&&(r=r.umod(i.n));const n=r.toArrayLike(Uint8Array,"be",32);return e.set(n),0},publicKeyVerify:e=>null===o(e)?1:0,publicKeyCreate(e,t){const r=new s(t);return r.cmp(i.n)>=0||r.isZero()?1:(a(e,n.keyFromPrivate(t).getPublic()),0)},publicKeyConvert(e,t){const r=o(t);return null===r?1:(a(e,r.getPublic()),0)},publicKeyNegate(e,t){const r=o(t);if(null===r)return 1;const n=r.getPublic();return n.y=n.y.redNeg(),a(e,n),0},publicKeyCombine(e,t){const r=new Array(t.length);for(let e=0;e<t.length;++e)if(r[e]=o(t[e]),null===r[e])return 1;let n=r[0].getPublic();for(let e=1;e<r.length;++e)n=n.add(r[e].pub);return n.isInfinity()?2:(a(e,n),0)},publicKeyTweakAdd(e,t,r){const n=o(t);if(null===n)return 1;if((r=new s(r)).cmp(i.n)>=0)return 2;const c=n.getPublic().add(i.g.mul(r));return c.isInfinity()?2:(a(e,c),0)},publicKeyTweakMul(e,t,r){const n=o(t);return null===n?1:(r=new s(r)).cmp(i.n)>=0||r.isZero()?2:(a(e,n.getPublic().mul(r)),0)},signatureNormalize(e){const t=new s(e.subarray(0,32)),r=new s(e.subarray(32,64));return t.cmp(i.n)>=0||r.cmp(i.n)>=0?1:(1===r.cmp(n.nh)&&e.set(i.n.sub(r).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(e,t){const r=t.subarray(0,32),n=t.subarray(32,64);if(new s(r).cmp(i.n)>=0)return 1;if(new s(n).cmp(i.n)>=0)return 1;const{output:o}=e;let a=o.subarray(4,37);a[0]=0,a.set(r,1);let c=33,l=0;for(;c>1&&0===a[l]&&!(128&a[l+1]);--c,++l);if(a=a.subarray(l),128&a[0])return 1;if(c>1&&0===a[0]&&!(128&a[1]))return 1;let u=o.subarray(39,72);u[0]=0,u.set(n,1);let h=33,d=0;for(;h>1&&0===u[d]&&!(128&u[d+1]);--h,++d);return u=u.subarray(d),128&u[0]||h>1&&0===u[0]&&!(128&u[1])?1:(e.outputlen=6+c+h,o[0]=48,o[1]=e.outputlen-2,o[2]=2,o[3]=a.length,o.set(a,4),o[4+c]=2,o[5+c]=u.length,o.set(u,6+c),0)},signatureImport(e,t){if(t.length<8)return 1;if(t.length>72)return 1;if(48!==t[0])return 1;if(t[1]!==t.length-2)return 1;if(2!==t[2])return 1;const r=t[3];if(0===r)return 1;if(5+r>=t.length)return 1;if(2!==t[4+r])return 1;const n=t[5+r];if(0===n)return 1;if(6+r+n!==t.length)return 1;if(128&t[4])return 1;if(r>1&&0===t[4]&&!(128&t[5]))return 1;if(128&t[r+6])return 1;if(n>1&&0===t[r+6]&&!(128&t[r+7]))return 1;let o=t.subarray(4,4+r);if(33===o.length&&0===o[0]&&(o=o.subarray(1)),o.length>32)return 1;let a=t.subarray(6+r);if(33===a.length&&0===a[0]&&(a=a.slice(1)),a.length>32)throw new Error("S length is too long");let c=new s(o);c.cmp(i.n)>=0&&(c=new s(0));let l=new s(t.subarray(6+r));return l.cmp(i.n)>=0&&(l=new s(0)),e.set(c.toArrayLike(Uint8Array,"be",32),0),e.set(l.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(e,t,r,o,a){if(a){const e=a;a=n=>{const i=e(t,r,null,o,n);if(!(i instanceof Uint8Array&&32===i.length))throw new Error("This is the way");return new s(i)}}const c=new s(r);if(c.cmp(i.n)>=0||c.isZero())return 1;let l;try{l=n.sign(t,r,{canonical:!0,k:a,pers:o})}catch(e){return 1}return e.signature.set(l.r.toArrayLike(Uint8Array,"be",32),0),e.signature.set(l.s.toArrayLike(Uint8Array,"be",32),32),e.recid=l.recoveryParam,0},ecdsaVerify(e,t,r){const a={r:e.subarray(0,32),s:e.subarray(32,64)},c=new s(a.r),l=new s(a.s);if(c.cmp(i.n)>=0||l.cmp(i.n)>=0)return 1;if(1===l.cmp(n.nh)||c.isZero()||l.isZero())return 3;const u=o(r);if(null===u)return 2;const h=u.getPublic();return n.verify(t,a,h)?0:3},ecdsaRecover(e,t,r,o){const c={r:t.slice(0,32),s:t.slice(32,64)},l=new s(c.r),u=new s(c.s);if(l.cmp(i.n)>=0||u.cmp(i.n)>=0)return 1;if(l.isZero()||u.isZero())return 2;let h;try{h=n.recoverPubKey(o,c,r)}catch(e){return 2}return a(e,h),0},ecdh(e,t,r,a,c,l,u){const h=o(t);if(null===h)return 1;const d=new s(r);if(d.cmp(i.n)>=0||d.isZero())return 2;const p=h.getPublic().mul(d);if(void 0===c){const t=p.encode(null,!0),r=n.hash().update(t).digest();for(let t=0;t<32;++t)e[t]=r[t]}else{l||(l=new Uint8Array(32));const t=p.getX().toArray("be",32);for(let e=0;e<32;++e)l[e]=t[e];u||(u=new Uint8Array(32));const r=p.getY().toArray("be",32);for(let e=0;e<32;++e)u[e]=r[e];const n=c(l,u,a);if(!(n instanceof Uint8Array&&n.length===e.length))return 2;e.set(n)}return 0}}},15880:e=>{const t="Impossible case. Please create issue.",r="The tweak was out of range or the resulted private key is invalid",n="The tweak was out of range or equal to zero",i="Public Key could not be parsed",s="Public Key serialization error",o="Signature could not be parsed";function a(e,t){if(!e)throw new Error(t)}function c(e,t,r){if(a(t instanceof Uint8Array,`Expected ${e} to be an Uint8Array`),void 0!==r)if(Array.isArray(r)){const n=`Expected ${e} to be an Uint8Array with length [${r.join(", ")}]`;a(r.includes(t.length),n)}else{const n=`Expected ${e} to be an Uint8Array with length ${r}`;a(t.length===r,n)}}function l(e){a("Boolean"===h(e),"Expected compressed to be a Boolean")}function u(e=(e=>new Uint8Array(e)),t){return"function"==typeof e&&(e=e(t)),c("output",e,t),e}function h(e){return Object.prototype.toString.call(e).slice(8,-1)}e.exports=e=>({contextRandomize(t){if(a(null===t||t instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),null!==t&&c("seed",t,32),1===e.contextRandomize(t))throw new Error("Unknow error on context randomization")},privateKeyVerify:t=>(c("private key",t,32),0===e.privateKeyVerify(t)),privateKeyNegate(r){switch(c("private key",r,32),e.privateKeyNegate(r)){case 0:return r;case 1:throw new Error(t)}},privateKeyTweakAdd(t,n){switch(c("private key",t,32),c("tweak",n,32),e.privateKeyTweakAdd(t,n)){case 0:return t;case 1:throw new Error(r)}},privateKeyTweakMul(t,r){switch(c("private key",t,32),c("tweak",r,32),e.privateKeyTweakMul(t,r)){case 0:return t;case 1:throw new Error(n)}},publicKeyVerify:t=>(c("public key",t,[33,65]),0===e.publicKeyVerify(t)),publicKeyCreate(t,r=!0,n){switch(c("private key",t,32),l(r),n=u(n,r?33:65),e.publicKeyCreate(n,t)){case 0:return n;case 1:throw new Error("Private Key is invalid");case 2:throw new Error(s)}},publicKeyConvert(t,r=!0,n){switch(c("public key",t,[33,65]),l(r),n=u(n,r?33:65),e.publicKeyConvert(n,t)){case 0:return n;case 1:throw new Error(i);case 2:throw new Error(s)}},publicKeyNegate(r,n=!0,o){switch(c("public key",r,[33,65]),l(n),o=u(o,n?33:65),e.publicKeyNegate(o,r)){case 0:return o;case 1:throw new Error(i);case 2:throw new Error(t);case 3:throw new Error(s)}},publicKeyCombine(t,r=!0,n){a(Array.isArray(t),"Expected public keys to be an Array"),a(t.length>0,"Expected public keys array will have more than zero items");for(const e of t)c("public key",e,[33,65]);switch(l(r),n=u(n,r?33:65),e.publicKeyCombine(n,t)){case 0:return n;case 1:throw new Error(i);case 2:throw new Error("The sum of the public keys is not valid");case 3:throw new Error(s)}},publicKeyTweakAdd(t,n,s=!0,o){switch(c("public key",t,[33,65]),c("tweak",n,32),l(s),o=u(o,s?33:65),e.publicKeyTweakAdd(o,t,n)){case 0:return o;case 1:throw new Error(i);case 2:throw new Error(r)}},publicKeyTweakMul(t,r,s=!0,o){switch(c("public key",t,[33,65]),c("tweak",r,32),l(s),o=u(o,s?33:65),e.publicKeyTweakMul(o,t,r)){case 0:return o;case 1:throw new Error(i);case 2:throw new Error(n)}},signatureNormalize(t){switch(c("signature",t,64),e.signatureNormalize(t)){case 0:return t;case 1:throw new Error(o)}},signatureExport(r,n){c("signature",r,64);const i={output:n=u(n,72),outputlen:72};switch(e.signatureExport(i,r)){case 0:return n.slice(0,i.outputlen);case 1:throw new Error(o);case 2:throw new Error(t)}},signatureImport(r,n){switch(c("signature",r),n=u(n,64),e.signatureImport(n,r)){case 0:return n;case 1:throw new Error(o);case 2:throw new Error(t)}},ecdsaSign(r,n,i={},s){c("message",r,32),c("private key",n,32),a("Object"===h(i),"Expected options to be an Object"),void 0!==i.data&&c("options.data",i.data),void 0!==i.noncefn&&a("Function"===h(i.noncefn),"Expected options.noncefn to be a Function");const o={signature:s=u(s,64),recid:null};switch(e.ecdsaSign(o,r,n,i.data,i.noncefn)){case 0:return o;case 1:throw new Error("The nonce generation function failed, or the private key was invalid");case 2:throw new Error(t)}},ecdsaVerify(t,r,n){switch(c("signature",t,64),c("message",r,32),c("public key",n,[33,65]),e.ecdsaVerify(t,r,n)){case 0:return!0;case 3:return!1;case 1:throw new Error(o);case 2:throw new Error(i)}},ecdsaRecover(r,n,i,s=!0,d){switch(c("signature",r,64),a("Number"===h(n)&&n>=0&&n<=3,"Expected recovery id to be a Number within interval [0, 3]"),c("message",i,32),l(s),d=u(d,s?33:65),e.ecdsaRecover(d,r,n,i)){case 0:return d;case 1:throw new Error(o);case 2:throw new Error("Public key could not be recover");case 3:throw new Error(t)}},ecdh(t,r,n={},s){switch(c("public key",t,[33,65]),c("private key",r,32),a("Object"===h(n),"Expected options to be an Object"),void 0!==n.data&&c("options.data",n.data),void 0!==n.hashfn?(a("Function"===h(n.hashfn),"Expected options.hashfn to be a Function"),void 0!==n.xbuf&&c("options.xbuf",n.xbuf,32),void 0!==n.ybuf&&c("options.ybuf",n.ybuf,32),c("output",s)):s=u(s,32),e.ecdh(s,t,r,n.data,n.hashfn,n.xbuf,n.ybuf)){case 0:return s;case 1:throw new Error(i);case 2:throw new Error("Scalar was invalid (zero or overflow)")}}})},15452:e=>{"use strict";e.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];const r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},57785:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},33783:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const c=s(r(54078)),l=s(r(38460)),u=s(r(99657)),h=s(r(22086)),d=s(r(60337)),p=s(r(88383)),f=s(r(40613)),g=s(r(31388)),y=s(r(74327)),m=s(r(30312)),b=s(r(5815)),v=s(r(94044)),w=s(r(91374)),_=s(r(19509)),E=s(r(31917)),S=s(r(11432)),I=s(r(80259)),A=s(r(36438)),O=s(r(70154)),C=s(r(64607)),x=s(r(81166)),T=s(r(66048)),P=s(r(43454)),k=s(r(8564)),N=s(r(54853)),R=s(r(51469)),M=s(r(90496));o(r(56242),t),o(r(24478),t),o(r(43642),t),o(r(5147),t),o(r(80018),t),o(r(57525),t),o(r(15074),t),o(r(24331),t),o(r(81375),t),o(r(64499),t),o(r(85235),t),o(r(52778),t),o(r(81222),t),o(r(31214),t),o(r(2896),t),o(r(98807),t),o(r(37245),t),o(r(87923),t),o(r(20286),t),o(r(43505),t),o(r(22154),t),o(r(65205),t),o(r(83651),t),t.init=function(e,t,r,n,i,s,o,D,L,j,U,B,F,V,$,H,z,K){const q=new w.AnalyticsService(t("background.analytics"),o,$),G=new R.SidePanelService(t("side-panel"),q),W=new y.InteractionService(r,G,n),Y=new c.ChainsService(t("chains-v2"),{kvStore:t("chains"),updaterKVStore:t("updator")},i,L,j,q,W,z),Q=new f.TokenCW20Service(t("tokens"),Y,W),X=new g.TokenERC20Service(t("tokens-erc20"),Y,W),Z=new m.PermissionService(t("permission"),s,W,Y),J=new d.BackgroundTxService(Y,U),ee=new p.BackgroundTxEthereumService(Y,U),te=new b.PhishingListService({blockListUrl:"https://raw.githubusercontent.com/chainapsis/phishing-block-list/main/block-list.txt",twitterListUrl:"https://raw.githubusercontent.com/chainapsis/phishing-block-list/main/twitter-scammer-list.txt",fetchingIntervalMs:108e5,retryIntervalMs:6e5,allowTimeoutMs:6e5},F),re=new _.VaultService(t("vault")),ne=new l.ChainsUIService(t("chains-ui"),Y,re),ie=new E.KeyRingService(t("keyring-v2"),{kvStore:t("keyring"),commonCrypto:V.commonCrypto,getDisabledChainIdentifiers:V.getDisabledChainIdentifiers,chainsUIService:ne},Y,ne,W,re,q,[new S.KeyRingMnemonicService(re),new I.KeyRingLedgerService,new O.KeyRingPrivateKeyService(re),new A.KeyRingKeystoneService]),se=new C.KeyRingCosmosService(Y,ie,W,ne,q,D),oe=new T.KeyRingStarknetService(Y,re,ie,Z,X,W,J),ae=new v.AutoLockAccountService(t("auto-lock-account"),ie,B),ce=new P.PermissionInteractiveService(t("permission-interactive"),Z,ie,Y),le=new x.KeyRingEthereumService(Y,ie,se,W,q,Z,ce,ee,X),ue=new u.ChainsUpdateService(t("chains-update"),Y,ne,H),he=new h.SecretWasmService(t("secretwasm"),Y,se),de=new k.TokenScanService(t("token-scan"),Y,ne,re,ie,se,oe),pe=new N.RecentSendHistoryService(t("recent-send-history"),Y,J,U),fe=new M.SettingsService(t("settings"));return y.init(e,W),m.init(e,Z),c.init(e,Y,Z,ce),d.init(e,J,ce),p.init(e,ee,ce),b.init(e,te),v.init(e,ae),w.init(e,q),E.init(e,ie),C.init(e,se,ce),x.init(e,le,ce),T.init(e,oe,ce),P.init(e,ce),l.init(e,ne),u.init(e,ue),f.init(e,Q,ce,se),g.init(e,X,ce),h.init(e,he,ce),k.init(e,de),N.init(e,pe),R.init(e,G),M.init(e,fe),{initFn:()=>a(this,void 0,void 0,(function*(){yield q.init(),yield G.init(),yield W.init(),yield Y.init(),yield re.init(),yield ne.init(),yield ue.init(),yield ie.init(),yield se.init(),yield le.init(),yield oe.init(),yield Z.init(),yield Q.init(),yield X.init(),yield J.init(),yield ee.init(),yield te.init(),yield ae.init(),yield ce.init(),yield he.init(),yield de.init(),yield pe.init(),yield fe.init(),K&&(yield K(re)),yield Y.afterInit()})),keyRingService:ie,analyticsService:q}}},34298:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(40409),t),i(r(91166),t),i(r(47577),t)},73850:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(49851),t)},95732:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useAmountConfig=t.AmountConfig=void 0;const i=r(91230),s=r(80075),o=r(57167),a=r(19731),c=r(2784);class l extends i.TxChainSetter{constructor(e,t,r,n){super(e,r),this.starknetQueriesStore=t,this.senderConfig=n,this._currency=void 0,this._value="",this._fraction=0,this._feeConfig=void 0,(0,s.makeObservable)(this)}get feeConfig(){return this._feeConfig}setFeeConfig(e){this._feeConfig=e}get value(){var e;if(this.fraction>0){let t=null===(e=this.starknetQueriesStore.get(this.chainId).queryStarknetERC20Balance.getBalance(this.chainId,this.chainGetter,this.senderConfig.sender,this.currency.coinMinimalDenom))||void 0===e?void 0:e.balance;return t?(this.feeConfig&&this.feeConfig.fee&&(t=t.sub(this.feeConfig.fee)),t.toDec().lte(new a.Dec(0))?"0":t.mul(new a.Dec(this.fraction)).trim(!0).locale(!1).hideDenom(!0).toString()):"0"}return this._value}setValue(e){e.startsWith(".")&&(e="0"+e),this._value=e,this.setFraction(0)}get amount(){let e;try{e=""===this.value.trim()?new a.Dec(0):new a.Dec(this.value)}catch(t){e=new a.Dec(0)}return[new a.CoinPretty(this.currency,e.mul(a.DecUtils.getTenExponentN(this.currency.coinDecimals)).truncate())]}get currency(){const e=this.modularChainInfo;if(!("starknet"in e))throw new Error("Chain doesn't support the starknet");if(this._currency){const t=e.starknet.currencies.find((e=>e.coinMinimalDenom===this._currency.coinMinimalDenom));if(t)return t}return e.starknet.currencies[0]}setCurrency(e){var t;(null==e?void 0:e.coinMinimalDenom)!==(null===(t=this._currency)||void 0===t?void 0:t.coinMinimalDenom)&&(this._value="",this.setFraction(0)),this._currency=e}get fraction(){return this._fraction}setFraction(e){this._fraction=e}canUseCurrency(e){const t=this.modularChainInfo;if(!("starknet"in t))throw new Error("Chain doesn't support the starknet");return null!=t.starknet.currencies.find((t=>t.coinMinimalDenom===e.coinMinimalDenom))}get uiProperties(){if(!this.currency)return{error:new Error("Currency to send not set")};if(""===this.value.trim())return{error:new o.EmptyAmountError("Amount is empty")};try{const e=new a.Dec(this.value);if(e.equals(new a.Dec(0)))return{error:new o.ZeroAmountError("Amount is zero")};if(e.lt(new a.Dec(0)))return{error:new o.NegativeAmountError("Amount is negative")}}catch(e){return{error:new o.InvalidNumberAmountError("Invalid form of number")}}for(const e of this.amount){const t=e.currency;if(!("type"in t)||"erc20"!==t.type)return{error:new o.NotSupportedCurrencyError("Not supported currency")};if(!this.canUseCurrency(t))return{error:new o.NotSupportedCurrencyError("Not supported currency")};const r=this.starknetQueriesStore.get(this.chainId).queryStarknetERC20Balance.getBalance(this.chainId,this.chainGetter,this.senderConfig.sender,t.coinMinimalDenom);if(!r)return{warning:new Error(`Can't parse the balance for ${t.coinMinimalDenom}`)};if(r.error)return{warning:new Error("Failed to fetch balance")};if(!r.response)return{loadingState:"loading-block"};if(r.balance.toDec().lt(e.toDec()))return{error:new o.InsufficientAmountError("Insufficient amount"),loadingState:r.isFetching?"loading":void 0}}return{}}}n([s.observable.ref],l.prototype,"_currency",void 0),n([s.observable],l.prototype,"_value",void 0),n([s.observable],l.prototype,"_fraction",void 0),n([s.observable.ref],l.prototype,"_feeConfig",void 0),n([s.action],l.prototype,"setFeeConfig",null),n([s.computed],l.prototype,"value",null),n([s.action],l.prototype,"setValue",null),n([s.computed],l.prototype,"amount",null),n([s.computed],l.prototype,"currency",null),n([s.action],l.prototype,"setCurrency",null),n([s.action],l.prototype,"setFraction",null),n([s.computed],l.prototype,"uiProperties",null),t.AmountConfig=l,t.useAmountConfig=(e,t,r,n)=>{const[i]=(0,c.useState)((()=>new l(e,t,r,n)));return i.setChain(r),i}},91230:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.TxChainSetter=void 0;const i=r(80075);class s{constructor(e,t){this.chainGetter=e,this._chainId=t,(0,i.makeObservable)(this)}get modularChainInfo(){return this.chainGetter.getModularChain(this.chainId)}get chainId(){return this._chainId}setChain(e){this._chainId=e}}n([i.observable],s.prototype,"_chainId",void 0),n([i.computed],s.prototype,"modularChainInfo",null),n([i.action],s.prototype,"setChain",null),t.TxChainSetter=s},57167:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarknetIDFailedToFetchError=t.StarknetIDIsFetchingError=t.MemoSuspectMnemonicInclusion=t.InvalidHexError=t.NotSupportedCurrencyError=t.UnknownCurrencyError=t.InsufficientFeeError=t.NotLoadedFeeError=t.InsufficientAmountError=t.NegativeAmountError=t.ZeroAmountError=t.InvalidNumberAmountError=t.EmptyAmountError=t.ICNSFailedToFetchError=t.ICNSIsFetchingError=t.InvalidBech32Error=t.EmptyAddressError=t.AccountNotDeployed=void 0;class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,r.prototype)}}t.AccountNotDeployed=r;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}t.EmptyAddressError=n;class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,i.prototype)}}t.InvalidBech32Error=i;class s extends Error{constructor(e){super(e),Object.setPrototypeOf(this,s.prototype)}}t.ICNSIsFetchingError=s;class o extends Error{constructor(e){super(e),Object.setPrototypeOf(this,o.prototype)}}t.ICNSFailedToFetchError=o;class a extends Error{constructor(e){super(e),Object.setPrototypeOf(this,a.prototype)}}t.EmptyAmountError=a;class c extends Error{constructor(e){super(e),Object.setPrototypeOf(this,c.prototype)}}t.InvalidNumberAmountError=c;class l extends Error{constructor(e){super(e),Object.setPrototypeOf(this,l.prototype)}}t.ZeroAmountError=l;class u extends Error{constructor(e){super(e),Object.setPrototypeOf(this,u.prototype)}}t.NegativeAmountError=u;class h extends Error{constructor(e){super(e),Object.setPrototypeOf(this,h.prototype)}}t.InsufficientAmountError=h;class d extends Error{constructor(e){super(e),Object.setPrototypeOf(this,d.prototype)}}t.NotLoadedFeeError=d;class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,p.prototype)}}t.InsufficientFeeError=p;class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f.prototype)}}t.UnknownCurrencyError=f;class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,f.prototype)}}t.NotSupportedCurrencyError=g;class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,y.prototype)}}t.InvalidHexError=y;class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,m.prototype)}}t.MemoSuspectMnemonicInclusion=m;class b extends Error{constructor(e){super(e),Object.setPrototypeOf(this,b.prototype)}}t.StarknetIDIsFetchingError=b;class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,v.prototype)}}t.StarknetIDFailedToFetchError=v},97470:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useFeeConfig=t.FeeConfig=void 0;const i=r(91230),s=r(80075),o=r(2784),a=r(19731),c=r(57167);class l extends i.TxChainSetter{constructor(e,t,r,n,i,o){super(e,r),this.starknetQueriesStore=t,this.senderConfig=n,this.amountConfig=i,this.gasConfig=o,this._gasPrice=void 0,this._maxGasPrice=void 0,this._type="STRK",this._disableBalanceCheck=!1,(0,s.makeObservable)(this)}setDisableBalanceCheck(e){this._disableBalanceCheck=e}get disableBalanceCheck(){return this._disableBalanceCheck}get uiProperties(){if(this.disableBalanceCheck)return{};if(!this._gasPrice)return{error:new Error("Fee is not set"),loadingState:"loading-block"};if(!this._maxGasPrice)return{error:new Error("Fee is not set"),loadingState:"loading-block"};if(!this.fee)return{error:new Error("Fee is not set"),loadingState:"loading-block"};if(!this.maxFee)return{error:new Error("Fee is not set"),loadingState:"loading-block"};const e=this.maxFee,t=this.starknetQueriesStore.get(this.chainId).queryStarknetERC20Balance.getBalance(this.chainId,this.chainGetter,this.senderConfig.value,e.currency.coinMinimalDenom);return t?t.error?{warning:new Error("Failed to fetch balance")}:t.response?new a.Int(t.balance.toCoin().amount).lt(new a.Int(e.toCoin().amount))?{error:new c.InsufficientFeeError("Insufficient fee"),loadingState:t.isFetching?"loading":void 0}:{}:{loadingState:"loading-block"}:{warning:new Error(`Can't parse the balance for ${e.currency.coinMinimalDenom}`)}}get gasPrice(){return this._gasPrice}get maxGasPrice(){return this._maxGasPrice}get type(){return this._type}setGasPrice(e){this._gasPrice=null==e?void 0:e.gasPrice,this._maxGasPrice=null==e?void 0:e.maxGasPrice}setType(e){this._type!==e&&(this._type=e,this._gasPrice=void 0,this._maxGasPrice=void 0)}get fee(){if(!this._gasPrice)return;const e=new a.Dec(this.gasConfig.gas);return this._gasPrice.mul(e)}get maxFee(){if(!this._maxGasPrice)return;const e=new a.Dec(this.gasConfig.gas);return this._maxGasPrice.mul(e)}}n([s.observable.ref],l.prototype,"_gasPrice",void 0),n([s.observable.ref],l.prototype,"_maxGasPrice",void 0),n([s.observable],l.prototype,"_type",void 0),n([s.observable],l.prototype,"_disableBalanceCheck",void 0),n([s.action],l.prototype,"setDisableBalanceCheck",null),n([s.computed],l.prototype,"uiProperties",null),n([s.action],l.prototype,"setGasPrice",null),n([s.action],l.prototype,"setType",null),n([s.computed],l.prototype,"fee",null),n([s.computed],l.prototype,"maxFee",null),t.FeeConfig=l,t.useFeeConfig=(e,t,r,n,i,s,a)=>{const[c]=(0,o.useState)((()=>{const o=new l(e,t,r,n,i,s);return a&&a(o),o}));return c.setChain(r),c}},95680:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useGasSimulator=t.GasSimulator=void 0;const i=r(80075),s=r(2784),o=r(94531),a=r(91230),c=r(86693);class l{constructor(){this._outdatedCosmosSdk=!1,this._initialGasEstimated=null,this._isInitialized=!1,this._recentGasEstimated=void 0,this._tx=void 0,this._stdFee=void 0,this._error=void 0,(0,i.makeObservable)(this)}get outdatedCosmosSdk(){return this._outdatedCosmosSdk}setIsInitialized(e){this._isInitialized=e}get isInitialized(){return this._isInitialized}setOutdatedCosmosSdk(e){this._outdatedCosmosSdk=e}get initialGasEstimated(){return this._initialGasEstimated}setInitialGasEstimated(e){this._initialGasEstimated=e}get recentGasEstimated(){return this._recentGasEstimated}setRecentGasEstimated(e){this._recentGasEstimated=e}get tx(){return this._tx}refreshTx(e){this._tx=e}get stdFee(){return this._stdFee}refreshStdFee(e){this._stdFee=e}get error(){return this._error}setError(e){this._error=e}static isZeroFee(e){if(!e)return!0;for(const t of e)if("0"!==t.amount)return!1;return!0}}n([i.observable],l.prototype,"_outdatedCosmosSdk",void 0),n([i.observable],l.prototype,"_initialGasEstimated",void 0),n([i.observable],l.prototype,"_isInitialized",void 0),n([i.observable],l.prototype,"_recentGasEstimated",void 0),n([i.observable.ref],l.prototype,"_tx",void 0),n([i.observable.ref],l.prototype,"_stdFee",void 0),n([i.observable.ref],l.prototype,"_error",void 0),n([i.action],l.prototype,"setIsInitialized",null),n([i.action],l.prototype,"setOutdatedCosmosSdk",null),n([i.action],l.prototype,"setInitialGasEstimated",null),n([i.action],l.prototype,"setRecentGasEstimated",null),n([i.action],l.prototype,"refreshTx",null),n([i.action],l.prototype,"refreshStdFee",null),n([i.action],l.prototype,"setError",null);class u extends a.TxChainSetter{constructor(e,t,r,n,s,o,a){super(t,r),this.kvStore=e,this.gasConfig=n,this.feeConfig=s,this.initialKey=o,this.simulateGasFn=a,this._gasAdjustmentValue="1",this._enabled=!1,this._forceDisabled=!1,this._forceDisableReason=void 0,this._isSimulating=!1,this._stateMap=new Map,this._disposers=[],this._key=o,(0,i.makeObservable)(this),this.init()}setKVStore(e){this.kvStore=e}get key(){return this._key}setKey(e){this._key=e}get isSimulating(){return this._isSimulating}setSimulateGasFn(e){this.simulateGasFn=e}get enabled(){return!this._forceDisabled&&this._enabled}setEnabled(e){this._forceDisabled&&e?console.log("Gas simulator is disabled by force. You can not enable the gas simulator"):this._enabled=e}get forceDisabled(){return this._forceDisabled}get forceDisableReason(){return this._forceDisableReason}forceDisable(e){e?(this.enabled&&this.setEnabled(!1),this._forceDisabled=!0,"boolean"!=typeof e&&(this._forceDisableReason=e)):(this._forceDisabled=!1,this._forceDisableReason=void 0)}get outdatedCosmosSdk(){const e=this.storeKey;return this.getState(e).outdatedCosmosSdk}get error(){const e=this.storeKey;return this.getState(e).error}get gasEstimated(){const e=this.storeKey,t=this.getState(e);return null!=t.recentGasEstimated?t.recentGasEstimated:null!=t.initialGasEstimated?t.initialGasEstimated:void 0}get gasAdjustment(){if(""===this._gasAdjustmentValue)return 0;const e=parseFloat(this._gasAdjustmentValue);return Number.isNaN(e)||e<0?0:e}get gasAdjustmentValue(){return this._gasAdjustmentValue}setGasAdjustmentValue(e){if("number"==typeof e){if(e<0||e>2)return;return void(this._gasAdjustmentValue=e.toString())}if(""===e)return void(this._gasAdjustmentValue="");e.startsWith(".")&&(this._gasAdjustmentValue="0"+e);const t=parseFloat(e);Number.isNaN(t)||t<0||t>2||(this._gasAdjustmentValue=e)}init(){this._disposers.push((0,i.autorun)((()=>{if(!this.enabled)return;const e=this.storeKey,t=this.getState(e);this.kvStore.get(e).then((e=>{e&&t.setInitialGasEstimated(e),t.setIsInitialized(!0)}))}))),this._disposers.push((0,i.autorun)((()=>{if(this.enabled)try{const e=this.storeKey,t=this.getState(e);if(!t.isInitialized)return;const r=this.simulateGasFn();(0,i.runInAction)((()=>{null!=t.recentGasEstimated&&null==t.error||t.outdatedCosmosSdk||t.refreshTx(r)}))}catch(e){return void console.log(e)}}))),this._disposers.push((0,i.autorun)((()=>{const e=this.storeKey,t=this.getState(e);if(!t.tx)return;const r=t.tx.simulate(t.stdFee);(0,i.runInAction)((()=>{this._isSimulating=!0})),r.then((({gasUsed:r})=>{(!t.recentGasEstimated||Math.abs(t.recentGasEstimated-r)/t.recentGasEstimated>.02)&&t.setRecentGasEstimated(r),t.setOutdatedCosmosSdk(!1),t.setError(void 0),this.kvStore.set(e,r).catch((e=>{console.log(e)}))})).catch((e=>{var r,n,i;if(console.log(e),(0,c.isSimpleFetchError)(e)&&e.response){const s=e.response;if(400===s.status&&(null===(r=s.data)||void 0===r?void 0:r.message)&&"string"==typeof s.data.message&&s.data.message.includes("invalid empty tx"))return void t.setOutdatedCosmosSdk(!0);let o="";const a=e.response.headers&&e.response.headers.get("content-type")||"";if(a.startsWith("text/plain")&&"string"==typeof e.response.data&&(o=e.response.data),a.startsWith("application/json")&&(null===(n=e.response.data)||void 0===n?void 0:n.message)&&"string"==typeof(null===(i=e.response.data)||void 0===i?void 0:i.message)&&(o=e.response.data.message),""!==o)return void t.setError(new Error(o))}t.setError(e)})).finally((()=>{(0,i.runInAction)((()=>{this._isSimulating=!1}))}))}))),this._disposers.push((0,i.autorun)((()=>{this.enabled&&null!=this.gasEstimated&&this.gasConfig.setValue(this.gasEstimated*this.gasAdjustment)})))}dispose(){for(const e of this._disposers)e()}get uiProperties(){const e=this.storeKey,t=this.getState(e);return{warning:(()=>this.outdatedCosmosSdk?new Error("Outdated Cosmos SDK"):this.forceDisableReason?this.forceDisableReason:this.error?this.error:void 0)(),loadingState:(()=>{if(this.enabled)return this.isSimulating?null==t.initialGasEstimated?"loading-block":"loading":void 0})()}}getState(e){return this._stateMap.has(e)||(0,i.runInAction)((()=>{this._stateMap.set(e,new l)})),this._stateMap.get(e)}get storeKey(){return`${o.ChainIdHelper.parse(this.chainId).identifier}/TODO/${this.key}}`}}n([i.observable],u.prototype,"_key",void 0),n([i.observable],u.prototype,"_gasAdjustmentValue",void 0),n([i.observable],u.prototype,"_enabled",void 0),n([i.observable],u.prototype,"_forceDisabled",void 0),n([i.observable],u.prototype,"_forceDisableReason",void 0),n([i.observable],u.prototype,"_isSimulating",void 0),n([i.observable.shallow],u.prototype,"_stateMap",void 0),n([i.action],u.prototype,"setKey",null),n([i.action],u.prototype,"setEnabled",null),n([i.action],u.prototype,"forceDisable",null),n([i.action],u.prototype,"setGasAdjustmentValue",null),n([i.computed],u.prototype,"storeKey",null),t.GasSimulator=u,t.useGasSimulator=(e,t,r,n,i,o,a,c)=>{const[l]=(0,s.useState)((()=>{const s=new u(e,t,r,n,i,o,a);return c?s.setEnabled(!1):s.setEnabled(!0),s}));return l.setKVStore(e),l.setChain(r),l.setKey(o),l.setSimulateGasFn(a),(0,s.useEffect)((()=>()=>{l.dispose()}),[l]),l}},24729:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useZeroAllowedGasConfig=t.useGasConfig=t.GasConfig=void 0;const i=r(91230),s=r(80075),o=r(2784);class a extends i.TxChainSetter{constructor(e,t,r,n){super(e,t),this._value="",this._allowZeroGas=void 0,r&&(this._value=r.toString()),this._allowZeroGas=n,(0,s.makeObservable)(this)}get value(){return this._value}setValue(e){this._value="number"==typeof e?Math.ceil(e).toString():e}get gas(){if(""===this.value.trim())return 0;const e=Number.parseInt(this.value);return Number.isNaN(e)?0:e}get uiProperties(){if(""===this.value.trim())return{error:new Error("Gas not set")};const e=Number.parseFloat(this.value);if(Number.isNaN(e))return{error:new Error("Gas is not valid number")};if(this.value.includes(".")||!Number.isInteger(e))return{error:new Error("Gas is not integer")};if(this._allowZeroGas){if(this.gas<0)return{error:new Error("Gas should be greater or equal than 0")}}else if(this.gas<=0)return{error:new Error("Gas should be greater than 0")};return{}}}n([s.observable],a.prototype,"_value",void 0),n([s.observable],a.prototype,"_allowZeroGas",void 0),n([s.action],a.prototype,"setValue",null),n([s.computed],a.prototype,"uiProperties",null),t.GasConfig=a,t.useGasConfig=(e,t,r)=>{const[n]=(0,o.useState)((()=>new a(e,t,r)));return n.setChain(t),n},t.useZeroAllowedGasConfig=(e,t,r)=>{const[n]=(0,o.useState)((()=>new a(e,t,r,!0)));return n.setChain(t),n}},49851:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(57167),t),i(r(33191),t),i(r(97470),t),i(r(24729),t),i(r(32881),t),i(r(95732),t),i(r(38593),t),i(r(21636),t),i(r(91230),t),i(r(95680),t),i(r(30297),t),i(r(20334),t)},20334:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useNoopAmountConfig=t.NoopAmountConfig=void 0;const i=r(91230),s=r(80075),o=r(19731),a=r(2784);class c extends i.TxChainSetter{constructor(e,t,r){super(e,t),this.senderConfig=r,this._currency=void 0,(0,s.makeObservable)(this)}get value(){return"0"}setValue(e){}get amount(){return[new o.CoinPretty(this.currency,new o.Dec(0).mul(o.DecUtils.getTenExponentN(this.currency.coinDecimals)).truncate())]}get currency(){const e=this.modularChainInfo;if(!("starknet"in e))throw new Error("Chain doesn't support the starknet");return e.starknet.currencies[0]}setCurrency(e){}get fraction(){return 0}setFraction(e){}canUseCurrency(e){return!0}get uiProperties(){return{}}}n([s.observable.ref],c.prototype,"_currency",void 0),n([s.computed],c.prototype,"value",null),n([s.action],c.prototype,"setValue",null),n([s.computed],c.prototype,"amount",null),n([s.computed],c.prototype,"currency",null),n([s.action],c.prototype,"setCurrency",null),n([s.action],c.prototype,"setFraction",null),n([s.computed],c.prototype,"uiProperties",null),t.NoopAmountConfig=c,t.useNoopAmountConfig=(e,t,r)=>{const[n]=(0,a.useState)((()=>new c(e,t,r)));return n.setChain(t),n}},32881:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useRecipientConfig=t.RecipientConfig=void 0;const i=r(91230),s=r(80075),o=r(57167),a=r(2784),c=r(48834),l=r(86693),u=r(11047),h={[u.constants.NetworkName.SN_MAIN]:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",[u.constants.NetworkName.SN_SEPOLIA]:"0x0707f09bc576bd7cfee59694846291047e965f4184fe13dac62c56759b3b6fa7"},d="abcdefghijklmnopqrstuvwxyz0123456789-",p=BigInt(38),f="这来",g=BigInt(37),y=BigInt(f.length);function m(e){let t=0;for(;e.endsWith(f[f.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function b(e){let t=BigInt(0),r=BigInt(1);if(!e)return t;if(e.endsWith(f[0]+d[1])){const[t,r]=m(e.substring(0,e.length-2));e=t+f[f.length-1].repeat(2*(r+1))}else{const[t,r]=m(e);r&&(e=t+f[f.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){const i=e[n],s=d.indexOf(i),o=BigInt(d.indexOf(i));if(-1!==s)n===e.length-1&&e[n]===d[0]?(t+=r*g,r*=p,r*=p):(t+=r*o,r*=p);else if(-1!==f.indexOf(i)){t+=r*g,r*=p;const s=(n===e.length-1?1:0)+f.indexOf(i);t+=r*BigInt(s),r*=y}}return t}function v(e){if(!e.startsWith("0x"))return!1;const t=e.replace("0x",""),r=c.Buffer.from(t,"hex");return 32===r.length&&t.toLowerCase()===r.toString("hex").toLowerCase()}class w extends i.TxChainSetter{constructor(e,t){super(e,t),this._value="",this._starknetID=void 0,this._starknetIDFetchDataMap=new Map,(0,s.makeObservable)(this)}setStarknetID(e){const t=e.split(":");if(t.length<2)return;const r=t[1];if(!r)return;const n=h[r];n&&(this._starknetID={networkName:r,namingContractAddress:n})}getStarknetIDFetchData(e){var t;const r=this.chainGetter.getModularChain(this.chainId);if(!("starknet"in r))throw new Error(`${this.chainId} is not starknet chain`);if(!this._starknetID)throw new Error("Starknet ID is not set");if(!/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e))return{isFetching:!1,error:new Error("Invalid domain for Starknet ID")};const n=`${this.chainId}/${e}`;if(!this._starknetIDFetchDataMap.has(n)){(0,s.runInAction)((()=>{this._starknetIDFetchDataMap.set(n,{isFetching:!0})}));const t=function(e){if(!e)return[BigInt(0)];const t=[];for(const r of e.replace(".stark","").split("."))t.push(b(r));return t}(e).map((e=>e.toString(10)));(0,l.simpleFetch)(r.starknet.rpc,"",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"1",method:"starknet_call",params:[{contract_address:this._starknetID.namingContractAddress,calldata:u.CallData.toHex({domain:t,hint:[]}),entry_point_selector:"0x2e269d930f6d7ab92b15ce8ff9f5e63709391617e3465fff79ba6baf278ce60"},"latest"]}),signal:(new AbortController).signal}).then((e=>{if(e.data.error&&e.data.error.message)throw new o.StarknetIDIsFetchingError(e.data.error.message);const t=e.data.result;if(!t)throw new o.StarknetIDIsFetchingError("no address found");const r=t[0];if("0x0"===r)throw new o.StarknetIDIsFetchingError("no address found");const i="0x"+r.replace("0x","").padStart(64,"0");if(!v(i))throw new o.StarknetIDIsFetchingError("no address found");(0,s.runInAction)((()=>{this._starknetIDFetchDataMap.set(n,{isFetching:!1,starknetHexAddress:i})}))})).catch((e=>{(0,s.runInAction)((()=>{this._starknetIDFetchDataMap.set(n,{isFetching:!1,error:e})}))}))}return null!==(t=this._starknetIDFetchDataMap.get(n))&&void 0!==t?t:{isFetching:!1}}get isStarknetIDEnabled(){return!!this._starknetID}get isStarknetID(){if(this.isStarknetIDEnabled){const e=this.value.trim().split(".");return e.length>1&&"stark"===e[e.length-1]}return!1}get isStarknetIDFetching(){return!(!this.isStarknetIDEnabled||!this.isStarknetID)&&this.getStarknetIDFetchData(this.value.trim()).isFetching}get starknetExpectedDomain(){return"stark"}get recipient(){const e=this.value.trim();if(!("starknet"in this.modularChainInfo))throw new Error("Chain doesn't support the starknet");if(this.isStarknetIDEnabled&&this.isStarknetID)try{return this.getStarknetIDFetchData(e).starknetHexAddress||""}catch(e){return""}return e}get uiProperties(){const e=this.value.trim();if(!e)return{error:new o.EmptyAddressError("Address is empty")};if(this.isStarknetIDEnabled&&this.isStarknetID)try{const t=this.getStarknetIDFetchData(e);return t.isFetching?{loadingState:"loading-block"}:t.error?t.error instanceof o.StarknetIDIsFetchingError?{error:new o.StarknetIDFailedToFetchError("Failed to fetch the address from Starknet ID"),loadingState:t.isFetching?"loading-block":void 0}:{error:t.error}:t.starknetHexAddress?{}:{error:new o.StarknetIDFailedToFetchError("Failed to fetch the address from Starknet ID"),loadingState:t.isFetching?"loading-block":void 0}}catch(e){return{error:e}}return v(e)?{}:{error:new o.InvalidHexError("Invalid hex address for chain")}}get value(){return this._value}setValue(e){this._value=e}}n([s.observable],w.prototype,"_value",void 0),n([s.observable.struct],w.prototype,"_starknetID",void 0),n([s.observable.shallow],w.prototype,"_starknetIDFetchDataMap",void 0),n([s.action],w.prototype,"setStarknetID",null),n([s.computed],w.prototype,"isStarknetID",null),n([s.computed],w.prototype,"isStarknetIDFetching",null),n([s.computed],w.prototype,"uiProperties",null),n([s.action],w.prototype,"setValue",null),t.RecipientConfig=w,t.useRecipientConfig=(e,t)=>{const[r]=(0,a.useState)((()=>new w(e,t)));return r.setChain(t),r.setStarknetID(t),r}},21636:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSendTxConfig=void 0;const n=r(49851),i=r(95732);t.useSendTxConfig=(e,t,r,s,o)=>{const a=(0,n.useSenderConfig)(e,t,r,s),c=(0,i.useAmountConfig)(e,t,r,a),l=(0,n.useGasConfig)(e,r,o),u=(0,n.useFeeConfig)(e,t,r,a,c,l);return c.setFeeConfig(u),{senderConfig:a,amountConfig:c,gasConfig:l,feeConfig:u,recipientConfig:(0,n.useRecipientConfig)(e,r)}}},38593:function(e,t,r){"use strict";var n=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0}),t.useSenderConfig=t.SenderConfig=void 0;const i=r(91230),s=r(80075),o=r(2784),a=r(57167),c=r(48834);class l extends i.TxChainSetter{constructor(e,t,r,n){super(e,r),this.starknetQueriesStore=t,this._value="",this._value=n,(0,s.makeObservable)(this)}get sender(){return this._value}get value(){return this._value}setValue(e){this._value=e}get uiProperties(){var e;if(!this.value)return{error:new a.EmptyAddressError("Address is empty")};if(!this.value.startsWith("0x"))return{error:new a.InvalidHexError("Invalid hex address for chain")};{const e=this.value.replace("0x",""),t=c.Buffer.from(e,"hex");if(32!==t.length)return{error:new a.InvalidHexError("Invalid hex address for chain")};if(e.toLowerCase()!==t.toString("hex").toLowerCase())return{error:new a.InvalidHexError("Invalid hex address for chain")}}const t=this.starknetQueriesStore.get(this.chainId).queryAccountNonce.getNonce(this.value);return t.response||t.error?"Contract not found"===(null===(e=t.error)||void 0===e?void 0:e.message)?{error:new a.AccountNotDeployed("Account not deployed")}:{}:{loadingState:"loading-block"}}}n([s.observable],l.prototype,"_value",void 0),n([s.action],l.prototype,"setValue",null),t.SenderConfig=l,t.useSenderConfig=(e,t,r,n)=>{const[i]=(0,o.useState)((()=>new l(e,t,r,n)));return i.setChain(r),i.setValue(n),i}},33191:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},30297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTxConfigsValidate=void 0,t.useTxConfigsValidate=e=>({interactionBlocked:(()=>{var t,r,n,i,s,o;const a=null===(t=e.amountConfig)||void 0===t?void 0:t.uiProperties,c=null===(r=e.senderConfig)||void 0===r?void 0:r.uiProperties,l=null===(n=e.recipientConfig)||void 0===n?void 0:n.uiProperties,u=null===(i=e.gasConfig)||void 0===i?void 0:i.uiProperties,h=null===(s=e.feeConfig)||void 0===s?void 0:s.uiProperties,d=null===(o=e.gasSimulator)||void 0===o?void 0:o.uiProperties;return!!((null==a?void 0:a.error)||(null==c?void 0:c.error)||(null==l?void 0:l.error)||(null==u?void 0:u.error)||(null==h?void 0:h.error)||(null==d?void 0:d.error))||"loading-block"===(null==a?void 0:a.loadingState)||"loading-block"===(null==c?void 0:c.loadingState)||"loading-block"===(null==l?void 0:l.loadingState)||"loading-block"===(null==u?void 0:u.loadingState)||"loading-block"===(null==h?void 0:h.loadingState)||"loading-block"===(null==d?void 0:d.loadingState)})()})},96106:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.InteractionAddon=void 0,s(r(55809),t),s(r(76322),t),s(r(23694),t),s(r(6375),t),t.InteractionAddon=o(r(70346))},47722:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(61546),t),i(r(1701),t),i(r(60696),t),i(r(97529),t),i(r(3371),t),i(r(23510),t),i(r(93160),t),i(r(26307),t),i(r(74262),t),i(r(38740),t)},65880:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(96678),t),i(r(57132),t),i(r(83042),t),i(r(27013),t),i(r(83097),t),i(r(51056),t),i(r(11779),t),i(r(58615),t),i(r(15522),t),i(r(77487),t),i(r(33356),t)},19731:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(32523),t),i(r(65938),t),i(r(51556),t),i(r(64158),t),i(r(5963),t),i(r(68449),t),i(r(53824),t),i(r(93334),t),i(r(43767),t)},75477:()=>{},69413:(e,t,r)=>{"use strict";const n=r(31493);e.exports=o;const i=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},s={mapHttpRequest:d,mapHttpResponse:d,wrapRequestSerializer:p,wrapResponseSerializer:p,wrapErrorSerializer:p,req:d,res:d,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let d=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const p=e.level||"info",g=Object.create(r);g.log||(g.log=f),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(y,g,"error","log"),a(y,g,"fatal","error"),a(y,g,"warn","error"),a(y,g,"info","log"),a(y,g,"debug","log"),a(y,g,"trace","log")}});const y={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(e)};return g.levels=o.levels,g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=f,g.serializers=n,g._serialize=s,g._stdErrSerialize=d,g.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),h=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],h,a,this._stdErrSerialize)}function d(e){this._childLevel=1+(0|e._childLevel),this.error=l(e,r,"error"),this.fatal=l(e,r,"fatal"),this.warn=l(e,r,"warn"),this.info=l(e,r,"info"),this.debug=l(e,r,"debug"),this.trace=l(e,r,"trace"),a&&(this.serializers=a,this._serialize=h),t&&(this._logEvent=u([].concat(e._logEvent.bindings,r)))}return d.prototype=this,new d(this)},t&&(g._logEvent=u()),g}function a(e,t,r,s){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?f:a[r]?a[r]:i[r]||i[s]||f,function(e,t,r){var s;(e.transmit||t[r]!==f)&&(t[r]=(s=t[r],function(){const a=e.timestamp(),l=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var d=0;d<l.length;d++)l[d]=arguments[d];if(e.serialize&&!e.asObject&&c(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(h,function(e,t,r,i){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const l={};i&&(l.time=i),l.level=o.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==a&&"object"==typeof a){for(;u--&&"object"==typeof s[0];)Object.assign(l,s.shift());a=s.length?n(s.shift(),s):void 0}else"string"==typeof a&&(a=n(s.shift(),s));return void 0!==a&&(l.msg=a),l}(this,r,l,a)):s.apply(h,l),e.transmit){const n=e.transmit.level||t.level,i=o.levels.values[n],s=o.levels.values[r];if(s<i)return;!function(e,t,r){const n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,l=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,a),e._logEvent=u(l)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}}))}(e,t,r)}function c(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=o.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function l(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function u(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:y}function d(){return{}}function p(e){return e}function f(){}function g(){return!1}function y(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:y,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},80471:(e,t,r)=>{"use strict";r.d(t,{K:()=>i.KW,g:()=>l});var n=r(16210),i=r(33924),s=r(76037),o=r(72355),a=r(48834).Buffer,c=Object.defineProperty;class l{constructor(e){if(((e,t,r)=>{((e,t,r)=>{t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"transport"),this.transport=e,!e)throw new Error("Transport has not been defined")}async sendApdu(e=i.N5.GET_VERSION,t=0,r=0,n=new Uint8Array(0)){return this.transport.send(i.Ds,e,t,r,a.from(n),[i.KW.NoError,i.KW.BadCla,i.KW.BadIns,i.KW.InvalidP1P2,i.KW.UserRejected]).then((e=>{const t=e.subarray(-2),r=256*t[0]+t[1];let n=(0,i.T9)(r);return{data:e.subarray(0,-2),returnCode:r,errorMessage:n}}))}async getAppVersion(){const e=await this.sendApdu(i.N5.GET_VERSION);return{returnCode:e.returnCode,errorMessage:e.errorMessage,major:e.data[0],minor:e.data[1],patch:e.data[2]}}async getPubKey(e,t=!0){const r=(0,n.Mi)(e);try{const e=await this.sendApdu(i.N5.GET_PUB_KEY,t?1:0,0,r);return{publicKey:e.data.slice(1,65),returnCode:e.returnCode,errorMessage:e.errorMessage}}catch{return console.warn("Caught error"),{publicKey:new Uint8Array(0),returnCode:i.KW.ExecutionError,errorMessage:(0,i.T9)(i.KW.ExecutionError)}}}async getStarkKey(e,t=!0){const{publicKey:r,errorMessage:n,returnCode:s}=await this.getPubKey(e,t);return s!==i.KW.NoError?{starkKey:r,returnCode:s,errorMessage:n}:{starkKey:r.slice(0,32),returnCode:s,errorMessage:n}}async signHash(e,t){const r=(0,n.Mi)(e),s=function(e){const t=[];for(let r=0;r<e.length;r+=2)t.push(parseInt(e.substring(r,r+2),16));return Uint8Array.from(t)}(function(e){let t=e.replace(/^0x0*/,"");if(t.length>i.dI)throw"invalid hash length";return t="0".repeat(1+i.dI-t.length).concat(t),t}(t));try{let e=await this.sendApdu(i.N5.SIGN_HASH,0,0,r);return e=await this.sendApdu(i.N5.SIGN_HASH,1,0,s),e.returnCode!==i.KW.NoError?{returnCode:e.returnCode,errorMessage:(0,i.T9)(e.returnCode),r:new Uint8Array(0),s:new Uint8Array(0),v:0}:{returnCode:e.returnCode,errorMessage:e.errorMessage,r:e.data.subarray(1,33),s:e.data.subarray(33,65),v:e.data[65]}}catch{return{returnCode:i.KW.ExecutionError,errorMessage:(0,i.T9)(i.KW.ExecutionError),r:new Uint8Array(0),s:new Uint8Array(0),v:0}}}async signTx(e,t,r){await this.sendApdu(i.N5.SIGN_TX,0,0,(0,n.Mi)(e));const o=(0,n.Md)(r.accountAddress),a=(0,n.Md)(r.tip),c=(0,n.Md)(r.chainId),l=(0,n.Md)(r.nonce),u=(0,n.Md)(this.encodeDataAvailabilityMode(r.nonceDataAvailabilityMode,r.feeDataAvailabilityMode)),{l1_gas:h,l2_gas:d}=this.encodeResourceBounds(r.resourceBounds);let p=new Uint8Array([...o.toArray("be",32),...a.toArray("be",32),...h.toArray("be",32),...d.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32),...u.toArray("be",32)]);await this.sendApdu(i.N5.SIGN_TX,1,0,p),await this.sendApdu(i.N5.SIGN_TX,2,0,new Uint8Array(0)),await this.sendApdu(i.N5.SIGN_TX,3,0,new Uint8Array(0));let f=(0,n.Md)(t.length);p=new Uint8Array([...f.toArray("be",32)]),await this.sendApdu(i.N5.SIGN_TX,4,0,p);let g,y={returnCode:i.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=s.lx.toCalldata(e.calldata);let r=new Uint8Array(32*(2+t.length));(0,n.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>r[t]=e)),(0,n.Md)(s.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>r[32+t]=e)),t.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,n)=>r[64+32*t+n]=e))}));let o=[];for(let e=0;e<r.length;e+=224)o.push(r.slice(e,e+224));if(o.length>1){if(g=await this.sendApdu(i.N5.SIGN_TX,5,0,o[0]),g.returnCode!==i.KW.NoError)return y;for(const e of o.slice(1))if(g=await this.sendApdu(i.N5.SIGN_TX,5,1,e),g.returnCode!==i.KW.NoError)return y}else if(g=await this.sendApdu(i.N5.SIGN_TX,5,0,o[0]),g.returnCode!==i.KW.NoError)return y;if(g=await this.sendApdu(i.N5.SIGN_TX,5,2,new Uint8Array(0)),g.returnCode!==i.KW.NoError)return y}return(null==g?void 0:g.returnCode)===i.KW.NoError?{returnCode:g.returnCode,errorMessage:g.errorMessage,h:g.data.subarray(0,32),r:g.data.subarray(33,65),s:g.data.subarray(65,97),v:g.data[97]}:y}async signTxV1(e,t,r){await this.sendApdu(i.N5.SIGN_TX_V1,0,0,(0,n.Mi)(e));const o=(0,n.Md)(r.accountAddress),a=(0,n.Md)(r.max_fee),c=(0,n.Md)(r.chainId),l=(0,n.Md)(r.nonce);let u=new Uint8Array([...o.toArray("be",32),...a.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(i.N5.SIGN_TX_V1,1,0,u);let h=(0,n.Md)(t.length);u=new Uint8Array([...h.toArray("be",32)]),await this.sendApdu(i.N5.SIGN_TX_V1,2,0,u);let d,p={returnCode:i.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0};for(const e of t){const t=s.lx.toCalldata(e.calldata);let r=new Uint8Array(32*(2+t.length));(0,n.Md)(e.contractAddress).toArray("be",32).forEach(((e,t)=>r[t]=e)),(0,n.Md)(s.vp.getSelectorFromName(e.entrypoint)).toArray("be",32).forEach(((e,t)=>r[32+t]=e)),t.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,n)=>r[64+32*t+n]=e))}));let o=[];for(let e=0;e<r.length;e+=224)o.push(r.slice(e,e+224));if(o.length>1){if(d=await this.sendApdu(i.N5.SIGN_TX_V1,3,0,o[0]),d.returnCode!==i.KW.NoError)return p;for(const e of o.slice(1))if(d=await this.sendApdu(i.N5.SIGN_TX_V1,3,1,e),d.returnCode!==i.KW.NoError)return p}else if(d=await this.sendApdu(i.N5.SIGN_TX_V1,3,0,o[0]),d.returnCode!==i.KW.NoError)return p;if(d=await this.sendApdu(i.N5.SIGN_TX_V1,3,2,new Uint8Array(0)),d.returnCode!==i.KW.NoError)return p}return(null==d?void 0:d.returnCode)===i.KW.NoError?{returnCode:d.returnCode,errorMessage:d.errorMessage,h:d.data.subarray(0,32),r:d.data.subarray(33,65),s:d.data.subarray(65,97),v:d.data[97]}:p}async signDeployAccount(e,t){await this.sendApdu(i.N5.DEPLOY_ACCOUNT,0,0,(0,n.Mi)(e));const r=(0,n.Md)(t.contractAddress),s=(0,n.Md)(t.chainId),o=(0,n.Md)(t.nonce),a=(0,n.Md)(this.encodeDataAvailabilityMode(t.nonceDataAvailabilityMode,t.feeDataAvailabilityMode)),c=(0,n.Md)(t.class_hash),l=(0,n.Md)(t.contract_address_salt);let u=new Uint8Array([...r.toArray("be",32),...s.toArray("be",32),...o.toArray("be",32),...a.toArray("be",32),...c.toArray("be",32),...l.toArray("be",32)]);await this.sendApdu(i.N5.DEPLOY_ACCOUNT,1,0,u);const h=(0,n.Md)(t.tip),{l1_gas:d,l2_gas:p}=this.encodeResourceBounds(t.resourceBounds);u=new Uint8Array([...h.toArray("be",32),...d.toArray("be",32),...p.toArray("be",32)]),await this.sendApdu(i.N5.DEPLOY_ACCOUNT,2,0,u),await this.sendApdu(i.N5.DEPLOY_ACCOUNT,3,0,new Uint8Array(0));let f=(0,n.Md)(t.constructor_calldata.length);u=new Uint8Array([...f.toArray("be",32)]),await this.sendApdu(i.N5.DEPLOY_ACCOUNT,4,0,u);let g,y={returnCode:i.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},m=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,r)=>m[32*t+r]=e))}));let b=[];for(let e=0;e<m.length;e+=224)b.push(m.slice(e,e+224));for(const e of b)if(g=await this.sendApdu(i.N5.DEPLOY_ACCOUNT,5,0,e),g.returnCode!==i.KW.NoError)return y;return(null==g?void 0:g.returnCode)===i.KW.NoError?{returnCode:g.returnCode,errorMessage:g.errorMessage,h:g.data.subarray(0,32),r:g.data.subarray(33,65),s:g.data.subarray(65,97),v:g.data[97]}:y}async signDeployAccountV1(e,t){await this.sendApdu(i.N5.DEPLOY_ACCOUNT_V1,0,0,(0,n.Mi)(e));const r=(0,n.Md)(t.contractAddress),s=(0,n.Md)(t.class_hash),o=(0,n.Md)(t.contract_address_salt),a=(0,n.Md)(t.chainId),c=(0,n.Md)(t.nonce);let l=new Uint8Array([...r.toArray("be",32),...s.toArray("be",32),...o.toArray("be",32),...a.toArray("be",32),...c.toArray("be",32)]);await this.sendApdu(i.N5.DEPLOY_ACCOUNT_V1,1,0,l);const u=(0,n.Md)(t.max_fee);l=new Uint8Array([...u.toArray("be",32)]),await this.sendApdu(i.N5.DEPLOY_ACCOUNT_V1,2,0,l);let h=(0,n.Md)(t.constructor_calldata.length);l=new Uint8Array([...h.toArray("be",32)]),await this.sendApdu(i.N5.DEPLOY_ACCOUNT_V1,3,0,l);let d,p={returnCode:i.KW.ExecutionError,errorMessage:"Execution Error",h:new Uint8Array(0),r:new Uint8Array(0),s:new Uint8Array(0),v:0},f=new Uint8Array(32*t.constructor_calldata.length);t.constructor_calldata.forEach(((e,t)=>{(0,n.Md)(e).toArray("be",32).forEach(((e,r)=>f[32*t+r]=e))}));let g=[];for(let e=0;e<f.length;e+=224)g.push(f.slice(e,e+224));for(const e of g)if(d=await this.sendApdu(i.N5.DEPLOY_ACCOUNT_V1,4,0,e),d.returnCode!==i.KW.NoError)return p;return(null==d?void 0:d.returnCode)===i.KW.NoError?{returnCode:d.returnCode,errorMessage:d.errorMessage,h:d.data.subarray(0,32),r:d.data.subarray(33,65),s:d.data.subarray(65,97),v:d.data[97]}:p}async signMessage(e,t,r){const n=s.AT.getMessageHash(t,r);return this.signHash(e,n)}encodeResourceBounds(e){const t=BigInt(64),r=BigInt(128),i=t+r,o=BigInt(s.lC.encodeShortString("L1_GAS")),a=BigInt(s.lC.encodeShortString("L2_GAS")),c=(o<<i)+(BigInt(e.l1_gas.max_amount)<<r)+BigInt(e.l1_gas.max_price_per_unit),l=(a<<i)+(BigInt(e.l2_gas.max_amount)<<r)+BigInt(e.l2_gas.max_price_per_unit);return{l1_gas:(0,n.Md)(c),l2_gas:(0,n.Md)(l)}}encodeDataAvailabilityMode(e,t){const r=BigInt(32),n=e===o.h.L1?0:1,i=t===o.h.L1?0:1;return(BigInt(n)<<r)+BigInt(i)}}},93524:(e,t,r)=>{"use strict";function n(e){return null==e}r.d(t,{ZP:()=>Lt});var i={isNothing:n,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:n(e)?[]:[e]},repeat:function(e,t){var r,n="";for(r=0;r<t;r+=1)n+=e;return n},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var r,n,i,s;if(t)for(r=0,n=(s=Object.keys(t)).length;r<n;r+=1)e[i=s[r]]=t[i];return e}};function s(e,t){var r="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+="\n\n"+e.mark.snippet),n+" "+r):n}function o(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=s(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.toString=function(e){return this.name+": "+s(this,e)};var a=o;function c(e,t,r,n,i){var s="",o="",a=Math.floor(i/2)-1;return n-t>a&&(t=n-a+(s=" ... ").length),r-n>a&&(r=n+a-(o=" ...").length),{str:s+e.slice(t,r).replace(/\t/g,"→")+o,pos:n-t+s.length}}function l(e,t){return i.repeat(" ",t-e.length)+e}var u=function(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),"number"!=typeof t.indent&&(t.indent=1),"number"!=typeof t.linesBefore&&(t.linesBefore=3),"number"!=typeof t.linesAfter&&(t.linesAfter=2);for(var r,n=/\r?\n|\r|\0/g,s=[0],o=[],a=-1;r=n.exec(e.buffer);)o.push(r.index),s.push(r.index+r[0].length),e.position<=r.index&&a<0&&(a=s.length-2);a<0&&(a=s.length-1);var u,h,d="",p=Math.min(e.line+t.linesAfter,o.length).toString().length,f=t.maxLength-(t.indent+p+3);for(u=1;u<=t.linesBefore&&!(a-u<0);u++)h=c(e.buffer,s[a-u],o[a-u],e.position-(s[a]-s[a-u]),f),d=i.repeat(" ",t.indent)+l((e.line-u+1).toString(),p)+" | "+h.str+"\n"+d;for(h=c(e.buffer,s[a],o[a],e.position,f),d+=i.repeat(" ",t.indent)+l((e.line+1).toString(),p)+" | "+h.str+"\n",d+=i.repeat("-",t.indent+p+3+h.pos)+"^\n",u=1;u<=t.linesAfter&&!(a+u>=o.length);u++)h=c(e.buffer,s[a+u],o[a+u],e.position-(s[a]-s[a+u]),f),d+=i.repeat(" ",t.indent)+l((e.line+u+1).toString(),p)+" | "+h.str+"\n";return d.replace(/\n$/,"")},h=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],d=["scalar","sequence","mapping"],p=function(e,t){if(t=t||{},Object.keys(t).forEach((function(t){if(-1===h.indexOf(t))throw new a('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')})),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=function(e){var t={};return null!==e&&Object.keys(e).forEach((function(r){e[r].forEach((function(e){t[String(e)]=r}))})),t}(t.styleAliases||null),-1===d.indexOf(this.kind))throw new a('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function f(e,t){var r=[];return e[t].forEach((function(e){var t=r.length;r.forEach((function(r,n){r.tag===e.tag&&r.kind===e.kind&&r.multi===e.multi&&(t=n)})),r[t]=e})),r}function g(e){return this.extend(e)}g.prototype.extend=function(e){var t=[],r=[];if(e instanceof p)r.push(e);else if(Array.isArray(e))r=r.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new a("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit))}t.forEach((function(e){if(!(e instanceof p))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new a("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new a("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")})),r.forEach((function(e){if(!(e instanceof p))throw new a("Specified list of YAML types (or a single Type object) contains a non-Type object.")}));var n=Object.create(g.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(r),n.compiledImplicit=f(n,"implicit"),n.compiledExplicit=f(n,"explicit"),n.compiledTypeMap=function(){var e,t,r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function n(e){e.multi?(r.multi[e.kind].push(e),r.multi.fallback.push(e)):r[e.kind][e.tag]=r.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}(n.compiledImplicit,n.compiledExplicit),n};var y=g,m=new p("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),b=new p("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),v=new p("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}}),w=new y({explicit:[m,b,v]}),_=new p("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),E=new p("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function S(e){return 48<=e&&e<=55}function I(e){return 48<=e&&e<=57}var A=new p("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=e.length,i=0,s=!1;if(!n)return!1;if("-"!==(t=e[i])&&"+"!==t||(t=e[++i]),"0"===t){if(i+1===n)return!0;if("b"===(t=e[++i])){for(i++;i<n;i++)if("_"!==(t=e[i])){if("0"!==t&&"1"!==t)return!1;s=!0}return s&&"_"!==t}if("x"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!(48<=(r=e.charCodeAt(i))&&r<=57||65<=r&&r<=70||97<=r&&r<=102))return!1;s=!0}return s&&"_"!==t}if("o"===t){for(i++;i<n;i++)if("_"!==(t=e[i])){if(!S(e.charCodeAt(i)))return!1;s=!0}return s&&"_"!==t}}if("_"===t)return!1;for(;i<n;i++)if("_"!==(t=e[i])){if(!I(e.charCodeAt(i)))return!1;s=!0}return!(!s||"_"===t)},construct:function(e){var t,r=e,n=1;if(-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(t=r[0])&&"+"!==t||("-"===t&&(n=-1),t=(r=r.slice(1))[0]),"0"===r)return 0;if("0"===t){if("b"===r[1])return n*parseInt(r.slice(2),2);if("x"===r[1])return n*parseInt(r.slice(2),16);if("o"===r[1])return n*parseInt(r.slice(2),8)}return n*parseInt(r,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!i.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),O=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),C=/^[-+]?[0-9]+e/,x=new p("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!O.test(e)||"_"===e[e.length-1])},construct:function(e){var t,r;return r="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===r?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:r*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||i.isNegativeZero(e))},represent:function(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(i.isNegativeZero(e))return"-0.0";return r=e.toString(10),C.test(r)?r.replace("e",".e"):r},defaultStyle:"lowercase"}),T=w.extend({implicit:[_,E,A,x]}),P=T,k=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),N=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),R=new p("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==k.exec(e)||null!==N.exec(e))},construct:function(e){var t,r,n,i,s,o,a,c,l=0,u=null;if(null===(t=k.exec(e))&&(t=N.exec(e)),null===t)throw new Error("Date resolve error");if(r=+t[1],n=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(r,n,i));if(s=+t[4],o=+t[5],a=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(u=-u)),c=new Date(Date.UTC(r,n,i,s,o,a,l)),u&&c.setTime(c.getTime()-u),c},instanceOf:Date,represent:function(e){return e.toISOString()}}),M=new p("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",L=new p("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,r,n=0,i=e.length,s=D;for(r=0;r<i;r++)if(!((t=s.indexOf(e.charAt(r)))>64)){if(t<0)return!1;n+=6}return n%8==0},construct:function(e){var t,r,n=e.replace(/[\r\n=]/g,""),i=n.length,s=D,o=0,a=[];for(t=0;t<i;t++)t%4==0&&t&&(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)),o=o<<6|s.indexOf(n.charAt(t));return 0==(r=i%4*6)?(a.push(o>>16&255),a.push(o>>8&255),a.push(255&o)):18===r?(a.push(o>>10&255),a.push(o>>2&255)):12===r&&a.push(o>>4&255),new Uint8Array(a)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,r,n="",i=0,s=e.length,o=D;for(t=0;t<s;t++)t%3==0&&t&&(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[63&i]),i=(i<<8)+e[t];return 0==(r=s%3)?(n+=o[i>>18&63],n+=o[i>>12&63],n+=o[i>>6&63],n+=o[63&i]):2===r?(n+=o[i>>10&63],n+=o[i>>4&63],n+=o[i<<2&63],n+=o[64]):1===r&&(n+=o[i>>2&63],n+=o[i<<4&63],n+=o[64],n+=o[64]),n}}),j=Object.prototype.hasOwnProperty,U=Object.prototype.toString,B=new p("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,i,s,o=[],a=e;for(t=0,r=a.length;t<r;t+=1){if(n=a[t],s=!1,"[object Object]"!==U.call(n))return!1;for(i in n)if(j.call(n,i)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==o.indexOf(i))return!1;o.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),F=Object.prototype.toString,V=new p("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1){if(n=o[t],"[object Object]"!==F.call(n))return!1;if(1!==(i=Object.keys(n)).length)return!1;s[t]=[i[0],n[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,r,n,i,s,o=e;for(s=new Array(o.length),t=0,r=o.length;t<r;t+=1)n=o[t],i=Object.keys(n),s[t]=[i[0],n[i[0]]];return s}}),$=Object.prototype.hasOwnProperty,H=new p("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,r=e;for(t in r)if($.call(r,t)&&null!==r[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),z=P.extend({implicit:[R,M],explicit:[L,B,V,H]}),K=Object.prototype.hasOwnProperty,q=1,G=2,W=3,Y=4,Q=1,X=2,Z=3,J=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,ee=/[\x85\u2028\u2029]/,te=/[,\[\]\{\}]/,re=/^(?:!|!!|![a-z\-]+!)$/i,ne=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function ie(e){return Object.prototype.toString.call(e)}function se(e){return 10===e||13===e}function oe(e){return 9===e||32===e}function ae(e){return 9===e||32===e||10===e||13===e}function ce(e){return 44===e||91===e||93===e||123===e||125===e}function le(e){var t;return 48<=e&&e<=57?e-48:97<=(t=32|e)&&t<=102?t-97+10:-1}function ue(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}function he(e){return e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}for(var de=new Array(256),pe=new Array(256),fe=0;fe<256;fe++)de[fe]=ue(fe)?1:0,pe[fe]=ue(fe);function ge(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||z,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function ye(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=u(r),new a(t,r)}function me(e,t){throw ye(e,t)}function be(e,t){e.onWarning&&e.onWarning.call(null,ye(e,t))}var ve={YAML:function(e,t,r){var n,i,s;null!==e.version&&me(e,"duplication of %YAML directive"),1!==r.length&&me(e,"YAML directive accepts exactly one argument"),null===(n=/^([0-9]+)\.([0-9]+)$/.exec(r[0]))&&me(e,"ill-formed argument of the YAML directive"),i=parseInt(n[1],10),s=parseInt(n[2],10),1!==i&&me(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=s<2,1!==s&&2!==s&&be(e,"unsupported YAML version of the document")},TAG:function(e,t,r){var n,i;2!==r.length&&me(e,"TAG directive accepts exactly two arguments"),n=r[0],i=r[1],re.test(n)||me(e,"ill-formed tag handle (first argument) of the TAG directive"),K.call(e.tagMap,n)&&me(e,'there is a previously declared suffix for "'+n+'" tag handle'),ne.test(i)||me(e,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(t){me(e,"tag prefix is malformed: "+i)}e.tagMap[n]=i}};function we(e,t,r,n){var i,s,o,a;if(t<r){if(a=e.input.slice(t,r),n)for(i=0,s=a.length;i<s;i+=1)9===(o=a.charCodeAt(i))||32<=o&&o<=1114111||me(e,"expected valid JSON character");else J.test(a)&&me(e,"the stream contains non-printable characters");e.result+=a}}function _e(e,t,r,n){var s,o,a,c;for(i.isObject(r)||me(e,"cannot merge mappings; the provided source object is unacceptable"),a=0,c=(s=Object.keys(r)).length;a<c;a+=1)o=s[a],K.call(t,o)||(t[o]=r[o],n[o]=!0)}function Ee(e,t,r,n,i,s,o,a,c){var l,u;if(Array.isArray(i))for(l=0,u=(i=Array.prototype.slice.call(i)).length;l<u;l+=1)Array.isArray(i[l])&&me(e,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===ie(i[l])&&(i[l]="[object Object]");if("object"==typeof i&&"[object Object]"===ie(i)&&(i="[object Object]"),i=String(i),null===t&&(t={}),"tag:yaml.org,2002:merge"===n)if(Array.isArray(s))for(l=0,u=s.length;l<u;l+=1)_e(e,t,s[l],r);else _e(e,t,s,r);else e.json||K.call(r,i)||!K.call(t,i)||(e.line=o||e.line,e.lineStart=a||e.lineStart,e.position=c||e.position,me(e,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(t,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[i]=s,delete r[i];return t}function Se(e){var t;10===(t=e.input.charCodeAt(e.position))?e.position++:13===t?(e.position++,10===e.input.charCodeAt(e.position)&&e.position++):me(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Ie(e,t,r){for(var n=0,i=e.input.charCodeAt(e.position);0!==i;){for(;oe(i);)9===i&&-1===e.firstTabInLine&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(t&&35===i)do{i=e.input.charCodeAt(++e.position)}while(10!==i&&13!==i&&0!==i);if(!se(i))break;for(Se(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;32===i;)e.lineIndent++,i=e.input.charCodeAt(++e.position)}return-1!==r&&0!==n&&e.lineIndent<r&&be(e,"deficient indentation"),n}function Ae(e){var t,r=e.position;return!(45!==(t=e.input.charCodeAt(r))&&46!==t||t!==e.input.charCodeAt(r+1)||t!==e.input.charCodeAt(r+2)||(r+=3,0!==(t=e.input.charCodeAt(r))&&!ae(t)))}function Oe(e,t){1===t?e.result+=" ":t>1&&(e.result+=i.repeat("\n",t-1))}function Ce(e,t){var r,n,i=e.tag,s=e.anchor,o=[],a=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=o),n=e.input.charCodeAt(e.position);0!==n&&(-1!==e.firstTabInLine&&(e.position=e.firstTabInLine,me(e,"tab characters must not be used in indentation")),45===n)&&ae(e.input.charCodeAt(e.position+1));)if(a=!0,e.position++,Ie(e,!0,-1)&&e.lineIndent<=t)o.push(null),n=e.input.charCodeAt(e.position);else if(r=e.line,Pe(e,t,W,!1,!0),o.push(e.result),Ie(e,!0,-1),n=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&0!==n)me(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break;return!!a&&(e.tag=i,e.anchor=s,e.kind="sequence",e.result=o,!0)}function xe(e){var t,r,n,i,s=!1,o=!1;if(33!==(i=e.input.charCodeAt(e.position)))return!1;if(null!==e.tag&&me(e,"duplication of a tag property"),60===(i=e.input.charCodeAt(++e.position))?(s=!0,i=e.input.charCodeAt(++e.position)):33===i?(o=!0,r="!!",i=e.input.charCodeAt(++e.position)):r="!",t=e.position,s){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&62!==i);e.position<e.length?(n=e.input.slice(t,e.position),i=e.input.charCodeAt(++e.position)):me(e,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!ae(i);)33===i&&(o?me(e,"tag suffix cannot contain exclamation marks"):(r=e.input.slice(t-1,e.position+1),re.test(r)||me(e,"named tag handle cannot contain such characters"),o=!0,t=e.position+1)),i=e.input.charCodeAt(++e.position);n=e.input.slice(t,e.position),te.test(n)&&me(e,"tag suffix cannot contain flow indicator characters")}n&&!ne.test(n)&&me(e,"tag name cannot contain such characters: "+n);try{n=decodeURIComponent(n)}catch(t){me(e,"tag name is malformed: "+n)}return s?e.tag=n:K.call(e.tagMap,r)?e.tag=e.tagMap[r]+n:"!"===r?e.tag="!"+n:"!!"===r?e.tag="tag:yaml.org,2002:"+n:me(e,'undeclared tag handle "'+r+'"'),!0}function Te(e){var t,r;if(38!==(r=e.input.charCodeAt(e.position)))return!1;for(null!==e.anchor&&me(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;0!==r&&!ae(r)&&!ce(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&me(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function Pe(e,t,r,n,s){var o,a,c,l,u,h,d,p,f,g=1,y=!1,m=!1;if(null!==e.listener&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=a=c=Y===r||W===r,n&&Ie(e,!0,-1)&&(y=!0,e.lineIndent>t?g=1:e.lineIndent===t?g=0:e.lineIndent<t&&(g=-1)),1===g)for(;xe(e)||Te(e);)Ie(e,!0,-1)?(y=!0,c=o,e.lineIndent>t?g=1:e.lineIndent===t?g=0:e.lineIndent<t&&(g=-1)):c=!1;if(c&&(c=y||s),1!==g&&Y!==r||(p=q===r||G===r?t:t+1,f=e.position-e.lineStart,1===g?c&&(Ce(e,f)||function(e,t,r){var n,i,s,o,a,c,l,u=e.tag,h=e.anchor,d={},p=Object.create(null),f=null,g=null,y=null,m=!1,b=!1;if(-1!==e.firstTabInLine)return!1;for(null!==e.anchor&&(e.anchorMap[e.anchor]=d),l=e.input.charCodeAt(e.position);0!==l;){if(m||-1===e.firstTabInLine||(e.position=e.firstTabInLine,me(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),s=e.line,63!==l&&58!==l||!ae(n)){if(o=e.line,a=e.lineStart,c=e.position,!Pe(e,r,G,!1,!0))break;if(e.line===s){for(l=e.input.charCodeAt(e.position);oe(l);)l=e.input.charCodeAt(++e.position);if(58===l)ae(l=e.input.charCodeAt(++e.position))||me(e,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(Ee(e,d,p,f,g,null,o,a,c),f=g=y=null),b=!0,m=!1,i=!1,f=e.tag,g=e.result;else{if(!b)return e.tag=u,e.anchor=h,!0;me(e,"can not read an implicit mapping pair; a colon is missed")}}else{if(!b)return e.tag=u,e.anchor=h,!0;me(e,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===l?(m&&(Ee(e,d,p,f,g,null,o,a,c),f=g=y=null),b=!0,m=!0,i=!0):m?(m=!1,i=!0):me(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,l=n;if((e.line===s||e.lineIndent>t)&&(m&&(o=e.line,a=e.lineStart,c=e.position),Pe(e,t,Y,!0,i)&&(m?g=e.result:y=e.result),m||(Ee(e,d,p,f,g,y,o,a,c),f=g=y=null),Ie(e,!0,-1),l=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&0!==l)me(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return m&&Ee(e,d,p,f,g,null,o,a,c),b&&(e.tag=u,e.anchor=h,e.kind="mapping",e.result=d),b}(e,f,p))||function(e,t){var r,n,i,s,o,a,c,l,u,h,d,p,f=!0,g=e.tag,y=e.anchor,m=Object.create(null);if(91===(p=e.input.charCodeAt(e.position)))o=93,l=!1,s=[];else{if(123!==p)return!1;o=125,l=!0,s={}}for(null!==e.anchor&&(e.anchorMap[e.anchor]=s),p=e.input.charCodeAt(++e.position);0!==p;){if(Ie(e,!0,t),(p=e.input.charCodeAt(e.position))===o)return e.position++,e.tag=g,e.anchor=y,e.kind=l?"mapping":"sequence",e.result=s,!0;f?44===p&&me(e,"expected the node content, but found ','"):me(e,"missed comma between flow collection entries"),d=null,a=c=!1,63===p&&ae(e.input.charCodeAt(e.position+1))&&(a=c=!0,e.position++,Ie(e,!0,t)),r=e.line,n=e.lineStart,i=e.position,Pe(e,t,q,!1,!0),h=e.tag,u=e.result,Ie(e,!0,t),p=e.input.charCodeAt(e.position),!c&&e.line!==r||58!==p||(a=!0,p=e.input.charCodeAt(++e.position),Ie(e,!0,t),Pe(e,t,q,!1,!0),d=e.result),l?Ee(e,s,m,h,u,d,r,n,i):a?s.push(Ee(e,null,m,h,u,d,r,n,i)):s.push(u),Ie(e,!0,t),44===(p=e.input.charCodeAt(e.position))?(f=!0,p=e.input.charCodeAt(++e.position)):f=!1}me(e,"unexpected end of the stream within a flow collection")}(e,p)?m=!0:(a&&function(e,t){var r,n,s,o,a,c=Q,l=!1,u=!1,h=t,d=0,p=!1;if(124===(o=e.input.charCodeAt(e.position)))n=!1;else{if(62!==o)return!1;n=!0}for(e.kind="scalar",e.result="";0!==o;)if(43===(o=e.input.charCodeAt(++e.position))||45===o)Q===c?c=43===o?Z:X:me(e,"repeat of a chomping mode identifier");else{if(!((s=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===s?me(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?me(e,"repeat of an indentation width identifier"):(h=t+s-1,u=!0)}if(oe(o)){do{o=e.input.charCodeAt(++e.position)}while(oe(o));if(35===o)do{o=e.input.charCodeAt(++e.position)}while(!se(o)&&0!==o)}for(;0!==o;){for(Se(e),e.lineIndent=0,o=e.input.charCodeAt(e.position);(!u||e.lineIndent<h)&&32===o;)e.lineIndent++,o=e.input.charCodeAt(++e.position);if(!u&&e.lineIndent>h&&(h=e.lineIndent),se(o))d++;else{if(e.lineIndent<h){c===Z?e.result+=i.repeat("\n",l?1+d:d):c===Q&&l&&(e.result+="\n");break}for(n?oe(o)?(p=!0,e.result+=i.repeat("\n",l?1+d:d)):p?(p=!1,e.result+=i.repeat("\n",d+1)):0===d?l&&(e.result+=" "):e.result+=i.repeat("\n",d):e.result+=i.repeat("\n",l?1+d:d),l=!0,u=!0,d=0,r=e.position;!se(o)&&0!==o;)o=e.input.charCodeAt(++e.position);we(e,r,e.position,!1)}}return!0}(e,p)||function(e,t){var r,n,i;if(39!==(r=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;0!==(r=e.input.charCodeAt(e.position));)if(39===r){if(we(e,n,e.position,!0),39!==(r=e.input.charCodeAt(++e.position)))return!0;n=e.position,e.position++,i=e.position}else se(r)?(we(e,n,i,!0),Oe(e,Ie(e,!1,t)),n=i=e.position):e.position===e.lineStart&&Ae(e)?me(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);me(e,"unexpected end of the stream within a single quoted scalar")}(e,p)||function(e,t){var r,n,i,s,o,a,c;if(34!==(a=e.input.charCodeAt(e.position)))return!1;for(e.kind="scalar",e.result="",e.position++,r=n=e.position;0!==(a=e.input.charCodeAt(e.position));){if(34===a)return we(e,r,e.position,!0),e.position++,!0;if(92===a){if(we(e,r,e.position,!0),se(a=e.input.charCodeAt(++e.position)))Ie(e,!1,t);else if(a<256&&de[a])e.result+=pe[a],e.position++;else if((o=120===(c=a)?2:117===c?4:85===c?8:0)>0){for(i=o,s=0;i>0;i--)(o=le(a=e.input.charCodeAt(++e.position)))>=0?s=(s<<4)+o:me(e,"expected hexadecimal character");e.result+=he(s),e.position++}else me(e,"unknown escape sequence");r=n=e.position}else se(a)?(we(e,r,n,!0),Oe(e,Ie(e,!1,t)),r=n=e.position):e.position===e.lineStart&&Ae(e)?me(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}me(e,"unexpected end of the stream within a double quoted scalar")}(e,p)?m=!0:function(e){var t,r,n;if(42!==(n=e.input.charCodeAt(e.position)))return!1;for(n=e.input.charCodeAt(++e.position),t=e.position;0!==n&&!ae(n)&&!ce(n);)n=e.input.charCodeAt(++e.position);return e.position===t&&me(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),K.call(e.anchorMap,r)||me(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Ie(e,!0,-1),!0}(e)?(m=!0,null===e.tag&&null===e.anchor||me(e,"alias node should not have any properties")):function(e,t,r){var n,i,s,o,a,c,l,u,h=e.kind,d=e.result;if(ae(u=e.input.charCodeAt(e.position))||ce(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(ae(n=e.input.charCodeAt(e.position+1))||r&&ce(n)))return!1;for(e.kind="scalar",e.result="",i=s=e.position,o=!1;0!==u;){if(58===u){if(ae(n=e.input.charCodeAt(e.position+1))||r&&ce(n))break}else if(35===u){if(ae(e.input.charCodeAt(e.position-1)))break}else{if(e.position===e.lineStart&&Ae(e)||r&&ce(u))break;if(se(u)){if(a=e.line,c=e.lineStart,l=e.lineIndent,Ie(e,!1,-1),e.lineIndent>=t){o=!0,u=e.input.charCodeAt(e.position);continue}e.position=s,e.line=a,e.lineStart=c,e.lineIndent=l;break}}o&&(we(e,i,s,!1),Oe(e,e.line-a),i=s=e.position,o=!1),oe(u)||(s=e.position+1),u=e.input.charCodeAt(++e.position)}return we(e,i,s,!1),!!e.result||(e.kind=h,e.result=d,!1)}(e,p,q===r)&&(m=!0,null===e.tag&&(e.tag="?")),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):0===g&&(m=c&&Ce(e,f))),null===e.tag)null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);else if("?"===e.tag){for(null!==e.result&&"scalar"!==e.kind&&me(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),l=0,u=e.implicitTypes.length;l<u;l+=1)if((d=e.implicitTypes[l]).resolve(e.result)){e.result=d.construct(e.result),e.tag=d.tag,null!==e.anchor&&(e.anchorMap[e.anchor]=e.result);break}}else if("!"!==e.tag){if(K.call(e.typeMap[e.kind||"fallback"],e.tag))d=e.typeMap[e.kind||"fallback"][e.tag];else for(d=null,l=0,u=(h=e.typeMap.multi[e.kind||"fallback"]).length;l<u;l+=1)if(e.tag.slice(0,h[l].tag.length)===h[l].tag){d=h[l];break}d||me(e,"unknown tag !<"+e.tag+">"),null!==e.result&&d.kind!==e.kind&&me(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+d.kind+'", not "'+e.kind+'"'),d.resolve(e.result,e.tag)?(e.result=d.construct(e.result,e.tag),null!==e.anchor&&(e.anchorMap[e.anchor]=e.result)):me(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return null!==e.listener&&e.listener("close",e),null!==e.tag||null!==e.anchor||m}function ke(e){var t,r,n,i,s=e.position,o=!1;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);0!==(i=e.input.charCodeAt(e.position))&&(Ie(e,!0,-1),i=e.input.charCodeAt(e.position),!(e.lineIndent>0||37!==i));){for(o=!0,i=e.input.charCodeAt(++e.position),t=e.position;0!==i&&!ae(i);)i=e.input.charCodeAt(++e.position);for(n=[],(r=e.input.slice(t,e.position)).length<1&&me(e,"directive name must not be less than one character in length");0!==i;){for(;oe(i);)i=e.input.charCodeAt(++e.position);if(35===i){do{i=e.input.charCodeAt(++e.position)}while(0!==i&&!se(i));break}if(se(i))break;for(t=e.position;0!==i&&!ae(i);)i=e.input.charCodeAt(++e.position);n.push(e.input.slice(t,e.position))}0!==i&&Se(e),K.call(ve,r)?ve[r](e,r,n):be(e,'unknown document directive "'+r+'"')}Ie(e,!0,-1),0===e.lineIndent&&45===e.input.charCodeAt(e.position)&&45===e.input.charCodeAt(e.position+1)&&45===e.input.charCodeAt(e.position+2)?(e.position+=3,Ie(e,!0,-1)):o&&me(e,"directives end mark is expected"),Pe(e,e.lineIndent-1,Y,!1,!0),Ie(e,!0,-1),e.checkLineBreaks&&ee.test(e.input.slice(s,e.position))&&be(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&Ae(e)?46===e.input.charCodeAt(e.position)&&(e.position+=3,Ie(e,!0,-1)):e.position<e.length-1&&me(e,"end of the stream or a document separator is expected")}function Ne(e,t){t=t||{},0!==(e=String(e)).length&&(10!==e.charCodeAt(e.length-1)&&13!==e.charCodeAt(e.length-1)&&(e+="\n"),65279===e.charCodeAt(0)&&(e=e.slice(1)));var r=new ge(e,t),n=e.indexOf("\0");for(-1!==n&&(r.position=n,me(r,"null byte is not allowed in input")),r.input+="\0";32===r.input.charCodeAt(r.position);)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)ke(r);return r.documents}var Re={loadAll:function(e,t,r){null!==t&&"object"==typeof t&&void 0===r&&(r=t,t=null);var n=Ne(e,r);if("function"!=typeof t)return n;for(var i=0,s=n.length;i<s;i+=1)t(n[i])},load:function(e,t){var r=Ne(e,t);if(0!==r.length){if(1===r.length)return r[0];throw new a("expected a single document in the stream, but found more")}}},Me=Object.prototype.toString,De=Object.prototype.hasOwnProperty,Le=65279,je=9,Ue=10,Be=13,Fe=32,Ve=33,$e=34,He=35,ze=37,Ke=38,qe=39,Ge=42,We=44,Ye=45,Qe=58,Xe=61,Ze=62,Je=63,et=64,tt=91,rt=93,nt=96,it=123,st=124,ot=125,at={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},ct=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],lt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function ut(e){var t,r,n;if(t=e.toString(16).toUpperCase(),e<=255)r="x",n=2;else if(e<=65535)r="u",n=4;else{if(!(e<=4294967295))throw new a("code point within a string may not be greater than 0xFFFFFFFF");r="U",n=8}return"\\"+r+i.repeat("0",n-t.length)+t}var ht=2;function dt(e){this.schema=e.schema||z,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=i.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var r,n,i,s,o,a,c;if(null===t)return{};for(r={},i=0,s=(n=Object.keys(t)).length;i<s;i+=1)o=n[i],a=String(t[o]),"!!"===o.slice(0,2)&&(o="tag:yaml.org,2002:"+o.slice(2)),(c=e.compiledTypeMap.fallback[o])&&De.call(c.styleAliases,a)&&(a=c.styleAliases[a]),r[o]=a;return r}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?ht:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function pt(e,t){for(var r,n=i.repeat(" ",t),s=0,o=-1,a="",c=e.length;s<c;)-1===(o=e.indexOf("\n",s))?(r=e.slice(s),s=c):(r=e.slice(s,o+1),s=o+1),r.length&&"\n"!==r&&(a+=n),a+=r;return a}function ft(e,t){return"\n"+i.repeat(" ",e.indent*t)}function gt(e){return e===Fe||e===je}function yt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Le||65536<=e&&e<=1114111}function mt(e){return yt(e)&&e!==Le&&e!==Be&&e!==Ue}function bt(e,t,r){var n=mt(e),i=n&&!gt(e);return(r?n:n&&e!==We&&e!==tt&&e!==rt&&e!==it&&e!==ot)&&e!==He&&!(t===Qe&&!i)||mt(t)&&!gt(t)&&e===He||t===Qe&&i}function vt(e,t){var r,n=e.charCodeAt(t);return n>=55296&&n<=56319&&t+1<e.length&&(r=e.charCodeAt(t+1))>=56320&&r<=57343?1024*(n-55296)+r-56320+65536:n}function wt(e){return/^\n* /.test(e)}var _t=1,Et=2,St=3,It=4,At=5;function Ot(e,t,r,n,i){e.dump=function(){if(0===t.length)return e.quotingType===ht?'""':"''";if(!e.noCompatMode&&(-1!==ct.indexOf(t)||lt.test(t)))return e.quotingType===ht?'"'+t+'"':"'"+t+"'";var s=e.indent*Math.max(1,r),o=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),c=n||e.flowLevel>-1&&r>=e.flowLevel;switch(function(e,t,r,n,i,s,o,a){var c,l,u=0,h=null,d=!1,p=!1,f=-1!==n,g=-1,y=yt(l=vt(e,0))&&l!==Le&&!gt(l)&&l!==Ye&&l!==Je&&l!==Qe&&l!==We&&l!==tt&&l!==rt&&l!==it&&l!==ot&&l!==He&&l!==Ke&&l!==Ge&&l!==Ve&&l!==st&&l!==Xe&&l!==Ze&&l!==qe&&l!==$e&&l!==ze&&l!==et&&l!==nt&&function(e){return!gt(e)&&e!==Qe}(vt(e,e.length-1));if(t||o)for(c=0;c<e.length;u>=65536?c+=2:c++){if(!yt(u=vt(e,c)))return At;y=y&&bt(u,h,a),h=u}else{for(c=0;c<e.length;u>=65536?c+=2:c++){if((u=vt(e,c))===Ue)d=!0,f&&(p=p||c-g-1>n&&" "!==e[g+1],g=c);else if(!yt(u))return At;y=y&&bt(u,h,a),h=u}p=p||f&&c-g-1>n&&" "!==e[g+1]}return d||p?r>9&&wt(e)?At:o?s===ht?At:Et:p?It:St:!y||o||i(e)?s===ht?At:Et:_t}(t,c,e.indent,o,(function(t){return function(e,t){var r,n;for(r=0,n=e.implicitTypes.length;r<n;r+=1)if(e.implicitTypes[r].resolve(t))return!0;return!1}(e,t)}),e.quotingType,e.forceQuotes&&!n,i)){case _t:return t;case Et:return"'"+t.replace(/'/g,"''")+"'";case St:return"|"+Ct(t,e.indent)+xt(pt(t,s));case It:return">"+Ct(t,e.indent)+xt(pt(function(e,t){for(var r,n,i,s=/(\n+)([^\n]*)/g,o=(i=-1!==(i=e.indexOf("\n"))?i:e.length,s.lastIndex=i,Tt(e.slice(0,i),t)),a="\n"===e[0]||" "===e[0];n=s.exec(e);){var c=n[1],l=n[2];r=" "===l[0],o+=c+(a||r||""===l?"":"\n")+Tt(l,t),a=r}return o}(t,o),s));case At:return'"'+function(e){for(var t,r="",n=0,i=0;i<e.length;n>=65536?i+=2:i++)n=vt(e,i),!(t=at[n])&&yt(n)?(r+=e[i],n>=65536&&(r+=e[i+1])):r+=t||ut(n);return r}(t)+'"';default:throw new a("impossible error: invalid scalar style")}}()}function Ct(e,t){var r=wt(e)?String(t):"",n="\n"===e[e.length-1];return r+(!n||"\n"!==e[e.length-2]&&"\n"!==e?n?"":"-":"+")+"\n"}function xt(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function Tt(e,t){if(""===e||" "===e[0])return e;for(var r,n,i=/ [^ ]/g,s=0,o=0,a=0,c="";r=i.exec(e);)(a=r.index)-s>t&&(n=o>s?o:a,c+="\n"+e.slice(s,n),s=n+1),o=a;return c+="\n",e.length-s>t&&o>s?c+=e.slice(s,o)+"\n"+e.slice(o+1):c+=e.slice(s),c.slice(1)}function Pt(e,t,r,n){var i,s,o,a="",c=e.tag;for(i=0,s=r.length;i<s;i+=1)o=r[i],e.replacer&&(o=e.replacer.call(r,String(i),o)),(Nt(e,t+1,o,!0,!0,!1,!0)||void 0===o&&Nt(e,t+1,null,!0,!0,!1,!0))&&(n&&""===a||(a+=ft(e,t)),e.dump&&Ue===e.dump.charCodeAt(0)?a+="-":a+="- ",a+=e.dump);e.tag=c,e.dump=a||"[]"}function kt(e,t,r){var n,i,s,o,c,l;for(s=0,o=(i=r?e.explicitTypes:e.implicitTypes).length;s<o;s+=1)if(((c=i[s]).instanceOf||c.predicate)&&(!c.instanceOf||"object"==typeof t&&t instanceof c.instanceOf)&&(!c.predicate||c.predicate(t))){if(r?c.multi&&c.representName?e.tag=c.representName(t):e.tag=c.tag:e.tag="?",c.represent){if(l=e.styleMap[c.tag]||c.defaultStyle,"[object Function]"===Me.call(c.represent))n=c.represent(t,l);else{if(!De.call(c.represent,l))throw new a("!<"+c.tag+'> tag resolver accepts not "'+l+'" style');n=c.represent[l](t,l)}e.dump=n}return!0}return!1}function Nt(e,t,r,n,i,s,o){e.tag=null,e.dump=r,kt(e,r,!1)||kt(e,r,!0);var c,l=Me.call(e.dump),u=n;n&&(n=e.flowLevel<0||e.flowLevel>t);var h,d,p="[object Object]"===l||"[object Array]"===l;if(p&&(d=-1!==(h=e.duplicates.indexOf(r))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(i=!1),d&&e.usedDuplicates[h])e.dump="*ref_"+h;else{if(p&&d&&!e.usedDuplicates[h]&&(e.usedDuplicates[h]=!0),"[object Object]"===l)n&&0!==Object.keys(e.dump).length?(function(e,t,r,n){var i,s,o,c,l,u,h="",d=e.tag,p=Object.keys(r);if(!0===e.sortKeys)p.sort();else if("function"==typeof e.sortKeys)p.sort(e.sortKeys);else if(e.sortKeys)throw new a("sortKeys must be a boolean or a function");for(i=0,s=p.length;i<s;i+=1)u="",n&&""===h||(u+=ft(e,t)),c=r[o=p[i]],e.replacer&&(c=e.replacer.call(r,o,c)),Nt(e,t+1,o,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&Ue===e.dump.charCodeAt(0)?u+="?":u+="? "),u+=e.dump,l&&(u+=ft(e,t)),Nt(e,t+1,c,!0,l)&&(e.dump&&Ue===e.dump.charCodeAt(0)?u+=":":u+=": ",h+=u+=e.dump));e.tag=d,e.dump=h||"{}"}(e,t,e.dump,i),d&&(e.dump="&ref_"+h+e.dump)):(function(e,t,r){var n,i,s,o,a,c="",l=e.tag,u=Object.keys(r);for(n=0,i=u.length;n<i;n+=1)a="",""!==c&&(a+=", "),e.condenseFlow&&(a+='"'),o=r[s=u[n]],e.replacer&&(o=e.replacer.call(r,s,o)),Nt(e,t,s,!1,!1)&&(e.dump.length>1024&&(a+="? "),a+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),Nt(e,t,o,!1,!1)&&(c+=a+=e.dump));e.tag=l,e.dump="{"+c+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else if("[object Array]"===l)n&&0!==e.dump.length?(e.noArrayIndent&&!o&&t>0?Pt(e,t-1,e.dump,i):Pt(e,t,e.dump,i),d&&(e.dump="&ref_"+h+e.dump)):(function(e,t,r){var n,i,s,o="",a=e.tag;for(n=0,i=r.length;n<i;n+=1)s=r[n],e.replacer&&(s=e.replacer.call(r,String(n),s)),(Nt(e,t,s,!1,!1)||void 0===s&&Nt(e,t,null,!1,!1))&&(""!==o&&(o+=","+(e.condenseFlow?"":" ")),o+=e.dump);e.tag=a,e.dump="["+o+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+h+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new a("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&Ot(e,e.dump,t,s,u)}null!==e.tag&&"?"!==e.tag&&(c=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),c="!"===e.tag[0]?"!"+c:"tag:yaml.org,2002:"===c.slice(0,18)?"!!"+c.slice(18):"!<"+c+">",e.dump=c+" "+e.dump)}return!0}function Rt(e,t){var r,n,i=[],s=[];for(Mt(e,i,s),r=0,n=s.length;r<n;r+=1)t.duplicates.push(i[s[r]]);t.usedDuplicates=new Array(n)}function Mt(e,t,r){var n,i,s;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===r.indexOf(i)&&r.push(i);else if(t.push(e),Array.isArray(e))for(i=0,s=e.length;i<s;i+=1)Mt(e[i],t,r);else for(i=0,s=(n=Object.keys(e)).length;i<s;i+=1)Mt(e[n[i]],t,r)}function Dt(e,t){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+t+" instead, which is now safe by default.")}}const Lt={Type:p,Schema:y,FAILSAFE_SCHEMA:w,JSON_SCHEMA:T,CORE_SCHEMA:P,DEFAULT_SCHEMA:z,load:Re.load,loadAll:Re.loadAll,dump:function(e,t){var r=new dt(t=t||{});r.noRefs||Rt(e,r);var n=e;return r.replacer&&(n=r.replacer.call({"":n},"",n)),Nt(r,0,n,!0,!0)?r.dump+"\n":""},YAMLException:a,types:{binary:L,float:x,map:v,null:_,pairs:V,set:H,timestamp:R,bool:E,int:A,merge:M,omap:B,seq:b,str:m},safeLoad:Dt("safeLoad","load"),safeLoadAll:Dt("safeLoadAll","loadAll"),safeDump:Dt("safeDump","dump")}},14002:(e,t,r)=>{"use strict";r.d(t,{OK:()=>De,cv:()=>F,lC:()=>ot,lx:()=>xr,vp:()=>Tr});var n=r(73812),i=r(38388),s=r(95253),o=r(17271),a=r(48796),c=r(96649),l=r(64905),u=r(20368),h=r(89629),d=r(49595),p=r(72664),f=r(25959),g=r(48147),y=r(89307),m=r(96252),b=(r(49705),Object.defineProperty),v=Object.getOwnPropertyDescriptor,w=Object.getOwnPropertyNames,_=Object.prototype.hasOwnProperty,E=(e,t)=>{for(var r in t)b(e,r,{get:t[r],enumerable:!0})},S=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of w(t))_.call(e,i)||i===r||b(e,i,{get:()=>t[i],enumerable:!(n=v(t,i))||n.enumerable});return e};E({},{ADDR_BOUND:()=>ce,API_VERSION:()=>se,BaseUrl:()=>pe,FeeMarginPercentage:()=>me,IS_BROWSER:()=>V,MASK_250:()=>ie,MAX_STORAGE_ITEM_SIZE:()=>ae,NetworkName:()=>fe,PRIME:()=>oe,RANGE_FELT:()=>ue,RANGE_I128:()=>he,RANGE_U128:()=>de,RPC_DEFAULT_VERSION:()=>ve,RPC_NODES:()=>we,StarknetChainId:()=>ge,TEXT_TO_FELT_MAX_LEN:()=>re,TRANSACTION_VERSION:()=>I.ETransactionVersion,TransactionHashPrefix:()=>ye,UDC:()=>be,ZERO:()=>ne});var I={};E(I,{JRPC:()=>A,RPCSPEC06:()=>O,RPCSPEC07:()=>n});var A={},O={};E(O,{EBlockTag:()=>M,EDAMode:()=>L,EDataAvailabilityMode:()=>D,ESimulationFlag:()=>P,ETransactionExecutionStatus:()=>R,ETransactionFinalityStatus:()=>N,ETransactionStatus:()=>k,ETransactionType:()=>T,ETransactionVersion:()=>j,ETransactionVersion2:()=>U,ETransactionVersion3:()=>B,Errors:()=>C,SPEC:()=>x});var C={},x={},T=(e=>(e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.INVOKE="INVOKE",e.L1_HANDLER="L1_HANDLER",e))(T||{}),P=(e=>(e.SKIP_VALIDATE="SKIP_VALIDATE",e.SKIP_FEE_CHARGE="SKIP_FEE_CHARGE",e))(P||{}),k=(e=>(e.RECEIVED="RECEIVED",e.REJECTED="REJECTED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(k||{}),N=(e=>(e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(N||{}),R=(e=>(e.SUCCEEDED="SUCCEEDED",e.REVERTED="REVERTED",e))(R||{}),M=(e=>(e.PENDING="pending",e.LATEST="latest",e))(M||{}),D=(e=>(e.L1="L1",e.L2="L2",e))(D||{}),L=(e=>(e[e.L1=0]="L1",e[e.L2=1]="L2",e))(L||{}),j=(e=>(e.V0="0x0",e.V1="0x1",e.V2="0x2",e.V3="0x3",e.F0="0x100000000000000000000000000000000",e.F1="0x100000000000000000000000000000001",e.F2="0x100000000000000000000000000000002",e.F3="0x100000000000000000000000000000003",e))(j||{}),U=(e=>(e.V0="0x0",e.V1="0x1",e.V2="0x2",e.F0="0x100000000000000000000000000000000",e.F1="0x100000000000000000000000000000001",e.F2="0x100000000000000000000000000000002",e))(U||{}),B=(e=>(e.V3="0x3",e.F3="0x100000000000000000000000000000003",e))(B||{});S(I,n,"default");var F={};E(F,{IS_BROWSER:()=>V,addHexPrefix:()=>Q,arrayBufferToString:()=>H,atobUniversal:()=>q,btoaUniversal:()=>G,buf2hex:()=>W,calcByteLength:()=>Z,padLeft:()=>X,pascalToSnake:()=>te,removeHexPrefix:()=>Y,sanitizeBytes:()=>J,sanitizeHex:()=>ee,stringToArrayBuffer:()=>K,utf8ToArray:()=>z});var V="undefined"!=typeof window,$="0";function H(e){return new Uint8Array(e).reduce(((e,t)=>e+String.fromCharCode(t)),"")}function z(e){return(new TextEncoder).encode(e)}function K(e){return z(e)}function q(e){return s.US.decode(e)}function G(e){return s.US.encode(new Uint8Array(e))}function W(e){return e.reduce(((e,t)=>e+t.toString(16).padStart(2,"0")),"")}function Y(e){return e.replace(/^0x/i,"")}function Q(e){return`0x${Y(e)}`}function X(e,t,r=$){return function(e,t,r,n=$){const i=t-e.length;let s=e;if(i>0){const t=n.repeat(i);s=r?t+e:e+t}return s}(e,t,!0,r)}function Z(e,t=8){const{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function J(e,t=8,r=$){return X(e,Z(e,t),r)}function ee(e){return(e=J(e=Y(e),2))&&(e=Q(e)),e}var te=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e,re=31,ne=0n,ie=2n**250n-1n,se=ne,oe=2n**251n+17n*2n**192n+1n,ae=256n,ce=2n**251n-ae,le=(e,t)=>({min:e,max:t}),ue=le(ne,oe-1n),he=le(-(2n**127n),2n**127n-1n),de=le(ne,2n**128n-1n),pe=(e=>(e.SN_MAIN="https://alpha-mainnet.starknet.io",e.SN_SEPOLIA="https://alpha-sepolia.starknet.io",e))(pe||{}),fe=(e=>(e.SN_MAIN="SN_MAIN",e.SN_SEPOLIA="SN_SEPOLIA",e))(fe||{}),ge=(e=>(e.SN_MAIN="0x534e5f4d41494e",e.SN_SEPOLIA="0x534e5f5345504f4c4941",e))(ge||{}),ye=(e=>(e.DECLARE="0x6465636c617265",e.DEPLOY="0x6465706c6f79",e.DEPLOY_ACCOUNT="0x6465706c6f795f6163636f756e74",e.INVOKE="0x696e766f6b65",e.L1_HANDLER="0x6c315f68616e646c6572",e))(ye||{}),me=(e=>(e[e.L1_BOUND_MAX_AMOUNT=50]="L1_BOUND_MAX_AMOUNT",e[e.L1_BOUND_MAX_PRICE_PER_UNIT=50]="L1_BOUND_MAX_PRICE_PER_UNIT",e[e.MAX_FEE=50]="MAX_FEE",e))(me||{}),be={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},ve="v0_7",we={SN_MAIN:[`https://starknet-mainnet.public.blastapi.io/rpc/${ve}`,`https://free-rpc.nethermind.io/mainnet-juno/${ve}`],SN_SEPOLIA:[`https://starknet-sepolia.public.blastapi.io/rpc/${ve}`,`https://free-rpc.nethermind.io/sepolia-juno/${ve}`]},_e={};E(_e,{RpcChannel:()=>ri});var Ee=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){const{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){const{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},Se=class extends Ee{};E({},{BlockStatus:()=>Ne,BlockTag:()=>Re,EntryPointType:()=>Ce,Literal:()=>Oe,RPC:()=>I,TransactionExecutionStatus:()=>ke,TransactionFinalityStatus:()=>Pe,TransactionStatus:()=>Te,TransactionType:()=>xe,TypedDataRevision:()=>c.P,Uint:()=>Ae,ValidateType:()=>Ie});var Ie=(e=>(e.DEPLOY="DEPLOY",e.CALL="CALL",e.INVOKE="INVOKE",e))(Ie||{}),Ae=(e=>(e.u8="core::integer::u8",e.u16="core::integer::u16",e.u32="core::integer::u32",e.u64="core::integer::u64",e.u128="core::integer::u128",e.u256="core::integer::u256",e.u512="core::integer::u512",e))(Ae||{}),Oe=(e=>(e.ClassHash="core::starknet::class_hash::ClassHash",e.ContractAddress="core::starknet::contract_address::ContractAddress",e.Secp256k1Point="core::starknet::secp256k1::Secp256k1Point",e))(Oe||{}),Ce=(e=>(e.EXTERNAL="EXTERNAL",e.L1_HANDLER="L1_HANDLER",e.CONSTRUCTOR="CONSTRUCTOR",e))(Ce||{}),xe=(e=>(e.DECLARE="DECLARE",e.DEPLOY="DEPLOY",e.DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",e.INVOKE="INVOKE_FUNCTION",e))(xe||{}),Te=(e=>(e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.REJECTED="REJECTED",e.REVERTED="REVERTED",e))(Te||{}),Pe=(e=>(e.NOT_RECEIVED="NOT_RECEIVED",e.RECEIVED="RECEIVED",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e))(Pe||{}),ke=(e=>(e.REJECTED="REJECTED",e.REVERTED="REVERTED",e.SUCCEEDED="SUCCEEDED",e))(ke||{}),Ne=(e=>(e.PENDING="PENDING",e.ACCEPTED_ON_L1="ACCEPTED_ON_L1",e.ACCEPTED_ON_L2="ACCEPTED_ON_L2",e.REJECTED="REJECTED",e))(Ne||{}),Re=(e=>(e.PENDING="pending",e.LATEST="latest",e))(Re||{});function Me(e,t){if(!e)throw new Error(t||"Assertion failure")}var De={};function Le(e){return/^0x[0-9a-f]*$/i.test(e)}function je(e){return BigInt(e)}function Ue(e){return"bigint"==typeof e}function Be(e){return Q(je(e).toString(16))}E(De,{addPercent:()=>Je,assertInRange:()=>ze,bigNumberishArrayToDecimalStringArray:()=>Ke,bigNumberishArrayToHexadecimalStringArray:()=>qe,cleanHex:()=>He,getDecimalString:()=>We,getHexString:()=>Ye,getHexStringArray:()=>Qe,hexToBytes:()=>Ze,hexToDecimalString:()=>$e,isBigInt:()=>Ue,isBoolean:()=>tt,isHex:()=>Le,isNumber:()=>et,isStringWholeNumber:()=>Ge,toBigInt:()=>je,toCairoBool:()=>Xe,toHex:()=>Be,toHexString:()=>Fe,toStorageKey:()=>Ve});var Fe=Be;function Ve(e){return Q(je(e).toString(16).padStart(64,"0"))}function $e(e){return BigInt(Q(e)).toString(10)}function He(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function ze(e,t,r,n=""){const i=""===n?"invalid length":`invalid ${n} length`,s=BigInt(e),o=BigInt(t),a=BigInt(r);Me(s>=o&&s<=a,`Message not signable, ${i}.`)}function Ke(e){return e.map((e=>je(e).toString(10)))}function qe(e){return e.map((e=>Be(e)))}function Ge(e){return/^\d+$/.test(e)}function We(e){if(Le(e))return $e(e);if(Ge(e))return e;throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function Ye(e){if(Le(e))return e;if(Ge(e))return Fe(e);throw new Error(`${e} needs to be a hex-string or whole-number-string`)}function Qe(e){return e.map(Ye)}function Xe(e){return(+e).toString()}function Ze(e){if(!Le(e))throw new Error(`${e} needs to be a hex-string`);let t=Y(e);return t.length%2!=0&&(t=`0${t}`),(0,o.hexToBytes)(t)}function Je(e,t){const r=BigInt(e);return r+r*BigInt(t)/100n}function et(e){return"number"==typeof e}function tt(e){return"boolean"==typeof e}function rt(e){const t=Y(Be(BigInt(e))),r=t.length%2==0?t:`0${t}`;return Q((0,l.keccak)(Ze(Q(r))).toString(16))}function nt(e){const t=BigInt(function(e){return Q((0,l.keccak)(z(e)).toString(16))}(e));return t&ie}function it(e){return Be(nt(e))}function st(e){return Le(e)?e:Ge(e)?Fe(e):it(e)}E({},{getSelector:()=>st,getSelectorFromName:()=>it,keccakBn:()=>rt,starknetKeccak:()=>nt});var ot={};function at(e){return/^[\x00-\x7F]*$/.test(e)}function ct(e){return e.length<=re}function lt(e){return/^[0-9]*$/i.test(e)}function ut(e){return"string"==typeof e}function ht(e){return ut(e)&&!Le(e)&&!Ge(e)}E(ot,{decodeShortString:()=>yt,encodeShortString:()=>gt,isASCII:()=>at,isDecimalString:()=>lt,isLongText:()=>pt,isShortString:()=>ct,isShortText:()=>dt,isString:()=>ut,isText:()=>ht,splitLongString:()=>ft});var dt=e=>ht(e)&&ct(e),pt=e=>ht(e)&&!ct(e);function ft(e){const t=RegExp(`[^]{1,${re}}`,"g");return e.match(t)||[]}function gt(e){if(!at(e))throw new Error(`${e} is not an ASCII string`);if(!ct(e))throw new Error(`${e} is too long`);return Q(e.replace(/./g,(e=>e.charCodeAt(0).toString(16))))}function yt(e){if(!at(e))throw new Error(`${e} is not an ASCII string`);if(Le(e))return Y(e).replace(/.{2}/g,(e=>String.fromCharCode(parseInt(e,16))));if(lt(e))return yt("0X".concat(BigInt(e).toString(16)));throw new Error(`${e} is not Hex or decimal`)}function mt(e){const t=0n===BigInt(e.pending_word)?"":yt(Be(e.pending_word));return e.data.reduce(((e,t)=>e+(0n===BigInt(t)?"":yt(Be(t)))),"")+t}function bt(e){const t=ft(e),r=t[t.length-1],n=t.map(gt),[i,s]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:i,pending_word_len:s}}E({},{byteArrayFromString:()=>bt,stringFromByteArray:()=>mt});function vt(e){if(Ue(e)||Number.isInteger(e))return e.toString();if(ut(e)){if(Le(e))return BigInt(e).toString();if(ht(e)){if(!ct(e))throw new Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(gt(e)).toString()}if(Ge(e))return e}if(tt(e))return""+ +e;throw new Error(`${e} can't be computed by felt()`)}E({},{felt:()=>ir,getAbiContractVersion:()=>er,getArrayType:()=>Xt,isCairo1Abi:()=>Zt,isCairo1Type:()=>Qt,isLen:()=>Nt,isTypeArray:()=>Mt,isTypeBool:()=>zt,isTypeByteArray:()=>Wt,isTypeBytes31:()=>Gt,isTypeContractAddress:()=>Kt,isTypeEnum:()=>Ut,isTypeEthAddress:()=>qt,isTypeFelt:()=>Rt,isTypeLiteral:()=>Ht,isTypeNamedTuple:()=>Lt,isTypeNonZero:()=>Jt,isTypeOption:()=>Bt,isTypeResult:()=>Ft,isTypeSecp256k1Point:()=>Yt,isTypeStruct:()=>jt,isTypeTuple:()=>Dt,isTypeUint:()=>Vt,isTypeUint256:()=>$t,tuple:()=>nr,uint256:()=>tr,uint512:()=>rr});var wt=(1n<<128n)-1n,_t=(1n<<256n)-1n,Et=0n,St=340282366920938463463374607431768211455n,It=340282366920938463463374607431768211455n,At=0n,Ot=0n,Ct=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){const r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){const r=e.validate(t[0]);this.low=r&wt,this.high=r>>128n}else{if(2!==t.length)throw Error("Incorrect constructor parameters");{const r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}}}static validate(e){const t=BigInt(e);if(t<Et)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>_t)throw new Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){const r=BigInt(e),n=BigInt(t);if(r<At||r>St)throw new Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<Ot||n>It)throw new Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:Q(this.low.toString(16)),high:Q(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[vt(this.low),vt(this.high)]}},xt=(1n<<512n)-1n,Tt=0n,Pt=0n,kt=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){const r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){const r=e.validate(t[0]);this.limb0=r&wt,this.limb1=(r&wt<<128n)>>128n,this.limb2=(r&wt<<256n)>>256n,this.limb3=r>>384n}else{if(4!==t.length)throw Error("Incorrect Uint512 constructor parameters");{const r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}}}static validate(e){const t=BigInt(e);if(t<Tt)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>xt)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){const i=BigInt(e),s=BigInt(t),o=BigInt(r),a=BigInt(n);return[i,s,o,a].forEach(((e,t)=>{if(e<Pt||e>wt)throw Error(`limb${t} is not in the range of a u128 number`)})),{limb0:i,limb1:s,limb2:o,limb3:a}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:Q(this.limb0.toString(16)),limb1:Q(this.limb1.toString(16)),limb2:Q(this.limb2.toString(16)),limb3:Q(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[vt(this.limb0),vt(this.limb1),vt(this.limb2),vt(this.limb3)]}},Nt=e=>/_len$/.test(e),Rt=e=>"felt"===e||"core::felt252"===e,Mt=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),Dt=e=>/^\(.*\)$/i.test(e),Lt=e=>/\(.*\)/i.test(e)&&e.includes(":"),jt=(e,t)=>e in t,Ut=(e,t)=>e in t,Bt=e=>e.startsWith("core::option::Option::"),Ft=e=>e.startsWith("core::result::Result::"),Vt=e=>Object.values(Ae).includes(e),$t=e=>Ct.isAbiType(e),Ht=e=>Object.values(Oe).includes(e),zt=e=>"core::bool"===e,Kt=e=>"core::starknet::contract_address::ContractAddress"===e,qt=e=>"core::starknet::eth_address::EthAddress"===e,Gt=e=>"core::bytes_31::bytes31"===e,Wt=e=>"core::byte_array::ByteArray"===e,Yt=e=>"core::starknet::secp256k1::Secp256k1Point"===e,Qt=e=>e.includes("::"),Xt=e=>Qt(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function Zt(e){const{cairo:t}=er(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function Jt(e){return e.startsWith("core::zeroable::NonZero::")}function er(e){if(e.find((e=>"interface"===e.type)))return{cairo:"1",compiler:"2"};const t=e.find((e=>"function"===e.type&&(e.inputs.length||e.outputs.length)));if(!t)return{cairo:void 0,compiler:void 0};const r=t.inputs.length?t.inputs:t.outputs;return Qt(r[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}}var tr=e=>new Ct(e).toUint256DecimalString(),rr=e=>new kt(e).toUint512DecimalString(),nr=(...e)=>({...e});function ir(e){return vt(e)}var sr=class{variant;constructor(e){const t=Object.values(e);if(0===t.length)throw new Error("This Enum must have at least 1 variant");if(1!==t.filter((e=>void 0!==e)).length)throw new Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){const e=Object.entries(this.variant).find((e=>void 0!==e[1]));if(void 0!==e)return e[1]}activeVariant(){const e=Object.entries(this.variant).find((e=>void 0!==e[1]));return void 0===e?"":e[0]}},or=(e=>(e[e.Some=0]="Some",e[e.None=1]="None",e))(or||{}),ar=class{Some;None;constructor(e,t){if(!(e in or))throw new Error("Wrong variant : should be CairoOptionVariant.Some or .None.");if(0===e){if(void 0===t)throw new Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){if(!this.None)return this.Some}isSome(){return!(void 0===this.Some)}isNone(){return!0===this.None}},cr=(e=>(e[e.Ok=0]="Ok",e[e.Err=1]="Err",e))(cr||{}),lr=class{Ok;Err;constructor(e,t){if(!(e in cr))throw new Error("Wrong variant : should be CairoResultVariant.Ok or .Err.");0===e?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(void 0!==this.Ok)return this.Ok;if(void 0!==this.Err)return this.Err;throw new Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!(void 0===this.Ok)}isErr(){return!(void 0===this.Err)}},ur=(e,t,r)=>{if(!Ue(e[r]))throw new Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)};function hr(e,t,r){return Object.entries(e).reduce(((n,[i,s])=>{const o=r??t[i];if(!(i in t)&&!r)return n[i]=s,n;if("string"===o){if(Array.isArray(e[i])){const t=hr(e[i],e[i].map((e=>o)));return n[i]=Object.values(t).join(""),n}return ur(e,t,i),n[i]=yt(s),n}if("number"===o)return ur(e,t,i),n[i]=Number(s),n;if("function"==typeof o)return n[i]=o(s),n;if(Array.isArray(o)){const t=hr(e[i],o,o[0]);return n[i]=Object.values(t),n}return"object"==typeof o?(n[i]=hr(e[i],o),n):(((e,t,r)=>{throw new Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)})(e,t,i),n)}),{})}function dr(e,t,r){return"constructor"===e&&!r&&!t.length}function pr(e,t,r){for(let n=0,i=0;n<e.length;n++)if(e[n]===t)i++;else if(e[n]===r&&0==--i)return n;return Number.POSITIVE_INFINITY}function fr(e){return Qt(e)?function(e){const t=e.slice(1,-1),r=[];let n,i=0;for(;i<t.length;){switch(!0){case"("===t[i]:n=i+pr(t.slice(i),"(",")")+1;break;case t.startsWith("core::result::Result::<",i)||t.startsWith("core::array::Array::<",i)||t.startsWith("core::option::Option::<",i):n=i+pr(t.slice(i),"<",">")+1;break;default:{const e=t.indexOf(",",i);n=-1!==e?e:Number.POSITIVE_INFINITY}}r.push(t.slice(i,n)),i=n+2}return r}(e):function(e){const t=e.replace(/\s/g,"").slice(1,-1),{subTuple:r,result:n}=function(e){if(!e.includes("("))return{subTuple:[],result:e};const t=[];let r="",n=0;for(;n<e.length;){if("("===e[n]){let i=1;const s=n;for(n++;i;)")"===e[n]&&i--,"("===e[n]&&i++,n++;t.push(e.substring(s,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(t);let i=n.split(",").map((e=>r.length?e.replace(" ",r.shift()):e));return Lt(e)&&(i=i.reduce(((e,t)=>e.concat(function(e){const t=e.substring(0,e.indexOf(":"));return{name:t,type:e.substring(t.length+1)}}(t))),[])),i}(e)}function gr(e,t){switch(!0){case Ct.isAbiType(e):return new Ct(t).toApiRequest();case kt.isAbiType(e):return new kt(t).toApiRequest();case Gt(e):return gt(t.toString());case Yt(e):{const e=Y(Be(t)).padStart(128,"0"),r=tr(Q(e.slice(-64))),n=tr(Q(e.slice(0,-64)));return[ir(n.low),ir(n.high),ir(r.low),ir(r.high)]}default:return ir(t)}}function yr(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(Array.isArray(e)){const i=[];i.push(ir(e.length));const s=Xt(t);return e.reduce(((e,t)=>e.concat(yr(t,s,r,n))),i)}if(r[t]&&r[t].members.length){if(Ct.isAbiType(t))return new Ct(e).toApiRequest();if(kt.isAbiType(t))return new kt(e).toApiRequest();if("core::starknet::eth_address::EthAddress"===t)return gr(t,e);if("core::byte_array::ByteArray"===t)return function(e){const t=bt(e);return[t.data.length.toString(),...t.data.map((e=>e.toString())),t.pending_word.toString(),t.pending_word_len.toString()]}(e);const{members:i}=r[t],s=e;return i.reduce(((e,t)=>e.concat(yr(s[t.name],t.type,r,n))),[])}if(Dt(t)){const i=function(e,t){const r=fr(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.\n      provided: ${n} \n      expected: ${r}`);return r.map(((e,t)=>({element:n[t],type:e.type??e})))}(e,t);return i.reduce(((e,t)=>{const i=yr(t.element,t.type,r,n);return e.concat(i)}),[])}if(Ct.isAbiType(t))return new Ct(e).toApiRequest();if(kt.isAbiType(t))return new kt(e).toApiRequest();if(Ut(t,n)){const{variants:i}=n[t];if(Bt(t)){const t=e;if(t.isSome()){const e=i.find((e=>"Some"===e.name));if(void 0===e)throw Error("Error in abi : Option has no 'Some' variant.");const s=e.type;if("()"===s)return(0).toString();const o=yr(t.unwrap(),s,r,n);return Array.isArray(o)?[(0).toString(),...o]:[(0).toString(),o]}return 1..toString()}if(Ft(t)){const t=e;if(t.isOk()){const e=i.find((e=>"Ok"===e.name));if(void 0===e)throw Error("Error in abi : Result has no 'Ok' variant.");const s=e.type;if("()"===s)return(0).toString();const o=yr(t.unwrap(),s,r,n);return Array.isArray(o)?[(0).toString(),...o]:[(0).toString(),o]}const s=i.find((e=>"Err"===e.name));if(void 0===s)throw Error("Error in abi : Result has no 'Err' variant.");const o=s.type;if("()"===o)return 1..toString();const a=yr(t.unwrap(),o,r,n);return Array.isArray(a)?[1..toString(),...a]:[1..toString(),a]}const s=e,o=s.activeVariant(),a=i.find((e=>e.name===o));if(void 0===a)throw Error(`Not find in abi : Enum has no '${o}' variant.`);const c=a.type,l=i.findIndex((e=>e.name===o));if("()"===c)return l.toString();const u=yr(s.unwrap(),c,r,n);return Array.isArray(u)?[l.toString(),...u]:[l.toString(),u]}if(Jt(t))return gr(Xt(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return gr(t,e)}function mr(e,t){let r;switch(!0){case zt(e):return r=t.next().value,Boolean(BigInt(r));case Ct.isAbiType(e):const n=t.next().value,i=t.next().value;return new Ct(n,i).toBigInt();case kt.isAbiType(e):const s=t.next().value,o=t.next().value,a=t.next().value,c=t.next().value;return new kt(s,o,a,c).toBigInt();case"core::starknet::eth_address::EthAddress"===e:return r=t.next().value,BigInt(r);case"core::bytes_31::bytes31"===e:return r=t.next().value,yt(r);case Yt(e):const l=Y(t.next().value).padStart(32,"0"),u=Y(t.next().value).padStart(32,"0"),h=Y(t.next().value).padStart(32,"0"),d=Y(t.next().value).padStart(32,"0");return BigInt(Q(u+l+d+h));default:return r=t.next().value,BigInt(r)}}function br(e,t,r,n){if("()"===t.type)return{};if(Ct.isAbiType(t.type)){const t=e.next().value,r=e.next().value;return new Ct(t,r).toBigInt()}if(kt.isAbiType(t.type)){const t=e.next().value,r=e.next().value,n=e.next().value,i=e.next().value;return new kt(t,r,n,i).toBigInt()}if(Wt(t.type)){const t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(Be(e.next().value));return mt({data:t,pending_word:Be(e.next().value),pending_word_len:BigInt(e.next().value)})}if(Mt(t.type)){const i=[],s={name:"",type:Xt(t.type)},o=BigInt(e.next().value);for(;i.length<o;)i.push(br(e,s,r,n));return i}if(Jt(t.type)){const i={name:"",type:Xt(t.type)};return br(e,i,r,n)}if(r&&t.type in r&&r[t.type])return"core::starknet::eth_address::EthAddress"===t.type?mr(t.type,e):r[t.type].members.reduce(((t,i)=>(t[i.name]=br(e,i,r,n),t)),{});if(n&&t.type in n&&n[t.type]){const i=Number(e.next().value),s=n[t.type].variants.reduce(((t,s,o)=>o===i?(t[s.name]=br(e,{name:"",type:s.type},r,n),t):(t[s.name]=void 0,t)),{});if(t.type.startsWith("core::option::Option")){const e=0===i?s.Some:void 0;return new ar(i,e)}if(t.type.startsWith("core::result::Result")){let e;return e=0===i?s.Ok:s.Err,new lr(i,e)}return new sr(s)}if(Dt(t.type))return fr(t.type).reduce(((t,i,s)=>{const o=i?.name?i.name:s,a={name:o,type:i?.type?i.type:i};return t[o]=br(e,a,r,n),t}),{});if(Mt(t.type)){const i=[],s={name:"",type:Xt(t.type)},o=BigInt(e.next().value);for(;i.length<o;)i.push(br(e,s,r,n));return i}return mr(t.type,e)}function vr(e,t,r,n,i){const{name:s,type:o}=t;let a;switch(!0){case Nt(s):return a=e.next().value,BigInt(a);case r&&o in r||Dt(o):case n&&Ut(o,n):return br(e,t,r,n);case Mt(o):if(Qt(o))return br(e,t,r,n);const c=[];if(i&&i[`${s}_len`]){const o=i[`${s}_len`];for(;c.length<o;)c.push(br(e,{name:s,type:t.type.replace("*","")},r,n))}return c;case Jt(o):return br(e,t,r,n);default:return mr(o,e)}}var wr=(e,t)=>{if(Me(ut(e)||et(e)||Ue(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),ut(e)&&!Le(e))return;const r=BigInt(e.toString(10));Me(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},_r=(e,t)=>{let r;switch(et(e)&&Me(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is to large to be typed as Number use (BigInt or String)"),Me(ut(e)||et(e)||Ue(e)||"object"==typeof e&&"low"in e&&"high"in e||"object"==typeof e&&["limb0","limb1","limb2","limb3"].every((t=>t in e)),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case"core::integer::u256":r=new Ct(e).toBigInt();break;case"core::integer::u512":r=new kt(e).toBigInt();break;default:r=je(e)}switch(t.type){case"core::integer::u8":Me(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case"core::integer::u16":Me(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case"core::integer::u32":Me(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case"core::integer::u64":Me(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case"core::integer::u128":Me(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case"core::integer::u256":Me(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} 0 - 2^256-1`);break;case"core::integer::u512":Me(kt.is(r),`Validate: arg ${t.name} is ${t.type} 0 - 2^512-1`);break;case"core::starknet::class_hash::ClassHash":case"core::starknet::contract_address::ContractAddress":Me(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case"core::starknet::secp256k1::Secp256k1Point":Me(r>=0n&&r<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`)}},Er=(e,t)=>{Me(tt(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},Sr=(e,t,r)=>{if("core::integer::u256"!==t.type&&"core::integer::u512"!==t.type)if("core::starknet::eth_address::EthAddress"!==t.type)Me("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as js object (not array)`),r[t.type].members.forEach((({name:r})=>{Me(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)}));else{Me("object"!=typeof e,`EthAddress type is waiting a BigNumberish. Got ${e}`);const r=BigInt(e.toString(10));Me(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`)}else _r(e,t)},Ir=(e,t)=>{Me("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as js object (not array)`);const r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(Bt(t.type)&&n.includes("isSome")&&n.includes("isNone")||Ft(t.type)&&n.includes("isOk")&&n.includes("isErr")||n.includes("variant")&&n.includes("activeVariant")))throw new Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received ${e}, is not an Enum.`)},Ar=(e,t)=>{Me("object"==typeof e&&!Array.isArray(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},Or=(e,t,r,n)=>{const i=Xt(t.type);if(!Rt(i)||!pt(e))switch(Me(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),!0){case Rt(i):e.forEach((e=>wr(e,t)));break;case Dt(i):e.forEach((e=>Ar(e,{name:t.name,type:i})));break;case Mt(i):e.forEach((e=>Or(e,{name:"",type:i},r,n)));break;case jt(i,r):e.forEach((e=>Sr(e,{name:t.name,type:i},r)));break;case Ut(i,n):e.forEach((e=>Ir(e,{name:t.name,type:i})));break;case Vt(i)||Ht(i):e.forEach((e=>_r(e,{name:"",type:i})));break;case zt(i):e.forEach((e=>Er(e,t)));break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}};function Cr(e,t,r,n){e.inputs.reduce(((e,i)=>{const s=t[e];switch(!0){case Nt(i.name):return e;case Rt(i.type):wr(s,i);break;case Gt(i.type):((e,t)=>{Me(ut(e),`Validate: arg ${t.name} should be a string.`),Me(e.length<32,`Validate: arg ${t.name} cairo typed ${t.type} should be a string of less than 32 characters.`)})(s,i);break;case Vt(i.type)||Ht(i.type):_r(s,i);break;case zt(i.type):Er(s,i);break;case Wt(i.type):((e,t)=>{Me(ut(e),`Validate: arg ${t.name} should be a string.`)})(s,i);break;case Mt(i.type):Or(s,i,r,n);break;case jt(i.type,r):Sr(s,i,r);break;case Ut(i.type,n):Ir(s,i);break;case Dt(i.type):Ar(s,i);break;case Jt(i.type):((e,t)=>{const r=Xt(t.type);switch(Me(Vt(r)&&r!==kt.abiSelector||Rt(r),`Validate: ${t.name} type is not authorized for NonZero type.`),!0){case Rt(r):wr(e,t),Me(BigInt(e.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case Vt(r):_r(e,{name:"",type:r}),"core::integer::u256"===t.type?Me(new Ct(e).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):Me(je(e)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw new Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${e}`)}})(s,i);break;default:throw new Error(`Validate Unhandled: argument ${i.name}, type ${i.type}, value ${s}`)}return e+1}),0)}var xr=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=function(e){const t=function(e){return e.find((e=>"interface"===e.type))?2:Zt(e)?1:0}(e);if(0===t||1===t)return new class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce(((e,t)=>Nt(t.name)?e:e+1),0)}getMethod(e){return this.abi.find((t=>t.name===e))}getLegacyFormat(){return this.abi}}(e);if(2===t)return new class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){return this.abi.find((e=>"interface"===e.type)).items.find((t=>t.name===e))}getLegacyFormat(){return this.abi.flatMap((e=>"interface"===e.type?e.items:e))}}(e);throw Error(`Unsupported ABI version ${t}`)}(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){"DEPLOY"!==e&&Me(this.abi.filter((t=>{if("function"!==t.type)return!1;const r="view"===t.stateMutability||"view"===t.state_mutability;return"INVOKE"===e?!r:r})).map((e=>e.name)).includes(t),("INVOKE"===e?"invocable":"viewable")+" method not found in abi");const n=this.abi.find((r=>"DEPLOY"===e?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type));if(dr(t,r,n))return;const i=this.parser.methodInputsLength(n);if(r.length!==i)throw Error(`Invalid number of arguments, expected ${i} arguments, but got ${r.length}`);Cr(n,r,this.structs,this.enums)}compile(e,t){const r=this.abi.find((t=>t.name===e));if(dr(e,t,r))return[];let n;if(Array.isArray(t))n=t;else{const e=function(e,t,r,n){const i=(e,t)=>{if(Mt(t))return function(e,t){const r=Xt(t);return ut(e)?e:e.map((e=>i(e,r)))}(e,t);if(Ut(t,n)){const r=n[t];return o(e,r)}if(Dt(t))return function(e,t){const r=fr(t).reduce(((t,r,n)=>{const s=Object.keys(e),o=r?.type?r.type:r;return a=i(e[s[n]],o),Object.defineProperty(t,n.toString(),{enumerable:!0,value:a??e[s[n]]}),t;var a}),{});return r}(e,t);if(qt(t))return e;if(Jt(t))return e;if(Wt(t))return e;if(Yt(t))return e;if(Ct.isAbiType(t)){const r=e;if("object"!=typeof r)return r;if(!("low"in r)||!("high"in r))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:r.low,high:r.high}}if(kt.isAbiType(t)){const r=e;if("object"!=typeof r)return r;if(!["limb0","limb1","limb2","limb3"].every((e=>e in r)))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:r.limb0,limb1:r.limb1,limb2:r.limb2,limb3:r.limb3}}if(jt(t,r)){const n=r[t].members;return s(e,n)}return e},s=(e,t)=>t.reduce(((t,r)=>{if("undefined"===e[r.name]&&(Qt(r.type)||!Nt(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);var n;return n=i(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t}),{}),o=(e,t)=>{if(Ft(t.name)){const r=e,n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),s=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return r.isOk()?new lr(0,i(e.unwrap(),n)):new lr(1,i(e.unwrap(),s))}if(Bt(t.name)){const r=e,n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return r.isSome()?new ar(0,i(r.unwrap(),n)):new ar(1,{})}const r=e,n=Object.entries(r.variant).map((e=>{if(void 0===e[1])return e;const n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?e:[e[0],i(r.unwrap(),n)]}));return new sr(Object.fromEntries(n))};return t.reduce(((t,r)=>{return Nt(r.name)&&!Qt(r.type)||(n=i(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n})),t;var n}),{})}(t,r.inputs,this.structs,this.enums);n=Object.values(e),Cr(r,n,this.structs,this.enums)}const i=n[Symbol.iterator](),s=r.inputs.reduce(((e,t)=>Nt(t.name)&&!Qt(t.type)?e:e.concat(function(e,t,r,n){const{name:i,type:s}=t;let{value:o}=e.next();switch(!0){case Mt(s):if(!Array.isArray(o)&&!ht(o))throw Error(`ABI expected parameter ${i} to be array or long string, got ${o}`);return ut(o)&&(o=ft(o)),yr(o,t.type,r,n);case Jt(s):return gr(Xt(s),o);case"core::starknet::eth_address::EthAddress"===s:return gr(s,o);case jt(s,r)||Dt(s)||Ct.isAbiType(s)||Ct.isAbiType(s):case Ut(s,n):return yr(o,s,r,n);default:return gr(s,o)}}(i,t,this.structs,this.enums))),[]);return Object.defineProperty(s,"__compiled__",{enumerable:!1,writable:!1,value:!0}),s}static compile(e){const t=e=>{const t=(e,r=".")=>{const n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap((([e,i])=>{let s=i;"entrypoint"===e?s=it(s):pt(s)&&(s=bt(s));const o=Array.isArray(n)&&"0"===e?"$$len":e;if(Ue(s))return[[`${r}${o}`,ir(s)]];if(Object(s)===s){const e=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),n=[...Object.getOwnPropertyNames(s),...e];if(n.includes("isSome")&&n.includes("isNone")){const e=s,n=e.isSome()?0:1;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${o}.`):[[`${r}${o}`,ir(n)]]}if(n.includes("isOk")&&n.includes("isErr")){const e=s,n=e.isOk()?0:1;return t({0:n,1:e.unwrap()},`${r}${o}.`)}if(n.includes("variant")&&n.includes("activeVariant")){const e=s,n=e.activeVariant(),i=Object.keys(e.variant).findIndex((e=>e===n));return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${o}`,ir(i)]]:t({0:i,1:e.unwrap()},`${r}${o}.`)}return t(s,`${r}${o}.`)}return[[`${r}${o}`,ir(s)]]}))};return Object.fromEntries(t(e))};let r;if(Array.isArray(e)){const n=t({...e});r=Object.values(n)}else{const n=t(e);r=Object.values(n)}return Object.defineProperty(r,"__compiled__",{enumerable:!1,writable:!1,value:!0}),r}parse(e,t){const{outputs:r}=this.abi.find((t=>t.name===e)),n=t.flat()[Symbol.iterator](),i=r.flat().reduce(((e,t,r)=>{const i=t.name??r;return e[i]=vr(n,t,this.structs,this.enums,e),e[i]&&e[`${i}_len`]&&delete e[`${i}_len`],e}),{});return 1===Object.keys(i).length&&0 in i?i[0]:i}format(e,t,r){return hr(this.parse(e,t),r)}static getAbiStruct(e){return e.filter((e=>"struct"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{})}static getAbiEnum(e){const t=e.filter((e=>"enum"===e.type)).reduce(((e,t)=>({...e,[t.name]:t})),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map((e=>Be(e)))}decodeParameters(e,t){const r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),i=r.map((e=>vr(n,{name:"",type:e},this.structs,this.enums)));return 1===i.length?i[0]:i}},Tr={};function Pr(e){return[...e,e.length].reduce(((e,t)=>l.pedersen(je(e),je(t))),0).toString()}function kr(e,t,r,n,i,s,o,a=[]){const c=Pr(i);return Pr([e,t,r,n,c,s,o,...a])}function Nr(e,t,r,n,i,s,o){return kr("0x6465636c617265",r,t,0,[e],n,i,[s,...o?[o]:[]])}function Rr(e,t,r,n,i,s,o,a){return kr("0x6465706c6f795f6163636f756e74",i,e,0,[t,n,...r],s,o,[a])}function Mr(e,t,r,n,i,s){return kr("0x696e766f6b65",t,e,0,r,n,i,[s])}E(Tr,{calculateContractAddressFromHash:()=>an,calculateDeclareTransactionHash:()=>Wr,calculateDeployAccountTransactionHash:()=>Yr,calculateInvokeTransactionHash:()=>Gr,computeCompiledClassHash:()=>fn,computeContractClassHash:()=>mn,computeHashOnElements:()=>nn,computeHintedClassHash:()=>un,computeLegacyContractClassHash:()=>hn,computePedersenHash:()=>tn,computePedersenHashOnElements:()=>sn,computePoseidonHash:()=>rn,computePoseidonHashOnElements:()=>on,computeSierraContractClassHash:()=>yn,formatSpaces:()=>ln,getSelector:()=>st,getSelectorFromName:()=>it,hashByteCodeSegments:()=>pn,keccakBn:()=>rt,poseidon:()=>u,starknetKeccak:()=>nt}),E({},{calculateDeclareTransactionHash:()=>Nr,calculateDeployAccountTransactionHash:()=>Rr,calculateTransactionHash:()=>Mr,calculateTransactionHashCommon:()=>kr,computeHashOnElements:()=>Pr}),E({},{starkCurve:()=>l,weierstrass:()=>h}),E({},{calculateDeclareTransactionHash:()=>Kr,calculateDeployAccountTransactionHash:()=>zr,calculateInvokeTransactionHash:()=>qr,calculateTransactionHashCommon:()=>Hr,hashDAMode:()=>Vr,hashFeeField:()=>$r});var Dr=e=>e.map((e=>BigInt(e))),Lr=32n,jr=128n,Ur=64n+jr,Br=BigInt(gt("L1_GAS")),Fr=BigInt(gt("L2_GAS"));function Vr(e,t){return(BigInt(e)<<Lr)+BigInt(t)}function $r(e,t){const r=(Br<<Ur)+(BigInt(t.l1_gas.max_amount)<<jr)+BigInt(t.l1_gas.max_price_per_unit),n=(Fr<<Ur)+(BigInt(t.l2_gas.max_amount)<<jr)+BigInt(t.l2_gas.max_price_per_unit);return(0,l.poseidonHashMany)([BigInt(e),r,n])}function Hr(e,t,r,n,i,s,o,a,c,u,h=[]){const d=$r(s,u),p=Vr(a,c),f=Dr([e,t,r,d,(0,l.poseidonHashMany)(Dr(o)),n,i,p,...Dr(h)]);return Be((0,l.poseidonHashMany)(f))}function zr(e,t,r,n,i,s,o,a,c,u,h,d){return Hr("0x6465706c6f795f6163636f756e74",i,e,s,o,h,d,a,c,u,[(0,l.poseidonHashMany)(Dr(r)),t,n])}function Kr(e,t,r,n,i,s,o,a,c,u,h,d){return Hr("0x6465636c617265",n,r,i,s,h,Dr(d),a,c,u,[(0,l.poseidonHashMany)(Dr(o)),e,t])}function qr(e,t,r,n,i,s,o,a,c,u,h){return Hr("0x696e766f6b65",t,e,n,i,u,h,o,a,c,[(0,l.poseidonHashMany)(Dr(s)),(0,l.poseidonHashMany)(Dr(r))])}function Gr(e){return function(e){return[I.ETransactionVersion.V3,I.ETransactionVersion.F3].includes(e.version)}(e)?qr(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):Mr(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function Wr(e){return function(e){return[I.ETransactionVersion.V3,I.ETransactionVersion.F3].includes(e.version)}(e)?Kr(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):Nr(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function Yr(e){return function(e){return[I.ETransactionVersion.V3,I.ETransactionVersion.F3].includes(e.version)}(e)?zr(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):Rr(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}E({},{parse:()=>Xr,parseAlwaysAsBig:()=>Zr,stringify:()=>Jr,stringifyAlwaysAsBig:()=>en});var Qr=e=>{if(!d.U(e))return parseFloat(e);const t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},Xr=e=>d.Qc(String(e),void 0,Qr),Zr=e=>d.Qc(String(e),void 0,d.A7),Jr=(e,t,r,n)=>d.Pz(e,t,r,n),en=Jr;function tn(e,t){return l.pedersen(BigInt(e),BigInt(t))}function rn(e,t){return Be(l.poseidonHash(BigInt(e),BigInt(t)))}function nn(e){return[...e,e.length].reduce(((e,t)=>l.pedersen(BigInt(e),BigInt(t))),0).toString()}var sn=nn;function on(e){return Be((0,l.poseidonHashMany)(e.map((e=>BigInt(e)))))}function an(e,t,r,n){const i=nn(xr.compile(r)),s=nn([ir("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,i]);return Be(BigInt(s)%ce)}function cn(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function ln(e){let t=!1;const r=[];for(const n of e)'"'===n&&0==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function un(e){const{abi:t,program:r}=e,n=ln(Jr({abi:t,program:r},cn));return Q(l.keccak(z(n)).toString(16))}function hn(e){const t=ut(e)?Xr(e):e,r=Be(se),n=nn(t.entry_points_by_type.EXTERNAL.flatMap((e=>[e.selector,e.offset]))),i=nn(t.entry_points_by_type.L1_HANDLER.flatMap((e=>[e.selector,e.offset]))),s=nn(t.entry_points_by_type.CONSTRUCTOR.flatMap((e=>[e.selector,e.offset]))),o=nn(t.program.builtins.map((e=>gt(e)))),a=un(t),c=nn(t.program.data);return nn([r,n,i,s,o,a,c])}function dn(e){const t=e.flatMap((e=>{return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,l.poseidonHashMany)(t.flatMap((e=>BigInt(gt(e))))))];var t}));return(0,l.poseidonHashMany)(t)}function pn(e){const t=e.bytecode.map((e=>BigInt(e))),r=e.bytecode_segment_lengths??[];let n=0;const i=r.flatMap((e=>{const r=t.slice(n,n+=e);return[BigInt(e),(0,l.poseidonHashMany)(r)]}));return 1n+(0,l.poseidonHashMany)(i)}function fn(e){const t=BigInt(gt("COMPILED_CLASS_V1")),r=dn(e.entry_points_by_type.EXTERNAL),n=dn(e.entry_points_by_type.L1_HANDLER),i=dn(e.entry_points_by_type.CONSTRUCTOR),s=e.bytecode_segment_lengths?pn(e):(0,l.poseidonHashMany)(e.bytecode.map((e=>BigInt(e))));return Be((0,l.poseidonHashMany)([t,r,n,i,s]))}function gn(e){const t=e.flatMap((e=>[BigInt(e.selector),BigInt(e.function_idx)]));return(0,l.poseidonHashMany)(t)}function yn(e){const t=BigInt(gt("CONTRACT_CLASS_V0.1.0")),r=gn(e.entry_points_by_type.EXTERNAL),n=gn(e.entry_points_by_type.L1_HANDLER),i=gn(e.entry_points_by_type.CONSTRUCTOR),s=function(e){const t=ln(Jr(e.abi,null));return BigInt(Q(l.keccak(z(t)).toString(16)))}(e),o=(0,l.poseidonHashMany)(e.sierra_program.map((e=>BigInt(e))));return Be((0,l.poseidonHashMany)([t,r,n,i,s,o]))}function mn(e){const t=ut(e)?Xr(e):e;return"sierra_program"in t?yn(t):hn(t)}function bn(e){const t=ut(e)?e:Jr(e);return G((0,p.iv)(t))}function vn(e){if(Array.isArray(e))return e;const t=H((0,p.ec)(q(e)));return Xr(t)}function wn(){const e=l.utils.randomPrivateKey();return(0,l.getStarkKey)(e)}function _n(e){return Q(e).toLowerCase()}function En(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map((e=>Be(e)));try{const{r:t,s:r}=e;return[Be(t),Be(r)]}catch(e){throw new Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function Sn(e){return Ke(En(e))}function In(e){return qe(En(e))}function An(e,t=50){return Je(e,t)}function On(e,t=50,r=50){if(Ue(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}};if(void 0===e.gas_consumed||void 0===e.gas_price)throw Error("estimateFeeToBounds: estimate is undefined");return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?Be(Je(BigInt(e.overall_fee)/BigInt(e.gas_price),t)):Be(Je(e.gas_consumed,t)),max_price_per_unit:Be(Je(e.gas_price,r))}}}function Cn(e){if(e===I.EDataAvailabilityMode.L1)return I.EDAMode.L1;if(e===I.EDataAvailabilityMode.L2)return I.EDAMode.L2;throw Error("EDAM conversion")}function xn(e,t){const r=t?Be(t):void 0,n=Be(e);if(t&&!Object.values(I.ETransactionVersion).includes(r))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(I.ETransactionVersion).includes(n))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?r:n}function Tn(e){if(!e)return;const t=Be(e);if(t===I.ETransactionVersion.V0)return I.ETransactionVersion.F0;if(t===I.ETransactionVersion.V1)return I.ETransactionVersion.F1;if(t===I.ETransactionVersion.V2)return I.ETransactionVersion.F2;if(t===I.ETransactionVersion.V3)return I.ETransactionVersion.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function Pn(e){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||I.EDataAvailabilityMode.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||I.EDataAvailabilityMode.L1,resourceBounds:e.resourceBounds??On(ne)}}function kn(e){return e===I.ETransactionVersion.F2?I.ETransactionVersion.F1:e===I.ETransactionVersion.V2?I.ETransactionVersion.V1:e}function Nn(e){return"sierra_program"in(ut(e)?Xr(e):e)}function Rn(){return ee(W(f.kA.utils.randomPrivateKey()))}function Mn(e){ze(e,ne,2n**160n-1n,"Ethereum Address ");const t=Q(Y(Be(e)).padStart(40,"0"));return Me(Boolean(t.match(/^(0x)?[0-9a-f]{40}$/)),"Invalid Ethereum Address Format"),t}E({},{compressProgram:()=>bn,decompressProgram:()=>vn,estimateFeeToBounds:()=>On,estimatedFeeToMaxFee:()=>An,formatSignature:()=>En,intDAM:()=>Cn,makeAddress:()=>_n,randomAddress:()=>wn,reduceV2:()=>kn,signatureToDecimalArray:()=>Sn,signatureToHexArray:()=>In,toFeeVersion:()=>Tn,toTransactionVersion:()=>xn,v3Details:()=>Pn}),E({},{ethRandomPrivateKey:()=>Rn,validateAndParseEthAddress:()=>Mn});var Dn="undefined"!=typeof window&&window.fetch||"undefined"!=typeof global&&(0,g.Z)(global.fetch)||y;function Ln(e){return new Promise((t=>{setTimeout(t,e)}))}function jn(e){const t={...e};return delete t.sierra_program_debug_info,t.abi=ln(Jr(e.abi)),t.sierra_program=ln(Jr(e.sierra_program)),t.sierra_program=bn(t.sierra_program),t}function Un(e){const t=ut(e)?Xr(e):e;return Nn(e)?jn(t):{...t,..."program"in t&&{program:bn(t.program)}}}E({},{Block:()=>Vn,createSierraContractClass:()=>jn,getDefaultNodeUrl:()=>Bn,isPendingBlock:()=>zn,isPendingStateUpdate:()=>qn,isPendingTransaction:()=>Kn,isV3Tx:()=>$n,isVersion:()=>Hn,parseContract:()=>Un,validBlockTags:()=>Fn,wait:()=>Ln});var Bn=(e,t=!1)=>{t||console.warn("Using default public node url, please provide nodeUrl in provider options!");const r=we[e??"SN_SEPOLIA"];return r[Math.floor(Math.random()*r.length)]},Fn=Object.values(Re),Vn=class{hash=null;number=null;tag=null;setIdentifier(e){if(ut(e))if(lt(e))this.number=parseInt(e,10);else if(Le(e))this.hash=e;else{if(!Fn.includes(e))throw TypeError(`Block identifier unmanaged: ${e}`);this.tag=e}else Ue(e)?this.hash=Be(e):et(e)?this.number=e:this.tag="pending";if(et(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};function $n(e){const t=e.version?Be(e.version):I.ETransactionVersion.V3;return t===I.ETransactionVersion.V3||t===I.ETransactionVersion.F3}function Hn(e,t){const[r,n]=e.split("."),[i,s]=t.split(".");return r===i&&n===s}function zn(e){return"PENDING"===e.status}function Kn(e){return!("block_hash"in e)}function qn(e){return!("block_hash"in e)}E({},{buildUDCCall:()=>Jn,fromCallsToExecuteCalldata:()=>Wn,fromCallsToExecuteCalldataWithNonce:()=>Yn,fromCallsToExecuteCalldata_cairo1:()=>Xn,getExecuteCalldata:()=>Zn,getVersionsByType:()=>ei,transformCallsToMulticallArrays:()=>Gn,transformCallsToMulticallArrays_cairo1:()=>Qn});var Gn=e=>{const t=[],r=[];return e.forEach((e=>{const n=xr.compile(e.calldata||[]);t.push({to:je(e.contractAddress).toString(10),selector:je(it(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)})),{callArray:t,calldata:xr.compile({calldata:r})}},Wn=e=>{const{callArray:t,calldata:r}=Gn(e);return[...xr.compile({callArray:t}),...r]},Yn=(e,t)=>[...Wn(e),je(t).toString()],Qn=e=>e.map((e=>({to:je(e.contractAddress).toString(10),selector:je(it(e.entrypoint)).toString(10),calldata:xr.compile(e.calldata||[])}))),Xn=e=>{const t=e.map((e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:xr.compile(e.calldata)})));return xr.compile({orderCalls:t})},Zn=(e,t="0")=>"1"===t?Xn(e):Wn(e);function Jn(e,t){const r=[].concat(e).map((e=>{const{classHash:r,salt:n,unique:i=!0,constructorCalldata:s=[]}=e,o=xr.compile(s),a=n??wn();return{call:{contractAddress:be.ADDRESS,entrypoint:be.ENTRYPOINT,calldata:[r,a,Xe(i),o.length,...o]},address:an(i?l.pedersen(t,a):a,r,o,i?be.ADDRESS:0)}}));return{calls:r.map((e=>e.call)),addresses:r.map((e=>e.address))}}function ei(e){return"fee"===e?{v1:I.ETransactionVersion.F1,v2:I.ETransactionVersion.F2,v3:I.ETransactionVersion.F3}:{v1:I.ETransactionVersion.V1,v2:I.ETransactionVersion.V2,v3:I.ETransactionVersion.V3}}var ti={"Content-Type":"application/json"},ri=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;waitMode;constructor(e){const{nodeUrl:t,retries:r,headers:n,blockIdentifier:i,chainId:s,specVersion:o,waitMode:a}=e||{};Object.values(fe).includes(t)?this.nodeUrl=Bn(t,e?.default):this.nodeUrl=t||Bn(void 0,e?.default),this.retries=r||200,this.headers={...ti,...n},this.blockIdentifier=i||"pending",this.chainId=s,this.specVersion=o,this.waitMode=a||!1,this.requestId=0}setChainId(e){this.chainId=e}fetch(e,t,r=0){const n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return Dn(this.nodeUrl,{method:"POST",body:Jr(n),headers:this.headers})}errorHandler(e,t,r,n){if(r){const{code:n,message:i,data:s}=r;throw new Se(`RPC: ${e} with params ${Jr(t,null,2)}\n\n        ${n}: ${i}: ${Jr(s)}`)}if(n instanceof Se)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{const r=await this.fetch(e,t,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(e,t,n),i}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=Be(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const r=new Vn(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){const t=Be(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=Be(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=Be(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:i=!0}=t,s=new Vn(r).identifier,o=[];return n&&o.push(O.ESimulationFlag.SKIP_VALIDATE),i&&o.push(O.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:s,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:o})}async waitForTransaction(e,t){const r=Be(e);let{retries:n}=this,i=!1,s=!1;const o=t?.retryInterval??5e3,a=t?.errorStates??[O.ETransactionStatus.REJECTED],c=t?.successStates??[O.ETransactionExecutionStatus.SUCCEEDED,O.ETransactionStatus.ACCEPTED_ON_L2,O.ETransactionStatus.ACCEPTED_ON_L1];let l;for(;!i;){await Ln(o);try{l=await this.getTransactionStatus(r);const e=l.execution_status,t=l.finality_status;if(!t)throw new Error("waiting for transaction status");if(a.includes(e)||a.includes(t)){const r=`${e}: ${t}`,n=new Error(r);throw n.response=l,s=!0,n}(c.includes(e)||c.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(r)}catch(e){if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1,await Ln(o)}return u}getStorageAt(e,t,r=this.blockIdentifier){const n=Be(e),i=Ve(t),s=new Vn(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:s})}getClassHashAt(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){const n=new Vn(t).identifier;let i={};return Hn("0.5",await this.getSpecVersion())||(i={simulation_flags:r?[O.ESimulationFlag.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:n,...i})}async invoke(e,t){let r;return r=$n(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:O.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:xr.toHex(e.calldata),version:O.ETransactionVersion.V3,signature:In(e.signature),nonce:Be(t.nonce),resource_bounds:t.resourceBounds,tip:Be(t.tip),paymaster_data:t.paymasterData.map((e=>Be(e))),account_deployment_data:t.accountDeploymentData.map((e=>Be(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:xr.toHex(e.calldata),type:O.ETransactionType.INVOKE,max_fee:Be(t.maxFee||0),version:O.ETransactionVersion.V1,signature:In(e.signature),nonce:Be(t.nonce)}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},i){let s;if(Nn(e)||$n(i))if(Nn(e)&&!$n(i))s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:O.ETransactionType.DECLARE,contract_class:{sierra_program:vn(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:O.ETransactionVersion.V2,max_fee:Be(i.maxFee||0),signature:In(t),sender_address:r,nonce:Be(i.nonce)}});else{if(!Nn(e)||!$n(i))throw Error("declare unspotted parameters");s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:O.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:O.ETransactionVersion.V3,signature:In(t),nonce:Be(i.nonce),contract_class:{sierra_program:vn(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:i.resourceBounds,tip:Be(i.tip),paymaster_data:i.paymasterData.map((e=>Be(e))),account_deployment_data:i.accountDeploymentData.map((e=>Be(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}})}else s=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:O.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:O.ETransactionVersion.V1,max_fee:Be(i.maxFee||0),signature:In(t),sender_address:r,nonce:Be(i.nonce)}});return this.waitMode?this.waitForTransaction((await s).transaction_hash):s}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},i){let s;return s=$n(i)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:O.ETransactionType.DEPLOY_ACCOUNT,version:O.ETransactionVersion.V3,signature:In(n),nonce:Be(i.nonce),contract_address_salt:Be(r||0),constructor_calldata:xr.toHex(t||[]),class_hash:Be(e),resource_bounds:i.resourceBounds,tip:Be(i.tip),paymaster_data:i.paymasterData.map((e=>Be(e))),nonce_data_availability_mode:i.nonceDataAvailabilityMode,fee_data_availability_mode:i.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:xr.toHex(t||[]),class_hash:Be(e),contract_address_salt:Be(r||0),type:O.ETransactionType.DEPLOY_ACCOUNT,max_fee:Be(i.maxFee||0),version:O.ETransactionVersion.V1,signature:In(n),nonce:Be(i.nonce)}}),this.waitMode?this.waitForTransaction((await s).transaction_hash):s}callContract(e,t=this.blockIdentifier){const r=new Vn(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:it(e.entrypoint),calldata:xr.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:s}=e,o={from_address:Mn(r),to_address:Be(n),entry_point_selector:st(i),payload:Qe(s)},a=new Vn(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const r=ei(t);let n;if(n=$n(e)?{signature:In(e.signature),nonce:Be(e.nonce),resource_bounds:e.resourceBounds,tip:Be(e.tip),paymaster_data:e.paymasterData.map((e=>Be(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>Be(e)))}:{signature:In(e.signature),nonce:Be(e.nonce),max_fee:Be(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:O.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:xr.toHex(e.calldata),version:Be(e.version||r.v3),...n};if("DECLARE"===e.type)return Nn(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:vn(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:Be(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:Be(e.version||r.v1),...n};if("DEPLOY_ACCOUNT"===e.type){const{account_deployment_data:t,...i}=n;return{type:e.type,constructor_calldata:xr.toHex(e.constructorCalldata||[]),class_hash:Be(e.classHash),contract_address_salt:Be(e.addressSalt||0),version:Be(e.version||r.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}};E({},{RpcChannel:()=>ii});var ni={"Content-Type":"application/json"},ii=class{nodeUrl;headers;retries;requestId;blockIdentifier;chainId;specVersion;transactionRetryIntervalFallback;waitMode;constructor(e){const{nodeUrl:t,retries:r,headers:n,blockIdentifier:i,chainId:s,specVersion:o,waitMode:a,transactionRetryIntervalFallback:c}=e||{};Object.values(fe).includes(t)?this.nodeUrl=Bn(t,e?.default):this.nodeUrl=t||Bn(void 0,e?.default),this.retries=r||200,this.headers={...ni,...n},this.blockIdentifier=i||"pending",this.chainId=s,this.specVersion=o,this.waitMode=a||!1,this.requestId=0,this.transactionRetryIntervalFallback=c}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){const n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return Dn(this.nodeUrl,{method:"POST",body:Jr(n),headers:this.headers})}errorHandler(e,t,r,n){if(r){const{code:n,message:i,data:s}=r;throw new Se(`RPC: ${e} with params ${Jr(t,null,2)}\n \n        ${n}: ${i}: ${Jr(s)}`)}if(n instanceof Se)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{const r=await this.fetch(e,t,this.requestId+=1),{error:n,result:i}=await r.json();return this.errorHandler(e,t,n),i}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}async getSpecVersion(){return this.specVersion??=await this.fetchEndpoint("starknet_specVersion"),this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){const t=new Vn(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){const t=Be(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){const r=new Vn(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){const t=Be(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){const t=Be(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){const t=Be(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){const{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:s=!0}=t,o=new Vn(r).identifier,a=[];return n&&a.push(i.gZ.SKIP_VALIDATE),s&&a.push(i.gZ.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:o,transactions:e.map((e=>this.buildTransaction(e))),simulation_flags:a})}async waitForTransaction(e,t){const r=Be(e);let{retries:n}=this,s=!1,o=!1;const a=t?.retryInterval??this.transactionRetryIntervalDefault,c=t?.errorStates??[i.zO.REJECTED],l=t?.successStates??[i.y5.SUCCEEDED,i.zO.ACCEPTED_ON_L2,i.zO.ACCEPTED_ON_L1];let u;for(;!s;){await Ln(a);try{u=await this.getTransactionStatus(r);const e=u.execution_status,t=u.finality_status;if(!t)throw new Error("waiting for transaction status");if(c.includes(e)||c.includes(t)){const r=`${e}: ${t}`,n=new Error(r);throw n.response=u,o=!0,n}(l.includes(e)||l.includes(t))&&(s=!0)}catch(e){if(e instanceof Error&&o)throw e;if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1}let h=null;for(;null===h;){try{h=await this.getTransactionReceipt(r)}catch(e){if(n<=0)throw new Error(`waitForTransaction timed-out with retries ${this.retries}`)}n-=1,await Ln(a)}return h}getStorageAt(e,t,r=this.blockIdentifier){const n=Be(e),i=Ve(t),s=new Vn(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:i,block_id:s})}getClassHashAt(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){const r=Be(e),n=new Vn(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){const n=new Vn(t).identifier;let s={};return Hn("0.5",await this.getSpecVersion())||(s={simulation_flags:r?[i.gZ.SKIP_VALIDATE]:[]}),this.fetchEndpoint("starknet_estimateFee",{request:e.map((e=>this.buildTransaction(e,"fee"))),block_id:n,...s})}async invoke(e,t){let r;return r=$n(t)?this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:i.xz.INVOKE,sender_address:e.contractAddress,calldata:xr.toHex(e.calldata),version:i.sF.V3,signature:In(e.signature),nonce:Be(t.nonce),resource_bounds:t.resourceBounds,tip:Be(t.tip),paymaster_data:t.paymasterData.map((e=>Be(e))),account_deployment_data:t.accountDeploymentData.map((e=>Be(e))),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:xr.toHex(e.calldata),type:i.xz.INVOKE,max_fee:Be(t.maxFee||0),version:i.sF.V1,signature:In(e.signature),nonce:Be(t.nonce)}}),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},s){let o;if(Nn(e)||$n(s))if(Nn(e)&&!$n(s))o=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:i.xz.DECLARE,contract_class:{sierra_program:vn(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:i.sF.V2,max_fee:Be(s.maxFee||0),signature:In(t),sender_address:r,nonce:Be(s.nonce)}});else{if(!Nn(e)||!$n(s))throw Error("declare unspotted parameters");o=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:i.xz.DECLARE,sender_address:r,compiled_class_hash:n||"",version:i.sF.V3,signature:In(t),nonce:Be(s.nonce),contract_class:{sierra_program:vn(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:s.resourceBounds,tip:Be(s.tip),paymaster_data:s.paymasterData.map((e=>Be(e))),account_deployment_data:s.accountDeploymentData.map((e=>Be(e))),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}})}else o=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:i.xz.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:i.sF.V1,max_fee:Be(s.maxFee||0),signature:In(t),sender_address:r,nonce:Be(s.nonce)}});return this.waitMode?this.waitForTransaction((await o).transaction_hash):o}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},s){let o;return o=$n(s)?this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:i.xz.DEPLOY_ACCOUNT,version:i.sF.V3,signature:In(n),nonce:Be(s.nonce),contract_address_salt:Be(r||0),constructor_calldata:xr.toHex(t||[]),class_hash:Be(e),resource_bounds:s.resourceBounds,tip:Be(s.tip),paymaster_data:s.paymasterData.map((e=>Be(e))),nonce_data_availability_mode:s.nonceDataAvailabilityMode,fee_data_availability_mode:s.feeDataAvailabilityMode}}):this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:xr.toHex(t||[]),class_hash:Be(e),contract_address_salt:Be(r||0),type:i.xz.DEPLOY_ACCOUNT,max_fee:Be(s.maxFee||0),version:i.sF.V1,signature:In(n),nonce:Be(s.nonce)}}),this.waitMode?this.waitForTransaction((await o).transaction_hash):o}callContract(e,t=this.blockIdentifier){const r=new Vn(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:it(e.entrypoint),calldata:xr.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){const{from_address:r,to_address:n,entry_point_selector:i,payload:s}=e,o={from_address:Mn(r),to_address:Be(n),entry_point_selector:st(i),payload:Qe(s)},a=new Vn(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:a})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){const r=ei(t);let n;if(n=$n(e)?{signature:In(e.signature),nonce:Be(e.nonce),resource_bounds:e.resourceBounds,tip:Be(e.tip),paymaster_data:e.paymasterData.map((e=>Be(e))),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map((e=>Be(e)))}:{signature:In(e.signature),nonce:Be(e.nonce),max_fee:Be(e.maxFee||0)},"INVOKE_FUNCTION"===e.type)return{type:i.xz.INVOKE,sender_address:e.contractAddress,calldata:xr.toHex(e.calldata),version:Be(e.version||r.v3),...n};if("DECLARE"===e.type)return Nn(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:vn(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:Be(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:Be(e.version||r.v1),...n};if("DEPLOY_ACCOUNT"===e.type){const{account_deployment_data:t,...i}=n;return{type:e.type,constructor_calldata:xr.toHex(e.constructorCalldata||[]),class_hash:Be(e.classHash),contract_address_salt:Be(e.addressSalt||0),version:Be(e.version||r.v3),...i}}throw Error("RPC buildTransaction received unknown TransactionType")}},si=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return An(e,this.margin?.maxFee)}estimateFeeToBounds(e){return On(e,this.margin?.l1BoundMaxAmount,this.margin?.l1BoundMaxPricePerUnit)}parseGetBlockResponse(e){return{status:"PENDING",...e}}parseTransactionReceipt(e){return"actual_fee"in e&&ut(e.actual_fee)?{...e,actual_fee:{amount:e.actual_fee,unit:"FRI"}}:e}parseFeeEstimateResponse(e){const t=e[0];return{overall_fee:je(t.overall_fee),gas_consumed:je(t.gas_consumed),gas_price:je(t.gas_price),unit:t.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t),data_gas_consumed:t.data_gas_consumed?je(t.data_gas_consumed):0n,data_gas_price:t.data_gas_price?je(t.data_gas_price):0n}}parseFeeEstimateBulkResponse(e){return e.map((e=>({overall_fee:je(e.overall_fee),gas_consumed:je(e.gas_consumed),gas_price:je(e.gas_price),unit:e.unit,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e),data_gas_consumed:e.data_gas_consumed?je(e.data_gas_consumed):0n,data_gas_price:e.data_gas_price?je(e.data_gas_price):0n})))}parseSimulateTransactionResponse(e){return e.map((e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)})))}parseContractClassResponse(e){return{...e,abi:ut(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},oi=class e{statusReceipt;value;constructor(t){[this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:e.isRejected(t)?["rejected",t]:["error",new Error("Unknown response type")];for(const[e]of Object.entries(this))Object.defineProperty(this,e,{enumerable:!1});for(const[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isRejected(){return"rejected"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return"SUCCEEDED"===e.execution_status}static isReverted(e){return"REVERTED"===e.execution_status}static isRejected(e){return"REJECTED"===e.status}},ai=class{responseParser;channel;constructor(e){e&&"channel"in e?(this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new si):(this.channel=new ii({...e,waitMode:!1}),this.responseParser=new si(e?.feeMarginPercentage))}fetch(e,t,r=0){return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}async getSpecVersion(){return this.channel.getSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if("latest"===e)return;const r=await this.getBlockNumber(),n="pending"===e?r+1:Number(Be(e));if(n<=r)return;const{retries:i}=this.channel;let s=i,o=!1;for(;!o;)if(await this.getBlockNumber()===n?o=!0:await Ln(t),s-=1,s<=0)throw new Error(`waitForBlock() timed-out after ${i} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){const t=await this.channel.getTransactionByHash(e);Me("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");const{calldata:r,contract_address:n,entry_point_selector:i,nonce:s}=t,c=Q([r[0],n,s,i,r.length-1,...r.slice(1)].reduce(((e,t)=>e+Y(Be(t)).padStart(64,"0")),""));return Q((0,o.ci)((0,a.fr)(Ze(c))))}async getBlockWithReceipts(e){if(this.channel instanceof _e.RpcChannel)throw new Se("Unsupported method for RPC version");return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getPendingTransactions(){const{transactions:e}=await this.getBlockWithTxHashes("pending").then(this.responseParser.parseGetBlockResponse);return Promise.all(e.map((e=>this.getTransactionByHash(e))))}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){const t=await this.channel.getTransactionReceipt(e),r=this.responseParser.parseTransactionReceipt(t);return new oi(r)}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then((e=>this.responseParser.parseSimulateTransactionResponse(e)))}async waitForTransaction(e,t){const r=await this.channel.waitForTransaction(e,t);return new oi(r)}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let i;if(e)i=await this.getClassAt(e,r);else{if(!t)throw Error("getContractVersion require contractAddress or classHash");i=await this.getClass(t,r)}return Nn(i)?n?{cairo:"1",compiler:er(i.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getEstimateFee(e,t,r,n){return this.getInvokeEstimateFee(e,t,r,n)}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:"INVOKE_FUNCTION",...e,...t}],{blockIdentifier:r,skipValidate:n}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:"DECLARE",...e,...t}],{blockIdentifier:r,skipValidate:n}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:"DEPLOY_ACCOUNT",...e,...t}],{blockIdentifier:r,skipValidate:n}).then((e=>this.responseParser.parseFeeEstimateResponse(e)))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then((e=>this.responseParser.parseFeeEstimateBulkResponse(e)))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}};E({},{StarknetIdContract:()=>mi,StarknetIdIdentityContract:()=>vi,StarknetIdMulticallContract:()=>_i,StarknetIdPfpContract:()=>Ai,StarknetIdPopContract:()=>Ci,StarknetIdVerifierContract:()=>Si,dynamicCallData:()=>ki,dynamicFelt:()=>Pi,execution:()=>Ti,getStarknetIdContract:()=>bi,getStarknetIdIdentityContract:()=>wi,getStarknetIdMulticallContract:()=>Ei,getStarknetIdPfpContract:()=>Oi,getStarknetIdPopContract:()=>xi,getStarknetIdVerifierContract:()=>Ii,useDecoded:()=>gi,useEncoded:()=>yi});var ci="abcdefghijklmnopqrstuvwxyz0123456789-",li=BigInt(ci.length+1),ui="这来",hi=BigInt(ci.length),di=BigInt(ui.length),pi=BigInt(ui.length+1);function fi(e){let t=0;for(;e.endsWith(ui[ui.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function gi(e){let t="";return e.forEach((e=>{for(;e!==ne;){const r=e%li;if(e/=li,r===BigInt(ci.length)){const r=e/pi;if(r===ne){const n=e%pi;e=r,t+=n===ne?ci[0]:ui[Number(n)-1]}else t+=ui[Number(e%di)],e/=di}else t+=ci[Number(r)]}const[r,n]=fi(t);n&&(t=r+(n%2==0?ui[ui.length-1].repeat(n/2-1)+ui[0]+ci[1]:ui[ui.length-1].repeat((n-1)/2+1))),t+="."})),t?t.concat("stark"):t}function yi(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(ui[0]+ci[1])){const[t,r]=fi(e.substring(0,e.length-2));e=t+ui[ui.length-1].repeat(2*(r+1))}else{const[t,r]=fi(e);r&&(e=t+ui[ui.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){const i=e[n],s=ci.indexOf(i),o=BigInt(ci.indexOf(i));if(-1!==s)n===e.length-1&&e[n]===ci[0]?(t+=r*hi,r*=li,r*=li):(t+=r*o,r*=li);else if(-1!==ui.indexOf(i)){t+=r*hi,r*=li;const s=(n===e.length-1?1:0)+ui.indexOf(i);t+=r*BigInt(s),r*=di}}return t}var mi=(e=>(e.MAINNET="0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",e.TESTNET_SEPOLIA="0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474",e))(mi||{});function bi(e){switch(e){case"0x534e5f4d41494e":return"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678";case"0x534e5f5345504f4c4941":return"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474";default:throw new Error("Starknet.id is not yet deployed on this network")}}var vi=(e=>(e.MAINNET="0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",e.TESTNET_SEPOLIA="0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda",e))(vi||{});function wi(e){switch(e){case"0x534e5f4d41494e":return"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af";case"0x534e5f5345504f4c4941":return"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda";default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var _i="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function Ei(e){switch(e){case"0x534e5f4d41494e":case"0x534e5f5345504f4c4941":return _i;default:throw new Error("Starknet.id multicall contract is not yet deployed on this network")}}var Si=(e=>(e.MAINNET="0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",e.TESTNET_SEPOLIA="0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566",e))(Si||{});function Ii(e){switch(e){case"0x534e5f4d41494e":return"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf";case"0x534e5f5345504f4c4941":return"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566";default:throw new Error("Starknet.id verifier contract is not yet deployed on this network")}}var Ai=(e=>(e.MAINNET="0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",e.TESTNET_SEPOLIA="0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02",e))(Ai||{});function Oi(e){switch(e){case"0x534e5f4d41494e":return"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7";case"0x534e5f5345504f4c4941":return"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02";default:throw new Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var Ci=(e=>(e.MAINNET="0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",e.TESTNET_SEPOLIA="0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a",e))(Ci||{});function xi(e){switch(e){case"0x534e5f4d41494e":return"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4";case"0x534e5f5345504f4c4941":return"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a";default:throw new Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function Ti(e,t=void 0,r=void 0){return new sr({Static:e,IfEqual:t?nr(t[0],t[1],t[2]):void 0,IfNotEqual:r?nr(r[0],r[1],r[2]):void 0})}function Pi(e,t=void 0){return new sr({Hardcoded:e,Reference:t?nr(t[0],t[1]):void 0})}function ki(e,t=void 0,r=void 0){return new sr({Hardcoded:e,Reference:t?nr(t[0],t[1]):void 0,ArrayReference:r?nr(r[0],r[1]):void 0})}(0,m.Mixin)(ai,class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,i,s,o,a){return e.getStarkProfile(this,t,r,n,i,s,o,a)}static async getStarkName(e,t,r){const n=await e.getChainId(),i=r??bi(n);try{const r=gi((await e.callContract({contractAddress:i,entrypoint:"address_to_domain",calldata:xr.compile({address:t,hint:[]})})).map((e=>BigInt(e))).slice(1));if(!r)throw Error("Starkname not found");return r}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){const n=await e.getChainId(),i=r??bi(n);try{const r=t.replace(".stark","").split(".").map((e=>yi(e).toString(10)));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:xr.compile({domain:r,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,i,s,o,a){const c=await e.getChainId(),l=r??bi(c),u=n??wi(c),h=i??Ii(c),d=s??Oi(c),p=o??xi(c),f=a??Ei(c);try{const r=[{execution:Ti({}),to:ki(l),selector:ki(it("address_to_domain")),calldata:[ki(t),ki("0")]},{execution:Ti({}),to:Pi(l),selector:Pi(it("domain_to_id")),calldata:[ki(void 0,void 0,[0,0])]},{execution:Ti({}),to:Pi(u),selector:Pi(it("get_verifier_data")),calldata:[ki(void 0,[1,0]),ki(gt("twitter")),ki(h),ki("0")]},{execution:Ti({}),to:Pi(u),selector:Pi(it("get_verifier_data")),calldata:[ki(void 0,[1,0]),ki(gt("github")),ki(h),ki("0")]},{execution:Ti({}),to:Pi(u),selector:Pi(it("get_verifier_data")),calldata:[ki(void 0,[1,0]),ki(gt("discord")),ki(h),ki("0")]},{execution:Ti({}),to:Pi(u),selector:Pi(it("get_verifier_data")),calldata:[ki(void 0,[1,0]),ki(gt("proof_of_personhood")),ki(p),ki("0")]},{execution:Ti({}),to:Pi(u),selector:Pi(it("get_verifier_data")),calldata:[ki(void 0,[1,0]),ki(gt("nft_pp_contract")),ki(d),ki("0")]},{execution:Ti({}),to:Pi(u),selector:Pi(it("get_extended_verifier_data")),calldata:[ki(void 0,[1,0]),ki(gt("nft_pp_id")),ki("2"),ki(d),ki("0")]},{execution:Ti(void 0,void 0,[6,0,0]),to:Pi(void 0,[6,0]),selector:Pi(it("tokenURI")),calldata:[ki(void 0,[7,1]),ki(void 0,[7,2])]}],n=await e.callContract({contractAddress:f,entrypoint:"aggregate",calldata:xr.compile({calls:r})});if(Array.isArray(n)){const e=parseInt(n[0],16),t=[];let r=1;for(let i=0;i<e&&r<n.length;i+=1){const e=parseInt(n[r],16);r+=1;const i=n.slice(r,r+e);t.push(i),r+=e}const i=gi(t[0].slice(1).map((e=>BigInt(e)))),s="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,o="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,a="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0];return{name:i,twitter:s,github:o,discord:a,proofOfPersonhood:c,profilePicture:("0x9"===n[0]?t[8].slice(1).map((e=>yt(e))).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}}),new ai({default:!0}),E({},{TypedDataRevision:()=>c.P,encodeData:()=>Ki,encodeType:()=>$i,encodeValue:()=>zi,getDependencies:()=>Vi,getMessageHash:()=>Gi,getStructHash:()=>qi,getTypeHash:()=>Hi,isMerkleTreeType:()=>Fi,prepareSelector:()=>Bi}),E({},{MerkleTree:()=>Ni,proofMerklePath:()=>Ri});var Ni=class e{leaves;branches=[];root;hashMethod;constructor(e,t=tn){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);const r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t,r=tn){const[n,i]=[BigInt(e),BigInt(t)].sort(((e,t)=>e>=t?1:-1));return r(n,i)}getProof(t,r=this.leaves,n=[]){const i=r.indexOf(t);if(-1===i)throw new Error("leaf not found");if(1===r.length)return n;const s=i%2==0,o=(s?r[i+1]:r[i-1])??"0x0",a=[...n,o],c=this.leaves.length===r.length?-1:this.branches.findIndex((e=>e.length===r.length)),l=this.branches[c+1]??[this.root];return this.getProof(e.hash(s?t:o,s?o:t,this.hashMethod),l,a)}};function Ri(e,t,r,n=tn){if(0===r.length)return e===t;const[i,...s]=r;return Ri(e,Ni.hash(t,i,n),s,n)}var Mi={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},Di={[c.P.ACTIVE]:{domain:"StarknetDomain",hashMethod:on,hashMerkleMethod:rn,escapeTypeString:e=>`"${e}"`,presetTypes:Mi},[c.P.LEGACY]:{domain:"StarkNetDomain",hashMethod:sn,hashMerkleMethod:tn,escapeTypeString:e=>e,presetTypes:{}}};function Li(e,t,{min:r,max:n}){const i=BigInt(e);Me(i>=r&&i<=n,`${i} (${t}) is out of bounds [${r}, ${n}]`)}function ji({types:e,domain:t}){return Di[c.P.ACTIVE].domain in e&&t.revision===c.P.ACTIVE?c.P.ACTIVE:Di[c.P.LEGACY].domain in e&&(t.revision??c.P.LEGACY)===c.P.LEGACY?c.P.LEGACY:void 0}function Ui(e){try{return Be(e)}catch(t){if(ut(e))return Be(gt(e));throw new Error(`Invalid BigNumberish: ${e}`)}}function Bi(e){return Le(e)?e:it(e)}function Fi(e){return"merkletree"===e.type}function Vi(e,t,r=[],n="",i=c.P.LEGACY){return"*"===t[t.length-1]?t=t.slice(0,-1):i===c.P.ACTIVE&&("enum"===t?t=n:t.match(/^\(.*\)$/)&&(t=t.slice(1,-1))),r.includes(t)||!e[t]?r:[t,...e[t].reduce(((t,r)=>[...t,...Vi(e,r.type,t,r.contains,i).filter((e=>!t.includes(e)))]),[])]}function $i(e,t,r=c.P.LEGACY){const n=r===c.P.ACTIVE?{...e,...Di[r].presetTypes}:e,[i,...s]=Vi(n,t,void 0,void 0,r),o=i?[i,...s.sort()]:[],a=Di[r].escapeTypeString;return o.map((e=>{const t=n[e].map((e=>{const t="enum"===e.type&&r===c.P.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map((e=>e?a(e):e)).join(",")})`:a(t);return`${a(e.name)}:${n}`}));return`${a(e)}(${t})`})).join("")}function Hi(e,t,r=c.P.LEGACY){return it($i(e,t,r))}function zi(e,t,r,n={},i=c.P.LEGACY){if(e[t])return[t,qi(e,t,r,i)];if(Di[i].presetTypes[t])return[t,qi(Di[i].presetTypes,t,r,i)];if(t.endsWith("*")){const n=r.map((r=>zi(e,t.slice(0,-1),r,void 0,i)[1]));return[t,Di[i].hashMethod(n)]}switch(t){case"enum":if(i===c.P.ACTIVE){const[s,o]=Object.entries(r)[0],a=e[n.parent][0],c=e[a.contains],l=c.find((e=>e.name===s)),u=c.indexOf(l),h=l.type.slice(1,-1).split(",").map(((t,r)=>{if(!t)return t;const n=o[r];return zi(e,t,n,void 0,i)[1]}));return[t,Di[i].hashMethod([u,...h])]}return[t,Ui(r)];case"merkletree":{const t=function(e,t){if(t.parent&&t.key){const r=e[t.parent].find((e=>e.name===t.key));if(!Fi(r))throw new Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw new Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}(e,n),s=r.map((r=>zi(e,t,r,void 0,i)[1])),{root:o}=new Ni(s,Di[i].hashMerkleMethod);return["felt",o]}case"selector":return["felt",Bi(r)];case"string":if(i===c.P.ACTIVE){const e=bt(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,Di[i].hashMethod(n)]}return[t,Ui(r)];case"i128":if(i===c.P.ACTIVE){const e=BigInt(r);return Li(e,t,he),[t,Ui(e<0n?oe+e:e)]}return[t,Ui(r)];case"timestamp":case"u128":return i===c.P.ACTIVE&&Li(r,t,de),[t,Ui(r)];case"felt":case"shortstring":return i===c.P.ACTIVE&&Li(Ui(r),t,ue),[t,Ui(r)];case"ClassHash":case"ContractAddress":return i===c.P.ACTIVE&&Li(r,t,ue),[t,Ui(r)];case"bool":return i===c.P.ACTIVE&&Me("boolean"==typeof r,`Type mismatch for ${t} ${r}`),[t,Ui(r)];default:if(i===c.P.ACTIVE)throw new Error(`Unsupported type: ${t}`);return[t,Ui(r)]}}function Ki(e,t,r,n=c.P.LEGACY){const i=e[t]??Di[n].presetTypes[t],[s,o]=i.reduce((([i,s],o)=>{if(void 0===r[o.name]||null===r[o.name]&&"enum"!==o.type)throw new Error(`Cannot encode data: missing data for '${o.name}'`);const a=r[o.name],c={parent:t,key:o.name},[l,u]=zi(e,o.type,a,c,n);return[[...i,l],[...s,u]]}),[["felt"],[Hi(e,t,n)]]);return[s,o]}function qi(e,t,r,n=c.P.LEGACY){return Di[n].hashMethod(Ki(e,t,r,n)[1])}function Gi(e,t){if(!function(e){const t=e;return Boolean(t.message&&t.primaryType&&t.types&&ji(t))}(e))throw new Error("Typed data does not match JSON schema");const r=ji(e),{domain:n,hashMethod:i}=Di[r];return i([gt("StarkNet Message"),qi(e.types,n,e.domain,r),t,qi(e.types,e.primaryType,e.message,r)])}function Wi(e){return new Ct(e).toBigInt()}function Yi(e){return Ct.is(e)}function Qi(e){return new Ct(e).toUint256HexString()}function Xi(e){return"event"===e.type}function Zi(e){const t=e.filter((e=>Xi(e)&&"struct"===e.kind)),r=e.filter((e=>Xi(e)&&"enum"===e.kind));return t.reduce(((e,t)=>{let n=[],{name:i}=t,s=!1;const o=e=>e.type===i;for(;;){const e=r.find((e=>e.variants.some(o)));if(void 0===e)break;const t=e.variants.find(o);n.unshift(t.name),"flat"===t.kind&&(s=!0),i=e.name}if(0===n.length)throw new Error("inconsistency in ABI events definition.");s&&(n=[n[n.length-1]]);const a=n.pop();let c={[Q(l.keccak(z(a)).toString(16))]:t};for(;n.length>0;)c={[Q(l.keccak(z(n.pop())).toString(16))]:c};return c={...c},ts(e,c)}),{})}function Ji(e){return Zt(e)?Zi(e):function(e){return e.filter((e=>"event"===e.type)).reduce(((e,t)=>{const r=t.name,n={...t};return n.name=r,{...e,[Q(l.keccak(z(r)).toString(16))]:n}}),{})}(e)}function es(e){return e&&"object"==typeof e&&!Array.isArray(e)}function ts(e,t){const r={...e};return es(e)&&es(t)&&Object.keys(t).forEach((n=>{es(t[n])?n in e?r[n]=ts(e[n],t[n]):Object.assign(r,{[n]:t[n]}):Object.assign(r,{[n]:t[n]})})),r}function rs(e,t,r,n){return e.flat().reduce(((e,i)=>{let s=t[i.keys.shift()??0];if(!s)return e;for(;!s.name;){const e=i.keys.shift();Me(!!e,'Not enough data in "key" property of this event.'),s=s[e]}const o={};o[s.name]={};const a=i.keys[Symbol.iterator](),c=i.data[Symbol.iterator](),l=s.members?.filter((e=>"key"===e.kind))||s.keys,u=s.members?.filter((e=>"data"===e.kind))||s.data;return l.forEach((e=>{o[s.name][e.name]=vr(a,e,r,n,o[s.name])})),u.forEach((e=>{o[s.name][e.name]=vr(c,e,r,n,o[s.name])})),e.push(o),e}),[])}function ns(e){if(!e.events)throw new Error("UDC emitted event is empty");const t=e.events.find((e=>He(e.from_address)===He(be.ADDRESS)))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}function is(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function ss(e){return e.request({type:"wallet_getPermissions"})}function os(e,t){return e.request({type:"wallet_watchAsset",params:t})}function as(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function cs(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function ls(e){return e.request({type:"wallet_requestChainId"})}function us(e){return e.request({type:"wallet_deploymentData"})}function hs(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function ds(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function ps(e,t){return e.request({type:"wallet_signTypedData",params:t})}function fs(e){return e.request({type:"wallet_supportedSpecs"})}function gs(e,t){e.on("accountsChanged",t)}function ys(e,t){e.on("networkChanged",t)}E({},{UINT_128_MAX:()=>wt,UINT_256_MAX:()=>_t,bnToUint256:()=>Qi,isUint256:()=>Yi,uint256ToBN:()=>Wi}),E({},{getAbiEvents:()=>Ji,isAbiEvent:()=>Xi,isObject:()=>es,parseEvents:()=>rs,parseUDCEvent:()=>ns}),E({},{addDeclareTransaction:()=>ds,addInvokeTransaction:()=>hs,addStarknetChain:()=>as,deploymentData:()=>us,getPermissions:()=>ss,onAccountChange:()=>gs,onNetworkChanged:()=>ys,requestAccounts:()=>is,requestChainId:()=>ls,signMessage:()=>ps,supportedSpecs:()=>fs,switchStarknetChain:()=>cs,watchAsset:()=>os})}}]);