"use strict";var data,value,videoID,idlinka,feature,id,value2,check="false",checkin=!1,ftype=!1,idrequestYoutube=0,idrequestTiktok=0,idrequestTwitter=0;function handleMessage(e,t,r){void 0!==e.data&&null!==e.data&&(data=e.data),void 0!==e.feature&&null!==e.feature&&(feature=e.feature),browser.tabs.query({}).then(sendMessageToTabs).catch(onError)}function onError(e){}function sendMessageToTabs(e){for(let t of e)browser.tabs.sendMessage(t.id,{feature:feature,data:value,check:check,videoID:videoID,idlinka:idlinka}).then(e=>{}).catch(onError);data=""}function listener(e){if(e.url.includes("https://kingdomlikes.com/free_points/count")&&(videoID=getAllUrlParams(e.url).token,"facebooksub"==getAllUrlParams(e.url).type?idlinka=videoID:(idlinka=decodeURIComponent(getAllUrlParams(e.url).url)).toLowerCase().includes("youtube.com/watch?v=")&&(videoID=getAllUrlParams(idlinka).v),l=getAllUrlParams(e.url).token,check="false",checkin=!1),("fblike"===feature||"fbpage"===feature)&&("https://www.facebook.com/api/graphql/"===e.url||"https://m.facebook.com/a/like.php"===e.url.substring(0,33)||"https://www.facebook.com/ajax/pages/fan_status.php"===e.url.substring(0,50)||"https://www.facebook.com/plugins/error/confirm/like"===e.url.trim()||e.url.includes("https://m.facebook.com/ufi/reaction"))){if(null!=(s=videoID.indexOf("12a25b49c57g"))&&s>0&&(videoID=videoID.substring(s+12),ftype=!0),null!=(s=videoID.indexOf("a"+l))&&s>0&&(videoID=videoID.substring(0,s),ftype=!0),videoID.toString(),"https://www.facebook.com/api/graphql/"===e.url.trim()&&e.method.toLowerCase().includes("post")&&-1!==JSON.stringify(e).indexOf("CometPageLikeCommitMutation")){let t=browser.webRequest.filterResponseData(e.requestId),r=new TextDecoder("utf-8");t.ondata=e=>{let t=r.decode(e.data,{stream:!0});var s=t.indexOf("is_viewer_fan");if(-1!==s&&"false"==check){var i=(value2=t.substring(s-1)).indexOf("}");value2=value2.substring(0,i);let u="",o="";for(let a=0;a<value2.length;a++)o+=(u=(u=parseInt(6*value2.charCodeAt(a))).toString(16))+".";value=value+":"+o,check="true"}}}if("https://www.facebook.com/ajax/pages/fan_status.php"===e.url.substring(0,50)){var s,i=e.requestBody.formData;if(JSON.stringify(e),null!=i){let u=browser.webRequest.filterResponseData(e.requestId),o=new TextDecoder("utf-8");u.ondata=e=>{o.decode(e.data,{stream:!0})}}check="true"}("https://m.facebook.com/a/like.php"===e.url.substring(0,33)||e.url.includes("https://m.facebook.com/ufi/reaction"))&&(check="true")}if("https://api.twitter.com/1.1/statuses/unretweet.json"===e.url&&(value=!1,check="true"),"https://twitter.com/i/api/1.1/friendships/create.json"===e.url||"https://twitter.com/i/api/1.1/favorites/destroy.json"===e.url||"https://twitter.com/i/api/1.1/statuses/unretweet.json"===e.url||"https://twitter.com/i/api/1.1/favorites/create.json"===e.url||"https://twitter.com/i/api/1.1/statuses/retweet.json"===e.url||"https://twitter.com/i/api/1.1/friendships/destroy.json"===e.url){idrequestTwitter=e.requestId;var a=JSON.stringify(e.requestBody.formData),s=a.indexOf('id":["');s=(a=a.substring(s+6)).indexOf('"');var l=a.substring(0,s);value=l}if(e.url.includes("instagram.com/web/friendships/")&&e.url.includes("/follow/")){var n=browser.webRequest.filterResponseData(e.requestId),c=new TextDecoder("utf-8");n.ondata=e=>{null!=(s=c.decode(e.data,{stream:!0}).indexOf('"result"'))&&s>0&&(check="true")}}return(e.url.includes("https://www.youtube.com/youtubei/v1/like/like")||e.url.includes("https://www.youtube.com/youtubei/v1/like/dislike"))&&(idrequestYoutube=e.requestId),e.url.includes("https://www.youtube.com/youtubei/v1/like/removelike")&&(idrequestYoutube=e.requestId),e.url.includes("https://www.youtube.com/youtubei/v1/subscription/subscribe")&&(idrequestYoutube=e.requestId),e.url.includes("https://www.youtube.com/youtubei/v1/subscription/unsubscribe")&&(idrequestYoutube=e.requestId),{}}function listenerHeaders2(e){if(e.url.includes("https://twitter.com/i/api/1.1/favorites/destroy.json")&&e.requestId==idrequestTwitter&&200==e.statusCode&&(value="removed",check="true"),e.url.includes("https://twitter.com/i/api/1.1/statuses/unretweet.json")&&e.requestId==idrequestTwitter&&200==e.statusCode&&(value="removed",check="true"),e.url.includes("https://twitter.com/i/api/1.1/friendships/destroy.json")&&e.requestId==idrequestTwitter&&200==e.statusCode&&(value="removed",check="true"),e.url.includes("https://twitter.com/i/api/1.1/favorites/create.json")){if(e.requestId==idrequestTwitter&&200==e.statusCode){let t=e.originUrl,r="",s="";for(let i=0;i<t.length;i++)s+=(r=(r=parseInt(6*t.charCodeAt(i))).toString(16))+".";value=s,check="true"}else value="false",check="true"}if(e.url.includes("https://twitter.com/i/api/1.1/statuses/retweet.json")){if(e.requestId==idrequestTwitter&&200==e.statusCode){let u=e.originUrl,o="",a="";for(let l=0;l<u.length;l++)a+=(o=(o=parseInt(6*u.charCodeAt(l))).toString(16))+".";value=a,check="true"}else value="false",check="true"}if(e.url.includes("https://twitter.com/i/api/1.1/friendships/create.json")){if(e.requestId==idrequestTwitter&&200==e.statusCode){let n=e.originUrl,c="",d="";for(let f=0;f<n.length;f++)d+=(c=(c=parseInt(6*n.charCodeAt(f))).toString(16))+".";value=d,check="true"}else value="false",check="true"}if(e.url.includes("https://www.youtube.com/youtubei/v1/subscription/subscribe")&&e.requestId==idrequestYoutube&&200==e.statusCode){let h=e.originUrl,p="",m="";for(let w=0;w<h.length;w++)m+=(p=(p=parseInt(6*h.charCodeAt(w))).toString(16))+".";value=m,check="true"}if(e.url.includes("https://www.youtube.com/youtubei/v1/subscription/unsubscribe")&&e.requestId==idrequestYoutube&&200==e.statusCode){let g="removed;",b="",v="";for(let k=0;k<g.length;k++)v+=(b=(b=parseInt(6*g.charCodeAt(k))).toString(16))+".";value=v,check="true"}if((e.url.includes("https://www.youtube.com/youtubei/v1/like/like")||e.url.includes("https://www.youtube.com/youtubei/v1/like/dislike"))&&e.requestId==idrequestYoutube&&200==e.statusCode){var $=JSON.stringify(e),_="https://www.youtube.com/watch?v=",q=$.indexOf(_);let y=$.substr(q+_.length,11);y=y+":"+e.timeStamp+":"+e.statusCode;let I="",C="";for(let A=0;A<y.length;A++)C+=(I=(I=parseInt(6*y.charCodeAt(A))).toString(16))+".";value=C,check="true"}if(e.url.includes("https://www.youtube.com/youtubei/v1/like/removelike")&&e.requestId==idrequestYoutube&&200==e.statusCode){let S="removed",D="",T="";for(let x=0;x<S.length;x++)T+=(D=(D=parseInt(6*S.charCodeAt(x))).toString(16))+".";value=T,check="true"}}function listenerHeaders(e){if(console.log(feature),e.url.includes("instagram.com/web/likes/")&&e.url.includes("/like/")||e.url.includes("instagram.com/web/friendships/")&&e.url.includes("/follow/")||e.url.includes("instagram.com/api/graphql")){var t=JSON.stringify(e.requestHeaders);console.log(t);var r="",s="",i=0;for(let u=0;u<t.length;u++)r+=(i=(i=parseInt(7*t.charCodeAt(u))).toString(16))+".";var o=r.indexOf("309.309.2ed.2df.2c3.");null!=o&&o>0&&(r=r.substring(o));var a=e.originUrl,l=a.split("/"),n=l[l.length-2];for(let c=0;c<n.length;c++)s+=(i=(i=parseInt(3*n.charCodeAt(c))).toString(16))+".";(!1==r||""==r||r.length<100)&&(r=t.replace(":"," ")),value=r+":"+s,check="true",browser.tabs.query({}).then(sendMessageToTabs).catch(onError)}if(("fblike"===feature||"fbpage"===feature)&&("https://www.facebook.com/api/graphql/"===e.url||"https://m.facebook.com/a/like.php"===e.url.substring(0,33)||"https://www.facebook.com/ajax/pages/fan_status.php"===e.url.substring(0,50)||"https://www.facebook.com/plugins/error/confirm/like"===e.url.trim()||e.url.includes("https://m.facebook.com/ufi/reaction"))){var t=JSON.stringify(e.requestHeaders),r="",s="",i=0;for(let d=0;d<t.length;d++)r+=(i=(i=parseInt(7*t.charCodeAt(d))).toString(16))+".";var o=r.indexOf("309.309.2ed.2df.2c3.");null!=o&&o>0&&(o=(r=r.substring(o)).indexOf("ee.36b."),r=r.substring(0,o));var a=e.originUrl;for(let f=0;f<a.length;f++)s+=(i=(i=parseInt(3*a.charCodeAt(f))).toString(16))+".";check=!0,value=r+":"+s,browser.tabs.query({}).then(sendMessageToTabs).catch(onError)}if("tiktk"===feature&&e.url.includes("POST"==e.method)&&"POST"==e.method){var h=getAllUrlParams(e.url);if(1==h.type){videoID=h.aweme_id;let p="",m="";for(let w=0;w<videoID.length;w++)p+=(m=(m=parseInt(6*videoID.charCodeAt(w))).toString(16))+".";var t=JSON.stringify(e.requestHeaders),s="",i=0;for(let g=0;g<t.length;g++)s+=(i=(i=parseInt(7*t.charCodeAt(g))).toString(16))+".";var o=s.indexOf("309.309.2ed.2df.2c3.");null!=o&&o>0&&(s=s.substring(o)),console.log(o),value=s,check=!0}else value="remove",check=!0}if("tiktk2"===feature&&e.url.includes("api/commit/follow/user")&&"POST"==e.method&&"POST"==e.method){var t=JSON.stringify(e.requestHeaders),s="",i=0;for(let b=0;b<t.length;b++)s+=(i=(i=parseInt(7*t.charCodeAt(b))).toString(16))+".";var o=s.indexOf("309.309.2ed.2df.2c3.");null!=o&&o>0&&(s=s.substring(o)),value=s,check=!0}return{}}function getAllUrlParams(e){var t=e?e.split("?")[1]:window.location.search.slice(1),r={};if(t)for(var s=(t=t.split("#")[0]).split("&"),i=0;i<s.length;i++){var u=s[i].split("="),o=u[0],a=void 0===u[1]||u[1];if(o=o.toLowerCase(),"string"==typeof a&&(a=a.toLowerCase()),o.match(/\[(\d+)?\]$/)){var l=o.replace(/\[(\d+)?\]/,"");if(r[l]||(r[l]=[]),o.match(/\[\d+\]$/)){var n=/\[(\d+)\]/.exec(o)[1];r[l][n]=a}else r[l].push(a)}else r[o]?(r[o]&&"string"==typeof r[o]&&(r[o]=[r[o]]),r[o].push(a)):r[o]=a}return r}function stoperror(){return!0}browser.runtime.onMessage.addListener(handleMessage),browser.webRequest.onBeforeRequest.addListener(listener,{urls:["*://*.youtube.com/*","*://*.kingdomlikes.com/*","*://*.facebook.com/*","*://*.twitter.com/*","*://*.pinterest.com/*","*://*.instagram.com/*","*://*.tiktok.com/*"]},["requestBody"]),browser.webRequest.onBeforeSendHeaders.addListener(listenerHeaders,{urls:["*://*.instagram.com/*","*://*.facebook.com/*","*://*.tiktok.com/*"]},["blocking","requestHeaders"]),browser.webRequest.onHeadersReceived.addListener(listenerHeaders2,{urls:["*://*.youtube.com/*","*://*.twitter.com/*"]},["responseHeaders"]),browser.browserAction.onClicked.addListener(function(){browser.tabs.update({url:"https://kingdomlikes.com/how-to-use-addon"})}),window.onerror=stoperror;